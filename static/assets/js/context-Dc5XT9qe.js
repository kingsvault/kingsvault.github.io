const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/assets/js/secp256k1-CtbxsCGE.js","static/assets/js/index-CfK4rcrw.js","static/assets/css/index-BHtAH0MK.css","static/assets/js/embedded-wallet-XxPhQvOM.js","static/assets/js/if-defined-ClgXDVtD.js","static/assets/js/index-DU6JWNFF.js","static/assets/js/index-Ojcn0Bpv.js","static/assets/js/index-xgmvEjwu.js","static/assets/js/index-DkjPrcIn.js","static/assets/js/index-D6yDS3ox.js","static/assets/js/index-VZXDDt_-.js","static/assets/js/index-DHAkxII9.js","static/assets/js/index-Cz-yuWXq.js","static/assets/js/email-C7KDA6wl.js","static/assets/js/index-ilG_Z_NW.js","static/assets/js/socials-Dse2mhxa.js","static/assets/js/index-BjzPM4fa.js","static/assets/js/index-C5CkDE9Q.js","static/assets/js/index-74rkZHi-.js","static/assets/js/index-BeUo85ep.js","static/assets/js/swaps-COcWKwN4.js","static/assets/js/index-oVsq9RNO.js","static/assets/js/index-BSArQNQC.js","static/assets/js/index-B3_xuY79.js","static/assets/js/send-CDGvmRHM.js","static/assets/js/index-DeJEeWWL.js","static/assets/js/receive-CGsY7HqW.js","static/assets/js/index-TChnqviz.js","static/assets/js/onramp-5Los2dD0.js","static/assets/js/index-DGPU9VEQ.js","static/assets/js/index-BgRydbL8.js","static/assets/js/transactions-DUW6Uxp3.js","static/assets/js/index-4jsMmDCD.js","static/assets/js/index-BEZaGLX2.js","static/assets/js/index-shpAskPi.js","static/assets/js/w3m-modal-Dx11kma-.js","static/assets/js/index-DNb5aUB0.js"])))=>i.map(i=>d[i]);
var k5=Object.defineProperty;var $C=t=>{throw TypeError(t)};var D5=(t,e,r)=>e in t?k5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var K=(t,e,r)=>D5(t,typeof e!="symbol"?e+"":e,r),pb=(t,e,r)=>e.has(t)||$C("Cannot "+r);var _=(t,e,r)=>(pb(t,e,"read from private field"),r?r.call(t):e.get(t)),Z=(t,e,r)=>e.has(t)?$C("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),k=(t,e,r,n)=>(pb(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),oe=(t,e,r)=>(pb(t,e,"access private method"),r);var hf=(t,e,r,n)=>({set _(s){k(t,e,s,r)},get _(){return _(t,e,n)}});import{r as J,R as $t,p as Er,g as Xw,d as a2,_ as Ls,c as Wn,a as c2}from"./index-CfK4rcrw.js";function u2(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=u2(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Du(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=u2(t))&&(n&&(n+=" "),n+=e);return n}function U5(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}U5(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Gg=t=>typeof t=="number"&&!isNaN(t),Hu=t=>typeof t=="string",ua=t=>typeof t=="function",B5=t=>Hu(t)||Gg(t),iE=t=>Hu(t)||ua(t)?t:null,$5=(t,e)=>t===!1||Gg(t)&&t>0?t:e,oE=t=>J.isValidElement(t)||Hu(t)||ua(t)||Gg(t);function L5(t,e,r=300){let{scrollHeight:n,style:s}=t;requestAnimationFrame(()=>{s.minHeight="initial",s.height=n+"px",s.transition=`all ${r}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,r)})})}function M5({enter:t,exit:e,appendPosition:r=!1,collapse:n=!0,collapseDuration:s=300}){return function({children:i,position:o,preventExitTransition:a,done:c,nodeRef:u,isIn:l,playToast:h}){let d=r?`${t}--${o}`:t,f=r?`${e}--${o}`:e,p=J.useRef(0);return J.useLayoutEffect(()=>{let g=u.current,m=d.split(" "),w=v=>{v.target===u.current&&(h(),g.removeEventListener("animationend",w),g.removeEventListener("animationcancel",w),p.current===0&&v.type!=="animationcancel"&&g.classList.remove(...m))};g.classList.add(...m),g.addEventListener("animationend",w),g.addEventListener("animationcancel",w)},[]),J.useEffect(()=>{let g=u.current,m=()=>{g.removeEventListener("animationend",m),n?L5(g,c,s):c()};l||(a?m():(p.current=1,g.className+=` ${f}`,g.addEventListener("animationend",m)))},[l]),$t.createElement($t.Fragment,null,i)}}function LC(t,e){return{content:l2(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:e}}function l2(t,e,r=!1){return J.isValidElement(t)&&!Hu(t.type)?J.cloneElement(t,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:r}):ua(t)?t({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:r}):t}function F5({closeToast:t,theme:e,ariaLabel:r="close"}){return $t.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:n=>{n.stopPropagation(),t(!0)},"aria-label":r},$t.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},$t.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function j5({delay:t,isRunning:e,closeToast:r,type:n="default",hide:s,className:i,controlledProgress:o,progress:a,rtl:c,isIn:u,theme:l}){let h=s||o&&a===0,d={animationDuration:`${t}ms`,animationPlayState:e?"running":"paused"};o&&(d.transform=`scaleX(${a})`);let f=Du("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${l}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":c}),p=ua(i)?i({rtl:c,type:n,defaultClassName:f}):Du(f,i),g={[o&&a>=1?"onTransitionEnd":"onAnimationEnd"]:o&&a<1?null:()=>{u&&r()}};return $t.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":h},$t.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${l} Toastify__progress-bar--${n}`}),$t.createElement("div",{role:"progressbar","aria-hidden":h?"true":"false","aria-label":"notification timer",className:p,style:d,...g}))}var z5=1,h2=()=>`${z5++}`;function H5(t,e,r){let n=1,s=0,i=[],o=[],a=e,c=new Map,u=new Set,l=v=>(u.add(v),()=>u.delete(v)),h=()=>{o=Array.from(c.values()),u.forEach(v=>v())},d=({containerId:v,toastId:E,updateId:A})=>{let S=v?v!==t:t!==1,C=c.has(E)&&A==null;return S||C},f=(v,E)=>{c.forEach(A=>{var S;(E==null||E===A.props.toastId)&&((S=A.toggle)==null||S.call(A,v))})},p=v=>{var E,A;(A=(E=v.props)==null?void 0:E.onClose)==null||A.call(E,v.removalReason),v.isActive=!1},g=v=>{if(v==null)c.forEach(p);else{let E=c.get(v);E&&p(E)}h()},m=()=>{s-=i.length,i=[]},w=v=>{var E,A;let{toastId:S,updateId:C}=v.props,T=C==null;v.staleId&&c.delete(v.staleId),v.isActive=!0,c.set(S,v),h(),r(LC(v,T?"added":"updated")),T&&((A=(E=v.props).onOpen)==null||A.call(E))};return{id:t,props:a,observe:l,toggle:f,removeToast:g,toasts:c,clearQueue:m,buildToast:(v,E)=>{if(d(E))return;let{toastId:A,updateId:S,data:C,staleId:T,delay:O}=E,P=S==null;P&&s++;let B={...a,style:a.toastStyle,key:n++,...Object.fromEntries(Object.entries(E).filter(([Q,se])=>se!=null)),toastId:A,updateId:S,data:C,isIn:!1,className:iE(E.className||a.toastClassName),progressClassName:iE(E.progressClassName||a.progressClassName),autoClose:E.isLoading?!1:$5(E.autoClose,a.autoClose),closeToast(Q){c.get(A).removalReason=Q,g(A)},deleteToast(){let Q=c.get(A);if(Q!=null){if(r(LC(Q,"removed")),c.delete(A),s--,s<0&&(s=0),i.length>0){w(i.shift());return}h()}}};B.closeButton=a.closeButton,E.closeButton===!1||oE(E.closeButton)?B.closeButton=E.closeButton:E.closeButton===!0&&(B.closeButton=oE(a.closeButton)?a.closeButton:!0);let L={content:v,props:B,staleId:T};a.limit&&a.limit>0&&s>a.limit&&P?i.push(L):Gg(O)?setTimeout(()=>{w(L)},O):w(L)},setProps(v){a=v},setToggle:(v,E)=>{let A=c.get(v);A&&(A.toggle=E)},isToastActive:v=>{var E;return(E=c.get(v))==null?void 0:E.isActive},getSnapshot:()=>o}}var An=new Map,_p=[],aE=new Set,q5=t=>aE.forEach(e=>e(t)),d2=()=>An.size>0;function W5(){_p.forEach(t=>p2(t.content,t.options)),_p=[]}var V5=(t,{containerId:e})=>{var r;return(r=An.get(e||1))==null?void 0:r.toasts.get(t)};function f2(t,e){var r;if(e)return!!((r=An.get(e))!=null&&r.isToastActive(t));let n=!1;return An.forEach(s=>{s.isToastActive(t)&&(n=!0)}),n}function G5(t){if(!d2()){_p=_p.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||B5(t))An.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=An.get(t.containerId);e?e.removeToast(t.id):An.forEach(r=>{r.removeToast(t.id)})}}var K5=(t={})=>{An.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function p2(t,e){oE(t)&&(d2()||_p.push({content:t,options:e}),An.forEach(r=>{r.buildToast(t,e)}))}function J5(t){var e;(e=An.get(t.containerId||1))==null||e.setToggle(t.id,t.fn)}function g2(t,e){An.forEach(r=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===r.id)&&r.toggle(t,e==null?void 0:e.id)})}function Y5(t){let e=t.containerId||1;return{subscribe(r){let n=H5(e,t,q5);An.set(e,n);let s=n.observe(r);return W5(),()=>{s(),An.delete(e)}},setProps(r){var n;(n=An.get(e))==null||n.setProps(r)},getSnapshot(){var r;return(r=An.get(e))==null?void 0:r.getSnapshot()}}}function Q5(t){return aE.add(t),()=>{aE.delete(t)}}function Z5(t){return t&&(Hu(t.toastId)||Gg(t.toastId))?t.toastId:h2()}function Kg(t,e){return p2(t,e),e.toastId}function e0(t,e){return{...e,type:e&&e.type||t,toastId:Z5(e)}}function t0(t){return(e,r)=>Kg(e,e0(t,r))}function Rt(t,e){return Kg(t,e0("default",e))}Rt.loading=(t,e)=>Kg(t,e0("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function X5(t,{pending:e,error:r,success:n},s){let i;e&&(i=Hu(e)?Rt.loading(e,s):Rt.loading(e.render,{...s,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},a=(u,l,h)=>{if(l==null){Rt.dismiss(i);return}let d={type:u,...o,...s,data:h},f=Hu(l)?{render:l}:l;return i?Rt.update(i,{...d,...f}):Rt(f.render,{...d,...f}),h},c=ua(t)?t():t;return c.then(u=>a("success",n,u)).catch(u=>a("error",r,u)),c}Rt.promise=X5;Rt.success=t0("success");Rt.info=t0("info");Rt.error=t0("error");Rt.warning=t0("warning");Rt.warn=Rt.warning;Rt.dark=(t,e)=>Kg(t,e0("default",{theme:"dark",...e}));function e$(t){G5(t)}Rt.dismiss=e$;Rt.clearWaitingQueue=K5;Rt.isActive=f2;Rt.update=(t,e={})=>{let r=V5(t,e);if(r){let{props:n,content:s}=r,i={delay:100,...n,...e,toastId:e.toastId||t,updateId:h2()};i.toastId!==t&&(i.staleId=t);let o=i.render||s;delete i.render,Kg(o,i)}};Rt.done=t=>{Rt.update(t,{progress:1})};Rt.onChange=Q5;Rt.play=t=>g2(!0,t);Rt.pause=t=>g2(!1,t);function t$(t){var e;let{subscribe:r,getSnapshot:n,setProps:s}=J.useRef(Y5(t)).current;s(t);let i=(e=J.useSyncExternalStore(r,n,n))==null?void 0:e.slice();function o(a){if(!i)return[];let c=new Map;return t.newestOnTop&&i.reverse(),i.forEach(u=>{let{position:l}=u.props;c.has(l)||c.set(l,[]),c.get(l).push(u)}),Array.from(c,u=>a(u[0],u[1]))}return{getToastToRender:o,isToastActive:f2,count:i==null?void 0:i.length}}function r$(t){let[e,r]=J.useState(!1),[n,s]=J.useState(!1),i=J.useRef(null),o=J.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:c,closeToast:u,onClick:l,closeOnClick:h}=t;J5({id:t.toastId,containerId:t.containerId,fn:r}),J.useEffect(()=>{if(t.pauseOnFocusLoss)return d(),()=>{f()}},[t.pauseOnFocusLoss]);function d(){document.hasFocus()||w(),window.addEventListener("focus",m),window.addEventListener("blur",w)}function f(){window.removeEventListener("focus",m),window.removeEventListener("blur",w)}function p(T){if(t.draggable===!0||t.draggable===T.pointerType){v();let O=i.current;o.canCloseOnClick=!0,o.canDrag=!0,O.style.transition="none",t.draggableDirection==="x"?(o.start=T.clientX,o.removalDistance=O.offsetWidth*(t.draggablePercent/100)):(o.start=T.clientY,o.removalDistance=O.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function g(T){let{top:O,bottom:P,left:B,right:L}=i.current.getBoundingClientRect();T.nativeEvent.type!=="touchend"&&t.pauseOnHover&&T.clientX>=B&&T.clientX<=L&&T.clientY>=O&&T.clientY<=P?w():m()}function m(){r(!0)}function w(){r(!1)}function v(){o.didMove=!1,document.addEventListener("pointermove",A),document.addEventListener("pointerup",S)}function E(){document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",S)}function A(T){let O=i.current;if(o.canDrag&&O){o.didMove=!0,e&&w(),t.draggableDirection==="x"?o.delta=T.clientX-o.start:o.delta=T.clientY-o.start,o.start!==T.clientX&&(o.canCloseOnClick=!1);let P=t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;O.style.transform=`translate3d(${P},0)`,O.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function S(){E();let T=i.current;if(o.canDrag&&o.didMove&&T){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){s(!0),t.closeToast(!0),t.collapseAll();return}T.style.transition="transform 0.2s, opacity 0.2s",T.style.removeProperty("transform"),T.style.removeProperty("opacity")}}let C={onPointerDown:p,onPointerUp:g};return a&&c&&(C.onMouseEnter=w,t.stacked||(C.onMouseLeave=m)),h&&(C.onClick=T=>{l&&l(T),o.canCloseOnClick&&u(!0)}),{playToast:m,pauseToast:w,isRunning:e,preventExitTransition:n,toastRef:i,eventHandlers:C}}var n$=typeof window<"u"?J.useLayoutEffect:J.useEffect,r0=({theme:t,type:e,isLoading:r,...n})=>$t.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...n});function s$(t){return $t.createElement(r0,{...t},$t.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function i$(t){return $t.createElement(r0,{...t},$t.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function o$(t){return $t.createElement(r0,{...t},$t.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function a$(t){return $t.createElement(r0,{...t},$t.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function c$(){return $t.createElement("div",{className:"Toastify__spinner"})}var cE={info:i$,warning:s$,success:o$,error:a$,spinner:c$},u$=t=>t in cE;function l$({theme:t,type:e,isLoading:r,icon:n}){let s=null,i={theme:t,type:e};return n===!1||(ua(n)?s=n({...i,isLoading:r}):J.isValidElement(n)?s=J.cloneElement(n,i):r?s=cE.spinner():u$(e)&&(s=cE[e](i))),s}var h$=t=>{let{isRunning:e,preventExitTransition:r,toastRef:n,eventHandlers:s,playToast:i}=r$(t),{closeButton:o,children:a,autoClose:c,onClick:u,type:l,hideProgressBar:h,closeToast:d,transition:f,position:p,className:g,style:m,progressClassName:w,updateId:v,role:E,progress:A,rtl:S,toastId:C,deleteToast:T,isIn:O,isLoading:P,closeOnClick:B,theme:L,ariaLabel:Q}=t,se=Du("Toastify__toast",`Toastify__toast-theme--${L}`,`Toastify__toast--${l}`,{"Toastify__toast--rtl":S},{"Toastify__toast--close-on-click":B}),V=ua(g)?g({rtl:S,position:p,type:l,defaultClassName:se}):Du(se,g),I=l$(t),x=!!A||!c,M={closeToast:d,type:l,theme:L},G=null;return o===!1||(ua(o)?G=o(M):J.isValidElement(o)?G=J.cloneElement(o,M):G=F5(M)),$t.createElement(f,{isIn:O,done:T,position:p,preventExitTransition:r,nodeRef:n,playToast:i},$t.createElement("div",{id:C,tabIndex:0,onClick:u,"data-in":O,className:V,...s,style:m,ref:n,...O&&{role:E,"aria-label":Q}},I!=null&&$t.createElement("div",{className:Du("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!P})},I),l2(a,t,!e),G,!t.customProgressBar&&$t.createElement(j5,{...v&&!x?{key:`p-${v}`}:{},rtl:S,theme:L,delay:c,isRunning:e,isIn:O,closeToast:d,hide:h,type:l,className:w,controlledProgress:x,progress:A||0})))},d$=(t,e=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}),f$=M5(d$("bounce",!0)),p$={position:"top-right",transition:f$,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function Efe(t){let e={...p$,...t},r=t.stacked,[n,s]=J.useState(!0),i=J.useRef(null),{getToastToRender:o,isToastActive:a,count:c}=t$(e),{className:u,style:l,rtl:h,containerId:d,hotKeys:f}=e;function p(m){let w=Du("Toastify__toast-container",`Toastify__toast-container--${m}`,{"Toastify__toast-container--rtl":h});return ua(u)?u({position:m,rtl:h,defaultClassName:w}):Du(w,iE(u))}function g(){r&&(s(!0),Rt.play())}return n$(()=>{var m;if(r){let w=i.current.querySelectorAll('[data-in="true"]'),v=12,E=(m=e.position)==null?void 0:m.includes("top"),A=0,S=0;Array.from(w).reverse().forEach((C,T)=>{let O=C;O.classList.add("Toastify__toast--stacked"),T>0&&(O.dataset.collapsed=`${n}`),O.dataset.pos||(O.dataset.pos=E?"top":"bot");let P=A*(n?.2:1)+(n?0:v*T);O.style.setProperty("--y",`${E?P:P*-1}px`),O.style.setProperty("--g",`${v}`),O.style.setProperty("--s",`${1-(n?S:0)}`),A+=O.offsetHeight,S+=.025})}},[n,c,r]),J.useEffect(()=>{function m(w){var v;let E=i.current;f(w)&&((v=E.querySelector('[tabIndex="0"]'))==null||v.focus(),s(!1),Rt.pause()),w.key==="Escape"&&(document.activeElement===E||E!=null&&E.contains(document.activeElement))&&(s(!0),Rt.play())}return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[f]),$t.createElement("section",{ref:i,className:"Toastify",id:d,onMouseEnter:()=>{r&&(s(!1),Rt.pause())},onMouseLeave:g,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},o((m,w)=>{let v=w.length?{...l}:{...l,pointerEvents:"none"};return $t.createElement("div",{tabIndex:-1,className:p(m),"data-stacked":r,style:v,key:`c-${m}`},w.map(({content:E,props:A})=>$t.createElement(h$,{...A,stacked:r,collapseAll:g,isIn:a(A.toastId,A.containerId),key:`t-${A.key}`},E)))}))}const Te=globalThis||void 0||self;var df={},MC;function g$(){if(MC)return df;MC=1,Object.defineProperty(df,"__esModule",{value:!0}),df.parse=o,df.serialize=u;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,i=(()=>{const d=function(){};return d.prototype=Object.create(null),d})();function o(d,f){const p=new i,g=d.length;if(g<2)return p;const m=(f==null?void 0:f.decode)||l;let w=0;do{const v=d.indexOf("=",w);if(v===-1)break;const E=d.indexOf(";",w),A=E===-1?g:E;if(v>A){w=d.lastIndexOf(";",v-1)+1;continue}const S=a(d,w,v),C=c(d,v,S),T=d.slice(S,C);if(p[T]===void 0){let O=a(d,v+1,A),P=c(d,A,O);const B=m(d.slice(O,P));p[T]=B}w=A+1}while(w<g);return p}function a(d,f,p){do{const g=d.charCodeAt(f);if(g!==32&&g!==9)return f}while(++f<p);return p}function c(d,f,p){for(;f>p;){const g=d.charCodeAt(--f);if(g!==32&&g!==9)return f+1}return p}function u(d,f,p){const g=(p==null?void 0:p.encode)||encodeURIComponent;if(!t.test(d))throw new TypeError(`argument name is invalid: ${d}`);const m=g(f);if(!e.test(m))throw new TypeError(`argument val is invalid: ${f}`);let w=d+"="+m;if(!p)return w;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);w+="; Max-Age="+p.maxAge}if(p.domain){if(!r.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);w+="; Domain="+p.domain}if(p.path){if(!n.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);w+="; Path="+p.path}if(p.expires){if(!h(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);w+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(w+="; HttpOnly"),p.secure&&(w+="; Secure"),p.partitioned&&(w+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":w+="; Priority=Low";break;case"medium":w+="; Priority=Medium";break;case"high":w+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":w+="; SameSite=Strict";break;case"lax":w+="; SameSite=Lax";break;case"none":w+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return w}function l(d){if(d.indexOf("%")===-1)return d;try{return decodeURIComponent(d)}catch{return d}}function h(d){return s.call(d)==="[object Date]"}return df}g$();var FC="popstate";function m$(t={}){function e(s,i){let{pathname:o="/",search:a="",hash:c=""}=dl(s.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),uE("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");a=u===-1?c:c.slice(0,u)}return a+"#"+(typeof i=="string"?i:Ap(i))}function n(s,i){Qs(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return w$(e,r,n,t)}function Qt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Qs(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function y$(){return Math.random().toString(36).substring(2,10)}function jC(t,e){return{usr:t.state,key:t.key,idx:e}}function uE(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?dl(e):e,state:r,key:e&&e.key||n||y$()}}function Ap({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function dl(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function w$(t,e,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a="POP",c=null,u=l();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function l(){return(o.state||{idx:null}).idx}function h(){a="POP";let m=l(),w=m==null?null:m-u;u=m,c&&c({action:a,location:g.location,delta:w})}function d(m,w){a="PUSH";let v=uE(g.location,m,w);r&&r(v,m),u=l()+1;let E=jC(v,u),A=g.createHref(v);try{o.pushState(E,"",A)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(A)}i&&c&&c({action:a,location:g.location,delta:1})}function f(m,w){a="REPLACE";let v=uE(g.location,m,w);r&&r(v,m),u=l();let E=jC(v,u),A=g.createHref(v);o.replaceState(E,"",A),i&&c&&c({action:a,location:g.location,delta:0})}function p(m){let w=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof m=="string"?m:Ap(m);return v=v.replace(/ $/,"%20"),Qt(w,`No window.location.(origin|href) available to create URL for href: ${v}`),new URL(v,w)}let g={get action(){return a},get location(){return t(s,o)},listen(m){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(FC,h),c=m,()=>{s.removeEventListener(FC,h),c=null}},createHref(m){return e(s,m)},createURL:p,encodeLocation(m){let w=p(m);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:d,replace:f,go(m){return o.go(m)}};return g}function m2(t,e,r="/"){return b$(t,e,r,!1)}function b$(t,e,r,n){let s=typeof e=="string"?dl(e):e,i=la(s.pathname||"/",r);if(i==null)return null;let o=y2(t);v$(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=R$(i);a=x$(o[c],u,n)}return a}function y2(t,e=[],r=[],n=""){let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Qt(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let u=na([n,c.relativePath]),l=r.concat(c);i.children&&i.children.length>0&&(Qt(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),y2(i.children,e,l,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:T$(u,i.index),routesMeta:l})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of w2(i.path))s(i,o,c)}),e}function w2(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=w2(n.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function v$(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:N$(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var E$=/^:[\w-]+$/,_$=3,A$=2,C$=1,S$=10,I$=-2,zC=t=>t==="*";function T$(t,e){let r=t.split("/"),n=r.length;return r.some(zC)&&(n+=I$),e&&(n+=A$),r.filter(s=>!zC(s)).reduce((s,i)=>s+(E$.test(i)?_$:i===""?C$:S$),n)}function N$(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function x$(t,e,r=!1){let{routesMeta:n}=t,s={},i="/",o=[];for(let a=0;a<n.length;++a){let c=n[a],u=a===n.length-1,l=i==="/"?e:e.slice(i.length)||"/",h=Yy({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},l),d=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=Yy({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},l)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:na([i,h.pathname]),pathnameBase:U$(na([i,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(i=na([i,h.pathnameBase]))}return o}function Yy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=O$(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((u,{paramName:l,isOptional:h},d)=>{if(l==="*"){let p=a[d]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const f=a[d];return h&&!f?u[l]=void 0:u[l]=(f||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function O$(t,e=!1,r=!0){Qs(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(n.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function R$(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qs(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function la(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function P$(t,e="/"){let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?dl(t):t;return{pathname:r?r.startsWith("/")?r:k$(r,e):e,search:B$(n),hash:$$(s)}}function k$(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function gb(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function D$(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function b2(t){let e=D$(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function v2(t,e,r,n=!1){let s;typeof t=="string"?s=dl(t):(s={...t},Qt(!s.pathname||!s.pathname.includes("?"),gb("?","pathname","search",s)),Qt(!s.pathname||!s.pathname.includes("#"),gb("#","pathname","hash",s)),Qt(!s.search||!s.search.includes("#"),gb("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;s.pathname=d.join("/")}a=h>=0?e[h]:"/"}let c=P$(s,a),u=o&&o!=="/"&&o.endsWith("/"),l=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||l)&&(c.pathname+="/"),c}var na=t=>t.join("/").replace(/\/\/+/g,"/"),U$=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),B$=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$$=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function L$(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var E2=["POST","PUT","PATCH","DELETE"];new Set(E2);var M$=["GET",...E2];new Set(M$);var Hd=J.createContext(null);Hd.displayName="DataRouter";var n0=J.createContext(null);n0.displayName="DataRouterState";var _2=J.createContext({isTransitioning:!1});_2.displayName="ViewTransition";var F$=J.createContext(new Map);F$.displayName="Fetchers";var j$=J.createContext(null);j$.displayName="Await";var yo=J.createContext(null);yo.displayName="Navigation";var Jg=J.createContext(null);Jg.displayName="Location";var wa=J.createContext({outlet:null,matches:[],isDataRoute:!1});wa.displayName="Route";var AA=J.createContext(null);AA.displayName="RouteError";function z$(t,{relative:e}={}){Qt(Yg(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=J.useContext(yo),{hash:s,pathname:i,search:o}=Qg(t,{relative:e}),a=i;return r!=="/"&&(a=i==="/"?r:na([r,i])),n.createHref({pathname:a,search:o,hash:s})}function Yg(){return J.useContext(Jg)!=null}function Tc(){return Qt(Yg(),"useLocation() may be used only in the context of a <Router> component."),J.useContext(Jg).location}var A2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function C2(t){J.useContext(yo).static||J.useLayoutEffect(t)}function S2(){let{isDataRoute:t}=J.useContext(wa);return t?tL():H$()}function H$(){Qt(Yg(),"useNavigate() may be used only in the context of a <Router> component.");let t=J.useContext(Hd),{basename:e,navigator:r}=J.useContext(yo),{matches:n}=J.useContext(wa),{pathname:s}=Tc(),i=JSON.stringify(b2(n)),o=J.useRef(!1);return C2(()=>{o.current=!0}),J.useCallback((c,u={})=>{if(Qs(o.current,A2),!o.current)return;if(typeof c=="number"){r.go(c);return}let l=v2(c,JSON.parse(i),s,u.relative==="path");t==null&&e!=="/"&&(l.pathname=l.pathname==="/"?e:na([e,l.pathname])),(u.replace?r.replace:r.push)(l,u.state,u)},[e,r,i,s,t])}J.createContext(null);function Qg(t,{relative:e}={}){let{matches:r}=J.useContext(wa),{pathname:n}=Tc(),s=JSON.stringify(b2(r));return J.useMemo(()=>v2(t,JSON.parse(s),n,e==="path"),[t,s,n,e])}function q$(t,e){return I2(t,e)}function I2(t,e,r,n){var v;Qt(Yg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:i}=J.useContext(yo),{matches:o}=J.useContext(wa),a=o[o.length-1],c=a?a.params:{},u=a?a.pathname:"/",l=a?a.pathnameBase:"/",h=a&&a.route;{let E=h&&h.path||"";T2(u,!h||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let d=Tc(),f;if(e){let E=typeof e=="string"?dl(e):e;Qt(l==="/"||((v=E.pathname)==null?void 0:v.startsWith(l)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${l}" but pathname "${E.pathname}" was given in the \`location\` prop.`),f=E}else f=d;let p=f.pathname||"/",g=p;if(l!=="/"){let E=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(E.length).join("/")}let m=!i&&r&&r.matches&&r.matches.length>0?r.matches:m2(t,{pathname:g});Qs(h||m!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Qs(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=J$(m&&m.map(E=>Object.assign({},E,{params:Object.assign({},c,E.params),pathname:na([l,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:na([l,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,r,n);return e&&w?J.createElement(Jg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},w):w}function W$(){let t=eL(),e=L$(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=J.createElement(J.Fragment,null,J.createElement("p",null,"💿 Hey developer 👋"),J.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",J.createElement("code",{style:i},"ErrorBoundary")," or"," ",J.createElement("code",{style:i},"errorElement")," prop on your route.")),J.createElement(J.Fragment,null,J.createElement("h2",null,"Unexpected Application Error!"),J.createElement("h3",{style:{fontStyle:"italic"}},e),r?J.createElement("pre",{style:s},r):null,o)}var V$=J.createElement(W$,null),G$=class extends J.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?J.createElement(wa.Provider,{value:this.props.routeContext},J.createElement(AA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function K$({routeContext:t,match:e,children:r}){let n=J.useContext(Hd);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),J.createElement(wa.Provider,{value:t},r)}function J$(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,i=r==null?void 0:r.errors;if(i!=null){let c=s.findIndex(u=>u.route.id&&(i==null?void 0:i[u.route.id])!==void 0);Qt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let o=!1,a=-1;if(r)for(let c=0;c<s.length;c++){let u=s[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=c),u.route.id){let{loaderData:l,errors:h}=r,d=u.route.loader&&!l.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||d){o=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((c,u,l)=>{let h,d=!1,f=null,p=null;r&&(h=i&&u.route.id?i[u.route.id]:void 0,f=u.route.errorElement||V$,o&&(a<0&&l===0?(T2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):a===l&&(d=!0,p=u.route.hydrateFallbackElement||null)));let g=e.concat(s.slice(0,l+1)),m=()=>{let w;return h?w=f:d?w=p:u.route.Component?w=J.createElement(u.route.Component,null):u.route.element?w=u.route.element:w=c,J.createElement(K$,{match:u,routeContext:{outlet:c,matches:g,isDataRoute:r!=null},children:w})};return r&&(u.route.ErrorBoundary||u.route.errorElement||l===0)?J.createElement(G$,{location:r.location,revalidation:r.revalidation,component:f,error:h,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}function CA(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Y$(t){let e=J.useContext(Hd);return Qt(e,CA(t)),e}function Q$(t){let e=J.useContext(n0);return Qt(e,CA(t)),e}function Z$(t){let e=J.useContext(wa);return Qt(e,CA(t)),e}function SA(t){let e=Z$(t),r=e.matches[e.matches.length-1];return Qt(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function X$(){return SA("useRouteId")}function eL(){var n;let t=J.useContext(AA),e=Q$("useRouteError"),r=SA("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function tL(){let{router:t}=Y$("useNavigate"),e=SA("useNavigate"),r=J.useRef(!1);return C2(()=>{r.current=!0}),J.useCallback(async(s,i={})=>{Qs(r.current,A2),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var HC={};function T2(t,e,r){!e&&!HC[t]&&(HC[t]=!0,Qs(!1,r))}J.memo(rL);function rL({routes:t,future:e,state:r}){return I2(t,void 0,r,e)}function nL(t){Qt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sL({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){Qt(!Yg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=J.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof r=="string"&&(r=dl(r));let{pathname:c="/",search:u="",hash:l="",state:h=null,key:d="default"}=r,f=J.useMemo(()=>{let p=la(c,o);return p==null?null:{location:{pathname:p,search:u,hash:l,state:h,key:d},navigationType:n}},[o,c,u,l,h,d,n]);return Qs(f!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${l}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:J.createElement(yo.Provider,{value:a},J.createElement(Jg.Provider,{children:e,value:f}))}function _fe({children:t,location:e}){return q$(lE(t),e)}function lE(t,e=[]){let r=[];return J.Children.forEach(t,(n,s)=>{if(!J.isValidElement(n))return;let i=[...e,s];if(n.type===J.Fragment){r.push.apply(r,lE(n.props.children,i));return}Qt(n.type===nL,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=lE(n.props.children,i)),r.push(o)}),r}var by="get",vy="application/x-www-form-urlencoded";function s0(t){return t!=null&&typeof t.tagName=="string"}function iL(t){return s0(t)&&t.tagName.toLowerCase()==="button"}function oL(t){return s0(t)&&t.tagName.toLowerCase()==="form"}function aL(t){return s0(t)&&t.tagName.toLowerCase()==="input"}function cL(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function uL(t,e){return t.button===0&&(!e||e==="_self")&&!cL(t)}function hE(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function lL(t,e){let r=hE(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(i=>{r.append(s,i)})}),r}var Pm=null;function hL(){if(Pm===null)try{new FormData(document.createElement("form"),0),Pm=!1}catch{Pm=!0}return Pm}var dL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function mb(t){return t!=null&&!dL.has(t)?(Qs(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vy}"`),null):t}function fL(t,e){let r,n,s,i,o;if(oL(t)){let a=t.getAttribute("action");n=a?la(a,e):null,r=t.getAttribute("method")||by,s=mb(t.getAttribute("enctype"))||vy,i=new FormData(t)}else if(iL(t)||aL(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||a.getAttribute("action");if(n=c?la(c,e):null,r=t.getAttribute("formmethod")||a.getAttribute("method")||by,s=mb(t.getAttribute("formenctype"))||mb(a.getAttribute("enctype"))||vy,i=new FormData(a,t),!hL()){let{name:u,type:l,value:h}=t;if(l==="image"){let d=u?`${u}.`:"";i.append(`${d}x`,"0"),i.append(`${d}y`,"0")}else u&&i.append(u,h)}}else{if(s0(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=by,n=null,s=vy,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:o}}function IA(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function pL(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gL(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function mL(t,e,r){let n=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await pL(i,r);return o.links?o.links():[]}return[]}));return vL(n.flat(1).filter(gL).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function qC(t,e,r,n,s,i){let o=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,a=(c,u)=>{var l;return r[u].pathname!==c.pathname||((l=r[u].route.path)==null?void 0:l.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,u)=>o(c,u)||a(c,u)):i==="data"?e.filter((c,u)=>{var h;let l=n.routes[c.route.id];if(!l||!l.hasLoader)return!1;if(o(c,u)||a(c,u))return!0;if(c.route.shouldRevalidate){let d=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function yL(t,e,{includeHydrateFallback:r}={}){return wL(t.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function wL(t){return[...new Set(t)]}function bL(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function vL(t,e){let r=new Set;return new Set(e),t.reduce((n,s)=>{let i=JSON.stringify(bL(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function EL(t,e){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname="_root.data":e&&la(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function N2(){let t=J.useContext(Hd);return IA(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function _L(){let t=J.useContext(n0);return IA(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var TA=J.createContext(void 0);TA.displayName="FrameworkContext";function x2(){let t=J.useContext(TA);return IA(t,"You must render this element inside a <HydratedRouter> element"),t}function AL(t,e){let r=J.useContext(TA),[n,s]=J.useState(!1),[i,o]=J.useState(!1),{onFocus:a,onBlur:c,onMouseEnter:u,onMouseLeave:l,onTouchStart:h}=e,d=J.useRef(null);J.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let g=w=>{w.forEach(v=>{o(v.isIntersecting)})},m=new IntersectionObserver(g,{threshold:.5});return d.current&&m.observe(d.current),()=>{m.disconnect()}}},[t]),J.useEffect(()=>{if(n){let g=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(g)}}},[n]);let f=()=>{s(!0)},p=()=>{s(!1),o(!1)};return r?t!=="intent"?[i,d,{}]:[i,d,{onFocus:ff(a,f),onBlur:ff(c,p),onMouseEnter:ff(u,f),onMouseLeave:ff(l,p),onTouchStart:ff(h,f)}]:[!1,d,{}]}function ff(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function CL({page:t,...e}){let{router:r}=N2(),n=J.useMemo(()=>m2(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?J.createElement(IL,{page:t,matches:n,...e}):null}function SL(t){let{manifest:e,routeModules:r}=x2(),[n,s]=J.useState([]);return J.useEffect(()=>{let i=!1;return mL(t,e,r).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,r]),n}function IL({page:t,matches:e,...r}){let n=Tc(),{manifest:s,routeModules:i}=x2(),{basename:o}=N2(),{loaderData:a,matches:c}=_L(),u=J.useMemo(()=>qC(t,e,c,s,n,"data"),[t,e,c,s,n]),l=J.useMemo(()=>qC(t,e,c,s,n,"assets"),[t,e,c,s,n]),h=J.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let p=new Set,g=!1;if(e.forEach(w=>{var E;let v=s.routes[w.route.id];!v||!v.hasLoader||(!u.some(A=>A.route.id===w.route.id)&&w.route.id in a&&((E=i[w.route.id])!=null&&E.shouldRevalidate)||v.hasClientLoader?g=!0:p.add(w.route.id))}),p.size===0)return[];let m=EL(t,o);return g&&p.size>0&&m.searchParams.set("_routes",e.filter(w=>p.has(w.route.id)).map(w=>w.route.id).join(",")),[m.pathname+m.search]},[o,a,n,s,u,e,t,i]),d=J.useMemo(()=>yL(l,s),[l,s]),f=SL(l);return J.createElement(J.Fragment,null,h.map(p=>J.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...r})),d.map(p=>J.createElement("link",{key:p,rel:"modulepreload",href:p,...r})),f.map(({key:p,link:g})=>J.createElement("link",{key:p,...g})))}function TL(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var O2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{O2&&(window.__reactRouterVersion="7.4.1")}catch{}function Afe({basename:t,children:e,window:r}){let n=J.useRef();n.current==null&&(n.current=m$({window:r,v5Compat:!0}));let s=n.current,[i,o]=J.useState({action:s.action,location:s.location}),a=J.useCallback(c=>{J.startTransition(()=>o(c))},[o]);return J.useLayoutEffect(()=>s.listen(a),[s,a]),J.createElement(sL,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var R2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,P2=J.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:o,state:a,target:c,to:u,preventScrollReset:l,viewTransition:h,...d},f){let{basename:p}=J.useContext(yo),g=typeof u=="string"&&R2.test(u),m,w=!1;if(typeof u=="string"&&g&&(m=u,O2))try{let P=new URL(window.location.href),B=u.startsWith("//")?new URL(P.protocol+u):new URL(u),L=la(B.pathname,p);B.origin===P.origin&&L!=null?u=L+B.search+B.hash:w=!0}catch{Qs(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=z$(u,{relative:s}),[E,A,S]=AL(n,d),C=RL(u,{replace:o,state:a,target:c,preventScrollReset:l,relative:s,viewTransition:h});function T(P){e&&e(P),P.defaultPrevented||C(P)}let O=J.createElement("a",{...d,...S,href:m||v,onClick:w||i?e:T,ref:TL(f,A),target:c,"data-discover":!g&&r==="render"?"true":void 0});return E&&!g?J.createElement(J.Fragment,null,O,J.createElement(CL,{page:v})):O});P2.displayName="Link";var NL=J.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:o,viewTransition:a,children:c,...u},l){let h=Qg(o,{relative:u.relative}),d=Tc(),f=J.useContext(n0),{navigator:p,basename:g}=J.useContext(yo),m=f!=null&&BL(h)&&a===!0,w=p.encodeLocation?p.encodeLocation(h).pathname:h.pathname,v=d.pathname,E=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;r||(v=v.toLowerCase(),E=E?E.toLowerCase():null,w=w.toLowerCase()),E&&g&&(E=la(E,g)||E);const A=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let S=v===w||!s&&v.startsWith(w)&&v.charAt(A)==="/",C=E!=null&&(E===w||!s&&E.startsWith(w)&&E.charAt(w.length)==="/"),T={isActive:S,isPending:C,isTransitioning:m},O=S?e:void 0,P;typeof n=="function"?P=n(T):P=[n,S?"active":null,C?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let B=typeof i=="function"?i(T):i;return J.createElement(P2,{...u,"aria-current":O,className:P,ref:l,style:B,to:o,viewTransition:a},typeof c=="function"?c(T):c)});NL.displayName="NavLink";var xL=J.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:s,state:i,method:o=by,action:a,onSubmit:c,relative:u,preventScrollReset:l,viewTransition:h,...d},f)=>{let p=DL(),g=UL(a,{relative:u}),m=o.toLowerCase()==="get"?"get":"post",w=typeof a=="string"&&R2.test(a),v=E=>{if(c&&c(E),E.defaultPrevented)return;E.preventDefault();let A=E.nativeEvent.submitter,S=(A==null?void 0:A.getAttribute("formmethod"))||o;p(A||E.currentTarget,{fetcherKey:e,method:S,navigate:r,replace:s,state:i,relative:u,preventScrollReset:l,viewTransition:h})};return J.createElement("form",{ref:f,method:m,action:g,onSubmit:n?c:v,...d,"data-discover":!w&&t==="render"?"true":void 0})});xL.displayName="Form";function OL(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function k2(t){let e=J.useContext(Hd);return Qt(e,OL(t)),e}function RL(t,{target:e,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=S2(),c=Tc(),u=Qg(t,{relative:i});return J.useCallback(l=>{if(uL(l,e)){l.preventDefault();let h=r!==void 0?r:Ap(c)===Ap(u);a(t,{replace:h,state:n,preventScrollReset:s,relative:i,viewTransition:o})}},[c,a,u,r,n,e,t,s,i,o])}function Cfe(t){Qs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=J.useRef(hE(t)),r=J.useRef(!1),n=Tc(),s=J.useMemo(()=>lL(n.search,r.current?null:e.current),[n.search]),i=S2(),o=J.useCallback((a,c)=>{const u=hE(typeof a=="function"?a(s):a);r.current=!0,i("?"+u,c)},[i,s]);return[s,o]}var PL=0,kL=()=>`__${String(++PL)}__`;function DL(){let{router:t}=k2("useSubmit"),{basename:e}=J.useContext(yo),r=X$();return J.useCallback(async(n,s={})=>{let{action:i,method:o,encType:a,formData:c,body:u}=fL(n,e);if(s.navigate===!1){let l=s.fetcherKey||kL();await t.fetch(l,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function UL(t,{relative:e}={}){let{basename:r}=J.useContext(yo),n=J.useContext(wa);Qt(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Qg(t||".",{relative:e})},o=Tc();if(t==null){i.search=o.search;let a=new URLSearchParams(i.search),c=a.getAll("index");if(c.some(l=>l==="")){a.delete("index"),c.filter(h=>h).forEach(h=>a.append("index",h));let l=a.toString();i.search=l?`?${l}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:na([r,i.pathname])),Ap(i)}function BL(t,e={}){let r=J.useContext(_2);Qt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=k2("useViewTransitionState"),s=Qg(t,{relative:e.relative});if(!r.isTransitioning)return!1;let i=la(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=la(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Yy(s.pathname,o)!=null||Yy(s.pathname,i)!=null}new TextEncoder;const $L=Symbol(),NA=Symbol(),pf="a",rp="w";let LL=(t,e)=>new Proxy(t,e);const dE=Object.getPrototypeOf,fE=new WeakMap,D2=t=>t&&(fE.has(t)?fE.get(t):dE(t)===Object.prototype||dE(t)===Array.prototype),Qy=t=>typeof t=="object"&&t!==null,ML=t=>{if(Array.isArray(t))return Array.from(t);const e=Object.getOwnPropertyDescriptors(t);return Object.values(e).forEach(r=>{r.configurable=!0}),Object.create(dE(t),e)},xA=t=>t[NA]||t,U2=(t,e,r,n)=>{if(!D2(t))return t;let s=n&&n.get(t);if(!s){const c=xA(t);s=(u=>Object.values(Object.getOwnPropertyDescriptors(u)).some(l=>!l.configurable&&!l.writable))(c)?[c,ML(c)]:[c],n==null||n.set(t,s)}const[i,o]=s;let a=r&&r.get(i);return a&&a[1].f===!!o||(a=((c,u)=>{const l={f:u};let h=!1;const d=(p,g)=>{if(!h){let m=l[pf].get(c);if(m||(m={},l[pf].set(c,m)),p===rp)m[rp]=!0;else{let w=m[p];w||(w=new Set,m[p]=w),w.add(g)}}},f={get:(p,g)=>g===NA?c:(d("k",g),U2(Reflect.get(p,g),l[pf],l.c,l.t)),has:(p,g)=>g===$L?(h=!0,l[pf].delete(c),!0):(d("h",g),Reflect.has(p,g)),getOwnPropertyDescriptor:(p,g)=>(d("o",g),Reflect.getOwnPropertyDescriptor(p,g)),ownKeys:p=>(d(rp),Reflect.ownKeys(p))};return u&&(f.set=f.deleteProperty=()=>!1),[f,l]})(i,!!o),a[1].p=LL(o||i,a[0]),r&&r.set(i,a)),a[1][pf]=e,a[1].c=r,a[1].t=n,a[1].p},B2=(t,e,r,n,s=Object.is)=>{if(s(t,e))return!1;if(!Qy(t)||!Qy(e))return!0;const i=r.get(xA(t));if(!i)return!0;if(n){const a=n.get(t);if(a&&a.n===e)return a.g;n.set(t,{n:e,g:!1})}let o=null;try{for(const a of i.h||[])if(o=Reflect.has(t,a)!==Reflect.has(e,a),o)return o;if(i[rp]===!0){if(o=((a,c)=>{const u=Reflect.ownKeys(a),l=Reflect.ownKeys(c);return u.length!==l.length||u.some((h,d)=>h!==l[d])})(t,e),o)return o}else for(const a of i.o||[])if(o=!!Reflect.getOwnPropertyDescriptor(t,a)!=!!Reflect.getOwnPropertyDescriptor(e,a),o)return o;for(const a of i.k||[])if(o=B2(t[a],e[a],r,n,s),o)return o;return o===null&&(o=!0),o}finally{n&&n.set(t,{n:e,g:o})}},FL=t=>D2(t)&&t[NA]||null,WC=(t,e=!0)=>{fE.set(t,e)},jL=(t,e,r)=>{const n=[],s=new WeakSet,i=(o,a)=>{if(s.has(o))return;Qy(o)&&s.add(o);const c=Qy(o)&&e.get(xA(o));if(c){var u,l;if((u=c.h)==null||u.forEach(d=>{const f=`:has(${String(d)})`;n.push(a?[...a,f]:[f])}),c[rp]===!0){const d=":ownKeys";n.push(a?[...a,d]:[d])}else{var h;(h=c.o)==null||h.forEach(d=>{const f=`:hasOwn(${String(d)})`;n.push(a?[...a,f]:[f])})}(l=c.k)==null||l.forEach(d=>{!("value"in(Object.getOwnPropertyDescriptor(o,d)||{}))||i(o[d],a?[...a,d]:[d])})}else a&&n.push(a)};return i(t),n},Zy={},yb=t=>typeof t=="object"&&t!==null,Pa=new WeakMap,Lf=new WeakSet,zL=(t=Object.is,e=(u,l)=>new Proxy(u,l),r=u=>yb(u)&&!Lf.has(u)&&(Array.isArray(u)||!(Symbol.iterator in u))&&!(u instanceof WeakMap)&&!(u instanceof WeakSet)&&!(u instanceof Error)&&!(u instanceof Number)&&!(u instanceof Date)&&!(u instanceof String)&&!(u instanceof RegExp)&&!(u instanceof ArrayBuffer),n=u=>{switch(u.status){case"fulfilled":return u.value;case"rejected":throw u.reason;default:throw u}},s=new WeakMap,i=(u,l,h=n)=>{const d=s.get(u);if((d==null?void 0:d[0])===l)return d[1];const f=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u));return WC(f,!0),s.set(u,[l,f]),Reflect.ownKeys(u).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(u,p),{enumerable:m}=Reflect.getOwnPropertyDescriptor(u,p),w={value:g,enumerable:m,configurable:!0};if(Lf.has(g))WC(g,!1);else if(g instanceof Promise)delete w.value,w.get=()=>h(g);else if(Pa.has(g)){const[v,E]=Pa.get(g);w.value=i(v,E(),h)}Object.defineProperty(f,p,w)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=u=>{if(!yb(u))throw new Error("object required");const l=o.get(u);if(l)return l;let h=a[0];const d=new Set,f=(P,B=++a[0])=>{h!==B&&(h=B,d.forEach(L=>L(P,B)))};let p=a[1];const g=(P=++a[1])=>(p!==P&&!d.size&&(p=P,w.forEach(([B])=>{const L=B[1](P);L>h&&(h=L)})),h),m=P=>(B,L)=>{const Q=[...B];Q[1]=[P,...Q[1]],f(Q,L)},w=new Map,v=(P,B)=>{if((Zy?"production":void 0)!=="production"&&w.has(P))throw new Error("prop listener already exists");if(d.size){const L=B[3](m(P));w.set(P,[B,L])}else w.set(P,[B])},E=P=>{var B;const L=w.get(P);L&&(w.delete(P),(B=L[1])==null||B.call(L))},A=P=>(d.add(P),d.size===1&&w.forEach(([L,Q],se)=>{if((Zy?"production":void 0)!=="production"&&Q)throw new Error("remove already exists");const V=L[3](m(se));w.set(se,[L,V])}),()=>{d.delete(P),d.size===0&&w.forEach(([L,Q],se)=>{Q&&(Q(),w.set(se,[L]))})}),S=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u)),T=e(S,{deleteProperty(P,B){const L=Reflect.get(P,B);E(B);const Q=Reflect.deleteProperty(P,B);return Q&&f(["delete",[B],L]),Q},set(P,B,L,Q){const se=Reflect.has(P,B),V=Reflect.get(P,B,Q);if(se&&(t(V,L)||o.has(L)&&t(V,o.get(L))))return!0;E(B),yb(L)&&(L=FL(L)||L);let I=L;if(L instanceof Promise)L.then(x=>{L.status="fulfilled",L.value=x,f(["resolve",[B],x])}).catch(x=>{L.status="rejected",L.reason=x,f(["reject",[B],x])});else{!Pa.has(L)&&r(L)&&(I=c(L));const x=!Lf.has(I)&&Pa.get(I);x&&v(B,x)}return Reflect.set(P,B,I,Q),f(["set",[B],L,V]),!0}});o.set(u,T);const O=[S,g,i,A];return Pa.set(T,O),Reflect.ownKeys(u).forEach(P=>{const B=Object.getOwnPropertyDescriptor(u,P);"value"in B&&(T[P]=u[P],delete B.value,delete B.writable),Object.defineProperty(S,P,B)}),T})=>[c,Pa,Lf,t,e,r,n,s,i,o,a],[HL]=zL();function Zt(t={}){return HL(t)}function hn(t,e,r){const n=Pa.get(t);(Zy?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let s;const i=[],o=n[3];let a=!1;const u=o(l=>{i.push(l),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,u()}}function qu(t,e){const r=Pa.get(t);(Zy?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");const[n,s,i]=r;return i(n,s(),e)}function Wu(t){return Lf.add(t),t}function Xn(t,e,r,n){let s=t[e];return hn(t,()=>{const i=t[e];Object.is(s,i)||r(s=i)})}function qL(t){const e=Zt({data:Array.from([]),has(r){return this.data.some(n=>n[0]===r)},set(r,n){const s=this.data.find(i=>i[0]===r);return s?s[1]=n:this.data.push([r,n]),this},get(r){var n;return(n=this.data.find(s=>s[0]===r))==null?void 0:n[1]},delete(r){const n=this.data.findIndex(s=>s[0]===r);return n===-1?!1:(this.data.splice(n,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(r){this.data.forEach(n=>{r(n[1],n[0],this)})},keys(){return this.data.map(r=>r[0]).values()},values(){return this.data.map(r=>r[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}const $2={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(r=>r.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]}};var WL=20,VL=1,qd=1e6,GL=1e6,KL=-7,JL=21,YL=!1,Zg="[big.js] ",fl=Zg+"Invalid ",i0=fl+"decimal places",QL=fl+"rounding mode",L2=Zg+"Division by zero",bt={},ao=void 0,ZL=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function M2(){function t(e){var r=this;if(!(r instanceof t))return e===ao?M2():new t(e);if(e instanceof t)r.s=e.s,r.e=e.e,r.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(fl+"value");e=e===0&&1/e<0?"-0":String(e)}XL(r,e)}r.constructor=t}return t.prototype=bt,t.DP=WL,t.RM=VL,t.NE=KL,t.PE=JL,t.strict=YL,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function XL(t,e){var r,n,s;if(!ZL.test(e))throw Error(fl+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),s=e.length,n=0;n<s&&e.charAt(n)=="0";)++n;if(n==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=r-n-1,t.c=[],r=0;n<=s;)t.c[r++]=+e.charAt(n++)}return t}function pl(t,e,r,n){var s=t.c;if(r===ao&&(r=t.constructor.RM),r!==0&&r!==1&&r!==2&&r!==3)throw Error(QL);if(e<1)n=r===3&&(n||!!s[0])||e===0&&(r===1&&s[0]>=5||r===2&&(s[0]>5||s[0]===5&&(n||s[1]!==ao))),s.length=1,n?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(n=r===1&&s[e]>=5||r===2&&(s[e]>5||s[e]===5&&(n||s[e+1]!==ao||s[e-1]&1))||r===3&&(n||!!s[0]),s.length=e,n){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function gl(t,e,r){var n=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)s="0"+s;s="0."+s}else if(n>0)if(++n>i)for(n-=i;n--;)s+="0";else n<i&&(s=s.slice(0,n)+"."+s.slice(n));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&r?"-"+s:s}bt.abs=function(){var t=new this.constructor(this);return t.s=1,t};bt.cmp=function(t){var e,r=this,n=r.c,s=(t=new r.constructor(t)).c,i=r.s,o=t.s,a=r.e,c=t.e;if(!n[0]||!s[0])return n[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=n.length)<(c=s.length)?a:c,i=-1;++i<o;)if(n[i]!=s[i])return n[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};bt.div=function(t){var e=this,r=e.constructor,n=e.c,s=(t=new r(t)).c,i=e.s==t.s?1:-1,o=r.DP;if(o!==~~o||o<0||o>qd)throw Error(i0);if(!s[0])throw Error(L2);if(!n[0])return t.s=i,t.c=[t.e=0],t;var a,c,u,l,h,d=s.slice(),f=a=s.length,p=n.length,g=n.slice(0,a),m=g.length,w=t,v=w.c=[],E=0,A=o+(w.e=e.e-t.e)+1;for(w.s=i,i=A<0?0:A,d.unshift(0);m++<a;)g.push(0);do{for(u=0;u<10;u++){if(a!=(m=g.length))l=a>m?1:-1;else for(h=-1,l=0;++h<a;)if(s[h]!=g[h]){l=s[h]>g[h]?1:-1;break}if(l<0){for(c=m==a?s:d;m;){if(g[--m]<c[m]){for(h=m;h&&!g[--h];)g[h]=9;--g[h],g[m]+=10}g[m]-=c[m]}for(;!g[0];)g.shift()}else break}v[E++]=l?u:++u,g[0]&&l?g[m]=n[f]||0:g=[n[f]]}while((f++<p||g[0]!==ao)&&i--);return!v[0]&&E!=1&&(v.shift(),w.e--,A--),E>A&&pl(w,A,r.RM,g[0]!==ao),w};bt.eq=function(t){return this.cmp(t)===0};bt.gt=function(t){return this.cmp(t)>0};bt.gte=function(t){return this.cmp(t)>-1};bt.lt=function(t){return this.cmp(t)<0};bt.lte=function(t){return this.cmp(t)<1};bt.minus=bt.sub=function(t){var e,r,n,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var u=i.c.slice(),l=i.e,h=t.c,d=t.e;if(!u[0]||!h[0])return h[0]?t.s=-c:u[0]?t=new o(i):t.s=1,t;if(a=l-d){for((s=a<0)?(a=-a,n=u):(d=l,n=h),n.reverse(),c=a;c--;)n.push(0);n.reverse()}else for(r=((s=u.length<h.length)?u:h).length,a=c=0;c<r;c++)if(u[c]!=h[c]){s=u[c]<h[c];break}if(s&&(n=u,u=h,h=n,t.s=-t.s),(c=(r=h.length)-(e=u.length))>0)for(;c--;)u[e++]=0;for(c=e;r>a;){if(u[--r]<h[r]){for(e=r;e&&!u[--e];)u[e]=9;--u[e],u[r]+=10}u[r]-=h[r]}for(;u[--c]===0;)u.pop();for(;u[0]===0;)u.shift(),--d;return u[0]||(t.s=1,u=[d=0]),t.c=u,t.e=d,t};bt.mod=function(t){var e,r=this,n=r.constructor,s=r.s,i=(t=new n(t)).s;if(!t.c[0])throw Error(L2);return r.s=t.s=1,e=t.cmp(r)==1,r.s=s,t.s=i,e?new n(r):(s=n.DP,i=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=s,n.RM=i,this.minus(r.times(t)))};bt.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};bt.plus=bt.add=function(t){var e,r,n,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,u=t.c;if(!a[0]||!u[0])return u[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,n=u):(e=-e,n=a),n.reverse();e--;)n.push(0);n.reverse()}for(a.length-u.length<0&&(n=u,u=a,a=n),e=u.length,r=0;e;a[e]%=10)r=(a[--e]=a[e]+u[e]+r)/10|0;for(r&&(a.unshift(r),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};bt.pow=function(t){var e=this,r=new e.constructor("1"),n=r,s=t<0;if(t!==~~t||t<-1e6||t>GL)throw Error(fl+"exponent");for(s&&(t=-t);t&1&&(n=n.times(e)),t>>=1,!!t;)e=e.times(e);return s?r.div(n):n};bt.prec=function(t,e){if(t!==~~t||t<1||t>qd)throw Error(fl+"precision");return pl(new this.constructor(this),t,e)};bt.round=function(t,e){if(t===ao)t=0;else if(t!==~~t||t<-1e6||t>qd)throw Error(i0);return pl(new this.constructor(this),t+this.e+1,e)};bt.sqrt=function(){var t,e,r,n=this,s=n.constructor,i=n.s,o=n.e,a=new s("0.5");if(!n.c[0])return new s(n);if(i<0)throw Error(Zg+"No square root");i=Math.sqrt(+gl(n,!0,!0)),i===0||i===1/0?(e=n.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do r=t,t=a.times(r.plus(n.div(r)));while(r.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return pl(t,(s.DP-=4)+t.e+1,s.RM)};bt.times=bt.mul=function(t){var e,r=this,n=r.constructor,s=r.c,i=(t=new n(t)).c,o=s.length,a=i.length,c=r.e,u=t.e;if(t.s=r.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+u,o<a&&(e=s,s=i,i=e,u=o,o=a,a=u),e=new Array(u=o+a);u--;)e[u]=0;for(c=a;c--;){for(a=0,u=o+c;u>c;)a=e[u]+i[c]*s[u-c-1]+a,e[u--]=a%10,a=a/10|0;e[u]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};bt.toExponential=function(t,e){var r=this,n=r.c[0];if(t!==ao){if(t!==~~t||t<0||t>qd)throw Error(i0);for(r=pl(new r.constructor(r),++t,e);r.c.length<t;)r.c.push(0)}return gl(r,!0,!!n)};bt.toFixed=function(t,e){var r=this,n=r.c[0];if(t!==ao){if(t!==~~t||t<0||t>qd)throw Error(i0);for(r=pl(new r.constructor(r),t+r.e+1,e),t=t+r.e+1;r.c.length<t;)r.c.push(0)}return gl(r,!1,!!n)};bt[Symbol.for("nodejs.util.inspect.custom")]=bt.toJSON=bt.toString=function(){var t=this,e=t.constructor;return gl(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};bt.toNumber=function(){var t=+gl(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(Zg+"Imprecise conversion");return t};bt.toPrecision=function(t,e){var r=this,n=r.constructor,s=r.c[0];if(t!==ao){if(t!==~~t||t<1||t>qd)throw Error(fl+"precision");for(r=pl(new n(r),t,e);r.c.length<t;)r.c.push(0)}return gl(r,t<=r.e||r.e<=n.NE||r.e>=n.PE,!!s)};bt.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(Zg+"valueOf disallowed");return gl(t,t.e<=e.NE||t.e>=e.PE,!0)};var gf=M2();const km={bigNumber(t){return t?new gf(t):new gf(0)},multiply(t,e){if(t===void 0||e===void 0)return new gf(0);const r=new gf(t),n=new gf(e);return r.times(n)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},eM=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],tM=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],rM=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],le={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network"},nM={getERC20Abi:t=>le.USDT_CONTRACT_ADDRESSES.includes(t)?rM:eM,getSwapAbi:()=>tM},Ro={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[r,n,s]=e;if(!r||!n||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:r,chainId:n,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[r,n]=e;if(!r||!n)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:r,chainId:n}}},qe={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types"};function wb(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const $e={setItem(t,e){Mf()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Mf())return localStorage.getItem(t)||void 0},removeItem(t){Mf()&&localStorage.removeItem(t)},clear(){Mf()&&localStorage.clear()}};function Mf(){return typeof window<"u"&&typeof localStorage<"u"}function ta(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}function sM(t){return(t==null?void 0:t.endsWith(le.WC_NAME_SUFFIX_LEGACY))||(t==null?void 0:t.endsWith(le.WC_NAME_SUFFIX))}var VC={};const bb=(typeof Er<"u"&&typeof VC<"u"?VC.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",Sfe=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],Ife="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",cn={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:bb,SECURE_SITE_DASHBOARD:`${bb}/dashboard`,SECURE_SITE_FAVICON:`${bb}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in a new browser tab"},DEFAULT_FEATURES:{swaps:!0,onramp:!0,receive:!0,send:!0,email:!0,emailShowWallets:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],history:!0,analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},be={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=be.getActiveNamespace(),e=be.getActiveCaipNetworkId(),r=e?e.split(":")[1]:void 0,n=r?isNaN(Number(r))?r:Number(r):void 0;return{namespace:t,caipNetworkId:e,chainId:n}},setWalletConnectDeepLink({name:t,href:e}){try{$e.setItem(qe.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=$e.getItem(qe.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{$e.removeItem(qe.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{$e.setItem(qe.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{$e.setItem(qe.ACTIVE_CAIP_NETWORK_ID,t),be.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return $e.getItem(qe.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{$e.removeItem(qe.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=wb(t);$e.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=be.getRecentWallets();e.find(n=>n.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),$e.setItem(qe.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=$e.getItem(qe.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const r=wb(t);$e.setItem(r,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return $e.getItem(qe.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=wb(t);return $e.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{$e.setItem(qe.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return $e.getItem(qe.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{$e.removeItem(qe.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return $e.getItem(qe.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var r;const t=$e.getItem(qe.ACTIVE_CAIP_NETWORK_ID);return(r=t==null?void 0:t.split(":"))==null?void 0:r[1]},setConnectionStatus(t){try{$e.setItem(qe.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return $e.getItem(qe.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=$e.getItem(qe.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));$e.setItem(qe.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=be.getConnectedNamespaces();e.includes(t)||(e.push(t),be.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=be.getConnectedNamespaces(),r=e.indexOf(t);r>-1&&(e.splice(r,1),be.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return $e.getItem(qe.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{$e.setItem(qe.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{$e.removeItem(qe.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=$e.getItem(qe.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=be.getBalanceCache();$e.setItem(qe.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const r=be.getBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.portfolio))return r.balance;be.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=be.getBalanceCache();e[t.caipAddress]=t,$e.setItem(qe.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=$e.getItem(qe.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=be.getBalanceCache();$e.setItem(qe.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const r=be.getNativeBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.nativeBalance))return r;console.info("Discarding cache for address",t),be.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=be.getNativeBalanceCache();e[t.caipAddress]=t,$e.setItem(qe.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=$e.getItem(qe.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const r=be.getEnsCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.ens))return r.ens;be.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=be.getEnsCache();e[t.address]=t,$e.setItem(qe.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=be.getEnsCache();$e.setItem(qe.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=$e.getItem(qe.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const r=be.getIdentityCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.identity))return r.identity;be.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=be.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},$e.setItem(qe.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=be.getIdentityCache();$e.setItem(qe.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{$e.removeItem(qe.PORTFOLIO_CACHE),$e.removeItem(qe.NATIVE_BALANCE_CACHE),$e.removeItem(qe.ENS_CACHE),$e.removeItem(qe.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{$e.setItem(qe.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=$e.getItem(qe.PREFERRED_ACCOUNT_TYPES);return JSON.parse(t)}catch{console.info("Unable to get preferred account types")}}},De={isMobile(){var t;return this.isClient()?!!((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return De.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=cn.TEN_SEC_MS:!0},isAllowedRetry(t,e=cn.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},getPairingExpiry(){return Date.now()+cn.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let r;return(...n)=>{function s(){t(...n)}r&&clearTimeout(r),r=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e){if(De.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},formatUniversalUrl(t,e){if(!De.isHttpUrl(t))return this.formatNativeUrl(t,e);let r=t;r.endsWith("/")||(r=`${r}/`);const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?be.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,r){window==null||window.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},returnOpenHref(t,e,r){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},async preloadImage(t){const e=new Promise((r,n)=>{const s=new Image;s.onload=r,s.onerror=n,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,De.wait(2e3)])},formatBalance(t,e){let r="0.000";if(typeof t=="string"){const n=Number(t);if(n){const s=Math.floor(n*1e3)/1e3;s&&(r=s.toString())}}return`${r}${e?` ${e}`:""}`},formatBalance2(t,e){var n;let r;if(t==="0")r="0";else if(typeof t=="string"){const s=Number(t);s&&(r=(n=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:n[0])}return{value:r??"0",rest:r==="0"?"000":"",symbol:e}},getApiUrl(){return le.W3M_API_URL},getBlockchainApiUrl(){return le.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return le.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,r;return typeof t=="string"?t:typeof((r=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:r.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const r={};return e&&t&&(t.forEach((n,s)=>{r[n]=s}),e.sort((n,s)=>{const i=r[n.id],o=r[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const r of t)e+=r.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[r,n]=e.split(".");return{dollars:r,pennies:n}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const r=new Set;return t.filter(n=>{const s=n[e];return r.has(s)?!1:(r.add(s),!0)})},generateSdkVersion(t,e,r){const s=t.length===0?cn.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${r}`},createAccount(t,e,r,n,s){return{namespace:t,address:e,type:r,publicKey:n,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),r=e[0];return e.filter(Boolean).length===3&&r in le.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,r="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),r,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,r,e)},injectIntoUrl(t,e,r){const n=t.indexOf(e);if(n===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",n),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,n+i),c=t.substring(n+i,o),u=t.substring(s),l=c+r;return a+l+u}};async function mf(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class o0{constructor({baseUrl:e,clientId:r}){this.baseUrl=e,this.clientId=r}async get({headers:e,signal:r,cache:n,...s}){const i=this.createUrl(s);return(await mf(i,{method:"GET",headers:e,signal:r,cache:n})).json()}async getBlob({headers:e,signal:r,...n}){const s=this.createUrl(n);return(await mf(s,{method:"GET",headers:e,signal:r})).blob()}async post({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await mf(i,{method:"POST",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async put({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await mf(i,{method:"PUT",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async delete({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await mf(i,{method:"DELETE",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}createUrl({path:e,params:r}){const n=new URL(e,this.baseUrl);return r&&Object.entries(r).forEach(([s,i])=>{i&&n.searchParams.append(s,i)}),this.clientId&&n.searchParams.append("clientId",this.clientId),n}}const iM={handleSolanaDeeplinkRedirect(t){if($.state.activeChain===le.CHAIN.SOLANA){const e=window.location.href,r=encodeURIComponent(e);if(t==="Phantom"&&!("phantom"in window)){const n=e.startsWith("https")?"https":"http",s=e.split("/")[2],i=encodeURIComponent(`${n}://${s}`);window.location.href=`https://phantom.app/ul/browse/${r}?ref=${i}`}t==="Coinbase Wallet"&&!("coinbaseSolana"in window)&&(window.location.href=`https://go.cb-w.com/dapp?cb_url=${r}`)}}},ns=Zt({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),yi={state:ns,subscribeNetworkImages(t){return hn(ns.networkImages,()=>t(ns.networkImages))},subscribeKey(t,e){return Xn(ns,t,e)},subscribe(t){return hn(ns,()=>t(ns))},setWalletImage(t,e){ns.walletImages[t]=e},setNetworkImage(t,e){ns.networkImages[t]=e},setChainImage(t,e){ns.chainImages[t]=e},setConnectorImage(t,e){ns.connectorImages={...ns.connectorImages,[t]:e}},setTokenImage(t,e){ns.tokenImages[t]=e},setCurrencyImage(t,e){ns.currencyImages[t]=e}},oM={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00"},vb=Zt({networkImagePromises:{}}),F2={async fetchWalletImage(t){if(t)return await Ue._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(vb.networkImagePromises[t]||(vb.networkImagePromises[t]=Ue._fetchNetworkImage(t)),await vb.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return yi.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return yi.state.walletImages[t.image_id]},getNetworkImage(t){var e,r,n;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(r=t==null?void 0:t.assets)==null?void 0:r.imageUrl;if((n=t==null?void 0:t.assets)!=null&&n.imageId)return yi.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return yi.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return yi.state.connectorImages[t.imageId]},getChainImage(t){return yi.state.networkImages[oM[t]]}},aM={getFeatureValue(t,e){const r=e==null?void 0:e[t];return r===void 0?cn.DEFAULT_FEATURES[t]:r},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(De.isTelegram()){if(De.isIos())return t.filter(e=>e!=="google");if(De.isMac())return t.filter(e=>e!=="x");if(De.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Oe=Zt({features:cn.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:{solana:"eoa",bip122:"payment",polkadot:"eoa",eip155:"smartAccount"},enableNetworkSwitch:!0}),ue={state:Oe,subscribeKey(t,e){return Xn(Oe,t,e)},setOptions(t){Object.assign(Oe,t)},setFeatures(t){if(!t)return;Oe.features||(Oe.features=cn.DEFAULT_FEATURES);const e={...Oe.features,...t};Oe.features=e,Oe.features.socials&&(Oe.features.socials=aM.filterSocialsByPlatform(Oe.features.socials))},setProjectId(t){Oe.projectId=t},setCustomRpcUrls(t){Oe.customRpcUrls=t},setAllWallets(t){Oe.allWallets=t},setIncludeWalletIds(t){Oe.includeWalletIds=t},setExcludeWalletIds(t){Oe.excludeWalletIds=t},setFeaturedWalletIds(t){Oe.featuredWalletIds=t},setTokens(t){Oe.tokens=t},setTermsConditionsUrl(t){Oe.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Oe.privacyPolicyUrl=t},setCustomWallets(t){Oe.customWallets=t},setIsSiweEnabled(t){Oe.isSiweEnabled=t},setIsUniversalProvider(t){Oe.isUniversalProvider=t},setSdkVersion(t){Oe.sdkVersion=t},setMetadata(t){Oe.metadata=t},setDisableAppend(t){Oe.disableAppend=t},setEIP6963Enabled(t){Oe.enableEIP6963=t},setDebug(t){Oe.debug=t},setEnableWalletConnect(t){Oe.enableWalletConnect=t},setEnableWalletGuide(t){Oe.enableWalletGuide=t},setEnableAuthLogger(t){Oe.enableAuthLogger=t},setEnableWallets(t){Oe.enableWallets=t},setHasMultipleAddresses(t){Oe.hasMultipleAddresses=t},setSIWX(t){Oe.siwx=t},setConnectMethodsOrder(t){Oe.features={...Oe.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Oe.features={...Oe.features,walletFeaturesOrder:t}},setSocialsOrder(t){Oe.features={...Oe.features,socials:t}},setCollapseWallets(t){Oe.features={...Oe.features,collapseWallets:t}},setEnableEmbedded(t){Oe.enableEmbedded=t},setAllowUnsupportedChain(t){Oe.allowUnsupportedChain=t},setManualWCControl(t){Oe.manualWCControl=t},setEnableNetworkSwitch(t){Oe.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,r])=>{r&&(Oe.defaultAccountTypes[e]=r)})},setUniversalProviderConfigOverride(t){Oe.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Oe.universalProviderConfigOverride},getSnapshot(){return qu(Oe)}},Ea=Zt({message:"",variant:"info",open:!1}),np={state:Ea,subscribeKey(t,e){return Xn(Ea,t,e)},open(t,e){const{debug:r}=ue.state,{shortMessage:n,longMessage:s}=t;r&&(Ea.message=n,Ea.variant=e,Ea.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Ea.open=!1,Ea.message="",Ea.variant="info"}},cM=De.getAnalyticsUrl(),uM=new o0({baseUrl:cM,clientId:null}),lM=["MODAL_CREATED"],Ao=Zt({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Ot={state:Ao,subscribe(t){return hn(Ao,()=>t(Ao))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=ue.state;return{projectId:t,st:e,sv:r||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=_e.state.address;if(lM.includes(t.data.event)||typeof window>"u")return;await uM.post({path:"/e",params:Ot.getSdkProperties(),body:{eventId:De.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Ao.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===le.HTTP_STATUS_CODES.FORBIDDEN&&!Ao.reportedErrors.FORBIDDEN&&(np.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Mf()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Ao.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Ao.timestamp=Date.now(),Ao.data=t,(e=ue.state.features)!=null&&e.analytics&&Ot._sendAnalyticsEvent(Ao)}},hM=["1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79","fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa","a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393"],dM=De.getApiUrl(),Rs=new o0({baseUrl:dM,clientId:null}),fM=40,GC=4,pM=20,mt=Zt({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Ue={state:mt,subscribeKey(t,e){return Xn(mt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=ue.state;return{projectId:t,st:e||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ue.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Rs.baseUrl}/getWalletImage/${t}`,r=await Rs.getBlob({path:e,params:Ue._getSdkProperties()});yi.setWalletImage(t,URL.createObjectURL(r))},async _fetchNetworkImage(t){const e=`${Rs.baseUrl}/public/getAssetImage/${t}`,r=await Rs.getBlob({path:e,params:Ue._getSdkProperties()});yi.setNetworkImage(t,URL.createObjectURL(r))},async _fetchConnectorImage(t){const e=`${Rs.baseUrl}/public/getAssetImage/${t}`,r=await Rs.getBlob({path:e,params:Ue._getSdkProperties()});yi.setConnectorImage(t,URL.createObjectURL(r))},async _fetchCurrencyImage(t){const e=`${Rs.baseUrl}/public/getCurrencyImage/${t}`,r=await Rs.getBlob({path:e,params:Ue._getSdkProperties()});yi.setCurrencyImage(t,URL.createObjectURL(r))},async _fetchTokenImage(t){const e=`${Rs.baseUrl}/public/getTokenImage/${t}`,r=await Rs.getBlob({path:e,params:Ue._getSdkProperties()});yi.setTokenImage(t,URL.createObjectURL(r))},async fetchNetworkImages(){const t=$.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:r})=>r==null?void 0:r.imageId).filter(Boolean).filter(r=>!F2.getNetworkImageById(r));e&&await Promise.allSettled(e.map(r=>Ue._fetchNetworkImage(r)))},async fetchConnectorImages(){const{connectors:t}=Me.state,e=t.map(({imageId:r})=>r).filter(Boolean);await Promise.allSettled(e.map(r=>Ue._fetchConnectorImage(r)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Ue._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Ue._fetchTokenImage(e)))},async fetchWallets(t){var n,s;const e=t.exclude??[];return Ue._getSdkProperties().sv.startsWith("html-core-")&&e.push(...hM),await Rs.get({path:"/getWallets",params:{...Ue._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(n=t.include)==null?void 0:n.join(","),exclude:(s=t.exclude)==null?void 0:s.join(",")}})},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ue.state;if(t!=null&&t.length){const e={...Ue._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??GC,include:t},{data:r}=await Ue.fetchWallets(e);r.sort((s,i)=>t.indexOf(s.id)-t.indexOf(i.id));const n=r.map(s=>s.image_id).filter(Boolean);await Promise.allSettled(n.map(s=>Ue._fetchWalletImage(s))),mt.featured=r,mt.allFeatured=r}},async fetchRecommendedWallets(){try{mt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:r}=ue.state,n=[...e??[],...r??[]].filter(Boolean),s=$.getRequestedCaipNetworkIds().join(","),i={page:1,entries:GC,include:t,exclude:n,chains:s},{data:o,count:a}=await Ue.fetchWallets(i),c=be.getRecentWallets(),u=o.map(h=>h.image_id).filter(Boolean),l=c.map(h=>h.image_id).filter(Boolean);await Promise.allSettled([...u,...l].map(h=>Ue._fetchWalletImage(h))),mt.recommended=o,mt.allRecommended=o,mt.count=a??0}catch{}finally{mt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:r,featuredWalletIds:n}=ue.state,s=$.getRequestedCaipNetworkIds().join(","),i=[...mt.recommended.map(({id:l})=>l),...r??[],...n??[]].filter(Boolean),o={page:t,entries:fM,include:e,exclude:i,chains:s},{data:a,count:c}=await Ue.fetchWallets(o),u=a.slice(0,pM).map(l=>l.image_id).filter(Boolean);await Promise.allSettled(u.map(l=>Ue._fetchWalletImage(l))),mt.wallets=De.uniqueBy([...mt.wallets,...Ue._filterOutExtensions(a)],"id"),mt.count=c>mt.count?c:mt.count,mt.page=t},async initializeExcludedWallets({ids:t}){const e=$.getRequestedCaipNetworkIds().join(","),r={page:1,entries:t.length,include:t,chains:e},{data:n}=await Ue.fetchWallets(r);n&&n.forEach(s=>{mt.excludedWallets.push({rdns:s.rdns,name:s.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:r,excludeWalletIds:n}=ue.state,s=$.getRequestedCaipNetworkIds().join(",");mt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:r,exclude:n,chains:s},{data:o}=await Ue.fetchWallets(i);Ot.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Ue._fetchWalletImage(c)),De.wait(300)]),mt.search=Ue._filterOutExtensions(o)},initPromise(t,e){const r=mt.promises[t];return r||(mt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:n=!0}={}){const s=[t&&Ue.initPromise("connectorImages",Ue.fetchConnectorImages),e&&Ue.initPromise("featuredWallets",Ue.fetchFeaturedWallets),r&&Ue.initPromise("recommendedWallets",Ue.fetchRecommendedWallets),n&&Ue.initPromise("networkImages",Ue.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=ue.state.features)!=null&&t.analytics&&Ue.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Rs.get({path:"/getAnalyticsConfig",params:Ue._getSdkProperties()});ue.setFeatures({analytics:t})}catch{ue.setFeatures({analytics:!1})}},setFilterByNamespace(t){if(!t){mt.featured=mt.allFeatured,mt.recommended=mt.allRecommended;return}const e=$.getRequestedCaipNetworkIds().join(",");mt.featured=mt.allFeatured.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(s=>e.includes(s))}),mt.recommended=mt.allRecommended.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(s=>e.includes(s))})}},dt=Zt({view:"Connect",history:["Connect"],transactionStack:[]}),wt={state:dt,subscribeKey(t,e){return Xn(dt,t,e)},pushTransactionStack(t){dt.transactionStack.push(t)},popTransactionStack(t){var r,n;const e=dt.transactionStack.pop();if(e)if(t)this.goBack(),(r=e==null?void 0:e.onCancel)==null||r.call(e);else{if(e.goBack)this.goBack();else if(e.replace){const i=dt.history.indexOf("ConnectingSiwe");i>0?this.goBackToIndex(i-1):(ar.close(),dt.history=[])}else e.view&&this.reset(e.view);(n=e==null?void 0:e.onSuccess)==null||n.call(e)}},push(t,e){t!==dt.view&&(dt.view=t,dt.history.push(t),dt.data=e)},reset(t,e){dt.view=t,dt.history=[t],dt.data=e},replace(t,e){dt.history.at(-1)===t||(dt.view=t,dt.history[dt.history.length-1]=t,dt.data=e)},goBack(){var e;const t=!$.state.activeCaipAddress&&this.state.view==="ConnectingFarcaster";if(dt.history.length>1&&!dt.history.includes("UnsupportedChain")){dt.history.pop();const[r]=dt.history.slice(-1);r&&(dt.view=r)}else ar.close();(e=dt.data)!=null&&e.wallet&&(dt.data.wallet=void 0),setTimeout(()=>{var r,n,s;if(t){_e.setFarcasterUrl(void 0,$.state.activeChain);const i=Me.getAuthConnector();(r=i==null?void 0:i.provider)==null||r.reload();const o=qu(ue.state);(s=(n=i==null?void 0:i.provider)==null?void 0:n.syncDappData)==null||s.call(n,{metadata:o.metadata,sdkVersion:o.sdkVersion,projectId:o.projectId,sdkType:o.sdkType})}},100)},goBackToIndex(t){if(dt.history.length>1){dt.history=dt.history.slice(0,t+1);const[e]=dt.history.slice(-1);e&&(dt.view=e)}}},Co=Zt({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),sn={state:Co,subscribe(t){return hn(Co,()=>t(Co))},setThemeMode(t){Co.themeMode=t;try{const e=Me.getAuthConnector();if(e){const r=sn.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:r,w3mThemeVariables:ta(r,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Co.themeVariables={...Co.themeVariables,...t};try{const e=Me.getAuthConnector();if(e){const r=sn.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:r,w3mThemeVariables:ta(Co.themeVariables,Co.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return qu(Co)}},j2={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},yt=Zt({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...j2}}),Me={state:yt,subscribe(t){return hn(yt,()=>{t(yt)})},subscribeKey(t,e){return Xn(yt,t,e)},initialize(t){t.forEach(e=>{const r=be.getConnectedConnectorId(e);r&&this.setConnectorId(r,e)})},setActiveConnector(t){t&&(yt.activeConnector=Wu(t))},setConnectors(t){t.filter(r=>!yt.allConnectors.some(n=>n.id===r.id&&this.getConnectorName(n.name)===this.getConnectorName(r.name)&&n.chain===r.chain)).forEach(r=>{r.type!=="MULTI_CHAIN"&&yt.allConnectors.push(Wu(r))}),yt.connectors=this.mergeMultiChainConnectors(yt.allConnectors)},removeAdapter(t){yt.allConnectors=yt.allConnectors.filter(e=>e.chain!==t),yt.connectors=this.mergeMultiChainConnectors(yt.allConnectors)},mergeMultiChainConnectors(t){const e=this.generateConnectorMapByName(t),r=[];return e.forEach(n=>{const s=n[0],i=(s==null?void 0:s.id)===le.CONNECTOR_ID.AUTH;n.length>1&&s?r.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...n],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&r.push(s)}),r},generateConnectorMapByName(t){const e=new Map;return t.forEach(r=>{const{name:n}=r,s=this.getConnectorName(n);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===r.chain)||i.push(r),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(r=>{e.find(n=>n.chain===r.chain)||e.push(r)}),e},addConnector(t){var e,r,n;if(t.id===le.CONNECTOR_ID.AUTH){const s=t,i=qu(ue.state),o=sn.getSnapshot().themeMode,a=sn.getSnapshot().themeVariables;(r=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||r.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(n=s==null?void 0:s.provider)==null||n.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:ta(a,o)}),this.setConnectors([t])}else this.setConnectors([t])},getAuthConnector(t){var n;const e=t||$.state.activeChain,r=yt.connectors.find(s=>s.id===le.CONNECTOR_ID.AUTH);if(r)return(n=r==null?void 0:r.connectors)!=null&&n.length?r.connectors.find(i=>i.chain===e):r},getAnnouncedConnectorRdns(){return yt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return yt.allConnectors.find(e=>e.id===t)},getConnector(t,e){return yt.allConnectors.filter(n=>n.chain===$.state.activeChain).find(n=>{var s;return n.explorerId===t||((s=n.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,r=qu(ue.state),n=sn.getSnapshot().themeMode,s=sn.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:r.metadata,sdkVersion:r.sdkVersion,sdkType:r.sdkType,projectId:r.projectId}),e.provider.syncTheme({themeMode:n,themeVariables:s,w3mThemeVariables:ta(s,n)})},getConnectorsByNamespace(t){const e=yt.allConnectors.filter(r=>r.chain===t);return this.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=Me.getConnector(t.id,t.rdns);$.state.activeChain===le.CHAIN.SOLANA&&iM.handleSolanaDeeplinkRedirect((e==null?void 0:e.name)||t.name||""),e?wt.push("ConnectingExternal",{connector:e}):wt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?this.getConnectorsByNamespace(t):this.mergeMultiChainConnectors(yt.allConnectors)},setFilterByNamespace(t){yt.filterByNamespace=t,yt.connectors=this.getConnectors(t),Ue.setFilterByNamespace(t)},setConnectorId(t,e){t&&(yt.activeConnectorIds={...yt.activeConnectorIds,[e]:t},be.setConnectedConnectorId(e,t))},removeConnectorId(t){yt.activeConnectorIds={...yt.activeConnectorIds,[t]:void 0},be.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return yt.activeConnectorIds[t]},isConnected(t){return t?!!yt.activeConnectorIds[t]:Object.values(yt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){yt.activeConnectorIds={...j2}}};function Dm(t,e){return Me.getConnectorId(t)===e}function gM(t){const e=Array.from($.state.chains.keys());let r=[];return t?(r.push([t,$.state.chains.get(t)]),Dm(t,le.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(n=>{n!==t&&Dm(n,le.CONNECTOR_ID.WALLET_CONNECT)&&r.push([n,$.state.chains.get(n)])}):Dm(t,le.CONNECTOR_ID.AUTH)&&e.forEach(n=>{n!==t&&Dm(n,le.CONNECTOR_ID.AUTH)&&r.push([n,$.state.chains.get(n)])})):r=Array.from($.state.chains.entries()),r}var z2={},a0={};a0.byteLength=wM;a0.toByteArray=vM;a0.fromByteArray=AM;var eo=[],zs=[],mM=typeof Uint8Array<"u"?Uint8Array:Array,Eb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Sl=0,yM=Eb.length;Sl<yM;++Sl)eo[Sl]=Eb[Sl],zs[Eb.charCodeAt(Sl)]=Sl;zs[45]=62;zs[95]=63;function H2(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function wM(t){var e=H2(t),r=e[0],n=e[1];return(r+n)*3/4-n}function bM(t,e,r){return(e+r)*3/4-r}function vM(t){var e,r=H2(t),n=r[0],s=r[1],i=new mM(bM(t,n,s)),o=0,a=s>0?n-4:n,c;for(c=0;c<a;c+=4)e=zs[t.charCodeAt(c)]<<18|zs[t.charCodeAt(c+1)]<<12|zs[t.charCodeAt(c+2)]<<6|zs[t.charCodeAt(c+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=zs[t.charCodeAt(c)]<<2|zs[t.charCodeAt(c+1)]>>4,i[o++]=e&255),s===1&&(e=zs[t.charCodeAt(c)]<<10|zs[t.charCodeAt(c+1)]<<4|zs[t.charCodeAt(c+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function EM(t){return eo[t>>18&63]+eo[t>>12&63]+eo[t>>6&63]+eo[t&63]}function _M(t,e,r){for(var n,s=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(EM(n));return s.join("")}function AM(t){for(var e,r=t.length,n=r%3,s=[],i=16383,o=0,a=r-n;o<a;o+=i)s.push(_M(t,o,o+i>a?a:o+i));return n===1?(e=t[r-1],s.push(eo[e>>2]+eo[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],s.push(eo[e>>10]+eo[e>>4&63]+eo[e<<2&63]+"=")),s.join("")}var OA={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */OA.read=function(t,e,r,n,s){var i,o,a=s*8-n-1,c=(1<<a)-1,u=c>>1,l=-7,h=r?s-1:0,d=r?-1:1,f=t[e+h];for(h+=d,i=f&(1<<-l)-1,f>>=-l,l+=a;l>0;i=i*256+t[e+h],h+=d,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=n;l>0;o=o*256+t[e+h],h+=d,l-=8);if(i===0)i=1-u;else{if(i===c)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-u}return(f?-1:1)*o*Math.pow(2,i-n)};OA.write=function(t,e,r,n,s,i){var o,a,c,u=i*8-s-1,l=(1<<u)-1,h=l>>1,d=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:i-1,p=n?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?e+=d/c:e+=d*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=l?(a=0,o=l):o+h>=1?(a=(e*c-1)*Math.pow(2,s),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,s),o=0));s>=8;t[r+f]=a&255,f+=p,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;t[r+f]=o&255,f+=p,o/=256,u-=8);t[r+f-p]|=g*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=a0,r=OA,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=S,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;l.TYPED_ARRAY_SUPPORT=c(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const N=new i(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,i.prototype),Object.setPrototypeOf(N,y),N.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function u(N){if(N>s)throw new RangeError('The value "'+N+'" is invalid for option "size"');const y=new i(N);return Object.setPrototypeOf(y,l.prototype),y}function l(N,y,b){if(typeof N=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(N)}return h(N,y,b)}l.poolSize=8192;function h(N,y,b){if(typeof N=="string")return g(N,y);if(o.isView(N))return w(N);if(N==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N);if(mn(N,o)||N&&mn(N.buffer,o)||typeof a<"u"&&(mn(N,a)||N&&mn(N.buffer,a)))return v(N,y,b);if(typeof N=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const D=N.valueOf&&N.valueOf();if(D!=null&&D!==N)return l.from(D,y,b);const H=E(N);if(H)return H;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof N[Symbol.toPrimitive]=="function")return l.from(N[Symbol.toPrimitive]("string"),y,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N)}l.from=function(N,y,b){return h(N,y,b)},Object.setPrototypeOf(l.prototype,i.prototype),Object.setPrototypeOf(l,i);function d(N){if(typeof N!="number")throw new TypeError('"size" argument must be of type number');if(N<0)throw new RangeError('The value "'+N+'" is invalid for option "size"')}function f(N,y,b){return d(N),N<=0?u(N):y!==void 0?typeof b=="string"?u(N).fill(y,b):u(N).fill(y):u(N)}l.alloc=function(N,y,b){return f(N,y,b)};function p(N){return d(N),u(N<0?0:A(N)|0)}l.allocUnsafe=function(N){return p(N)},l.allocUnsafeSlow=function(N){return p(N)};function g(N,y){if((typeof y!="string"||y==="")&&(y="utf8"),!l.isEncoding(y))throw new TypeError("Unknown encoding: "+y);const b=C(N,y)|0;let D=u(b);const H=D.write(N,y);return H!==b&&(D=D.slice(0,H)),D}function m(N){const y=N.length<0?0:A(N.length)|0,b=u(y);for(let D=0;D<y;D+=1)b[D]=N[D]&255;return b}function w(N){if(mn(N,i)){const y=new i(N);return v(y.buffer,y.byteOffset,y.byteLength)}return m(N)}function v(N,y,b){if(y<0||N.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(N.byteLength<y+(b||0))throw new RangeError('"length" is outside of buffer bounds');let D;return y===void 0&&b===void 0?D=new i(N):b===void 0?D=new i(N,y):D=new i(N,y,b),Object.setPrototypeOf(D,l.prototype),D}function E(N){if(l.isBuffer(N)){const y=A(N.length)|0,b=u(y);return b.length===0||N.copy(b,0,0,y),b}if(N.length!==void 0)return typeof N.length!="number"||Os(N.length)?u(0):m(N);if(N.type==="Buffer"&&Array.isArray(N.data))return m(N.data)}function A(N){if(N>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return N|0}function S(N){return+N!=N&&(N=0),l.alloc(+N)}l.isBuffer=function(y){return y!=null&&y._isBuffer===!0&&y!==l.prototype},l.compare=function(y,b){if(mn(y,i)&&(y=l.from(y,y.offset,y.byteLength)),mn(b,i)&&(b=l.from(b,b.offset,b.byteLength)),!l.isBuffer(y)||!l.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===b)return 0;let D=y.length,H=b.length;for(let X=0,re=Math.min(D,H);X<re;++X)if(y[X]!==b[X]){D=y[X],H=b[X];break}return D<H?-1:H<D?1:0},l.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(y,b){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(y.length===0)return l.alloc(0);let D;if(b===void 0)for(b=0,D=0;D<y.length;++D)b+=y[D].length;const H=l.allocUnsafe(b);let X=0;for(D=0;D<y.length;++D){let re=y[D];if(mn(re,i))X+re.length>H.length?(l.isBuffer(re)||(re=l.from(re)),re.copy(H,X)):i.prototype.set.call(H,re,X);else if(l.isBuffer(re))re.copy(H,X);else throw new TypeError('"list" argument must be an Array of Buffers');X+=re.length}return H};function C(N,y){if(l.isBuffer(N))return N.length;if(o.isView(N)||mn(N,o))return N.byteLength;if(typeof N!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof N);const b=N.length,D=arguments.length>2&&arguments[2]===!0;if(!D&&b===0)return 0;let H=!1;for(;;)switch(y){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return kn(N).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b*2;case"hex":return b>>>1;case"base64":return va(N).length;default:if(H)return D?-1:kn(N).length;y=(""+y).toLowerCase(),H=!0}}l.byteLength=C;function T(N,y,b){let D=!1;if((y===void 0||y<0)&&(y=0),y>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0,y>>>=0,b<=y))return"";for(N||(N="utf8");;)switch(N){case"hex":return j(this,y,b);case"utf8":case"utf-8":return M(this,y,b);case"ascii":return Y(this,y,b);case"latin1":case"binary":return U(this,y,b);case"base64":return x(this,y,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,y,b);default:if(D)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),D=!0}}l.prototype._isBuffer=!0;function O(N,y,b){const D=N[y];N[y]=N[b],N[b]=D}l.prototype.swap16=function(){const y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<y;b+=2)O(this,b,b+1);return this},l.prototype.swap32=function(){const y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<y;b+=4)O(this,b,b+3),O(this,b+1,b+2);return this},l.prototype.swap64=function(){const y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<y;b+=8)O(this,b,b+7),O(this,b+1,b+6),O(this,b+2,b+5),O(this,b+3,b+4);return this},l.prototype.toString=function(){const y=this.length;return y===0?"":arguments.length===0?M(this,0,y):T.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(y){if(!l.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:l.compare(this,y)===0},l.prototype.inspect=function(){let y="";const b=t.INSPECT_MAX_BYTES;return y=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(y+=" ... "),"<Buffer "+y+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(y,b,D,H,X){if(mn(y,i)&&(y=l.from(y,y.offset,y.byteLength)),!l.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(b===void 0&&(b=0),D===void 0&&(D=y?y.length:0),H===void 0&&(H=0),X===void 0&&(X=this.length),b<0||D>y.length||H<0||X>this.length)throw new RangeError("out of range index");if(H>=X&&b>=D)return 0;if(H>=X)return-1;if(b>=D)return 1;if(b>>>=0,D>>>=0,H>>>=0,X>>>=0,this===y)return 0;let re=X-H,Qe=D-b;const Xt=Math.min(re,Qe),qt=this.slice(H,X),er=y.slice(b,D);for(let At=0;At<Xt;++At)if(qt[At]!==er[At]){re=qt[At],Qe=er[At];break}return re<Qe?-1:Qe<re?1:0};function P(N,y,b,D,H){if(N.length===0)return-1;if(typeof b=="string"?(D=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,Os(b)&&(b=H?0:N.length-1),b<0&&(b=N.length+b),b>=N.length){if(H)return-1;b=N.length-1}else if(b<0)if(H)b=0;else return-1;if(typeof y=="string"&&(y=l.from(y,D)),l.isBuffer(y))return y.length===0?-1:B(N,y,b,D,H);if(typeof y=="number")return y=y&255,typeof i.prototype.indexOf=="function"?H?i.prototype.indexOf.call(N,y,b):i.prototype.lastIndexOf.call(N,y,b):B(N,[y],b,D,H);throw new TypeError("val must be string, number or Buffer")}function B(N,y,b,D,H){let X=1,re=N.length,Qe=y.length;if(D!==void 0&&(D=String(D).toLowerCase(),D==="ucs2"||D==="ucs-2"||D==="utf16le"||D==="utf-16le")){if(N.length<2||y.length<2)return-1;X=2,re/=2,Qe/=2,b/=2}function Xt(er,At){return X===1?er[At]:er.readUInt16BE(At*X)}let qt;if(H){let er=-1;for(qt=b;qt<re;qt++)if(Xt(N,qt)===Xt(y,er===-1?0:qt-er)){if(er===-1&&(er=qt),qt-er+1===Qe)return er*X}else er!==-1&&(qt-=qt-er),er=-1}else for(b+Qe>re&&(b=re-Qe),qt=b;qt>=0;qt--){let er=!0;for(let At=0;At<Qe;At++)if(Xt(N,qt+At)!==Xt(y,At)){er=!1;break}if(er)return qt}return-1}l.prototype.includes=function(y,b,D){return this.indexOf(y,b,D)!==-1},l.prototype.indexOf=function(y,b,D){return P(this,y,b,D,!0)},l.prototype.lastIndexOf=function(y,b,D){return P(this,y,b,D,!1)};function L(N,y,b,D){b=Number(b)||0;const H=N.length-b;D?(D=Number(D),D>H&&(D=H)):D=H;const X=y.length;D>X/2&&(D=X/2);let re;for(re=0;re<D;++re){const Qe=parseInt(y.substr(re*2,2),16);if(Os(Qe))return re;N[b+re]=Qe}return re}function Q(N,y,b,D){return Eo(kn(y,N.length-b),N,b,D)}function se(N,y,b,D){return Eo(vo(y),N,b,D)}function V(N,y,b,D){return Eo(va(y),N,b,D)}function I(N,y,b,D){return Eo(gn(y,N.length-b),N,b,D)}l.prototype.write=function(y,b,D,H){if(b===void 0)H="utf8",D=this.length,b=0;else if(D===void 0&&typeof b=="string")H=b,D=this.length,b=0;else if(isFinite(b))b=b>>>0,isFinite(D)?(D=D>>>0,H===void 0&&(H="utf8")):(H=D,D=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const X=this.length-b;if((D===void 0||D>X)&&(D=X),y.length>0&&(D<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");H||(H="utf8");let re=!1;for(;;)switch(H){case"hex":return L(this,y,b,D);case"utf8":case"utf-8":return Q(this,y,b,D);case"ascii":case"latin1":case"binary":return se(this,y,b,D);case"base64":return V(this,y,b,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,y,b,D);default:if(re)throw new TypeError("Unknown encoding: "+H);H=(""+H).toLowerCase(),re=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function x(N,y,b){return y===0&&b===N.length?e.fromByteArray(N):e.fromByteArray(N.slice(y,b))}function M(N,y,b){b=Math.min(N.length,b);const D=[];let H=y;for(;H<b;){const X=N[H];let re=null,Qe=X>239?4:X>223?3:X>191?2:1;if(H+Qe<=b){let Xt,qt,er,At;switch(Qe){case 1:X<128&&(re=X);break;case 2:Xt=N[H+1],(Xt&192)===128&&(At=(X&31)<<6|Xt&63,At>127&&(re=At));break;case 3:Xt=N[H+1],qt=N[H+2],(Xt&192)===128&&(qt&192)===128&&(At=(X&15)<<12|(Xt&63)<<6|qt&63,At>2047&&(At<55296||At>57343)&&(re=At));break;case 4:Xt=N[H+1],qt=N[H+2],er=N[H+3],(Xt&192)===128&&(qt&192)===128&&(er&192)===128&&(At=(X&15)<<18|(Xt&63)<<12|(qt&63)<<6|er&63,At>65535&&At<1114112&&(re=At))}}re===null?(re=65533,Qe=1):re>65535&&(re-=65536,D.push(re>>>10&1023|55296),re=56320|re&1023),D.push(re),H+=Qe}return q(D)}const G=4096;function q(N){const y=N.length;if(y<=G)return String.fromCharCode.apply(String,N);let b="",D=0;for(;D<y;)b+=String.fromCharCode.apply(String,N.slice(D,D+=G));return b}function Y(N,y,b){let D="";b=Math.min(N.length,b);for(let H=y;H<b;++H)D+=String.fromCharCode(N[H]&127);return D}function U(N,y,b){let D="";b=Math.min(N.length,b);for(let H=y;H<b;++H)D+=String.fromCharCode(N[H]);return D}function j(N,y,b){const D=N.length;(!y||y<0)&&(y=0),(!b||b<0||b>D)&&(b=D);let H="";for(let X=y;X<b;++X)H+=_o[N[X]];return H}function F(N,y,b){const D=N.slice(y,b);let H="";for(let X=0;X<D.length-1;X+=2)H+=String.fromCharCode(D[X]+D[X+1]*256);return H}l.prototype.slice=function(y,b){const D=this.length;y=~~y,b=b===void 0?D:~~b,y<0?(y+=D,y<0&&(y=0)):y>D&&(y=D),b<0?(b+=D,b<0&&(b=0)):b>D&&(b=D),b<y&&(b=y);const H=this.subarray(y,b);return Object.setPrototypeOf(H,l.prototype),H};function W(N,y,b){if(N%1!==0||N<0)throw new RangeError("offset is not uint");if(N+y>b)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(y,b,D){y=y>>>0,b=b>>>0,D||W(y,b,this.length);let H=this[y],X=1,re=0;for(;++re<b&&(X*=256);)H+=this[y+re]*X;return H},l.prototype.readUintBE=l.prototype.readUIntBE=function(y,b,D){y=y>>>0,b=b>>>0,D||W(y,b,this.length);let H=this[y+--b],X=1;for(;b>0&&(X*=256);)H+=this[y+--b]*X;return H},l.prototype.readUint8=l.prototype.readUInt8=function(y,b){return y=y>>>0,b||W(y,1,this.length),this[y]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(y,b){return y=y>>>0,b||W(y,2,this.length),this[y]|this[y+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(y,b){return y=y>>>0,b||W(y,2,this.length),this[y]<<8|this[y+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(y,b){return y=y>>>0,b||W(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(y,b){return y=y>>>0,b||W(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},l.prototype.readBigUInt64LE=Dn(function(y){y=y>>>0,nr(y,"offset");const b=this[y],D=this[y+7];(b===void 0||D===void 0)&&gt(y,this.length-8);const H=b+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24,X=this[++y]+this[++y]*2**8+this[++y]*2**16+D*2**24;return BigInt(H)+(BigInt(X)<<BigInt(32))}),l.prototype.readBigUInt64BE=Dn(function(y){y=y>>>0,nr(y,"offset");const b=this[y],D=this[y+7];(b===void 0||D===void 0)&&gt(y,this.length-8);const H=b*2**24+this[++y]*2**16+this[++y]*2**8+this[++y],X=this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+D;return(BigInt(H)<<BigInt(32))+BigInt(X)}),l.prototype.readIntLE=function(y,b,D){y=y>>>0,b=b>>>0,D||W(y,b,this.length);let H=this[y],X=1,re=0;for(;++re<b&&(X*=256);)H+=this[y+re]*X;return X*=128,H>=X&&(H-=Math.pow(2,8*b)),H},l.prototype.readIntBE=function(y,b,D){y=y>>>0,b=b>>>0,D||W(y,b,this.length);let H=b,X=1,re=this[y+--H];for(;H>0&&(X*=256);)re+=this[y+--H]*X;return X*=128,re>=X&&(re-=Math.pow(2,8*b)),re},l.prototype.readInt8=function(y,b){return y=y>>>0,b||W(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},l.prototype.readInt16LE=function(y,b){y=y>>>0,b||W(y,2,this.length);const D=this[y]|this[y+1]<<8;return D&32768?D|4294901760:D},l.prototype.readInt16BE=function(y,b){y=y>>>0,b||W(y,2,this.length);const D=this[y+1]|this[y]<<8;return D&32768?D|4294901760:D},l.prototype.readInt32LE=function(y,b){return y=y>>>0,b||W(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},l.prototype.readInt32BE=function(y,b){return y=y>>>0,b||W(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},l.prototype.readBigInt64LE=Dn(function(y){y=y>>>0,nr(y,"offset");const b=this[y],D=this[y+7];(b===void 0||D===void 0)&&gt(y,this.length-8);const H=this[y+4]+this[y+5]*2**8+this[y+6]*2**16+(D<<24);return(BigInt(H)<<BigInt(32))+BigInt(b+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24)}),l.prototype.readBigInt64BE=Dn(function(y){y=y>>>0,nr(y,"offset");const b=this[y],D=this[y+7];(b===void 0||D===void 0)&&gt(y,this.length-8);const H=(b<<24)+this[++y]*2**16+this[++y]*2**8+this[++y];return(BigInt(H)<<BigInt(32))+BigInt(this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+D)}),l.prototype.readFloatLE=function(y,b){return y=y>>>0,b||W(y,4,this.length),r.read(this,y,!0,23,4)},l.prototype.readFloatBE=function(y,b){return y=y>>>0,b||W(y,4,this.length),r.read(this,y,!1,23,4)},l.prototype.readDoubleLE=function(y,b){return y=y>>>0,b||W(y,8,this.length),r.read(this,y,!0,52,8)},l.prototype.readDoubleBE=function(y,b){return y=y>>>0,b||W(y,8,this.length),r.read(this,y,!1,52,8)};function te(N,y,b,D,H,X){if(!l.isBuffer(N))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>H||y<X)throw new RangeError('"value" argument is out of bounds');if(b+D>N.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(y,b,D,H){if(y=+y,b=b>>>0,D=D>>>0,!H){const Qe=Math.pow(2,8*D)-1;te(this,y,b,D,Qe,0)}let X=1,re=0;for(this[b]=y&255;++re<D&&(X*=256);)this[b+re]=y/X&255;return b+D},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(y,b,D,H){if(y=+y,b=b>>>0,D=D>>>0,!H){const Qe=Math.pow(2,8*D)-1;te(this,y,b,D,Qe,0)}let X=D-1,re=1;for(this[b+X]=y&255;--X>=0&&(re*=256);)this[b+X]=y/re&255;return b+D},l.prototype.writeUint8=l.prototype.writeUInt8=function(y,b,D){return y=+y,b=b>>>0,D||te(this,y,b,1,255,0),this[b]=y&255,b+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(y,b,D){return y=+y,b=b>>>0,D||te(this,y,b,2,65535,0),this[b]=y&255,this[b+1]=y>>>8,b+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(y,b,D){return y=+y,b=b>>>0,D||te(this,y,b,2,65535,0),this[b]=y>>>8,this[b+1]=y&255,b+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(y,b,D){return y=+y,b=b>>>0,D||te(this,y,b,4,4294967295,0),this[b+3]=y>>>24,this[b+2]=y>>>16,this[b+1]=y>>>8,this[b]=y&255,b+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(y,b,D){return y=+y,b=b>>>0,D||te(this,y,b,4,4294967295,0),this[b]=y>>>24,this[b+1]=y>>>16,this[b+2]=y>>>8,this[b+3]=y&255,b+4};function ae(N,y,b,D,H){hr(y,D,H,N,b,7);let X=Number(y&BigInt(4294967295));N[b++]=X,X=X>>8,N[b++]=X,X=X>>8,N[b++]=X,X=X>>8,N[b++]=X;let re=Number(y>>BigInt(32)&BigInt(4294967295));return N[b++]=re,re=re>>8,N[b++]=re,re=re>>8,N[b++]=re,re=re>>8,N[b++]=re,b}function fe(N,y,b,D,H){hr(y,D,H,N,b,7);let X=Number(y&BigInt(4294967295));N[b+7]=X,X=X>>8,N[b+6]=X,X=X>>8,N[b+5]=X,X=X>>8,N[b+4]=X;let re=Number(y>>BigInt(32)&BigInt(4294967295));return N[b+3]=re,re=re>>8,N[b+2]=re,re=re>>8,N[b+1]=re,re=re>>8,N[b]=re,b+8}l.prototype.writeBigUInt64LE=Dn(function(y,b=0){return ae(this,y,b,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Dn(function(y,b=0){return fe(this,y,b,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(y,b,D,H){if(y=+y,b=b>>>0,!H){const Xt=Math.pow(2,8*D-1);te(this,y,b,D,Xt-1,-Xt)}let X=0,re=1,Qe=0;for(this[b]=y&255;++X<D&&(re*=256);)y<0&&Qe===0&&this[b+X-1]!==0&&(Qe=1),this[b+X]=(y/re>>0)-Qe&255;return b+D},l.prototype.writeIntBE=function(y,b,D,H){if(y=+y,b=b>>>0,!H){const Xt=Math.pow(2,8*D-1);te(this,y,b,D,Xt-1,-Xt)}let X=D-1,re=1,Qe=0;for(this[b+X]=y&255;--X>=0&&(re*=256);)y<0&&Qe===0&&this[b+X+1]!==0&&(Qe=1),this[b+X]=(y/re>>0)-Qe&255;return b+D},l.prototype.writeInt8=function(y,b,D){return y=+y,b=b>>>0,D||te(this,y,b,1,127,-128),y<0&&(y=255+y+1),this[b]=y&255,b+1},l.prototype.writeInt16LE=function(y,b,D){return y=+y,b=b>>>0,D||te(this,y,b,2,32767,-32768),this[b]=y&255,this[b+1]=y>>>8,b+2},l.prototype.writeInt16BE=function(y,b,D){return y=+y,b=b>>>0,D||te(this,y,b,2,32767,-32768),this[b]=y>>>8,this[b+1]=y&255,b+2},l.prototype.writeInt32LE=function(y,b,D){return y=+y,b=b>>>0,D||te(this,y,b,4,2147483647,-2147483648),this[b]=y&255,this[b+1]=y>>>8,this[b+2]=y>>>16,this[b+3]=y>>>24,b+4},l.prototype.writeInt32BE=function(y,b,D){return y=+y,b=b>>>0,D||te(this,y,b,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[b]=y>>>24,this[b+1]=y>>>16,this[b+2]=y>>>8,this[b+3]=y&255,b+4},l.prototype.writeBigInt64LE=Dn(function(y,b=0){return ae(this,y,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Dn(function(y,b=0){return fe(this,y,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ge(N,y,b,D,H,X){if(b+D>N.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function Ie(N,y,b,D,H){return y=+y,b=b>>>0,H||ge(N,y,b,4),r.write(N,y,b,D,23,4),b+4}l.prototype.writeFloatLE=function(y,b,D){return Ie(this,y,b,!0,D)},l.prototype.writeFloatBE=function(y,b,D){return Ie(this,y,b,!1,D)};function Je(N,y,b,D,H){return y=+y,b=b>>>0,H||ge(N,y,b,8),r.write(N,y,b,D,52,8),b+8}l.prototype.writeDoubleLE=function(y,b,D){return Je(this,y,b,!0,D)},l.prototype.writeDoubleBE=function(y,b,D){return Je(this,y,b,!1,D)},l.prototype.copy=function(y,b,D,H){if(!l.isBuffer(y))throw new TypeError("argument should be a Buffer");if(D||(D=0),!H&&H!==0&&(H=this.length),b>=y.length&&(b=y.length),b||(b=0),H>0&&H<D&&(H=D),H===D||y.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(D<0||D>=this.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("sourceEnd out of bounds");H>this.length&&(H=this.length),y.length-b<H-D&&(H=y.length-b+D);const X=H-D;return this===y&&typeof i.prototype.copyWithin=="function"?this.copyWithin(b,D,H):i.prototype.set.call(y,this.subarray(D,H),b),X},l.prototype.fill=function(y,b,D,H){if(typeof y=="string"){if(typeof b=="string"?(H=b,b=0,D=this.length):typeof D=="string"&&(H=D,D=this.length),H!==void 0&&typeof H!="string")throw new TypeError("encoding must be a string");if(typeof H=="string"&&!l.isEncoding(H))throw new TypeError("Unknown encoding: "+H);if(y.length===1){const re=y.charCodeAt(0);(H==="utf8"&&re<128||H==="latin1")&&(y=re)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(b<0||this.length<b||this.length<D)throw new RangeError("Out of range index");if(D<=b)return this;b=b>>>0,D=D===void 0?this.length:D>>>0,y||(y=0);let X;if(typeof y=="number")for(X=b;X<D;++X)this[X]=y;else{const re=l.isBuffer(y)?y:l.from(y,H),Qe=re.length;if(Qe===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(X=0;X<D-b;++X)this[X+b]=re[X%Qe]}return this};const ze={};function Le(N,y,b){ze[N]=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${N}]`,this.stack,delete this.name}get code(){return N}set code(H){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:H,writable:!0})}toString(){return`${this.name} [${N}]: ${this.message}`}}}Le("ERR_BUFFER_OUT_OF_BOUNDS",function(N){return N?`${N} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Le("ERR_INVALID_ARG_TYPE",function(N,y){return`The "${N}" argument must be of type number. Received type ${typeof y}`},TypeError),Le("ERR_OUT_OF_RANGE",function(N,y,b){let D=`The value of "${N}" is out of range.`,H=b;return Number.isInteger(b)&&Math.abs(b)>2**32?H=Ke(String(b)):typeof b=="bigint"&&(H=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&(H=Ke(H)),H+="n"),D+=` It must be ${y}. Received ${H}`,D},RangeError);function Ke(N){let y="",b=N.length;const D=N[0]==="-"?1:0;for(;b>=D+4;b-=3)y=`_${N.slice(b-3,b)}${y}`;return`${N.slice(0,b)}${y}`}function Pe(N,y,b){nr(y,"offset"),(N[y]===void 0||N[y+b]===void 0)&&gt(y,N.length-(b+1))}function hr(N,y,b,D,H,X){if(N>b||N<y){const re=typeof y=="bigint"?"n":"";let Qe;throw y===0||y===BigInt(0)?Qe=`>= 0${re} and < 2${re} ** ${(X+1)*8}${re}`:Qe=`>= -(2${re} ** ${(X+1)*8-1}${re}) and < 2 ** ${(X+1)*8-1}${re}`,new ze.ERR_OUT_OF_RANGE("value",Qe,N)}Pe(D,H,X)}function nr(N,y){if(typeof N!="number")throw new ze.ERR_INVALID_ARG_TYPE(y,"number",N)}function gt(N,y,b){throw Math.floor(N)!==N?(nr(N,b),new ze.ERR_OUT_OF_RANGE("offset","an integer",N)):y<0?new ze.ERR_BUFFER_OUT_OF_BOUNDS:new ze.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${y}`,N)}const ki=/[^+/0-9A-Za-z-_]/g;function Di(N){if(N=N.split("=")[0],N=N.trim().replace(ki,""),N.length<2)return"";for(;N.length%4!==0;)N=N+"=";return N}function kn(N,y){y=y||1/0;let b;const D=N.length;let H=null;const X=[];for(let re=0;re<D;++re){if(b=N.charCodeAt(re),b>55295&&b<57344){if(!H){if(b>56319){(y-=3)>-1&&X.push(239,191,189);continue}else if(re+1===D){(y-=3)>-1&&X.push(239,191,189);continue}H=b;continue}if(b<56320){(y-=3)>-1&&X.push(239,191,189),H=b;continue}b=(H-55296<<10|b-56320)+65536}else H&&(y-=3)>-1&&X.push(239,191,189);if(H=null,b<128){if((y-=1)<0)break;X.push(b)}else if(b<2048){if((y-=2)<0)break;X.push(b>>6|192,b&63|128)}else if(b<65536){if((y-=3)<0)break;X.push(b>>12|224,b>>6&63|128,b&63|128)}else if(b<1114112){if((y-=4)<0)break;X.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw new Error("Invalid code point")}return X}function vo(N){const y=[];for(let b=0;b<N.length;++b)y.push(N.charCodeAt(b)&255);return y}function gn(N,y){let b,D,H;const X=[];for(let re=0;re<N.length&&!((y-=2)<0);++re)b=N.charCodeAt(re),D=b>>8,H=b%256,X.push(H),X.push(D);return X}function va(N){return e.toByteArray(Di(N))}function Eo(N,y,b,D){let H;for(H=0;H<D&&!(H+b>=y.length||H>=N.length);++H)y[H+b]=N[H];return H}function mn(N,y){return N instanceof y||N!=null&&N.constructor!=null&&N.constructor.name!=null&&N.constructor.name===y.name}function Os(N){return N!==N}const _o=function(){const N="0123456789abcdef",y=new Array(256);for(let b=0;b<16;++b){const D=b*16;for(let H=0;H<16;++H)y[D+H]=N[b]+N[H]}return y}();function Dn(N){return typeof BigInt>"u"?Pc:N}function Pc(){throw new Error("BigInt not supported")}})(z2);const _r=z2.Buffer;var Um={exports:{}},KC;function CM(){if(KC)return Um.exports;KC=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(S,C,T){return Function.prototype.apply.call(S,C,T)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:r=function(S){return Object.getOwnPropertyNames(S)};function n(A){console&&console.warn&&console.warn(A)}var s=Number.isNaN||function(S){return S!==S};function i(){i.init.call(this)}Um.exports=i,Um.exports.once=w,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(A){if(typeof A!="number"||A<0||s(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");o=A}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||s(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function c(A){return A._maxListeners===void 0?i.defaultMaxListeners:A._maxListeners}i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(S){for(var C=[],T=1;T<arguments.length;T++)C.push(arguments[T]);var O=S==="error",P=this._events;if(P!==void 0)O=O&&P.error===void 0;else if(!O)return!1;if(O){var B;if(C.length>0&&(B=C[0]),B instanceof Error)throw B;var L=new Error("Unhandled error."+(B?" ("+B.message+")":""));throw L.context=B,L}var Q=P[S];if(Q===void 0)return!1;if(typeof Q=="function")e(Q,this,C);else for(var se=Q.length,V=p(Q,se),T=0;T<se;++T)e(V[T],this,C);return!0};function u(A,S,C,T){var O,P,B;if(a(C),P=A._events,P===void 0?(P=A._events=Object.create(null),A._eventsCount=0):(P.newListener!==void 0&&(A.emit("newListener",S,C.listener?C.listener:C),P=A._events),B=P[S]),B===void 0)B=P[S]=C,++A._eventsCount;else if(typeof B=="function"?B=P[S]=T?[C,B]:[B,C]:T?B.unshift(C):B.push(C),O=c(A),O>0&&B.length>O&&!B.warned){B.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+B.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=A,L.type=S,L.count=B.length,n(L)}return A}i.prototype.addListener=function(S,C){return u(this,S,C,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(S,C){return u(this,S,C,!0)};function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(A,S,C){var T={fired:!1,wrapFn:void 0,target:A,type:S,listener:C},O=l.bind(T);return O.listener=C,T.wrapFn=O,O}i.prototype.once=function(S,C){return a(C),this.on(S,h(this,S,C)),this},i.prototype.prependOnceListener=function(S,C){return a(C),this.prependListener(S,h(this,S,C)),this},i.prototype.removeListener=function(S,C){var T,O,P,B,L;if(a(C),O=this._events,O===void 0)return this;if(T=O[S],T===void 0)return this;if(T===C||T.listener===C)--this._eventsCount===0?this._events=Object.create(null):(delete O[S],O.removeListener&&this.emit("removeListener",S,T.listener||C));else if(typeof T!="function"){for(P=-1,B=T.length-1;B>=0;B--)if(T[B]===C||T[B].listener===C){L=T[B].listener,P=B;break}if(P<0)return this;P===0?T.shift():g(T,P),T.length===1&&(O[S]=T[0]),O.removeListener!==void 0&&this.emit("removeListener",S,L||C)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(S){var C,T,O;if(T=this._events,T===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete T[S]),this;if(arguments.length===0){var P=Object.keys(T),B;for(O=0;O<P.length;++O)B=P[O],B!=="removeListener"&&this.removeAllListeners(B);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(C=T[S],typeof C=="function")this.removeListener(S,C);else if(C!==void 0)for(O=C.length-1;O>=0;O--)this.removeListener(S,C[O]);return this};function d(A,S,C){var T=A._events;if(T===void 0)return[];var O=T[S];return O===void 0?[]:typeof O=="function"?C?[O.listener||O]:[O]:C?m(O):p(O,O.length)}i.prototype.listeners=function(S){return d(this,S,!0)},i.prototype.rawListeners=function(S){return d(this,S,!1)},i.listenerCount=function(A,S){return typeof A.listenerCount=="function"?A.listenerCount(S):f.call(A,S)},i.prototype.listenerCount=f;function f(A){var S=this._events;if(S!==void 0){var C=S[A];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function p(A,S){for(var C=new Array(S),T=0;T<S;++T)C[T]=A[T];return C}function g(A,S){for(;S+1<A.length;S++)A[S]=A[S+1];A.pop()}function m(A){for(var S=new Array(A.length),C=0;C<S.length;++C)S[C]=A[C].listener||A[C];return S}function w(A,S){return new Promise(function(C,T){function O(B){A.removeListener(S,P),T(B)}function P(){typeof A.removeListener=="function"&&A.removeListener("error",O),C([].slice.call(arguments))}E(A,S,P,{once:!0}),S!=="error"&&v(A,O,{once:!0})})}function v(A,S,C){typeof A.on=="function"&&E(A,"error",S,C)}function E(A,S,C,T){if(typeof A.on=="function")T.once?A.once(S,C):A.on(S,C);else if(typeof A.addEventListener=="function")A.addEventListener(S,function O(P){T.once&&A.removeEventListener(S,O),C(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}return Um.exports}var Xs=CM();const RA=Xw(Xs);var _b={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pE=function(t,e){return pE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},pE(t,e)};function SM(t,e){pE(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var gE=function(){return gE=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},gE.apply(this,arguments)};function IM(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function TM(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,r,i):o(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function NM(t,e){return function(r,n){e(r,n,t)}}function xM(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function OM(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(h){o(h)}}function c(l){try{u(n.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function RM(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function PM(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function kM(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function mE(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function q2(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function DM(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(q2(arguments[e]));return t}function UM(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function Cp(t){return this instanceof Cp?(this.v=t,this):new Cp(t)}function BM(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(d){n[d]&&(s[d]=function(f){return new Promise(function(p,g){i.push([d,f,p,g])>1||a(d,f)})})}function a(d,f){try{c(n[d](f))}catch(p){h(i[0][3],p)}}function c(d){d.value instanceof Cp?Promise.resolve(d.value.v).then(u,l):h(i[0][2],d)}function u(d){a("next",d)}function l(d){a("throw",d)}function h(d,f){d(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function $M(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(o){return(r=!r)?{value:Cp(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function LM(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof mE=="function"?mE(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function MM(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function FM(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function jM(t){return t&&t.__esModule?t:{default:t}}function zM(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function HM(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const qM=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return gE},__asyncDelegator:$M,__asyncGenerator:BM,__asyncValues:LM,__await:Cp,__awaiter:OM,__classPrivateFieldGet:zM,__classPrivateFieldSet:HM,__createBinding:PM,__decorate:TM,__exportStar:kM,__extends:SM,__generator:RM,__importDefault:jM,__importStar:FM,__makeTemplateObject:MM,__metadata:xM,__param:NM,__read:q2,__rest:IM,__spread:DM,__spreadArrays:UM,__values:mE},Symbol.toStringTag,{value:"Module"})),c0=a2(qM);var Ab={},yf={},JC;function WM(){if(JC)return yf;JC=1,Object.defineProperty(yf,"__esModule",{value:!0}),yf.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return yf.delay=t,yf}var kc={},Cb={},Dc={},YC;function VM(){return YC||(YC=1,Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.ONE_THOUSAND=Dc.ONE_HUNDRED=void 0,Dc.ONE_HUNDRED=100,Dc.ONE_THOUSAND=1e3),Dc}var Sb={},QC;function GM(){return QC||(QC=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Sb)),Sb}var ZC;function W2(){return ZC||(ZC=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=c0;e.__exportStar(VM(),t),e.__exportStar(GM(),t)}(Cb)),Cb}var XC;function KM(){if(XC)return kc;XC=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.fromMiliseconds=kc.toMiliseconds=void 0;const t=W2();function e(n){return n*t.ONE_THOUSAND}kc.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return kc.fromMiliseconds=r,kc}var eS;function JM(){return eS||(eS=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=c0;e.__exportStar(WM(),t),e.__exportStar(KM(),t)}(Ab)),Ab}var Il={},tS;function YM(){if(tS)return Il;tS=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const s=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:s})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Il.Watch=t,Il.default=t,Il}var Ib={},wf={},rS;function QM(){if(rS)return wf;rS=1,Object.defineProperty(wf,"__esModule",{value:!0}),wf.IWatch=void 0;class t{}return wf.IWatch=t,wf}var nS;function ZM(){return nS||(nS=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),c0.__exportStar(QM(),t)}(Ib)),Ib}var sS;function XM(){return sS||(sS=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=c0;e.__exportStar(JM(),t),e.__exportStar(YM(),t),e.__exportStar(ZM(),t),e.__exportStar(W2(),t)}(_b)),_b}var he=XM();class ml{}let e8=class extends ml{constructor(e){super()}};const iS=he.FIVE_SECONDS,Wd={pulse:"heartbeat_pulse"};let t8=class V2 extends e8{constructor(e){super(e),this.events=new Xs.EventEmitter,this.interval=iS,this.interval=(e==null?void 0:e.interval)||iS}static async init(e){const r=new V2(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),he.toMiliseconds(this.interval))}pulse(){this.events.emit(Wd.pulse)}};const r8=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,n8=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,s8=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function i8(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){o8(t);return}return e}function o8(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Bm(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const r=t.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!s8.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(r8.test(t)||n8.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,i8)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function a8(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Sr(t,...e){try{return a8(t(...e))}catch(r){return Promise.reject(r)}}function c8(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function u8(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Ey(t){if(c8(t))return String(t);if(u8(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Ey(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const yE="base64:";function l8(t){return typeof t=="string"?t:yE+f8(t)}function h8(t){return typeof t!="string"||!t.startsWith(yE)?t:d8(t.slice(yE.length))}function d8(t){return globalThis.Buffer?_r.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function f8(t){return globalThis.Buffer?_r.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Mn(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function p8(...t){return Mn(t.join(":"))}function $m(t){return t=Mn(t),t?t+":":""}function g8(t,e){if(e===void 0)return!0;let r=0,n=t.indexOf(":");for(;n>-1;)r++,n=t.indexOf(":",n+1);return r<=e}function m8(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const y8="memory",w8=()=>{const t=new Map;return{name:y8,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function b8(t={}){const e={mounts:{"":t.driver||w8()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=u=>{for(const l of e.mountpoints)if(u.startsWith(l))return{base:l,relativeKey:u.slice(l.length),driver:e.mounts[l]};return{base:"",relativeKey:u,driver:e.mounts[""]}},n=(u,l)=>e.mountpoints.filter(h=>h.startsWith(u)||l&&u.startsWith(h)).map(h=>({relativeBase:u.length>h.length?u.slice(h.length):void 0,mountpoint:h,driver:e.mounts[h]})),s=(u,l)=>{if(e.watching){l=Mn(l);for(const h of e.watchListeners)h(u,l)}},i=async()=>{if(!e.watching){e.watching=!0;for(const u in e.mounts)e.unwatch[u]=await oS(e.mounts[u],s,u)}},o=async()=>{if(e.watching){for(const u in e.unwatch)await e.unwatch[u]();e.unwatch={},e.watching=!1}},a=(u,l,h)=>{const d=new Map,f=p=>{let g=d.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},d.set(p.base,g)),g};for(const p of u){const g=typeof p=="string",m=Mn(g?p:p.key),w=g?void 0:p.value,v=g||!p.options?l:{...l,...p.options},E=r(m);f(E).items.push({key:m,value:w,relativeKey:E.relativeKey,options:v})}return Promise.all([...d.values()].map(p=>h(p))).then(p=>p.flat())},c={hasItem(u,l={}){u=Mn(u);const{relativeKey:h,driver:d}=r(u);return Sr(d.hasItem,h,l)},getItem(u,l={}){u=Mn(u);const{relativeKey:h,driver:d}=r(u);return Sr(d.getItem,h,l).then(f=>Bm(f))},getItems(u,l={}){return a(u,l,h=>h.driver.getItems?Sr(h.driver.getItems,h.items.map(d=>({key:d.relativeKey,options:d.options})),l).then(d=>d.map(f=>({key:p8(h.base,f.key),value:Bm(f.value)}))):Promise.all(h.items.map(d=>Sr(h.driver.getItem,d.relativeKey,d.options).then(f=>({key:d.key,value:Bm(f)})))))},getItemRaw(u,l={}){u=Mn(u);const{relativeKey:h,driver:d}=r(u);return d.getItemRaw?Sr(d.getItemRaw,h,l):Sr(d.getItem,h,l).then(f=>h8(f))},async setItem(u,l,h={}){if(l===void 0)return c.removeItem(u);u=Mn(u);const{relativeKey:d,driver:f}=r(u);f.setItem&&(await Sr(f.setItem,d,Ey(l),h),f.watch||s("update",u))},async setItems(u,l){await a(u,l,async h=>{if(h.driver.setItems)return Sr(h.driver.setItems,h.items.map(d=>({key:d.relativeKey,value:Ey(d.value),options:d.options})),l);h.driver.setItem&&await Promise.all(h.items.map(d=>Sr(h.driver.setItem,d.relativeKey,Ey(d.value),d.options)))})},async setItemRaw(u,l,h={}){if(l===void 0)return c.removeItem(u,h);u=Mn(u);const{relativeKey:d,driver:f}=r(u);if(f.setItemRaw)await Sr(f.setItemRaw,d,l,h);else if(f.setItem)await Sr(f.setItem,d,l8(l),h);else return;f.watch||s("update",u)},async removeItem(u,l={}){typeof l=="boolean"&&(l={removeMeta:l}),u=Mn(u);const{relativeKey:h,driver:d}=r(u);d.removeItem&&(await Sr(d.removeItem,h,l),(l.removeMeta||l.removeMata)&&await Sr(d.removeItem,h+"$",l),d.watch||s("remove",u))},async getMeta(u,l={}){typeof l=="boolean"&&(l={nativeOnly:l}),u=Mn(u);const{relativeKey:h,driver:d}=r(u),f=Object.create(null);if(d.getMeta&&Object.assign(f,await Sr(d.getMeta,h,l)),!l.nativeOnly){const p=await Sr(d.getItem,h+"$",l).then(g=>Bm(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(u,l,h={}){return this.setItem(u+"$",l,h)},removeMeta(u,l={}){return this.removeItem(u+"$",l)},async getKeys(u,l={}){var m;u=$m(u);const h=n(u,!0);let d=[];const f=[];let p=!0;for(const w of h){(m=w.driver.flags)!=null&&m.maxDepth||(p=!1);const v=await Sr(w.driver.getKeys,w.relativeBase,l);for(const E of v){const A=w.mountpoint+Mn(E);d.some(S=>A.startsWith(S))||f.push(A)}d=[w.mountpoint,...d.filter(E=>!E.startsWith(w.mountpoint))]}const g=l.maxDepth!==void 0&&!p;return f.filter(w=>(!g||g8(w,l.maxDepth))&&m8(w,u))},async clear(u,l={}){u=$m(u),await Promise.all(n(u,!1).map(async h=>{if(h.driver.clear)return Sr(h.driver.clear,h.relativeBase,l);if(h.driver.removeItem){const d=await h.driver.getKeys(h.relativeBase||"",l);return Promise.all(d.map(f=>h.driver.removeItem(f,l)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(u=>aS(u)))},async watch(u){return await i(),e.watchListeners.push(u),async()=>{e.watchListeners=e.watchListeners.filter(l=>l!==u),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(u,l){if(u=$m(u),u&&e.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(e.mountpoints.push(u),e.mountpoints.sort((h,d)=>d.length-h.length)),e.mounts[u]=l,e.watching&&Promise.resolve(oS(l,s,u)).then(h=>{e.unwatch[u]=h}).catch(console.error),c},async unmount(u,l=!0){var h,d;u=$m(u),!(!u||!e.mounts[u])&&(e.watching&&u in e.unwatch&&((d=(h=e.unwatch)[u])==null||d.call(h),delete e.unwatch[u]),l&&await aS(e.mounts[u]),e.mountpoints=e.mountpoints.filter(f=>f!==u),delete e.mounts[u])},getMount(u=""){u=Mn(u)+":";const l=r(u);return{driver:l.driver,base:l.base}},getMounts(u="",l={}){return u=Mn(u),n(u,l.parents).map(d=>({driver:d.driver,base:d.mountpoint}))},keys:(u,l={})=>c.getKeys(u,l),get:(u,l={})=>c.getItem(u,l),set:(u,l,h={})=>c.setItem(u,l,h),has:(u,l={})=>c.hasItem(u,l),del:(u,l={})=>c.removeItem(u,l),remove:(u,l={})=>c.removeItem(u,l)};return c}function oS(t,e,r){return t.watch?t.watch((n,s)=>e(n,r+s)):()=>{}}async function aS(t){typeof t.dispose=="function"&&await Sr(t.dispose)}function yl(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function G2(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const n=yl(r);return(s,i)=>n.then(o=>i(o.transaction(e,s).objectStore(e)))}let Tb;function Xg(){return Tb||(Tb=G2("keyval-store","keyval")),Tb}function cS(t,e=Xg()){return e("readonly",r=>yl(r.get(t)))}function v8(t,e,r=Xg()){return r("readwrite",n=>(n.put(e,t),yl(n.transaction)))}function E8(t,e=Xg()){return e("readwrite",r=>(r.delete(t),yl(r.transaction)))}function _8(t=Xg()){return t("readwrite",e=>(e.clear(),yl(e.transaction)))}function A8(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},yl(t.transaction)}function C8(t=Xg()){return t("readonly",e=>{if(e.getAllKeys)return yl(e.getAllKeys());const r=[];return A8(e,n=>r.push(n.key)).then(()=>r)})}const S8=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),I8=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Vu(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return I8(t)}catch{return t}}function ha(t){return typeof t=="string"?t:S8(t)||""}const T8="idb-keyval";var N8=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=s=>e+s;let n;return t.dbName&&t.storeName&&(n=G2(t.dbName,t.storeName)),{name:T8,options:t,async hasItem(s){return!(typeof await cS(r(s),n)>"u")},async getItem(s){return await cS(r(s),n)??null},setItem(s,i){return v8(r(s),i,n)},removeItem(s){return E8(r(s),n)},getKeys(){return C8(n)},clear(){return _8(n)}}};const x8="WALLET_CONNECT_V2_INDEXED_DB",O8="keyvaluestorage";let R8=class{constructor(){this.indexedDb=b8({driver:N8({dbName:x8,storeName:O8})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,ha(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Nb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Te<"u"?Te:typeof self<"u"?self:{},_y={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Nb<"u"&&Nb.localStorage?_y.exports=Nb.localStorage:typeof window<"u"&&window.localStorage?_y.exports=window.localStorage:_y.exports=new e})();function P8(t){var e;return[t[0],Vu((e=t[1])!=null?e:"")]}let k8=class{constructor(){this.localStorage=_y.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(P8)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return Vu(r)}async setItem(e,r){this.localStorage.setItem(e,ha(r))}async removeItem(e){this.localStorage.removeItem(e)}};const D8="wc_storage_version",uS=1,U8=async(t,e,r)=>{const n=D8,s=await e.getItem(n);if(s&&s>=uS){r(e);return}const i=await t.getKeys();if(!i.length){r(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const u=await t.getItem(a);await e.setItem(a,u),o.push(a)}}await e.setItem(n,uS),r(e),B8(t,o)},B8=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let $8=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new k8;this.storage=e;try{const r=new R8;U8(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};var xb,lS;function L8(){if(lS)return xb;lS=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}xb=e;function e(r,n,s){var i=s&&s.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var c=new Array(a);c[0]=i(r);for(var u=1;u<a;u++)c[u]=i(n[u]);return c.join(" ")}if(typeof r!="string")return r;var l=n.length;if(l===0)return r;for(var h="",d=1-o,f=-1,p=r&&r.length||0,g=0;g<p;){if(r.charCodeAt(g)===37&&g+1<p){switch(f=f>-1?f:0,r.charCodeAt(g+1)){case 100:case 102:if(d>=l||n[d]==null)break;f<g&&(h+=r.slice(f,g)),h+=Number(n[d]),f=g+2,g++;break;case 105:if(d>=l||n[d]==null)break;f<g&&(h+=r.slice(f,g)),h+=Math.floor(Number(n[d])),f=g+2,g++;break;case 79:case 111:case 106:if(d>=l||n[d]===void 0)break;f<g&&(h+=r.slice(f,g));var m=typeof n[d];if(m==="string"){h+="'"+n[d]+"'",f=g+2,g++;break}if(m==="function"){h+=n[d].name||"<anonymous>",f=g+2,g++;break}h+=i(n[d]),f=g+2,g++;break;case 115:if(d>=l)break;f<g&&(h+=r.slice(f,g)),h+=String(n[d]),f=g+2,g++;break;case 37:f<g&&(h+=r.slice(f,g)),h+="%",f=g+2,g++,d--;break}++d}++g}return f===-1?r:(f<p&&(h+=r.slice(f)),h)}return xb}var Ob,hS;function M8(){if(hS)return Ob;hS=1;const t=L8();Ob=s;const e=S().console||{},r={mapHttpRequest:p,mapHttpResponse:p,wrapRequestSerializer:g,wrapResponseSerializer:g,wrapErrorSerializer:g,req:p,res:p,err:d};function n(C,T){return Array.isArray(C)?C.filter(function(P){return P!=="!stdSerializers.err"}):C===!0?Object.keys(T):!1}function s(C){C=C||{},C.browser=C.browser||{};const T=C.browser.transmit;if(T&&typeof T.send!="function")throw Error("pino: transmit option must have a send function");const O=C.browser.write||e;C.browser.write&&(C.browser.asObject=!0);const P=C.serializers||{},B=n(C.browser.serialize,P);let L=C.browser.serialize;Array.isArray(C.browser.serialize)&&C.browser.serialize.indexOf("!stdSerializers.err")>-1&&(L=!1);const Q=["error","fatal","warn","info","debug","trace"];typeof O=="function"&&(O.error=O.fatal=O.warn=O.info=O.debug=O.trace=O),C.enabled===!1&&(C.level="silent");const se=C.level||"info",V=Object.create(O);V.log||(V.log=m),Object.defineProperty(V,"levelVal",{get:x}),Object.defineProperty(V,"level",{get:M,set:G});const I={transmit:T,serialize:B,asObject:C.browser.asObject,levels:Q,timestamp:f(C)};V.levels=s.levels,V.level=se,V.setMaxListeners=V.getMaxListeners=V.emit=V.addListener=V.on=V.prependListener=V.once=V.prependOnceListener=V.removeListener=V.removeAllListeners=V.listeners=V.listenerCount=V.eventNames=V.write=V.flush=m,V.serializers=P,V._serialize=B,V._stdErrSerialize=L,V.child=q,T&&(V._logEvent=h());function x(){return this.level==="silent"?1/0:this.levels.values[this.level]}function M(){return this._level}function G(Y){if(Y!=="silent"&&!this.levels.values[Y])throw Error("unknown level "+Y);this._level=Y,i(I,V,"error","log"),i(I,V,"fatal","error"),i(I,V,"warn","error"),i(I,V,"info","log"),i(I,V,"debug","log"),i(I,V,"trace","log")}function q(Y,U){if(!Y)throw new Error("missing bindings for child Pino");U=U||{},B&&Y.serializers&&(U.serializers=Y.serializers);const j=U.serializers;if(B&&j){var F=Object.assign({},P,j),W=C.browser.serialize===!0?Object.keys(F):B;delete Y.serializers,c([Y],W,F,this._stdErrSerialize)}function te(ae){this._childLevel=(ae._childLevel|0)+1,this.error=u(ae,Y,"error"),this.fatal=u(ae,Y,"fatal"),this.warn=u(ae,Y,"warn"),this.info=u(ae,Y,"info"),this.debug=u(ae,Y,"debug"),this.trace=u(ae,Y,"trace"),F&&(this.serializers=F,this._serialize=W),T&&(this._logEvent=h([].concat(ae._logEvent.bindings,Y)))}return te.prototype=this,new te(this)}return V}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=r,s.stdTimeFunctions=Object.assign({},{nullTime:w,epochTime:v,unixTime:E,isoTime:A});function i(C,T,O,P){const B=Object.getPrototypeOf(T);T[O]=T.levelVal>T.levels.values[O]?m:B[O]?B[O]:e[O]||e[P]||m,o(C,T,O)}function o(C,T,O){!C.transmit&&T[O]===m||(T[O]=function(P){return function(){const L=C.timestamp(),Q=new Array(arguments.length),se=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var V=0;V<Q.length;V++)Q[V]=arguments[V];if(C.serialize&&!C.asObject&&c(Q,this._serialize,this.serializers,this._stdErrSerialize),C.asObject?P.call(se,a(this,O,Q,L)):P.apply(se,Q),C.transmit){const I=C.transmit.level||T.level,x=s.levels.values[I],M=s.levels.values[O];if(M<x)return;l(this,{ts:L,methodLevel:O,methodValue:M,transmitValue:s.levels.values[C.transmit.level||T.level],send:C.transmit.send,val:T.levelVal},Q)}}}(T[O]))}function a(C,T,O,P){C._serialize&&c(O,C._serialize,C.serializers,C._stdErrSerialize);const B=O.slice();let L=B[0];const Q={};P&&(Q.time=P),Q.level=s.levels.values[T];let se=(C._childLevel|0)+1;if(se<1&&(se=1),L!==null&&typeof L=="object"){for(;se--&&typeof B[0]=="object";)Object.assign(Q,B.shift());L=B.length?t(B.shift(),B):void 0}else typeof L=="string"&&(L=t(B.shift(),B));return L!==void 0&&(Q.msg=L),Q}function c(C,T,O,P){for(const B in C)if(P&&C[B]instanceof Error)C[B]=s.stdSerializers.err(C[B]);else if(typeof C[B]=="object"&&!Array.isArray(C[B]))for(const L in C[B])T&&T.indexOf(L)>-1&&L in O&&(C[B][L]=O[L](C[B][L]))}function u(C,T,O){return function(){const P=new Array(1+arguments.length);P[0]=T;for(var B=1;B<P.length;B++)P[B]=arguments[B-1];return C[O].apply(this,P)}}function l(C,T,O){const P=T.send,B=T.ts,L=T.methodLevel,Q=T.methodValue,se=T.val,V=C._logEvent.bindings;c(O,C._serialize||Object.keys(C.serializers),C.serializers,C._stdErrSerialize===void 0?!0:C._stdErrSerialize),C._logEvent.ts=B,C._logEvent.messages=O.filter(function(I){return V.indexOf(I)===-1}),C._logEvent.level.label=L,C._logEvent.level.value=Q,P(L,C._logEvent,se),C._logEvent=h(V)}function h(C){return{ts:0,messages:[],bindings:C||[],level:{label:"",value:0}}}function d(C){const T={type:C.constructor.name,msg:C.message,stack:C.stack};for(const O in C)T[O]===void 0&&(T[O]=C[O]);return T}function f(C){return typeof C.timestamp=="function"?C.timestamp:C.timestamp===!1?w:v}function p(){return{}}function g(C){return C}function m(){}function w(){return!1}function v(){return Date.now()}function E(){return Math.round(Date.now()/1e3)}function A(){return new Date(Date.now()).toISOString()}function S(){function C(T){return typeof T<"u"&&T}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return C(self)||C(window)||C(this)||{}}}return Ob}var Yl=M8();const em=Xw(Yl),F8={level:"info"},tm="custom_context",PA=1e3*1024;let j8=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},dS=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new j8(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}},K2=class{constructor(e,r=PA){this.level=e??"error",this.levelValue=Yl.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new dS(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===Yl.levels.values.error?console.error(e):r===Yl.levels.values.warn?console.warn(e):r===Yl.levels.values.debug?console.debug(e):r===Yl.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(ha({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new dS(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(ha({extraMetadata:e})),new Blob(r,{type:"application/json"})}},z8=class{constructor(e,r=PA){this.baseChunkLogger=new K2(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}},H8=class{constructor(e,r=PA){this.baseChunkLogger=new K2(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var q8=Object.defineProperty,W8=Object.defineProperties,V8=Object.getOwnPropertyDescriptors,fS=Object.getOwnPropertySymbols,G8=Object.prototype.hasOwnProperty,K8=Object.prototype.propertyIsEnumerable,pS=(t,e,r)=>e in t?q8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Xy=(t,e)=>{for(var r in e||(e={}))G8.call(e,r)&&pS(t,r,e[r]);if(fS)for(var r of fS(e))K8.call(e,r)&&pS(t,r,e[r]);return t},ew=(t,e)=>W8(t,V8(e));function Vd(t){return ew(Xy({},t),{level:(t==null?void 0:t.level)||F8.level})}function J8(t,e=tm){return t[e]||""}function Y8(t,e,r=tm){return t[r]=e,t}function es(t,e=tm){let r="";return typeof t.bindings>"u"?r=J8(t,e):r=t.bindings().context||"",r}function Q8(t,e,r=tm){const n=es(t,r);return n.trim()?`${n}/${e}`:e}function pn(t,e,r=tm){const n=Q8(t,e,r),s=t.child({context:n});return Y8(s,n,r)}function Z8(t){var e,r;const n=new z8((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:em(ew(Xy({},t.opts),{level:"trace",browser:ew(Xy({},(r=t.opts)==null?void 0:r.browser),{write:s=>n.write(s)})})),chunkLoggerController:n}}function X8(t){var e;const r=new H8((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:em(ew(Xy({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function kA(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Z8(t):X8(t)}var e4=Object.defineProperty,t4=(t,e,r)=>e in t?e4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gS=(t,e,r)=>t4(t,typeof e!="symbol"?e+"":e,r);let r4=class extends ml{constructor(e){super(),this.opts=e,gS(this,"protocol","wc"),gS(this,"version",2)}};var n4=Object.defineProperty,s4=(t,e,r)=>e in t?n4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,i4=(t,e,r)=>s4(t,e+"",r);let o4=class extends ml{constructor(e,r){super(),this.core=e,this.logger=r,i4(this,"records",new Map)}},a4=class{constructor(e,r){this.logger=e,this.core=r}},c4=class extends ml{constructor(e,r){super(),this.relayer=e,this.logger=r}},u4=class extends ml{constructor(e){super()}},l4=class{constructor(e,r,n,s){this.core=e,this.logger=r,this.name=n}},h4=class extends ml{constructor(e,r){super(),this.relayer=e,this.logger=r}},d4=class extends ml{constructor(e,r){super(),this.core=e,this.logger=r}},f4=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},p4=class{constructor(e,r){this.projectId=e,this.logger=r}},g4=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}};var m4=Object.defineProperty,y4=(t,e,r)=>e in t?m4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mS=(t,e,r)=>y4(t,typeof e!="symbol"?e+"":e,r);let w4=class{constructor(e){this.opts=e,mS(this,"protocol","wc"),mS(this,"version",2)}},b4=class{constructor(e){this.client=e}};function v4(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function J2(t,...e){if(!v4(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function yS(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function E4(t,e){J2(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Tl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Rb=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function _4(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Y2(t){return typeof t=="string"&&(t=_4(t)),J2(t),t}let A4=class{clone(){return this._cloneInto()}};function C4(t){const e=n=>t().update(Y2(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Q2(t=32){if(Tl&&typeof Tl.getRandomValues=="function")return Tl.getRandomValues(new Uint8Array(t));if(Tl&&typeof Tl.randomBytes=="function")return Tl.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function S4(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}let I4=class extends A4{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Rb(this.buffer)}update(e){yS(this);const{view:r,buffer:n,blockLen:s}=this;e=Y2(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Rb(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){yS(this),E4(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let h=o;h<s;h++)r[h]=0;S4(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=Rb(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,l[h],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};const Lm=BigInt(2**32-1),wE=BigInt(32);function Z2(t,e=!1){return e?{h:Number(t&Lm),l:Number(t>>wE&Lm)}:{h:Number(t>>wE&Lm)|0,l:Number(t&Lm)|0}}function T4(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Z2(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const N4=(t,e)=>BigInt(t>>>0)<<wE|BigInt(e>>>0),x4=(t,e,r)=>t>>>r,O4=(t,e,r)=>t<<32-r|e>>>r,R4=(t,e,r)=>t>>>r|e<<32-r,P4=(t,e,r)=>t<<32-r|e>>>r,k4=(t,e,r)=>t<<64-r|e>>>r-32,D4=(t,e,r)=>t>>>r-32|e<<64-r,U4=(t,e)=>e,B4=(t,e)=>t,$4=(t,e,r)=>t<<r|e>>>32-r,L4=(t,e,r)=>e<<r|t>>>32-r,M4=(t,e,r)=>e<<r-32|t>>>64-r,F4=(t,e,r)=>t<<r-32|e>>>64-r;function j4(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const z4=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),H4=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,q4=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),W4=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,V4=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),G4=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,We={fromBig:Z2,split:T4,toBig:N4,shrSH:x4,shrSL:O4,rotrSH:R4,rotrSL:P4,rotrBH:k4,rotrBL:D4,rotr32H:U4,rotr32L:B4,rotlSH:$4,rotlSL:L4,rotlBH:M4,rotlBL:F4,add:j4,add3L:z4,add3H:H4,add4L:q4,add4H:W4,add5H:G4,add5L:V4},[K4,J4]=We.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),_a=new Uint32Array(80),Aa=new Uint32Array(80);let Y4=class extends I4{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:h,Fl:d,Gh:f,Gl:p,Hh:g,Hl:m}=this;return[e,r,n,s,i,o,a,c,u,l,h,d,f,p,g,m]}set(e,r,n,s,i,o,a,c,u,l,h,d,f,p,g,m){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=h|0,this.Fl=d|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,r){for(let E=0;E<16;E++,r+=4)_a[E]=e.getUint32(r),Aa[E]=e.getUint32(r+=4);for(let E=16;E<80;E++){const A=_a[E-15]|0,S=Aa[E-15]|0,C=We.rotrSH(A,S,1)^We.rotrSH(A,S,8)^We.shrSH(A,S,7),T=We.rotrSL(A,S,1)^We.rotrSL(A,S,8)^We.shrSL(A,S,7),O=_a[E-2]|0,P=Aa[E-2]|0,B=We.rotrSH(O,P,19)^We.rotrBH(O,P,61)^We.shrSH(O,P,6),L=We.rotrSL(O,P,19)^We.rotrBL(O,P,61)^We.shrSL(O,P,6),Q=We.add4L(T,L,Aa[E-7],Aa[E-16]),se=We.add4H(Q,C,B,_a[E-7],_a[E-16]);_a[E]=se|0,Aa[E]=Q|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:h,El:d,Fh:f,Fl:p,Gh:g,Gl:m,Hh:w,Hl:v}=this;for(let E=0;E<80;E++){const A=We.rotrSH(h,d,14)^We.rotrSH(h,d,18)^We.rotrBH(h,d,41),S=We.rotrSL(h,d,14)^We.rotrSL(h,d,18)^We.rotrBL(h,d,41),C=h&f^~h&g,T=d&p^~d&m,O=We.add5L(v,S,T,J4[E],Aa[E]),P=We.add5H(O,w,A,C,K4[E],_a[E]),B=O|0,L=We.rotrSH(n,s,28)^We.rotrBH(n,s,34)^We.rotrBH(n,s,39),Q=We.rotrSL(n,s,28)^We.rotrBL(n,s,34)^We.rotrBL(n,s,39),se=n&i^n&a^i&a,V=s&o^s&c^o&c;w=g|0,v=m|0,g=f|0,m=p|0,f=h|0,p=d|0,{h,l:d}=We.add(u|0,l|0,P|0,B|0),u=a|0,l=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const I=We.add3L(B,Q,V);n=We.add3H(I,P,L,se),s=I|0}({h:n,l:s}=We.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=We.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=We.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=We.add(this.Dh|0,this.Dl|0,u|0,l|0),{h,l:d}=We.add(this.Eh|0,this.El|0,h|0,d|0),{h:f,l:p}=We.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:m}=We.add(this.Gh|0,this.Gl|0,g|0,m|0),{h:w,l:v}=We.add(this.Hh|0,this.Hl|0,w|0,v|0),this.set(n,s,i,o,a,c,u,l,h,d,f,p,g,m,w,v)}roundClean(){_a.fill(0),Aa.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Q4=C4(()=>new Y4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const DA=BigInt(0),X2=BigInt(1),Z4=BigInt(2);function UA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function BA(t){if(!UA(t))throw new Error("Uint8Array expected")}function Pb(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const X4=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function $A(t){BA(t);let e="";for(let r=0;r<t.length;r++)e+=X4[t[r]];return e}function eR(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?DA:BigInt("0x"+t)}const So={_0:48,_9:57,A:65,F:70,a:97,f:102};function wS(t){if(t>=So._0&&t<=So._9)return t-So._0;if(t>=So.A&&t<=So.F)return t-(So.A-10);if(t>=So.a&&t<=So.f)return t-(So.a-10)}function tR(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=wS(t.charCodeAt(i)),a=wS(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function eF(t){return eR($A(t))}function Ay(t){return BA(t),eR($A(Uint8Array.from(t).reverse()))}function rR(t,e){return tR(t.toString(16).padStart(e*2,"0"))}function bE(t,e){return rR(t,e).reverse()}function Io(t,e,r){let n;if(typeof e=="string")try{n=tR(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(UA(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function bS(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];BA(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}const kb=t=>typeof t=="bigint"&&DA<=t;function tF(t,e,r){return kb(t)&&kb(e)&&kb(r)&&e<=t&&t<r}function bf(t,e,r,n){if(!tF(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function rF(t){let e;for(e=0;t>DA;t>>=X2,e+=1);return e}const nF=t=>(Z4<<BigInt(t-1))-X2,sF={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||UA(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function LA(t,e,r={}){const n=(s,i,o)=>{const a=sF[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}function vS(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}const Pr=BigInt(0),ir=BigInt(1),Wc=BigInt(2),iF=BigInt(3),vE=BigInt(4),ES=BigInt(5),_S=BigInt(8);function vr(t,e){const r=t%e;return r>=Pr?r:e+r}function oF(t,e,r){if(e<Pr)throw new Error("invalid exponent, negatives unsupported");if(r<=Pr)throw new Error("invalid modulus");if(r===ir)return Pr;let n=ir;for(;e>Pr;)e&ir&&(n=n*t%r),t=t*t%r,e>>=ir;return n}function Ui(t,e,r){let n=t;for(;e-- >Pr;)n*=n,n%=r;return n}function AS(t,e){if(t===Pr)throw new Error("invert: expected non-zero number");if(e<=Pr)throw new Error("invert: expected positive modulus, got "+e);let r=vr(t,e),n=e,s=Pr,i=ir;for(;r!==Pr;){const o=n/r,a=n%r,c=s-i*o;n=r,r=a,s=i,i=c}if(n!==ir)throw new Error("invert: does not exist");return vr(s,e)}function aF(t){const e=(t-ir)/Wc;let r,n,s;for(r=t-ir,n=0;r%Wc===Pr;r/=Wc,n++);for(s=Wc;s<t&&oF(s,e,t)!==t-ir;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+ir)/vE;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(r+ir)/Wc;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,u=o.pow(o.mul(o.ONE,s),r),l=o.pow(a,i),h=o.pow(a,r);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let d=1;for(let p=o.sqr(h);d<c&&!o.eql(p,o.ONE);d++)p=o.sqr(p);const f=o.pow(u,ir<<BigInt(c-d-1));u=o.sqr(f),l=o.mul(l,f),h=o.mul(h,u),c=d}return l}}function cF(t){if(t%vE===iF){const e=(t+ir)/vE;return function(r,n){const s=r.pow(n,e);if(!r.eql(r.sqr(s),n))throw new Error("Cannot find square root");return s}}if(t%_S===ES){const e=(t-ES)/_S;return function(r,n){const s=r.mul(n,Wc),i=r.pow(s,e),o=r.mul(n,i),a=r.mul(r.mul(o,Wc),i),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return aF(t)}const uF=(t,e)=>(vr(t,e)&ir)===ir,lF=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function hF(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=lF.reduce((n,s)=>(n[s]="function",n),e);return LA(t,r)}function dF(t,e,r){if(r<Pr)throw new Error("invalid exponent, negatives unsupported");if(r===Pr)return t.ONE;if(r===ir)return e;let n=t.ONE,s=e;for(;r>Pr;)r&ir&&(n=t.mul(n,s)),s=t.sqr(s),r>>=ir;return n}function fF(t,e){const r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function nR(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function sR(t,e,r=!1,n={}){if(t<=Pr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=nR(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:s,BYTES:i,MASK:nF(s),ZERO:Pr,ONE:ir,create:c=>vr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Pr<=c&&c<t},is0:c=>c===Pr,isOdd:c=>(c&ir)===ir,neg:c=>vr(-c,t),eql:(c,u)=>c===u,sqr:c=>vr(c*c,t),add:(c,u)=>vr(c+u,t),sub:(c,u)=>vr(c-u,t),mul:(c,u)=>vr(c*u,t),pow:(c,u)=>dF(a,c,u),div:(c,u)=>vr(c*AS(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>AS(c,t),sqrt:n.sqrt||(c=>(o||(o=cF(t)),o(a,c))),invertBatch:c=>fF(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>r?bE(c,i):rR(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return r?Ay(c):eF(c)}});return Object.freeze(a)}const CS=BigInt(0),Mm=BigInt(1);function Db(t,e){const r=e.negate();return t?r:e}function iR(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Ub(t,e){iR(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function pF(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function gF(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Bb=new WeakMap,oR=new WeakMap;function $b(t){return oR.get(t)||1}function mF(t,e){return{constTimeNegate:Db,hasPrecomputes(r){return $b(r)!==1},unsafeLadder(r,n,s=t.ZERO){let i=r;for(;n>CS;)n&Mm&&(s=s.add(i)),i=i.double(),n>>=Mm;return s},precomputeWindow(r,n){const{windows:s,windowSize:i}=Ub(n,e),o=[];let a=r,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,s){const{windows:i,windowSize:o}=Ub(r,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**r-1),l=2**r,h=BigInt(r);for(let d=0;d<i;d++){const f=d*o;let p=Number(s&u);s>>=h,p>o&&(p-=l,s+=Mm);const g=f,m=f+Math.abs(p)-1,w=d%2!==0,v=p<0;p===0?c=c.add(Db(w,n[g])):a=a.add(Db(v,n[m]))}return{p:a,f:c}},wNAFUnsafe(r,n,s,i=t.ZERO){const{windows:o,windowSize:a}=Ub(r,e),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let h=0;h<o;h++){const d=h*a;if(s===CS)break;let f=Number(s&c);if(s>>=l,f>a&&(f-=u,s+=Mm),f===0)continue;let p=n[d+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(r,n,s){let i=Bb.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&Bb.set(n,s(i))),i},wNAFCached(r,n,s){const i=$b(r);return this.wNAF(i,this.getPrecomputes(i,r,s),n)},wNAFCachedUnsafe(r,n,s,i){const o=$b(r);return o===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,r,s),n,i)},setWindowSize(r,n){iR(n,e),oR.set(r,n),Bb.delete(r)}}}function yF(t,e,r,n){if(pF(r,t),gF(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=rF(BigInt(r.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),u=Math.floor((e.BITS-1)/o)*o;let l=s;for(let h=u;h>=0;h-=o){c.fill(s);for(let f=0;f<n.length;f++){const p=n[f],g=Number(p>>BigInt(h)&BigInt(a));c[g]=c[g].add(r[f])}let d=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),d=d.add(p);if(l=l.add(d),h!==0)for(let f=0;f<o;f++)l=l.double()}return l}function wF(t){return hF(t.Fp),LA(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nR(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const ni=BigInt(0),Un=BigInt(1),Fm=BigInt(2),bF=BigInt(8),vF={zip215:!0};function EF(t){const e=wF(t);return LA(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function _F(t){const e=EF(t),{Fp:r,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,u=Fm<<BigInt(a*8)-Un,l=r.create,h=sR(e.n,e.nBitLength),d=e.uvRatio||((I,x)=>{try{return{isValid:!0,value:r.sqrt(I*r.inv(x))}}catch{return{isValid:!1,value:ni}}}),f=e.adjustScalarBytes||(I=>I),p=e.domain||((I,x,M)=>{if(Pb("phflag",M),x.length||M)throw new Error("Contexts/pre-hash are not supported");return I});function g(I,x){bf("coordinate "+I,x,ni,u)}function m(I){if(!(I instanceof E))throw new Error("ExtendedPoint expected")}const w=vS((I,x)=>{const{ex:M,ey:G,ez:q}=I,Y=I.is0();x==null&&(x=Y?bF:r.inv(q));const U=l(M*x),j=l(G*x),F=l(q*x);if(Y)return{x:ni,y:Un};if(F!==Un)throw new Error("invZ was invalid");return{x:U,y:j}}),v=vS(I=>{const{a:x,d:M}=e;if(I.is0())throw new Error("bad point: ZERO");const{ex:G,ey:q,ez:Y,et:U}=I,j=l(G*G),F=l(q*q),W=l(Y*Y),te=l(W*W),ae=l(j*x),fe=l(W*l(ae+F)),ge=l(te+l(M*l(j*F)));if(fe!==ge)throw new Error("bad point: equation left != right (1)");const Ie=l(G*q),Je=l(Y*U);if(Ie!==Je)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(x,M,G,q){this.ex=x,this.ey=M,this.ez=G,this.et=q,g("x",x),g("y",M),g("z",G),g("t",q),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(x){if(x instanceof E)throw new Error("extended point not allowed");const{x:M,y:G}=x||{};return g("x",M),g("y",G),new E(M,G,Un,l(M*G))}static normalizeZ(x){const M=r.invertBatch(x.map(G=>G.ez));return x.map((G,q)=>G.toAffine(M[q])).map(E.fromAffine)}static msm(x,M){return yF(E,h,x,M)}_setWindowSize(x){C.setWindowSize(this,x)}assertValidity(){v(this)}equals(x){m(x);const{ex:M,ey:G,ez:q}=this,{ex:Y,ey:U,ez:j}=x,F=l(M*j),W=l(Y*q),te=l(G*j),ae=l(U*q);return F===W&&te===ae}is0(){return this.equals(E.ZERO)}negate(){return new E(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:x}=e,{ex:M,ey:G,ez:q}=this,Y=l(M*M),U=l(G*G),j=l(Fm*l(q*q)),F=l(x*Y),W=M+G,te=l(l(W*W)-Y-U),ae=F+U,fe=ae-j,ge=F-U,Ie=l(te*fe),Je=l(ae*ge),ze=l(te*ge),Le=l(fe*ae);return new E(Ie,Je,Le,ze)}add(x){m(x);const{a:M,d:G}=e,{ex:q,ey:Y,ez:U,et:j}=this,{ex:F,ey:W,ez:te,et:ae}=x;if(M===BigInt(-1)){const Di=l((Y-q)*(W+F)),kn=l((Y+q)*(W-F)),vo=l(kn-Di);if(vo===ni)return this.double();const gn=l(U*Fm*ae),va=l(j*Fm*te),Eo=va+gn,mn=kn+Di,Os=va-gn,_o=l(Eo*vo),Dn=l(mn*Os),Pc=l(Eo*Os),N=l(vo*mn);return new E(_o,Dn,N,Pc)}const fe=l(q*F),ge=l(Y*W),Ie=l(j*G*ae),Je=l(U*te),ze=l((q+Y)*(F+W)-fe-ge),Le=Je-Ie,Ke=Je+Ie,Pe=l(ge-M*fe),hr=l(ze*Le),nr=l(Ke*Pe),gt=l(ze*Pe),ki=l(Le*Ke);return new E(hr,nr,ki,gt)}subtract(x){return this.add(x.negate())}wNAF(x){return C.wNAFCached(this,x,E.normalizeZ)}multiply(x){const M=x;bf("scalar",M,Un,n);const{p:G,f:q}=this.wNAF(M);return E.normalizeZ([G,q])[0]}multiplyUnsafe(x,M=E.ZERO){const G=x;return bf("scalar",G,ni,n),G===ni?S:this.is0()||G===Un?this:C.wNAFCachedUnsafe(this,G,E.normalizeZ,M)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return C.unsafeLadder(this,n).is0()}toAffine(x){return w(this,x)}clearCofactor(){const{h:x}=e;return x===Un?this:this.multiplyUnsafe(x)}static fromHex(x,M=!1){const{d:G,a:q}=e,Y=r.BYTES;x=Io("pointHex",x,Y),Pb("zip215",M);const U=x.slice(),j=x[Y-1];U[Y-1]=j&-129;const F=Ay(U),W=M?u:r.ORDER;bf("pointHex.y",F,ni,W);const te=l(F*F),ae=l(te-Un),fe=l(G*te-q);let{isValid:ge,value:Ie}=d(ae,fe);if(!ge)throw new Error("Point.fromHex: invalid y coordinate");const Je=(Ie&Un)===Un,ze=(j&128)!==0;if(!M&&Ie===ni&&ze)throw new Error("Point.fromHex: x=0 and x_0=1");return ze!==Je&&(Ie=l(-Ie)),E.fromAffine({x:Ie,y:F})}static fromPrivateKey(x){return P(x).point}toRawBytes(){const{x,y:M}=this.toAffine(),G=bE(M,r.BYTES);return G[G.length-1]|=x&Un?128:0,G}toHex(){return $A(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,Un,l(e.Gx*e.Gy)),E.ZERO=new E(ni,Un,Un,ni);const{BASE:A,ZERO:S}=E,C=mF(E,a*8);function T(I){return vr(I,n)}function O(I){return T(Ay(I))}function P(I){const x=r.BYTES;I=Io("private key",I,x);const M=Io("hashed private key",i(I),2*x),G=f(M.slice(0,x)),q=M.slice(x,2*x),Y=O(G),U=A.multiply(Y),j=U.toRawBytes();return{head:G,prefix:q,scalar:Y,point:U,pointBytes:j}}function B(I){return P(I).pointBytes}function L(I=new Uint8Array,...x){const M=bS(...x);return O(i(p(M,Io("context",I),!!s)))}function Q(I,x,M={}){I=Io("message",I),s&&(I=s(I));const{prefix:G,scalar:q,pointBytes:Y}=P(x),U=L(M.context,G,I),j=A.multiply(U).toRawBytes(),F=L(M.context,j,Y,I),W=T(U+F*q);bf("signature.s",W,ni,n);const te=bS(j,bE(W,r.BYTES));return Io("result",te,r.BYTES*2)}const se=vF;function V(I,x,M,G=se){const{context:q,zip215:Y}=G,U=r.BYTES;I=Io("signature",I,2*U),x=Io("message",x),M=Io("publicKey",M,U),Y!==void 0&&Pb("zip215",Y),s&&(x=s(x));const j=Ay(I.slice(U,2*U));let F,W,te;try{F=E.fromHex(M,Y),W=E.fromHex(I.slice(0,U),Y),te=A.multiplyUnsafe(j)}catch{return!1}if(!Y&&F.isSmallOrder())return!1;const ae=L(q,W.toRawBytes(),F.toRawBytes(),x);return W.add(F.multiplyUnsafe(ae)).subtract(te).clearCofactor().equals(E.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:B,sign:Q,verify:V,ExtendedPoint:E,utils:{getExtendedPublicKey:P,randomPrivateKey:()=>o(r.BYTES),precompute(I=8,x=E.BASE){return x._setWindowSize(I),x.multiply(BigInt(3)),x}}}}BigInt(0),BigInt(1);const MA=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),SS=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const AF=BigInt(1),IS=BigInt(2);BigInt(3);const CF=BigInt(5),SF=BigInt(8);function IF(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=MA,o=t*t%i*t%i,a=Ui(o,IS,i)*o%i,c=Ui(a,AF,i)*t%i,u=Ui(c,CF,i)*c%i,l=Ui(u,e,i)*u%i,h=Ui(l,r,i)*l%i,d=Ui(h,n,i)*h%i,f=Ui(d,s,i)*d%i,p=Ui(f,s,i)*d%i,g=Ui(p,e,i)*u%i;return{pow_p_5_8:Ui(g,IS,i)*t%i,b2:o}}function TF(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function NF(t,e){const r=MA,n=vr(e*e*e,r),s=vr(n*n*e,r),i=IF(t*s).pow_p_5_8;let o=vr(t*n*i,r);const a=vr(e*o*o,r),c=o,u=vr(o*SS,r),l=a===t,h=a===vr(-t,r),d=a===vr(-t*SS,r);return l&&(o=c),(h||d)&&(o=u),uF(o,r)&&(o=vr(-o,r)),{isValid:l||h,value:o}}const xF=sR(MA,void 0,!0),OF={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:xF,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:SF,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Q4,randomBytes:Q2,adjustScalarBytes:TF,uvRatio:NF},aR=_F(OF),RF="EdDSA",PF="JWT",tw=".",u0="base64url",cR="utf8",uR="utf8",kF=":",DF="did",UF="key",TS="base58btc",BF="z",$F="K36",LF=32;function FA(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function lR(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?FA(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function hR(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const r=lR(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return FA(r)}function MF(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,w=0,v=p.length;w!==v&&p[w]===0;)w++,g++;for(var E=(v-w)*l+1>>>0,A=new Uint8Array(E);w!==v;){for(var S=p[w],C=0,T=E-1;(S!==0||C<m)&&T!==-1;T--,C++)S+=256*A[T]>>>0,A[T]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");m=C,w++}for(var O=E-m;O!==E&&A[O]===0;)O++;for(var P=c.repeat(g);O<E;++O)P+=t.charAt(A[O]);return P}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,w=0;p[g]===c;)m++,g++;for(var v=(p.length-g)*u+1>>>0,E=new Uint8Array(v);p[g];){var A=r[p.charCodeAt(g)];if(A===255)return;for(var S=0,C=v-1;(A!==0||S<w)&&C!==-1;C--,S++)A+=a*E[C]>>>0,E[C]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");w=S,g++}if(p[g]!==" "){for(var T=v-w;T!==v&&E[T]===0;)T++;for(var O=new Uint8Array(m+(v-T)),P=m;T!==v;)O[P++]=E[T++];return O}}}function f(p){var g=d(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var FF=MF,jF=FF;const dR=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},zF=t=>new TextEncoder().encode(t),HF=t=>new TextDecoder().decode(t);let qF=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},WF=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return fR(this,e)}},VF=class{constructor(e){this.decoders=e}or(e){return fR(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const fR=(t,e)=>new VF({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let GF=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new qF(e,r,n),this.decoder=new WF(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const l0=({name:t,prefix:e,encode:r,decode:n})=>new GF(t,e,r,n),rm=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=jF(r,e);return l0({prefix:t,name:e,encode:n,decode:i=>dR(s(i))})},KF=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const h=s[t[l]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},JF=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Qr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>l0({prefix:e,name:t,encode(s){return JF(s,n,r)},decode(s){return KF(s,n,r,t)}}),YF=l0({prefix:"\0",name:"identity",encode:t=>HF(t),decode:t=>zF(t)});var QF=Object.freeze({__proto__:null,identity:YF});const ZF=Qr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var XF=Object.freeze({__proto__:null,base2:ZF});const e6=Qr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var t6=Object.freeze({__proto__:null,base8:e6});const r6=rm({prefix:"9",name:"base10",alphabet:"0123456789"});var n6=Object.freeze({__proto__:null,base10:r6});const s6=Qr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),i6=Qr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var o6=Object.freeze({__proto__:null,base16:s6,base16upper:i6});const a6=Qr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),c6=Qr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),u6=Qr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),l6=Qr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),h6=Qr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),d6=Qr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),f6=Qr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),p6=Qr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),g6=Qr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var m6=Object.freeze({__proto__:null,base32:a6,base32upper:c6,base32pad:u6,base32padupper:l6,base32hex:h6,base32hexupper:d6,base32hexpad:f6,base32hexpadupper:p6,base32z:g6});const y6=rm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),w6=rm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var b6=Object.freeze({__proto__:null,base36:y6,base36upper:w6});const v6=rm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),E6=rm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var _6=Object.freeze({__proto__:null,base58btc:v6,base58flickr:E6});const A6=Qr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),C6=Qr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),S6=Qr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),I6=Qr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var T6=Object.freeze({__proto__:null,base64:A6,base64pad:C6,base64url:S6,base64urlpad:I6});const pR=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),N6=pR.reduce((t,e,r)=>(t[r]=e,t),[]),x6=pR.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function O6(t){return t.reduce((e,r)=>(e+=N6[r],e),"")}function R6(t){const e=[];for(const r of t){const n=x6[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const P6=l0({prefix:"🚀",name:"base256emoji",encode:O6,decode:R6});var k6=Object.freeze({__proto__:null,base256emoji:P6}),D6=gR,NS=128,U6=-128,B6=Math.pow(2,31);function gR(t,e,r){e=e||[],r=r||0;for(var n=r;t>=B6;)e[r++]=t&255|NS,t/=128;for(;t&U6;)e[r++]=t&255|NS,t>>>=7;return e[r]=t|0,gR.bytes=r-n+1,e}var $6=EE,L6=128,xS=127;function EE(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw EE.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&xS)<<s:(o&xS)*Math.pow(2,s),s+=7}while(o>=L6);return EE.bytes=i-n,r}var M6=Math.pow(2,7),F6=Math.pow(2,14),j6=Math.pow(2,21),z6=Math.pow(2,28),H6=Math.pow(2,35),q6=Math.pow(2,42),W6=Math.pow(2,49),V6=Math.pow(2,56),G6=Math.pow(2,63),K6=function(t){return t<M6?1:t<F6?2:t<j6?3:t<z6?4:t<H6?5:t<q6?6:t<W6?7:t<V6?8:t<G6?9:10},J6={encode:D6,decode:$6,encodingLength:K6},mR=J6;const OS=(t,e,r=0)=>(mR.encode(t,e,r),e),RS=t=>mR.encodingLength(t),_E=(t,e)=>{const r=e.byteLength,n=RS(t),s=n+RS(r),i=new Uint8Array(s+r);return OS(t,i,0),OS(r,i,n),i.set(e,s),new Y6(t,r,e,i)};let Y6=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};const yR=({name:t,code:e,encode:r})=>new Q6(t,e,r);let Q6=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?_E(this.code,r):r.then(n=>_E(this.code,n))}else throw Error("Unknown type, must be binary type")}};const wR=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Z6=yR({name:"sha2-256",code:18,encode:wR("SHA-256")}),X6=yR({name:"sha2-512",code:19,encode:wR("SHA-512")});var ej=Object.freeze({__proto__:null,sha256:Z6,sha512:X6});const bR=0,tj="identity",vR=dR,rj=t=>_E(bR,vR(t)),nj={code:bR,name:tj,encode:vR,digest:rj};var sj=Object.freeze({__proto__:null,identity:nj});new TextEncoder,new TextDecoder;const PS={...QF,...XF,...t6,...n6,...o6,...m6,...b6,..._6,...T6,...k6};({...ej,...sj});function ER(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const kS=ER("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Lb=ER("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=lR(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),_R={utf8:kS,"utf-8":kS,hex:PS.base16,latin1:Lb,ascii:Lb,binary:Lb,...PS};function h0(t,e="utf8"){const r=_R[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Gd(t,e="utf8"){const r=_R[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?FA(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function DS(t){return Vu(h0(Gd(t,u0),cR))}function rw(t){return h0(Gd(ha(t),cR),u0)}function AR(t){const e=Gd($F,TS),r=BF+h0(hR([e,t]),TS);return[DF,UF,r].join(kF)}function ij(t){return h0(t,u0)}function oj(t){return Gd(t,u0)}function aj(t){return Gd([rw(t.header),rw(t.payload)].join(tw),uR)}function cj(t){return[rw(t.header),rw(t.payload),ij(t.signature)].join(tw)}function AE(t){const e=t.split(tw),r=DS(e[0]),n=DS(e[1]),s=oj(e[2]),i=Gd(e.slice(0,2).join(tw),uR);return{header:r,payload:n,signature:s,data:i}}function US(t=Q2(LF)){const e=aR.getPublicKey(t);return{secretKey:hR([t,e]),publicKey:e}}async function uj(t,e,r,n,s=he.fromMiliseconds(Date.now())){const i={alg:RF,typ:PF},o=AR(n.publicKey),a=s+r,c={iss:o,sub:t,aud:e,iat:s,exp:a},u=aj({header:i,payload:c}),l=aR.sign(u,n.secretKey.slice(0,32));return cj({header:i,payload:c,signature:l})}var BS=function(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},lj=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),hj=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=Er.platform}return t}(),dj=function(){function t(e,r,n,s){this.name=e,this.version=r,this.os=n,this.bot=s,this.type="bot-device"}return t}(),fj=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),pj=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),gj=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,mj=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,$S=3,yj=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",gj]],LS=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function wj(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new pj:typeof navigator<"u"?vj(navigator.userAgent):_j()}function bj(t){return t!==""&&yj.reduce(function(e,r){var n=r[0],s=r[1];if(e)return e;var i=s.exec(t);return!!i&&[n,i]},!1)}function vj(t){var e=bj(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new fj;var s=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);s?s.length<$S&&(s=BS(BS([],s,!0),Aj($S-s.length),!0)):s=[];var i=s.join("."),o=Ej(t),a=mj.exec(t);return a&&a[1]?new dj(r,i,o,a[1]):new lj(r,i,o)}function Ej(t){for(var e=0,r=LS.length;e<r;e++){var n=LS[e],s=n[0],i=n[1],o=i.exec(t);if(o)return s}return null}function _j(){var t=typeof Er<"u"&&Er.version;return t?new hj(Er.version.slice(1)):null}function Aj(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Ct={},MS;function CR(){if(MS)return Ct;MS=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.getLocalStorage=Ct.getLocalStorageOrThrow=Ct.getCrypto=Ct.getCryptoOrThrow=Ct.getLocation=Ct.getLocationOrThrow=Ct.getNavigator=Ct.getNavigatorOrThrow=Ct.getDocument=Ct.getDocumentOrThrow=Ct.getFromWindowOrThrow=Ct.getFromWindow=void 0;function t(d){let f;return typeof window<"u"&&typeof window[d]<"u"&&(f=window[d]),f}Ct.getFromWindow=t;function e(d){const f=t(d);if(!f)throw new Error(`${d} is not defined in Window`);return f}Ct.getFromWindowOrThrow=e;function r(){return e("document")}Ct.getDocumentOrThrow=r;function n(){return t("document")}Ct.getDocument=n;function s(){return e("navigator")}Ct.getNavigatorOrThrow=s;function i(){return t("navigator")}Ct.getNavigator=i;function o(){return e("location")}Ct.getLocationOrThrow=o;function a(){return t("location")}Ct.getLocation=a;function c(){return e("crypto")}Ct.getCryptoOrThrow=c;function u(){return t("crypto")}Ct.getCrypto=u;function l(){return e("localStorage")}Ct.getLocalStorageOrThrow=l;function h(){return t("localStorage")}return Ct.getLocalStorage=h,Ct}var Gu=CR(),vf={},FS;function Cj(){if(FS)return vf;FS=1,Object.defineProperty(vf,"__esModule",{value:!0}),vf.getWindowMetadata=void 0;const t=CR();function e(){let r,n;try{r=t.getDocumentOrThrow(),n=t.getLocationOrThrow()}catch{return null}function s(){const f=r.getElementsByTagName("link"),p=[];for(let g=0;g<f.length;g++){const m=f[g],w=m.getAttribute("rel");if(w&&w.toLowerCase().indexOf("icon")>-1){const v=m.getAttribute("href");if(v)if(v.toLowerCase().indexOf("https:")===-1&&v.toLowerCase().indexOf("http:")===-1&&v.indexOf("//")!==0){let E=n.protocol+"//"+n.host;if(v.indexOf("/")===0)E+=v;else{const A=n.pathname.split("/");A.pop();const S=A.join("/");E+=S+"/"+v}p.push(E)}else if(v.indexOf("//")===0){const E=n.protocol+v;p.push(E)}else p.push(v)}}return p}function i(...f){const p=r.getElementsByTagName("meta");for(let g=0;g<p.length;g++){const m=p[g],w=["itemprop","property","name"].map(v=>m.getAttribute(v)).filter(v=>v?f.includes(v):!1);if(w.length&&w){const v=m.getAttribute("content");if(v)return v}}return""}function o(){let f=i("name","og:site_name","og:title","twitter:title");return f||(f=r.title),f}function a(){return i("description","og:description","twitter:description","keywords")}const c=o(),u=a(),l=n.origin,h=s();return{description:u,url:l,icons:h,name:c}}return vf.getWindowMetadata=e,vf}var Sj=Cj();function Sp(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function jS(t){return Sp(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const SR="2.23.2";let Ef={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${SR}`},d0=class CE extends Error{constructor(e,r={}){var a;const n=(()=>{var c;return r.cause instanceof CE?r.cause.details:(c=r.cause)!=null&&c.message?r.cause.message:r.details})(),s=r.cause instanceof CE&&r.cause.docsPath||r.docsPath,i=(a=Ef.getDocsUrl)==null?void 0:a.call(Ef,{...r,docsPath:s}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...n?[`Details: ${n}`]:[],...Ef.version?[`Version: ${Ef.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=s,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=SR}walk(e){return IR(this,e)}};function IR(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?IR(t.cause,e):e?null:t}let TR=class extends d0{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}};function Kd(t,{dir:e,size:r=32}={}){return typeof t=="string"?Ij(t,{dir:e,size:r}):Tj(t,{dir:e,size:r})}function Ij(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new TR({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function Tj(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new TR({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let s=0;s<r;s++){const i=e==="right";n[i?s:r-s-1]=t[i?s:t.length-s-1]}return n}let Nj=class extends d0{constructor({max:e,min:r,signed:n,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}},xj=class extends d0{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Jd(t,{size:e}){if(jS(t)>e)throw new xj({givenSize:jS(t),maxSize:e})}function SE(t,e={}){const{signed:r}=e;e.size&&Jd(t,{size:e.size});const n=BigInt(t);if(!r)return n;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return n<=i?n:n-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Oj(t,e={}){return Number(SE(t,e))}const Rj=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function IE(t,e={}){return typeof t=="number"||typeof t=="bigint"?xR(t,e):typeof t=="string"?Dj(t,e):typeof t=="boolean"?Pj(t,e):NR(t,e)}function Pj(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(Jd(r,{size:e.size}),Kd(r,{size:e.size})):r}function NR(t,e={}){let r="";for(let s=0;s<t.length;s++)r+=Rj[t[s]];const n=`0x${r}`;return typeof e.size=="number"?(Jd(n,{size:e.size}),Kd(n,{dir:"right",size:e.size})):n}function xR(t,e={}){const{signed:r,size:n}=e,s=BigInt(t);let i;n?r?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&r?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new Nj({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?Kd(a,{size:n}):a}const kj=new TextEncoder;function Dj(t,e={}){const r=kj.encode(t);return NR(r,e)}const Uj=new TextEncoder;function Bj(t,e={}){return typeof t=="number"||typeof t=="bigint"?Lj(t,e):typeof t=="boolean"?$j(t,e):Sp(t)?OR(t,e):RR(t,e)}function $j(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(Jd(r,{size:e.size}),Kd(r,{size:e.size})):r}const To={zero:48,nine:57,A:65,F:70,a:97,f:102};function zS(t){if(t>=To.zero&&t<=To.nine)return t-To.zero;if(t>=To.A&&t<=To.F)return t-(To.A-10);if(t>=To.a&&t<=To.f)return t-(To.a-10)}function OR(t,e={}){let r=t;e.size&&(Jd(r,{size:e.size}),r=Kd(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const s=n.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=zS(n.charCodeAt(a++)),u=zS(n.charCodeAt(a++));if(c===void 0||u===void 0)throw new d0(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);i[o]=c*16+u}return i}function Lj(t,e){const r=xR(t,e);return OR(r)}function RR(t,e={}){const r=Uj.encode(t);return typeof e.size=="number"?(Jd(r,{size:e.size}),Kd(r,{dir:"right",size:e.size})):r}function nw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Mj(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function f0(t,...e){if(!Mj(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function cpe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");nw(t.outputLen),nw(t.blockLen)}function HS(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Fj(t,e){f0(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const jm=BigInt(2**32-1),qS=BigInt(32);function jj(t,e=!1){return e?{h:Number(t&jm),l:Number(t>>qS&jm)}:{h:Number(t>>qS&jm)|0,l:Number(t&jm)|0}}function zj(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=jj(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const Hj=(t,e,r)=>t<<r|e>>>32-r,qj=(t,e,r)=>e<<r|t>>>32-r,Wj=(t,e,r)=>e<<r-32|t>>>64-r,Vj=(t,e,r)=>t<<r-32|e>>>64-r,Nl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Gj(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function upe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function lpe(t,e){return t<<32-e|t>>>e}const WS=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Kj(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function VS(t){for(let e=0;e<t.length;e++)t[e]=Kj(t[e])}function Jj(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function PR(t){return typeof t=="string"&&(t=Jj(t)),f0(t),t}function hpe(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];f0(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}let Yj=class{clone(){return this._cloneInto()}};function Qj(t){const e=n=>t().update(PR(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function fpe(t=32){if(Nl&&typeof Nl.getRandomValues=="function")return Nl.getRandomValues(new Uint8Array(t));if(Nl&&typeof Nl.randomBytes=="function")return Nl.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const kR=[],DR=[],UR=[],Zj=BigInt(0),_f=BigInt(1),Xj=BigInt(2),e9=BigInt(7),t9=BigInt(256),r9=BigInt(113);for(let t=0,e=_f,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],kR.push(2*(5*n+r)),DR.push((t+1)*(t+2)/2%64);let s=Zj;for(let i=0;i<7;i++)e=(e<<_f^(e>>e9)*r9)%t9,e&Xj&&(s^=_f<<(_f<<BigInt(i))-_f);UR.push(s)}const[n9,s9]=zj(UR,!0),GS=(t,e,r)=>r>32?Wj(t,e,r):Hj(t,e,r),KS=(t,e,r)=>r>32?Vj(t,e,r):qj(t,e,r);function i9(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],h=GS(u,l,1)^r[a],d=KS(u,l,1)^r[a+1];for(let f=0;f<50;f+=10)t[o+f]^=h,t[o+f+1]^=d}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=DR[o],c=GS(s,i,a),u=KS(s,i,a),l=kR[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=n9[n],t[1]^=s9[n]}r.fill(0)}let o9=class BR extends Yj{constructor(e,r,n,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,nw(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Gj(this.state)}keccak(){WS||VS(this.state32),i9(this.state32,this.rounds),WS||VS(this.state32),this.posOut=0,this.pos=0}update(e){HS(this);const{blockLen:r,state:n}=this;e=PR(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){HS(this,!1),f0(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return nw(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Fj(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new BR(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const a9=(t,e,r)=>Qj(()=>new o9(e,t,r)),c9=a9(1,136,256/8);function $R(t,e){const r=e||"hex",n=c9(Sp(t,{strict:!1})?Bj(t):t);return r==="bytes"?n:IE(n)}let u9=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}};const Mb=new u9(8192);function l9(t,e){if(Mb.has(`${t}.${e}`))return Mb.get(`${t}.${e}`);const r=t.substring(2).toLowerCase(),n=$R(RR(r),"bytes"),s=r.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(n[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return Mb.set(`${t}.${e}`,i),i}function h9(t){const e=$R(`0x${t.substring(4)}`).substring(26);return l9(`0x${e}`)}async function d9({hash:t,signature:e}){const r=Sp(t)?t:IE(t),{secp256k1:n}=await Ls(async()=>{const{secp256k1:o}=await import("./secp256k1-CtbxsCGE.js");return{secp256k1:o}},__vite__mapDeps([0,1,2]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:u,s:l,v:h,yParity:d}=e,f=Number(d??h),p=JS(f);return new n.Signature(SE(u),SE(l)).addRecoveryBit(p)}const o=Sp(e)?e:IE(e),a=Oj(`0x${o.slice(130)}`),c=JS(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function JS(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function f9({hash:t,signature:e}){return h9(await d9({hash:t,signature:e}))}function p9(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<t.length;u++){const l=t.charAt(u),h=l.charCodeAt(0);if(e[h]!==255)throw new TypeError(l+" is ambiguous");e[h]=u}const r=t.length,n=t.charAt(0),s=Math.log(r)/Math.log(256),i=Math.log(256)/Math.log(r);function o(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let l=0,h=0,d=0;const f=u.length;for(;d!==f&&u[d]===0;)d++,l++;const p=(f-d)*i+1>>>0,g=new Uint8Array(p);for(;d!==f;){let v=u[d],E=0;for(let A=p-1;(v!==0||E<h)&&A!==-1;A--,E++)v+=256*g[A]>>>0,g[A]=v%r>>>0,v=v/r>>>0;if(v!==0)throw new Error("Non-zero carry");h=E,d++}let m=p-h;for(;m!==p&&g[m]===0;)m++;let w=n.repeat(l);for(;m<p;++m)w+=t.charAt(g[m]);return w}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let l=0,h=0,d=0;for(;u[l]===n;)h++,l++;const f=(u.length-l)*s+1>>>0,p=new Uint8Array(f);for(;l<u.length;){const v=u.charCodeAt(l);if(v>255)return;let E=e[v];if(E===255)return;let A=0;for(let S=f-1;(E!==0||A<d)&&S!==-1;S--,A++)E+=r*p[S]>>>0,p[S]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");d=A,l++}let g=f-d;for(;g!==f&&p[g]===0;)g++;const m=new Uint8Array(h+(f-g));let w=h;for(;g!==f;)m[w++]=p[g++];return m}function c(u){const l=a(u);if(l)return l;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var g9="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const LR=p9(g9);function MR(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function sp(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const r=MR(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return r}function m9(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,w=0,v=p.length;w!==v&&p[w]===0;)w++,g++;for(var E=(v-w)*l+1>>>0,A=new Uint8Array(E);w!==v;){for(var S=p[w],C=0,T=E-1;(S!==0||C<m)&&T!==-1;T--,C++)S+=256*A[T]>>>0,A[T]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");m=C,w++}for(var O=E-m;O!==E&&A[O]===0;)O++;for(var P=c.repeat(g);O<E;++O)P+=t.charAt(A[O]);return P}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,w=0;p[g]===c;)m++,g++;for(var v=(p.length-g)*u+1>>>0,E=new Uint8Array(v);p[g];){var A=r[p.charCodeAt(g)];if(A===255)return;for(var S=0,C=v-1;(A!==0||S<w)&&C!==-1;C--,S++)A+=a*E[C]>>>0,E[C]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");w=S,g++}if(p[g]!==" "){for(var T=v-w;T!==v&&E[T]===0;)T++;for(var O=new Uint8Array(m+(v-T)),P=m;T!==v;)O[P++]=E[T++];return O}}}function f(p){var g=d(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var y9=m9,w9=y9;const b9=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},v9=t=>new TextEncoder().encode(t),E9=t=>new TextDecoder().decode(t);class _9{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class A9{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return FR(this,e)}}class C9{constructor(e){this.decoders=e}or(e){return FR(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const FR=(t,e)=>new C9({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class S9{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new _9(e,r,n),this.decoder=new A9(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const p0=({name:t,prefix:e,encode:r,decode:n})=>new S9(t,e,r,n),nm=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=w9(r,e);return p0({prefix:t,name:e,encode:n,decode:i=>b9(s(i))})},I9=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const h=s[t[l]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},T9=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Zr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>p0({prefix:e,name:t,encode(s){return T9(s,n,r)},decode(s){return I9(s,n,r,t)}}),N9=p0({prefix:"\0",name:"identity",encode:t=>E9(t),decode:t=>v9(t)}),x9=Object.freeze(Object.defineProperty({__proto__:null,identity:N9},Symbol.toStringTag,{value:"Module"})),O9=Zr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),R9=Object.freeze(Object.defineProperty({__proto__:null,base2:O9},Symbol.toStringTag,{value:"Module"})),P9=Zr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),k9=Object.freeze(Object.defineProperty({__proto__:null,base8:P9},Symbol.toStringTag,{value:"Module"})),D9=nm({prefix:"9",name:"base10",alphabet:"0123456789"}),U9=Object.freeze(Object.defineProperty({__proto__:null,base10:D9},Symbol.toStringTag,{value:"Module"})),B9=Zr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),$9=Zr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),L9=Object.freeze(Object.defineProperty({__proto__:null,base16:B9,base16upper:$9},Symbol.toStringTag,{value:"Module"})),M9=Zr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),F9=Zr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),j9=Zr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),z9=Zr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),H9=Zr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),q9=Zr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),W9=Zr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),V9=Zr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),G9=Zr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),K9=Object.freeze(Object.defineProperty({__proto__:null,base32:M9,base32hex:H9,base32hexpad:W9,base32hexpadupper:V9,base32hexupper:q9,base32pad:j9,base32padupper:z9,base32upper:F9,base32z:G9},Symbol.toStringTag,{value:"Module"})),J9=nm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Y9=nm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Q9=Object.freeze(Object.defineProperty({__proto__:null,base36:J9,base36upper:Y9},Symbol.toStringTag,{value:"Module"})),Z9=nm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),X9=nm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ez=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Z9,base58flickr:X9},Symbol.toStringTag,{value:"Module"})),tz=Zr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),rz=Zr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),nz=Zr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),sz=Zr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),iz=Object.freeze(Object.defineProperty({__proto__:null,base64:tz,base64pad:rz,base64url:nz,base64urlpad:sz},Symbol.toStringTag,{value:"Module"})),jR=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),oz=jR.reduce((t,e,r)=>(t[r]=e,t),[]),az=jR.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function cz(t){return t.reduce((e,r)=>(e+=oz[r],e),"")}function uz(t){const e=[];for(const r of t){const n=az[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const lz=p0({prefix:"🚀",name:"base256emoji",encode:cz,decode:uz}),hz=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:lz},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const YS={...x9,...R9,...k9,...U9,...L9,...K9,...Q9,...ez,...iz,...hz};function zR(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const QS=zR("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Fb=zR("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=MR(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),HR={utf8:QS,"utf-8":QS,hex:YS.base16,latin1:Fb,ascii:Fb,binary:Fb,...YS};function Js(t,e="utf8"){const r=HR[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function Kn(t,e="utf8"){const r=HR[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}const dz={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var fz={};const pz=":";function dh(t){const[e,r]=t.split(pz);return{namespace:e,reference:r}}function qR(t,e){return t.includes(":")?[t]:e.chains||[]}var gz=Object.defineProperty,mz=Object.defineProperties,yz=Object.getOwnPropertyDescriptors,ZS=Object.getOwnPropertySymbols,wz=Object.prototype.hasOwnProperty,bz=Object.prototype.propertyIsEnumerable,XS=(t,e,r)=>e in t?gz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,eI=(t,e)=>{for(var r in e||(e={}))wz.call(e,r)&&XS(t,r,e[r]);if(ZS)for(var r of ZS(e))bz.call(e,r)&&XS(t,r,e[r]);return t},vz=(t,e)=>mz(t,yz(e));const Ez="ReactNative",ws={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},_z="js";function sw(){return typeof Er<"u"&&typeof Er.versions<"u"&&typeof Er.versions.node<"u"}function Nc(){return!Gu.getDocument()&&!!Gu.getNavigator()&&navigator.product===Ez}function Az(){return Nc()&&typeof Te<"u"&&typeof(Te==null?void 0:Te.Platform)<"u"&&(Te==null?void 0:Te.Platform.OS)==="android"}function Cz(){return Nc()&&typeof Te<"u"&&typeof(Te==null?void 0:Te.Platform)<"u"&&(Te==null?void 0:Te.Platform.OS)==="ios"}function sm(){return!sw()&&!!Gu.getNavigator()&&!!Gu.getDocument()}function im(){return Nc()?ws.reactNative:sw()?ws.node:sm()?ws.browser:ws.unknown}function tI(){var t;try{return Nc()&&typeof Te<"u"&&typeof(Te==null?void 0:Te.Application)<"u"?(t=Te.Application)==null?void 0:t.applicationId:void 0}catch{return}}function Sz(t,e){const r=new URLSearchParams(t);for(const n of Object.keys(e).sort())if(e.hasOwnProperty(n)){const s=e[n];s!==void 0&&r.set(n,s)}return r.toString()}function Iz(t){var e,r;const n=WR();try{return t!=null&&t.url&&n.url&&t.url!==n.url&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),t.url=n.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),vz(eI(eI({},n),t),{url:(t==null?void 0:t.url)||n.url,name:(t==null?void 0:t.name)||n.name,description:(t==null?void 0:t.description)||n.description,icons:(r=t==null?void 0:t.icons)!=null&&r.length&&t.icons.length>0?t.icons:n.icons})}catch(s){return console.warn("Error populating app metadata",s),t||n}}function WR(){return Sj.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function Tz(){if(im()===ws.reactNative&&typeof Te<"u"&&typeof(Te==null?void 0:Te.Platform)<"u"){const{OS:r,Version:n}=Te.Platform;return[r,n].join("-")}const t=wj();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Nz(){var t;const e=im();return e===ws.browser?[e,((t=Gu.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function VR(t,e,r){const n=Tz(),s=Nz();return[[t,e].join("-"),[_z,r].join("-"),n,s].join("/")}function xz({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const u=r.split("?"),l=VR(t,e,n),h={auth:s,ua:l,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},d=Sz(u[1]||"",h);return u[0]+"?"+d}function tu(t,e){return t.filter(r=>e.includes(r)).length===t.length}function TE(t){return Object.fromEntries(t.entries())}function NE(t){return new Map(Object.entries(t))}function Mc(t=he.FIVE_MINUTES,e){const r=he.toMiliseconds(t||he.FIVE_MINUTES);let n,s,i,o;return{resolve:a=>{i&&n&&(clearTimeout(i),n(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const u=new Error(e);o=Promise.reject(u),c(u)},r),n=a,s=c})}}function ic(t,e,r){return new Promise(async(n,s)=>{const i=setTimeout(()=>s(new Error(r)),e);try{const o=await t;n(o)}catch(o){s(o)}clearTimeout(i)})}function GR(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Oz(t){return GR("topic",t)}function Rz(t){return GR("id",t)}function KR(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function br(t,e){return he.fromMiliseconds(Date.now()+he.toMiliseconds(t))}function ka(t){return Date.now()>=he.toMiliseconds(t)}function ft(t,e){return`${t}${e?`:${e}`:""}`}function Cy(t=[],e=[]){return[...new Set([...t,...e])]}async function Pz({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const s=typeof r=="string"?JSON.parse(r):r,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=kz(i,t,e),a=im();if(a===ws.browser){if(!((n=Gu.getDocument())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}Dz(o)}else a===ws.reactNative&&typeof(Te==null?void 0:Te.Linking)<"u"&&await Te.Linking.openURL(o)}catch(s){console.error(s)}}function kz(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${Lz(n,!0)}`}else s=`${s}/wc?${n}`;return s}function Dz(t){let e="_self";$z()?e="_top":(Bz()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function Uz(t,e){let r="";try{if(sm()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function rI(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function nI(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function jA(){return typeof Er<"u"&&fz.IS_VITEST==="true"}function Bz(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function $z(){try{return window.self!==window.top}catch{return!1}}function Lz(t,e=!1){const r=_r.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function JR(t){return _r.from(t,"base64").toString("utf-8")}function Mz(t){return new Promise(e=>setTimeout(e,t))}function Ip(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Fz(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function om(t,...e){if(!Fz(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function zA(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ip(t.outputLen),Ip(t.blockLen)}function ld(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function YR(t,e){om(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const zm=BigInt(2**32-1),sI=BigInt(32);function jz(t,e=!1){return e?{h:Number(t&zm),l:Number(t>>sI&zm)}:{h:Number(t>>sI&zm)|0,l:Number(t&zm)|0}}function zz(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=jz(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const Hz=(t,e,r)=>t<<r|e>>>32-r,qz=(t,e,r)=>e<<r|t>>>32-r,Wz=(t,e,r)=>e<<r-32|t>>>64-r,Vz=(t,e,r)=>t<<r-32|e>>>64-r,xl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Gz(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function jb(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Bi(t,e){return t<<32-e|t>>>e}const iI=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Kz(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function oI(t){for(let e=0;e<t.length;e++)t[e]=Kz(t[e])}function Jz(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function hd(t){return typeof t=="string"&&(t=Jz(t)),om(t),t}function Yz(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];om(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}let HA=class{clone(){return this._cloneInto()}};function QR(t){const e=n=>t().update(hd(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Yd(t=32){if(xl&&typeof xl.getRandomValues=="function")return xl.getRandomValues(new Uint8Array(t));if(xl&&typeof xl.randomBytes=="function")return xl.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const ZR=[],XR=[],eP=[],Qz=BigInt(0),Af=BigInt(1),Zz=BigInt(2),Xz=BigInt(7),e7=BigInt(256),t7=BigInt(113);for(let t=0,e=Af,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],ZR.push(2*(5*n+r)),XR.push((t+1)*(t+2)/2%64);let s=Qz;for(let i=0;i<7;i++)e=(e<<Af^(e>>Xz)*t7)%e7,e&Zz&&(s^=Af<<(Af<<BigInt(i))-Af);eP.push(s)}const[r7,n7]=zz(eP,!0),aI=(t,e,r)=>r>32?Wz(t,e,r):Hz(t,e,r),cI=(t,e,r)=>r>32?Vz(t,e,r):qz(t,e,r);function s7(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],h=aI(u,l,1)^r[a],d=cI(u,l,1)^r[a+1];for(let f=0;f<50;f+=10)t[o+f]^=h,t[o+f+1]^=d}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=XR[o],c=aI(s,i,a),u=cI(s,i,a),l=ZR[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=r7[n],t[1]^=n7[n]}r.fill(0)}let i7=class tP extends HA{constructor(e,r,n,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ip(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Gz(this.state)}keccak(){iI||oI(this.state32),s7(this.state32,this.rounds),iI||oI(this.state32),this.posOut=0,this.pos=0}update(e){ld(this);const{blockLen:r,state:n}=this;e=hd(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){ld(this,!1),om(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ip(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(YR(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new tP(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const o7=(t,e,r)=>QR(()=>new i7(e,t,r)),a7=o7(1,136,256/8),c7="https://rpc.walletconnect.org/v1";function rP(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+_r.from(a7(r)).toString("hex")}async function u7(t,e,r,n,s,i){switch(r.t){case"eip191":return await l7(t,e,r.s);case"eip1271":return await h7(t,e,r.s,n,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function l7(t,e,r){return(await f9({hash:rP(e),signature:r})).toLowerCase()===t.toLowerCase()}async function h7(t,e,r,n,s,i){const o=dh(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",u="0000000000000000000000000000000000000000000000000000000000000041",l=r.substring(2),h=rP(e).substring(2),d=a+h+c+u+l,f=await fetch(`${i||c7}/?chainId=${n}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:d7(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:d},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function d7(){return Date.now()+Math.floor(Math.random()*1e3)}function f7(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const s=1+n*64;if(r.length<s)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const i=_r.from(t,"base64").slice(1,65);return LR.encode(i)}var p7=Object.defineProperty,g7=Object.defineProperties,m7=Object.getOwnPropertyDescriptors,uI=Object.getOwnPropertySymbols,y7=Object.prototype.hasOwnProperty,w7=Object.prototype.propertyIsEnumerable,lI=(t,e,r)=>e in t?p7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,b7=(t,e)=>{for(var r in e||(e={}))y7.call(e,r)&&lI(t,r,e[r]);if(uI)for(var r of uI(e))w7.call(e,r)&&lI(t,r,e[r]);return t},v7=(t,e)=>g7(t,m7(e));const E7="did:pkh:",qA=t=>t==null?void 0:t.split(":"),_7=t=>{const e=t&&qA(t);if(e)return t.includes(E7)?e[3]:e[1]},xE=t=>{const e=t&&qA(t);if(e)return e[2]+":"+e[3]},iw=t=>{const e=t&&qA(t);if(e)return e.pop()};async function hI(t){const{cacao:e,projectId:r}=t,{s:n,p:s}=e,i=nP(s,s.iss),o=iw(s.iss);return await u7(o,i,n,xE(s.iss),r)}const nP=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=iw(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${_7(e)}`,c=`Nonce: ${t.nonce}`,u=`Issued At: ${t.iat}`,l=t.exp?`Expiration Time: ${t.exp}`:void 0,h=t.nbf?`Not Before: ${t.nbf}`:void 0,d=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=Sy(t.resources);if(p){const g=Tp(p);s=R7(s,g)}return[r,n,"",s,"",i,o,a,c,u,l,h,d,f].filter(g=>g!=null).join(`
`)};function A7(t){return _r.from(JSON.stringify(t)).toString("base64")}function C7(t){return JSON.parse(_r.from(t,"base64").toString("utf-8"))}function Ku(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(s=>{const i=n[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function S7(t,e,r,n={}){return r==null||r.sort((s,i)=>s.localeCompare(i)),{att:{[t]:I7(e,r,n)}}}function I7(t,e,r={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const n=e.map(s=>({[`${t}/${s}`]:[r]}));return Object.assign({},...n)}function sP(t){return Ku(t),`urn:recap:${A7(t).replace(/=/g,"")}`}function Tp(t){const e=C7(t.replace("urn:recap:",""));return Ku(e),e}function T7(t,e,r){const n=S7(t,e,r);return sP(n)}function N7(t){return t&&t.includes("urn:recap:")}function x7(t,e){const r=Tp(t),n=Tp(e),s=O7(r,n);return sP(s)}function O7(t,e){Ku(t),Ku(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),n={att:{}};return r.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,u;n.att[s]=v7(b7({},n.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((u=e.att[s])==null?void 0:u[a])})})}),n}function R7(t="",e){Ku(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(h=>({ability:h.split("/")[0],action:h.split("/")[1]}));c.sort((h,d)=>h.action.localeCompare(d.action));const u={};c.forEach(h=>{u[h.ability]||(u[h.ability]=[]),u[h.ability].push(h.action)});const l=Object.keys(u).map(h=>(s++,`(${s}) '${h}': '${u[h].join("', '")}' for '${a}'.`));n.push(l.join(", ").replace(".,","."))});const i=n.join(" "),o=`${r}${i}`;return`${t?t+" ":""}${o}`}function dI(t){var e;const r=Tp(t);Ku(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(s=>s.split("/")[1]):[]}function fI(t){const e=Tp(t);Ku(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&r.push(s[0].chains)})}),[...new Set(r.flat())]}function Sy(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return N7(e)?e:void 0}function zb(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function iP(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ps(t,...e){if(!iP(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function pI(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function P7(t,e){ps(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function gI(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const uc=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),k7=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),D7=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!D7)throw new Error("Non little-endian hardware is not supported");function U7(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function OE(t){if(typeof t=="string")t=U7(t);else if(iP(t))t=RE(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function B7(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function $7(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const L7=(t,e)=>{function r(n,...s){if(ps(n),t.nonceLength!==void 0){const u=s[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?ps(u):ps(u,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&ps(s[1]);const o=e(n,...s),a=(u,l)=>{if(l!==void 0){if(u!==2)throw new Error("cipher output not supported");ps(l)}};let c=!1;return{encrypt(u,l){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,ps(u),a(o.encrypt.length,l),o.encrypt(u,l)},decrypt(u,l){if(ps(u),i&&u.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,l),o.decrypt(u,l)}}}return Object.assign(r,t),r};function mI(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!M7(e))throw new Error("invalid output, must be aligned");return e}function yI(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i);t.setUint32(e+4,o,n),t.setUint32(e+0,a,n)}function M7(t){return t.byteOffset%4===0}function RE(t){return Uint8Array.from(t)}function dd(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const oP=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),F7=oP("expand 16-byte k"),j7=oP("expand 32-byte k"),z7=uc(F7),H7=uc(j7);function ot(t,e){return t<<e|t>>>32-e}function PE(t){return t.byteOffset%4===0}const Hm=64,q7=16,aP=2**32-1,wI=new Uint32Array;function W7(t,e,r,n,s,i,o,a){const c=s.length,u=new Uint8Array(Hm),l=uc(u),h=PE(s)&&PE(i),d=h?uc(s):wI,f=h?uc(i):wI;for(let p=0;p<c;o++){if(t(e,r,n,l,o,a),o>=aP)throw new Error("arx: counter overflow");const g=Math.min(Hm,c-p);if(h&&g===Hm){const m=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let w=0,v;w<q7;w++)v=m+w,f[v]=d[v]^l[w];p+=Hm;continue}for(let m=0,w;m<g;m++)w=p+m,i[w]=s[w]^u[m];p+=g}}function V7(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:s,counterRight:i,rounds:o}=B7({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return zb(s),zb(o),gI(i),gI(r),(a,c,u,l,h=0)=>{ps(a),ps(c),ps(u);const d=u.length;if(l===void 0&&(l=new Uint8Array(d)),ps(l),zb(h),h<0||h>=aP)throw new Error("arx: counter overflow");if(l.length<d)throw new Error(`arx: output (${l.length}) is shorter than data (${d})`);const f=[];let p=a.length,g,m;if(p===32)f.push(g=RE(a)),m=H7;else if(p===16&&r)g=new Uint8Array(32),g.set(a),g.set(a,16),m=z7,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);PE(c)||f.push(c=RE(c));const w=uc(g);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(m,w,uc(c.subarray(0,16)),w),c=c.subarray(16)}const v=16-s;if(v!==c.length)throw new Error(`arx: nonce must be ${v} or 16 bytes`);if(v!==12){const A=new Uint8Array(12);A.set(c,i?0:12-c.length),c=A,f.push(c)}const E=uc(c);return W7(t,m,w,E,u,l,h,o),dd(...f),l}}const Br=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class G7{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=OE(e),ps(e,32);const r=Br(e,0),n=Br(e,2),s=Br(e,4),i=Br(e,6),o=Br(e,8),a=Br(e,10),c=Br(e,12),u=Br(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=Br(e,16+2*l)}process(e,r,n=!1){const s=n?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],u=o[2],l=o[3],h=o[4],d=o[5],f=o[6],p=o[7],g=o[8],m=o[9],w=Br(e,r+0),v=Br(e,r+2),E=Br(e,r+4),A=Br(e,r+6),S=Br(e,r+8),C=Br(e,r+10),T=Br(e,r+12),O=Br(e,r+14);let P=i[0]+(w&8191),B=i[1]+((w>>>13|v<<3)&8191),L=i[2]+((v>>>10|E<<6)&8191),Q=i[3]+((E>>>7|A<<9)&8191),se=i[4]+((A>>>4|S<<12)&8191),V=i[5]+(S>>>1&8191),I=i[6]+((S>>>14|C<<2)&8191),x=i[7]+((C>>>11|T<<5)&8191),M=i[8]+((T>>>8|O<<8)&8191),G=i[9]+(O>>>5|s),q=0,Y=q+P*a+B*(5*m)+L*(5*g)+Q*(5*p)+se*(5*f);q=Y>>>13,Y&=8191,Y+=V*(5*d)+I*(5*h)+x*(5*l)+M*(5*u)+G*(5*c),q+=Y>>>13,Y&=8191;let U=q+P*c+B*a+L*(5*m)+Q*(5*g)+se*(5*p);q=U>>>13,U&=8191,U+=V*(5*f)+I*(5*d)+x*(5*h)+M*(5*l)+G*(5*u),q+=U>>>13,U&=8191;let j=q+P*u+B*c+L*a+Q*(5*m)+se*(5*g);q=j>>>13,j&=8191,j+=V*(5*p)+I*(5*f)+x*(5*d)+M*(5*h)+G*(5*l),q+=j>>>13,j&=8191;let F=q+P*l+B*u+L*c+Q*a+se*(5*m);q=F>>>13,F&=8191,F+=V*(5*g)+I*(5*p)+x*(5*f)+M*(5*d)+G*(5*h),q+=F>>>13,F&=8191;let W=q+P*h+B*l+L*u+Q*c+se*a;q=W>>>13,W&=8191,W+=V*(5*m)+I*(5*g)+x*(5*p)+M*(5*f)+G*(5*d),q+=W>>>13,W&=8191;let te=q+P*d+B*h+L*l+Q*u+se*c;q=te>>>13,te&=8191,te+=V*a+I*(5*m)+x*(5*g)+M*(5*p)+G*(5*f),q+=te>>>13,te&=8191;let ae=q+P*f+B*d+L*h+Q*l+se*u;q=ae>>>13,ae&=8191,ae+=V*c+I*a+x*(5*m)+M*(5*g)+G*(5*p),q+=ae>>>13,ae&=8191;let fe=q+P*p+B*f+L*d+Q*h+se*l;q=fe>>>13,fe&=8191,fe+=V*u+I*c+x*a+M*(5*m)+G*(5*g),q+=fe>>>13,fe&=8191;let ge=q+P*g+B*p+L*f+Q*d+se*h;q=ge>>>13,ge&=8191,ge+=V*l+I*u+x*c+M*a+G*(5*m),q+=ge>>>13,ge&=8191;let Ie=q+P*m+B*g+L*p+Q*f+se*d;q=Ie>>>13,Ie&=8191,Ie+=V*h+I*l+x*u+M*c+G*a,q+=Ie>>>13,Ie&=8191,q=(q<<2)+q|0,q=q+Y|0,Y=q&8191,q=q>>>13,U+=q,i[0]=Y,i[1]=U,i[2]=j,i[3]=F,i[4]=W,i[5]=te,i[6]=ae,i[7]=fe,i[8]=ge,i[9]=Ie}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,n[0]=e[0]+5,s=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+s,s=n[a]>>>13,n[a]&=8191;n[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)n[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;dd(n)}update(e){pI(this);const{buffer:r,blockLen:n}=this;e=OE(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);if(o===n){for(;n<=s-i;i+=n)this.process(e,i);continue}r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){dd(this.h,this.r,this.buffer,this.pad)}digestInto(e){pI(this),P7(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:s}=this;if(s){for(r[s++]=1;s<16;s++)r[s]=0;this.process(r,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}}function K7(t){const e=(n,s)=>t(s).update(OE(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const J7=K7(t=>new G7(t));function Y7(t,e,r,n,s,i=20){let o=t[0],a=t[1],c=t[2],u=t[3],l=e[0],h=e[1],d=e[2],f=e[3],p=e[4],g=e[5],m=e[6],w=e[7],v=s,E=r[0],A=r[1],S=r[2],C=o,T=a,O=c,P=u,B=l,L=h,Q=d,se=f,V=p,I=g,x=m,M=w,G=v,q=E,Y=A,U=S;for(let F=0;F<i;F+=2)C=C+B|0,G=ot(G^C,16),V=V+G|0,B=ot(B^V,12),C=C+B|0,G=ot(G^C,8),V=V+G|0,B=ot(B^V,7),T=T+L|0,q=ot(q^T,16),I=I+q|0,L=ot(L^I,12),T=T+L|0,q=ot(q^T,8),I=I+q|0,L=ot(L^I,7),O=O+Q|0,Y=ot(Y^O,16),x=x+Y|0,Q=ot(Q^x,12),O=O+Q|0,Y=ot(Y^O,8),x=x+Y|0,Q=ot(Q^x,7),P=P+se|0,U=ot(U^P,16),M=M+U|0,se=ot(se^M,12),P=P+se|0,U=ot(U^P,8),M=M+U|0,se=ot(se^M,7),C=C+L|0,U=ot(U^C,16),x=x+U|0,L=ot(L^x,12),C=C+L|0,U=ot(U^C,8),x=x+U|0,L=ot(L^x,7),T=T+Q|0,G=ot(G^T,16),M=M+G|0,Q=ot(Q^M,12),T=T+Q|0,G=ot(G^T,8),M=M+G|0,Q=ot(Q^M,7),O=O+se|0,q=ot(q^O,16),V=V+q|0,se=ot(se^V,12),O=O+se|0,q=ot(q^O,8),V=V+q|0,se=ot(se^V,7),P=P+B|0,Y=ot(Y^P,16),I=I+Y|0,B=ot(B^I,12),P=P+B|0,Y=ot(Y^P,8),I=I+Y|0,B=ot(B^I,7);let j=0;n[j++]=o+C|0,n[j++]=a+T|0,n[j++]=c+O|0,n[j++]=u+P|0,n[j++]=l+B|0,n[j++]=h+L|0,n[j++]=d+Q|0,n[j++]=f+se|0,n[j++]=p+V|0,n[j++]=g+I|0,n[j++]=m+x|0,n[j++]=w+M|0,n[j++]=v+G|0,n[j++]=E+q|0,n[j++]=A+Y|0,n[j++]=S+U|0}const Q7=V7(Y7,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Z7=new Uint8Array(16),bI=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(Z7.subarray(r))},X7=new Uint8Array(32);function vI(t,e,r,n,s){const i=t(e,r,X7),o=J7.create(i);s&&bI(o,s),bI(o,n);const a=new Uint8Array(16),c=k7(a);yI(c,0,BigInt(s?s.length:0),!0),yI(c,8,BigInt(n.length),!0),o.update(a);const u=o.digest();return dd(i,a),u}const eH=t=>(e,r,n)=>({encrypt(s,i){const o=s.length;i=mI(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,r,a,a,1);const c=vI(t,e,r,a,n);return i.set(c,o),dd(c),i},decrypt(s,i){i=mI(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=vI(t,e,r,o,n);if(!$7(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,r,i,i,1),dd(c),i}}),cP=L7({blockSize:64,nonceLength:12,tagLength:16},eH(Q7));let uP=class extends HA{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,zA(e);const n=hd(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return ld(this),this.iHash.update(e),this}digestInto(e){ld(this),om(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const g0=(t,e,r)=>new uP(t,e).update(r).digest();g0.create=(t,e)=>new uP(t,e);function tH(t,e,r){return zA(t),r===void 0&&(r=new Uint8Array(t.outputLen)),g0(t,hd(r),hd(e))}const Hb=new Uint8Array([0]),EI=new Uint8Array;function rH(t,e,r,n=32){if(zA(t),Ip(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(n/t.outputLen);r===void 0&&(r=EI);const i=new Uint8Array(s*t.outputLen),o=g0.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let u=0;u<s;u++)Hb[0]=u+1,a.update(u===0?EI:c).update(r).update(Hb).digestInto(c),i.set(c,t.outputLen*u),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),Hb.fill(0),i.slice(0,n)}const nH=(t,e,r,n,s)=>rH(t,tH(t,e,r),n,s);function sH(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}function iH(t,e,r){return t&e^~t&r}function oH(t,e,r){return t&e^t&r^e&r}let aH=class extends HA{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=jb(this.buffer)}update(e){ld(this);const{view:r,buffer:n,blockLen:s}=this;e=hd(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=jb(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ld(this),YR(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let h=o;h<s;h++)r[h]=0;sH(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=jb(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,l[h],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};const cH=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ca=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Sa=new Uint32Array(64);class uH extends aH{constructor(){super(64,32,8,!1),this.A=Ca[0]|0,this.B=Ca[1]|0,this.C=Ca[2]|0,this.D=Ca[3]|0,this.E=Ca[4]|0,this.F=Ca[5]|0,this.G=Ca[6]|0,this.H=Ca[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)Sa[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const d=Sa[h-15],f=Sa[h-2],p=Bi(d,7)^Bi(d,18)^d>>>3,g=Bi(f,17)^Bi(f,19)^f>>>10;Sa[h]=g+Sa[h-7]+p+Sa[h-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let h=0;h<64;h++){const d=Bi(a,6)^Bi(a,11)^Bi(a,25),f=l+d+iH(a,c,u)+cH[h]+Sa[h]|0,p=(Bi(n,2)^Bi(n,13)^Bi(n,22))+oH(n,s,i)|0;l=u,u=c,c=a,a=o+f|0,o=i,i=s,s=n,n=f+p|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){Sa.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const am=QR(()=>new uH);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const m0=BigInt(0),y0=BigInt(1),lH=BigInt(2);function Ju(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function cm(t){if(!Ju(t))throw new Error("Uint8Array expected")}function fd(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const hH=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function pd(t){cm(t);let e="";for(let r=0;r<t.length;r++)e+=hH[t[r]];return e}function sh(t){const e=t.toString(16);return e.length&1?"0"+e:e}function WA(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?m0:BigInt("0x"+t)}const No={_0:48,_9:57,A:65,F:70,a:97,f:102};function _I(t){if(t>=No._0&&t<=No._9)return t-No._0;if(t>=No.A&&t<=No.F)return t-(No.A-10);if(t>=No.a&&t<=No.f)return t-(No.a-10)}function gd(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=_I(t.charCodeAt(i)),a=_I(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function Uu(t){return WA(pd(t))}function Np(t){return cm(t),WA(pd(Uint8Array.from(t).reverse()))}function md(t,e){return gd(t.toString(16).padStart(e*2,"0"))}function w0(t,e){return md(t,e).reverse()}function dH(t){return gd(sh(t))}function fs(t,e,r){let n;if(typeof e=="string")try{n=gd(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Ju(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function xp(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];cm(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}function fH(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function pH(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const qb=t=>typeof t=="bigint"&&m0<=t;function b0(t,e,r){return qb(t)&&qb(e)&&qb(r)&&e<=t&&t<r}function sa(t,e,r,n){if(!b0(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function lP(t){let e;for(e=0;t>m0;t>>=y0,e+=1);return e}function gH(t,e){return t>>BigInt(e)&y0}function mH(t,e,r){return t|(r?y0:m0)<<BigInt(e)}const VA=t=>(lH<<BigInt(t-1))-y0,Wb=t=>new Uint8Array(t),AI=t=>Uint8Array.from(t);function hP(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Wb(t),s=Wb(t),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...l)=>r(s,n,...l),c=(l=Wb())=>{s=a(AI([0]),l),n=a(),l.length!==0&&(s=a(AI([1]),l),n=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const h=[];for(;l<e;){n=a();const d=n.slice();h.push(d),l+=n.length}return xp(...h)};return(l,h)=>{o(),c(l);let d;for(;!(d=h(u()));)c();return o(),d}}const yH={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Ju(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Qd(t,e,r={}){const n=(s,i,o)=>{const a=yH[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}const wH=()=>{throw new Error("not implemented")};function kE(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}var bH=Object.freeze({__proto__:null,isBytes:Ju,abytes:cm,abool:fd,bytesToHex:pd,numberToHexUnpadded:sh,hexToNumber:WA,hexToBytes:gd,bytesToNumberBE:Uu,bytesToNumberLE:Np,numberToBytesBE:md,numberToBytesLE:w0,numberToVarBytesBE:dH,ensureBytes:fs,concatBytes:xp,equalBytes:fH,utf8ToBytes:pH,inRange:b0,aInRange:sa,bitLen:lP,bitGet:gH,bitSet:mH,bitMask:VA,createHmacDrbg:hP,validateObject:Qd,notImplemented:wH,memoized:kE});const kr=BigInt(0),or=BigInt(1),Vc=BigInt(2),vH=BigInt(3),DE=BigInt(4),CI=BigInt(5),SI=BigInt(8);function Hn(t,e){const r=t%e;return r>=kr?r:e+r}function dP(t,e,r){if(e<kr)throw new Error("invalid exponent, negatives unsupported");if(r<=kr)throw new Error("invalid modulus");if(r===or)return kr;let n=or;for(;e>kr;)e&or&&(n=n*t%r),t=t*t%r,e>>=or;return n}function ai(t,e,r){let n=t;for(;e-- >kr;)n*=n,n%=r;return n}function UE(t,e){if(t===kr)throw new Error("invert: expected non-zero number");if(e<=kr)throw new Error("invert: expected positive modulus, got "+e);let r=Hn(t,e),n=e,s=kr,i=or;for(;r!==kr;){const o=n/r,a=n%r,c=s-i*o;n=r,r=a,s=i,i=c}if(n!==or)throw new Error("invert: does not exist");return Hn(s,e)}function EH(t){const e=(t-or)/Vc;let r,n,s;for(r=t-or,n=0;r%Vc===kr;r/=Vc,n++);for(s=Vc;s<t&&dP(s,e,t)!==t-or;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+or)/DE;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(r+or)/Vc;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,u=o.pow(o.mul(o.ONE,s),r),l=o.pow(a,i),h=o.pow(a,r);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let d=1;for(let p=o.sqr(h);d<c&&!o.eql(p,o.ONE);d++)p=o.sqr(p);const f=o.pow(u,or<<BigInt(c-d-1));u=o.sqr(f),l=o.mul(l,f),h=o.mul(h,u),c=d}return l}}function _H(t){if(t%DE===vH){const e=(t+or)/DE;return function(r,n){const s=r.pow(n,e);if(!r.eql(r.sqr(s),n))throw new Error("Cannot find square root");return s}}if(t%SI===CI){const e=(t-CI)/SI;return function(r,n){const s=r.mul(n,Vc),i=r.pow(s,e),o=r.mul(n,i),a=r.mul(r.mul(o,Vc),i),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return EH(t)}const AH=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function CH(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=AH.reduce((n,s)=>(n[s]="function",n),e);return Qd(t,r)}function SH(t,e,r){if(r<kr)throw new Error("invalid exponent, negatives unsupported");if(r===kr)return t.ONE;if(r===or)return e;let n=t.ONE,s=e;for(;r>kr;)r&or&&(n=t.mul(n,s)),s=t.sqr(s),r>>=or;return n}function IH(t,e){const r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function fP(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function pP(t,e,r=!1,n={}){if(t<=kr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=fP(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:s,BYTES:i,MASK:VA(s),ZERO:kr,ONE:or,create:c=>Hn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return kr<=c&&c<t},is0:c=>c===kr,isOdd:c=>(c&or)===or,neg:c=>Hn(-c,t),eql:(c,u)=>c===u,sqr:c=>Hn(c*c,t),add:(c,u)=>Hn(c+u,t),sub:(c,u)=>Hn(c-u,t),mul:(c,u)=>Hn(c*u,t),pow:(c,u)=>SH(a,c,u),div:(c,u)=>Hn(c*UE(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>UE(c,t),sqrt:n.sqrt||(c=>(o||(o=_H(t)),o(a,c))),invertBatch:c=>IH(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>r?w0(c,i):md(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return r?Np(c):Uu(c)}});return Object.freeze(a)}function gP(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function mP(t){const e=gP(t);return e+Math.ceil(e/2)}function TH(t,e,r=!1){const n=t.length,s=gP(e),i=mP(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=r?Np(t):Uu(t),a=Hn(o,e-or)+or;return r?w0(a,s):md(a,s)}const II=BigInt(0),qm=BigInt(1);function Vb(t,e){const r=e.negate();return t?r:e}function yP(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Gb(t,e){yP(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function NH(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function xH(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Kb=new WeakMap,wP=new WeakMap;function Jb(t){return wP.get(t)||1}function OH(t,e){return{constTimeNegate:Vb,hasPrecomputes(r){return Jb(r)!==1},unsafeLadder(r,n,s=t.ZERO){let i=r;for(;n>II;)n&qm&&(s=s.add(i)),i=i.double(),n>>=qm;return s},precomputeWindow(r,n){const{windows:s,windowSize:i}=Gb(n,e),o=[];let a=r,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,s){const{windows:i,windowSize:o}=Gb(r,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**r-1),l=2**r,h=BigInt(r);for(let d=0;d<i;d++){const f=d*o;let p=Number(s&u);s>>=h,p>o&&(p-=l,s+=qm);const g=f,m=f+Math.abs(p)-1,w=d%2!==0,v=p<0;p===0?c=c.add(Vb(w,n[g])):a=a.add(Vb(v,n[m]))}return{p:a,f:c}},wNAFUnsafe(r,n,s,i=t.ZERO){const{windows:o,windowSize:a}=Gb(r,e),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let h=0;h<o;h++){const d=h*a;if(s===II)break;let f=Number(s&c);if(s>>=l,f>a&&(f-=u,s+=qm),f===0)continue;let p=n[d+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(r,n,s){let i=Kb.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&Kb.set(n,s(i))),i},wNAFCached(r,n,s){const i=Jb(r);return this.wNAF(i,this.getPrecomputes(i,r,s),n)},wNAFCachedUnsafe(r,n,s,i){const o=Jb(r);return o===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,r,s),n,i)},setWindowSize(r,n){yP(n,e),wP.set(r,n),Kb.delete(r)}}}function RH(t,e,r,n){if(NH(r,t),xH(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=lP(BigInt(r.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),u=Math.floor((e.BITS-1)/o)*o;let l=s;for(let h=u;h>=0;h-=o){c.fill(s);for(let f=0;f<n.length;f++){const p=n[f],g=Number(p>>BigInt(h)&BigInt(a));c[g]=c[g].add(r[f])}let d=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),d=d.add(p);if(l=l.add(d),h!==0)for(let f=0;f<o;f++)l=l.double()}return l}function bP(t){return CH(t.Fp),Qd(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...fP(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Ol=BigInt(0),Yb=BigInt(1);function PH(t){return Qd(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function kH(t){const e=PH(t),{P:r}=e,n=v=>Hn(v,r),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(v=>v),c=e.powPminus2||(v=>dP(v,r-BigInt(2),r));function u(v,E,A){const S=n(v*(E-A));return E=n(E-S),A=n(A+S),[E,A]}const l=(e.a-BigInt(2))/BigInt(4);function h(v,E){sa("u",v,Ol,r),sa("scalar",E,Ol,r);const A=E,S=v;let C=Yb,T=Ol,O=v,P=Yb,B=Ol,L;for(let se=BigInt(s-1);se>=Ol;se--){const V=A>>se&Yb;B^=V,L=u(B,C,O),C=L[0],O=L[1],L=u(B,T,P),T=L[0],P=L[1],B=V;const I=C+T,x=n(I*I),M=C-T,G=n(M*M),q=x-G,Y=O+P,U=O-P,j=n(U*I),F=n(Y*M),W=j+F,te=j-F;O=n(W*W),P=n(S*n(te*te)),C=n(x*G),T=n(q*(x+n(l*q)))}L=u(B,C,O),C=L[0],O=L[1],L=u(B,T,P),T=L[0],P=L[1];const Q=c(T);return n(C*Q)}function d(v){return w0(n(v),i)}function f(v){const E=fs("u coordinate",v,i);return o===32&&(E[31]&=127),Np(E)}function p(v){const E=fs("scalar",v),A=E.length;if(A!==i&&A!==o){let S=""+i+" or "+o;throw new Error("invalid scalar, expected "+S+" bytes, got "+A)}return Np(a(E))}function g(v,E){const A=f(E),S=p(v),C=h(A,S);if(C===Ol)throw new Error("invalid private or public key received");return d(C)}const m=d(e.Gu);function w(v){return g(v,m)}return{scalarMult:g,scalarMultBase:w,getSharedSecret:(v,E)=>g(v,E),getPublicKey:v=>w(v),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:m}}const BE=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const DH=BigInt(1),TI=BigInt(2),UH=BigInt(3),BH=BigInt(5);BigInt(8);function $H(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=BE,o=t*t%i*t%i,a=ai(o,TI,i)*o%i,c=ai(a,DH,i)*t%i,u=ai(c,BH,i)*c%i,l=ai(u,e,i)*u%i,h=ai(l,r,i)*l%i,d=ai(h,n,i)*h%i,f=ai(d,s,i)*d%i,p=ai(f,s,i)*d%i,g=ai(p,e,i)*u%i;return{pow_p_5_8:ai(g,TI,i)*t%i,b2:o}}function LH(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const $E=kH({P:BE,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=BE,{pow_p_5_8:r,b2:n}=$H(t);return Hn(ai(r,UH,e)*n,e)},adjustScalarBytes:LH,randomBytes:Yd});function NI(t){t.lowS!==void 0&&fd("lowS",t.lowS),t.prehash!==void 0&&fd("prehash",t.prehash)}function MH(t){const e=bP(t);Qd(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:FH,hexToBytes:jH}=bH;class zH extends Error{constructor(e=""){super(e)}}const $o={Err:zH,_tlv:{encode:(t,e)=>{const{Err:r}=$o;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,s=sh(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?sh(s.length/2|128):"";return sh(t)+i+s+e},decode(t,e){const{Err:r}=$o;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const u=e.subarray(n,n+c);if(u.length!==c)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=$o;if(t<Zo)throw new e("integer: negative integers are not allowed");let r=sh(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=$o;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return FH(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=$o,s=typeof t=="string"?jH(t):t;cm(s);const{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:u,l}=n.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(t){const{_tlv:e,_int:r}=$o,n=e.encode(2,r.encode(t.r)),s=e.encode(2,r.encode(t.s)),i=n+s;return e.encode(48,i)}},Zo=BigInt(0),Tr=BigInt(1);BigInt(2);const xI=BigInt(3);BigInt(4);function HH(t){const e=MH(t),{Fp:r}=e,n=pP(e.n,e.nBitLength),s=e.toBytes||((g,m,w)=>{const v=m.toAffine();return xp(Uint8Array.from([4]),r.toBytes(v.x),r.toBytes(v.y))}),i=e.fromBytes||(g=>{const m=g.subarray(1),w=r.fromBytes(m.subarray(0,r.BYTES)),v=r.fromBytes(m.subarray(r.BYTES,2*r.BYTES));return{x:w,y:v}});function o(g){const{a:m,b:w}=e,v=r.sqr(g),E=r.mul(v,g);return r.add(r.add(E,r.mul(g,m)),w)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return b0(g,Tr,e.n)}function c(g){const{allowedPrivateKeyLengths:m,nByteLength:w,wrapPrivateKey:v,n:E}=e;if(m&&typeof g!="bigint"){if(Ju(g)&&(g=pd(g)),typeof g!="string"||!m.includes(g.length))throw new Error("invalid private key");g=g.padStart(w*2,"0")}let A;try{A=typeof g=="bigint"?g:Uu(fs("private key",g,w))}catch{throw new Error("invalid private key, expected hex or "+w+" bytes, got "+typeof g)}return v&&(A=Hn(A,E)),sa("private key",A,Tr,E),A}function u(g){if(!(g instanceof d))throw new Error("ProjectivePoint expected")}const l=kE((g,m)=>{const{px:w,py:v,pz:E}=g;if(r.eql(E,r.ONE))return{x:w,y:v};const A=g.is0();m==null&&(m=A?r.ONE:r.inv(E));const S=r.mul(w,m),C=r.mul(v,m),T=r.mul(E,m);if(A)return{x:r.ZERO,y:r.ZERO};if(!r.eql(T,r.ONE))throw new Error("invZ was invalid");return{x:S,y:C}}),h=kE(g=>{if(g.is0()){if(e.allowInfinityPoint&&!r.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:m,y:w}=g.toAffine();if(!r.isValid(m)||!r.isValid(w))throw new Error("bad point: x or y not FE");const v=r.sqr(w),E=o(m);if(!r.eql(v,E))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(m,w,v){if(this.px=m,this.py=w,this.pz=v,m==null||!r.isValid(m))throw new Error("x required");if(w==null||!r.isValid(w))throw new Error("y required");if(v==null||!r.isValid(v))throw new Error("z required");Object.freeze(this)}static fromAffine(m){const{x:w,y:v}=m||{};if(!m||!r.isValid(w)||!r.isValid(v))throw new Error("invalid affine point");if(m instanceof d)throw new Error("projective point not allowed");const E=A=>r.eql(A,r.ZERO);return E(w)&&E(v)?d.ZERO:new d(w,v,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const w=r.invertBatch(m.map(v=>v.pz));return m.map((v,E)=>v.toAffine(w[E])).map(d.fromAffine)}static fromHex(m){const w=d.fromAffine(i(fs("pointHex",m)));return w.assertValidity(),w}static fromPrivateKey(m){return d.BASE.multiply(c(m))}static msm(m,w){return RH(d,n,m,w)}_setWindowSize(m){p.setWindowSize(this,m)}assertValidity(){h(this)}hasEvenY(){const{y:m}=this.toAffine();if(r.isOdd)return!r.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){u(m);const{px:w,py:v,pz:E}=this,{px:A,py:S,pz:C}=m,T=r.eql(r.mul(w,C),r.mul(A,E)),O=r.eql(r.mul(v,C),r.mul(S,E));return T&&O}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){const{a:m,b:w}=e,v=r.mul(w,xI),{px:E,py:A,pz:S}=this;let C=r.ZERO,T=r.ZERO,O=r.ZERO,P=r.mul(E,E),B=r.mul(A,A),L=r.mul(S,S),Q=r.mul(E,A);return Q=r.add(Q,Q),O=r.mul(E,S),O=r.add(O,O),C=r.mul(m,O),T=r.mul(v,L),T=r.add(C,T),C=r.sub(B,T),T=r.add(B,T),T=r.mul(C,T),C=r.mul(Q,C),O=r.mul(v,O),L=r.mul(m,L),Q=r.sub(P,L),Q=r.mul(m,Q),Q=r.add(Q,O),O=r.add(P,P),P=r.add(O,P),P=r.add(P,L),P=r.mul(P,Q),T=r.add(T,P),L=r.mul(A,S),L=r.add(L,L),P=r.mul(L,Q),C=r.sub(C,P),O=r.mul(L,B),O=r.add(O,O),O=r.add(O,O),new d(C,T,O)}add(m){u(m);const{px:w,py:v,pz:E}=this,{px:A,py:S,pz:C}=m;let T=r.ZERO,O=r.ZERO,P=r.ZERO;const B=e.a,L=r.mul(e.b,xI);let Q=r.mul(w,A),se=r.mul(v,S),V=r.mul(E,C),I=r.add(w,v),x=r.add(A,S);I=r.mul(I,x),x=r.add(Q,se),I=r.sub(I,x),x=r.add(w,E);let M=r.add(A,C);return x=r.mul(x,M),M=r.add(Q,V),x=r.sub(x,M),M=r.add(v,E),T=r.add(S,C),M=r.mul(M,T),T=r.add(se,V),M=r.sub(M,T),P=r.mul(B,x),T=r.mul(L,V),P=r.add(T,P),T=r.sub(se,P),P=r.add(se,P),O=r.mul(T,P),se=r.add(Q,Q),se=r.add(se,Q),V=r.mul(B,V),x=r.mul(L,x),se=r.add(se,V),V=r.sub(Q,V),V=r.mul(B,V),x=r.add(x,V),Q=r.mul(se,x),O=r.add(O,Q),Q=r.mul(M,x),T=r.mul(I,T),T=r.sub(T,Q),Q=r.mul(I,se),P=r.mul(M,P),P=r.add(P,Q),new d(T,O,P)}subtract(m){return this.add(m.negate())}is0(){return this.equals(d.ZERO)}wNAF(m){return p.wNAFCached(this,m,d.normalizeZ)}multiplyUnsafe(m){const{endo:w,n:v}=e;sa("scalar",m,Zo,v);const E=d.ZERO;if(m===Zo)return E;if(this.is0()||m===Tr)return this;if(!w||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,m,d.normalizeZ);let{k1neg:A,k1:S,k2neg:C,k2:T}=w.splitScalar(m),O=E,P=E,B=this;for(;S>Zo||T>Zo;)S&Tr&&(O=O.add(B)),T&Tr&&(P=P.add(B)),B=B.double(),S>>=Tr,T>>=Tr;return A&&(O=O.negate()),C&&(P=P.negate()),P=new d(r.mul(P.px,w.beta),P.py,P.pz),O.add(P)}multiply(m){const{endo:w,n:v}=e;sa("scalar",m,Tr,v);let E,A;if(w){const{k1neg:S,k1:C,k2neg:T,k2:O}=w.splitScalar(m);let{p:P,f:B}=this.wNAF(C),{p:L,f:Q}=this.wNAF(O);P=p.constTimeNegate(S,P),L=p.constTimeNegate(T,L),L=new d(r.mul(L.px,w.beta),L.py,L.pz),E=P.add(L),A=B.add(Q)}else{const{p:S,f:C}=this.wNAF(m);E=S,A=C}return d.normalizeZ([E,A])[0]}multiplyAndAddUnsafe(m,w,v){const E=d.BASE,A=(C,T)=>T===Zo||T===Tr||!C.equals(E)?C.multiplyUnsafe(T):C.multiply(T),S=A(this,w).add(A(m,v));return S.is0()?void 0:S}toAffine(m){return l(this,m)}isTorsionFree(){const{h:m,isTorsionFree:w}=e;if(m===Tr)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:w}=e;return m===Tr?this:w?w(d,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return fd("isCompressed",m),this.assertValidity(),s(d,this,m)}toHex(m=!0){return fd("isCompressed",m),pd(this.toRawBytes(m))}}d.BASE=new d(e.Gx,e.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);const f=e.nBitLength,p=OH(d,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function qH(t){const e=bP(t);return Qd(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function WH(t){const e=qH(t),{Fp:r,n}=e,s=r.BYTES+1,i=2*r.BYTES+1;function o(V){return Hn(V,n)}function a(V){return UE(V,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:h}=HH({...e,toBytes(V,I,x){const M=I.toAffine(),G=r.toBytes(M.x),q=xp;return fd("isCompressed",x),x?q(Uint8Array.from([I.hasEvenY()?2:3]),G):q(Uint8Array.from([4]),G,r.toBytes(M.y))},fromBytes(V){const I=V.length,x=V[0],M=V.subarray(1);if(I===s&&(x===2||x===3)){const G=Uu(M);if(!b0(G,Tr,r.ORDER))throw new Error("Point is not on curve");const q=l(G);let Y;try{Y=r.sqrt(q)}catch(j){const F=j instanceof Error?": "+j.message:"";throw new Error("Point is not on curve"+F)}const U=(Y&Tr)===Tr;return(x&1)===1!==U&&(Y=r.neg(Y)),{x:G,y:Y}}else if(I===i&&x===4){const G=r.fromBytes(M.subarray(0,r.BYTES)),q=r.fromBytes(M.subarray(r.BYTES,2*r.BYTES));return{x:G,y:q}}else{const G=s,q=i;throw new Error("invalid Point, expected length of "+G+", or uncompressed "+q+", got "+I)}}}),d=V=>pd(md(V,e.nByteLength));function f(V){const I=n>>Tr;return V>I}function p(V){return f(V)?o(-V):V}const g=(V,I,x)=>Uu(V.slice(I,x));class m{constructor(I,x,M){this.r=I,this.s=x,this.recovery=M,this.assertValidity()}static fromCompact(I){const x=e.nByteLength;return I=fs("compactSignature",I,x*2),new m(g(I,0,x),g(I,x,2*x))}static fromDER(I){const{r:x,s:M}=$o.toSig(fs("DER",I));return new m(x,M)}assertValidity(){sa("r",this.r,Tr,n),sa("s",this.s,Tr,n)}addRecoveryBit(I){return new m(this.r,this.s,I)}recoverPublicKey(I){const{r:x,s:M,recovery:G}=this,q=C(fs("msgHash",I));if(G==null||![0,1,2,3].includes(G))throw new Error("recovery id invalid");const Y=G===2||G===3?x+e.n:x;if(Y>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const U=(G&1)===0?"02":"03",j=c.fromHex(U+d(Y)),F=a(Y),W=o(-q*F),te=o(M*F),ae=c.BASE.multiplyAndAddUnsafe(j,W,te);if(!ae)throw new Error("point at infinify");return ae.assertValidity(),ae}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return gd(this.toDERHex())}toDERHex(){return $o.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return gd(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const w={isValidPrivateKey(V){try{return u(V),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const V=mP(e.n);return TH(e.randomBytes(V),e.n)},precompute(V=8,I=c.BASE){return I._setWindowSize(V),I.multiply(BigInt(3)),I}};function v(V,I=!0){return c.fromPrivateKey(V).toRawBytes(I)}function E(V){const I=Ju(V),x=typeof V=="string",M=(I||x)&&V.length;return I?M===s||M===i:x?M===2*s||M===2*i:V instanceof c}function A(V,I,x=!0){if(E(V))throw new Error("first arg must be private key");if(!E(I))throw new Error("second arg must be public key");return c.fromHex(I).multiply(u(V)).toRawBytes(x)}const S=e.bits2int||function(V){if(V.length>8192)throw new Error("input is too large");const I=Uu(V),x=V.length*8-e.nBitLength;return x>0?I>>BigInt(x):I},C=e.bits2int_modN||function(V){return o(S(V))},T=VA(e.nBitLength);function O(V){return sa("num < 2^"+e.nBitLength,V,Zo,T),md(V,e.nByteLength)}function P(V,I,x=B){if(["recovered","canonical"].some(ge=>ge in x))throw new Error("sign() legacy options not supported");const{hash:M,randomBytes:G}=e;let{lowS:q,prehash:Y,extraEntropy:U}=x;q==null&&(q=!0),V=fs("msgHash",V),NI(x),Y&&(V=fs("prehashed msgHash",M(V)));const j=C(V),F=u(I),W=[O(F),O(j)];if(U!=null&&U!==!1){const ge=U===!0?G(r.BYTES):U;W.push(fs("extraEntropy",ge))}const te=xp(...W),ae=j;function fe(ge){const Ie=S(ge);if(!h(Ie))return;const Je=a(Ie),ze=c.BASE.multiply(Ie).toAffine(),Le=o(ze.x);if(Le===Zo)return;const Ke=o(Je*o(ae+Le*F));if(Ke===Zo)return;let Pe=(ze.x===Le?0:2)|Number(ze.y&Tr),hr=Ke;return q&&f(Ke)&&(hr=p(Ke),Pe^=1),new m(Le,hr,Pe)}return{seed:te,k2sig:fe}}const B={lowS:e.lowS,prehash:!1},L={lowS:e.lowS,prehash:!1};function Q(V,I,x=B){const{seed:M,k2sig:G}=P(V,I,x),q=e;return hP(q.hash.outputLen,q.nByteLength,q.hmac)(M,G)}c.BASE._setWindowSize(8);function se(V,I,x,M=L){var Ke;const G=V;I=fs("msgHash",I),x=fs("publicKey",x);const{lowS:q,prehash:Y,format:U}=M;if(NI(M),"strict"in M)throw new Error("options.strict was renamed to lowS");if(U!==void 0&&U!=="compact"&&U!=="der")throw new Error("format must be compact or der");const j=typeof G=="string"||Ju(G),F=!j&&!U&&typeof G=="object"&&G!==null&&typeof G.r=="bigint"&&typeof G.s=="bigint";if(!j&&!F)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let W,te;try{if(F&&(W=new m(G.r,G.s)),j){try{U!=="compact"&&(W=m.fromDER(G))}catch(Pe){if(!(Pe instanceof $o.Err))throw Pe}!W&&U!=="der"&&(W=m.fromCompact(G))}te=c.fromHex(x)}catch{return!1}if(!W||q&&W.hasHighS())return!1;Y&&(I=e.hash(I));const{r:ae,s:fe}=W,ge=C(I),Ie=a(fe),Je=o(ge*Ie),ze=o(ae*Ie),Le=(Ke=c.BASE.multiplyAndAddUnsafe(te,Je,ze))==null?void 0:Ke.toAffine();return Le?o(Le.x)===ae:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:A,sign:Q,verify:se,ProjectivePoint:c,Signature:m,utils:w}}function VH(t){return{hash:t,hmac:(e,...r)=>g0(t,e,Yz(...r)),randomBytes:Yd}}function GH(t,e){const r=n=>WH({...t,...VH(n)});return{...r(e),create:r}}const vP=pP(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),KH=vP.create(BigInt("-3")),JH=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),YH=GH({a:KH,b:JH,Fp:vP,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},am),EP="base10",xn="base16",vi="base64pad",Ba="base64url",um="utf8",_P=0,ia=1,lm=2,QH=0,OI=1,ip=12,GA=32;function ZH(){const t=$E.utils.randomPrivateKey(),e=$E.getPublicKey(t);return{privateKey:Kn(t,xn),publicKey:Kn(e,xn)}}function LE(){const t=Yd(GA);return Kn(t,xn)}function XH(t,e){const r=$E.getSharedSecret(Js(t,xn),Js(e,xn)),n=nH(am,r,void 0,void 0,GA);return Kn(n,xn)}function Iy(t){const e=am(Js(t,xn));return Kn(e,xn)}function Xi(t){const e=am(Js(t,um));return Kn(e,xn)}function AP(t){return Js(`${t}`,EP)}function Yu(t){return Number(Kn(t,EP))}function CP(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function SP(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4;return e+"=".repeat(r)}function eq(t){const e=AP(typeof t.type<"u"?t.type:_P);if(Yu(e)===ia&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Js(t.senderPublicKey,xn):void 0,n=typeof t.iv<"u"?Js(t.iv,xn):Yd(ip),s=Js(t.symKey,xn),i=cP(s,n).encrypt(Js(t.message,um)),o=IP({type:e,sealed:i,iv:n,senderPublicKey:r});return t.encoding===Ba?CP(o):o}function tq(t){const e=Js(t.symKey,xn),{sealed:r,iv:n}=Op({encoded:t.encoded,encoding:t.encoding}),s=cP(e,n).decrypt(r);if(s===null)throw new Error("Failed to decrypt");return Kn(s,um)}function rq(t,e){const r=AP(lm),n=Yd(ip),s=Js(t,um),i=IP({type:r,sealed:s,iv:n});return e===Ba?CP(i):i}function nq(t,e){const{sealed:r}=Op({encoded:t,encoding:e});return Kn(r,um)}function IP(t){if(Yu(t.type)===lm)return Kn(sp([t.type,t.sealed]),vi);if(Yu(t.type)===ia){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Kn(sp([t.type,t.senderPublicKey,t.iv,t.sealed]),vi)}return Kn(sp([t.type,t.iv,t.sealed]),vi)}function Op(t){const e=(t.encoding||vi)===Ba?SP(t.encoded):t.encoded,r=Js(e,vi),n=r.slice(QH,OI),s=OI;if(Yu(n)===ia){const c=s+GA,u=c+ip,l=r.slice(s,c),h=r.slice(c,u),d=r.slice(u);return{type:n,sealed:d,iv:h,senderPublicKey:l}}if(Yu(n)===lm){const c=r.slice(s),u=Yd(ip);return{type:n,sealed:c,iv:u}}const i=s+ip,o=r.slice(s,i),a=r.slice(i);return{type:n,sealed:a,iv:o}}function sq(t,e){const r=Op({encoded:t,encoding:e==null?void 0:e.encoding});return TP({type:Yu(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Kn(r.senderPublicKey,xn):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function TP(t){const e=(t==null?void 0:t.type)||_P;if(e===ia){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function RI(t){return t.type===ia&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function PI(t){return t.type===lm}function iq(t){const e=_r.from(t.x,"base64"),r=_r.from(t.y,"base64");return sp([new Uint8Array([4]),e,r])}function oq(t,e){const[r,n,s]=t.split("."),i=_r.from(SP(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${r}.${n}`,u=am(c),l=iq(e);if(!YH.verify(sp([o,a]),u,l))throw new Error("Invalid signature");return AE(t).payload}const aq="irn";function ow(t){return(t==null?void 0:t.relay)||{protocol:aq}}function Ff(t){const e=dz[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function cq(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(n)){const i=s.replace(n,""),o=t[s];r[i]=o}}),r}function kI(t){if(!t.includes("wc:")){const u=JR(t);u!=null&&u.includes("wc:")&&(t=u)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),s=t.substring(e+1,r).split("@"),i=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(i),a={};o.forEach((u,l)=>{a[l]=u});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:uq(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:cq(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function uq(t){return t.startsWith("//")?t.substring(2):t}function lq(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(s=>{const i=s,o=r+e+i;t[i]&&(n[o]=t[i])}),n}function DI(t){const e=new URLSearchParams,r=lq(t.relay);Object.keys(r).sort().forEach(s=>{e.set(s,r[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const n=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${n}`}function Wm(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}function Zd(t){const e=[];return t.forEach(r=>{const[n,s]=r.split(":");e.push(`${n}:${s}`)}),e}function hq(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Zd(r.accounts))}),e}function dq(t,e){const r=[];return Object.values(t).forEach(n=>{Zd(n.accounts).includes(e)&&r.push(...n.methods)}),r}function fq(t,e){const r=[];return Object.values(t).forEach(n=>{Zd(n.accounts).includes(e)&&r.push(...n.events)}),r}function KA(t){return t.includes(":")}function jf(t){return KA(t)?t.split(":")[0]:t}function pq(t){const e={};return t==null||t.forEach(r=>{var n;const[s,i]=r.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(r),(n=e[s].chains)==null||n.push(`${s}:${i}`)}),e}function UI(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=pq(e);for(const[n,s]of Object.entries(r))s.methods?s.methods=Cy(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return r}const gq={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},mq={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function de(t,e){const{message:r,code:n}=mq[t];return{message:e?`${r} ${e}`:r,code:n}}function _t(t,e){const{message:r,code:n}=gq[t];return{message:e?`${r} ${e}`:r,code:n}}function lc(t,e){return!!Array.isArray(t)}function Rp(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Wr(t){return typeof t>"u"}function pr(t,e){return e&&Wr(t)?!0:typeof t=="string"&&!!t.trim().length}function JA(t,e){return e&&Wr(t)?!0:typeof t=="number"&&!isNaN(t)}function yq(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),s=Object.keys(r);let i=!0;return tu(s,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],l=Zd(a),h=r[o];(!tu(qR(o,h),l)||!tu(h.methods,c)||!tu(h.events,u))&&(i=!1)}),i):!1}function aw(t){return pr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function wq(t){if(pr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&aw(r)}}return!1}function bq(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(pr(t,!1)){if(e(t))return!0;const r=JR(t);return e(r)}}catch{}return!1}function vq(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function Eq(t){return t==null?void 0:t.topic}function _q(t,e){let r=null;return pr(t==null?void 0:t.publicKey,!1)||(r=de("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function BI(t){let e=!0;return lc(t)?t.length&&(e=t.every(r=>pr(r,!1))):e=!1,e}function Aq(t,e,r){let n=null;return lc(e)&&e.length?e.forEach(s=>{n||aw(s)||(n=_t("UNSUPPORTED_CHAINS",`${r}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):aw(t)||(n=_t("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function Cq(t,e,r){let n=null;return Object.entries(t).forEach(([s,i])=>{if(n)return;const o=Aq(s,qR(s,i),`${e} ${r}`);o&&(n=o)}),n}function Sq(t,e){let r=null;return lc(t)?t.forEach(n=>{r||wq(n)||(r=_t("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=_t("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Iq(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=Sq(n==null?void 0:n.accounts,`${e} namespace`);s&&(r=s)}),r}function Tq(t,e){let r=null;return BI(t==null?void 0:t.methods)?BI(t==null?void 0:t.events)||(r=_t("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=_t("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function NP(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=Tq(n,`${e}, namespace`);s&&(r=s)}),r}function Nq(t,e,r){let n=null;if(t&&Rp(t)){const s=NP(t,e);s&&(n=s);const i=Cq(t,e,r);i&&(n=i)}else n=de("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function Qb(t,e){let r=null;if(t&&Rp(t)){const n=NP(t,e);n&&(r=n);const s=Iq(t,e);s&&(r=s)}else r=de("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function xP(t){return pr(t.protocol,!0)}function xq(t,e){let r=!1;return t?t&&lc(t)&&t.length&&t.forEach(n=>{r=xP(n)}):r=!0,r}function Oq(t){return typeof t=="number"}function Fn(t){return typeof t<"u"&&typeof t!==null}function Rq(t){return!(!t||typeof t!="object"||!t.code||!JA(t.code,!1)||!t.message||!pr(t.message,!1))}function Pq(t){return!(Wr(t)||!pr(t.method,!1))}function kq(t){return!(Wr(t)||Wr(t.result)&&Wr(t.error)||!JA(t.id,!1)||!pr(t.jsonrpc,!1))}function Dq(t){return!(Wr(t)||!pr(t.name,!1))}function $I(t,e){return!(!aw(e)||!hq(t).includes(e))}function Uq(t,e,r){return pr(r,!1)?dq(t,e).includes(r):!1}function Bq(t,e,r){return pr(r,!1)?fq(t,e).includes(r):!1}function LI(t,e,r){let n=null;const s=$q(t),i=Lq(e),o=Object.keys(s),a=Object.keys(i),c=MI(Object.keys(t)),u=MI(Object.keys(e)),l=c.filter(h=>!u.includes(h));return l.length&&(n=de("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(e).toString()}`)),tu(o,a)||(n=de("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(h=>{if(!h.includes(":")||n)return;const d=Zd(e[h].accounts);d.includes(h)||(n=de("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${h}
        Required: ${h}
        Approved: ${d.toString()}`))}),o.forEach(h=>{n||(tu(s[h].methods,i[h].methods)?tu(s[h].events,i[h].events)||(n=de("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${h}`)):n=de("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${h}`))}),n}function $q(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(s=>{e[s]={methods:t[r].methods,events:t[r].events}})}),e}function MI(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Lq(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=Zd(t[r].accounts);n==null||n.forEach(s=>{e[s]={accounts:t[r].accounts.filter(i=>i.includes(`${s}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function Mq(t,e){return JA(t,!1)&&t<=e.max&&t>=e.min}function FI(){const t=im();return new Promise(e=>{switch(t){case ws.browser:e(Fq());break;case ws.reactNative:e(jq());break;case ws.node:e(zq());break;default:e(!0)}})}function Fq(){return sm()&&(navigator==null?void 0:navigator.onLine)}async function jq(){if(Nc()&&typeof Te<"u"&&Te!=null&&Te.NetInfo){const t=await(Te==null?void 0:Te.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function zq(){return!0}function Hq(t){switch(im()){case ws.browser:qq(t);break;case ws.reactNative:Wq(t);break}}function qq(t){!Nc()&&sm()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function Wq(t){Nc()&&typeof Te<"u"&&Te!=null&&Te.NetInfo&&(Te==null||Te.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const Zb={};class Cf{static get(e){return Zb[e]}static set(e,r){Zb[e]=r}static delete(e){delete Zb[e]}}const Vq="PARSE_ERROR",Gq="INVALID_REQUEST",Kq="METHOD_NOT_FOUND",Jq="INVALID_PARAMS",OP="INTERNAL_ERROR",YA="SERVER_ERROR",Yq=[-32700,-32600,-32601,-32602,-32603],op={[Vq]:{code:-32700,message:"Parse error"},[Gq]:{code:-32600,message:"Invalid Request"},[Kq]:{code:-32601,message:"Method not found"},[Jq]:{code:-32602,message:"Invalid params"},[OP]:{code:-32603,message:"Internal error"},[YA]:{code:-32e3,message:"Server error"}},RP=YA;function Qq(t){return Yq.includes(t)}function jI(t){return Object.keys(op).includes(t)?op[t]:op[RP]}function Zq(t){const e=Object.values(op).find(r=>r.code===t);return e||op[RP]}function PP(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var Xb={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ME=function(t,e){return ME=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},ME(t,e)};function Xq(t,e){ME(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var FE=function(){return FE=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},FE.apply(this,arguments)};function eW(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function tW(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,r,i):o(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function rW(t,e){return function(r,n){e(r,n,t)}}function nW(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function sW(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(h){o(h)}}function c(l){try{u(n.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function iW(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function oW(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function aW(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function jE(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function kP(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function cW(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(kP(arguments[e]));return t}function uW(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function Pp(t){return this instanceof Pp?(this.v=t,this):new Pp(t)}function lW(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(d){n[d]&&(s[d]=function(f){return new Promise(function(p,g){i.push([d,f,p,g])>1||a(d,f)})})}function a(d,f){try{c(n[d](f))}catch(p){h(i[0][3],p)}}function c(d){d.value instanceof Pp?Promise.resolve(d.value.v).then(u,l):h(i[0][2],d)}function u(d){a("next",d)}function l(d){a("throw",d)}function h(d,f){d(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function hW(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(o){return(r=!r)?{value:Pp(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function dW(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof jE=="function"?jE(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function fW(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function pW(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function gW(t){return t&&t.__esModule?t:{default:t}}function mW(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function yW(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const wW=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return FE},__asyncDelegator:hW,__asyncGenerator:lW,__asyncValues:dW,__await:Pp,__awaiter:sW,__classPrivateFieldGet:mW,__classPrivateFieldSet:yW,__createBinding:oW,__decorate:tW,__exportStar:aW,__extends:Xq,__generator:iW,__importDefault:gW,__importStar:pW,__makeTemplateObject:fW,__metadata:nW,__param:rW,__read:kP,__rest:eW,__spread:cW,__spreadArrays:uW,__values:jE},Symbol.toStringTag,{value:"Module"})),bW=a2(wW);var xo={},zI;function vW(){if(zI)return xo;zI=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.isBrowserCryptoAvailable=xo.getSubtleCrypto=xo.getBrowerCrypto=void 0;function t(){return(Wn===null||Wn===void 0?void 0:Wn.crypto)||(Wn===null||Wn===void 0?void 0:Wn.msCrypto)||{}}xo.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}xo.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return xo.isBrowserCryptoAvailable=r,xo}var Oo={},HI;function EW(){if(HI)return Oo;HI=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.isBrowser=Oo.isNode=Oo.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Oo.isReactNative=t;function e(){return typeof Er<"u"&&typeof Er.versions<"u"&&typeof Er.versions.node<"u"}Oo.isNode=e;function r(){return!t()&&!e()}return Oo.isBrowser=r,Oo}var qI;function _W(){return qI||(qI=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=bW;e.__exportStar(vW(),t),e.__exportStar(EW(),t)}(Xb)),Xb}var AW=_W();function zi(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function ru(t=6){return BigInt(zi(t))}function oc(t,e,r){return{id:r||zi(),jsonrpc:"2.0",method:t,params:e}}function v0(t,e){return{id:t,jsonrpc:"2.0",result:e}}function E0(t,e,r){return{id:t,jsonrpc:"2.0",error:CW(e)}}function CW(t,e){return typeof t>"u"?jI(OP):(typeof t=="string"&&(t=Object.assign(Object.assign({},jI(YA)),{message:t})),Qq(t.code)&&(t=Zq(t.code)),t)}let SW=class{},IW=class extends SW{constructor(){super()}},TW=class extends IW{constructor(e){super()}};const NW="^https?:",xW="^wss?:";function OW(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function DP(t,e){const r=OW(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function WI(t){return DP(t,NW)}function VI(t){return DP(t,xW)}function RW(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function UP(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function QA(t){return UP(t)&&"method"in t}function _0(t){return UP(t)&&(Hi(t)||Gs(t))}function Hi(t){return"result"in t}function Gs(t){return"error"in t}let ei=class extends TW{constructor(e){super(e),this.events=new Xs.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(oc(e.method,e.params||[],e.id||ru().toString()),r)}async requestStrict(e,r){return new Promise(async(n,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Gs(i)?s(i.error):n(i.result)});try{await this.connection.send(e,r)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),_0(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const PW=()=>typeof WebSocket<"u"?WebSocket:typeof Te<"u"&&typeof Te.WebSocket<"u"?Te.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),kW=()=>typeof WebSocket<"u"||typeof Te<"u"&&typeof Te.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",GI=t=>t.split("?")[0],KI=10,DW=PW();let UW=class{constructor(e){if(this.url=e,this.events=new Xs.EventEmitter,this.registering=!1,!VI(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ha(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!VI(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const s=AW.isReactNative()?void 0:{rejectUnauthorized:!RW(e)},i=new DW(e,[],s);kW()?i.onerror=o=>{const a=o;n(this.emitError(a.error))}:i.on("error",o=>{n(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),r(i)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Vu(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),s=n.message||n.toString(),i=E0(e,s);this.events.emit("payload",i)}parseError(e,r=this.url){return PP(e,GI(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>KI&&this.events.setMaxListeners(KI)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${GI(this.url)}`));return this.events.emit("register_error",r),r}};var BW={};const BP="wc",$P=2,zE="core",fo=`${BP}@2:${zE}:`,$W={logger:"error"},LW={database:":memory:"},MW="crypto",JI="client_ed25519_seed",FW=he.ONE_DAY,jW="keychain",zW="0.3",HW="messages",qW="0.3",YI=he.SIX_HOURS,WW="publisher",LP="irn",VW="error",MP="wss://relay.walletconnect.org",GW="relayer",xr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},KW="_subscription",Ps={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},JW=.1,HE="2.19.2",Mt={link_mode:"link_mode",relay:"relay"},Ty={inbound:"inbound",outbound:"outbound"},YW="0.3",QW="WALLETCONNECT_CLIENT_ID",QI="WALLETCONNECT_LINK_MODE_APPS",as={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},ZW="subscription",XW="0.3",eV="pairing",tV="0.3",Sf={wc_pairingDelete:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:he.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:he.ONE_DAY,prompt:!1,tag:0},res:{ttl:he.ONE_DAY,prompt:!1,tag:0}}},Gc={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},si={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},rV="history",nV="0.3",sV="expirer",Ms={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},iV="0.3",oV="verify-api",aV="https://verify.walletconnect.com",FP="https://verify.walletconnect.org",ap=FP,cV=`${ap}/v3`,uV=[aV,FP],lV="echo",hV="https://echo.walletconnect.com",ji={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Po={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ii={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Uc={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Bc={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},If={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},dV=.1,fV="event-client",pV=86400,gV="https://pulse.walletconnect.org/batch";function mV(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,w=0,v=p.length;w!==v&&p[w]===0;)w++,g++;for(var E=(v-w)*l+1>>>0,A=new Uint8Array(E);w!==v;){for(var S=p[w],C=0,T=E-1;(S!==0||C<m)&&T!==-1;T--,C++)S+=256*A[T]>>>0,A[T]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");m=C,w++}for(var O=E-m;O!==E&&A[O]===0;)O++;for(var P=c.repeat(g);O<E;++O)P+=t.charAt(A[O]);return P}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,w=0;p[g]===c;)m++,g++;for(var v=(p.length-g)*u+1>>>0,E=new Uint8Array(v);p[g];){var A=r[p.charCodeAt(g)];if(A===255)return;for(var S=0,C=v-1;(A!==0||S<w)&&C!==-1;C--,S++)A+=a*E[C]>>>0,E[C]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");w=S,g++}if(p[g]!==" "){for(var T=v-w;T!==v&&E[T]===0;)T++;for(var O=new Uint8Array(m+(v-T)),P=m;T!==v;)O[P++]=E[T++];return O}}}function f(p){var g=d(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var yV=mV,wV=yV;const jP=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},bV=t=>new TextEncoder().encode(t),vV=t=>new TextDecoder().decode(t);class EV{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class _V{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return zP(this,e)}}class AV{constructor(e){this.decoders=e}or(e){return zP(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const zP=(t,e)=>new AV({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class CV{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new EV(e,r,n),this.decoder=new _V(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const A0=({name:t,prefix:e,encode:r,decode:n})=>new CV(t,e,r,n),hm=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=wV(r,e);return A0({prefix:t,name:e,encode:n,decode:i=>jP(s(i))})},SV=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const h=s[t[l]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},IV=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Xr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>A0({prefix:e,name:t,encode(s){return IV(s,n,r)},decode(s){return SV(s,n,r,t)}}),TV=A0({prefix:"\0",name:"identity",encode:t=>vV(t),decode:t=>bV(t)});var NV=Object.freeze({__proto__:null,identity:TV});const xV=Xr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var OV=Object.freeze({__proto__:null,base2:xV});const RV=Xr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var PV=Object.freeze({__proto__:null,base8:RV});const kV=hm({prefix:"9",name:"base10",alphabet:"0123456789"});var DV=Object.freeze({__proto__:null,base10:kV});const UV=Xr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),BV=Xr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var $V=Object.freeze({__proto__:null,base16:UV,base16upper:BV});const LV=Xr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),MV=Xr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),FV=Xr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),jV=Xr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),zV=Xr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),HV=Xr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),qV=Xr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),WV=Xr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),VV=Xr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var GV=Object.freeze({__proto__:null,base32:LV,base32upper:MV,base32pad:FV,base32padupper:jV,base32hex:zV,base32hexupper:HV,base32hexpad:qV,base32hexpadupper:WV,base32z:VV});const KV=hm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),JV=hm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var YV=Object.freeze({__proto__:null,base36:KV,base36upper:JV});const QV=hm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ZV=hm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var XV=Object.freeze({__proto__:null,base58btc:QV,base58flickr:ZV});const eG=Xr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),tG=Xr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),rG=Xr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),nG=Xr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var sG=Object.freeze({__proto__:null,base64:eG,base64pad:tG,base64url:rG,base64urlpad:nG});const HP=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),iG=HP.reduce((t,e,r)=>(t[r]=e,t),[]),oG=HP.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function aG(t){return t.reduce((e,r)=>(e+=iG[r],e),"")}function cG(t){const e=[];for(const r of t){const n=oG[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const uG=A0({prefix:"🚀",name:"base256emoji",encode:aG,decode:cG});var lG=Object.freeze({__proto__:null,base256emoji:uG}),hG=qP,ZI=128,dG=-128,fG=Math.pow(2,31);function qP(t,e,r){e=e||[],r=r||0;for(var n=r;t>=fG;)e[r++]=t&255|ZI,t/=128;for(;t&dG;)e[r++]=t&255|ZI,t>>>=7;return e[r]=t|0,qP.bytes=r-n+1,e}var pG=qE,gG=128,XI=127;function qE(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw qE.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&XI)<<s:(o&XI)*Math.pow(2,s),s+=7}while(o>=gG);return qE.bytes=i-n,r}var mG=Math.pow(2,7),yG=Math.pow(2,14),wG=Math.pow(2,21),bG=Math.pow(2,28),vG=Math.pow(2,35),EG=Math.pow(2,42),_G=Math.pow(2,49),AG=Math.pow(2,56),CG=Math.pow(2,63),SG=function(t){return t<mG?1:t<yG?2:t<wG?3:t<bG?4:t<vG?5:t<EG?6:t<_G?7:t<AG?8:t<CG?9:10},IG={encode:hG,decode:pG,encodingLength:SG},WP=IG;const eT=(t,e,r=0)=>(WP.encode(t,e,r),e),tT=t=>WP.encodingLength(t),WE=(t,e)=>{const r=e.byteLength,n=tT(t),s=n+tT(r),i=new Uint8Array(s+r);return eT(t,i,0),eT(r,i,n),i.set(e,s),new TG(t,r,e,i)};class TG{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}}const VP=({name:t,code:e,encode:r})=>new NG(t,e,r);class NG{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?WE(this.code,r):r.then(n=>WE(this.code,n))}else throw Error("Unknown type, must be binary type")}}const GP=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),xG=VP({name:"sha2-256",code:18,encode:GP("SHA-256")}),OG=VP({name:"sha2-512",code:19,encode:GP("SHA-512")});var RG=Object.freeze({__proto__:null,sha256:xG,sha512:OG});const KP=0,PG="identity",JP=jP,kG=t=>WE(KP,JP(t)),DG={code:KP,name:PG,encode:JP,digest:kG};var UG=Object.freeze({__proto__:null,identity:DG});new TextEncoder,new TextDecoder;const rT={...NV,...OV,...PV,...DV,...$V,...GV,...YV,...XV,...sG,...lG};({...RG,...UG});function BG(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function YP(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const nT=YP("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ev=YP("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=BG(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),$G={utf8:nT,"utf-8":nT,hex:rT.base16,latin1:ev,ascii:ev,binary:ev,...rT};function LG(t,e="utf8"){const r=$G[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var MG=Object.defineProperty,FG=(t,e,r)=>e in t?MG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$i=(t,e,r)=>FG(t,typeof e!="symbol"?e+"":e,r);class jG{constructor(e,r){this.core=e,this.logger=r,$i(this,"keychain",new Map),$i(this,"name",jW),$i(this,"version",zW),$i(this,"initialized",!1),$i(this,"storagePrefix",fo),$i(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),$i(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),$i(this,"set",async(n,s)=>{this.isInitialized(),this.keychain.set(n,s),await this.persist()}),$i(this,"get",n=>{this.isInitialized();const s=this.keychain.get(n);if(typeof s>"u"){const{message:i}=de("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(i)}return s}),$i(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=pn(r,this.name)}get context(){return es(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,TE(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?NE(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}var zG=Object.defineProperty,HG=(t,e,r)=>e in t?zG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$r=(t,e,r)=>HG(t,typeof e!="symbol"?e+"":e,r);class qG{constructor(e,r,n){this.core=e,this.logger=r,$r(this,"name",MW),$r(this,"keychain"),$r(this,"randomSessionIdentifier",LE()),$r(this,"initialized",!1),$r(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),$r(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),$r(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=US(s);return AR(i.publicKey)}),$r(this,"generateKeyPair",()=>{this.isInitialized();const s=ZH();return this.setPrivateKey(s.publicKey,s.privateKey)}),$r(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=US(i),a=this.randomSessionIdentifier;return await uj(a,s,FW,o)}),$r(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=XH(a,i);return this.setSymKey(c,o)}),$r(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||Iy(s);return await this.keychain.set(o,s),o}),$r(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),$r(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),$r(this,"encode",async(s,i,o)=>{this.isInitialized();const a=TP(o),c=ha(i);if(PI(a))return rq(c,o==null?void 0:o.encoding);if(RI(a)){const d=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(d,f)}const u=this.getSymKey(s),{type:l,senderPublicKey:h}=a;return eq({type:l,symKey:u,message:c,senderPublicKey:h,encoding:o==null?void 0:o.encoding})}),$r(this,"decode",async(s,i,o)=>{this.isInitialized();const a=sq(i,o);if(PI(a)){const c=nq(i,o==null?void 0:o.encoding);return Vu(c)}if(RI(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;s=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(s),u=tq({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return Vu(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),$r(this,"getPayloadType",(s,i=vi)=>{const o=Op({encoded:s,encoding:i});return Yu(o.type)}),$r(this,"getPayloadSenderPublicKey",(s,i=vi)=>{const o=Op({encoded:s,encoding:i});return o.senderPublicKey?Kn(o.senderPublicKey,xn):void 0}),this.core=e,this.logger=pn(r,this.name),this.keychain=n||new jG(this.core,this.logger)}get context(){return es(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(JI)}catch{e=LE(),await this.keychain.set(JI,e)}return LG(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}var WG=Object.defineProperty,VG=Object.defineProperties,GG=Object.getOwnPropertyDescriptors,sT=Object.getOwnPropertySymbols,KG=Object.prototype.hasOwnProperty,JG=Object.prototype.propertyIsEnumerable,VE=(t,e,r)=>e in t?WG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,YG=(t,e)=>{for(var r in e||(e={}))KG.call(e,r)&&VE(t,r,e[r]);if(sT)for(var r of sT(e))JG.call(e,r)&&VE(t,r,e[r]);return t},QG=(t,e)=>VG(t,GG(e)),ss=(t,e,r)=>VE(t,typeof e!="symbol"?e+"":e,r);class ZG extends a4{constructor(e,r){super(e,r),this.logger=e,this.core=r,ss(this,"messages",new Map),ss(this,"messagesWithoutClientAck",new Map),ss(this,"name",HW),ss(this,"version",qW),ss(this,"initialized",!1),ss(this,"storagePrefix",fo),ss(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),ss(this,"set",async(n,s,i)=>{this.isInitialized();const o=Xi(s);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(n,a),i===Ty.inbound){const c=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,QG(YG({},c),{[o]:s}))}return await this.persist(),o}),ss(this,"get",n=>{this.isInitialized();let s=this.messages.get(n);return typeof s>"u"&&(s={}),s}),ss(this,"getWithoutAck",n=>{this.isInitialized();const s={};for(const i of n){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),ss(this,"has",(n,s)=>{this.isInitialized();const i=this.get(n),o=Xi(s);return typeof i[o]<"u"}),ss(this,"ack",async(n,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(n);if(typeof i>"u")return;const o=Xi(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,i),await this.persist()}),ss(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=pn(e,this.name),this.core=r}get context(){return es(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,TE(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,TE(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?NE(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?NE(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}var XG=Object.defineProperty,eK=Object.defineProperties,tK=Object.getOwnPropertyDescriptors,iT=Object.getOwnPropertySymbols,rK=Object.prototype.hasOwnProperty,nK=Object.prototype.propertyIsEnumerable,GE=(t,e,r)=>e in t?XG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vm=(t,e)=>{for(var r in e||(e={}))rK.call(e,r)&&GE(t,r,e[r]);if(iT)for(var r of iT(e))nK.call(e,r)&&GE(t,r,e[r]);return t},tv=(t,e)=>eK(t,tK(e)),oi=(t,e,r)=>GE(t,typeof e!="symbol"?e+"":e,r);class sK extends c4{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,oi(this,"events",new Xs.EventEmitter),oi(this,"name",WW),oi(this,"queue",new Map),oi(this,"publishTimeout",he.toMiliseconds(he.ONE_MINUTE)),oi(this,"initialPublishTimeout",he.toMiliseconds(he.ONE_SECOND*15)),oi(this,"needsTransportRestart",!1),oi(this,"publish",async(n,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||YI,c=ow(i),u=(i==null?void 0:i.prompt)||!1,l=(i==null?void 0:i.tag)||0,h=(i==null?void 0:i.id)||ru().toString(),d={topic:n,message:s,opts:{ttl:a,relay:c,prompt:u,tag:l,id:h,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${h} tag:${l}`;try{const p=new Promise(async g=>{const m=({id:v})=>{d.opts.id===v&&(this.removeRequestFromQueue(v),this.relayer.events.removeListener(xr.publish,m),g(d))};this.relayer.events.on(xr.publish,m);const w=ic(new Promise((v,E)=>{this.rpcPublish({topic:n,message:s,ttl:a,prompt:u,tag:l,id:h,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(v).catch(A=>{this.logger.warn(A,A==null?void 0:A.message),E(A)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${h} tag:${l}`);try{await w,this.events.removeListener(xr.publish,m)}catch(v){this.queue.set(h,tv(Vm({},d),{attempt:1})),this.logger.warn(v,v==null?void 0:v.message)}});this.logger.trace({type:"method",method:"publish",params:{id:h,topic:n,message:s,opts:i}}),await ic(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(h)}}),oi(this,"on",(n,s)=>{this.events.on(n,s)}),oi(this,"once",(n,s)=>{this.events.once(n,s)}),oi(this,"off",(n,s)=>{this.events.off(n,s)}),oi(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.relayer=e,this.logger=pn(r,this.name),this.registerEventListeners()}get context(){return es(this.logger)}async rpcPublish(e){var r,n,s,i;const{topic:o,message:a,ttl:c=YI,prompt:u,tag:l,id:h,attestation:d,tvf:f}=e,p={method:Ff(ow().protocol).publish,params:Vm({topic:o,message:a,ttl:c,prompt:u,tag:l,attestation:d},f),id:h};Wr((r=p.params)==null?void 0:r.prompt)&&((n=p.params)==null||delete n.prompt),Wr((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(xr.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const n=e.attempt+1;this.queue.set(r,tv(Vm({},e),{attempt:n}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${n}`),await this.rpcPublish(tv(Vm({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Wd.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(xr.connection_stalled);return}this.checkQueue()}),this.relayer.on(xr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var iK=Object.defineProperty,oK=(t,e,r)=>e in t?iK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Rl=(t,e,r)=>oK(t,typeof e!="symbol"?e+"":e,r);class aK{constructor(){Rl(this,"map",new Map),Rl(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),Rl(this,"get",e=>this.map.get(e)||[]),Rl(this,"exists",(e,r)=>this.get(e).includes(r)),Rl(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const s=n.filter(i=>i!==r);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Rl(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var cK=Object.defineProperty,uK=Object.defineProperties,lK=Object.getOwnPropertyDescriptors,oT=Object.getOwnPropertySymbols,hK=Object.prototype.hasOwnProperty,dK=Object.prototype.propertyIsEnumerable,KE=(t,e,r)=>e in t?cK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Tf=(t,e)=>{for(var r in e||(e={}))hK.call(e,r)&&KE(t,r,e[r]);if(oT)for(var r of oT(e))dK.call(e,r)&&KE(t,r,e[r]);return t},rv=(t,e)=>uK(t,lK(e)),St=(t,e,r)=>KE(t,typeof e!="symbol"?e+"":e,r);class fK extends h4{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,St(this,"subscriptions",new Map),St(this,"topicMap",new aK),St(this,"events",new Xs.EventEmitter),St(this,"name",ZW),St(this,"version",XW),St(this,"pending",new Map),St(this,"cached",[]),St(this,"initialized",!1),St(this,"storagePrefix",fo),St(this,"subscribeTimeout",he.toMiliseconds(he.ONE_MINUTE)),St(this,"initialSubscribeTimeout",he.toMiliseconds(he.ONE_SECOND*15)),St(this,"clientId"),St(this,"batchSubscribeTopicsLimit",500),St(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),St(this,"subscribe",async(n,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}});try{const i=ow(s),o={topic:n,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(n,o);const a=await this.rpcSubscribe(n,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),St(this,"unsubscribe",async(n,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(n,s.id,s):await this.unsubscribeByTopic(n,s)}),St(this,"isSubscribed",n=>new Promise(s=>{s(this.topicMap.topics.includes(n))})),St(this,"isKnownTopic",n=>new Promise(s=>{s(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(i=>i.topic===n))})),St(this,"on",(n,s)=>{this.events.on(n,s)}),St(this,"once",(n,s)=>{this.events.once(n,s)}),St(this,"off",(n,s)=>{this.events.off(n,s)}),St(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),St(this,"start",async()=>{await this.onConnect()}),St(this,"stop",async()=>{await this.onDisconnect()}),St(this,"restart",async()=>{await this.restore(),await this.onRestart()}),St(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(s=>{n.push(s)}),await this.batchSubscribe(n)}),St(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Wd.pulse,async()=>{await this.checkPending()}),this.events.on(as.created,async n=>{const s=as.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()}),this.events.on(as.deleted,async n=>{const s=as.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()})}),this.relayer=e,this.logger=pn(r,this.name),this.clientId=""}get context(){return es(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async s=>await this.unsubscribeById(e,s,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const s=ow(n);await this.restartToComplete({topic:e,id:r,relay:s}),await this.rpcUnsubscribe(e,r,s);const i=_t("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,r,n){var s;(!n||(n==null?void 0:n.transportType)===Mt.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const i={method:Ff(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((n==null?void 0:n.transportType)===Mt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(l=>this.logger.warn(l))},he.toMiliseconds(he.ONE_SECOND)),a;const c=new Promise(async l=>{const h=d=>{d.topic===e&&(this.events.removeListener(as.created,h),l(d.id))};this.events.on(as.created,h);try{const d=await ic(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(as.created,h),l(d)}catch{}}),u=await ic(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return u?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(xr.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:Ff(r.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await ic(new Promise(s=>{this.relayer.request(n).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(xr.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:Ff(r.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let s;try{s=await await ic(new Promise((i,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(xr.connection_stalled)}return s}rpcUnsubscribe(e,r,n){const s={method:Ff(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,r){this.setSubscription(e,rv(Tf({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Tf({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,Tf({},r)),this.topicMap.set(r.topic,e),this.events.emit(as.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(as.deleted,rv(Tf({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(as.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(as.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>rv(Tf({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await Mz(he.toMiliseconds(he.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Xi(e+await this.getClientId())}}var pK=Object.defineProperty,aT=Object.getOwnPropertySymbols,gK=Object.prototype.hasOwnProperty,mK=Object.prototype.propertyIsEnumerable,JE=(t,e,r)=>e in t?pK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,cT=(t,e)=>{for(var r in e||(e={}))gK.call(e,r)&&JE(t,r,e[r]);if(aT)for(var r of aT(e))mK.call(e,r)&&JE(t,r,e[r]);return t},at=(t,e,r)=>JE(t,typeof e!="symbol"?e+"":e,r);class yK extends u4{constructor(e){super(e),at(this,"protocol","wc"),at(this,"version",2),at(this,"core"),at(this,"logger"),at(this,"events",new Xs.EventEmitter),at(this,"provider"),at(this,"messages"),at(this,"subscriber"),at(this,"publisher"),at(this,"name",GW),at(this,"transportExplicitlyClosed",!1),at(this,"initialized",!1),at(this,"connectionAttemptInProgress",!1),at(this,"relayUrl"),at(this,"projectId"),at(this,"packageName"),at(this,"bundleId"),at(this,"hasExperiencedNetworkDisruption",!1),at(this,"pingTimeout"),at(this,"heartBeatTimeout",he.toMiliseconds(he.THIRTY_SECONDS+he.FIVE_SECONDS)),at(this,"reconnectTimeout"),at(this,"connectPromise"),at(this,"reconnectInProgress",!1),at(this,"requestsInFlight",[]),at(this,"connectTimeout",he.toMiliseconds(he.ONE_SECOND*15)),at(this,"request",async r=>{var n,s;this.logger.debug("Publishing Request Payload");const i=r.id||ru().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${i}:${((s=r.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),at(this,"resetPingTimeout",()=>{sw()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),at(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),at(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(xr.connect)}),at(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),at(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(xr.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),at(this,"registerProviderListeners",()=>{this.provider.on(Ps.payload,this.onPayloadHandler),this.provider.on(Ps.connect,this.onConnectHandler),this.provider.on(Ps.disconnect,this.onDisconnectHandler),this.provider.on(Ps.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?pn(e.logger,this.name):em(Vd({level:e.logger||VW})),this.messages=new ZG(this.logger,e.core),this.subscriber=new fK(this,this.logger),this.publisher=new sK(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||MP,this.projectId=e.projectId,Az()?this.packageName=tI():Cz()&&(this.bundleId=tI()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return es(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:Mt.relay},Ty.outbound)}async subscribe(e,r){var n,s,i;this.isInitialized(),(!(r!=null&&r.transportType)||(r==null?void 0:r.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((n=r==null?void 0:r.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const u=l=>{l.topic===e&&(this.subscriber.off(as.created,u),c())};return await Promise.all([new Promise(l=>{c=l,this.subscriber.on(as.created,u)}),new Promise(async(l,h)=>{a=await this.subscriber.subscribe(e,cT({internal:{throwOnFailedPublish:o}},r)).catch(d=>{o&&h(d)})||a,l()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await ic(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await FI())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,s)=>n.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const s=br(he.FIVE_MINUTES),i={topic:n,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,i)}this.events.emit(xr.message,e),await this.recordMessageEvent(e,Ty.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ps.disconnect,i),await ic(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Ps.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ps.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Ps.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const s=n;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,he.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,s,i;if(sw())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((i=(s=(n=this.provider)==null?void 0:n.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new ei(new UW(xz({sdkVersion:HE,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:n,message:s}=e;await this.messages.set(n,s,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const s=this.messages.has(r,n);return s&&this.logger.warn(`Ignoring duplicate message: ${n}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),QA(e)){if(!e.method.endsWith(KW))return;const r=e.params,{topic:n,message:s,publishedAt:i,attestation:o}=r.data,a={topic:n,message:s,publishedAt:i,transportType:Mt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(cT({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else _0(e)&&this.events.emit(xr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Ty.inbound),this.events.emit(xr.message,e))}async acknowledgePayload(e){const r=v0(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Ps.payload,this.onPayloadHandler),this.provider.off(Ps.connect,this.onConnectHandler),this.provider.off(Ps.disconnect,this.onDisconnectHandler),this.provider.off(Ps.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await FI();Hq(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n==null?void 0:n.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(xr.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},he.toMiliseconds(JW)))))}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}}function wK(){}function uT(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function lT(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function hT(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const bK="[object RegExp]",vK="[object String]",EK="[object Number]",_K="[object Boolean]",dT="[object Arguments]",AK="[object Symbol]",CK="[object Date]",SK="[object Map]",IK="[object Set]",TK="[object Array]",NK="[object Function]",xK="[object ArrayBuffer]",nv="[object Object]",OK="[object Error]",RK="[object DataView]",PK="[object Uint8Array]",kK="[object Uint8ClampedArray]",DK="[object Uint16Array]",UK="[object Uint32Array]",BK="[object BigUint64Array]",$K="[object Int8Array]",LK="[object Int16Array]",MK="[object Int32Array]",FK="[object BigInt64Array]",jK="[object Float32Array]",zK="[object Float64Array]";function HK(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function qK(t,e,r){return zf(t,e,void 0,void 0,void 0,void 0,r)}function zf(t,e,r,n,s,i,o){const a=o(t,e,r,n,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return cp(t,e,i,o)}return cp(t,e,i,o)}function cp(t,e,r,n){if(Object.is(t,e))return!0;let s=hT(t),i=hT(e);if(s===dT&&(s=nv),i===dT&&(i=nv),s!==i)return!1;switch(s){case vK:return t.toString()===e.toString();case EK:{const c=t.valueOf(),u=e.valueOf();return HK(c,u)}case _K:case CK:case AK:return Object.is(t.valueOf(),e.valueOf());case bK:return t.source===e.source&&t.flags===e.flags;case NK:return t===e}r=r??new Map;const o=r.get(t),a=r.get(e);if(o!=null&&a!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(s){case SK:{if(t.size!==e.size)return!1;for(const[c,u]of t.entries())if(!e.has(c)||!zf(u,e.get(c),c,t,e,r,n))return!1;return!0}case IK:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),u=Array.from(e.values());for(let l=0;l<c.length;l++){const h=c[l],d=u.findIndex(f=>zf(h,f,void 0,t,e,r,n));if(d===-1)return!1;u.splice(d,1)}return!0}case TK:case PK:case kK:case DK:case UK:case BK:case $K:case LK:case MK:case FK:case jK:case zK:{if(typeof _r<"u"&&_r.isBuffer(t)!==_r.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!zf(t[c],e[c],c,t,e,r,n))return!1;return!0}case xK:return t.byteLength!==e.byteLength?!1:cp(new Uint8Array(t),new Uint8Array(e),r,n);case RK:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:cp(new Uint8Array(t),new Uint8Array(e),r,n);case OK:return t.name===e.name&&t.message===e.message;case nv:{if(!(cp(t.constructor,e.constructor,r,n)||uT(t)&&uT(e)))return!1;const c=[...Object.keys(t),...lT(t)],u=[...Object.keys(e),...lT(e)];if(c.length!==u.length)return!1;for(let l=0;l<c.length;l++){const h=c[l],d=t[h];if(!Object.hasOwn(e,h))return!1;const f=e[h];if(!zf(d,f,h,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function WK(t,e){return qK(t,e,wK)}var VK=Object.defineProperty,fT=Object.getOwnPropertySymbols,GK=Object.prototype.hasOwnProperty,KK=Object.prototype.propertyIsEnumerable,YE=(t,e,r)=>e in t?VK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pT=(t,e)=>{for(var r in e||(e={}))GK.call(e,r)&&YE(t,r,e[r]);if(fT)for(var r of fT(e))KK.call(e,r)&&YE(t,r,e[r]);return t},Bn=(t,e,r)=>YE(t,typeof e!="symbol"?e+"":e,r);class wl extends l4{constructor(e,r,n,s=fo,i=void 0){super(e,r,n,s),this.core=e,this.logger=r,this.name=n,Bn(this,"map",new Map),Bn(this,"version",YW),Bn(this,"cached",[]),Bn(this,"initialized",!1),Bn(this,"getKey"),Bn(this,"storagePrefix",fo),Bn(this,"recentlyDeleted",[]),Bn(this,"recentlyDeletedLimit",200),Bn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Wr(o)?this.map.set(this.getKey(o),o):vq(o)?this.map.set(o.id,o):Eq(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Bn(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Bn(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Bn(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>WK(a[c],o[c]))):this.values)),Bn(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=pT(pT({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Bn(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=pn(r,this.name),this.storagePrefix=s,this.getKey=i}get context(){return es(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:s}=de("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:n}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}var JK=Object.defineProperty,YK=(t,e,r)=>e in t?JK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ze=(t,e,r)=>YK(t,typeof e!="symbol"?e+"":e,r);class QK{constructor(e,r){this.core=e,this.logger=r,Ze(this,"name",eV),Ze(this,"version",tV),Ze(this,"events",new RA),Ze(this,"pairings"),Ze(this,"initialized",!1),Ze(this,"storagePrefix",fo),Ze(this,"ignoredPayloadTypes",[ia]),Ze(this,"registeredMethods",[]),Ze(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Ze(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),Ze(this,"create",async n=>{this.isInitialized();const s=LE(),i=await this.core.crypto.setSymKey(s),o=br(he.FIVE_MINUTES),a={protocol:LP},c={topic:i,expiry:o,relay:a,active:!1,methods:n==null?void 0:n.methods},u=DI({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:n==null?void 0:n.methods});return this.events.emit(Gc.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:n==null?void 0:n.transportType}),{topic:i,uri:u}}),Ze(this,"pair",async n=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:n==null?void 0:n.uri,trace:[ji.pairing_started]}});this.isValidPair(n,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:u}=kI(n.uri);s.props.properties.topic=i,s.addTrace(ji.pairing_uri_validation_success),s.addTrace(ji.pairing_uri_not_expired);let l;if(this.pairings.keys.includes(i)){if(l=this.pairings.get(i),s.addTrace(ji.existing_pairing),l.active)throw s.setError(Po.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(ji.pairing_not_expired)}const h=c||br(he.FIVE_MINUTES),d={topic:i,relay:a,expiry:h,active:!1,methods:u};this.core.expirer.set(i,h),await this.pairings.set(i,d),s.addTrace(ji.store_new_pairing),n.activatePairing&&await this.activate({topic:i}),this.events.emit(Gc.create,d),s.addTrace(ji.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(ji.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Po.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Po.subscribe_pairing_topic_failure),f}return s.addTrace(ji.subscribe_pairing_topic_success),d}),Ze(this,"activate",async({topic:n})=>{this.isInitialized();const s=br(he.FIVE_MINUTES);this.core.expirer.set(n,s),await this.pairings.update(n,{active:!0,expiry:s})}),Ze(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=n;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Mc();this.events.once(ft("pairing_ping",i),({error:u})=>{u?c(u):a()}),await o()}}),Ze(this,"updateExpiry",async({topic:n,expiry:s})=>{this.isInitialized(),await this.pairings.update(n,{expiry:s})}),Ze(this,"updateMetadata",async({topic:n,metadata:s})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:s})}),Ze(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Ze(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:s}=n;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",_t("USER_DISCONNECTED")),await this.deletePairing(s))}),Ze(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(s);return DI({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Ze(this,"sendRequest",async(n,s,i)=>{const o=oc(s,i),a=await this.core.crypto.encode(n,o),c=Sf[s].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),Ze(this,"sendResult",async(n,s,i)=>{const o=v0(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,u=Sf[c].res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),Ze(this,"sendError",async(n,s,i)=>{const o=E0(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,u=Sf[c]?Sf[c].res:Sf.unregistered_method.res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),Ze(this,"deletePairing",async(n,s)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,_t("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),s?Promise.resolve():this.core.expirer.del(n)])}),Ze(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(s=>ka(s.expiry));await Promise.all(n.map(s=>this.deletePairing(s.topic)))}),Ze(this,"onRelayEventRequest",async n=>{const{topic:s,payload:i}=n;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Ze(this,"onRelayEventResponse",async n=>{const{topic:s,payload:i}=n,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Ze(this,"onPairingPingRequest",async(n,s)=>{const{id:i}=s;try{this.isValidPing({topic:n}),await this.sendResult(i,n,!0),this.events.emit(Gc.ping,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),Ze(this,"onPairingPingResponse",(n,s)=>{const{id:i}=s;setTimeout(()=>{Hi(s)?this.events.emit(ft("pairing_ping",i),{}):Gs(s)&&this.events.emit(ft("pairing_ping",i),{error:s.error})},500)}),Ze(this,"onPairingDeleteRequest",async(n,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Gc.delete,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),Ze(this,"onUnknownRpcMethodRequest",async(n,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=_t("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,n,a),this.logger.error(a)}catch(a){await this.sendError(i,n,a),this.logger.error(a)}}),Ze(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(_t("WC_METHOD_UNSUPPORTED",n))}),Ze(this,"isValidPair",(n,s)=>{var i;if(!Fn(n)){const{message:a}=de("MISSING_OR_INVALID",`pair() params: ${n}`);throw s.setError(Po.malformed_pairing_uri),new Error(a)}if(!bq(n.uri)){const{message:a}=de("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw s.setError(Po.malformed_pairing_uri),new Error(a)}const o=kI(n==null?void 0:n.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=de("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Po.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=de("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Po.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&he.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Po.pairing_expired);const{message:a}=de("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Ze(this,"isValidPing",async n=>{if(!Fn(n)){const{message:i}=de("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),Ze(this,"isValidDisconnect",async n=>{if(!Fn(n)){const{message:i}=de("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),Ze(this,"isValidPairingTopic",async n=>{if(!pr(n,!1)){const{message:s}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(s)}if(!this.pairings.keys.includes(n)){const{message:s}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(s)}if(ka(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:s}=de("EXPIRED",`pairing topic: ${n}`);throw new Error(s)}}),this.core=e,this.logger=pn(r,this.name),this.pairings=new wl(this.core,this.logger,this.name,this.storagePrefix)}get context(){return es(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(xr.message,async e=>{const{topic:r,message:n,transportType:s}=e;if(this.pairings.keys.includes(r)&&s!==Mt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const i=await this.core.crypto.decode(r,n);QA(i)?(this.core.history.set(r,i),await this.onRelayEventRequest({topic:r,payload:i})):_0(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id)),await this.core.relayer.messages.ack(r,n)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Ms.expired,async e=>{const{topic:r}=KR(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Gc.expire,{topic:r}))})}}var ZK=Object.defineProperty,XK=(t,e,r)=>e in t?ZK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Lr=(t,e,r)=>XK(t,typeof e!="symbol"?e+"":e,r);class eJ extends o4{constructor(e,r){super(e,r),this.core=e,this.logger=r,Lr(this,"records",new Map),Lr(this,"events",new Xs.EventEmitter),Lr(this,"name",rV),Lr(this,"version",nV),Lr(this,"cached",[]),Lr(this,"initialized",!1),Lr(this,"storagePrefix",fo),Lr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Lr(this,"set",(n,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:n,request:{method:s.method,params:s.params||null},chainId:i,expiry:br(he.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(si.created,o)}),Lr(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const s=await this.getRecord(n.id);typeof s.response>"u"&&(s.response=Gs(n)?{error:n.error}:{result:n.result},this.records.set(s.id,s),this.persist(),this.events.emit(si.updated,s))}),Lr(this,"get",async(n,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:s}),await this.getRecord(s))),Lr(this,"delete",(n,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===n){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(si.deleted,i)}}),this.persist()}),Lr(this,"exists",async(n,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===n:!1)),Lr(this,"on",(n,s)=>{this.events.on(n,s)}),Lr(this,"once",(n,s)=>{this.events.once(n,s)}),Lr(this,"off",(n,s)=>{this.events.off(n,s)}),Lr(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=pn(r,this.name)}get context(){return es(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:oc(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(si.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(si.created,e=>{const r=si.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(si.updated,e=>{const r=si.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(si.deleted,e=>{const r=si.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(Wd.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{he.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(si.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}var tJ=Object.defineProperty,rJ=(t,e,r)=>e in t?tJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,en=(t,e,r)=>rJ(t,typeof e!="symbol"?e+"":e,r);class nJ extends d4{constructor(e,r){super(e,r),this.core=e,this.logger=r,en(this,"expirations",new Map),en(this,"events",new Xs.EventEmitter),en(this,"name",sV),en(this,"version",iV),en(this,"cached",[]),en(this,"initialized",!1),en(this,"storagePrefix",fo),en(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),en(this,"has",n=>{try{const s=this.formatTarget(n);return typeof this.getExpiration(s)<"u"}catch{return!1}}),en(this,"set",(n,s)=>{this.isInitialized();const i=this.formatTarget(n),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Ms.created,{target:i,expiration:o})}),en(this,"get",n=>{this.isInitialized();const s=this.formatTarget(n);return this.getExpiration(s)}),en(this,"del",n=>{if(this.isInitialized(),this.has(n)){const s=this.formatTarget(n),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Ms.deleted,{target:s,expiration:i})}}),en(this,"on",(n,s)=>{this.events.on(n,s)}),en(this,"once",(n,s)=>{this.events.once(n,s)}),en(this,"off",(n,s)=>{this.events.off(n,s)}),en(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=pn(r,this.name)}get context(){return es(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Oz(e);if(typeof e=="number")return Rz(e);const{message:r}=de("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ms.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;he.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Ms.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Wd.pulse,()=>this.checkExpirations()),this.events.on(Ms.created,e=>{const r=Ms.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Ms.expired,e=>{const r=Ms.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Ms.deleted,e=>{const r=Ms.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}var sJ=Object.defineProperty,iJ=(t,e,r)=>e in t?sJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,dr=(t,e,r)=>iJ(t,typeof e!="symbol"?e+"":e,r);class oJ extends f4{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,dr(this,"name",oV),dr(this,"abortController"),dr(this,"isDevEnv"),dr(this,"verifyUrlV3",cV),dr(this,"storagePrefix",fo),dr(this,"version",$P),dr(this,"publicKey"),dr(this,"fetchPromise"),dr(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&he.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),dr(this,"register",async s=>{if(!sm()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const u=Gu.getDocument(),l=this.startAbortTimer(he.ONE_SECOND*5),h=await new Promise((d,f)=>{const p=()=>{window.removeEventListener("message",m),u.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=u.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const m=w=>{if(w.data&&typeof w.data=="string")try{const v=JSON.parse(w.data);if(v.type==="verify_attestation"){if(AE(v.attestation).payload.id!==o)return;clearInterval(l),u.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",m),d(v.attestation===null?"":v.attestation)}}catch(v){this.logger.warn(v)}};u.body.appendChild(g),window.addEventListener("message",m,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",h),h}catch(u){this.logger.warn(u)}return""}),dr(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(AE(i).payload.id!==a)return;const u=await this.isValidJwtAttestation(i);if(u){if(!u.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return u}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),dr(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(he.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),dr(this,"getVerifyUrl",s=>{let i=s||ap;return uV.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${ap}`),i=ap),i}),dr(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(he.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),dr(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),dr(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),dr(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),dr(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),dr(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),dr(this,"validateAttestation",(s,i)=>{const o=oq(s,i.publicKey),a={hasExpired:he.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=pn(r,this.name),this.abortController=new AbortController,this.isDevEnv=jA(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return es(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),he.toMiliseconds(e))}}var aJ=Object.defineProperty,cJ=(t,e,r)=>e in t?aJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gT=(t,e,r)=>cJ(t,typeof e!="symbol"?e+"":e,r);class uJ extends p4{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,gT(this,"context",lV),gT(this,"registerDeviceToken",async n=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=n,c=`${hV}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=pn(r,this.context)}}var lJ=Object.defineProperty,mT=Object.getOwnPropertySymbols,hJ=Object.prototype.hasOwnProperty,dJ=Object.prototype.propertyIsEnumerable,QE=(t,e,r)=>e in t?lJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Nf=(t,e)=>{for(var r in e||(e={}))hJ.call(e,r)&&QE(t,r,e[r]);if(mT)for(var r of mT(e))dJ.call(e,r)&&QE(t,r,e[r]);return t},Ar=(t,e,r)=>QE(t,typeof e!="symbol"?e+"":e,r);class fJ extends g4{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,Ar(this,"context",fV),Ar(this,"storagePrefix",fo),Ar(this,"storageVersion",dV),Ar(this,"events",new Map),Ar(this,"shouldPersist",!1),Ar(this,"init",async()=>{if(!jA())try{const s={eventId:nI(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:VR(this.core.relayer.protocol,this.core.relayer.version,HE)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Ar(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,u=nI(),l=this.core.projectId||"",h=Date.now(),d=Nf({eventId:u,timestamp:h,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:l,domain:this.getAppDomain()},this.setMethods(u));return this.telemetryEnabled&&(this.events.set(u,d),this.shouldPersist=!0),d}),Ar(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Nf(Nf({},a),this.setMethods(a.eventId))}),Ar(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Ar(this,"setEventListeners",()=>{this.core.heartbeat.on(Wd.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{he.fromMiliseconds(Date.now())-he.fromMiliseconds(s.timestamp)>pV&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Ar(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Ar(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Ar(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Ar(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Ar(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Nf(Nf({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Ar(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Ar(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${gV}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${HE}${i}`,{method:"POST",body:JSON.stringify(s)})}),Ar(this,"getAppDomain",()=>WR().url),this.logger=pn(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var pJ=Object.defineProperty,yT=Object.getOwnPropertySymbols,gJ=Object.prototype.hasOwnProperty,mJ=Object.prototype.propertyIsEnumerable,ZE=(t,e,r)=>e in t?pJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wT=(t,e)=>{for(var r in e||(e={}))gJ.call(e,r)&&ZE(t,r,e[r]);if(yT)for(var r of yT(e))mJ.call(e,r)&&ZE(t,r,e[r]);return t},kt=(t,e,r)=>ZE(t,typeof e!="symbol"?e+"":e,r);let yJ=class QP extends r4{constructor(e){var r;super(e),kt(this,"protocol",BP),kt(this,"version",$P),kt(this,"name",zE),kt(this,"relayUrl"),kt(this,"projectId"),kt(this,"customStoragePrefix"),kt(this,"events",new Xs.EventEmitter),kt(this,"logger"),kt(this,"heartbeat"),kt(this,"relayer"),kt(this,"crypto"),kt(this,"storage"),kt(this,"history"),kt(this,"expirer"),kt(this,"pairing"),kt(this,"verify"),kt(this,"echoClient"),kt(this,"linkModeSupportedApps"),kt(this,"eventClient"),kt(this,"initialized",!1),kt(this,"logChunkController"),kt(this,"on",(a,c)=>this.events.on(a,c)),kt(this,"once",(a,c)=>this.events.once(a,c)),kt(this,"off",(a,c)=>this.events.off(a,c)),kt(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),kt(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:u})=>{if(!a||!c)return;const l={topic:a,message:c,publishedAt:Date.now(),transportType:Mt.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:u})});const n=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(n)try{return this.customStoragePrefix=n.customStoragePrefix,this.logger=n.logger,this.heartbeat=n.heartbeat,this.crypto=n.crypto,this.history=n.history,this.expirer=n.expirer,this.storage=n.storage,this.relayer=n.relayer,this.pairing=n.pairing,this.verify=n.verify,this.echoClient=n.echoClient,this.linkModeSupportedApps=n.linkModeSupportedApps,this.eventClient=n.eventClient,this.initialized=n.initialized,this.logChunkController=n.logChunkController,n}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||MP,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Vd({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:$W.logger,name:zE}),{logger:i,chunkLoggerController:o}=kA({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=pn(i,this.name),this.heartbeat=new t8,this.crypto=new qG(this,this.logger,e==null?void 0:e.keychain),this.history=new eJ(this,this.logger),this.expirer=new nJ(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new $8(wT(wT({},LW),e==null?void 0:e.storageOptions)),this.relayer=new yK({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new QK(this,this.logger),this.verify=new oJ(this,this.logger,this.storage),this.echoClient=new uJ(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new fJ(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const r=new QP(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(QW,n),r}get context(){return es(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(QI,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(QI)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${e}`,n=`${r}_count`;return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[n]} times.`),globalThis[r]}catch(r){console.warn("Failed to get global WalletConnect core",r);return}}setGlobalCore(e){var r;try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${((r=e.opts)==null?void 0:r.customStoragePrefix)||""}`;globalThis[n]=e}catch(n){console.warn("Failed to set global WalletConnect core",n)}}isGlobalCoreDisabled(){try{return typeof Er<"u"&&BW.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const wJ=yJ,ZP="wc",XP=2,ek="client",ZA=`${ZP}@${XP}:${ek}:`,sv={name:ek,logger:"error"},bT="WALLETCONNECT_DEEPLINK_CHOICE",bJ="proposal",vT="Proposal expired",vJ="session",Pl=he.SEVEN_DAYS,EJ="engine",Cr={wc_sessionPropose:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1104},res:{ttl:he.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1106},res:{ttl:he.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1112},res:{ttl:he.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1114},res:{ttl:he.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:he.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:he.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1119}}},iv={min:he.FIVE_MINUTES,max:he.SEVEN_DAYS},Li={idle:"IDLE",active:"ACTIVE"},ET={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},_J="request",AJ=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],CJ="wc",SJ="auth",IJ="authKeys",TJ="pairingTopics",NJ="requests",C0=`${CJ}@${1.5}:${SJ}:`,Ny=`${C0}:PUB_KEY`;var xJ=Object.defineProperty,OJ=Object.defineProperties,RJ=Object.getOwnPropertyDescriptors,_T=Object.getOwnPropertySymbols,PJ=Object.prototype.hasOwnProperty,kJ=Object.prototype.propertyIsEnumerable,XE=(t,e,r)=>e in t?xJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,It=(t,e)=>{for(var r in e||(e={}))PJ.call(e,r)&&XE(t,r,e[r]);if(_T)for(var r of _T(e))kJ.call(e,r)&&XE(t,r,e[r]);return t},yn=(t,e)=>OJ(t,RJ(e)),ie=(t,e,r)=>XE(t,typeof e!="symbol"?e+"":e,r);class DJ extends b4{constructor(e){super(e),ie(this,"name",EJ),ie(this,"events",new RA),ie(this,"initialized",!1),ie(this,"requestQueue",{state:Li.idle,queue:[]}),ie(this,"sessionRequestQueue",{state:Li.idle,queue:[]}),ie(this,"requestQueueDelay",he.ONE_SECOND),ie(this,"expectedPairingMethodMap",new Map),ie(this,"recentlyDeletedMap",new Map),ie(this,"recentlyDeletedLimit",200),ie(this,"relayMessageCache",[]),ie(this,"pendingSessions",new Map),ie(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Cr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},he.toMiliseconds(this.requestQueueDelay)))}),ie(this,"connect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=yn(It({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:u}=n;let l=s,h,d=!1;try{if(l){const C=this.client.core.pairing.pairings.get(l);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),d=C.active}}catch(C){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),C}if(!l||!d){const{topic:C,uri:T}=await this.client.core.pairing.create();l=C,h=T}if(!l){const{message:C}=de("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(C)}const f=await this.client.core.crypto.generateKeyPair(),p=Cr.wc_sessionPropose.req.ttl||he.FIVE_MINUTES,g=br(p),m=yn(It(It({requiredNamespaces:i,optionalNamespaces:o,relays:u??[{protocol:LP}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:l},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:zi()}),w=ft("session_connect",m.id),{reject:v,resolve:E,done:A}=Mc(p,vT),S=({id:C})=>{C===m.id&&(this.client.events.off("proposal_expire",S),this.pendingSessions.delete(m.id),this.events.emit(w,{error:{message:vT,code:0}}))};return this.client.events.on("proposal_expire",S),this.events.once(w,({error:C,session:T})=>{this.client.events.off("proposal_expire",S),C?v(C):T&&E(T)}),await this.sendRequest({topic:l,method:"wc_sessionPropose",params:m,throwOnFailedPublish:!0,clientRpcId:m.id}),await this.setProposal(m.id,m),{uri:h,approval:A}}),ie(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),ie(this,"approve",async r=>{var n,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r==null?void 0:r.id)==null?void 0:n.toString(),trace:[ii.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(P){throw o.setError(Uc.no_internet_connection),P}try{await this.isValidProposalId(r==null?void 0:r.id)}catch(P){throw this.client.logger.error(`approve() -> proposal.get(${r==null?void 0:r.id}) failed`),o.setError(Uc.proposal_not_found),P}try{await this.isValidApprove(r)}catch(P){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Uc.session_approve_namespace_validation_failure),P}const{id:a,relayProtocol:c,namespaces:u,sessionProperties:l,scopedProperties:h,sessionConfig:d}=r,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:m,optionalNamespaces:w}=f;let v=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});v||(v=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:ii.session_approve_started,properties:{topic:p,trace:[ii.session_approve_started,ii.session_namespaces_validation_success]}}));const E=await this.client.core.crypto.generateKeyPair(),A=g.publicKey,S=await this.client.core.crypto.generateSharedKey(E,A),C=It(It(It({relay:{protocol:c??"irn"},namespaces:u,controller:{publicKey:E,metadata:this.client.metadata},expiry:br(Pl)},l&&{sessionProperties:l}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),T=Mt.relay;v.addTrace(ii.subscribing_session_topic);try{await this.client.core.relayer.subscribe(S,{transportType:T})}catch(P){throw v.setError(Uc.subscribe_session_topic_failure),P}v.addTrace(ii.subscribe_session_topic_success);const O=yn(It({},C),{topic:S,requiredNamespaces:m,optionalNamespaces:w,pairingTopic:p,acknowledged:!1,self:C.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:E,transportType:Mt.relay});await this.client.session.set(S,O),v.addTrace(ii.store_session);try{v.addTrace(ii.publishing_session_settle),await this.sendRequest({topic:S,method:"wc_sessionSettle",params:C,throwOnFailedPublish:!0}).catch(P=>{throw v==null||v.setError(Uc.session_settle_publish_failure),P}),v.addTrace(ii.session_settle_publish_success),v.addTrace(ii.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:E},throwOnFailedPublish:!0}).catch(P=>{throw v==null||v.setError(Uc.session_approve_publish_failure),P}),v.addTrace(ii.session_approve_publish_success)}catch(P){throw this.client.logger.error(P),this.client.session.delete(S,_t("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(S),P}return this.client.core.eventClient.deleteEvent({eventId:v.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,_t("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(S,br(Pl)),{topic:S,acknowledged:()=>Promise.resolve(this.client.session.get(S))}}),ie(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:s}=r;let i;try{i=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}i&&(await this.sendError({id:n,topic:i,error:s,rpcOpts:Cr.wc_sessionPropose.reject}),await this.client.proposal.delete(n,_t("USER_DISCONNECTED")))}),ie(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(h){throw this.client.logger.error("update() -> isValidUpdate() failed"),h}const{topic:n,namespaces:s}=r,{done:i,resolve:o,reject:a}=Mc(),c=zi(),u=ru().toString(),l=this.client.session.get(n).namespaces;return this.events.once(ft("session_update",c),({error:h})=>{h?a(h):o()}),await this.client.session.update(n,{namespaces:s}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:u}).catch(h=>{this.client.logger.error(h),this.client.session.update(n,{namespaces:l}),a(h)}),{acknowledged:i}}),ie(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=r,s=zi(),{done:i,resolve:o,reject:a}=Mc();return this.events.once(ft("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,br(Pl)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),ie(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(w){throw this.client.logger.error("request() -> isValidRequest() failed"),w}const{chainId:n,request:s,topic:i,expiry:o=Cr.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Mt.relay&&await this.confirmOnlineStateOrThrow();const c=zi(),u=ru().toString(),{done:l,resolve:h,reject:d}=Mc(o,"Request expired. Please try again.");this.events.once(ft("session_request",c),({error:w,result:v})=>{w?d(w):h(v)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:f,params:{request:yn(It({},s),{expiryTimestamp:br(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(w=>d(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),await l();const g={request:yn(It({},s),{expiryTimestamp:br(o)}),chainId:n},m=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async w=>{await this.sendRequest(It({clientRpcId:c,relayRpcId:u,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},m&&{tvf:this.getTVFParams(c,g)})).catch(v=>d(v)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),w()}),new Promise(async w=>{var v;if(!((v=a.sessionConfig)!=null&&v.disableDeepLink)){const E=await Uz(this.client.core.storage,bT);await Pz({id:c,topic:i,wcDeepLink:E})}w()}),l()]).then(w=>w[2])}),ie(this,"respond",async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:s}=r,{id:i}=s,o=this.client.session.get(n);o.transportType===Mt.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Hi(s)?await this.sendResult({id:i,topic:n,result:s.result,throwOnFailedPublish:!0,appLink:a}):Gs(s)&&await this.sendError({id:i,topic:n,error:s.error,appLink:a}),this.cleanupAfterResponse(r)}),ie(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:n}=r;if(this.client.session.keys.includes(n)){const s=zi(),i=ru().toString(),{done:o,resolve:a,reject:c}=Mc();this.events.once(ft("session_ping",s),({error:u})=>{u?c(u):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),ie(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:s,chainId:i}=r,o=ru().toString(),a=zi();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),ie(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:_t("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:s}=de("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(s)}}),ie(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>yq(n,r)))),ie(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),ie(this,"authenticate",async(r,n)=>{var s;this.isInitialized(),this.isValidAuthenticate(r);const i=n&&this.client.core.linkModeSupportedApps.includes(n)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Mt.link_mode:Mt.relay;o===Mt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:u,domain:l,nonce:h,type:d,exp:f,nbf:p,methods:g=[],expiry:m}=r,w=[...r.resources||[]],{topic:v,uri:E}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:v,uri:E}});const A=await this.client.core.crypto.generateKeyPair(),S=Iy(A);if(await Promise.all([this.client.auth.authKeys.set(Ny,{responseTopic:S,publicKey:A}),this.client.auth.pairingTopics.set(S,{topic:S,pairingTopic:v})]),await this.client.core.relayer.subscribe(S,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${v}`),g.length>0){const{namespace:q}=dh(a[0]);let Y=T7(q,"request",g);Sy(w)&&(Y=x7(Y,w.pop())),w.push(Y)}const C=m&&m>Cr.wc_sessionAuthenticate.req.ttl?m:Cr.wc_sessionAuthenticate.req.ttl,T={authPayload:{type:d??"caip122",chains:a,statement:c,aud:u,domain:l,version:"1",nonce:h,iat:new Date().toISOString(),exp:f,nbf:p,resources:w},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:br(C)},O={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},P={requiredNamespaces:{},optionalNamespaces:O,relays:[{protocol:"irn"}],pairingTopic:v,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:br(Cr.wc_sessionPropose.req.ttl),id:zi()},{done:B,resolve:L,reject:Q}=Mc(C,"Request expired"),se=zi(),V=ft("session_connect",P.id),I=ft("session_request",se),x=async({error:q,session:Y})=>{this.events.off(I,M),q?Q(q):Y&&L({session:Y})},M=async q=>{var Y,U,j;if(await this.deletePendingAuthRequest(se,{message:"fulfilled",code:0}),q.error){const Ie=_t("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return q.error.code===Ie.code?void 0:(this.events.off(V,x),Q(q.error.message))}await this.deleteProposal(P.id),this.events.off(V,x);const{cacaos:F,responder:W}=q.result,te=[],ae=[];for(const Ie of F){await hI({cacao:Ie,projectId:this.client.core.projectId})||(this.client.logger.error(Ie,"Signature verification failed"),Q(_t("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Je}=Ie,ze=Sy(Je.resources),Le=[xE(Je.iss)],Ke=iw(Je.iss);if(ze){const Pe=dI(ze),hr=fI(ze);te.push(...Pe),Le.push(...hr)}for(const Pe of Le)ae.push(`${Pe}:${Ke}`)}const fe=await this.client.core.crypto.generateSharedKey(A,W.publicKey);let ge;te.length>0&&(ge={topic:fe,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:W,controller:W.publicKey,expiry:br(Pl),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:v,namespaces:UI([...new Set(te)],[...new Set(ae)]),transportType:o},await this.client.core.relayer.subscribe(fe,{transportType:o}),await this.client.session.set(fe,ge),v&&await this.client.core.pairing.updateMetadata({topic:v,metadata:W.metadata}),ge=this.client.session.get(fe)),(Y=this.client.metadata.redirect)!=null&&Y.linkMode&&(U=W.metadata.redirect)!=null&&U.linkMode&&(j=W.metadata.redirect)!=null&&j.universal&&n&&(this.client.core.addLinkModeSupportedApp(W.metadata.redirect.universal),this.client.session.update(fe,{transportType:Mt.link_mode})),L({auths:F,session:ge})};this.events.once(V,x),this.events.once(I,M);let G;try{if(i){const q=oc("wc_sessionAuthenticate",T,se);this.client.core.history.set(v,q);const Y=await this.client.core.crypto.encode("",q,{type:lm,encoding:Ba});G=Wm(n,v,Y)}else await Promise.all([this.sendRequest({topic:v,method:"wc_sessionAuthenticate",params:T,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:se}),this.sendRequest({topic:v,method:"wc_sessionPropose",params:P,expiry:Cr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:P.id})])}catch(q){throw this.events.off(V,x),this.events.off(I,M),q}return await this.setProposal(P.id,P),await this.setAuthRequest(se,{request:yn(It({},T),{verifyContext:{}}),pairingTopic:v,transportType:o}),{uri:G??E,response:B}}),ie(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:s}=r,i=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[Bc.authenticated_session_approve_started]}});try{this.isInitialized()}catch(m){throw i.setError(If.no_internet_connection),m}const o=this.getPendingAuthRequest(n);if(!o)throw i.setError(If.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||Mt.relay;a===Mt.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),l=Iy(c),h={type:ia,receiverPublicKey:c,senderPublicKey:u},d=[],f=[];for(const m of s){if(!await hI({cacao:m,projectId:this.client.core.projectId})){i.setError(If.invalid_cacao);const S=_t("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:l,error:S,encodeOpts:h}),new Error(S.message)}i.addTrace(Bc.cacaos_verified);const{p:w}=m,v=Sy(w.resources),E=[xE(w.iss)],A=iw(w.iss);if(v){const S=dI(v),C=fI(v);d.push(...S),E.push(...C)}for(const S of E)f.push(`${S}:${A}`)}const p=await this.client.core.crypto.generateSharedKey(u,c);i.addTrace(Bc.create_authenticated_session_topic);let g;if((d==null?void 0:d.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:u,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:br(Pl),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:UI([...new Set(d)],[...new Set(f)]),transportType:a},i.addTrace(Bc.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(m){throw i.setError(If.subscribe_authenticated_session_topic_failure),m}i.addTrace(Bc.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Bc.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Bc.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:n,result:{cacaos:s,responder:{publicKey:u,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(m){throw i.setError(If.authenticated_session_approve_publish_failure),m}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),ie(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:s}=r,i=this.getPendingAuthRequest(n);if(!i)throw new Error(`Could not find pending auth request with id ${n}`);i.transportType===Mt.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Iy(o),u={type:ia,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:s,encodeOpts:u,rpcOpts:Cr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,_t("USER_DISCONNECTED"))}),ie(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:s}=r;return nP(n,s)}),ie(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),ie(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&i.topic&&i.topic!==n.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),ie(this,"deleteSession",async r=>{var n;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,_t("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(bT).catch(u=>this.client.logger.warn(u)),this.getPendingSessionRequests().forEach(u=>{u.topic===s&&this.deletePendingSessionRequest(u.id,_t("USER_DISCONNECTED"))}),s===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=Li.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),ie(this,"deleteProposal",async(r,n)=>{if(n)try{const s=this.client.proposal.get(r),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Uc.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,_t("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),ie(this,"deletePendingSessionRequest",async(r,n,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==r),s&&(this.sessionRequestQueue.state=Li.idle,this.client.events.emit("session_request_expire",{id:r}))}),ie(this,"deletePendingAuthRequest",async(r,n,s=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)])}),ie(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),ie(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,br(Cr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),ie(this,"setAuthRequest",async(r,n)=>{const{request:s,pairingTopic:i,transportType:o=Mt.relay}=n;this.client.core.expirer.set(r,s.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:r,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),ie(this,"setPendingSessionRequest",async r=>{const{id:n,topic:s,params:i,verifyContext:o}=r,a=i.request.expiryTimestamp||br(Cr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:s,params:i,verifyContext:o})}),ie(this,"sendRequest",async r=>{const{topic:n,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u,appLink:l,tvf:h}=r,d=oc(s,i,c);let f;const p=!!l;try{const w=p?Ba:vi;f=await this.client.core.crypto.encode(n,d,{encoding:w})}catch(w){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),w}let g;if(AJ.includes(s)){const w=Xi(JSON.stringify(d)),v=Xi(f);g=await this.client.core.verify.register({id:v,decryptedId:w})}const m=Cr[s].req;if(m.attestation=g,o&&(m.ttl=o),a&&(m.id=a),this.client.core.history.set(n,d),p){const w=Wm(l,n,f);await Te.Linking.openURL(w,this.client.name)}else{const w=Cr[s].req;o&&(w.ttl=o),a&&(w.id=a),w.tvf=yn(It({},h),{correlationId:d.id}),u?(w.internal=yn(It({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,f,w)):this.client.core.relayer.publish(n,f,w).catch(v=>this.client.logger.error(v))}return d.id}),ie(this,"sendResult",async r=>{const{id:n,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,u=v0(n,i);let l;const h=c&&typeof(Te==null?void 0:Te.Linking)<"u";try{const p=h?Ba:vi;l=await this.client.core.crypto.encode(s,u,yn(It({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let d,f;try{d=await this.client.core.history.get(s,n);const p=d.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(n,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${n}) failed`),p}if(h){const p=Wm(c,s,l);await Te.Linking.openURL(p,this.client.name)}else{const p=d.request.method,g=Cr[p].res;g.tvf=yn(It({},f),{correlationId:n}),o?(g.internal=yn(It({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,l,g)):this.client.core.relayer.publish(s,l,g).catch(m=>this.client.logger.error(m))}await this.client.core.history.resolve(u)}),ie(this,"sendError",async r=>{const{id:n,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=r,u=E0(n,i);let l;const h=c&&typeof(Te==null?void 0:Te.Linking)<"u";try{const f=h?Ba:vi;l=await this.client.core.crypto.encode(s,u,yn(It({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let d;try{d=await this.client.core.history.get(s,n)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${n}) failed`),f}if(h){const f=Wm(c,s,l);await Te.Linking.openURL(f,this.client.name)}else{const f=d.request.method,p=a||Cr[f].res;this.client.core.relayer.publish(s,l,p)}await this.client.core.history.resolve(u)}),ie(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(s=>{let i=!1;ka(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&r.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{ka(s.expiryTimestamp)&&n.push(s.id)}),await Promise.all([...r.map(s=>this.deleteSession({topic:s})),...n.map(s=>this.deleteProposal(s))])}),ie(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),ie(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),ie(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Li.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Li.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=Li.idle}),ie(this,"processRequest",async r=>{const{topic:n,payload:s,attestation:i,transportType:o,encryptedId:a}=r,c=s.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,s);case"wc_sessionPing":return await this.onSessionPingRequest(n,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),ie(this,"onRelayEventResponse",async r=>{const{topic:n,payload:s,transportType:i}=r,o=(await this.client.core.history.get(n,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,s);case"wc_sessionExtend":return this.onSessionExtendResponse(n,s);case"wc_sessionPing":return this.onSessionPingResponse(n,s);case"wc_sessionRequest":return this.onSessionRequestResponse(n,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),ie(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:s}=de("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),ie(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:s}=r,i=this.expectedPairingMethodMap.get(n);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),ie(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:s,attestation:i,encryptedId:o}=r,{params:a,id:c}=s;try{const u=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),u==null||u.setError(Po.proposal_listener_not_found)),this.isValidConnect(It({},s.params));const l=a.expiryTimestamp||br(Cr.wc_sessionPropose.req.ttl),h=It({id:c,pairingTopic:n,expiryTimestamp:l},a);await this.setProposal(c,h);const d=await this.getVerifyContext({attestationId:i,hash:Xi(JSON.stringify(s)),encryptedId:o,metadata:h.proposer.metadata});u==null||u.addTrace(ji.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:h,verifyContext:d})}catch(u){await this.sendError({id:c,topic:n,error:u,rpcOpts:Cr.wc_sessionPropose.autoReject}),this.client.logger.error(u)}}),ie(this,"onSessionProposeResponse",async(r,n,s)=>{const{id:i}=n;if(Hi(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const u=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const l=await this.client.core.crypto.generateSharedKey(c,u);this.pendingSessions.set(i,{sessionTopic:l,pairingTopic:r,proposalId:i,publicKey:c});const h=await this.client.core.relayer.subscribe(l,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:r})}else if(Gs(n)){await this.client.proposal.delete(i,_t("USER_DISCONNECTED"));const o=ft("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),ie(this,"onSessionSettleRequest",async(r,n)=>{const{id:s,params:i}=n;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:u,sessionProperties:l,scopedProperties:h,sessionConfig:d}=n.params,f=[...this.pendingSessions.values()].find(m=>m.sessionTopic===r);if(!f)return this.client.logger.error(`Pending session not found for topic ${r}`);const p=this.client.proposal.get(f.proposalId),g=yn(It(It(It({topic:r,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},l&&{sessionProperties:l}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),{transportType:Mt.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(ft("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:n.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),ie(this,"onSessionSettleResponse",async(r,n)=>{const{id:s}=n;Hi(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(ft("session_approve",s),{})):Gs(n)&&(await this.client.session.delete(r,_t("USER_DISCONNECTED")),this.events.emit(ft("session_approve",s),{error:n.error}))}),ie(this,"onSessionUpdateRequest",async(r,n)=>{const{params:s,id:i}=n;try{const o=`${r}_session_update`,a=Cf.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:r,error:_t("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(It({topic:r},s));try{Cf.set(o,i),await this.client.session.update(r,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0})}catch(c){throw Cf.delete(o),c}this.client.events.emit("session_update",{id:i,topic:r,params:s})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),ie(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),ie(this,"onSessionUpdateResponse",(r,n)=>{const{id:s}=n,i=ft("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Hi(n)?this.events.emit(ft("session_update",s),{}):Gs(n)&&this.events.emit(ft("session_update",s),{error:n.error})}),ie(this,"onSessionExtendRequest",async(r,n)=>{const{id:s}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,br(Pl)),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),ie(this,"onSessionExtendResponse",(r,n)=>{const{id:s}=n,i=ft("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Hi(n)?this.events.emit(ft("session_extend",s),{}):Gs(n)&&this.events.emit(ft("session_extend",s),{error:n.error})}),ie(this,"onSessionPingRequest",async(r,n)=>{const{id:s}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),ie(this,"onSessionPingResponse",(r,n)=>{const{id:s}=n,i=ft("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Hi(n)?this.events.emit(ft("session_ping",s),{}):Gs(n)&&this.events.emit(ft("session_ping",s),{error:n.error})},500)}),ie(this,"onSessionDeleteRequest",async(r,n)=>{const{id:s}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(xr.publish,async()=>{i(await this.deleteSession({topic:r,id:s}))})}),this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:_t("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),ie(this,"onSessionRequest",async r=>{var n,s,i;const{topic:o,payload:a,attestation:c,encryptedId:u,transportType:l}=r,{id:h,params:d}=a;try{await this.isValidRequest(It({topic:o},d));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Xi(JSON.stringify(oc("wc_sessionRequest",d,h))),encryptedId:u,metadata:f.peer.metadata,transportType:l}),g={id:h,topic:o,params:d,verifyContext:p};await this.setPendingSessionRequest(g),l===Mt.link_mode&&(n=f.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:h,topic:o,error:f}),this.client.logger.error(f)}}),ie(this,"onSessionRequestResponse",(r,n)=>{const{id:s}=n,i=ft("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Hi(n)?this.events.emit(ft("session_request",s),{result:n.result}):Gs(n)&&this.events.emit(ft("session_request",s),{error:n.error})}),ie(this,"onSessionEventRequest",async(r,n)=>{const{id:s,params:i}=n;try{const o=`${r}_session_event_${i.event.name}`,a=Cf.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(It({topic:r},i)),this.client.events.emit("session_event",{id:s,topic:r,params:i}),Cf.set(o,s)}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),ie(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:s}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Hi(n)?this.events.emit(ft("session_request",s),{result:n.result}):Gs(n)&&this.events.emit(ft("session_request",s),{error:n.error})}),ie(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:u,authPayload:l,expiryTimestamp:h}=i.params,d=await this.getVerifyContext({attestationId:o,hash:Xi(JSON.stringify(i)),encryptedId:a,metadata:u.metadata,transportType:c}),f={requester:u,pairingTopic:s,id:i.id,authPayload:l,verifyContext:d,expiryTimestamp:h};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Mt.link_mode&&(n=u.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(u.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:d})}catch(u){this.client.logger.error(u);const l=i.params.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),d=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:ia,receiverPublicKey:l,senderPublicKey:h};await this.sendError({id:i.id,topic:s,error:u,encodeOpts:f,rpcOpts:Cr.wc_sessionAuthenticate.autoReject,appLink:d})}}),ie(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),ie(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Li.idle,this.processSessionRequestQueue()},he.toMiliseconds(this.requestQueueDelay))}),ie(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===r&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=ft("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(ft("session_request",i.request.id),{error:n})})}),ie(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Li.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Li.active,this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),ie(this,"emitSessionRequest",r=>{this.client.events.emit("session_request",r)}),ie(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(s=>s.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:oc("wc_sessionPropose",yn(It({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id)})}),ie(this,"isValidConnect",async r=>{if(!Fn(r)){const{message:u}=de("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(u)}const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=r;if(Wr(n)||await this.isValidPairingTopic(n),!xq(c)){const{message:u}=de("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(u)}if(!Wr(s)&&Rp(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!Wr(i)&&Rp(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Wr(o)||this.validateSessionProps(o,"sessionProperties"),!Wr(a)){this.validateSessionProps(a,"scopedProperties");const u=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(l=>u.includes(l)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(u)}`)}}),ie(this,"validateNamespaces",(r,n)=>{const s=Nq(r,"connect()",n);if(s)throw new Error(s.message)}),ie(this,"isValidApprove",async r=>{if(!Fn(r))throw new Error(de("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const c=this.client.proposal.get(n),u=Qb(s,"approve()");if(u)throw new Error(u.message);const l=LI(c.requiredNamespaces,s,"approve()");if(l)throw new Error(l.message);if(!pr(i,!0)){const{message:h}=de("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(h)}if(Wr(o)||this.validateSessionProps(o,"sessionProperties"),!Wr(a)){this.validateSessionProps(a,"scopedProperties");const h=new Set(Object.keys(s));if(!Object.keys(a).every(d=>h.has(d)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(h).join(", ")}`)}}),ie(this,"isValidReject",async r=>{if(!Fn(r)){const{message:i}=de("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(i)}const{id:n,reason:s}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!Rq(s)){const{message:i}=de("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),ie(this,"isValidSessionSettleRequest",r=>{if(!Fn(r)){const{message:u}=de("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(u)}const{relay:n,controller:s,namespaces:i,expiry:o}=r;if(!xP(n)){const{message:u}=de("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=_q(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Qb(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(ka(o)){const{message:u}=de("EXPIRED","onSessionSettleRequest()");throw new Error(u)}}),ie(this,"isValidUpdate",async r=>{if(!Fn(r)){const{message:c}=de("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:s}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const i=this.client.session.get(n),o=Qb(s,"update()");if(o)throw new Error(o.message);const a=LI(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),ie(this,"isValidExtend",async r=>{if(!Fn(r)){const{message:s}=de("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(s)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),ie(this,"isValidRequest",async r=>{if(!Fn(r)){const{message:c}=de("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:s,chainId:i,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!$I(a,i)){const{message:c}=de("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!Pq(s)){const{message:c}=de("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!Uq(a,i,s.method)){const{message:c}=de("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!Mq(o,iv)){const{message:c}=de("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${iv.min} and ${iv.max}`);throw new Error(c)}}),ie(this,"isValidRespond",async r=>{var n;if(!Fn(r)){const{message:o}=de("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:s,response:i}=r;try{await this.isValidSessionTopic(s)}catch(o){throw(n=r==null?void 0:r.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!kq(i)){const{message:o}=de("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),ie(this,"isValidPing",async r=>{if(!Fn(r)){const{message:s}=de("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),ie(this,"isValidEmit",async r=>{if(!Fn(r)){const{message:a}=de("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:s,chainId:i}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!$I(o,i)){const{message:a}=de("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!Dq(s)){const{message:a}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!Bq(o,i,s.name)){const{message:a}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),ie(this,"isValidDisconnect",async r=>{if(!Fn(r)){const{message:s}=de("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),ie(this,"isValidAuthenticate",r=>{const{chains:n,uri:s,domain:i,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!pr(s,!1))throw new Error("uri is required parameter");if(!pr(i,!1))throw new Error("domain is required parameter");if(!pr(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>dh(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=dh(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),ie(this,"getVerifyContext",async r=>{const{attestationId:n,hash:s,encryptedId:i,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||ap,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Mt.link_mode){const l=this.getAppLinkIfEnabled(o,a);return c.verified.validation=l&&new URL(l).origin===new URL(o.url).origin?"VALID":"INVALID",c}const u=await this.client.core.verify.resolve({attestationId:n,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});u&&(c.verified.origin=u.origin,c.verified.isScam=u.isScam,c.verified.validation=u.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.warn(u)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),ie(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((s,i)=>{if(s==null){const{message:o}=de("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${s} for key ${Object.keys(r)[i]}`);throw new Error(o)}})}),ie(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),ie(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),ie(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:s}=de("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(s)}}),ie(this,"isLinkModeEnabled",(r,n)=>{var s,i,o,a,c,u,l,h,d;return!r||n!==Mt.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==""&&((l=r==null?void 0:r.redirect)==null?void 0:l.universal)!==void 0&&((h=r==null?void 0:r.redirect)==null?void 0:h.universal)!==""&&((d=r==null?void 0:r.redirect)==null?void 0:d.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(Te==null?void 0:Te.Linking)<"u"}),ie(this,"getAppLinkIfEnabled",(r,n)=>{var s;return this.isLinkModeEnabled(r,n)?(s=r==null?void 0:r.redirect)==null?void 0:s.universal:void 0}),ie(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=rI(r,"topic")||"",s=decodeURIComponent(rI(r,"wc_ev")||""),i=this.client.session.keys.includes(n);i&&this.client.session.update(n,{transportType:Mt.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:s,sessionExists:i})}),ie(this,"registerLinkModeListeners",async()=>{var r;if(jA()||Nc()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=Te==null?void 0:Te.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await n.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),ie(this,"shouldSetTVF",(r,n)=>{if(!n||r!=="wc_sessionRequest")return!1;const{request:s}=n;return Object.keys(ET).includes(s.method)}),ie(this,"getTVFParams",(r,n,s)=>{var i,o;try{const a=n.request.method,c=this.extractTxHashesFromResult(a,s);return yn(It({correlationId:r,rpcMethods:[a],chainId:n.chainId},this.isValidContractData(n.request.params)&&{contractAddresses:[(o=(i=n.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),ie(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const s=(r==null?void 0:r.data)||((n=r==null?void 0:r[0])==null?void 0:n.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),ie(this,"extractTxHashesFromResult",(r,n)=>{try{const s=ET[r];if(typeof n=="string")return[n];const i=n[s.key];if(lc(i))return r==="solana_signAllTransactions"?i.map(o=>f7(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,s]of Object.entries(r))for(const i of s)try{await this.onProviderMessageEvent({topic:n,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(xr.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Ny)?this.client.auth.authKeys.get(Ny):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:i===Mt.link_mode?Ba:vi});QA(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:s,transportType:i,encryptedId:Xi(n)})):_0(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:i}),this.client.core.history.delete(r,a.id)):await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(r,n)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Ms.expired,async e=>{const{topic:r,id:n}=KR(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,de("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,de("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(Gc.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Gc.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!pr(e,!1)){const{message:r}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(ka(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=de("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!pr(e,!1)){const{message:r}=de("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=de("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(ka(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=de("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=de("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(pr(e,!1)){const{message:r}=de("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=de("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!Oq(e)){const{message:r}=de("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=de("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(ka(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=de("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class UJ extends wl{constructor(e,r){super(e,r,bJ,ZA),this.core=e,this.logger=r}}let BJ=class extends wl{constructor(e,r){super(e,r,vJ,ZA),this.core=e,this.logger=r}};class $J extends wl{constructor(e,r){super(e,r,_J,ZA,n=>n.id),this.core=e,this.logger=r}}class LJ extends wl{constructor(e,r){super(e,r,IJ,C0,()=>Ny),this.core=e,this.logger=r}}class MJ extends wl{constructor(e,r){super(e,r,TJ,C0),this.core=e,this.logger=r}}class FJ extends wl{constructor(e,r){super(e,r,NJ,C0,n=>n.id),this.core=e,this.logger=r}}var jJ=Object.defineProperty,zJ=(t,e,r)=>e in t?jJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ov=(t,e,r)=>zJ(t,typeof e!="symbol"?e+"":e,r);class HJ{constructor(e,r){this.core=e,this.logger=r,ov(this,"authKeys"),ov(this,"pairingTopics"),ov(this,"requests"),this.authKeys=new LJ(this.core,this.logger),this.pairingTopics=new MJ(this.core,this.logger),this.requests=new FJ(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var qJ=Object.defineProperty,WJ=(t,e,r)=>e in t?qJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Xe=(t,e,r)=>WJ(t,typeof e!="symbol"?e+"":e,r);let VJ=class tk extends w4{constructor(e){super(e),Xe(this,"protocol",ZP),Xe(this,"version",XP),Xe(this,"name",sv.name),Xe(this,"metadata"),Xe(this,"core"),Xe(this,"logger"),Xe(this,"events",new Xs.EventEmitter),Xe(this,"engine"),Xe(this,"session"),Xe(this,"proposal"),Xe(this,"pendingRequest"),Xe(this,"auth"),Xe(this,"signConfig"),Xe(this,"on",(n,s)=>this.events.on(n,s)),Xe(this,"once",(n,s)=>this.events.once(n,s)),Xe(this,"off",(n,s)=>this.events.off(n,s)),Xe(this,"removeListener",(n,s)=>this.events.removeListener(n,s)),Xe(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),Xe(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"update",async n=>{try{return await this.engine.update(n)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"request",async n=>{try{return await this.engine.request(n)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"find",n=>{try{return this.engine.find(n)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),Xe(this,"authenticate",async(n,s)=>{try{return await this.engine.authenticate(n,s)}catch(i){throw this.logger.error(i.message),i}}),Xe(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||sv.name,this.metadata=Iz(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:em(Vd({level:(e==null?void 0:e.logger)||sv.logger}));this.core=(e==null?void 0:e.core)||new wJ(e),this.logger=pn(r,this.name),this.session=new BJ(this.core,this.logger),this.proposal=new UJ(this.core,this.logger),this.pendingRequest=new $J(this.core,this.logger),this.engine=new DJ(this),this.auth=new HJ(this.core,this.logger)}static async init(e){const r=new tk(e);return await r.initialize(),r}get context(){return es(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},he.toMiliseconds(he.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Gm={exports:{}},AT;function GJ(){return AT||(AT=1,function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Wn<"u"&&Wn,n=function(){function i(){this.fetch=!1,this.DOMException=r.DOMException}return i.prototype=r,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof Wn<"u"&&Wn||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(I){return I&&DataView.prototype.isPrototypeOf(I)}if(c.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(I){return I&&l.indexOf(Object.prototype.toString.call(I))>-1};function d(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function f(I){return typeof I!="string"&&(I=String(I)),I}function p(I){var x={next:function(){var M=I.shift();return{done:M===void 0,value:M}}};return c.iterable&&(x[Symbol.iterator]=function(){return x}),x}function g(I){this.map={},I instanceof g?I.forEach(function(x,M){this.append(M,x)},this):Array.isArray(I)?I.forEach(function(x){if(x.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+x.length);this.append(x[0],x[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(x){this.append(x,I[x])},this)}g.prototype.append=function(I,x){I=d(I),x=f(x);var M=this.map[I];this.map[I]=M?M+", "+x:x},g.prototype.delete=function(I){delete this.map[d(I)]},g.prototype.get=function(I){return I=d(I),this.has(I)?this.map[I]:null},g.prototype.has=function(I){return this.map.hasOwnProperty(d(I))},g.prototype.set=function(I,x){this.map[d(I)]=f(x)},g.prototype.forEach=function(I,x){for(var M in this.map)this.map.hasOwnProperty(M)&&I.call(x,this.map[M],M,this)},g.prototype.keys=function(){var I=[];return this.forEach(function(x,M){I.push(M)}),p(I)},g.prototype.values=function(){var I=[];return this.forEach(function(x){I.push(x)}),p(I)},g.prototype.entries=function(){var I=[];return this.forEach(function(x,M){I.push([M,x])}),p(I)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function m(I){if(!I._noBody){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}}function w(I){return new Promise(function(x,M){I.onload=function(){x(I.result)},I.onerror=function(){M(I.error)}})}function v(I){var x=new FileReader,M=w(x);return x.readAsArrayBuffer(I),M}function E(I){var x=new FileReader,M=w(x),G=/charset=([A-Za-z0-9_-]+)/.exec(I.type),q=G?G[1]:"utf-8";return x.readAsText(I,q),M}function A(I){for(var x=new Uint8Array(I),M=new Array(x.length),G=0;G<x.length;G++)M[G]=String.fromCharCode(x[G]);return M.join("")}function S(I){if(I.slice)return I.slice(0);var x=new Uint8Array(I.byteLength);return x.set(new Uint8Array(I)),x.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(I){this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:c.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:c.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():c.arrayBuffer&&c.blob&&u(I)?(this._bodyArrayBuffer=S(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||h(I))?this._bodyArrayBuffer=S(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var I=m(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=m(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(v);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var I=m(this);if(I)return I;if(this._bodyBlob)return E(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(B)}),this.json=function(){return this.text().then(JSON.parse)},this}var T=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function O(I){var x=I.toUpperCase();return T.indexOf(x)>-1?x:I}function P(I,x){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');x=x||{};var M=x.body;if(I instanceof P){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,x.headers||(this.headers=new g(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!M&&I._bodyInit!=null&&(M=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=x.credentials||this.credentials||"same-origin",(x.headers||!this.headers)&&(this.headers=new g(x.headers)),this.method=O(x.method||this.method||"GET"),this.mode=x.mode||this.mode||null,this.signal=x.signal||this.signal||function(){if("AbortController"in a){var Y=new AbortController;return Y.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),(this.method==="GET"||this.method==="HEAD")&&(x.cache==="no-store"||x.cache==="no-cache")){var G=/([?&])_=[^&]*/;if(G.test(this.url))this.url=this.url.replace(G,"$1_="+new Date().getTime());else{var q=/\?/;this.url+=(q.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}P.prototype.clone=function(){return new P(this,{body:this._bodyInit})};function B(I){var x=new FormData;return I.trim().split("&").forEach(function(M){if(M){var G=M.split("="),q=G.shift().replace(/\+/g," "),Y=G.join("=").replace(/\+/g," ");x.append(decodeURIComponent(q),decodeURIComponent(Y))}}),x}function L(I){var x=new g,M=I.replace(/\r?\n[\t ]+/g," ");return M.split("\r").map(function(G){return G.indexOf(`
`)===0?G.substr(1,G.length):G}).forEach(function(G){var q=G.split(":"),Y=q.shift().trim();if(Y){var U=q.join(":").trim();try{x.append(Y,U)}catch(j){console.warn("Response "+j.message)}}}),x}C.call(P.prototype);function Q(I,x){if(!(this instanceof Q))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(x||(x={}),this.type="default",this.status=x.status===void 0?200:x.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=x.statusText===void 0?"":""+x.statusText,this.headers=new g(x.headers),this.url=x.url||"",this._initBody(I)}C.call(Q.prototype),Q.prototype.clone=function(){return new Q(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},Q.error=function(){var I=new Q(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var se=[301,302,303,307,308];Q.redirect=function(I,x){if(se.indexOf(x)===-1)throw new RangeError("Invalid status code");return new Q(null,{status:x,headers:{location:I}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(x,M){this.message=x,this.name=M;var G=Error(x);this.stack=G.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function V(I,x){return new Promise(function(M,G){var q=new P(I,x);if(q.signal&&q.signal.aborted)return G(new o.DOMException("Aborted","AbortError"));var Y=new XMLHttpRequest;function U(){Y.abort()}Y.onload=function(){var W={statusText:Y.statusText,headers:L(Y.getAllResponseHeaders()||"")};q.url.indexOf("file://")===0&&(Y.status<200||Y.status>599)?W.status=200:W.status=Y.status,W.url="responseURL"in Y?Y.responseURL:W.headers.get("X-Request-URL");var te="response"in Y?Y.response:Y.responseText;setTimeout(function(){M(new Q(te,W))},0)},Y.onerror=function(){setTimeout(function(){G(new TypeError("Network request failed"))},0)},Y.ontimeout=function(){setTimeout(function(){G(new TypeError("Network request timed out"))},0)},Y.onabort=function(){setTimeout(function(){G(new o.DOMException("Aborted","AbortError"))},0)};function j(W){try{return W===""&&a.location.href?a.location.href:W}catch{return W}}if(Y.open(q.method,j(q.url),!0),q.credentials==="include"?Y.withCredentials=!0:q.credentials==="omit"&&(Y.withCredentials=!1),"responseType"in Y&&(c.blob?Y.responseType="blob":c.arrayBuffer&&(Y.responseType="arraybuffer")),x&&typeof x.headers=="object"&&!(x.headers instanceof g||a.Headers&&x.headers instanceof a.Headers)){var F=[];Object.getOwnPropertyNames(x.headers).forEach(function(W){F.push(d(W)),Y.setRequestHeader(W,f(x.headers[W]))}),q.headers.forEach(function(W,te){F.indexOf(te)===-1&&Y.setRequestHeader(te,W)})}else q.headers.forEach(function(W,te){Y.setRequestHeader(te,W)});q.signal&&(q.signal.addEventListener("abort",U),Y.onreadystatechange=function(){Y.readyState===4&&q.signal.removeEventListener("abort",U)}),Y.send(typeof q._bodyInit>"u"?null:q._bodyInit)})}return V.polyfill=!0,a.fetch||(a.fetch=V,a.Headers=g,a.Request=P,a.Response=Q),o.Headers=g,o.Request=P,o.Response=Q,o.fetch=V,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=r.fetch?r:n;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e}(Gm,Gm.exports)),Gm.exports}var KJ=GJ();const CT=Xw(KJ);var JJ=Object.defineProperty,YJ=Object.defineProperties,QJ=Object.getOwnPropertyDescriptors,ST=Object.getOwnPropertySymbols,ZJ=Object.prototype.hasOwnProperty,XJ=Object.prototype.propertyIsEnumerable,IT=(t,e,r)=>e in t?JJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,TT=(t,e)=>{for(var r in e||(e={}))ZJ.call(e,r)&&IT(t,r,e[r]);if(ST)for(var r of ST(e))XJ.call(e,r)&&IT(t,r,e[r]);return t},NT=(t,e)=>YJ(t,QJ(e));const eY={Accept:"application/json","Content-Type":"application/json"},tY="POST",xT={headers:eY,method:tY},OT=10;let Ni=class{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new Xs.EventEmitter,this.isAvailable=!1,this.registering=!1,!WI(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=ha(e),n=await(await CT(this.url,NT(TT({},xT),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!WI(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=ha({id:1,jsonrpc:"2.0",method:"test",params:[]});await CT(e,NT(TT({},xT),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Vu(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),s=n.message||n.toString(),i=E0(e,s);this.events.emit("payload",i)}parseError(e,r=this.url){return PP(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>OT&&this.events.setMaxListeners(OT)}};const RT="error",rY="wss://relay.walletconnect.org",nY="wc",sY="universal_provider",Km=`${nY}@2:${sY}:`,rk="https://rpc.walletconnect.org/v1/",Ql="generic",iY=`${rk}bundler`,ti={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function oY(){}function XA(t){return t==null||typeof t!="object"&&typeof t!="function"}function e1(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function aY(t){if(XA(t))return t;if(Array.isArray(t)||e1(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const n=new r(t);return n.lastIndex=t.lastIndex,n}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const n=new r(t.message);return n.stack=t.stack,n.name=t.name,n.cause=t.cause,n}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const n=Object.create(e);return Object.assign(n,t)}return t}function PT(t){return typeof t=="object"&&t!==null}function nk(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function sk(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const cY="[object RegExp]",ik="[object String]",ok="[object Number]",ak="[object Boolean]",ck="[object Arguments]",uY="[object Symbol]",lY="[object Date]",hY="[object Map]",dY="[object Set]",fY="[object Array]",pY="[object ArrayBuffer]",gY="[object Object]",mY="[object DataView]",yY="[object Uint8Array]",wY="[object Uint8ClampedArray]",bY="[object Uint16Array]",vY="[object Uint32Array]",EY="[object Int8Array]",_Y="[object Int16Array]",AY="[object Int32Array]",CY="[object Float32Array]",SY="[object Float64Array]";function IY(t,e){return ih(t,void 0,t,new Map,e)}function ih(t,e,r,n=new Map,s=void 0){const i=s==null?void 0:s(t,e,r,n);if(i!=null)return i;if(XA(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const o=new Array(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=ih(t[a],a,r,n,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;n.set(t,o);for(const[a,c]of t)o.set(a,ih(c,a,r,n,s));return o}if(t instanceof Set){const o=new Set;n.set(t,o);for(const a of t)o.add(ih(a,void 0,r,n,s));return o}if(typeof _r<"u"&&_r.isBuffer(t))return t.subarray();if(e1(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=ih(t[a],a,r,n,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,o),Kc(o,t,r,n,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return n.set(t,o),Kc(o,t,r,n,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return n.set(t,o),Kc(o,t,r,n,s),o}if(t instanceof Error){const o=new t.constructor;return n.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Kc(o,t,r,n,s),o}if(typeof t=="object"&&TY(t)){const o=Object.create(Object.getPrototypeOf(t));return n.set(t,o),Kc(o,t,r,n,s),o}return t}function Kc(t,e,r=t,n,s){const i=[...Object.keys(e),...nk(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=ih(e[a],a,r,n,s))}}function TY(t){switch(sk(t)){case ck:case fY:case pY:case mY:case ak:case lY:case CY:case SY:case EY:case _Y:case AY:case hY:case ok:case gY:case cY:case dY:case ik:case uY:case yY:case wY:case bY:case vY:return!0;default:return!1}}function NY(t,e){return IY(t,(r,n,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case ok:case ik:case ak:{const o=new t.constructor(t==null?void 0:t.valueOf());return Kc(o,t),o}case ck:{const o={};return Kc(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function kT(t){return NY(t)}function DT(t){return t!==null&&typeof t=="object"&&sk(t)==="[object Arguments]"}function xY(t){return e1(t)}function OY(t){var r;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!((r=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&r.writable)?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function RY(t,...e){const r=e.slice(0,-1),n=e[e.length-1];let s=t;for(let i=0;i<r.length;i++){const o=r[i];s=e_(s,o,n,new Map)}return s}function e_(t,e,r,n){if(XA(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(n.has(e))return aY(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...nk(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(DT(a)&&(a={...a}),DT(c)&&(c={...c}),typeof _r<"u"&&_r.isBuffer(a)&&(a=kT(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const l=[],h=Reflect.ownKeys(c);for(let d=0;d<h.length;d++){const f=h[d];l[f]=c[f]}c=l}else c=[];const u=r(c,a,o,t,e,n);u!=null?t[o]=u:Array.isArray(a)||PT(c)&&PT(a)?t[o]=e_(c,a,r,n):c==null&&OY(a)?t[o]=e_({},a,r,n):c==null&&xY(a)?t[o]=kT(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function PY(t,...e){return RY(t,...e,oY)}var kY=Object.defineProperty,DY=Object.defineProperties,UY=Object.getOwnPropertyDescriptors,UT=Object.getOwnPropertySymbols,BY=Object.prototype.hasOwnProperty,$Y=Object.prototype.propertyIsEnumerable,BT=(t,e,r)=>e in t?kY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Jm=(t,e)=>{for(var r in e||(e={}))BY.call(e,r)&&BT(t,r,e[r]);if(UT)for(var r of UT(e))$Y.call(e,r)&&BT(t,r,e[r]);return t},LY=(t,e)=>DY(t,UY(e));function Es(t,e,r){var n;const s=dh(t);return((n=e.rpcMap)==null?void 0:n[s.reference])||`${rk}?chainId=${s.namespace}:${s.reference}&projectId=${r}`}function bl(t){return t.includes(":")?t.split(":")[1]:t}function uk(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function MY(t,e){const r=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!r.length)return[];const n=[];return r.forEach(s=>{const i=e.namespaces[s].accounts;n.push(...i)}),n}function av(t={},e={}){const r=$T(t),n=$T(e);return PY(r,n)}function $T(t){var e,r,n,s;const i={};if(!Rp(t))return i;for(const[o,a]of Object.entries(t)){const c=KA(o)?[o]:a.chains,u=a.methods||[],l=a.events||[],h=a.rpcMap||{},d=jf(o);i[d]=LY(Jm(Jm({},i[d]),a),{chains:Cy(c,(e=i[d])==null?void 0:e.chains),methods:Cy(u,(r=i[d])==null?void 0:r.methods),events:Cy(l,(n=i[d])==null?void 0:n.events),rpcMap:Jm(Jm({},h),(s=i[d])==null?void 0:s.rpcMap)})}return i}function LT(t){return t.includes(":")?t.split(":")[2]:t}function MT(t){const e={};for(const[r,n]of Object.entries(t)){const s=n.methods||[],i=n.events||[],o=n.accounts||[],a=KA(r)?[r]:n.chains?n.chains:uk(n.accounts);e[r]={chains:a,methods:s,events:i,accounts:o}}return e}function cv(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const lk={},ht=t=>lk[t],uv=(t,e)=>{lk[t]=e};var FY=Object.defineProperty,jY=(t,e,r)=>e in t?FY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,kl=(t,e,r)=>jY(t,typeof e!="symbol"?e+"":e,r);class zY{constructor(e){kl(this,"name","polkadot"),kl(this,"client"),kl(this,"httpProviders"),kl(this,"events"),kl(this,"namespace"),kl(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=bl(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Es(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new ei(new Ni(n,ht("disableProviderPing")))}}var HY=Object.defineProperty,qY=Object.defineProperties,WY=Object.getOwnPropertyDescriptors,FT=Object.getOwnPropertySymbols,VY=Object.prototype.hasOwnProperty,GY=Object.prototype.propertyIsEnumerable,t_=(t,e,r)=>e in t?HY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,jT=(t,e)=>{for(var r in e||(e={}))VY.call(e,r)&&t_(t,r,e[r]);if(FT)for(var r of FT(e))GY.call(e,r)&&t_(t,r,e[r]);return t},zT=(t,e)=>qY(t,WY(e)),Dl=(t,e,r)=>t_(t,typeof e!="symbol"?e+"":e,r);class KY{constructor(e){Dl(this,"name","eip155"),Dl(this,"client"),Dl(this,"chainId"),Dl(this,"namespace"),Dl(this,"httpProviders"),Dl(this,"events"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||Es(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new ei(new Ni(n,ht("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=parseInt(bl(r));e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let s=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,s;const i=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0];if(!i)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const o=this.client.session.get(e.topic),a=((s=o==null?void 0:o.sessionProperties)==null?void 0:s.capabilities)||{};if(a!=null&&a[i])return a==null?void 0:a[i];const c=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:zT(jT({},o.sessionProperties||{}),{capabilities:zT(jT({},a||{}),{[i]:c})})})}catch(u){console.warn("Failed to update session with capabilities",u)}return c}async getCallStatus(e){var r,n;const s=this.client.session.get(e.topic),i=(r=s.sessionProperties)==null?void 0:r.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(n=s.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(oc("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,r){return`${iY}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}var JY=Object.defineProperty,YY=(t,e,r)=>e in t?JY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ul=(t,e,r)=>YY(t,typeof e!="symbol"?e+"":e,r);class QY{constructor(e){Ul(this,"name","solana"),Ul(this,"client"),Ul(this,"httpProviders"),Ul(this,"events"),Ul(this,"namespace"),Ul(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=bl(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Es(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new ei(new Ni(n,ht("disableProviderPing")))}}var ZY=Object.defineProperty,XY=(t,e,r)=>e in t?ZY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Bl=(t,e,r)=>XY(t,typeof e!="symbol"?e+"":e,r);class eQ{constructor(e){Bl(this,"name","cosmos"),Bl(this,"client"),Bl(this,"httpProviders"),Bl(this,"events"),Bl(this,"namespace"),Bl(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=bl(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Es(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new ei(new Ni(n,ht("disableProviderPing")))}}var tQ=Object.defineProperty,rQ=(t,e,r)=>e in t?tQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$l=(t,e,r)=>rQ(t,typeof e!="symbol"?e+"":e,r);class nQ{constructor(e){$l(this,"name","algorand"),$l(this,"client"),$l(this,"httpProviders"),$l(this,"events"),$l(this,"namespace"),$l(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||Es(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Es(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new ei(new Ni(n,ht("disableProviderPing")))}}var sQ=Object.defineProperty,iQ=(t,e,r)=>e in t?sQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ll=(t,e,r)=>iQ(t,typeof e!="symbol"?e+"":e,r);class oQ{constructor(e){Ll(this,"name","cip34"),Ll(this,"client"),Ll(this,"httpProviders"),Ll(this,"events"),Ll(this,"namespace"),Ll(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),s=bl(r);e[s]=this.createHttpProvider(s,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new ei(new Ni(n,ht("disableProviderPing")))}}var aQ=Object.defineProperty,cQ=(t,e,r)=>e in t?aQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ml=(t,e,r)=>cQ(t,typeof e!="symbol"?e+"":e,r);class uQ{constructor(e){Ml(this,"name","elrond"),Ml(this,"client"),Ml(this,"httpProviders"),Ml(this,"events"),Ml(this,"namespace"),Ml(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=bl(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Es(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new ei(new Ni(n,ht("disableProviderPing")))}}var lQ=Object.defineProperty,hQ=(t,e,r)=>e in t?lQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fl=(t,e,r)=>hQ(t,typeof e!="symbol"?e+"":e,r);class dQ{constructor(e){Fl(this,"name","multiversx"),Fl(this,"client"),Fl(this,"httpProviders"),Fl(this,"events"),Fl(this,"namespace"),Fl(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=bl(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Es(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new ei(new Ni(n,ht("disableProviderPing")))}}var fQ=Object.defineProperty,pQ=(t,e,r)=>e in t?fQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,jl=(t,e,r)=>pQ(t,typeof e!="symbol"?e+"":e,r);class gQ{constructor(e){jl(this,"name","near"),jl(this,"client"),jl(this,"httpProviders"),jl(this,"events"),jl(this,"namespace"),jl(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Es(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Es(e,this.namespace);return typeof n>"u"?void 0:new ei(new Ni(n,ht("disableProviderPing")))}}var mQ=Object.defineProperty,yQ=(t,e,r)=>e in t?mQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zl=(t,e,r)=>yQ(t,typeof e!="symbol"?e+"":e,r);class wQ{constructor(e){zl(this,"name","tezos"),zl(this,"client"),zl(this,"httpProviders"),zl(this,"events"),zl(this,"namespace"),zl(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Es(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Es(e,this.namespace);return typeof n>"u"?void 0:new ei(new Ni(n))}}var bQ=Object.defineProperty,vQ=(t,e,r)=>e in t?bQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Hl=(t,e,r)=>vQ(t,typeof e!="symbol"?e+"":e,r);class EQ{constructor(e){Hl(this,"name",Ql),Hl(this,"client"),Hl(this,"httpProviders"),Hl(this,"events"),Hl(this,"namespace"),Hl(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(s=>{const i=dh(s);n[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),n}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Es(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new ei(new Ni(n,ht("disableProviderPing")))}}var _Q=Object.defineProperty,AQ=Object.defineProperties,CQ=Object.getOwnPropertyDescriptors,HT=Object.getOwnPropertySymbols,SQ=Object.prototype.hasOwnProperty,IQ=Object.prototype.propertyIsEnumerable,r_=(t,e,r)=>e in t?_Q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ym=(t,e)=>{for(var r in e||(e={}))SQ.call(e,r)&&r_(t,r,e[r]);if(HT)for(var r of HT(e))IQ.call(e,r)&&r_(t,r,e[r]);return t},lv=(t,e)=>AQ(t,CQ(e)),ks=(t,e,r)=>r_(t,typeof e!="symbol"?e+"":e,r);let TQ=class hk{constructor(e){ks(this,"client"),ks(this,"namespaces"),ks(this,"optionalNamespaces"),ks(this,"sessionProperties"),ks(this,"scopedProperties"),ks(this,"events",new RA),ks(this,"rpcProviders",{}),ks(this,"session"),ks(this,"providerOpts"),ks(this,"logger"),ks(this,"uri"),ks(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:em(Vd({level:(e==null?void 0:e.logger)||RT})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new hk(e);return await r.initialize(),r}async request(e,r,n){const[s,i]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Ym({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,s){const i=new Date().getTime();this.request(e,n,s).then(o=>r(null,v0(i,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:_t("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:s}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const i=await s();if(this.session=i.session,this.session){const o=MT(this.session.namespaces);this.namespaces=av(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});r&&(this.uri=r,this.events.emit("display_uri",r));const s=await n();this.session=s;const i=MT(s.namespaces);return this.namespaces=av(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,s]=this.validateChain(e),i=this.getProvider(n);i.name===Ql?i.setDefaultChain(`${n}:${s}`,r):i.setDefaultChain(s,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(lc(r)){for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await VJ.init({core:this.providerOpts.core,logger:this.providerOpts.logger||RT,relayUrl:this.providerOpts.relayUrl||rY,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error("Failed to get session",n),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>jf(r)))];uv("client",this.client),uv("events",this.events),uv("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=MY(r,this.session),s=uk(n),i=av(this.namespaces,this.optionalNamespaces),o=lv(Ym({},i[r]),{accounts:n,chains:s});switch(r){case"eip155":this.rpcProviders[r]=new KY({namespace:o});break;case"algorand":this.rpcProviders[r]=new nQ({namespace:o});break;case"solana":this.rpcProviders[r]=new QY({namespace:o});break;case"cosmos":this.rpcProviders[r]=new eQ({namespace:o});break;case"polkadot":this.rpcProviders[r]=new zY({namespace:o});break;case"cip34":this.rpcProviders[r]=new oQ({namespace:o});break;case"elrond":this.rpcProviders[r]=new uQ({namespace:o});break;case"multiversx":this.rpcProviders[r]=new dQ({namespace:o});break;case"near":this.rpcProviders[r]=new gQ({namespace:o});break;case"tezos":this.rpcProviders[r]=new wQ({namespace:o});break;default:this.rpcProviders[Ql]?this.rpcProviders[Ql].updateNamespace(o):this.rpcProviders[Ql]=new EQ({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:n}=e;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:n,topic:s}=e;if(s!==((r=this.session)==null?void 0:r.topic))return;const{event:i}=n;if(i.name==="accountsChanged"){const o=i.data;o&&lc(o)&&this.events.emit("accountsChanged",o.map(LT))}else if(i.name==="chainChanged"){const o=n.chainId,a=n.event.data,c=jf(o),u=cv(o)!==cv(a)?`${c}:${cv(a)}`:o;this.onChainChanged(u)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n,s;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:i}=r,o=(s=this.client)==null?void 0:s.session.get(e);this.session=lv(Ym({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",lv(Ym({},_t("USER_DISCONNECTED")),{data:e.topic})))}),this.on(ti.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Ql]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:n,sessionProperties:s,scopedProperties:i}=e;r&&Object.keys(r).length&&(this.namespaces=r),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[r,n]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>jf(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const s=jf(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,r=!1){if(!this.namespaces)return;const[n,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(n,s),this.events.emit("chainChanged",s);const i=this.getProvider(n).getDefaultChain();r||this.getProvider(n).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:n,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:r,newChainId:n}){var s,i;try{if(r===n)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${n}:`)).map(LT);if(!lc(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,r){if(!this.namespaces)return;const n=this.namespaces[e]?e:`${e}:${r}`,s={chains:[],methods:[],events:[],defaultChain:r};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=r):this.namespaces[n]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var n;const s=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${Km}/${e}${s}`,r)}async getFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${Km}/${e}${n}`)}async deleteFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${Km}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(Km)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn("Failed to cleanup storage",r)}}};var yd={};const NQ="https://secure.walletconnect.org/sdk",xQ=(typeof Er<"u"&&typeof yd<"u"?yd.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||NQ,OQ=(typeof Er<"u"&&typeof yd<"u"?yd.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",RQ=(typeof Er<"u"&&typeof yd<"u"?yd.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ce={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},gr={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Fc=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),wr=Zt({...Fc}),Vr={state:wr,subscribeKey(t,e){return Xn(wr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=De.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){wr.message=Fc.message,wr.variant=Fc.variant,wr.svg=Fc.svg,wr.open=Fc.open,wr.autoClose=Fc.autoClose},_showMessage({message:t,svg:e,variant:r="success",autoClose:n=Fc.autoClose}){wr.open?(wr.open=!1,setTimeout(()=>{wr.message=t,wr.variant=r,wr.svg=e,wr.open=!0,wr.autoClose=n},150)):(wr.message=t,wr.variant=r,wr.svg=e,wr.open=!0,wr.autoClose=n)}},up={getSIWX(){return ue.state.siwx},async initializeIfEnabled(){var i;const t=ue.state.siwx,e=$.getActiveCaipAddress();if(!(t&&e))return;const[r,n,s]=e.split(":");if($.checkIfSupportedNetwork(r))try{if((await t.getSessions(`${r}:${n}`,s)).length)return;await ar.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Ot.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=Bt._getClient())==null?void 0:i.disconnect().catch(console.error)),wt.reset("Connect"),Vr.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=ue.state.siwx,e=De.getPlainAddress($.getActiveCaipAddress()),r=$.getActiveCaipNetwork(),n=Bt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");if(!n)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:r.caipNetworkId,accountAddress:e}),i=s.toString();Me.getConnectorId(r.chainNamespace)===le.CONNECTOR_ID.AUTH&&wt.pushTransactionStack({view:null,goBack:!1,replace:!0});const a=await n.signMessage(i);await t.addSession({data:s,message:i,signature:a}),ar.close(),Ot.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!ar.state.open||wt.state.view==="ApproveTransaction")&&await ar.open({view:"SIWXSignMessage"}),i.isSmartAccount?Vr.showError("This application might not support Smart Accounts"):Vr.showError("Signature declined"),Ot.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await Bt.disconnect():ar.close(),wt.reset("Connect"),Ot.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=ue.state.siwx,e=De.getPlainAddress($.getActiveCaipAddress()),r=$.getActiveCaipNetwork();return t&&e&&r?t.getSessions(r.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const r=wt.state.view==="ApproveTransaction",n=wt.state.view==="SIWXSignMessage";if(r||n)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:r}){var a,c,u;const n=up.getSIWX(),s=new Set(e.map(l=>l.split(":")[0]));if(!n||s.size!==1||!s.has("eip155"))return!1;const i=await n.createMessage({chainId:((a=$.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:r,chains:[i.chainId,...e.filter(l=>l!==i.chainId)]});if(Vr.showLoading("Authenticating...",{autoClose:!1}),_e.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(u=o==null?void 0:o.auths)!=null&&u.length){const l=o.auths.map(h=>{const d=t.client.formatAuthMessage({request:h.p,iss:h.p.iss});return{data:{...h.p,accountAddress:h.p.iss.split(":").slice(-1).join(""),chainId:h.p.iss.split(":").slice(2,4).join(":"),uri:h.p.aud,version:h.p.version||i.version,expirationTime:h.p.exp,issuedAt:h.p.iat,notBefore:h.p.nbf},message:d,signature:h.s.s,cacao:h}});try{await n.setSessions(l),Ot.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:up.getSIWXEventProperties()})}catch(h){throw console.error("SIWX:universalProviderAuth - failed to set sessions",h),Ot.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:up.getSIWXEventProperties()}),await t.disconnect().catch(console.error),h}finally{Vr.hide()}}return!0},getSIWXEventProperties(){var e,r;const t=$.state.activeChain;return{network:((e=$.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((r=_e.state.preferredAccountTypes)==null?void 0:r[t])===gr.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Dt=Zt({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),PQ={state:Dt,subscribe(t){return hn(Dt,()=>t(Dt))},setLastNetworkInView(t){Dt.lastNetworkInView=t},async fetchTransactions(t,e){var r,n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Dt.loading=!0;try{const s=await ke.fetchTransactions({account:t,cursor:Dt.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(r=$.state.activeCaipNetwork)==null?void 0:r.caipNetworkId}),i=this.filterSpamTransactions(s.data),o=this.filterByConnectedChain(i),a=[...Dt.transactions,...o];Dt.loading=!1,e==="coinbase"?Dt.coinbaseTransactions=this.groupTransactionsByYearAndMonth(Dt.coinbaseTransactions,s.data):(Dt.transactions=a,Dt.transactionsByYear=this.groupTransactionsByYearAndMonth(Dt.transactionsByYear,o)),Dt.empty=a.length===0,Dt.next=s.next?s.next:void 0}catch{const i=$.state.activeChain;Ot.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ue.state.projectId,cursor:Dt.next,isSmartAccount:((n=_e.state.preferredAccountTypes)==null?void 0:n[i])===gr.ACCOUNT_TYPES.SMART_ACCOUNT}}),Vr.showError("Failed to fetch transactions"),Dt.loading=!1,Dt.empty=!0,Dt.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const r=t;return e.forEach(n=>{const s=new Date(n.metadata.minedAt).getFullYear(),i=new Date(n.metadata.minedAt).getMonth(),o=r[s]??{},c=(o[i]??[]).filter(u=>u.id!==n.id);r[s]={...o,[i]:[...c,n].sort((u,l)=>new Date(l.metadata.minedAt).getTime()-new Date(u.metadata.minedAt).getTime())}}),r},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(n=>{var s;return((s=n.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var n;const e=(n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Dt.next=void 0},resetTransactions(){Dt.transactions=[],Dt.transactionsByYear={},Dt.lastNetworkInView=void 0,Dt.loading=!1,Dt.empty=!1,Dt.next=void 0}},Ut=Zt({wcError:!1,buffering:!1,status:"disconnected"});let ql;const Bt={state:Ut,subscribeKey(t,e){return Xn(Ut,t,e)},_getClient(){return Ut._client},setClient(t){Ut._client=Wu(t)},async connectWalletConnect(){var t,e,r,n;if(De.isTelegram()||De.isSafari()&&De.isIos()){if(ql){await ql,ql=void 0;return}if(!De.isPairingExpired(Ut==null?void 0:Ut.wcPairingExpiry)){const s=Ut.wcUri;Ut.wcUri=s;return}ql=(e=(t=this._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),this.state.status="connecting",await ql,ql=void 0,Ut.wcPairingExpiry=void 0,this.state.status="connected"}else await((n=(r=this._getClient())==null?void 0:r.connectWalletConnect)==null?void 0:n.call(r))},async connectExternal(t,e,r=!0){var n,s;await((s=(n=this._getClient())==null?void 0:n.connectExternal)==null?void 0:s.call(n,t)),r&&$.setActiveNamespace(e)},async reconnectExternal(t){var r,n;await((n=(r=this._getClient())==null?void 0:r.reconnectExternal)==null?void 0:n.call(r,t));const e=t.chain||$.state.activeChain;e&&Me.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var n;ar.setLoading(!0,$.state.activeChain);const r=Me.getAuthConnector();r&&(_e.setPreferredAccountType(t,e),await r.provider.setPreferredAccount(t),be.setPreferredAccountTypes(_e.state.preferredAccountTypes??{[e]:t}),await this.reconnectExternal(r),ar.setLoading(!1,$.state.activeChain),Ot.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=this._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var r;return(r=this._getClient())==null?void 0:r.parseUnits(t,e)},formatUnits(t,e){var r;return(r=this._getClient())==null?void 0:r.formatUnits(t,e)},async sendTransaction(t){var e;return(e=this._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=this._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=this._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=this._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=this._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=this._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=this._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=this._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,r;return((r=(e=this._getClient())==null?void 0:e.checkInstalled)==null?void 0:r.call(e,t))||!1},resetWcConnection(){Ut.wcUri=void 0,Ut.wcPairingExpiry=void 0,Ut.wcLinking=void 0,Ut.recentWallet=void 0,Ut.status="disconnected",PQ.resetTransactions(),be.deleteWalletConnectDeepLink()},resetUri(){Ut.wcUri=void 0,Ut.wcPairingExpiry=void 0},finalizeWcConnection(){var r,n;const{wcLinking:t,recentWallet:e}=Bt.state;t&&be.setWalletConnectDeepLink(t),e&&be.setAppKitRecent(e),Ot.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((n=(r=wt.state.data)==null?void 0:r.wallet)==null?void 0:n.name)||"Unknown"}})},setWcBasic(t){Ut.wcBasic=t},setUri(t){Ut.wcUri=t,Ut.wcPairingExpiry=De.getPairingExpiry()},setWcLinking(t){Ut.wcLinking=t},setWcError(t){Ut.wcError=t,Ut.buffering=!1},setRecentWallet(t){Ut.recentWallet=t},setBuffering(t){Ut.buffering=t},setStatus(t){Ut.status=t},async disconnect(t){try{ar.setLoading(!0,t),await up.clearSessions(),await $.disconnect(t),ar.setLoading(!1,t),Me.setFilterByNamespace(void 0)}catch{throw new Error("Failed to disconnect")}}},Wl=Zt({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),co={state:Wl,subscribe(t){return hn(Wl,()=>t(Wl))},subscribeOpen(t){return Xn(Wl,"open",t)},set(t){Object.assign(Wl,{...Wl,...t})}};function kQ(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function qT(t){return kQ(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const dk="2.28.0";let xf={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${dk}`};class _s extends Error{constructor(e,r={}){var a;const n=(()=>{var c;return r.cause instanceof _s?r.cause.details:(c=r.cause)!=null&&c.message?r.cause.message:r.details})(),s=r.cause instanceof _s&&r.cause.docsPath||r.docsPath,i=(a=xf.getDocsUrl)==null?void 0:a.call(xf,{...r,docsPath:s}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...n?[`Details: ${n}`]:[],...xf.version?[`Version: ${xf.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=s,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=dk}walk(e){return fk(this,e)}}function fk(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?fk(t.cause,e):e?null:t}class pk extends _s{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}function t1(t,{dir:e,size:r=32}={}){return typeof t=="string"?DQ(t,{dir:e,size:r}):UQ(t,{dir:e,size:r})}function DQ(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new pk({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function UQ(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new pk({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let s=0;s<r;s++){const i=e==="right";n[i?s:r-s-1]=t[i?s:t.length-s-1]}return n}class BQ extends _s{constructor({max:e,min:r,signed:n,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class $Q extends _s{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function gk(t,{size:e}){if(qT(t)>e)throw new $Q({givenSize:qT(t),maxSize:e})}const LQ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function WT(t,e={}){return typeof t=="number"||typeof t=="bigint"?FQ(t,e):typeof t=="string"?yk(t,e):typeof t=="boolean"?MQ(t,e):mk(t,e)}function MQ(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(gk(r,{size:e.size}),t1(r,{size:e.size})):r}function mk(t,e={}){let r="";for(let s=0;s<t.length;s++)r+=LQ[t[s]];const n=`0x${r}`;return typeof e.size=="number"?(gk(n,{size:e.size}),t1(n,{dir:"right",size:e.size})):n}function FQ(t,e={}){const{signed:r,size:n}=e,s=BigInt(t);let i;n?r?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&r?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new BQ({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?t1(a,{size:n}):a}const jQ=new TextEncoder;function yk(t,e={}){const r=jQ.encode(t);return mk(r,e)}class zQ extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const Bu=(t,e,r)=>JSON.stringify(t,(n,s)=>typeof s=="bigint"?s.toString():s,r);function HQ(t,e){let r=t.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(e,"0");let[s,i]=[r.slice(0,r.length-e),r.slice(r.length-e)];return i=i.replace(/(0+)$/,""),`${n?"-":""}${s||"0"}${i?`.${i}`:""}`}const r1=t=>t;class lp extends _s{constructor({body:e,cause:r,details:n,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:r,details:n,metaMessages:[i&&`Status: ${i}`,`URL: ${r1(o)}`,e&&`Request body: ${Bu(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class wk extends _s{constructor({body:e,error:r,url:n}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${r1(n)}`,`Request body: ${Bu(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code,this.data=r.data}}class VT extends _s{constructor({body:e,url:r}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${r1(r)}`,`Request body: ${Bu(e)}`],name:"TimeoutError"})}}const qQ=-1;class ts extends _s{constructor(e,{code:r,docsPath:n,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof wk?e.code:r??qQ}}class xs extends ts{constructor(e,r){super(e,r),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r.data}}class kp extends ts{constructor(e){super(e,{code:kp.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(kp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Dp extends ts{constructor(e){super(e,{code:Dp.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Dp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Up extends ts{constructor(e,{method:r}={}){super(e,{code:Up.code,name:"MethodNotFoundRpcError",shortMessage:`The method${r?` "${r}"`:""} does not exist / is not available.`})}}Object.defineProperty(Up,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Bp extends ts{constructor(e){super(e,{code:Bp.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Bp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class wd extends ts{constructor(e){super(e,{code:wd.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(wd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class $p extends ts{constructor(e){super(e,{code:$p.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty($p,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Lp extends ts{constructor(e){super(e,{code:Lp.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Lp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Mp extends ts{constructor(e){super(e,{code:Mp.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Mp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class bd extends ts{constructor(e){super(e,{code:bd.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(bd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class nu extends ts{constructor(e,{method:r}={}){super(e,{code:nu.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${r?` "${r}"`:""} is not supported.`})}}Object.defineProperty(nu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class vd extends ts{constructor(e){super(e,{code:vd.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(vd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Fp extends ts{constructor(e){super(e,{code:Fp.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Fp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class $u extends xs{constructor(e){super(e,{code:$u.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty($u,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class jp extends xs{constructor(e){super(e,{code:jp.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(jp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class zp extends xs{constructor(e,{method:r}={}){super(e,{code:zp.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${r?` " ${r}"`:""}.`})}}Object.defineProperty(zp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Hp extends xs{constructor(e){super(e,{code:Hp.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Hp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class qp extends xs{constructor(e){super(e,{code:qp.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(qp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Wp extends xs{constructor(e){super(e,{code:Wp.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Wp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Vp extends xs{constructor(e){super(e,{code:Vp.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Vp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Gp extends xs{constructor(e){super(e,{code:Gp.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Gp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Kp extends xs{constructor(e){super(e,{code:Kp.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Kp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Jp extends xs{constructor(e){super(e,{code:Jp.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Jp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Yp extends xs{constructor(e){super(e,{code:Yp.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Yp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Qp extends xs{constructor(e){super(e,{code:Qp.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Qp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Zp extends xs{constructor(e){super(e,{code:Zp.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Zp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class WQ extends ts{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}class n1 extends _s{constructor({cause:e,message:r}={}){var s;const n=(s=r==null?void 0:r.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(n1,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(n1,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});function VQ(){let t=()=>{},e=()=>{};return{promise:new Promise((n,s)=>{t=n,e=s}),resolve:t,reject:e}}const hv=new Map;function GQ({fn:t,id:e,shouldSplitBatch:r,wait:n=0,sort:s}){const i=async()=>{const l=c();o();const h=l.map(({args:d})=>d);h.length!==0&&t(h).then(d=>{s&&Array.isArray(d)&&d.sort(s);for(let f=0;f<l.length;f++){const{resolve:p}=l[f];p==null||p([d[f],d])}}).catch(d=>{for(let f=0;f<l.length;f++){const{reject:p}=l[f];p==null||p(d)}})},o=()=>hv.delete(e),a=()=>c().map(({args:l})=>l),c=()=>hv.get(e)||[],u=l=>hv.set(e,[...c(),l]);return{flush:o,async schedule(l){const{promise:h,resolve:d,reject:f}=VQ();return(r==null?void 0:r([...a(),l]))&&i(),c().length>0?(u({args:l,resolve:d,reject:f}),h):(u({args:l,resolve:d,reject:f}),setTimeout(i,n),h)}}}async function bk(t){return new Promise(e=>setTimeout(e,t))}const n_=256;let Qm=n_,Zm;function KQ(t=11){if(!Zm||Qm+t>n_*2){Zm="",Qm=0;for(let e=0;e<n_;e++)Zm+=(256+Math.random()*256|0).toString(16).substring(1)}return Zm.substring(Qm,Qm+++t)}const Xm=new zQ(8192);function JQ(t,{enabled:e=!0,id:r}){if(!e||!r)return t();if(Xm.get(r))return Xm.get(r);const n=t().finally(()=>Xm.delete(r));return Xm.set(r,n),n}function YQ(t,{delay:e=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:u})=>{const l=typeof e=="function"?e({count:a,error:u}):e;l&&await bk(l),o({count:a+1})};try{const u=await t();s(u)}catch(u){if(a<r&&await n({count:a,error:u}))return c({error:u});i(u)}};o()})}function QQ(t,e={}){return async(r,n={})=>{var h;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...n},{method:u}=r;if((h=i==null?void 0:i.exclude)!=null&&h.includes(u))throw new nu(new Error("method not supported"),{method:u});if(i!=null&&i.include&&!i.include.includes(u))throw new nu(new Error("method not supported"),{method:u});const l=s?yk(`${c}.${Bu(r)}`):void 0;return JQ(()=>YQ(async()=>{try{return await t(r)}catch(d){const f=d;switch(f.code){case kp.code:throw new kp(f);case Dp.code:throw new Dp(f);case Up.code:throw new Up(f,{method:r.method});case Bp.code:throw new Bp(f);case wd.code:throw new wd(f);case $p.code:throw new $p(f);case Lp.code:throw new Lp(f);case Mp.code:throw new Mp(f);case bd.code:throw new bd(f);case nu.code:throw new nu(f,{method:r.method});case vd.code:throw new vd(f);case Fp.code:throw new Fp(f);case $u.code:throw new $u(f);case jp.code:throw new jp(f);case zp.code:throw new zp(f);case Hp.code:throw new Hp(f);case qp.code:throw new qp(f);case Wp.code:throw new Wp(f);case Vp.code:throw new Vp(f);case Gp.code:throw new Gp(f);case Kp.code:throw new Kp(f);case Jp.code:throw new Jp(f);case Yp.code:throw new Yp(f);case Qp.code:throw new Qp(f);case Zp.code:throw new Zp(f);case 5e3:throw new $u(f);default:throw d instanceof _s?d:new WQ(f)}}},{delay:({count:d,error:f})=>{var p;if(f&&f instanceof lp){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<d)*o},retryCount:a,shouldRetry:({error:d})=>ZQ(d)}),{enabled:s,id:l})}}function ZQ(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===vd.code||t.code===wd.code:t instanceof lp&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function vk({key:t,methods:e,name:r,request:n,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const u=KQ();return{config:{key:t,methods:e,name:r,request:n,retryCount:s,retryDelay:i,timeout:o,type:a},request:QQ(n,{methods:e,retryCount:s,retryDelay:i,uid:u}),value:c}}function GT(t,e={}){const{key:r="fallback",name:n="Fallback",rank:s=!1,shouldThrow:i=XQ,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:u=4e3,timeout:l,...h})=>{let d=t,f=()=>{};const p=vk({key:r,name:n,async request({method:g,params:m}){let w;const v=async(E=0)=>{const A=d[E]({...h,chain:c,retryCount:0,timeout:l});try{const S=await A.request({method:g,params:m});return f({method:g,params:m,response:S,transport:A,status:"success"}),S}catch(S){if(f({error:S,method:g,params:m,transport:A,status:"error"}),i(S)||E===d.length-1||(w??(w=d.slice(E+1).some(C=>{const{include:T,exclude:O}=C({chain:c}).config.methods||{};return T?T.includes(g):O?!O.includes(g):!0})),!w))throw S;return v(E+1)}};return v()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:d.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};eZ({chain:c,interval:g.interval??u,onTransports:m=>d=m,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:d,weights:g.weights})}return p}}function XQ(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===bd.code||t.code===$u.code||n1.nodeMessage.test(t.message)||t.code===5e3))}function eZ({chain:t,interval:e=4e3,onTransports:r,ping:n,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:u=.3}=a,l=[],h=async()=>{const d=await Promise.all(o.map(async g=>{const m=g({chain:t,retryCount:0,timeout:i}),w=Date.now();let v,E;try{await(n?n({transport:m}):m.request({method:"net_listening"})),E=1}catch{E=0}finally{v=Date.now()}return{latency:v-w,success:E}}));l.push(d),l.length>s&&l.shift();const f=Math.max(...l.map(g=>Math.max(...g.map(({latency:m})=>m)))),p=o.map((g,m)=>{const w=l.map(C=>C[m].latency),E=1-w.reduce((C,T)=>C+T,0)/w.length/f,A=l.map(C=>C[m].success),S=A.reduce((C,T)=>C+T,0)/A.length;return S===0?[0,m]:[u*E+c*S,m]}).sort((g,m)=>m[0]-g[0]);r(p.map(([,g])=>o[g])),await bk(e),h()};h()}class tZ extends _s{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function rZ(t,{errorInstance:e=new Error("timed out"),timeout:r,signal:n}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;r>0&&(o=setTimeout(()=>{n&&a.abort()},r)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function nZ(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const KT=nZ();function sZ(t,e={}){return{async request(r){var h;const{body:n,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=r,a={...e.fetchOptions??{},...r.fetchOptions??{}},{headers:c,method:u,signal:l}=a;try{const d=await rZ(async({signal:p})=>{const g={...a,body:Array.isArray(n)?Bu(n.map(E=>({jsonrpc:"2.0",id:E.id??KT.take(),...E}))):Bu({jsonrpc:"2.0",id:n.id??KT.take(),...n}),headers:{"Content-Type":"application/json",...c},method:u||"POST",signal:l||(o>0?p:null)},m=new Request(t,g),w=await(s==null?void 0:s(m,g))??{...g,url:t};return await fetch(w.url??t,w)},{errorInstance:new VT({body:n,url:t}),timeout:o,signal:!0});i&&await i(d);let f;if((h=d.headers.get("Content-Type"))!=null&&h.startsWith("application/json"))f=await d.json();else{f=await d.text();try{f=JSON.parse(f||"{}")}catch(p){if(d.ok)throw p;f={error:f}}}if(!d.ok)throw new lp({body:n,details:Bu(f.error)||d.statusText,headers:d.headers,status:d.status,url:t});return f}catch(d){throw d instanceof lp||d instanceof VT?d:new lp({body:n,cause:d,url:t})}}}}function ey(t,e={}){const{batch:r,fetchOptions:n,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:u,raw:l}=e;return({chain:h,retryCount:d,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof r=="object"?r:{},m=e.retryCount??d,w=f??e.timeout??1e4,v=t||(h==null?void 0:h.rpcUrls.default.http[0]);if(!v)throw new tZ;const E=sZ(v,{fetchOptions:n,onRequest:a,onResponse:c,timeout:w});return vk({key:s,methods:i,name:o,async request({method:A,params:S}){const C={method:A,params:S},{schedule:T}=GQ({id:v,wait:g,shouldSplitBatch(L){return L.length>p},fn:L=>E.request({body:L}),sort:(L,Q)=>L.id-Q.id}),O=async L=>r?T(L):[await E.request({body:L})],[{error:P,result:B}]=await O(C);if(l)return{error:P,result:B};if(P)throw new wk({body:C,error:P,url:v});return B},retryCount:m,retryDelay:u,timeout:w,type:"http"},{fetchOptions:n,url:v})}}function iZ(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const dv={createBalance(t,e){const r={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return HQ(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const r=e[1],n=parseInt(r,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(r=>this.isValidAsset(r)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},JT={async getMyTokensWithBalance(t){const e=_e.state.address,r=$.state.activeCaipNetwork;if(!e||!r)return[];if(r.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,r);if(s)return this.filterLowQualityTokens(s)}const n=await ke.getBalance(e,r.caipNetworkId,t);return this.filterLowQualityTokens(n.balances)},async getEIP155Balances(t,e){var r,n;try{const s=dv.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await Bt.getCapabilities(t);if(!((n=(r=i==null?void 0:i[s])==null?void 0:r.assetDiscovery)!=null&&n.supported))return null;const o=await Bt.walletGetAssets({account:t,chainFilter:[s]});return dv.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>dv.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:$.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},tt=Zt({tokenBalances:[],loading:!1}),YT={state:tt,subscribe(t){return hn(tt,()=>t(tt))},subscribeKey(t,e){return Xn(tt,t,e)},setToken(t){t&&(tt.token=Wu(t))},setTokenAmount(t){tt.sendTokenAmount=t},setReceiverAddress(t){tt.receiverAddress=t},setReceiverProfileImageUrl(t){tt.receiverProfileImageUrl=t},setReceiverProfileName(t){tt.receiverProfileName=t},setGasPrice(t){tt.gasPrice=t},setGasPriceInUsd(t){tt.gasPriceInUSD=t},setNetworkBalanceInUsd(t){tt.networkBalanceInUSD=t},setLoading(t){tt.loading=t},sendToken(){var t;switch((t=$.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":this.sendEvmToken();return;case"solana":this.sendSolanaToken();return;default:throw new Error("Unsupported chain")}},sendEvmToken(){var r,n,s,i,o,a;const t=$.state.activeChain,e=(r=_e.state.preferredAccountTypes)==null?void 0:r[t];(n=this.state.token)!=null&&n.address&&this.state.sendTokenAmount&&this.state.receiverAddress?(Ot.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===gr.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token.address,amount:this.state.sendTokenAmount,network:((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),this.sendERC20Token({receiverAddress:this.state.receiverAddress,tokenAddress:this.state.token.address,sendTokenAmount:this.state.sendTokenAmount,decimals:this.state.token.quantity.decimals})):this.state.receiverAddress&&this.state.sendTokenAmount&&this.state.gasPrice&&((i=this.state.token)!=null&&i.quantity.decimals)&&(Ot.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===gr.ACCOUNT_TYPES.SMART_ACCOUNT,token:(o=this.state.token)==null?void 0:o.symbol,amount:this.state.sendTokenAmount,network:((a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),this.sendNativeToken({receiverAddress:this.state.receiverAddress,sendTokenAmount:this.state.sendTokenAmount,gasPrice:this.state.gasPrice,decimals:this.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;tt.loading=!0;const e=(i=$.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,r=(o=$.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=$.state.activeCaipAddress,s=n?De.getPlainAddress(n):void 0;if(tt.lastRetry&&!De.isAllowedRetry(tt.lastRetry,30*cn.ONE_SEC_MS))return tt.loading=!1,[];try{if(s&&e&&r){const a=await JT.getMyTokensWithBalance();return tt.tokenBalances=a,tt.lastRetry=void 0,a}}catch(a){tt.lastRetry=Date.now(),t==null||t(a),Vr.showError("Token Balance Unavailable")}finally{tt.loading=!1}return[]},fetchNetworkBalance(){if(tt.tokenBalances.length===0)return;const t=JT.mapBalancesToSwapTokens(tt.tokenBalances);if(!t)return;const e=t.find(r=>r.address===$.getActiveNetworkTokenAddress());e&&(tt.networkBalanceInUSD=e?km.multiply(e.quantity.numeric,e.price).toString():"0")},isInsufficientNetworkTokenForGas(t,e){const r=e||"0";return km.bigNumber(t).eq(0)?!0:km.bigNumber(km.bigNumber(r)).gt(t)},hasInsufficientGasFunds(){var r;const t=$.state.activeChain;let e=!0;return((r=_e.state.preferredAccountTypes)==null?void 0:r[t])===gr.ACCOUNT_TYPES.SMART_ACCOUNT?e=!1:tt.networkBalanceInUSD&&(e=this.isInsufficientNetworkTokenForGas(tt.networkBalanceInUSD,tt.gasPriceInUSD)),e},async sendNativeToken(t){var o,a,c,u,l,h;const e=$.state.activeChain;wt.pushTransactionStack({view:"Account",goBack:!1});const r=t.receiverAddress,n=_e.state.address,s=Bt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),i="0x";try{await Bt.sendTransaction({chainNamespace:"eip155",to:r,address:n,data:i,value:s??BigInt(0),gasPrice:t.gasPrice}),Vr.showSuccess("Transaction started"),Ot.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((o=_e.state.preferredAccountTypes)==null?void 0:o[e])===gr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((a=this.state.token)==null?void 0:a.symbol)||"",amount:t.sendTokenAmount,network:((c=$.state.activeCaipNetwork)==null?void 0:c.caipNetworkId)||""}}),this.resetSend()}catch(d){console.error("SendController:sendERC20Token - failed to send native token",d);const f=d instanceof Error?d.message:"Unknown error";Ot.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:f,isSmartAccount:((u=_e.state.preferredAccountTypes)==null?void 0:u[e])===gr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((l=this.state.token)==null?void 0:l.symbol)||"",amount:t.sendTokenAmount,network:((h=$.state.activeCaipNetwork)==null?void 0:h.caipNetworkId)||""}}),Vr.showError("Something went wrong")}},async sendERC20Token(t){var r,n,s;wt.pushTransactionStack({view:"Account",goBack:!1});const e=Bt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));try{if(_e.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const i=De.getPlainAddress(t.tokenAddress);await Bt.writeContract({fromAddress:_e.state.address,tokenAddress:i,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:nM.getERC20Abi(i),chainNamespace:"eip155"}),Vr.showSuccess("Transaction started"),this.resetSend()}}catch(i){console.error("SendController:sendERC20Token - failed to send erc20 token",i);const o=i instanceof Error?i.message:"Unknown error";Ot.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:o,isSmartAccount:((r=_e.state.preferredAccountTypes)==null?void 0:r.eip155)===gr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((n=this.state.token)==null?void 0:n.symbol)||"",amount:t.sendTokenAmount,network:((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),Vr.showError("Something went wrong")}},sendSolanaToken(){if(!this.state.sendTokenAmount||!this.state.receiverAddress){Vr.showError("Please enter a valid amount and receiver address");return}wt.pushTransactionStack({view:"Account",goBack:!1}),Bt.sendTransaction({chainNamespace:"solana",to:this.state.receiverAddress,value:this.state.sendTokenAmount}).then(()=>{this.resetSend(),_e.fetchTokenBalance()}).catch(t=>{Vr.showError("Failed to send transaction. Please try again."),console.error("SendController:sendToken - failed to send solana transaction",t)})},resetSend(){tt.token=void 0,tt.sendTokenAmount=void 0,tt.receiverAddress=void 0,tt.receiverProfileImageUrl=void 0,tt.receiverProfileName=void 0,tt.loading=!1,tt.tokenBalances=[]}},fv={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},ty={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},pe=Zt({chains:qL(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),$={state:pe,subscribe(t){return hn(pe,()=>{t(pe)})},subscribeKey(t,e){return Xn(pe,t,e)},subscribeChainProp(t,e,r){let n;return hn(pe.chains,()=>{var i;const s=r||pe.activeChain;if(s){const o=(i=pe.chains.get(s))==null?void 0:i[t];n!==o&&(n=o,e(o))}})},initialize(t,e,r){const{chainId:n,namespace:s}=be.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(n==null?void 0:n.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(pe.noAdapters=!0),pe.noAdapters||(pe.activeChain=a==null?void 0:a.namespace,pe.activeCaipNetwork=i,this.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),pe.activeChain&&co.set({activeChain:a==null?void 0:a.namespace})),c.forEach(u=>{const l=e==null?void 0:e.filter(h=>h.chainNamespace===u);$.state.chains.set(u,{namespace:u,networkState:Zt({...ty,caipNetwork:l==null?void 0:l[0]}),accountState:Zt(fv),caipNetworks:l??[],...r}),this.setRequestedCaipNetworks(l??[],u)})},removeAdapter(t){var e,r;if(pe.activeChain===t){const n=Array.from(pe.chains.entries()).find(([s])=>s!==t);if(n){const s=(r=(e=n[1])==null?void 0:e.caipNetworks)==null?void 0:r[0];s&&this.setActiveCaipNetwork(s)}}pe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:r},n){pe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...ty,caipNetwork:n[0]},accountState:fv,caipNetworks:n,connectionControllerClient:r,networkControllerClient:e}),this.setRequestedCaipNetworks((n==null?void 0:n.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var r;const e=pe.chains.get(t.chainNamespace);if(e){const n=[...e.caipNetworks||[]];(r=e.caipNetworks)!=null&&r.find(s=>s.id===t.id)||n.push(t),pe.chains.set(t.chainNamespace,{...e,caipNetworks:n}),this.setRequestedCaipNetworks(n,t.chainNamespace)}},removeNetwork(t,e){var n,s,i;const r=pe.chains.get(t);if(r){const o=((n=pe.activeCaipNetwork)==null?void 0:n.id)===e,a=[...((s=r.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=r==null?void 0:r.caipNetworks)!=null&&i[0])&&this.setActiveCaipNetwork(r.caipNetworks[0]),pe.chains.set(t,{...r,caipNetworks:a}),this.setRequestedCaipNetworks(a||[],t)}},setAdapterNetworkState(t,e){const r=pe.chains.get(t);r&&(r.networkState={...r.networkState||ty,...e},pe.chains.set(t,r))},setChainAccountData(t,e,r=!0){if(!t)throw new Error("Chain is required to update chain account data");const n=pe.chains.get(t);if(n){const s={...n.accountState||fv,...e};pe.chains.set(t,{...n,accountState:s}),(pe.chains.size===1||pe.activeChain===t)&&(e.caipAddress&&(pe.activeCaipAddress=e.caipAddress),_e.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const r=pe.chains.get(t);if(r){const n={...r.networkState||ty,...e};pe.chains.set(t,{...r,networkState:n})}},setAccountProp(t,e,r,n=!0){this.setChainAccountData(r,{[t]:e},n),t==="status"&&e==="disconnected"&&r&&Me.removeConnectorId(r)},setActiveNamespace(t){var n,s;pe.activeChain=t;const e=t?pe.chains.get(t):void 0,r=(n=e==null?void 0:e.networkState)==null?void 0:n.caipNetwork;r!=null&&r.id&&t&&(pe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,pe.activeCaipNetwork=r,this.setChainNetworkData(t,{caipNetwork:r}),be.setActiveCaipNetworkId(r==null?void 0:r.caipNetworkId),co.set({activeChain:t,selectedNetworkId:r==null?void 0:r.caipNetworkId}))},setActiveCaipNetwork(t){var n,s,i;if(!t)return;pe.activeChain!==t.chainNamespace&&this.setIsSwitchingNamespace(!0);const e=pe.chains.get(t.chainNamespace);pe.activeChain=t.chainNamespace,pe.activeCaipNetwork=t,this.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(n=e==null?void 0:e.accountState)!=null&&n.address?pe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:pe.activeCaipAddress=void 0,this.setAccountProp("caipAddress",pe.activeCaipAddress,t.chainNamespace),e&&_e.replaceState(e.accountState),YT.resetSend(),co.set({activeChain:pe.activeChain,selectedNetworkId:(i=pe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),be.setActiveCaipNetworkId(t.caipNetworkId),!this.checkIfSupportedNetwork(t.chainNamespace)&&ue.state.enableNetworkSwitch&&!ue.state.allowUnsupportedChain&&!Bt.state.wcBasic&&this.showUnsupportedChainUI()},addCaipNetwork(t){var r;if(!t)return;const e=pe.chains.get(t.chainNamespace);e&&((r=e==null?void 0:e.caipNetworks)==null||r.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==$.state.activeChain,r=(s=$.getNetworkData(t))==null?void 0:s.caipNetwork,n=$.getCaipNetworkByNamespace(t,r==null?void 0:r.id);e&&n&&await $.switchActiveNetwork(n)},async switchActiveNetwork(t){var s;const e=$.state.chains.get($.state.activeChain);!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=pe.activeCaipNetwork)==null?void 0:o.id)}))&&wt.goBack();const n=this.getNetworkControllerClient(t.chainNamespace);n&&(await n.switchCaipNetwork(t),Ot.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}}))},getNetworkControllerClient(t){const e=t||pe.activeChain,r=pe.chains.get(e);if(!r)throw new Error("Chain adapter not found");if(!r.networkControllerClient)throw new Error("NetworkController client not set");return r.networkControllerClient},getConnectionControllerClient(t){const e=t||pe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const r=pe.chains.get(e);if(!(r!=null&&r.connectionControllerClient))throw new Error("ConnectionController client not set");return r.connectionControllerClient},getAccountProp(t,e){var s;let r=pe.activeChain;if(e&&(r=e),!r)return;const n=(s=pe.chains.get(r))==null?void 0:s.accountState;if(n)return n[t]},getNetworkProp(t,e){var n;const r=(n=pe.chains.get(e))==null?void 0:n.networkState;if(r)return r[t]},getRequestedCaipNetworks(t){const e=pe.chains.get(t),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:n=[]}=(e==null?void 0:e.networkState)||{};return De.sortRequestedNetworks(r,n)},getAllRequestedCaipNetworks(){const t=[];return pe.chains.forEach(e=>{const r=this.getRequestedCaipNetworks(e.namespace);t.push(...r)}),t},setRequestedCaipNetworks(t,e){this.setAdapterNetworkState(e,{requestedCaipNetworks:t})},getAllApprovedCaipNetworkIds(){const t=[];return pe.chains.forEach(e=>{const r=this.getApprovedCaipNetworkIds(e.namespace);t.push(...r)}),t},getActiveCaipNetwork(){return pe.activeCaipNetwork},getActiveCaipAddress(){return pe.activeCaipAddress},getApprovedCaipNetworkIds(t){var n;const e=pe.chains.get(t);return((n=e==null?void 0:e.networkState)==null?void 0:n.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=this.getNetworkControllerClient(),r=await(e==null?void 0:e.getApprovedCaipNetworksData());this.setAdapterNetworkState(t,{approvedCaipNetworkIds:r==null?void 0:r.approvedCaipNetworkIds,supportsAllNetworks:r==null?void 0:r.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const r=e||pe.activeCaipNetwork,n=this.getRequestedCaipNetworks(t);return n.length?n==null?void 0:n.some(s=>s.id===(r==null?void 0:r.id)):!0},checkIfSupportedChainId(t){if(!pe.activeChain)return!0;const e=this.getRequestedCaipNetworks(pe.activeChain);return e==null?void 0:e.some(r=>r.id===t)},setSmartAccountEnabledNetworks(t,e){this.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var n;const t=$2.caipNetworkIdToNumber((n=pe.activeCaipNetwork)==null?void 0:n.caipNetworkId),e=pe.activeChain;if(!e||!t)return!1;const r=this.getNetworkProp("smartAccountEnabledNetworks",e);return!!(r!=null&&r.includes(Number(t)))},getActiveNetworkTokenAddress(){var n,s;const t=((n=pe.activeCaipNetwork)==null?void 0:n.chainNamespace)||"eip155",e=((s=pe.activeCaipNetwork)==null?void 0:s.id)||1,r=cn.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${r}`},showUnsupportedChainUI(){ar.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=pe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&cn.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){this.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");pe.activeCaipAddress=void 0,this.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),Me.removeConnectorId(e)},async disconnect(t){const e=gM(t);try{YT.resetSend();const r=await Promise.allSettled(e.map(async([s,i])=>{var o;try{const{caipAddress:a}=this.getAccountData(s)||{};a&&((o=i.connectionControllerClient)!=null&&o.disconnect)&&await i.connectionControllerClient.disconnect(s),this.resetAccount(s),this.resetNetwork(s)}catch(a){throw new Error(`Failed to disconnect chain ${s}: ${a.message}`)}}));Bt.resetWcConnection();const n=r.filter(s=>s.status==="rejected");if(n.length>0)throw new Error(n.map(s=>s.reason.message).join(", "));be.deleteConnectedSocialProvider(),t?Me.removeConnectorId(t):Me.resetConnectorIds(),Ot.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:t||"all"}})}catch(r){console.error(r.message||"Failed to disconnect chains"),Ot.sendEvent({type:"track",event:"DISCONNECT_ERROR",properties:{message:r.message||"Failed to disconnect chains"}})}},setIsSwitchingNamespace(t){pe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var r,n;const t=[];let e;if(pe.chains.forEach(s=>{le.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(n=(r=pe.chains.get(s))==null?void 0:r.caipNetworks)==null?void 0:n[0]:void 0,e}},getAccountData(t){var e;return t?(e=$.state.chains.get(t))==null?void 0:e.accountState:_e.state},getNetworkData(t){var r;const e=t||pe.activeChain;if(e)return(r=$.state.chains.get(e))==null?void 0:r.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const r=$.state.chains.get(t),n=(s=r==null?void 0:r.caipNetworks)==null?void 0:s.find(a=>a.id===e);return n||((i=r==null?void 0:r.networkState)==null?void 0:i.caipNetwork)||((o=r==null?void 0:r.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Me.state.filterByNamespace;return(t?[pe.chains.get(t)]:Array.from(pe.chains.values())).flatMap(r=>(r==null?void 0:r.caipNetworks)||[]).map(r=>r.caipNetworkId)},getCaipNetworks(t){return t?$.getRequestedCaipNetworks(t):$.getAllRequestedCaipNetworks()}},oZ={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},Ek=De.getBlockchainApiUrl(),is=Zt({clientId:null,api:new o0({baseUrl:Ek,clientId:null}),supportedChains:{http:[],ws:[]}}),ke={state:is,async get(t){const{st:e,sv:r}=ke.getSdkProperties(),n=ue.state.projectId,s={...t.params||{},st:e,sv:r,projectId:n};return is.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ue.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{is.supportedChains.http.length||await ke.getSupportedNetworks()}catch{return!1}return is.supportedChains.http.includes(t)},async getSupportedNetworks(){const t=await ke.get({path:"v1/supported-chains"});return is.supportedChains=t,t},async fetchIdentity({address:t,caipNetworkId:e}){if(!await ke.isNetworkSupported(e))return{avatar:"",name:""};const n=be.getIdentityFromCacheForAddress(t);if(n)return n;const s=await ke.get({path:`/v1/identity/${t}`,params:{sender:$.state.activeCaipAddress?De.getPlainAddress($.state.activeCaipAddress):void 0}});return be.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:r,signal:n,cache:s,chainId:i}){var a;return await ke.isNetworkSupported((a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?ke.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:r,chainId:i},signal:n,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:r,to:n,gasPrice:s}){var o;return await ke.isNetworkSupported((o=$.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?ke.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:r,to:n,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var r;return await ke.isNetworkSupported((r=$.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?ke.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var r;return await ke.isNetworkSupported((r=$.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?is.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ue.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var n;return await ke.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ke.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:r}=ke.getSdkProperties();if(!await ke.isNetworkSupported((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return ke.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:r}})},async generateSwapCalldata({amount:t,from:e,to:r,userAddress:n,disableEstimate:s}){var o;if(!await ke.isNetworkSupported((o=$.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return is.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:cn.CONVERT_SLIPPAGE_TOLERANCE},projectId:ue.state.projectId,from:e,to:r,userAddress:n,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:r}){var o;const{st:n,sv:s}=ke.getSdkProperties();if(!await ke.isNetworkSupported((o=$.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return ke.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:t,to:e,st:n,sv:s}})},async getBalance(t,e,r){var u;const{st:n,sv:s}=ke.getSdkProperties();if(!await ke.isNetworkSupported((u=$.state.activeCaipNetwork)==null?void 0:u.caipNetworkId))return Vr.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=be.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await ke.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:r,st:n,sv:s}});return be.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var r;return await ke.isNetworkSupported((r=$.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?ke.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var r;return await ke.isNetworkSupported((r=$.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?ke.get({path:`/v1/profile/reverse/${t}`,params:{sender:_e.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var r;return await ke.isNetworkSupported((r=$.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?ke.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:r,signature:n}){var i;return await ke.isNetworkSupported((i=$.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?is.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:r,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:r,purchaseAmount:n,paymentAmount:s}){var a;return await ke.isNetworkSupported((a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await is.api.post({path:"/v1/generators/onrampurl",params:{projectId:ue.state.projectId},body:{destinationWallets:t,defaultNetwork:r,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await ke.isNetworkSupported((e=$.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await ke.get({path:"/v1/onramp/options"})}catch{return oZ}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}){var s;try{return await ke.isNetworkSupported((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await is.api.post({path:"/v1/onramp/quote",params:{projectId:ue.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}}):null}catch{return{coinbaseFee:{amount:r,currency:e.id},networkFee:{amount:r,currency:e.id},paymentSubtotal:{amount:r,currency:e.id},paymentTotal:{amount:r,currency:e.id},purchaseAmount:{amount:r,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var r;return await ke.isNetworkSupported((r=$.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?ke.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,r){var s;return await ke.isNetworkSupported((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?is.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ue.state.projectId},body:{pci:e,signature:r}}):{success:!1}},setClientId(t){is.clientId=t,is.api=new o0({baseUrl:Ek,clientId:t})}},Ds=Zt({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),_e={state:Ds,replaceState(t){t&&Object.assign(Ds,Wu(t))},subscribe(t){return $.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,r){let n;return $.subscribeChainProp("accountState",s=>{if(s){const i=s[t];n!==i&&(n=i,e(i))}},r)},setStatus(t,e){$.setAccountProp("status",t,e)},getCaipAddress(t){return $.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const r=t?De.getPlainAddress(t):void 0;e===$.state.activeChain&&($.state.activeCaipAddress=t),$.setAccountProp("caipAddress",t,e),$.setAccountProp("address",r,e)},setBalance(t,e,r){$.setAccountProp("balance",t,r),$.setAccountProp("balanceSymbol",e,r)},setProfileName(t,e){$.setAccountProp("profileName",t,e)},setProfileImage(t,e){$.setAccountProp("profileImage",t,e)},setUser(t,e){$.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){$.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){$.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){$.setAccountProp("currentTab",t,$.state.activeChain)},setTokenBalance(t,e){t&&$.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){$.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){$.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,r){const n=$.getAccountProp("addressLabels",r)||new Map;n.set(t,e),$.setAccountProp("addressLabels",n,r)},removeAddressLabel(t,e){const r=$.getAccountProp("addressLabels",e)||new Map;r.delete(t),$.setAccountProp("addressLabels",r,e)},setConnectedWalletInfo(t,e){$.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){$.setAccountProp("preferredAccountTypes",{...Ds.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Ds.preferredAccountTypes=t},setSocialProvider(t,e){t&&$.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){$.setAccountProp("socialWindow",t?Wu(t):void 0,e)},setFarcasterUrl(t,e){$.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Ds.balanceLoading=!0;const e=(i=$.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,r=(o=$.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=$.state.activeCaipAddress,s=n?De.getPlainAddress(n):void 0;if(Ds.lastRetry&&!De.isAllowedRetry(Ds.lastRetry,30*cn.ONE_SEC_MS))return Ds.balanceLoading=!1,[];try{if(s&&e&&r){const c=(await ke.getBalance(s,e)).balances.filter(u=>u.quantity.decimals!=="0");return this.setTokenBalance(c,r),Ds.lastRetry=void 0,Ds.balanceLoading=!1,c}}catch(a){Ds.lastRetry=Date.now(),t==null||t(a),Vr.showError("Token Balance Unavailable")}finally{Ds.balanceLoading=!1}return[]},resetAccount(t){$.resetAccount(t)}},$n=Zt({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),ar={state:$n,subscribe(t){return hn($n,()=>t($n))},subscribeKey(t,e){return Xn($n,t,e)},async open(t){var s;const e=_e.state.status==="connected";Bt.state.wcBasic?Ue.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Ue.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),t!=null&&t.namespace?(await $.switchActiveNamespace(t.namespace),ar.setLoading(!0,t.namespace)):ar.setLoading(!0),Me.setFilterByNamespace(t==null?void 0:t.namespace);const r=(s=$.getAccountData(t==null?void 0:t.namespace))==null?void 0:s.caipAddress;$.state.noAdapters&&!r?De.isMobile()?wt.reset("AllWallets"):wt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?wt.reset(t.view,t.data):r?wt.reset("Account"):wt.reset("Connect"),$n.open=!0,co.set({open:!0}),Ot.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!r}})},close(){const t=ue.state.enableEmbedded,e=!!$.state.activeCaipAddress;$n.open&&Ot.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),$n.open=!1,ar.clearLoading(),t?e?wt.replace("Account"):wt.push("Connect"):co.set({open:!1}),Bt.resetUri()},setLoading(t,e){e&&$n.loadingNamespaceMap.set(e,t),$n.loading=t,co.set({loading:t})},clearLoading(){$n.loadingNamespaceMap.clear(),$n.loading=!1},shake(){$n.shake||($n.shake=!0,setTimeout(()=>{$n.shake=!1},500))}},QT=2147483648,aZ={convertEVMChainIdToCoinType(t){if(t>=QT)throw new Error("Invalid chainId");return(QT|t)>>>0}},Us=Zt({suggestions:[],loading:!1}),_k={state:Us,subscribe(t){return hn(Us,()=>t(Us))},subscribeKey(t,e){return Xn(Us,t,e)},async resolveName(t){var e,r;try{return await ke.lookupEnsName(t)}catch(n){const s=n;throw new Error(((r=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:r.description)||"Error resolving name")}},async isNameRegistered(t){try{return await ke.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Us.loading=!0,Us.suggestions=[];const e=await ke.getEnsNameSuggestions(t);return Us.suggestions=e.suggestions.map(r=>({...r,name:r.name}))||[],Us.suggestions}catch(e){const r=this.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(r)}finally{Us.loading=!1}},async getNamesForAddress(t){try{if(!$.state.activeCaipNetwork)return[];const r=be.getEnsFromCacheForAddress(t);if(r)return r;const n=await ke.reverseLookupEnsName({address:t});return be.updateEnsCache({address:t,ens:n,timestamp:Date.now()}),n}catch(e){const r=this.parseEnsApiError(e,"Error fetching names for address");throw new Error(r)}},async registerName(t){const e=$.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const r=_e.state.address,n=Me.getAuthConnector();if(!r||!n)throw new Error("Address or auth connector not found");Us.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});wt.pushTransactionStack({view:"RegisterAccountNameSuccess",goBack:!1,replace:!0,onCancel(){Us.loading=!1}});const i=await Bt.signMessage(s),o=e.id;if(!o)throw new Error("Network not found");const a=aZ.convertEVMChainIdToCoinType(Number(o));await ke.registerEnsName({coinType:a,address:r,signature:i,message:s}),_e.setProfileName(t,e.chainNamespace),wt.replace("RegisterAccountNameSuccess")}catch(s){const i=this.parseEnsApiError(s,`Error registering name ${t}`);throw wt.replace("RegisterAccountName"),new Error(i)}finally{Us.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var n,s;const r=t;return((s=(n=r==null?void 0:r.reasons)==null?void 0:n[0])==null?void 0:s.description)||e}};var pv={exports:{}},gv={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZT;function cZ(){if(ZT)return gv;ZT=1;var t=c2();function e(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,s=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function a(h,d){var f=d(),p=n({inst:{value:f,getSnapshot:d}}),g=p[0].inst,m=p[1];return i(function(){g.value=f,g.getSnapshot=d,c(g)&&m({inst:g})},[h,f,d]),s(function(){return c(g)&&m({inst:g}),h(function(){c(g)&&m({inst:g})})},[h]),o(f),f}function c(h){var d=h.getSnapshot;h=h.value;try{var f=d();return!r(h,f)}catch{return!0}}function u(h,d){return d()}var l=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return gv.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:l,gv}var XT;function uZ(){return XT||(XT=1,pv.exports=cZ()),pv.exports}var lZ=uZ();const hZ=Xw(lZ),dZ={},{use:eN}=$t,{useSyncExternalStore:fZ}=hZ,pZ=(t,e)=>{const r=J.useRef();J.useEffect(()=>{r.current=jL(t,e)}),J.useDebugValue(r.current)},gZ=new WeakMap;function s1(t,e){const n=J.useRef(),s=J.useRef();let i=!0;const o=fZ(J.useCallback(u=>{const l=hn(t,u);return u(),l},[t,void 0]),()=>{const u=qu(t,eN);try{if(!i&&n.current&&s.current&&!B2(n.current,u,s.current,new WeakMap))return n.current}catch{}return u},()=>qu(t,eN));i=!1;const a=new WeakMap;J.useEffect(()=>{n.current=o,s.current=a}),(dZ?"production":void 0)!=="production"&&pZ(o,a);const c=J.useMemo(()=>new WeakMap,[]);return U2(o,a,c,gZ)}function mZ(){const{activeCaipNetwork:t}=s1($.state);return{caipNetwork:t,chainId:t==null?void 0:t.id,caipNetworkId:t==null?void 0:t.caipNetworkId}}function Spe(t){var i,o;const e=s1($.state),r=(t==null?void 0:t.namespace)||e.activeChain;if(!r)return{allAccounts:[],address:void 0,caipAddress:void 0,status:void 0,isConnected:!1,embeddedWalletInfo:void 0};const n=(i=e.chains.get(r))==null?void 0:i.accountState,s=Me.getAuthConnector(r);return{allAccounts:(n==null?void 0:n.allAccounts)||[],caipAddress:n==null?void 0:n.caipAddress,address:De.getPlainAddress(n==null?void 0:n.caipAddress),isConnected:!!(n!=null&&n.caipAddress),status:n==null?void 0:n.status,embeddedWalletInfo:s?{user:n!=null&&n.user?{...n.user,username:be.getConnectedSocialUsername()}:void 0,authProvider:(n==null?void 0:n.socialProvider)||"email",accountType:(o=n==null?void 0:n.preferredAccountTypes)==null?void 0:o[r],isSmartAccountDeployed:!!(n!=null&&n.smartAccountDeployed)}:void 0}}const Tt={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},to={ConnectorExplorerIds:{[le.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[le.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[le.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[le.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[le.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Tt.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Tt.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Tt.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Tt.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Tt.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Tt.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Tt.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Tt.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Tt.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Tt.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Tt.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[le.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[le.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[le.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[le.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[le.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[le.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[le.CONNECTOR_ID.INJECTED]:"Browser Wallet",[le.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[le.CONNECTOR_ID.COINBASE]:"Coinbase",[le.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[le.CONNECTOR_ID.LEDGER]:"Ledger",[le.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[le.CONNECTOR_ID.INJECTED]:"INJECTED",[le.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[le.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[le.CONNECTOR_ID.AUTH]:"AUTH"}},S0={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([r,n])=>{e[`${Tt.EIP155}:${r}`]=n}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},Hf={UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${yZ()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},SOCIALS_TIMEOUT:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function yZ(){return typeof window<"u"}const wZ={createLogger(t,e="error"){const r=Vd({level:e}),{logger:n}=kA({opts:r});return n.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},n}},bZ="rpc.walletconnect.org";function tN(t,e){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",t),r.searchParams.set("projectId",e),r.toString()}const mv=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Zl={extendRpcUrlWithProjectId(t,e){let r=!1;try{r=new URL(t).host===bZ}catch{r=!1}if(r){const n=new URL(t);return n.searchParams.has("projectId")||n.searchParams.set("projectId",e),n.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:le.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${le.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,r){var s,i,o;const n=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return mv.includes(e)?tN(e,r):n||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){var d,f,p,g,m;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(d=t.rpcUrls.default.http)==null?void 0:d[0],a=this.getDefaultRpcUrl(t,i,r),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,u=((m=n==null?void 0:n[i])==null?void 0:m.map(w=>w.url))||[],l=[...u,a],h=[...u];return c&&!h.includes(c)&&h.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:to.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:l},chainDefault:{http:h}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){return t.map(s=>Zl.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:n,projectId:r}))},getViemTransport(t,e,r){var s,i,o;const n=[];return r==null||r.forEach(a=>{n.push(ey(a.url,a.config))}),mv.includes(t.caipNetworkId)&&n.push(ey(tN(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{n.push(ey(a))}),GT(n)},extendWagmiTransports(t,e,r){if(mv.includes(t.caipNetworkId)){const n=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return GT([r,ey(n)])}return r},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:le.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=be.getActiveCaipNetworkId(),r=$.getAllRequestedCaipNetworks(),n=Array.from(((c=$.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?n.includes(s):!1,o=r==null?void 0:r.find(u=>u.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(r==null?void 0:r[0])}},cw={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},Ln=Zt({providers:{...cw},providerIds:{...cw}}),st={state:Ln,subscribeKey(t,e){return Xn(Ln,t,e)},subscribe(t){return hn(Ln,()=>{t(Ln)})},subscribeProviders(t){return hn(Ln.providers,()=>t(Ln.providers))},setProvider(t,e){e&&(Ln.providers[t]=Wu(e))},getProvider(t){return Ln.providers[t]},setProviderId(t,e){e&&(Ln.providerIds[t]=e)},getProviderId(t){if(t)return Ln.providerIds[t]},reset(){Ln.providers={...cw},Ln.providerIds={...cw}},resetChain(t){Ln.providers[t]=void 0,Ln.providerIds[t]=void 0}},rN={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},jr={set(t,e){gs.isClient&&localStorage.setItem(`${Ce.STORAGE_KEY}${t}`,e)},get(t){return gs.isClient?localStorage.getItem(`${Ce.STORAGE_KEY}${t}`):null},delete(t,e){gs.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ce.STORAGE_KEY}${t}`))}},ry=30*1e3,gs={checkIfAllowedToTriggerEmail(){const t=jr.get(Ce.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<ry){const r=Math.ceil((ry-e)/1e3);throw new Error(`Please try again after ${r} seconds`)}}},getTimeToNextEmailLogin(){const t=jr.get(Ce.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<ry)return Math.ceil((ry-e)/1e3)}return 0},checkIfRequestExists(t){return gr.NOT_SAFE_RPC_METHODS.includes(t.method)||gr.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(rN.transactionHash))||(t==null?void 0:t.match(rN.signedMessage)))?Ce.RPC_RESPONSE_TYPE_TX:Ce.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return gr.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var lt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(lt||(lt={}));var s_;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(s_||(s_={}));const me=lt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),$a=t=>{switch(typeof t){case"undefined":return me.undefined;case"string":return me.string;case"number":return isNaN(t)?me.nan:me.number;case"boolean":return me.boolean;case"function":return me.function;case"bigint":return me.bigint;case"symbol":return me.symbol;case"object":return Array.isArray(t)?me.array:t===null?me.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?me.promise:typeof Map<"u"&&t instanceof Map?me.map:typeof Set<"u"&&t instanceof Set?me.set:typeof Date<"u"&&t instanceof Date?me.date:me.object;default:return me.unknown}},ce=lt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),vZ=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Ai extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,lt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Ai.create=t=>new Ai(t);const Xp=(t,e)=>{let r;switch(t.code){case ce.invalid_type:t.received===me.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case ce.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,lt.jsonStringifyReplacer)}`;break;case ce.unrecognized_keys:r=`Unrecognized key(s) in object: ${lt.joinValues(t.keys,", ")}`;break;case ce.invalid_union:r="Invalid input";break;case ce.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${lt.joinValues(t.options)}`;break;case ce.invalid_enum_value:r=`Invalid enum value. Expected ${lt.joinValues(t.options)}, received '${t.received}'`;break;case ce.invalid_arguments:r="Invalid function arguments";break;case ce.invalid_return_type:r="Invalid function return type";break;case ce.invalid_date:r="Invalid date";break;case ce.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:lt.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case ce.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case ce.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case ce.custom:r="Invalid input";break;case ce.invalid_intersection_types:r="Intersection results could not be merged";break;case ce.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case ce.not_finite:r="Number must be finite";break;default:r=e.defaultError,lt.assertNever(t)}return{message:r}};let Ak=Xp;function EZ(t){Ak=t}function uw(){return Ak}const lw=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],o={...s,path:i};let a="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},_Z=[];function ve(t,e){const r=lw({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,uw(),Xp].filter(n=>!!n)});t.common.issues.push(r)}class dn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return Be;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r)n.push({key:await s.key,value:await s.value});return dn.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Be;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const Be=Object.freeze({status:"aborted"}),Ck=t=>({status:"dirty",value:t}),On=t=>({status:"valid",value:t}),i_=t=>t.status==="aborted",o_=t=>t.status==="dirty",eg=t=>t.status==="valid",hw=t=>typeof Promise<"u"&&t instanceof Promise;var Ne;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ne||(Ne={}));class po{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const nN=(t,e)=>{if(eg(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Ai(t.common.issues);return this._error=r,this._error}}};function je(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:s}}class Ge{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return $a(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:$a(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new dn,ctx:{common:e.parent.common,data:e.data,parsedType:$a(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(hw(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const s={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$a(e)},i=this._parseSync({data:e,path:s.path,parent:s});return nN(s,i)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$a(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(hw(s)?s:Promise.resolve(s));return nN(n,i)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:ce.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new Si({schema:this,typeName:Re.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return oa.create(this,this._def)}nullable(){return Xu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ci.create(this,this._def)}promise(){return _d.create(this,this._def)}or(e){return sg.create([this,e],this._def)}and(e){return ig.create(this,e,this._def)}transform(e){return new Si({...je(this._def),schema:this,typeName:Re.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new lg({...je(this._def),innerType:this,defaultValue:r,typeName:Re.ZodDefault})}brand(){return new Ik({typeName:Re.ZodBranded,type:this,...je(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new gw({...je(this._def),innerType:this,catchValue:r,typeName:Re.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return dm.create(this,e)}readonly(){return yw.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const AZ=/^c[^\s-]{8,}$/i,CZ=/^[a-z][a-z0-9]*$/,SZ=/^[0-9A-HJKMNP-TV-Z]{26}$/,IZ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,TZ=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,NZ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let yv;const xZ=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,OZ=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,RZ=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function PZ(t,e){return!!((e==="v4"||!e)&&xZ.test(t)||(e==="v6"||!e)&&OZ.test(t))}class Ei extends Ge{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==me.string){const i=this._getOrReturnCtx(e);return ve(i,{code:ce.invalid_type,expected:me.string,received:i.parsedType}),Be}const n=new dn;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ve(s,{code:ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ve(s,{code:ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ve(s,{code:ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ve(s,{code:ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")TZ.test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"email",code:ce.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")yv||(yv=new RegExp(NZ,"u")),yv.test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"emoji",code:ce.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")IZ.test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"uuid",code:ce.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")AZ.test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"cuid",code:ce.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")CZ.test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"cuid2",code:ce.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")SZ.test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"ulid",code:ce.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ve(s,{validation:"url",code:ce.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"regex",code:ce.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ve(s,{code:ce.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ve(s,{code:ce.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ve(s,{code:ce.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?RZ(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{code:ce.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="ip"?PZ(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"ip",code:ce.invalid_string,message:i.message}),n.dirty()):lt.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:ce.invalid_string,...Ne.errToObj(n)})}_addCheck(e){return new Ei({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ne.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ne.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ne.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ne.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ne.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ne.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ne.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ne.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...Ne.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Ne.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...Ne.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Ne.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Ne.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Ne.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Ne.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Ne.errToObj(r)})}nonempty(e){return this.min(1,Ne.errToObj(e))}trim(){return new Ei({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ei({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ei({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Ei.create=t=>{var e;return new Ei({checks:[],typeName:Re.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...je(t)})};function kZ(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class wc extends Ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==me.number){const i=this._getOrReturnCtx(e);return ve(i,{code:ce.invalid_type,expected:me.number,received:i.parsedType}),Be}let n;const s=new dn;for(const i of this._def.checks)i.kind==="int"?lt.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ve(n,{code:ce.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),ve(n,{code:ce.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),ve(n,{code:ce.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?kZ(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),ve(n,{code:ce.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ve(n,{code:ce.not_finite,message:i.message}),s.dirty()):lt.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Ne.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ne.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ne.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ne.toString(r))}setLimit(e,r,n,s){return new wc({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ne.toString(s)}]})}_addCheck(e){return new wc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ne.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ne.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ne.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ne.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ne.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ne.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Ne.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ne.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ne.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&lt.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}wc.create=t=>new wc({checks:[],typeName:Re.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...je(t)});class bc extends Ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==me.bigint){const i=this._getOrReturnCtx(e);return ve(i,{code:ce.invalid_type,expected:me.bigint,received:i.parsedType}),Be}let n;const s=new dn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),ve(n,{code:ce.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),ve(n,{code:ce.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ve(n,{code:ce.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):lt.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Ne.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ne.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ne.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ne.toString(r))}setLimit(e,r,n,s){return new bc({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ne.toString(s)}]})}_addCheck(e){return new bc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ne.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ne.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ne.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ne.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ne.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}bc.create=t=>{var e;return new bc({checks:[],typeName:Re.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...je(t)})};class tg extends Ge{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==me.boolean){const n=this._getOrReturnCtx(e);return ve(n,{code:ce.invalid_type,expected:me.boolean,received:n.parsedType}),Be}return On(e.data)}}tg.create=t=>new tg({typeName:Re.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...je(t)});class Qu extends Ge{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==me.date){const i=this._getOrReturnCtx(e);return ve(i,{code:ce.invalid_type,expected:me.date,received:i.parsedType}),Be}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ve(i,{code:ce.invalid_date}),Be}const n=new dn;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ve(s,{code:ce.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ve(s,{code:ce.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):lt.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Qu({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Ne.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Ne.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}Qu.create=t=>new Qu({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Re.ZodDate,...je(t)});class dw extends Ge{_parse(e){if(this._getType(e)!==me.symbol){const n=this._getOrReturnCtx(e);return ve(n,{code:ce.invalid_type,expected:me.symbol,received:n.parsedType}),Be}return On(e.data)}}dw.create=t=>new dw({typeName:Re.ZodSymbol,...je(t)});class rg extends Ge{_parse(e){if(this._getType(e)!==me.undefined){const n=this._getOrReturnCtx(e);return ve(n,{code:ce.invalid_type,expected:me.undefined,received:n.parsedType}),Be}return On(e.data)}}rg.create=t=>new rg({typeName:Re.ZodUndefined,...je(t)});class ng extends Ge{_parse(e){if(this._getType(e)!==me.null){const n=this._getOrReturnCtx(e);return ve(n,{code:ce.invalid_type,expected:me.null,received:n.parsedType}),Be}return On(e.data)}}ng.create=t=>new ng({typeName:Re.ZodNull,...je(t)});class Ed extends Ge{constructor(){super(...arguments),this._any=!0}_parse(e){return On(e.data)}}Ed.create=t=>new Ed({typeName:Re.ZodAny,...je(t)});class Lu extends Ge{constructor(){super(...arguments),this._unknown=!0}_parse(e){return On(e.data)}}Lu.create=t=>new Lu({typeName:Re.ZodUnknown,...je(t)});class da extends Ge{_parse(e){const r=this._getOrReturnCtx(e);return ve(r,{code:ce.invalid_type,expected:me.never,received:r.parsedType}),Be}}da.create=t=>new da({typeName:Re.ZodNever,...je(t)});class fw extends Ge{_parse(e){if(this._getType(e)!==me.undefined){const n=this._getOrReturnCtx(e);return ve(n,{code:ce.invalid_type,expected:me.void,received:n.parsedType}),Be}return On(e.data)}}fw.create=t=>new fw({typeName:Re.ZodVoid,...je(t)});class Ci extends Ge{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==me.array)return ve(r,{code:ce.invalid_type,expected:me.array,received:r.parsedType}),Be;if(s.exactLength!==null){const o=r.data.length>s.exactLength.value,a=r.data.length<s.exactLength.value;(o||a)&&(ve(r,{code:o?ce.too_big:ce.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(ve(r,{code:ce.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(ve(r,{code:ce.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>s.type._parseAsync(new po(r,o,r.path,a)))).then(o=>dn.mergeArray(n,o));const i=[...r.data].map((o,a)=>s.type._parseSync(new po(r,o,r.path,a)));return dn.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new Ci({...this._def,minLength:{value:e,message:Ne.toString(r)}})}max(e,r){return new Ci({...this._def,maxLength:{value:e,message:Ne.toString(r)}})}length(e,r){return new Ci({...this._def,exactLength:{value:e,message:Ne.toString(r)}})}nonempty(e){return this.min(1,e)}}Ci.create=(t,e)=>new Ci({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Re.ZodArray,...je(e)});function Xl(t){if(t instanceof Jt){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=oa.create(Xl(n))}return new Jt({...t._def,shape:()=>e})}else return t instanceof Ci?new Ci({...t._def,type:Xl(t.element)}):t instanceof oa?oa.create(Xl(t.unwrap())):t instanceof Xu?Xu.create(Xl(t.unwrap())):t instanceof go?go.create(t.items.map(e=>Xl(e))):t}class Jt extends Ge{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=lt.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==me.object){const u=this._getOrReturnCtx(e);return ve(u,{code:ce.invalid_type,expected:me.object,received:u.parsedType}),Be}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof da&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const l=i[u],h=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new po(s,h,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof da){const u=this._def.unknownKeys;if(u==="passthrough")for(const l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(u==="strict")a.length>0&&(ve(s,{code:ce.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const l of a){const h=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new po(s,h,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const l of c){const h=await l.key;u.push({key:h,value:await l.value,alwaysSet:l.alwaysSet})}return u}).then(u=>dn.mergeObjectSync(n,u)):dn.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return Ne.errToObj,new Jt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=Ne.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Jt({...this._def,unknownKeys:"strip"})}passthrough(){return new Jt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Jt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Jt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Re.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Jt({...this._def,catchall:e})}pick(e){const r={};return lt.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Jt({...this._def,shape:()=>r})}omit(e){const r={};return lt.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new Jt({...this._def,shape:()=>r})}deepPartial(){return Xl(this)}partial(e){const r={};return lt.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new Jt({...this._def,shape:()=>r})}required(e){const r={};return lt.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof oa;)i=i._def.innerType;r[n]=i}}),new Jt({...this._def,shape:()=>r})}keyof(){return Sk(lt.objectKeys(this.shape))}}Jt.create=(t,e)=>new Jt({shape:()=>t,unknownKeys:"strip",catchall:da.create(),typeName:Re.ZodObject,...je(e)});Jt.strictCreate=(t,e)=>new Jt({shape:()=>t,unknownKeys:"strict",catchall:da.create(),typeName:Re.ZodObject,...je(e)});Jt.lazycreate=(t,e)=>new Jt({shape:t,unknownKeys:"strip",catchall:da.create(),typeName:Re.ZodObject,...je(e)});class sg extends Ge{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Ai(a.ctx.common.issues));return ve(r,{code:ce.invalid_union,unionErrors:o}),Be}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},l=c._parseSync({data:r.data,path:r.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Ai(c));return ve(r,{code:ce.invalid_union,unionErrors:a}),Be}}get options(){return this._def.options}}sg.create=(t,e)=>new sg({options:t,typeName:Re.ZodUnion,...je(e)});const xy=t=>t instanceof ag?xy(t.schema):t instanceof Si?xy(t.innerType()):t instanceof cg?[t.value]:t instanceof vc?t.options:t instanceof ug?Object.keys(t.enum):t instanceof lg?xy(t._def.innerType):t instanceof rg?[void 0]:t instanceof ng?[null]:null;class I0 extends Ge{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==me.object)return ve(r,{code:ce.invalid_type,expected:me.object,received:r.parsedType}),Be;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(ve(r,{code:ce.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Be)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const i of r){const o=xy(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new I0({typeName:Re.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...je(n)})}}function a_(t,e){const r=$a(t),n=$a(e);if(t===e)return{valid:!0,data:t};if(r===me.object&&n===me.object){const s=lt.objectKeys(e),i=lt.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=a_(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===me.array&&n===me.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=a_(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===me.date&&n===me.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ig extends Ge{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(i_(i)||i_(o))return Be;const a=a_(i.value,o.value);return a.valid?((o_(i)||o_(o))&&r.dirty(),{status:r.value,value:a.data}):(ve(n,{code:ce.invalid_intersection_types}),Be)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}ig.create=(t,e,r)=>new ig({left:t,right:e,typeName:Re.ZodIntersection,...je(r)});class go extends Ge{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==me.array)return ve(n,{code:ce.invalid_type,expected:me.array,received:n.parsedType}),Be;if(n.data.length<this._def.items.length)return ve(n,{code:ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Be;!this._def.rest&&n.data.length>this._def.items.length&&(ve(n,{code:ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new po(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>dn.mergeArray(r,o)):dn.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new go({...this._def,rest:e})}}go.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new go({items:t,typeName:Re.ZodTuple,rest:null,...je(e)})};class og extends Ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==me.object)return ve(n,{code:ce.invalid_type,expected:me.object,received:n.parsedType}),Be;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in n.data)s.push({key:i._parse(new po(n,a,n.path,a)),value:o._parse(new po(n,n.data[a],n.path,a))});return n.common.async?dn.mergeObjectAsync(r,s):dn.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Ge?new og({keyType:e,valueType:r,typeName:Re.ZodRecord,...je(n)}):new og({keyType:Ei.create(),valueType:e,typeName:Re.ZodRecord,...je(r)})}}class pw extends Ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==me.map)return ve(n,{code:ce.invalid_type,expected:me.map,received:n.parsedType}),Be;const s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,c],u)=>({key:s._parse(new po(n,a,n.path,[u,"key"])),value:i._parse(new po(n,c,n.path,[u,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return Be;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return Be;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}}}}pw.create=(t,e,r)=>new pw({valueType:e,keyType:t,typeName:Re.ZodMap,...je(r)});class Zu extends Ge{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==me.set)return ve(n,{code:ce.invalid_type,expected:me.set,received:n.parsedType}),Be;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(ve(n,{code:ce.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(ve(n,{code:ce.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const l of c){if(l.status==="aborted")return Be;l.status==="dirty"&&r.dirty(),u.add(l.value)}return{status:r.value,value:u}}const a=[...n.data.values()].map((c,u)=>i._parse(new po(n,c,n.path,u)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new Zu({...this._def,minSize:{value:e,message:Ne.toString(r)}})}max(e,r){return new Zu({...this._def,maxSize:{value:e,message:Ne.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}Zu.create=(t,e)=>new Zu({valueType:t,minSize:null,maxSize:null,typeName:Re.ZodSet,...je(e)});class fh extends Ge{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==me.function)return ve(r,{code:ce.invalid_type,expected:me.function,received:r.parsedType}),Be;function n(a,c){return lw({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,uw(),Xp].filter(u=>!!u),issueData:{code:ce.invalid_arguments,argumentsError:c}})}function s(a,c){return lw({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,uw(),Xp].filter(u=>!!u),issueData:{code:ce.invalid_return_type,returnTypeError:c}})}const i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof _d){const a=this;return On(async function(...c){const u=new Ai([]),l=await a._def.args.parseAsync(c,i).catch(f=>{throw u.addIssue(n(c,f)),u}),h=await Reflect.apply(o,this,l);return await a._def.returns._def.type.parseAsync(h,i).catch(f=>{throw u.addIssue(s(h,f)),u})})}else{const a=this;return On(function(...c){const u=a._def.args.safeParse(c,i);if(!u.success)throw new Ai([n(c,u.error)]);const l=Reflect.apply(o,this,u.data),h=a._def.returns.safeParse(l,i);if(!h.success)throw new Ai([s(l,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new fh({...this._def,args:go.create(e).rest(Lu.create())})}returns(e){return new fh({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new fh({args:e||go.create([]).rest(Lu.create()),returns:r||Lu.create(),typeName:Re.ZodFunction,...je(n)})}}class ag extends Ge{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}ag.create=(t,e)=>new ag({getter:t,typeName:Re.ZodLazy,...je(e)});class cg extends Ge{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return ve(r,{received:r.data,code:ce.invalid_literal,expected:this._def.value}),Be}return{status:"valid",value:e.data}}get value(){return this._def.value}}cg.create=(t,e)=>new cg({value:t,typeName:Re.ZodLiteral,...je(e)});function Sk(t,e){return new vc({values:t,typeName:Re.ZodEnum,...je(e)})}class vc extends Ge{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return ve(r,{expected:lt.joinValues(n),received:r.parsedType,code:ce.invalid_type}),Be}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return ve(r,{received:r.data,code:ce.invalid_enum_value,options:n}),Be}return On(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return vc.create(e)}exclude(e){return vc.create(this.options.filter(r=>!e.includes(r)))}}vc.create=Sk;class ug extends Ge{_parse(e){const r=lt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==me.string&&n.parsedType!==me.number){const s=lt.objectValues(r);return ve(n,{expected:lt.joinValues(s),received:n.parsedType,code:ce.invalid_type}),Be}if(r.indexOf(e.data)===-1){const s=lt.objectValues(r);return ve(n,{received:n.data,code:ce.invalid_enum_value,options:s}),Be}return On(e.data)}get enum(){return this._def.values}}ug.create=(t,e)=>new ug({values:t,typeName:Re.ZodNativeEnum,...je(e)});class _d extends Ge{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==me.promise&&r.common.async===!1)return ve(r,{code:ce.invalid_type,expected:me.promise,received:r.parsedType}),Be;const n=r.parsedType===me.promise?r.data:Promise.resolve(r.data);return On(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}_d.create=(t,e)=>new _d({type:t,typeName:Re.ZodPromise,...je(e)});class Si extends Ge{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Re.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ve(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(n.data,i);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Be:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Be:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!eg(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>eg(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:r.value,value:a})):o);lt.assertNever(s)}}Si.create=(t,e,r)=>new Si({schema:t,typeName:Re.ZodEffects,effect:e,...je(r)});Si.createWithPreprocess=(t,e,r)=>new Si({schema:e,effect:{type:"preprocess",transform:t},typeName:Re.ZodEffects,...je(r)});class oa extends Ge{_parse(e){return this._getType(e)===me.undefined?On(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}oa.create=(t,e)=>new oa({innerType:t,typeName:Re.ZodOptional,...je(e)});class Xu extends Ge{_parse(e){return this._getType(e)===me.null?On(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Xu.create=(t,e)=>new Xu({innerType:t,typeName:Re.ZodNullable,...je(e)});class lg extends Ge{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===me.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}lg.create=(t,e)=>new lg({innerType:t,typeName:Re.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...je(e)});class gw extends Ge{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return hw(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ai(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ai(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}gw.create=(t,e)=>new gw({innerType:t,typeName:Re.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...je(e)});class mw extends Ge{_parse(e){if(this._getType(e)!==me.nan){const n=this._getOrReturnCtx(e);return ve(n,{code:ce.invalid_type,expected:me.nan,received:n.parsedType}),Be}return{status:"valid",value:e.data}}}mw.create=t=>new mw({typeName:Re.ZodNaN,...je(t)});const DZ=Symbol("zod_brand");class Ik extends Ge{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class dm extends Ge{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Be:i.status==="dirty"?(r.dirty(),Ck(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Be:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new dm({in:e,out:r,typeName:Re.ZodPipeline})}}class yw extends Ge{_parse(e){const r=this._def.innerType._parse(e);return eg(r)&&(r.value=Object.freeze(r.value)),r}}yw.create=(t,e)=>new yw({innerType:t,typeName:Re.ZodReadonly,...je(e)});const Tk=(t,e={},r)=>t?Ed.create().superRefine((n,s)=>{var i,o;if(!t(n)){const a=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:r)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...u,fatal:c})}}):Ed.create(),UZ={object:Jt.lazycreate};var Re;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Re||(Re={}));const BZ=(t,e={message:`Input not instance of ${t.name}`})=>Tk(r=>r instanceof t,e),Nk=Ei.create,xk=wc.create,$Z=mw.create,LZ=bc.create,Ok=tg.create,MZ=Qu.create,FZ=dw.create,jZ=rg.create,zZ=ng.create,HZ=Ed.create,qZ=Lu.create,WZ=da.create,VZ=fw.create,GZ=Ci.create,KZ=Jt.create,JZ=Jt.strictCreate,YZ=sg.create,QZ=I0.create,ZZ=ig.create,XZ=go.create,eX=og.create,tX=pw.create,rX=Zu.create,nX=fh.create,sX=ag.create,iX=cg.create,oX=vc.create,aX=ug.create,cX=_d.create,sN=Si.create,uX=oa.create,lX=Xu.create,hX=Si.createWithPreprocess,dX=dm.create,fX=()=>Nk().optional(),pX=()=>xk().optional(),gX=()=>Ok().optional(),mX={string:t=>Ei.create({...t,coerce:!0}),number:t=>wc.create({...t,coerce:!0}),boolean:t=>tg.create({...t,coerce:!0}),bigint:t=>bc.create({...t,coerce:!0}),date:t=>Qu.create({...t,coerce:!0})},yX=Be;var R=Object.freeze({__proto__:null,defaultErrorMap:Xp,setErrorMap:EZ,getErrorMap:uw,makeIssue:lw,EMPTY_PATH:_Z,addIssueToContext:ve,ParseStatus:dn,INVALID:Be,DIRTY:Ck,OK:On,isAborted:i_,isDirty:o_,isValid:eg,isAsync:hw,get util(){return lt},get objectUtil(){return s_},ZodParsedType:me,getParsedType:$a,ZodType:Ge,ZodString:Ei,ZodNumber:wc,ZodBigInt:bc,ZodBoolean:tg,ZodDate:Qu,ZodSymbol:dw,ZodUndefined:rg,ZodNull:ng,ZodAny:Ed,ZodUnknown:Lu,ZodNever:da,ZodVoid:fw,ZodArray:Ci,ZodObject:Jt,ZodUnion:sg,ZodDiscriminatedUnion:I0,ZodIntersection:ig,ZodTuple:go,ZodRecord:og,ZodMap:pw,ZodSet:Zu,ZodFunction:fh,ZodLazy:ag,ZodLiteral:cg,ZodEnum:vc,ZodNativeEnum:ug,ZodPromise:_d,ZodEffects:Si,ZodTransformer:Si,ZodOptional:oa,ZodNullable:Xu,ZodDefault:lg,ZodCatch:gw,ZodNaN:mw,BRAND:DZ,ZodBranded:Ik,ZodPipeline:dm,ZodReadonly:yw,custom:Tk,Schema:Ge,ZodSchema:Ge,late:UZ,get ZodFirstPartyTypeKind(){return Re},coerce:mX,any:HZ,array:GZ,bigint:LZ,boolean:Ok,date:MZ,discriminatedUnion:QZ,effect:sN,enum:oX,function:nX,instanceof:BZ,intersection:ZZ,lazy:sX,literal:iX,map:tX,nan:$Z,nativeEnum:aX,never:WZ,null:zZ,nullable:lX,number:xk,object:KZ,oboolean:gX,onumber:pX,optional:uX,ostring:fX,pipeline:dX,preprocess:hX,promise:cX,record:eX,set:rX,strictObject:JZ,string:Nk,symbol:FZ,transformer:sN,tuple:XZ,undefined:jZ,union:YZ,unknown:qZ,void:VZ,NEVER:yX,ZodIssueCode:ce,quotelessJson:vZ,ZodError:Ai});const tr=R.object({message:R.string()});function ye(t){return R.literal(Ce[t])}R.object({accessList:R.array(R.string()),blockHash:R.string().nullable(),blockNumber:R.string().nullable(),chainId:R.string().or(R.number()),from:R.string(),gas:R.string(),hash:R.string(),input:R.string().nullable(),maxFeePerGas:R.string(),maxPriorityFeePerGas:R.string(),nonce:R.string(),r:R.string(),s:R.string(),to:R.string(),transactionIndex:R.string().nullable(),type:R.string(),v:R.string(),value:R.string()});const wX=R.object({chainId:R.string().or(R.number())}),bX=R.object({email:R.string().email()}),vX=R.object({otp:R.string()}),EX=R.object({uri:R.string()}),_X=R.object({chainId:R.optional(R.string().or(R.number())),preferredAccountType:R.optional(R.string())}),AX=R.object({provider:R.enum(["google","github","apple","facebook","x","discord"])}),CX=R.object({email:R.string().email()}),SX=R.object({otp:R.string()}),IX=R.object({otp:R.string()}),TX=R.object({themeMode:R.optional(R.enum(["light","dark"])),themeVariables:R.optional(R.record(R.string(),R.string().or(R.number()))),w3mThemeVariables:R.optional(R.record(R.string(),R.string()))}),NX=R.object({metadata:R.object({name:R.string(),description:R.string(),url:R.string(),icons:R.array(R.string())}).optional(),sdkVersion:R.string().optional(),sdkType:R.string().optional(),projectId:R.string()}),xX=R.object({type:R.string()}),OX=R.object({action:R.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),RX=R.object({url:R.string()}),PX=R.object({userName:R.string()}),kX=R.object({email:R.string().optional().nullable(),address:R.string(),chainId:R.string().or(R.number()),accounts:R.array(R.object({address:R.string(),type:R.enum([gr.ACCOUNT_TYPES.EOA,gr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:R.string().optional().nullable()}),DX=R.object({action:R.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),UX=R.object({email:R.string().email().optional().nullable(),address:R.string(),chainId:R.string().or(R.number()),smartAccountDeployed:R.optional(R.boolean()),accounts:R.array(R.object({address:R.string(),type:R.enum([gr.ACCOUNT_TYPES.EOA,gr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:R.optional(R.string())}),BX=R.object({uri:R.string()}),$X=R.object({isConnected:R.boolean()}),LX=R.object({chainId:R.string().or(R.number())}),MX=R.object({chainId:R.string().or(R.number())}),FX=R.object({newEmail:R.string().email()}),jX=R.object({smartAccountEnabledNetworks:R.array(R.number())});R.object({address:R.string(),isDeployed:R.boolean()});const zX=R.object({version:R.string().optional()}),HX=R.object({type:R.string(),address:R.string()}),qX=R.any(),WX=R.object({method:R.literal("eth_accounts")}),VX=R.object({method:R.literal("eth_blockNumber")}),GX=R.object({method:R.literal("eth_call"),params:R.array(R.any())}),KX=R.object({method:R.literal("eth_chainId")}),JX=R.object({method:R.literal("eth_estimateGas"),params:R.array(R.any())}),YX=R.object({method:R.literal("eth_feeHistory"),params:R.array(R.any())}),QX=R.object({method:R.literal("eth_gasPrice")}),ZX=R.object({method:R.literal("eth_getAccount"),params:R.array(R.any())}),XX=R.object({method:R.literal("eth_getBalance"),params:R.array(R.any())}),eee=R.object({method:R.literal("eth_getBlockByHash"),params:R.array(R.any())}),tee=R.object({method:R.literal("eth_getBlockByNumber"),params:R.array(R.any())}),ree=R.object({method:R.literal("eth_getBlockReceipts"),params:R.array(R.any())}),nee=R.object({method:R.literal("eth_getBlockTransactionCountByHash"),params:R.array(R.any())}),see=R.object({method:R.literal("eth_getBlockTransactionCountByNumber"),params:R.array(R.any())}),iee=R.object({method:R.literal("eth_getCode"),params:R.array(R.any())}),oee=R.object({method:R.literal("eth_getFilterChanges"),params:R.array(R.any())}),aee=R.object({method:R.literal("eth_getFilterLogs"),params:R.array(R.any())}),cee=R.object({method:R.literal("eth_getLogs"),params:R.array(R.any())}),uee=R.object({method:R.literal("eth_getProof"),params:R.array(R.any())}),lee=R.object({method:R.literal("eth_getStorageAt"),params:R.array(R.any())}),hee=R.object({method:R.literal("eth_getTransactionByBlockHashAndIndex"),params:R.array(R.any())}),dee=R.object({method:R.literal("eth_getTransactionByBlockNumberAndIndex"),params:R.array(R.any())}),fee=R.object({method:R.literal("eth_getTransactionByHash"),params:R.array(R.any())}),pee=R.object({method:R.literal("eth_getTransactionCount"),params:R.array(R.any())}),gee=R.object({method:R.literal("eth_getTransactionReceipt"),params:R.array(R.any())}),mee=R.object({method:R.literal("eth_getUncleCountByBlockHash"),params:R.array(R.any())}),yee=R.object({method:R.literal("eth_getUncleCountByBlockNumber"),params:R.array(R.any())}),wee=R.object({method:R.literal("eth_maxPriorityFeePerGas")}),bee=R.object({method:R.literal("eth_newBlockFilter")}),vee=R.object({method:R.literal("eth_newFilter"),params:R.array(R.any())}),Eee=R.object({method:R.literal("eth_newPendingTransactionFilter")}),_ee=R.object({method:R.literal("eth_sendRawTransaction"),params:R.array(R.any())}),Aee=R.object({method:R.literal("eth_syncing"),params:R.array(R.any())}),Cee=R.object({method:R.literal("eth_uninstallFilter"),params:R.array(R.any())}),iN=R.object({method:R.literal("personal_sign"),params:R.array(R.any())}),See=R.object({method:R.literal("eth_signTypedData_v4"),params:R.array(R.any())}),Iee=R.object({method:R.literal("eth_sendTransaction"),params:R.array(R.any())}),Tee=R.object({method:R.literal("solana_signMessage"),params:R.object({message:R.string(),pubkey:R.string()})}),Nee=R.object({method:R.literal("solana_signTransaction"),params:R.object({transaction:R.string()})}),xee=R.object({method:R.literal("solana_signAllTransactions"),params:R.object({transactions:R.array(R.string())})}),Oee=R.object({method:R.literal("solana_signAndSendTransaction"),params:R.object({transaction:R.string(),options:R.object({skipPreflight:R.boolean().optional(),preflightCommitment:R.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:R.number().optional(),minContextSlot:R.number().optional()}).optional()})}),Ree=R.object({method:R.literal("wallet_sendCalls"),params:R.array(R.object({chainId:R.string().or(R.number()).optional(),from:R.string().optional(),version:R.string().optional(),capabilities:R.any().optional(),calls:R.array(R.object({to:R.string().startsWith("0x"),data:R.string().startsWith("0x").optional(),value:R.string().optional()}))}))}),Pee=R.object({method:R.literal("wallet_getCallsStatus"),params:R.array(R.string())}),kee=R.object({method:R.literal("wallet_getCapabilities")}),Dee=R.object({method:R.literal("wallet_grantPermissions"),params:R.array(R.any())}),Uee=R.object({method:R.literal("wallet_revokePermissions"),params:R.any()}),Bee=R.object({method:R.literal("wallet_getAssets"),params:R.any()}),oN=R.object({token:R.string()}),we=R.object({id:R.string().optional()}),Of={appEvent:we.extend({type:ye("APP_SWITCH_NETWORK"),payload:wX}).or(we.extend({type:ye("APP_CONNECT_EMAIL"),payload:bX})).or(we.extend({type:ye("APP_CONNECT_DEVICE")})).or(we.extend({type:ye("APP_CONNECT_OTP"),payload:vX})).or(we.extend({type:ye("APP_CONNECT_SOCIAL"),payload:EX})).or(we.extend({type:ye("APP_GET_FARCASTER_URI")})).or(we.extend({type:ye("APP_CONNECT_FARCASTER")})).or(we.extend({type:ye("APP_GET_USER"),payload:R.optional(_X)})).or(we.extend({type:ye("APP_GET_SOCIAL_REDIRECT_URI"),payload:AX})).or(we.extend({type:ye("APP_SIGN_OUT")})).or(we.extend({type:ye("APP_IS_CONNECTED"),payload:R.optional(oN)})).or(we.extend({type:ye("APP_GET_CHAIN_ID")})).or(we.extend({type:ye("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(we.extend({type:ye("APP_INIT_SMART_ACCOUNT")})).or(we.extend({type:ye("APP_SET_PREFERRED_ACCOUNT"),payload:xX})).or(we.extend({type:ye("APP_RPC_REQUEST"),payload:iN.or(Bee).or(WX).or(VX).or(GX).or(KX).or(JX).or(YX).or(QX).or(ZX).or(XX).or(eee).or(tee).or(ree).or(nee).or(see).or(iee).or(oee).or(aee).or(cee).or(uee).or(lee).or(hee).or(dee).or(fee).or(pee).or(gee).or(mee).or(yee).or(wee).or(bee).or(vee).or(Eee).or(_ee).or(Aee).or(Cee).or(iN).or(See).or(Iee).or(Tee).or(Nee).or(xee).or(Oee).or(Pee).or(Ree).or(kee).or(Dee).or(Uee)})).or(we.extend({type:ye("APP_UPDATE_EMAIL"),payload:CX})).or(we.extend({type:ye("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:SX})).or(we.extend({type:ye("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:IX})).or(we.extend({type:ye("APP_SYNC_THEME"),payload:TX})).or(we.extend({type:ye("APP_SYNC_DAPP_DATA"),payload:NX})).or(we.extend({type:ye("APP_RELOAD")})),frameEvent:we.extend({type:ye("FRAME_SWITCH_NETWORK_ERROR"),payload:tr}).or(we.extend({type:ye("FRAME_SWITCH_NETWORK_SUCCESS"),payload:MX})).or(we.extend({type:ye("FRAME_CONNECT_EMAIL_SUCCESS"),payload:OX})).or(we.extend({type:ye("FRAME_CONNECT_EMAIL_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:RX})).or(we.extend({type:ye("FRAME_GET_FARCASTER_URI_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:PX})).or(we.extend({type:ye("FRAME_CONNECT_FARCASTER_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_CONNECT_OTP_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_CONNECT_OTP_SUCCESS")})).or(we.extend({type:ye("FRAME_CONNECT_DEVICE_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_CONNECT_DEVICE_SUCCESS")})).or(we.extend({type:ye("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:kX})).or(we.extend({type:ye("FRAME_CONNECT_SOCIAL_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_GET_USER_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_GET_USER_SUCCESS"),payload:UX})).or(we.extend({type:ye("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:BX})).or(we.extend({type:ye("FRAME_SIGN_OUT_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_SIGN_OUT_SUCCESS")})).or(we.extend({type:ye("FRAME_IS_CONNECTED_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_IS_CONNECTED_SUCCESS"),payload:$X})).or(we.extend({type:ye("FRAME_GET_CHAIN_ID_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_GET_CHAIN_ID_SUCCESS"),payload:LX})).or(we.extend({type:ye("FRAME_RPC_REQUEST_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_RPC_REQUEST_SUCCESS"),payload:qX})).or(we.extend({type:ye("FRAME_SESSION_UPDATE"),payload:oN})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_SUCCESS"),payload:DX})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:FX})).or(we.extend({type:ye("FRAME_SYNC_THEME_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_SYNC_THEME_SUCCESS")})).or(we.extend({type:ye("FRAME_SYNC_DAPP_DATA_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(we.extend({type:ye("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:jX})).or(we.extend({type:ye("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:HX})).or(we.extend({type:ye("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_READY"),payload:zX})).or(we.extend({type:ye("FRAME_RELOAD_ERROR"),payload:tr})).or(we.extend({type:ye("FRAME_RELOAD_SUCCESS")}))};function wv(t,e={}){var r;return typeof(e==null?void 0:e.type)=="string"&&((r=e==null?void 0:e.type)==null?void 0:r.includes(t))}class $ee{constructor({projectId:e,isAppClient:r=!1,chainId:n="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.rpcUrl=le.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:u}){if(!wv(Ce.FRAME_EVENT_KEY,u))return;const l=Of.frameEvent.parse(u);l.id===i&&(o(l),window.removeEventListener("message",c))}gs.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{gs.isClient&&window.addEventListener("message",({data:o})=>{if(!wv(Ce.FRAME_EVENT_KEY,o))return;const a=Of.frameEvent.parse(o);i(a)})},onAppEvent:i=>{gs.isClient&&window.addEventListener("message",({data:o})=>{if(!wv(Ce.APP_EVENT_KEY,o))return;const a=Of.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(gs.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");Of.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(gs.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Of.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),r&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),gs.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${xQ}?projectId=${e}&chainId=${n}&version=${RQ}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&((a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(r=>({[r]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${r}&projectId=${this.projectId}`,chainId:r}}));return Object.assign({},...e)}}class Lee{constructor(e){var i;const r=Vd({level:OQ}),{logger:n,chunkLoggerController:s}=kA({opts:r});this.logger=pn(n,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Mee{constructor({projectId:e,chainId:r,enableLogger:n=!0,onTimeout:s}){this.openRpcRequests=[],n&&(this.w3mLogger=new Lee(e)),this.w3mFrame=new $ee({projectId:e,isAppClient:!0,chainId:r,enableLogger:n}),this.onTimeout=s,this.getLoginEmailUsed()&&this.w3mFrame.initFrame(),this.initPromise=new Promise(i=>{this.w3mFrame.events.onFrameEvent(async o=>{o.type===Ce.FRAME_READY&&(this.initPromise=void 0,await new Promise(a=>{setTimeout(a,500)}),i())})})}async init(){this.w3mFrame.initFrame(),this.initPromise&&await this.initPromise}getLoginEmailUsed(){return!!jr.get(Ce.EMAIL_LOGIN_USED_KEY)}getEmail(){return jr.get(Ce.EMAIL)}getUsername(){return jr.get(Ce.SOCIAL_USERNAME)}async reload(){var e;try{this.w3mFrame.initFrame(),await this.appEvent({type:Ce.APP_RELOAD})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error reloading iframe"),r}}async connectEmail(e){var r;try{gs.checkIfAllowedToTriggerEmail(),this.w3mFrame.initFrame();const n=await this.appEvent({type:Ce.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting email"),n}}async connectDevice(){var e;try{return this.appEvent({type:Ce.APP_CONNECT_DEVICE})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error connecting device"),r}}async connectOtp(e){var r;try{return this.appEvent({type:Ce.APP_CONNECT_OTP,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting otp"),n}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const r=await this.appEvent({type:Ce.APP_IS_CONNECTED});return r!=null&&r.isConnected||this.deleteAuthLoginCache(),r}catch(r){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:r},"Error checking connection"),r}}async getChainId(){var e;try{const r=await this.appEvent({type:Ce.APP_GET_CHAIN_ID});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error getting chain id"),r}}async getSocialRedirectUri(e){var r;try{return this.w3mFrame.initFrame(),this.appEvent({type:Ce.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error getting social redirect uri"),n}}async updateEmail(e){var r;try{const n=await this.appEvent({type:Ce.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error updating email"),n}}async updateEmailPrimaryOtp(e){var r;try{return this.appEvent({type:Ce.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error updating email primary otp"),n}}async updateEmailSecondaryOtp(e){var r;try{const n=await this.appEvent({type:Ce.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(n.newEmail),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error updating email secondary otp"),n}}async syncTheme(e){var r;try{return this.appEvent({type:Ce.APP_SYNC_THEME,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error syncing theme"),n}}async syncDappData(e){var r;try{return this.appEvent({type:Ce.APP_SYNC_DAPP_DATA,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error syncing dapp data"),n}}async getSmartAccountEnabledNetworks(){var e;try{const r=await this.appEvent({type:Ce.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(r.smartAccountEnabledNetworks),r}catch(r){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:r},"Error getting smart account enabled networks"),r}}async setPreferredAccount(e){var r;try{return this.appEvent({type:Ce.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error setting preferred account"),n}}async connect(e){var r;try{const n=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.getUser({chainId:n,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting"),n}}async getUser(e){var r;try{const n=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ce.APP_GET_USER,payload:{...e,chainId:n}});return this.user=s,s}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting"),n}}async connectSocial(e){var r;try{this.w3mFrame.initFrame();const n=await this.appEvent({type:Ce.APP_CONNECT_SOCIAL,payload:{uri:e}});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting social"),n}}async getFarcasterUri(){var e;try{return this.w3mFrame.initFrame(),await this.appEvent({type:Ce.APP_GET_FARCASTER_URI})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error getting farcaster uri"),r}}async connectFarcaster(){var e;try{const r=await this.appEvent({type:Ce.APP_CONNECT_FARCASTER});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error connecting farcaster"),r}}async switchNetwork(e){var r;try{const n=await this.appEvent({type:Ce.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error switching network"),n}}async disconnect(){var e;try{const r=await this.appEvent({type:Ce.APP_SIGN_OUT});return this.deleteAuthLoginCache(),r}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error disconnecting"),r}}async request(e){var r,n,s,i;try{if(gr.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(r=this.rpcRequestHandler)==null||r.call(this,e);const o=await this.appEvent({type:Ce.APP_RPC_REQUEST,payload:e});return(n=this.rpcSuccessHandler)==null||n.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Ce.FRAME_IS_CONNECTED_SUCCESS&&r.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Ce.FRAME_IS_CONNECTED_ERROR&&e(),r.type===Ce.FRAME_IS_CONNECTED_SUCCESS&&!r.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Ce.FRAME_GET_USER_SUCCESS&&e(r.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Ce.FRAME_CONNECT_SOCIAL_SUCCESS&&e(r.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Ce.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(r.payload):r.type===Ce.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:gr.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Ce.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(r.payload.smartAccountEnabledNetworks):r.type===Ce.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:r,method:n})=>{gr.SAFE_RPC_METHODS.includes(n)||r.abort()}),this.openRpcRequests=[]}catch(r){(e=this.w3mLogger)==null||e.logger.error({error:r},"Error aborting RPC request")}}async appEvent(e){await this.w3mFrame.frameLoadPromise;let r;function n(a){return a.replace("@w3m-app/","")}const s=new AbortController,i=n(e.type);return[Ce.APP_CONNECT_EMAIL,Ce.APP_CONNECT_DEVICE,Ce.APP_CONNECT_OTP,Ce.APP_CONNECT_SOCIAL,Ce.APP_GET_SOCIAL_REDIRECT_URI].map(n).includes(i)&&(r=setTimeout(()=>{var a;(a=this.onTimeout)==null||a.call(this),s.abort()},3e4)),new Promise((a,c)=>{var h,d,f;const u=Math.random().toString(36).substring(7);if((f=(h=this.w3mLogger)==null?void 0:(d=h.logger).info)==null||f.call(d,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u}),i==="RPC_REQUEST"){const p=e;this.openRpcRequests=[...this.openRpcRequests,{...p.payload,abortController:s}]}s.signal.addEventListener("abort",()=>{i==="RPC_REQUEST"?c(new Error("Request was aborted")):i!=="GET_FARCASTER_URI"&&c(new Error("Something went wrong"))});function l(p,g){var m,w,v;p.id===u&&((w=g==null?void 0:(m=g.logger).info)==null||w.call(m,{framEvent:p,id:u},"Received frame response"),p.type===`@w3m-frame/${i}_SUCCESS`?(r&&clearTimeout(r),"payload"in p&&a(p.payload),a(void 0)):p.type===`@w3m-frame/${i}_ERROR`&&(r&&clearTimeout(r),"payload"in p&&c(new Error(((v=p.payload)==null?void 0:v.message)||"An error occurred")),c(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,p=>l(p,this.w3mLogger),s.signal)})}setNewLastEmailLoginTime(){jr.set(Ce.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){jr.set(Ce.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&jr.set(Ce.EMAIL,e),jr.set(Ce.EMAIL_LOGIN_USED_KEY,"true"),jr.delete(Ce.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){jr.delete(Ce.EMAIL_LOGIN_USED_KEY),jr.delete(Ce.EMAIL),jr.delete(Ce.LAST_USED_CHAIN_KEY),jr.delete(Ce.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&jr.set(Ce.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=jr.get(Ce.LAST_USED_CHAIN_KEY)??void 0,r=Number(e);return isNaN(r)?e:r}persistSmartAccountEnabledNetworks(e){jr.set(Ce.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class hp{constructor(){}static getInstance({projectId:e,chainId:r,enableLogger:n,onTimeout:s}){return hp.instance||(hp.instance=new Mee({projectId:e,chainId:r,enableLogger:n,onTimeout:s})),hp.instance}}var aN={};const Fee={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof Er<"u"&&typeof aN<"u"?aN.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},c_={filterOutDuplicatesByRDNS(t){const e=ue.state.enableEIP6963?Me.state.connectors:[],r=be.getRecentWallets(),n=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=r.map(a=>a.rdns).filter(Boolean),i=n.concat(s);if(i.includes("io.metamask.mobile")&&De.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=Me.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),r=be.getRecentWallets(),n=e.map(a=>a.explorerId),s=r.map(a=>a.id),i=n.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Me.state,r=e.filter(i=>i.type==="ANNOUNCED").reduce((i,o)=>{var a;return(a=o.info)!=null&&a.rdns&&(i[o.info.rdns]=!0),i},{});return t.map(i=>({...i,installed:!!i.rdns&&!!r[i.rdns??""]})).sort((i,o)=>Number(o.installed)-Number(i.installed))},getConnectOrderMethod(t,e){var c;const r=(t==null?void 0:t.connectMethodsOrder)||((c=ue.state.features)==null?void 0:c.connectMethodsOrder),n=e||Me.state.connectors;if(r)return r;const{injected:s,announced:i}=Oy.getConnectorsByType(n,Ue.state.recommended,Ue.state.featured),o=s.filter(Oy.showConnector),a=i.filter(Oy.showConnector);return o.length||a.length?["wallet","email","social"]:Fee.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Ue.state.excludedWallets.some(n=>n.rdns===t.rdns),r=!!t.name&&Ue.state.excludedWallets.some(n=>S0.isLowerCaseMatch(n.name,t.name));return e||r}},Oy={getConnectorsByType(t,e,r){const{customWallets:n}=ue.state,s=be.getRecentWallets(),i=c_.filterOutDuplicateWallets(e),o=c_.filterOutDuplicateWallets(r),a=t.filter(h=>h.type==="MULTI_CHAIN"),c=t.filter(h=>h.type==="ANNOUNCED"),u=t.filter(h=>h.type==="INJECTED"),l=t.filter(h=>h.type==="EXTERNAL");return{custom:n,recent:s,external:l,multiChain:a,announced:c,injected:u,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,r=!!e&&Ue.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),n=!!t.name&&Ue.state.excludedWallets.some(i=>S0.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(!De.isMobile()&&t.name==="Browser Wallet"||!e&&!Bt.checkInstalled()||r||n)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(r||n))},getIsConnectedWithWC(){return Array.from($.state.chains.values()).some(r=>Me.getConnectorId(r.namespace)===le.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:r,recent:n,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(u=>(u=ue.state.features)==null?void 0:u.connectorTypeOrder)()??[]}){const l=Oy.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:ue.state.enableWalletConnect&&!l},{type:"recent",isEnabled:n.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),p=new Set(f.map(w=>w.type)),g=c.filter(w=>p.has(w)).map(w=>({type:w,isEnabled:!0})),m=f.filter(({type:w})=>!g.some(({type:E})=>E===w));return Array.from(new Set([...g,...m].map(({type:w})=>w)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ry=globalThis,i1=Ry.ShadowRoot&&(Ry.ShadyCSS===void 0||Ry.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,o1=Symbol(),cN=new WeakMap;let Rk=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==o1)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(i1&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=cN.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&cN.set(r,e))}return e}toString(){return this.cssText}};const $s=t=>new Rk(typeof t=="string"?t:t+"",void 0,o1),ph=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,s,i)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new Rk(r,t,o1)},jee=(t,e)=>{if(i1)t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of e){const n=document.createElement("style"),s=Ry.litNonce;s!==void 0&&n.setAttribute("nonce",s),n.textContent=r.cssText,t.appendChild(n)}},uN=i1?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return $s(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:zee,defineProperty:Hee,getOwnPropertyDescriptor:qee,getOwnPropertyNames:Wee,getOwnPropertySymbols:Vee,getPrototypeOf:Gee}=Object,hc=globalThis,lN=hc.trustedTypes,Kee=lN?lN.emptyScript:"",bv=hc.reactiveElementPolyfillSupport,dp=(t,e)=>t,u_={toAttribute(t,e){switch(e){case Boolean:t=t?Kee:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},Pk=(t,e)=>!zee(t,e),hN={attribute:!0,type:String,converter:u_,reflect:!1,useDefault:!1,hasChanged:Pk};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),hc.litPropertyMetadata??(hc.litPropertyMetadata=new WeakMap);let eh=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=hN){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(e,r),!r.noAccessor){const n=Symbol(),s=this.getPropertyDescriptor(e,n,r);s!==void 0&&Hee(this.prototype,e,s)}}static getPropertyDescriptor(e,r,n){const{get:s,set:i}=qee(this.prototype,e)??{get(){return this[r]},set(o){this[r]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??hN}static _$Ei(){if(this.hasOwnProperty(dp("elementProperties")))return;const e=Gee(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(dp("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(dp("properties"))){const r=this.properties,n=[...Wee(r),...Vee(r)];for(const s of n)this.createProperty(s,r[s])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[n,s]of r)this.elementProperties.set(n,s)}this._$Eh=new Map;for(const[r,n]of this.elementProperties){const s=this._$Eu(r,n);s!==void 0&&this._$Eh.set(s,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const s of n)r.unshift(uN(s))}else e!==void 0&&r.push(uN(e));return r}static _$Eu(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(r=>r(this))}addController(e){var r;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)==null||r.call(e))}removeController(e){var r;(r=this._$EO)==null||r.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return jee(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostConnected)==null?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostDisconnected)==null?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$ET(e,r){var i;const n=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,n);if(s!==void 0&&n.reflect===!0){const o=(((i=n.converter)==null?void 0:i.toAttribute)!==void 0?n.converter:u_).toAttribute(r,n.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,r){var i,o;const n=this.constructor,s=n._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=n.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:u_;this._$Em=s,this[s]=c.fromAttribute(r,a.type)??((o=this._$Ej)==null?void 0:o.get(s))??null,this._$Em=null}}requestUpdate(e,r,n){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(n??(n=i.getPropertyOptions(e)),!((n.hasChanged??Pk)(o,r)||n.useDefault&&n.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,n))))return;this.C(e,r,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,r,{useDefault:n,reflect:s,wrapped:i},o){n&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??r??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(r=void 0),this._$AL.set(e,r)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var n;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),(n=this._$EO)==null||n.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(r)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(r)}willUpdate(e){}_$AE(e){var r;(r=this._$EO)==null||r.forEach(n=>{var s;return(s=n.hostUpdated)==null?void 0:s.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(r=>this._$ET(r,this[r]))),this._$EM()}updated(e){}firstUpdated(e){}};eh.elementStyles=[],eh.shadowRootOptions={mode:"open"},eh[dp("elementProperties")]=new Map,eh[dp("finalized")]=new Map,bv==null||bv({ReactiveElement:eh}),(hc.reactiveElementVersions??(hc.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fp=globalThis,ww=fp.trustedTypes,dN=ww?ww.createPolicy("lit-html",{createHTML:t=>t}):void 0,kk="$lit$",La=`lit$${Math.random().toFixed(9).slice(2)}$`,Dk="?"+La,Jee=`<${Dk}>`,el=document,hg=()=>el.createComment(""),dg=t=>t===null||typeof t!="object"&&typeof t!="function",a1=Array.isArray,Yee=t=>a1(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",vv=`[ 	
\f\r]`,Rf=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,fN=/-->/g,pN=/>/g,$c=RegExp(`>|${vv}(?:([^\\s"'>=/]+)(${vv}*=${vv}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),gN=/'/g,mN=/"/g,Uk=/^(?:script|style|textarea|title)$/i,Bk=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),Npe=Bk(1),xpe=Bk(2),Ad=Symbol.for("lit-noChange"),Or=Symbol.for("lit-nothing"),yN=new WeakMap,su=el.createTreeWalker(el,129);function $k(t,e){if(!a1(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return dN!==void 0?dN.createHTML(e):e}const Qee=(t,e)=>{const r=t.length-1,n=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Rf;for(let a=0;a<r;a++){const c=t[a];let u,l,h=-1,d=0;for(;d<c.length&&(o.lastIndex=d,l=o.exec(c),l!==null);)d=o.lastIndex,o===Rf?l[1]==="!--"?o=fN:l[1]!==void 0?o=pN:l[2]!==void 0?(Uk.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=$c):l[3]!==void 0&&(o=$c):o===$c?l[0]===">"?(o=s??Rf,h=-1):l[1]===void 0?h=-2:(h=o.lastIndex-l[2].length,u=l[1],o=l[3]===void 0?$c:l[3]==='"'?mN:gN):o===mN||o===gN?o=$c:o===fN||o===pN?o=Rf:(o=$c,s=void 0);const f=o===$c&&t[a+1].startsWith("/>")?" ":"";i+=o===Rf?c+Jee:h>=0?(n.push(u),c.slice(0,h)+kk+c.slice(h)+La+f):c+La+(h===-2?a:f)}return[$k(t,i+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};class fg{constructor({strings:e,_$litType$:r},n){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[u,l]=Qee(e,r);if(this.el=fg.createElement(u,n),su.currentNode=this.el.content,r===2||r===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(s=su.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const h of s.getAttributeNames())if(h.endsWith(kk)){const d=l[o++],f=s.getAttribute(h).split(La),p=/([.?@])?(.*)/.exec(d);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?Xee:p[1]==="?"?ete:p[1]==="@"?tte:T0}),s.removeAttribute(h)}else h.startsWith(La)&&(c.push({type:6,index:i}),s.removeAttribute(h));if(Uk.test(s.tagName)){const h=s.textContent.split(La),d=h.length-1;if(d>0){s.textContent=ww?ww.emptyScript:"";for(let f=0;f<d;f++)s.append(h[f],hg()),su.nextNode(),c.push({type:2,index:++i});s.append(h[d],hg())}}}else if(s.nodeType===8)if(s.data===Dk)c.push({type:2,index:i});else{let h=-1;for(;(h=s.data.indexOf(La,h+1))!==-1;)c.push({type:7,index:i}),h+=La.length-1}i++}}static createElement(e,r){const n=el.createElement("template");return n.innerHTML=e,n}}function Cd(t,e,r=t,n){var o,a;if(e===Ad)return e;let s=n!==void 0?(o=r._$Co)==null?void 0:o[n]:r._$Cl;const i=dg(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,r,n)),n!==void 0?(r._$Co??(r._$Co=[]))[n]=s:r._$Cl=s),s!==void 0&&(e=Cd(t,s._$AS(t,e.values),s,n)),e}class Zee{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:n}=this._$AD,s=((e==null?void 0:e.creationScope)??el).importNode(r,!0);su.currentNode=s;let i=su.nextNode(),o=0,a=0,c=n[0];for(;c!==void 0;){if(o===c.index){let u;c.type===2?u=new fm(i,i.nextSibling,this,e):c.type===1?u=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(u=new rte(i,this,e)),this._$AV.push(u),c=n[++a]}o!==(c==null?void 0:c.index)&&(i=su.nextNode(),o++)}return su.currentNode=el,s}p(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class fm{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,r,n,s){this.type=2,this._$AH=Or,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Cd(this,e,r),dg(e)?e===Or||e==null||e===""?(this._$AH!==Or&&this._$AR(),this._$AH=Or):e!==this._$AH&&e!==Ad&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Yee(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Or&&dg(this._$AH)?this._$AA.nextSibling.data=e:this.T(el.createTextNode(e)),this._$AH=e}$(e){var i;const{values:r,_$litType$:n}=e,s=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=fg.createElement($k(n.h,n.h[0]),this.options)),n);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(r);else{const o=new Zee(s,this),a=o.u(this.options);o.p(r),this.T(a),this._$AH=o}}_$AC(e){let r=yN.get(e.strings);return r===void 0&&yN.set(e.strings,r=new fg(e)),r}k(e){a1(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,s=0;for(const i of e)s===r.length?r.push(n=new fm(this.O(hg()),this.O(hg()),this,this.options)):n=r[s],n._$AI(i),s++;s<r.length&&(this._$AR(n&&n._$AB.nextSibling,s),r.length=s)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)==null?void 0:n.call(this,!1,!0,r);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var r;this._$AM===void 0&&(this._$Cv=e,(r=this._$AP)==null||r.call(this,e))}}class T0{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,s,i){this.type=1,this._$AH=Or,this._$AN=void 0,this.element=e,this.name=r,this._$AM=s,this.options=i,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Or}_$AI(e,r=this,n,s){const i=this.strings;let o=!1;if(i===void 0)e=Cd(this,e,r,0),o=!dg(e)||e!==this._$AH&&e!==Ad,o&&(this._$AH=e);else{const a=e;let c,u;for(e=i[0],c=0;c<i.length-1;c++)u=Cd(this,a[n+c],r,c),u===Ad&&(u=this._$AH[c]),o||(o=!dg(u)||u!==this._$AH[c]),u===Or?e=Or:e!==Or&&(e+=(u??"")+i[c+1]),this._$AH[c]=u}o&&!s&&this.j(e)}j(e){e===Or?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Xee extends T0{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Or?void 0:e}}class ete extends T0{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Or)}}class tte extends T0{constructor(e,r,n,s,i){super(e,r,n,s,i),this.type=5}_$AI(e,r=this){if((e=Cd(this,e,r,0)??Or)===Ad)return;const n=this._$AH,s=e===Or&&n!==Or||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,i=e!==Or&&(n===Or||s);s&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r;typeof this._$AH=="function"?this._$AH.call(((r=this.options)==null?void 0:r.host)??this.element,e):this._$AH.handleEvent(e)}}class rte{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Cd(this,e)}}const Ev=fp.litHtmlPolyfillSupport;Ev==null||Ev(fg,fm),(fp.litHtmlVersions??(fp.litHtmlVersions=[])).push("3.3.0");const nte=(t,e,r)=>{const n=(r==null?void 0:r.renderBefore)??e;let s=n._$litPart$;if(s===void 0){const i=(r==null?void 0:r.renderBefore)??null;n._$litPart$=s=new fm(e.insertBefore(hg(),i),i,void 0,r??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Mu=globalThis;class Py extends eh{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;const e=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=e.firstChild),e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=nte(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Ad}}var i2;Py._$litElement$=!0,Py.finalized=!0,(i2=Mu.litElementHydrateSupport)==null||i2.call(Mu,{LitElement:Py});const _v=Mu.litElementPolyfillSupport;_v==null||_v({LitElement:Py});(Mu.litElementVersions??(Mu.litElementVersions=[])).push("4.2.0");let pp,dc,fc;function Ope(t,e){pp=document.createElement("style"),dc=document.createElement("style"),fc=document.createElement("style"),pp.textContent=gh(t).core.cssText,dc.textContent=gh(t).dark.cssText,fc.textContent=gh(t).light.cssText,document.head.appendChild(pp),document.head.appendChild(dc),document.head.appendChild(fc),Lk(e)}function Lk(t){dc&&fc&&(t==="light"?(dc.removeAttribute("media"),fc.media="enabled"):(fc.removeAttribute("media"),dc.media="enabled"))}function ste(t){pp&&dc&&fc&&(pp.textContent=gh(t).core.cssText,dc.textContent=gh(t).dark.cssText,fc.textContent=gh(t).light.cssText)}function gh(t){return{core:ph`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${$s(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${$s((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${$s((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${$s((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${$s((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:ph`
      :root {
        --w3m-color-mix: ${$s((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${$s(ta(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${$s(ta(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:ph`
      :root {
        --w3m-color-mix: ${$s((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${$s(ta(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${$s(ta(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const Rpe=ph`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Ppe=ph`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,kpe=ph`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,ac={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603},ite=iZ({id:56,name:"BNB Smart Chain",nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://56.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}});function pm(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const wN=pm({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),bN=pm({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});pm({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});pm({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});pm({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const ote={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},c1={getMethodsByChainNamespace(t){return ote[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const r={...t},n=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>n.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>n.add(s)),e.events&&Object.keys(e.events).forEach(s=>n.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&n.add(i)}),n.forEach(s=>{r[s]||(r[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{r[s]&&(r[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{r[s]&&(r[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{r[s]&&(r[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!r[a]||(r[a].rpcMap||(r[a].rpcMap={}),s.has(a)||(r[a].rpcMap={},s.add(a)),r[a].rpcMap[c]=o)})}return r},createNamespaces(t,e){const r=t.reduce((n,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];n[o]||(n[o]=this.createDefaultNamespace(o));const u=`${o}:${i}`,l=n[o];switch(l.chains.push(u),u){case wN.caipNetworkId:l.chains.push(wN.deprecatedCaipNetworkId);break;case bN.caipNetworkId:l.chains.push(bN.deprecatedCaipNetworkId);break}return l!=null&&l.rpcMap&&c&&(l.rpcMap[i]=c),n},{});return this.applyNamespaceOverrides(r,e)},resolveReownName:async t=>{var n;const e=await _k.resolveName(t);return((n=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:n.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const r=e.chains||[],n=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...r,...n]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null}};class u1{constructor({provider:e,namespace:r}){this.id=le.CONNECTOR_ID.WALLET_CONNECT,this.name=to.ConnectorNamesMap[le.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=to.ConnectorImageIds[le.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=$.getCaipNetworks.bind($),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=r}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const r=this.getCaipNetworks(),n=ue.state.universalProviderConfigOverride,s=c1.createNamespaces(r,n);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(r=>r.caipNetworkId);return up.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:ate})}}const ate=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class Mk{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=r=>$.getCaipNetworks(r),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:le.CONNECTOR_ID.AUTH,type:"AUTH",name:le.CONNECTOR_NAMES.AUTH,provider:e,imageId:to.ConnectorImageIds[le.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const r=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(n=>r.has(n.id)?!1:(r.add(n.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,r){_e.setStatus(e,r)}on(e,r){var n;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(n=this.eventListeners.get(e))==null||n.add(r)}off(e,r){const n=this.eventListeners.get(e);n&&n.delete(r)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,r){const n=this.eventListeners.get(e);n&&n.forEach(s=>s(r))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:r,providerType:n}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(n==="WALLET_CONNECT"){s.setDefaultChain(r.caipNetworkId);return}if(s&&n==="AUTH"){const o=s,a=(i=_e.state.preferredAccountTypes)==null?void 0:i[r.chainNamespace];await o.switchNetwork(r.caipNetworkId);const c=await o.getUser({chainId:r.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(r=>r instanceof u1);if(!e)throw new Error("WalletConnectConnector not found");return e}}class cte extends Mk{setUniversalProvider(e){this.addConnector(new u1({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const r=this.provider,n=((a=(o=(i=(s=r==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,u]=c.split(":");return u}).filter((c,u,l)=>l.indexOf(c)===u))||[];return Promise.resolve({accounts:n.map(c=>De.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,u;if(!(e.caipNetwork&&cn.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(_e.state.balanceLoading&&e.chainId===((c=$.state.activeCaipNetwork)==null?void 0:c.id))return{balance:_e.state.balance||"0.00",symbol:_e.state.balanceSymbol||""};const s=(await _e.fetchTokenBalance()).find(l=>{var h,d;return l.chainId===`${(h=e.caipNetwork)==null?void 0:h.chainNamespace}:${e.chainId}`&&l.symbol===((d=e.caipNetwork)==null?void 0:d.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((u=e.caipNetwork)==null?void 0:u.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:r,message:n,address:s}=e;if(!r)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=$.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===le.CHAIN.SOLANA?i=(await r.request({method:"solana_signMessage",params:{message:LR.encode(new TextEncoder().encode(n)),pubkey:s}},(a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await r.request({method:"personal_sign",params:[n,s]},(c=$.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async getProfile(){return Promise.resolve({profileImage:"",profileName:""})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}async getEnsAddress(){return Promise.resolve({address:!1})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,u;const{caipNetwork:r}=e,n=this.getWalletConnectConnector();if(r.chainNamespace===le.CHAIN.EVM)try{await((s=n.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:WT(r.id)}]}))}catch(l){if(l.code===ac.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||l.code===ac.ERROR_INVALID_CHAIN_ID||l.code===ac.ERROR_CODE_DEFAULT||((o=(i=l==null?void 0:l.data)==null?void 0:i.originalError)==null?void 0:o.code)===ac.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((u=n.provider)==null?void 0:u.request({method:"wallet_addEthereumChain",params:[{chainId:WT(r.id),rpcUrls:[(a=r==null?void 0:r.rpcUrls.chainDefault)==null?void 0:a.http],chainName:r.name,nativeCurrency:r.nativeCurrency,blockExplorerUrls:[(c=r.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}n.provider.setDefaultChain(r.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(n=>n.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}class ute{constructor(e){this.chainNamespaces=[],this.reportedAlertErrors={},this.getCaipNetwork=(r,n)=>{var s,i,o,a;if(r){const c=(i=(s=$.getNetworkData(r))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(l=>l.id===n);if(c)return c;const u=(o=$.getNetworkData(r))==null?void 0:o.caipNetwork;return u||((a=$.getRequestedCaipNetworks(r).filter(l=>l.chainNamespace===r))==null?void 0:a[0])}return $.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const r=this.getCaipNetwork();if(r)return r.id},this.getCaipNetworks=r=>$.getCaipNetworks(r),this.getActiveChainNamespace=()=>$.state.activeChain,this.setRequestedCaipNetworks=(r,n)=>{$.setRequestedCaipNetworks(r,n)},this.getApprovedCaipNetworkIds=()=>$.getAllApprovedCaipNetworkIds(),this.getCaipAddress=r=>$.state.activeChain===r||!r?$.state.activeCaipAddress:$.getAccountProp("caipAddress",r),this.setClientId=r=>{ke.setClientId(r)},this.getProvider=r=>st.getProvider(r),this.getProviderType=r=>st.getProviderId(r),this.getPreferredAccountType=r=>{var n;return(n=_e.state.preferredAccountTypes)==null?void 0:n[r]},this.setCaipAddress=(r,n)=>{_e.setCaipAddress(r,n)},this.setBalance=(r,n,s)=>{_e.setBalance(r,n,s)},this.setProfileName=(r,n)=>{_e.setProfileName(r,n)},this.setProfileImage=(r,n)=>{_e.setProfileImage(r,n)},this.setUser=(r,n)=>{_e.setUser(r,n),ue.state.enableEmbedded&&ar.close()},this.resetAccount=r=>{_e.resetAccount(r)},this.setCaipNetwork=r=>{$.setActiveCaipNetwork(r)},this.setCaipNetworkOfNamespace=(r,n)=>{$.setChainNetworkData(n,{caipNetwork:r})},this.setAllAccounts=(r,n)=>{_e.setAllAccounts(r,n),ue.setHasMultipleAddresses((r==null?void 0:r.length)>1)},this.setStatus=(r,n)=>{_e.setStatus(r,n),Me.isConnected()?be.setConnectionStatus("connected"):be.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=r=>$.getAccountProp("address",r),this.setConnectors=r=>{const n=[...Me.state.allConnectors,...r];Me.setConnectors(n)},this.fetchIdentity=r=>ke.fetchIdentity(r),this.getReownName=r=>_k.getNamesForAddress(r),this.getConnectors=()=>Me.getConnectors(),this.getConnectorImage=r=>F2.getConnectorImage(r),this.setConnectedWalletInfo=(r,n)=>{const s=st.getProviderId(n),i=r?{...r,type:s}:void 0;_e.setConnectedWalletInfo(i,n)},this.getIsConnectedState=()=>!!$.state.activeCaipAddress,this.addAddressLabel=(r,n,s)=>{_e.addAddressLabel(r,n,s)},this.removeAddressLabel=(r,n)=>{_e.removeAddressLabel(r,n)},this.getAddress=r=>$.state.activeChain===r||!r?_e.state.address:$.getAccountProp("address",r),this.setApprovedCaipNetworksData=r=>$.setApprovedCaipNetworksData(r),this.resetNetwork=r=>{$.resetNetwork(r)},this.addConnector=r=>{Me.addConnector(r)},this.resetWcConnection=()=>{Bt.resetWcConnection()},this.setAddressExplorerUrl=(r,n)=>{_e.setAddressExplorerUrl(r,n)},this.setSmartAccountDeployed=(r,n)=>{_e.setSmartAccountDeployed(r,n)},this.setSmartAccountEnabledNetworks=(r,n)=>{$.setSmartAccountEnabledNetworks(r,n)},this.setPreferredAccountType=(r,n)=>{_e.setPreferredAccountType(r,n)},this.setEIP6963Enabled=r=>{ue.setEIP6963Enabled(r)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.initialize(e)}getChainNamespacesSet(e,r){const n=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(n!=null&&n.length)return[...new Set(n)];const s=r==null?void 0:r.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){this.initControllers(e),await this.initChainAdapters(),await this.injectModalUi(),this.sendInitializeEvent(e),co.set({initialized:!0}),await this.syncExistingConnection()}sendInitializeEvent(e){var n;const{...r}=e;delete r.adapters,delete r.universalProvider,Ot.sendEvent({type:"track",event:"INITIALIZE",properties:{...r,networks:e.networks.map(s=>s.id),siweConfig:{options:((n=e.siweConfig)==null?void 0:n.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&sn.setThemeMode(e.themeMode),e.themeVariables&&sn.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");$.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const r=this.getDefaultNetwork();r&&$.setActiveCaipNetwork(r)}initializeConnectionController(e){Bt.setWcBasic(e.basic??!1)}initializeConnectorController(){Me.initialize(this.chainNamespaces)}initializeOptionsController(e){var o;ue.setDebug(e.debug!==!1),ue.setEnableWalletConnect(e.enableWalletConnect!==!1),ue.setEnableWalletGuide(e.enableWalletGuide!==!1),ue.setEnableWallets(e.enableWallets!==!1),ue.setEIP6963Enabled(e.enableEIP6963!==!1),ue.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ue.setEnableAuthLogger(e.enableAuthLogger!==!1),ue.setCustomRpcUrls(e.customRpcUrls),ue.setSdkVersion(e.sdkVersion),ue.setProjectId(e.projectId),ue.setEnableEmbedded(e.enableEmbedded),ue.setAllWallets(e.allWallets),ue.setIncludeWalletIds(e.includeWalletIds),ue.setExcludeWalletIds(e.excludeWalletIds),ue.setFeaturedWalletIds(e.featuredWalletIds),ue.setTokens(e.tokens),ue.setTermsConditionsUrl(e.termsConditionsUrl),ue.setPrivacyPolicyUrl(e.privacyPolicyUrl),ue.setCustomWallets(e.customWallets),ue.setFeatures(e.features),ue.setAllowUnsupportedChain(e.allowUnsupportedChain),ue.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),ue.setDefaultAccountTypes(e.defaultAccountTypes);const r=be.getPreferredAccountTypes(),n={...ue.state.defaultAccountTypes,...r};_e.setPreferredAccountTypes(n);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),ue.setMetadata(e.metadata),ue.setDisableAppend(e.disableAppend),ue.setEnableEmbedded(e.enableEmbedded),ue.setSIWX(e.siwx),!e.projectId){np.open(Hf.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===le.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ue.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,r,n,s;return typeof window<"u"&&typeof document<"u"?{name:((r=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:r.textContent)||"",description:((n=document.querySelector('meta[property="og:description"]'))==null?void 0:n.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const r=this.getActiveChainNamespace();if(r){const n=Zl.getUnsupportedNetwork(`${r}:${e}`);$.setActiveCaipNetwork(n)}}getDefaultNetwork(){return Zl.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,r){return Zl.extendCaipNetwork(e,{customNetworkImageUrls:r.chainImages,projectId:r.projectId})}extendCaipNetworks(e){return Zl.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const r=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return r?Zl.extendCaipNetwork(r,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=$.state.activeChain,r=this.getAdapter(e),n=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!r)throw new Error("Adapter not found");const s=await r.connectWalletConnect(n);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),be.setConnectedNamespaces([...$.state.chains.keys()]),this.chainNamespaces.forEach(o=>{Me.setConnectorId(Tt.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:r,type:n,provider:s,chain:i,caipNetwork:o})=>{var f,p,g,m,w,v;const a=$.state.activeChain,c=i||a,u=this.getAdapter(c);if(i&&i!==a&&!o){const E=this.getCaipNetworks().find(A=>A.chainNamespace===i);E&&this.setCaipNetwork(E)}if(!u)throw new Error("Adapter not found");const l=this.getCaipNetwork(c),h=await u.connect({id:e,info:r,type:n,provider:s,chainId:(o==null?void 0:o.id)||(l==null?void 0:l.id),rpcUrl:((g=(p=(f=o==null?void 0:o.rpcUrls)==null?void 0:f.default)==null?void 0:p.http)==null?void 0:g[0])||((v=(w=(m=l==null?void 0:l.rpcUrls)==null?void 0:m.default)==null?void 0:w.http)==null?void 0:v[0])});if(!h)return;be.addConnectedNamespace(c),this.syncProvider({...h,chainNamespace:c});const{accounts:d}=await u.getAccounts({namespace:c,id:e});this.setAllAccounts(d,c),this.setStatus("connected",c)},reconnectExternal:async({id:e,info:r,type:n,provider:s})=>{var a;const i=$.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:r,type:n,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),be.addConnectedNamespace(i))},disconnect:async e=>{const r=e||$.state.activeChain,n=this.getAdapter(r),s=st.getProvider(r),i=st.getProviderId(r);await(n==null?void 0:n.disconnect({provider:s,providerType:i})),be.removeConnectedNamespace(r),st.resetChain(r),this.setUser(void 0,r),this.setStatus("disconnected",r)},checkInstalled:e=>e?e.some(r=>{var n;return!!((n=window.ethereum)!=null&&n[String(r)])}):!!window.ethereum,signMessage:async e=>{const r=this.getAdapter($.state.activeChain),n=await(r==null?void 0:r.signMessage({message:e,address:_e.state.address,provider:st.getProvider($.state.activeChain)}));return(n==null?void 0:n.signature)||""},sendTransaction:async e=>{if(e.chainNamespace===le.CHAIN.EVM){const r=this.getAdapter($.state.activeChain),n=st.getProvider($.state.activeChain),s=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:n}));return(s==null?void 0:s.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===le.CHAIN.EVM){const r=this.getAdapter($.state.activeChain),n=st.getProvider($.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(r==null?void 0:r.estimateGas({...e,provider:n,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var n;const e=this.getAdapter($.state.activeChain),r=await(e==null?void 0:e.getProfile({address:_e.state.address,chainId:Number((n=this.getCaipNetwork())==null?void 0:n.id)}));return(r==null?void 0:r.profileImage)||!1},getEnsAddress:async e=>{const r=this.getAdapter($.state.activeChain),n=this.getCaipNetwork();if(!n)return!1;const s=await(r==null?void 0:r.getEnsAddress({name:e,caipNetwork:n}));return(s==null?void 0:s.address)||!1},writeContract:async e=>{const r=this.getAdapter($.state.activeChain),n=this.getCaipNetwork(),s=this.getCaipAddress(),i=st.getProvider($.state.activeChain);if(!n||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(r==null?void 0:r.writeContract({...e,caipNetwork:n,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,r)=>{const n=this.getAdapter($.state.activeChain);return(n==null?void 0:n.parseUnits({value:e,decimals:r}))??0n},formatUnits:(e,r)=>{const n=this.getAdapter($.state.activeChain);return(n==null?void 0:n.formatUnits({value:e,decimals:r}))??"0"},getCapabilities:async e=>{const r=this.getAdapter($.state.activeChain);return await(r==null?void 0:r.getCapabilities(e))},grantPermissions:async e=>{const r=this.getAdapter($.state.activeChain);return await(r==null?void 0:r.grantPermissions(e))},revokePermissions:async e=>{const r=this.getAdapter($.state.activeChain);return r!=null&&r.revokePermissions?await r.revokePermissions(e):"0x"},walletGetAssets:async e=>{const r=this.getAdapter($.state.activeChain);return await(r==null?void 0:r.walletGetAssets(e))??{}}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},Bt.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var r,n,s,i,o;if(st.getProviderId($.state.activeChain)===Tt.CONNECTOR_TYPE_WALLET_CONNECT){const a=(n=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:n.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const r=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=st.getProvider(r),i=st.getProviderId(r);if(e.chainNamespace===$.state.activeChain){const o=this.getAdapter(r);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Tt.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(r);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:r})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(r=>{const n=r.chains||[],s=r.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Ro.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...n,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((r,n)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===n);return s?(s.construct({namespace:n,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),r[n]=s):r[n]=new cte({namespace:n,networks:this.getCaipNetworks()}),r},{})}async initChainAdapter(e){var r;this.onConnectors(e),this.listenAdapter(e),(r=this.chainAdapters)==null||r[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const r=this.getAdapter(e);r==null||r.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const r=this.getAdapter(e);if(!r)return;const n=be.getConnectionStatus();n==="connected"?this.setStatus("connecting",e):n==="disconnected"?(be.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),r.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(u=>u.id===i||u.caipNetworkId===i),a=$.state.activeChain===e,c=$.getAccountProp("address",e);if(o){const u=a&&s?s:c;u&&this.syncAccount({address:u,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),r.on("disconnect",this.disconnect.bind(this,e)),r.on("pendingTransactions",()=>{const s=_e.state.address,i=$.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),r.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=$.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=$.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=$.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e)})}async createUniversalProviderForAdapter(e){var r,n,s;await this.getUniversalProvider(),this.universalProvider&&((s=(n=(r=this.chainAdapters)==null?void 0:r[e])==null?void 0:n.setUniversalProvider)==null||s.call(n,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{const r=Me.getConnectorId(e);switch(this.setStatus("connecting",e),r){case le.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case le.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(r){console.warn("AppKit couldn't sync existing connection",r),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var o,a,c;const r=this.getAdapter(e),n=Me.getConnectorId(e),s=this.getCaipNetwork(e),i=Me.getConnectors(e).find(u=>u.id===n);try{if(!r||!i)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(r==null?void 0:r.syncConnection({namespace:e,id:i.id,chainId:s.id,rpcUrl:(c=(a=(o=s==null?void 0:s.rpcUrls)==null?void 0:o.default)==null?void 0:a.http)==null?void 0:c[0]}));if(u){const l=await(r==null?void 0:r.getAccounts({namespace:e,id:i.id}));l&&l.accounts.length>0?this.setAllAccounts(l.accounts,e):this.setAllAccounts([De.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async r=>{var a,c,u,l,h;const n=this.getAdapter(r),s=((l=(u=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:u[r])==null?void 0:l.accounts)||[],i=(h=$.state.activeCaipNetwork)==null?void 0:h.id,o=s.find(d=>{const{chainId:f}=Ro.parseCaipAddress(d);return f===(i==null?void 0:i.toString())})||s[0];if(o){const d=Ro.validateCaipAddress(o),{chainId:f,address:p}=Ro.parseCaipAddress(d);if(st.setProviderId(r,Tt.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&$.state.activeCaipNetwork&&(n==null?void 0:n.namespace)!==le.CHAIN.EVM){const g=n==null?void 0:n.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:$.state.activeCaipNetwork});st.setProvider(r,g)}else st.setProvider(r,this.universalProvider);Me.setConnectorId(le.CONNECTOR_ID.WALLET_CONNECT,r),be.addConnectedNamespace(r),this.syncWalletConnectAccounts(r),await this.syncAccount({address:p,chainId:f,chainNamespace:r})}else this.setStatus("disconnected",r);await $.setApprovedCaipNetworksData(r)});await Promise.all(e)}syncWalletConnectAccounts(e){var n,s,i,o,a;const r=(a=(o=(i=(s=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:u}=Ro.parseCaipAddress(c);return u}).filter((c,u,l)=>l.indexOf(c)===u);r&&this.setAllAccounts(r.map(c=>De.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:r,id:n,chainNamespace:s}){st.setProviderId(s,e),st.setProvider(s,r),Me.setConnectorId(n,s)}async syncAccount(e){var h,d;const r=e.chainNamespace===$.state.activeChain,n=$.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=be.getActiveNetworkProps(),c=i||a,u=((h=$.state.activeCaipNetwork)==null?void 0:h.name)===le.UNSUPPORTED_NETWORK_NAME,l=$.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(u&&!l)&&c){let f=this.getCaipNetworks().find(m=>m.id.toString()===c.toString()),p=this.getCaipNetworks().find(m=>m.chainNamespace===o);if(!l&&!f&&!p){const m=this.getApprovedCaipNetworkIds()||[],w=m.find(E=>{var A;return((A=Ro.parseCaipNetworkId(E))==null?void 0:A.chainId)===c.toString()}),v=m.find(E=>{var A;return((A=Ro.parseCaipNetworkId(E))==null?void 0:A.chainNamespace)===o});f=this.getCaipNetworks().find(E=>E.caipNetworkId===w),p=this.getCaipNetworks().find(E=>E.caipNetworkId===v||"deprecatedCaipNetworkId"in E&&E.deprecatedCaipNetworkId===v)}const g=f||p;(g==null?void 0:g.chainNamespace)===$.state.activeChain?ue.state.enableNetworkSwitch&&!ue.state.allowUnsupportedChain&&((d=$.state.activeCaipNetwork)==null?void 0:d.name)===le.UNSUPPORTED_NETWORK_NAME?$.showUnsupportedChainUI():this.setCaipNetwork(g):r||n&&this.setCaipNetworkOfNamespace(n,o),this.syncConnectedWalletInfo(o),S0.isLowerCaseMatch(s,_e.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),r?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:n==null?void 0:n.id,chainNamespace:o})}}async syncAccountInfo(e,r,n){const s=this.getCaipAddress(n),i=r||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${n}:${i}:${e}`;this.setCaipAddress(o,n),await this.syncIdentity({address:e,chainId:i,chainNamespace:n})}async syncReownName(e,r){try{const n=await this.getReownName(e);if(n[0]){const s=n[0];this.setProfileName(s.name,r)}else this.setProfileName(null,r)}catch{this.setProfileName(null,r)}}syncConnectedWalletInfo(e){var s;const r=Me.getConnectorId(e),n=st.getProviderId(e);if(n===Tt.CONNECTOR_TYPE_ANNOUNCED||n===Tt.CONNECTOR_TYPE_INJECTED){if(r){const i=this.getConnectors().find(o=>o.id===r);if(i){const{info:o,name:a,imageUrl:c}=i,u=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:u,...o},e)}}}else if(n===Tt.CONNECTOR_TYPE_WALLET_CONNECT){const i=st.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(r)if(r===le.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===le.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}else this.setConnectedWalletInfo({name:r},e)}async syncBalance(e){!$2.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(n=>{var s;return n.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async updateNativeBalance(e,r,n){const s=this.getAdapter(n),i=$.getCaipNetworkByNamespace(n,r);if(s){const o=await s.getBalance({address:e,chainId:r,caipNetwork:i,tokens:this.options.tokens});this.setBalance(o.balance,o.symbol,n)}}async initializeUniversalAdapter(){var n,s,i,o,a,c,u,l,h,d;const e=wZ.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),r={projectId:(n=this.options)==null?void 0:n.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(u=this.options)==null?void 0:u.metadata.url:"",icons:(l=this.options)!=null&&l.metadata?(h=this.options)==null?void 0:h.metadata.icons:[""]},logger:e};ue.setManualWCControl(!!((d=this.options)!=null&&d.manualWCControl)),this.universalProvider=this.options.universalProvider??await TQ.init(r),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{Bt.setUri(e)}),this.universalProvider.on("connect",Bt.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),Bt.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const r=this.getCaipNetworks().find(s=>s.id==e),n=this.getCaipNetwork();if(!r){this.setUnsupportedNetwork(e);return}(n==null?void 0:n.id)!==(r==null?void 0:r.id)&&this.setCaipNetwork(r)}),this.universalProvider.on("session_event",e=>{if(c1.isSessionEventData(e)){const{name:r,data:n}=e.params.event;r==="accountsChanged"&&Array.isArray(n)&&De.isCaipAddress(n[0])&&this.syncAccount(Ro.parseCaipAddress(n[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&De.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Ot.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const r=Object.entries(Hf.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[n,s]=r??[],{message:i,alertErrorKey:o}=s??{};if(n&&i&&!this.reportedAlertErrors[n]){const a=Hf.ALERT_ERRORS[o];a&&(np.open(a,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){var r;if(e)return(r=this.chainAdapters)==null?void 0:r[e]}createAdapter(e){var s;if(!e)return;const r=e.namespace;if(!r)return;this.createClients();const n=e;n.namespace=r,n.construct({namespace:r,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(r)||this.chainNamespaces.push(r),this.chainAdapters&&(this.chainAdapters[r]=n)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&Bt.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return ar.open({...e,data:{swap:e.arguments}})}return ar.open(e)}async close(){await this.injectModalUi(),ar.close()}setLoading(e,r){ar.setLoading(e,r)}async disconnect(e){await Bt.disconnect(e)}getError(){return""}getChainId(){var e;return(e=$.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const r=this.getCaipNetworks().find(n=>n.id===e.id);if(!r){np.open(Hf.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await $.switchActiveNetwork(r)}getWalletProvider(){return $.state.activeChain?st.state.providers[$.state.activeChain]:null}getWalletProviderType(){return st.getProviderId($.state.activeChain)}subscribeProviders(e){return st.subscribeProviders(e)}getThemeMode(){return sn.state.themeMode}getThemeVariables(){return sn.state.themeVariables}setThemeMode(e){sn.setThemeMode(e),Lk(sn.state.themeMode)}setTermsConditionsUrl(e){ue.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ue.setPrivacyPolicyUrl(e)}setThemeVariables(e){sn.setThemeVariables(e),ste(sn.state.themeVariables)}subscribeTheme(e){return sn.subscribe(e)}getWalletInfo(){return _e.state.connectedWalletInfo}getAccount(e){var i;const r=Me.getAuthConnector(e),n=$.getAccountData(e),s=$.state.activeChain;if(n)return{allAccounts:n.allAccounts,caipAddress:n.caipAddress,address:De.getPlainAddress(n.caipAddress),isConnected:!!n.caipAddress,status:n.status,embeddedWalletInfo:r?{user:n.user?{...n.user,username:be.getConnectedSocialUsername()}:void 0,authProvider:n.socialProvider||"email",accountType:(i=n.preferredAccountTypes)==null?void 0:i[e||s],isSmartAccountDeployed:!!n.smartAccountDeployed}:void 0}}subscribeAccount(e,r){const n=()=>{const s=this.getAccount(r);s&&e(s)};r?$.subscribeChainProp("accountState",n,r):$.subscribe(n),Me.subscribe(n)}subscribeNetwork(e){return $.subscribe(({activeCaipNetwork:r})=>{e({caipNetwork:r,chainId:r==null?void 0:r.id,caipNetworkId:r==null?void 0:r.caipNetworkId})})}subscribeWalletInfo(e){return _e.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){_e.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){$.subscribeKey("activeCaipNetwork",e)}getState(){return co.state}subscribeState(e){return co.subscribe(e)}showErrorMessage(e){Vr.showError(e)}showSuccessMessage(e){Vr.showSuccess(e)}getEvent(){return{...Ot.state}}subscribeEvents(e){return Ot.subscribe(e)}replace(e){wt.replace(e)}redirect(e){wt.push(e)}popTransactionStack(e){wt.popTransactionStack(e)}isOpen(){return ar.state.open}isTransactionStackEmpty(){return wt.state.transactionStack.length===0}isTransactionShouldReplaceView(){var e;return(e=wt.state.transactionStack[wt.state.transactionStack.length-1])==null?void 0:e.replace}static getInstance(){return this.instance}updateFeatures(e){ue.setFeatures(e)}updateOptions(e){const n={...ue.state||{},...e};ue.setOptions(n)}setConnectMethodsOrder(e){ue.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ue.setWalletFeaturesOrder(e)}setCollapseWallets(e){ue.setCollapseWallets(e)}setSocialsOrder(e){ue.setSocialsOrder(e)}getConnectMethodsOrder(){return c_.getConnectOrderMethod(ue.state.features,Me.getConnectors())}addNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const n=this.extendCaipNetwork(r,this.options);this.getCaipNetworks().find(s=>s.id===n.id)||$.addNetwork(n)}removeNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===r)&&$.removeNetwork(e,r)}}let vN=!1;class lte extends ute{setupAuthConnectorListeners(e){e.onRpcRequest(r=>{gs.checkIfRequestExists(r)?gs.checkIfRequestIsSafe(r)||this.handleUnsafeRPCRequest():(this.open(),console.error(gr.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:r.method}),setTimeout(()=>{this.showErrorMessage(gr.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack(!0))}),e.onRpcSuccess((r,n)=>{const s=gs.checkIfRequestIsSafe(n),i=_e.state.address,o=$.state.activeCaipNetwork;s||(this.isTransactionStackEmpty()?(this.close(),i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace)):(this.popTransactionStack(),i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace)))}),e.onNotConnected(()=>{const r=$.state.activeChain;Me.getConnectorId(r)===le.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,r),this.setLoading(!1,r))}),e.onConnect(async r=>{var a,c;const n=$.state.activeChain,s=n===le.CHAIN.EVM?`eip155:${r.chainId}:${r.address}`:`${r.chainId}:${r.address}`,i=r.preferredAccountType||((a=_e.state.preferredAccountTypes)==null?void 0:a[n])||ue.state.defaultAccountTypes[n];S0.isLowerCaseMatch(r.address,_e.state.address)||this.syncIdentity({address:r.address,chainId:r.chainId,chainNamespace:n}),this.setCaipAddress(s,n),this.setUser({..._e.state.user||{},...r},n),this.setSmartAccountDeployed(!!r.smartAccountDeployed,n),this.setPreferredAccountType(i,n);const o=(c=r.accounts)==null?void 0:c.map(u=>{var l;return De.createAccount(n,u.address,u.type||((l=_e.state.preferredAccountTypes)==null?void 0:l[n])||ue.state.defaultAccountTypes[n])});this.setAllAccounts(o||[De.createAccount(n,r.address,r.preferredAccountType||i)],n),await e.getSmartAccountEnabledNetworks(),this.setLoading(!1,n)}),e.onSocialConnected(({userName:r})=>{this.setUser({..._e.state.user||{},username:r},$.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(r=>{this.setSmartAccountEnabledNetworks(r,$.state.activeChain)}),e.onSetPreferredAccount(({address:r,type:n})=>{r&&this.setPreferredAccountType(n,$.state.activeChain)})}async syncAuthConnector(e,r){var l,h,d,f;const n=le.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if(!n)return;this.setLoading(!0,r);const s=e.getLoginEmailUsed();this.setLoading(s,r),s&&this.setStatus("connecting",r);const i=e.getEmail(),o=e.getUsername();this.setUser({...((l=_e.state)==null?void 0:l.user)||{},username:o,email:i},$.state.activeChain),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=sn.getSnapshot(),u=ue.getSnapshot();e.syncDappData({metadata:u.metadata,sdkVersion:u.sdkVersion,projectId:u.projectId,sdkType:u.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:ta(c.themeVariables,c.themeMode)}),r&&n&&(a&&((h=this.connectionControllerClient)!=null&&h.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:le.CONNECTOR_ID.AUTH,info:{name:le.CONNECTOR_ID.AUTH},type:Tt.CONNECTOR_TYPE_AUTH,provider:e,chainId:(d=$.state.activeCaipNetwork)==null?void 0:d.id,chain:r})),this.setStatus("connected",r)):Me.getConnectorId(r)===le.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",r),be.removeConnectedNamespace(r))),this.setLoading(!1,r)}async checkExistingTelegramSocialConnection(e){var r;try{if(!De.isTelegram())return;const n=be.getTelegramSocialProvider();if(!n||typeof window>"u"||typeof document>"u")return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;_e.setSocialProvider(n,e),await((r=this.authProvider)==null?void 0:r.init());const o=Me.getAuthConnector();n&&o&&(this.setLoading(!0,e),await o.provider.connectSocial(i),await Bt.connectExternal(o,o.chain),be.setConnectedSocialProvider(n),be.removeTelegramSocialProvider(),Ot.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:n}}))}catch(n){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",n)}try{const n=new URL(window.location.href);n.searchParams.delete("result_uri"),window.history.replaceState({},document.title,n.toString())}catch(n){console.error("tma social login failed",n)}}createAuthProvider(e){var o,a,c,u,l,h,d,f,p,g,m,w,v;if(!le.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const n=((a=(o=this.options)==null?void 0:o.features)==null?void 0:a.email)===void 0?cn.DEFAULT_FEATURES.email:(u=(c=this.options)==null?void 0:c.features)==null?void 0:u.email,s=(h=(l=this.options)==null?void 0:l.features)!=null&&h.socials?((p=(f=(d=this.options)==null?void 0:d.features)==null?void 0:f.socials)==null?void 0:p.length)>0:cn.DEFAULT_FEATURES.socials,i=n||s;!this.authProvider&&((g=this.options)!=null&&g.projectId)&&i&&(this.authProvider=hp.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(m=this.getCaipNetwork(e))==null?void 0:m.caipNetworkId,onTimeout:()=>{np.open(Hf.ALERT_ERRORS.SOCIALS_TIMEOUT,"error")}}),co.subscribeOpen(E=>{var A;!E&&this.isTransactionStackEmpty()&&((A=this.authProvider)==null||A.rejectRpcRequests())}),e===le.CHAIN.EVM&&((w=_e.state.preferredAccountTypes)!=null&&w.eip155)&&this.authProvider.setPreferredAccount((v=_e.state.preferredAccountTypes)==null?void 0:v.eip155),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var r,n,s;this.createAuthProvider(e),this.authProvider&&((s=(n=(r=this.chainAdapters)==null?void 0:r[e])==null?void 0:n.setAuthProvider)==null||s.call(n,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Ue.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var i,o;if(!e)return;const r=$.state.activeChain,n=e.chainNamespace,s=this.getAddressByChainNamespace(e.chainNamespace);if(e.chainNamespace===$.state.activeChain&&s){const a=this.getAdapter(n),c=st.getProvider(n),u=st.getProviderId(n);await(a==null?void 0:a.switchNetwork({caipNetwork:e,provider:c,providerType:u})),this.setCaipNetwork(e)}else{const c=st.getProviderId(r)===Tt.CONNECTOR_TYPE_AUTH,u=st.getProviderId(n),l=u===Tt.CONNECTOR_TYPE_AUTH,h=le.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if((c||l)&&h)try{$.state.activeChain=e.chainNamespace,await((o=(i=this.connectionControllerClient)==null?void 0:i.connectExternal)==null?void 0:o.call(i,{id:le.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:n,chainId:e.id,type:Tt.CONNECTOR_TYPE_AUTH,caipNetwork:e})),this.setCaipNetwork(e)}catch{const f=this.getAdapter(n);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Tt.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:n}))}}async initChainAdapter(e){await super.initChainAdapter(e),this.createAuthProviderForAdapter(e)}async syncIdentity({address:e,chainId:r,chainNamespace:n}){var o;const s=`${n}:${r}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(n!==le.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,n),this.setProfileImage(null,n);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});if(this.setProfileName(a,n),this.setProfileImage(c,n),!a){const u=this.getAdapter(n),l=await(u==null?void 0:u.getProfile({address:e,chainId:Number(r)}));l!=null&&l.profileName?(this.setProfileName(l.profileName,n),l.profileImage&&this.setProfileImage(l.profileImage,n)):(await this.syncReownName(e,n),this.setProfileImage(null,n))}}catch{await this.syncReownName(e,n),r!==1&&this.setProfileImage(null,n)}}syncConnectedWalletInfo(e){const r=st.getProviderId(e);if(r===Tt.CONNECTOR_TYPE_AUTH){const n=this.authProvider;if(n){const s=be.getConnectedSocialProvider()??"email",i=n.getEmail()??n.getUsername();this.setConnectedWalletInfo({name:r,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(!vN&&De.isClient()){const e={...cn.DEFAULT_FEATURES,...this.options.features},r=[];if(e&&((e.email||e.socials&&e.socials.length)&&r.push(Ls(()=>import("./embedded-wallet-XxPhQvOM.js"),__vite__mapDeps([3,4,1,2,5,6,7,8,9,10,11,12]))),e.email&&r.push(Ls(()=>import("./email-C7KDA6wl.js"),__vite__mapDeps([13,4,1,2,12,8,11,7,14,9]))),e.socials&&r.push(Ls(()=>import("./socials-Dse2mhxa.js"),__vite__mapDeps([15,4,1,2,16,7,8,17,11,12,18,6,19]))),e.swaps&&r.push(Ls(()=>import("./swaps-COcWKwN4.js"),__vite__mapDeps([20,4,1,2,7,8,21,22,23,6,11,19,9]))),e.send&&r.push(Ls(()=>import("./send-CDGvmRHM.js"),__vite__mapDeps([24,4,1,2,7,8,11,12,23,6,9,25]))),e.receive&&r.push(Ls(()=>import("./receive-CGsY7HqW.js"),__vite__mapDeps([26,4,1,2,27,6,18]))),e.onramp&&r.push(Ls(()=>import("./onramp-5Los2dD0.js"),__vite__mapDeps([28,4,1,2,29,19,11,6,8,30,16,7,12,9]))),e.history&&r.push(Ls(()=>import("./transactions-DUW6Uxp3.js"),__vite__mapDeps([31,4,1,2,32,29,19,11,12,6])))),await Promise.all([...r,Ls(()=>import("./index-BEZaGLX2.js"),__vite__mapDeps([33,4,1,2,6,8,25,11,34,22,10,30,7,32,29,19,12,21,9,14,16,17,5,27,18])),Ls(()=>import("./w3m-modal-Dx11kma-.js"),__vite__mapDeps([35,4,1,2,10,6,11,8,22,34]))]),!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!ue.state.disableAppend&&!ue.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}vN=!0}}}let jt;function hte(t){t&&(jt=t)}function Dpe(t){const{providers:e,providerIds:r}=s1(st.state),n=e[t],s=r[t];return{walletProvider:n,walletProviderType:s}}function Upe(){if(!jt)throw new Error('Please call "createAppKit" before using "useAppKitTheme" hook');function t(o){o&&(jt==null||jt.setThemeMode(o))}function e(o){o&&(jt==null||jt.setThemeVariables(o))}const[r,n]=J.useState(jt.getThemeMode()),[s,i]=J.useState(jt.getThemeVariables());return J.useEffect(()=>{const o=jt==null?void 0:jt.subscribeTheme(a=>{n(a.themeMode),i(a.themeVariables)});return()=>{o==null||o()}},[]),{themeMode:r,themeVariables:s,setThemeMode:t,setThemeVariables:e}}function Bpe(){if(!jt)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(r){await(jt==null?void 0:jt.open(r))}async function e(){await(jt==null?void 0:jt.close())}return{open:t,close:e}}function $pe(){if(!jt)throw new Error('Please call "createAppKit" before using "useAppKitEvents" hook');const[t,e]=J.useState(jt.getEvent());return J.useEffect(()=>{const r=jt==null?void 0:jt.subscribeEvents(n=>{e({...n})});return()=>{r==null||r()}},[]),t}const dte="1.7.3";let iu;function fte(t){return iu||(iu=new lte({...t,sdkVersion:De.generateSdkVersion(t.adapters??[],"react",dte)}),hte(iu)),iu}function Lpe(){const{caipNetwork:t,caipNetworkId:e,chainId:r}=mZ();function n(s){iu==null||iu.switchNetwork(s)}return{caipNetwork:t,caipNetworkId:e,chainId:r,switchNetwork:n}}const pte="6.13.5";function gte(t,e,r){const n=e.split("|").map(i=>i.trim());for(let i=0;i<n.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${r}`,s.value=t,s}async function vn(t){const e=Object.keys(t);return(await Promise.all(e.map(n=>Promise.resolve(t[n])))).reduce((n,s,i)=>(n[e[i]]=s,n),{})}function xe(t,e,r){for(let n in e){let s=e[n];const i=r?r[n]:null;i&&gte(s,i,n),Object.defineProperty(t,n,{enumerable:!0,value:s,writable:!1})}}function oh(t){if(t==null)return"null";if(Array.isArray(t))return"[ "+t.map(oh).join(", ")+" ]";if(t instanceof Uint8Array){const e="0123456789abcdef";let r="0x";for(let n=0;n<t.length;n++)r+=e[t[n]>>4],r+=e[t[n]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return oh(t.toJSON());switch(typeof t){case"boolean":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"number":return t.toString();case"string":return JSON.stringify(t);case"object":{const e=Object.keys(t);return e.sort(),"{ "+e.map(r=>`${oh(r)}: ${oh(t[r])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Kr(t,e){return t&&t.code===e}function l1(t){return Kr(t,"CALL_EXCEPTION")}function Wt(t,e,r){let n=t;{const i=[];if(r){if("message"in r||"code"in r||"name"in r)throw new Error(`value will overwrite populated values: ${oh(r)}`);for(const o in r){if(o==="shortMessage")continue;const a=r[o];i.push(o+"="+oh(a))}}i.push(`code=${e}`),i.push(`version=${pte}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return xe(s,{code:e}),r&&Object.assign(s,r),s.shortMessage==null&&xe(s,{shortMessage:n}),s}function ne(t,e,r,n){if(!t)throw Wt(e,r,n)}function z(t,e,r,n){ne(t,e,"INVALID_ARGUMENT",{argument:r,value:n})}function Fk(t,e,r){r==null&&(r=""),r&&(r=": "+r),ne(t>=e,"missing argument"+r,"MISSING_ARGUMENT",{count:t,expectedCount:e}),ne(t<=e,"too many arguments"+r,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");t.push(e)}catch{}return t},[]);function gm(t,e,r){if(r==null&&(r=""),t!==e){let n=r,s="new";r&&(n+=".",s+=" "+r),ne(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function jk(t,e,r){if(t instanceof Uint8Array)return r?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<n.length;i++)n[i]=parseInt(t.substring(s,s+2),16),s+=2;return n}z(!1,"invalid BytesLike value",e||"value",t)}function nt(t,e){return jk(t,e,!1)}function _n(t,e){return jk(t,e,!0)}function Pt(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function h1(t){return Pt(t,!0)||t instanceof Uint8Array}const EN="0123456789abcdef";function Ae(t){const e=nt(t);let r="0x";for(let n=0;n<e.length;n++){const s=e[n];r+=EN[(s&240)>>4]+EN[s&15]}return r}function lr(t){return"0x"+t.map(e=>Ae(e).substring(2)).join("")}function mh(t){return Pt(t,!0)?(t.length-2)/2:nt(t).length}function rr(t,e,r){const n=nt(t);return r!=null&&r>n.length&&ne(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r}),Ae(n.slice(e??0,r??n.length))}function zk(t,e,r){const n=nt(t);ne(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),r?s.set(n,e-n.length):s.set(n,0),Ae(s)}function tl(t,e){return zk(t,e,!0)}function mte(t,e){return zk(t,e,!1)}const N0=BigInt(0),wi=BigInt(1),l_=9007199254740991;function bw(t,e){const r=x0(t,"value"),n=BigInt(He(e,"width"));if(ne(r>>n===N0,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),r>>n-wi){const s=(wi<<n)-wi;return-((~r&s)+wi)}return r}function Hk(t,e){let r=Se(t,"value");const n=BigInt(He(e,"width")),s=wi<<n-wi;if(r<N0){r=-r,ne(r<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(wi<<n)-wi;return(~r&i)+wi}else ne(r<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return r}function ou(t,e){const r=x0(t,"value"),n=BigInt(He(e,"bits"));return r&(wi<<n)-wi}function Se(t,e){switch(typeof t){case"bigint":return t;case"number":return z(Number.isInteger(t),"underflow",e||"value",t),z(t>=-9007199254740991&&t<=l_,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(r){z(!1,`invalid BigNumberish string: ${r.message}`,e||"value",t)}}z(!1,"invalid BigNumberish value",e||"value",t)}function x0(t,e){const r=Se(t,e);return ne(r>=N0,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),r}const _N="0123456789abcdef";function O0(t){if(t instanceof Uint8Array){let e="0x0";for(const r of t)e+=_N[r>>4],e+=_N[r&15];return BigInt(e)}return Se(t)}function He(t,e){switch(typeof t){case"bigint":return z(t>=-9007199254740991&&t<=l_,"overflow",e||"value",t),Number(t);case"number":return z(Number.isInteger(t),"underflow",e||"value",t),z(t>=-9007199254740991&&t<=l_,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return He(BigInt(t),e)}catch(r){z(!1,`invalid numeric string: ${r.message}`,e||"value",t)}}z(!1,"invalid numeric value",e||"value",t)}function yte(t){return He(O0(t))}function Ec(t,e){let n=x0(t,"value").toString(16);if(e==null)n.length%2&&(n="0"+n);else{const s=He(e,"width");for(ne(s*2>=n.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});n.length<s*2;)n="0"+n}return"0x"+n}function Cn(t){const e=x0(t,"value");if(e===N0)return new Uint8Array([]);let r=e.toString(16);r.length%2&&(r="0"+r);const n=new Uint8Array(r.length/2);for(let s=0;s<n.length;s++){const i=s*2;n[s]=parseInt(r.substring(i,i+2),16)}return n}function ah(t){let e=Ae(h1(t)?t:Cn(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const AN="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const CN=BigInt(58);function wte(t){const e=nt(t);let r=O0(e),n="";for(;r;)n=AN[Number(r%CN)]+n,r/=CN;for(let s=0;s<e.length&&!e[s];s++)n=AN[0]+n;return n}function bte(t){t=atob(t);const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return nt(e)}function vte(t){const e=nt(t);let r="";for(let n=0;n<e.length;n++)r+=String.fromCharCode(e[n]);return btoa(r)}var Ah;class qk{constructor(e,r,n){K(this,"filter");K(this,"emitter");Z(this,Ah);k(this,Ah,r),xe(this,{emitter:e,filter:n})}async removeListener(){_(this,Ah)!=null&&await this.emitter.off(this.filter,_(this,Ah))}}Ah=new WeakMap;function Ete(t,e,r,n,s){z(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function Wk(t,e,r,n,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<r.length&&r[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?r.length-e-1:0}function _te(t,e,r,n,s){return t==="OVERLONG"?(z(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),n.push(s),0):(n.push(65533),Wk(t,e,r))}const Ate=Object.freeze({error:Ete,ignore:Wk,replace:_te});function Cte(t,e){e==null&&(e=Ate.error);const r=nt(t,"bytes"),n=[];let s=0;for(;s<r.length;){const i=r[s++];if(i>>7===0){n.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,r,n):s+=e("BAD_PREFIX",s-1,r,n);continue}if(s-1+o>=r.length){s+=e("OVERRUN",s-1,r,n);continue}let c=i&(1<<8-o-1)-1;for(let u=0;u<o;u++){let l=r[s];if((l&192)!=128){s+=e("MISSING_CONTINUE",s,r,n),c=null;break}c=c<<6|l&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,r,n,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,r,n,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,r,n,c);continue}n.push(c)}}return n}function uo(t,e){z(typeof t=="string","invalid string value","str",t);let r=[];for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);if(s<128)r.push(s);else if(s<2048)r.push(s>>6|192),r.push(s&63|128);else if((s&64512)==55296){n++;const i=t.charCodeAt(n);z(n<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128)}else r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128)}return new Uint8Array(r)}function Ste(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function vw(t,e){return Ste(Cte(t,e))}function Vk(t){async function e(r,n){ne(n==null||!n.cancelled,"request cancelled before sending","CANCELLED");const s=r.url.split(":")[0].toLowerCase();ne(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),ne(s==="https"||!r.credentials||r.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=Wt("request timeout","TIMEOUT"),o.abort()},r.timeout);n&&n.addListener(()=>{i=Wt("request cancelled","CANCELLED"),o.abort()});const c={method:r.method,headers:new Headers(Array.from(r)),body:r.body||void 0,signal:o.signal};let u;try{u=await fetch(r.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const l={};u.headers.forEach((f,p)=>{l[p.toLowerCase()]=f});const h=await u.arrayBuffer(),d=h==null?null:new Uint8Array(h);return{statusCode:u.status,statusMessage:u.statusText,headers:l,body:d}}return e}const Ite=12,Tte=250;let SN=Vk();const Nte=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),xte=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Av=!1;async function Gk(t,e){try{const r=t.match(Nte);if(!r)throw new Error("invalid data");return new pc(200,"OK",{"content-type":r[1]||"text/plain"},r[2]?bte(r[3]):Rte(r[3]))}catch{return new pc(599,"BAD REQUEST (invalid data: URI)",{},null,new mo(t))}}function Kk(t){async function e(r,n){try{const s=r.match(xte);if(!s)throw new Error("invalid link");return new mo(`${t}${s[2]}`)}catch{return new pc(599,"BAD REQUEST (invalid IPFS URI)",{},null,new mo(r))}}return e}const ny={data:Gk,ipfs:Kk("https://gateway.ipfs.io/ipfs/")},Jk=new WeakMap;var hu,Ma;class Ote{constructor(e){Z(this,hu);Z(this,Ma);k(this,hu,[]),k(this,Ma,!1),Jk.set(e,()=>{if(!_(this,Ma)){k(this,Ma,!0);for(const r of _(this,hu))setTimeout(()=>{r()},0);k(this,hu,[])}})}addListener(e){ne(!_(this,Ma),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),_(this,hu).push(e)}get cancelled(){return _(this,Ma)}checkSignal(){ne(!this.cancelled,"cancelled","CANCELLED",{})}}hu=new WeakMap,Ma=new WeakMap;function sy(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var Ch,Sh,hi,Fo,Ih,Th,Ir,us,jo,du,fu,pu,qi,di,Fa,gu,qf;const Vw=class Vw{constructor(e){Z(this,gu);Z(this,Ch);Z(this,Sh);Z(this,hi);Z(this,Fo);Z(this,Ih);Z(this,Th);Z(this,Ir);Z(this,us);Z(this,jo);Z(this,du);Z(this,fu);Z(this,pu);Z(this,qi);Z(this,di);Z(this,Fa);k(this,Th,String(e)),k(this,Ch,!1),k(this,Sh,!0),k(this,hi,{}),k(this,Fo,""),k(this,Ih,3e5),k(this,di,{slotInterval:Tte,maxAttempts:Ite}),k(this,Fa,null)}get url(){return _(this,Th)}set url(e){k(this,Th,String(e))}get body(){return _(this,Ir)==null?null:new Uint8Array(_(this,Ir))}set body(e){if(e==null)k(this,Ir,void 0),k(this,us,void 0);else if(typeof e=="string")k(this,Ir,uo(e)),k(this,us,"text/plain");else if(e instanceof Uint8Array)k(this,Ir,e),k(this,us,"application/octet-stream");else if(typeof e=="object")k(this,Ir,uo(JSON.stringify(e))),k(this,us,"application/json");else throw new Error("invalid body")}hasBody(){return _(this,Ir)!=null}get method(){return _(this,Fo)?_(this,Fo):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),k(this,Fo,String(e).toUpperCase())}get headers(){const e=Object.assign({},_(this,hi));return _(this,jo)&&(e.authorization=`Basic ${vte(uo(_(this,jo)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&_(this,us)&&(e["content-type"]=_(this,us)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,r){_(this,hi)[String(e).toLowerCase()]=String(r)}clearHeaders(){k(this,hi,{})}[Symbol.iterator](){const e=this.headers,r=Object.keys(e);let n=0;return{next:()=>{if(n<r.length){const s=r[n++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return _(this,jo)||null}setCredentials(e,r){z(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),k(this,jo,`${e}:${r}`)}get allowGzip(){return _(this,Sh)}set allowGzip(e){k(this,Sh,!!e)}get allowInsecureAuthentication(){return!!_(this,Ch)}set allowInsecureAuthentication(e){k(this,Ch,!!e)}get timeout(){return _(this,Ih)}set timeout(e){z(e>=0,"timeout must be non-zero","timeout",e),k(this,Ih,e)}get preflightFunc(){return _(this,du)||null}set preflightFunc(e){k(this,du,e)}get processFunc(){return _(this,fu)||null}set processFunc(e){k(this,fu,e)}get retryFunc(){return _(this,pu)||null}set retryFunc(e){k(this,pu,e)}get getUrlFunc(){return _(this,Fa)||SN}set getUrlFunc(e){k(this,Fa,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${_(this,Ir)?Ae(_(this,Ir)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(_(this,di).slotInterval=e.slotInterval),e.maxAttempts!=null&&(_(this,di).maxAttempts=e.maxAttempts)}send(){return ne(_(this,qi)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),k(this,qi,new Ote(this)),oe(this,gu,qf).call(this,0,IN()+this.timeout,0,this,new pc(0,"",{},null,this))}cancel(){ne(_(this,qi)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=Jk.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const r=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();ne(this.method==="GET"&&(r!=="https"||n!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new Vw(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,k(s,hi,Object.assign({},_(this,hi))),_(this,Ir)&&k(s,Ir,new Uint8Array(_(this,Ir))),k(s,us,_(this,us)),s}clone(){const e=new Vw(this.url);return k(e,Fo,_(this,Fo)),_(this,Ir)&&k(e,Ir,_(this,Ir)),k(e,us,_(this,us)),k(e,hi,Object.assign({},_(this,hi))),k(e,jo,_(this,jo)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),k(e,du,_(this,du)),k(e,fu,_(this,fu)),k(e,pu,_(this,pu)),k(e,di,Object.assign({},_(this,di))),k(e,Fa,_(this,Fa)),e}static lockConfig(){Av=!0}static getGateway(e){return ny[e.toLowerCase()]||null}static registerGateway(e,r){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(Av)throw new Error("gateways locked");ny[e]=r}static registerGetUrl(e){if(Av)throw new Error("gateways locked");SN=e}static createGetUrlFunc(e){return Vk()}static createDataGateway(){return Gk}static createIpfsGatewayFunc(e){return Kk(e)}};Ch=new WeakMap,Sh=new WeakMap,hi=new WeakMap,Fo=new WeakMap,Ih=new WeakMap,Th=new WeakMap,Ir=new WeakMap,us=new WeakMap,jo=new WeakMap,du=new WeakMap,fu=new WeakMap,pu=new WeakMap,qi=new WeakMap,di=new WeakMap,Fa=new WeakMap,gu=new WeakSet,qf=async function(e,r,n,s,i){var l,h,d;if(e>=_(this,di).maxAttempts)return i.makeServerError("exceeded maximum retry limit");ne(IN()<=r,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),n>0&&await Pte(n);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in ny){const f=await ny[a](o.url,sy(_(s,qi)));if(f instanceof pc){let p=f;if(this.processFunc){sy(_(s,qi));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,sy(_(s,qi)));let u=new pc(c.statusCode,c.statusMessage,c.headers,c.body,s);if(u.statusCode===301||u.statusCode===302){try{const f=u.headers.location||"";return oe(l=o.redirect(f),gu,qf).call(l,e+1,r,0,s,u)}catch{}return u}else if(u.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,u,e))){const f=u.headers["retry-after"];let p=_(this,di).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),oe(h=o.clone(),gu,qf).call(h,e+1,r,p,s,u)}if(this.processFunc){sy(_(s,qi));try{u=await this.processFunc(o,u)}catch(f){(f.throttle==null||typeof f.stall!="number")&&u.makeServerError("error in post-processing function",f).assertOk();let p=_(this,di).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),oe(d=o.clone(),gu,qf).call(d,e+1,r,p,s,u)}}return u};let mo=Vw;var kg,Dg,Ug,ls,Nh,mu;const DC=class DC{constructor(e,r,n,s,i){Z(this,kg);Z(this,Dg);Z(this,Ug);Z(this,ls);Z(this,Nh);Z(this,mu);k(this,kg,e),k(this,Dg,r),k(this,Ug,Object.keys(n).reduce((o,a)=>(o[a.toLowerCase()]=String(n[a]),o),{})),k(this,ls,s==null?null:new Uint8Array(s)),k(this,Nh,i||null),k(this,mu,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${_(this,ls)?Ae(_(this,ls)):"null"}>`}get statusCode(){return _(this,kg)}get statusMessage(){return _(this,Dg)}get headers(){return Object.assign({},_(this,Ug))}get body(){return _(this,ls)==null?null:new Uint8Array(_(this,ls))}get bodyText(){try{return _(this,ls)==null?"":vw(_(this,ls))}catch{ne(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{ne(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,r=Object.keys(e);let n=0;return{next:()=>{if(n<r.length){const s=r[n++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,r){let n;e?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new DC(599,n,this.headers,this.body,_(this,Nh)||void 0);return k(s,mu,{message:e,error:r}),s}throwThrottleError(e,r){r==null?r=-1:z(Number.isInteger(r)&&r>=0,"invalid stall timeout","stall",r);const n=new Error(e||"throttling requests");throw xe(n,{stall:r,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return _(this,ls)!=null}get request(){return _(this,Nh)}ok(){return _(this,mu).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:r}=_(this,mu);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let s=null;try{_(this,ls)&&(s=vw(_(this,ls)))}catch{}ne(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:r,info:{requestUrl:n,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};kg=new WeakMap,Dg=new WeakMap,Ug=new WeakMap,ls=new WeakMap,Nh=new WeakMap,mu=new WeakMap;let pc=DC;function IN(){return new Date().getTime()}function Rte(t){return uo(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,r)=>String.fromCharCode(parseInt(r,16))))}function Pte(t){return new Promise(e=>setTimeout(e,t))}const kte=BigInt(-1),ci=BigInt(0),ch=BigInt(1),Dte=BigInt(5),Vl={};let yh="0000";for(;yh.length<80;)yh+=yh;function Lc(t){let e=yh;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function Pf(t,e,r){const n=BigInt(e.width);if(e.signed){const s=ch<<n-ch;ne(r==null||t>=-s&&t<s,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:t}),t>ci?t=bw(ou(t,n),n):t=-bw(ou(-t,n),n)}else{const s=ch<<n;ne(r==null||t>=0&&t<s,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:t}),t=(t%s+s)%s&s-ch}return t}function Cv(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,r=128,n=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const i=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);z(i,"invalid fixed format","format",t),e=i[1]!=="u",r=parseInt(i[2]),n=parseInt(i[3])}}else if(t){const i=t,o=(a,c,u)=>i[a]==null?u:(z(typeof i[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,i[a]),i[a]);e=o("signed","boolean",e),r=o("width","number",r),n=o("decimals","number",n)}z(r%8===0,"invalid FixedNumber width (not byte aligned)","format.width",r),z(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const s=(e?"":"u")+"fixed"+String(r)+"x"+String(n);return{signed:e,width:r,decimals:n,name:s}}function Ute(t,e){let r="";t<ci&&(r="-",t*=kte);let n=t.toString();if(e===0)return r+n;for(;n.length<=e;)n=yh+n;const s=n.length-e;for(n=n.substring(0,s)+"."+n.substring(s);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return r+n}var fi,Et,wn,pt,jc,ko,h_,d_,f_,p_;const Ua=class Ua{constructor(e,r,n){Z(this,pt);K(this,"format");Z(this,fi);Z(this,Et);Z(this,wn);K(this,"_value");gm(e,Vl,"FixedNumber"),k(this,Et,r),k(this,fi,n);const s=Ute(r,n.decimals);xe(this,{format:n.name,_value:s}),k(this,wn,Lc(n.decimals))}get signed(){return _(this,fi).signed}get width(){return _(this,fi).width}get decimals(){return _(this,fi).decimals}get value(){return _(this,Et)}addUnsafe(e){return oe(this,pt,h_).call(this,e)}add(e){return oe(this,pt,h_).call(this,e,"add")}subUnsafe(e){return oe(this,pt,d_).call(this,e)}sub(e){return oe(this,pt,d_).call(this,e,"sub")}mulUnsafe(e){return oe(this,pt,f_).call(this,e)}mul(e){return oe(this,pt,f_).call(this,e,"mul")}mulSignal(e){oe(this,pt,jc).call(this,e);const r=_(this,Et)*_(e,Et);return ne(r%_(this,wn)===ci,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),oe(this,pt,ko).call(this,r/_(this,wn),"mulSignal")}divUnsafe(e){return oe(this,pt,p_).call(this,e)}div(e){return oe(this,pt,p_).call(this,e,"div")}divSignal(e){ne(_(e,Et)!==ci,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),oe(this,pt,jc).call(this,e);const r=_(this,Et)*_(this,wn);return ne(r%_(e,Et)===ci,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),oe(this,pt,ko).call(this,r/_(e,Et),"divSignal")}cmp(e){let r=this.value,n=e.value;const s=this.decimals-e.decimals;return s>0?n*=Lc(s):s<0&&(r*=Lc(-s)),r<n?-1:r>n?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=_(this,Et);return _(this,Et)<ci&&(e-=_(this,wn)-ch),e=_(this,Et)/_(this,wn)*_(this,wn),oe(this,pt,ko).call(this,e,"floor")}ceiling(){let e=_(this,Et);return _(this,Et)>ci&&(e+=_(this,wn)-ch),e=_(this,Et)/_(this,wn)*_(this,wn),oe(this,pt,ko).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const r=this.decimals-e,n=Dte*Lc(r-1);let s=this.value+n;const i=Lc(r);return s=s/i*i,Pf(s,_(this,fi),"round"),new Ua(Vl,s,_(this,fi))}isZero(){return _(this,Et)===ci}isNegative(){return _(this,Et)<ci}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Ua.fromString(this.toString(),e)}static fromValue(e,r,n){const s=r==null?0:He(r),i=Cv(n);let o=Se(e,"value");const a=s-i.decimals;if(a>0){const c=Lc(a);ne(o%c===ci,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=c}else a<0&&(o*=Lc(-a));return Pf(o,i,"fromValue"),new Ua(Vl,o,i)}static fromString(e,r){const n=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);z(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",e);const s=Cv(r);let i=n[2]||"0",o=n[3]||"";for(;o.length<s.decimals;)o+=yh;ne(o.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,s.decimals);const a=BigInt(n[1]+i+o);return Pf(a,s,"fromString"),new Ua(Vl,a,s)}static fromBytes(e,r){let n=O0(nt(e,"value"));const s=Cv(r);return s.signed&&(n=bw(n,s.width)),Pf(n,s,"fromBytes"),new Ua(Vl,n,s)}};fi=new WeakMap,Et=new WeakMap,wn=new WeakMap,pt=new WeakSet,jc=function(e){z(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},ko=function(e,r){return e=Pf(e,_(this,fi),r),new Ua(Vl,e,_(this,fi))},h_=function(e,r){return oe(this,pt,jc).call(this,e),oe(this,pt,ko).call(this,_(this,Et)+_(e,Et),r)},d_=function(e,r){return oe(this,pt,jc).call(this,e),oe(this,pt,ko).call(this,_(this,Et)-_(e,Et),r)},f_=function(e,r){return oe(this,pt,jc).call(this,e),oe(this,pt,ko).call(this,_(this,Et)*_(e,Et)/_(this,wn),r)},p_=function(e,r){return ne(_(e,Et)!==ci,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),oe(this,pt,jc).call(this,e),oe(this,pt,ko).call(this,_(this,Et)*_(this,wn)/_(e,Et),r)};let Ew=Ua;function Bte(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function TN(t,e,r){let n=0;for(let s=0;s<r;s++)n=n*256+t[e+s];return n}function NN(t,e,r,n){const s=[];for(;r<e+1+n;){const i=Yk(t,r);s.push(i.result),r+=i.consumed,ne(r<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:t,length:n,offset:e})}return{consumed:1+n,result:s}}function Yk(t,e){ne(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const r=n=>{ne(n<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:n})};if(t[e]>=248){const n=t[e]-247;r(e+1+n);const s=TN(t,e+1,n);return r(e+1+n+s),NN(t,e,e+1+n,n+s)}else if(t[e]>=192){const n=t[e]-192;return r(e+1+n),NN(t,e,e+1,n)}else if(t[e]>=184){const n=t[e]-183;r(e+1+n);const s=TN(t,e+1,n);r(e+1+n+s);const i=Ae(t.slice(e+1+n,e+1+n+s));return{consumed:1+n+s,result:i}}else if(t[e]>=128){const n=t[e]-128;r(e+1+n);const s=Ae(t.slice(e+1,e+1+n));return{consumed:1+n,result:s}}return{consumed:1,result:Bte(t[e])}}function R0(t){const e=nt(t,"data"),r=Yk(e,0);return z(r.consumed===e.length,"unexpected junk after rlp payload","data",t),r.result}function xN(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Qk(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(i){n=n.concat(Qk(i))}),n.length<=55)return n.unshift(192+n.length),n;const s=xN(n.length);return s.unshift(247+s.length),s.concat(n)}const e=Array.prototype.slice.call(nt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=xN(e.length);return r.unshift(183+r.length),r.concat(e)}const ON="0123456789abcdef";function rl(t){let e="0x";for(const r of Qk(t))e+=ON[r>>4],e+=ON[r&15];return e}const Zk=["wei","kwei","mwei","gwei","szabo","finney","ether"];function d1(t,e){let r=18;if(typeof e=="string"){const n=Zk.indexOf(e);z(n>=0,"invalid unit","unit",e),r=3*n}else e!=null&&(r=He(e,"unit"));return Ew.fromValue(t,r,{decimals:r,width:512}).toString()}function $te(t,e){z(typeof t=="string","value must be a string","value",t);let r=18;if(typeof e=="string"){const n=Zk.indexOf(e);z(n>=0,"invalid unit","unit",e),r=3*n}else e!=null&&(r=He(e,"unit"));return Ew.fromString(t,{decimals:r,width:512}).value}function f1(t){return d1(t,18)}const Sn=32,g_=new Uint8Array(Sn),Lte=["then"],iy={},Xk=new WeakMap;function Jc(t){return Xk.get(t)}function RN(t,e){Xk.set(t,e)}function kf(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw r.error=e,r}function m_(t,e,r){return t.indexOf(null)>=0?e.map((n,s)=>n instanceof Sd?m_(Jc(n),n,r):n):t.reduce((n,s,i)=>{let o=e.getValue(s);return s in n||(r&&o instanceof Sd&&(o=m_(Jc(o),o,r)),n[s]=o),n},{})}var xh;const uh=class uh extends Array{constructor(...r){const n=r[0];let s=r[1],i=(r[2]||[]).slice(),o=!0;n!==iy&&(s=r,i=[],o=!1);super(s.length);Z(this,xh);s.forEach((u,l)=>{this[l]=u});const a=i.reduce((u,l)=>(typeof l=="string"&&u.set(l,(u.get(l)||0)+1),u),new Map);if(RN(this,Object.freeze(s.map((u,l)=>{const h=i[l];return h!=null&&a.get(h)===1?h:null}))),k(this,xh,[]),_(this,xh)==null&&_(this,xh),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(u,l,h)=>{if(typeof l=="string"){if(l.match(/^[0-9]+$/)){const f=He(l,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=u[f];return p instanceof Error&&kf(`index ${f}`,p),p}if(Lte.indexOf(l)>=0)return Reflect.get(u,l,h);const d=u[l];if(d instanceof Function)return function(...f){return d.apply(this===h?u:this,f)};if(!(l in u))return u.getValue.apply(this===h?u:this,[l])}return Reflect.get(u,l,h)}});return RN(c,Jc(this)),c}toArray(r){const n=[];return this.forEach((s,i)=>{s instanceof Error&&kf(`index ${i}`,s),r&&s instanceof uh&&(s=s.toArray(r)),n.push(s)}),n}toObject(r){const n=Jc(this);return n.reduce((s,i,o)=>(ne(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),m_(n,this,r)),{})}slice(r,n){r==null&&(r=0),r<0&&(r+=this.length,r<0&&(r=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const s=Jc(this),i=[],o=[];for(let a=r;a<n;a++)i.push(this[a]),o.push(s[a]);return new uh(iy,i,o)}filter(r,n){const s=Jc(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&kf(`index ${a}`,c),r.call(n,c,a,this)&&(i.push(c),o.push(s[a]))}return new uh(iy,i,o)}map(r,n){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&kf(`index ${i}`,o),s.push(r.call(n,o,i,this))}return s}getValue(r){const n=Jc(this).indexOf(r);if(n===-1)return;const s=this[n];return s instanceof Error&&kf(`property ${JSON.stringify(r)}`,s.error),s}static fromItems(r,n){return new uh(iy,r,n)}};xh=new WeakMap;let Sd=uh;function PN(t){let e=Cn(t);return ne(e.length<=Sn,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Sn,offset:e.length}),e.length!==Sn&&(e=_n(lr([g_.slice(e.length%Sn),e]))),e}class ba{constructor(e,r,n,s){K(this,"name");K(this,"type");K(this,"localName");K(this,"dynamic");xe(this,{name:e,type:r,localName:n,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,r){z(!1,e,this.localName,r)}}var zo,yu,Oh,ky;class y_{constructor(){Z(this,Oh);Z(this,zo);Z(this,yu);k(this,zo,[]),k(this,yu,0)}get data(){return lr(_(this,zo))}get length(){return _(this,yu)}appendWriter(e){return oe(this,Oh,ky).call(this,_n(e.data))}writeBytes(e){let r=_n(e);const n=r.length%Sn;return n&&(r=_n(lr([r,g_.slice(n)]))),oe(this,Oh,ky).call(this,r)}writeValue(e){return oe(this,Oh,ky).call(this,PN(e))}writeUpdatableValue(){const e=_(this,zo).length;return _(this,zo).push(g_),k(this,yu,_(this,yu)+Sn),r=>{_(this,zo)[e]=PN(r)}}}zo=new WeakMap,yu=new WeakMap,Oh=new WeakSet,ky=function(e){return _(this,zo).push(e),k(this,yu,_(this,yu)+e.length),e.length};var jn,hs,wu,bu,ja,hl,b_,eD;const UC=class UC{constructor(e,r,n){Z(this,hl);K(this,"allowLoose");Z(this,jn);Z(this,hs);Z(this,wu);Z(this,bu);Z(this,ja);xe(this,{allowLoose:!!r}),k(this,jn,_n(e)),k(this,wu,0),k(this,bu,null),k(this,ja,n??1024),k(this,hs,0)}get data(){return Ae(_(this,jn))}get dataLength(){return _(this,jn).length}get consumed(){return _(this,hs)}get bytes(){return new Uint8Array(_(this,jn))}subReader(e){const r=new UC(_(this,jn).slice(_(this,hs)+e),this.allowLoose,_(this,ja));return k(r,bu,this),r}readBytes(e,r){let n=oe(this,hl,eD).call(this,0,e,!!r);return oe(this,hl,b_).call(this,e),k(this,hs,_(this,hs)+n.length),n.slice(0,e)}readValue(){return O0(this.readBytes(Sn))}readIndex(){return yte(this.readBytes(Sn))}};jn=new WeakMap,hs=new WeakMap,wu=new WeakMap,bu=new WeakMap,ja=new WeakMap,hl=new WeakSet,b_=function(e){var r;if(_(this,bu))return oe(r=_(this,bu),hl,b_).call(r,e);k(this,wu,_(this,wu)+e),ne(_(this,ja)<1||_(this,wu)<=_(this,ja)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${_(this,ja)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:_n(_(this,jn)),offset:_(this,hs),length:e,info:{bytesRead:_(this,wu),dataLength:this.dataLength}})},eD=function(e,r,n){let s=Math.ceil(r/Sn)*Sn;return _(this,hs)+s>_(this,jn).length&&(this.allowLoose&&n&&_(this,hs)+r<=_(this,jn).length?s=r:ne(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:_n(_(this,jn)),length:_(this,jn).length,offset:_(this,hs)+s})),_(this,jn).slice(_(this,hs),_(this,hs)+s)};let w_=UC;function _w(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function p1(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Mte(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");_w(t.outputLen),_w(t.blockLen)}function Id(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function tD(t,e){p1(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const Sv=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rD=t=>t instanceof Uint8Array,Fte=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Iv=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Mi=(t,e)=>t<<32-e|t>>>e,jte=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!jte)throw new Error("Non little-endian hardware is not supported");function zte(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function P0(t){if(typeof t=="string"&&(t=zte(t)),!rD(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Hte(...t){const e=new Uint8Array(t.reduce((n,s)=>n+s.length,0));let r=0;return t.forEach(n=>{if(!rD(n))throw new Error("Uint8Array expected");e.set(n,r),r+=n.length}),e}class g1{clone(){return this._cloneInto()}}function m1(t){const e=n=>t().update(P0(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function qte(t=32){if(Sv&&typeof Sv.getRandomValues=="function")return Sv.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class nD extends g1{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Mte(e);const n=P0(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Id(this),this.iHash.update(e),this}digestInto(e){Id(this),p1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const sD=(t,e,r)=>new nD(t,e).update(r).digest();sD.create=(t,e)=>new nD(t,e);function Wte(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}class iD extends g1{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Iv(this.buffer)}update(e){Id(this);const{view:r,buffer:n,blockLen:s}=this;e=P0(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Iv(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Id(this),tD(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let h=o;h<s;h++)r[h]=0;Wte(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=Iv(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,l[h],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}}const Vte=(t,e,r)=>t&e^~t&r,Gte=(t,e,r)=>t&e^t&r^e&r,Kte=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ia=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ta=new Uint32Array(64);class Jte extends iD{constructor(){super(64,32,8,!1),this.A=Ia[0]|0,this.B=Ia[1]|0,this.C=Ia[2]|0,this.D=Ia[3]|0,this.E=Ia[4]|0,this.F=Ia[5]|0,this.G=Ia[6]|0,this.H=Ia[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)Ta[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const d=Ta[h-15],f=Ta[h-2],p=Mi(d,7)^Mi(d,18)^d>>>3,g=Mi(f,17)^Mi(f,19)^f>>>10;Ta[h]=g+Ta[h-7]+p+Ta[h-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let h=0;h<64;h++){const d=Mi(a,6)^Mi(a,11)^Mi(a,25),f=l+d+Vte(a,c,u)+Kte[h]+Ta[h]|0,g=(Mi(n,2)^Mi(n,13)^Mi(n,22))+Gte(n,s,i)|0;l=u,u=c,c=a,a=o+f|0,o=i,i=s,s=n,n=f+g|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){Ta.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const oD=m1(()=>new Jte),oy=BigInt(2**32-1),v_=BigInt(32);function aD(t,e=!1){return e?{h:Number(t&oy),l:Number(t>>v_&oy)}:{h:Number(t>>v_&oy)|0,l:Number(t&oy)|0}}function cD(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=aD(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const Yte=(t,e)=>BigInt(t>>>0)<<v_|BigInt(e>>>0),Qte=(t,e,r)=>t>>>r,Zte=(t,e,r)=>t<<32-r|e>>>r,Xte=(t,e,r)=>t>>>r|e<<32-r,ere=(t,e,r)=>t<<32-r|e>>>r,tre=(t,e,r)=>t<<64-r|e>>>r-32,rre=(t,e,r)=>t>>>r-32|e<<64-r,nre=(t,e)=>e,sre=(t,e)=>t,uD=(t,e,r)=>t<<r|e>>>32-r,lD=(t,e,r)=>e<<r|t>>>32-r,hD=(t,e,r)=>e<<r-32|t>>>64-r,dD=(t,e,r)=>t<<r-32|e>>>64-r;function ire(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const ore=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),are=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,cre=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),ure=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,lre=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),hre=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,Ve={fromBig:aD,split:cD,toBig:Yte,shrSH:Qte,shrSL:Zte,rotrSH:Xte,rotrSL:ere,rotrBH:tre,rotrBL:rre,rotr32H:nre,rotr32L:sre,rotlSH:uD,rotlSL:lD,rotlBH:hD,rotlBL:dD,add:ire,add3L:ore,add3H:are,add4L:cre,add4H:ure,add5H:hre,add5L:lre},[dre,fre]=Ve.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Na=new Uint32Array(80),xa=new Uint32Array(80);class pre extends iD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:h,Fl:d,Gh:f,Gl:p,Hh:g,Hl:m}=this;return[e,r,n,s,i,o,a,c,u,l,h,d,f,p,g,m]}set(e,r,n,s,i,o,a,c,u,l,h,d,f,p,g,m){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=h|0,this.Fl=d|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,r){for(let E=0;E<16;E++,r+=4)Na[E]=e.getUint32(r),xa[E]=e.getUint32(r+=4);for(let E=16;E<80;E++){const A=Na[E-15]|0,S=xa[E-15]|0,C=Ve.rotrSH(A,S,1)^Ve.rotrSH(A,S,8)^Ve.shrSH(A,S,7),T=Ve.rotrSL(A,S,1)^Ve.rotrSL(A,S,8)^Ve.shrSL(A,S,7),O=Na[E-2]|0,P=xa[E-2]|0,B=Ve.rotrSH(O,P,19)^Ve.rotrBH(O,P,61)^Ve.shrSH(O,P,6),L=Ve.rotrSL(O,P,19)^Ve.rotrBL(O,P,61)^Ve.shrSL(O,P,6),Q=Ve.add4L(T,L,xa[E-7],xa[E-16]),se=Ve.add4H(Q,C,B,Na[E-7],Na[E-16]);Na[E]=se|0,xa[E]=Q|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:h,El:d,Fh:f,Fl:p,Gh:g,Gl:m,Hh:w,Hl:v}=this;for(let E=0;E<80;E++){const A=Ve.rotrSH(h,d,14)^Ve.rotrSH(h,d,18)^Ve.rotrBH(h,d,41),S=Ve.rotrSL(h,d,14)^Ve.rotrSL(h,d,18)^Ve.rotrBL(h,d,41),C=h&f^~h&g,T=d&p^~d&m,O=Ve.add5L(v,S,T,fre[E],xa[E]),P=Ve.add5H(O,w,A,C,dre[E],Na[E]),B=O|0,L=Ve.rotrSH(n,s,28)^Ve.rotrBH(n,s,34)^Ve.rotrBH(n,s,39),Q=Ve.rotrSL(n,s,28)^Ve.rotrBL(n,s,34)^Ve.rotrBL(n,s,39),se=n&i^n&a^i&a,V=s&o^s&c^o&c;w=g|0,v=m|0,g=f|0,m=p|0,f=h|0,p=d|0,{h,l:d}=Ve.add(u|0,l|0,P|0,B|0),u=a|0,l=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const I=Ve.add3L(B,Q,V);n=Ve.add3H(I,P,L,se),s=I|0}({h:n,l:s}=Ve.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Ve.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ve.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=Ve.add(this.Dh|0,this.Dl|0,u|0,l|0),{h,l:d}=Ve.add(this.Eh|0,this.El|0,h|0,d|0),{h:f,l:p}=Ve.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:m}=Ve.add(this.Gh|0,this.Gl|0,g|0,m|0),{h:w,l:v}=Ve.add(this.Hh|0,this.Hl|0,w|0,v|0),this.set(n,s,i,o,a,c,u,l,h,d,f,p,g,m,w,v)}roundClean(){Na.fill(0),xa.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const gre=m1(()=>new pre);function mre(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof Te<"u")return Te;throw new Error("unable to locate global object")}const kN=mre();kN.crypto||kN.msCrypto;function yre(t){switch(t){case"sha256":return oD.create();case"sha512":return gre.create()}z(!1,"invalid hashing algorithm name","algorithm",t)}const[fD,pD,gD]=[[],[],[]],wre=BigInt(0),Df=BigInt(1),bre=BigInt(2),vre=BigInt(7),Ere=BigInt(256),_re=BigInt(113);for(let t=0,e=Df,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],fD.push(2*(5*n+r)),pD.push((t+1)*(t+2)/2%64);let s=wre;for(let i=0;i<7;i++)e=(e<<Df^(e>>vre)*_re)%Ere,e&bre&&(s^=Df<<(Df<<BigInt(i))-Df);gD.push(s)}const[Are,Cre]=cD(gD,!0),DN=(t,e,r)=>r>32?hD(t,e,r):uD(t,e,r),UN=(t,e,r)=>r>32?dD(t,e,r):lD(t,e,r);function Sre(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],h=DN(u,l,1)^r[a],d=UN(u,l,1)^r[a+1];for(let f=0;f<50;f+=10)t[o+f]^=h,t[o+f+1]^=d}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=pD[o],c=DN(s,i,a),u=UN(s,i,a),l=fD[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=Are[n],t[1]^=Cre[n]}r.fill(0)}class y1 extends g1{constructor(e,r,n,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,_w(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Fte(this.state)}keccak(){Sre(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Id(this);const{blockLen:r,state:n}=this;e=P0(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Id(this,!1),p1(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return _w(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(tD(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new y1(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Ire=(t,e,r)=>m1(()=>new y1(e,t,r)),Tre=Ire(1,136,256/8);let mD=!1;const yD=function(t){return Tre(t)};let wD=yD;function mr(t){const e=nt(t,"data");return Ae(wD(e))}mr._=yD;mr.lock=function(){mD=!0};mr.register=function(t){if(mD)throw new TypeError("keccak256 is locked");wD=t};Object.freeze(mr);const bD=function(t){return yre("sha256").update(t).digest()};let vD=bD,ED=!1;function Xd(t){const e=nt(t,"data");return Ae(vD(e))}Xd._=bD;Xd.lock=function(){ED=!0};Xd.register=function(t){if(ED)throw new Error("sha256 is locked");vD=t};Object.freeze(Xd);Object.freeze(Xd);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _D=BigInt(0),k0=BigInt(1),Nre=BigInt(2),D0=t=>t instanceof Uint8Array,xre=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Td(t){if(!D0(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=xre[t[r]];return e}function AD(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function w1(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Nd(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(e/2);for(let n=0;n<r.length;n++){const s=n*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");r[n]=o}return r}function Fu(t){return w1(Td(t))}function b1(t){if(!D0(t))throw new Error("Uint8Array expected");return w1(Td(Uint8Array.from(t).reverse()))}function xd(t,e){return Nd(t.toString(16).padStart(e*2,"0"))}function v1(t,e){return xd(t,e).reverse()}function Ore(t){return Nd(AD(t))}function li(t,e,r){let n;if(typeof e=="string")try{n=Nd(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(D0(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(`${t} expected ${r} bytes, got ${s}`);return n}function pg(...t){const e=new Uint8Array(t.reduce((n,s)=>n+s.length,0));let r=0;return t.forEach(n=>{if(!D0(n))throw new Error("Uint8Array expected");e.set(n,r),r+=n.length}),e}function Rre(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Pre(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function kre(t){let e;for(e=0;t>_D;t>>=k0,e+=1);return e}function Dre(t,e){return t>>BigInt(e)&k0}const Ure=(t,e,r)=>t|(r?k0:_D)<<BigInt(e),E1=t=>(Nre<<BigInt(t-1))-k0,Tv=t=>new Uint8Array(t),BN=t=>Uint8Array.from(t);function CD(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Tv(t),s=Tv(t),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...h)=>r(s,n,...h),c=(h=Tv())=>{s=a(BN([0]),h),n=a(),h.length!==0&&(s=a(BN([1]),h),n=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const d=[];for(;h<e;){n=a();const f=n.slice();d.push(f),h+=n.length}return pg(...d)};return(h,d)=>{o(),c(h);let f;for(;!(f=d(u()));)c();return o(),f}}const Bre={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function mm(t,e,r={}){const n=(s,i,o)=>{const a=Bre[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}const $re=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Dre,bitLen:kre,bitMask:E1,bitSet:Ure,bytesToHex:Td,bytesToNumberBE:Fu,bytesToNumberLE:b1,concatBytes:pg,createHmacDrbg:CD,ensureBytes:li,equalBytes:Rre,hexToBytes:Nd,hexToNumber:w1,numberToBytesBE:xd,numberToBytesLE:v1,numberToHexUnpadded:AD,numberToVarBytesBE:Ore,utf8ToBytes:Pre,validateObject:mm},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dr=BigInt(0),cr=BigInt(1),Yc=BigInt(2),Lre=BigInt(3),E_=BigInt(4),$N=BigInt(5),LN=BigInt(8);BigInt(9);BigInt(16);function qn(t,e){const r=t%e;return r>=Dr?r:e+r}function Mre(t,e,r){if(r<=Dr||e<Dr)throw new Error("Expected power/modulo > 0");if(r===cr)return Dr;let n=cr;for(;e>Dr;)e&cr&&(n=n*t%r),t=t*t%r,e>>=cr;return n}function Bs(t,e,r){let n=t;for(;e-- >Dr;)n*=n,n%=r;return n}function __(t,e){if(t===Dr||e<=Dr)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=qn(t,e),n=e,s=Dr,i=cr;for(;r!==Dr;){const a=n/r,c=n%r,u=s-i*a;n=r,r=c,s=i,i=u}if(n!==cr)throw new Error("invert: does not exist");return qn(s,e)}function Fre(t){const e=(t-cr)/Yc;let r,n,s;for(r=t-cr,n=0;r%Yc===Dr;r/=Yc,n++);for(s=Yc;s<t&&Mre(s,e,t)!==t-cr;s++);if(n===1){const o=(t+cr)/E_;return function(c,u){const l=c.pow(u,o);if(!c.eql(c.sqr(l),u))throw new Error("Cannot find square root");return l}}const i=(r+cr)/Yc;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,l=a.pow(a.mul(a.ONE,s),r),h=a.pow(c,i),d=a.pow(c,r);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(d);f<u&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(l,cr<<BigInt(u-f-1));l=a.sqr(p),h=a.mul(h,p),d=a.mul(d,l),u=f}return h}}function jre(t){if(t%E_===Lre){const e=(t+cr)/E_;return function(n,s){const i=n.pow(s,e);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%LN===$N){const e=(t-$N)/LN;return function(n,s){const i=n.mul(s,Yc),o=n.pow(i,e),a=n.mul(s,o),c=n.mul(n.mul(a,Yc),o),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),s))throw new Error("Cannot find square root");return u}}return Fre(t)}const zre=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Hre(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=zre.reduce((n,s)=>(n[s]="function",n),e);return mm(t,r)}function qre(t,e,r){if(r<Dr)throw new Error("Expected power > 0");if(r===Dr)return t.ONE;if(r===cr)return e;let n=t.ONE,s=e;for(;r>Dr;)r&cr&&(n=t.mul(n,s)),s=t.sqr(s),r>>=cr;return n}function Wre(t,e){const r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function SD(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Vre(t,e,r=!1,n={}){if(t<=Dr)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=SD(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=jre(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:E1(s),ZERO:Dr,ONE:cr,create:c=>qn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Dr<=c&&c<t},is0:c=>c===Dr,isOdd:c=>(c&cr)===cr,neg:c=>qn(-c,t),eql:(c,u)=>c===u,sqr:c=>qn(c*c,t),add:(c,u)=>qn(c+u,t),sub:(c,u)=>qn(c-u,t),mul:(c,u)=>qn(c*u,t),pow:(c,u)=>qre(a,c,u),div:(c,u)=>qn(c*__(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>__(c,t),sqrt:n.sqrt||(c=>o(a,c)),invertBatch:c=>Wre(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>r?v1(c,i):xd(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return r?b1(c):Fu(c)}});return Object.freeze(a)}function ID(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function TD(t){const e=ID(t);return e+Math.ceil(e/2)}function Gre(t,e,r=!1){const n=t.length,s=ID(e),i=TD(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const o=r?Fu(t):b1(t),a=qn(o,e-cr)+cr;return r?v1(a,s):xd(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Kre=BigInt(0),Nv=BigInt(1);function Jre(t,e){const r=(s,i)=>{const o=i.negate();return s?o:i},n=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:r,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>Kre;)i&Nv&&(o=o.add(a)),a=a.double(),i>>=Nv;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=n(i),c=[];let u=s,l=u;for(let h=0;h<o;h++){l=u,c.push(l);for(let d=1;d<a;d++)l=l.add(u),c.push(l);u=l.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=n(s);let u=t.ZERO,l=t.BASE;const h=BigInt(2**s-1),d=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let m=Number(o&h);o>>=f,m>c&&(m-=d,o+=Nv);const w=g,v=g+Math.abs(m)-1,E=p%2!==0,A=m<0;m===0?l=l.add(r(E,i[w])):u=u.add(r(A,i[v]))}return{p:u,f:l}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let u=i.get(s);return u||(u=this.precomputeWindow(s,c),c!==1&&i.set(s,a(u))),this.wNAF(c,u,o)}}}function ND(t){return Hre(t.Fp),mm(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...SD(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Yre(t){const e=ND(t);mm(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:Qre,hexToBytes:Zre}=$re,au={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=au;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Qre(n),l:t.subarray(r+2)}},toSig(t){const{Err:e}=au,r=typeof t=="string"?Zre(t):t;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=au._parseInt(r.subarray(2)),{d:o,l:a}=au._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,r=u=>{const l=u.toString(16);return l.length&1?`0${l}`:l},n=e(r(t.s)),s=e(r(t.r)),i=n.length/2,o=s.length/2,a=r(i),c=r(o);return`30${r(o+i+4)}02${c}${s}02${a}${n}`}},Xo=BigInt(0),Ks=BigInt(1);BigInt(2);const MN=BigInt(3);BigInt(4);function Xre(t){const e=Yre(t),{Fp:r}=e,n=e.toBytes||((p,g,m)=>{const w=g.toAffine();return pg(Uint8Array.from([4]),r.toBytes(w.x),r.toBytes(w.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),m=r.fromBytes(g.subarray(0,r.BYTES)),w=r.fromBytes(g.subarray(r.BYTES,2*r.BYTES));return{x:m,y:w}});function i(p){const{a:g,b:m}=e,w=r.sqr(p),v=r.mul(w,p);return r.add(r.add(v,r.mul(p,g)),m)}if(!r.eql(r.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Xo<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:m,wrapPrivateKey:w,n:v}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=Td(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(m*2,"0")}let E;try{E=typeof p=="bigint"?p:Fu(li("private key",p,m))}catch{throw new Error(`private key must be ${m} bytes, hex or bigint, not ${typeof p}`)}return w&&(E=qn(E,v)),a(E),E}const u=new Map;function l(p){if(!(p instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(g,m,w){if(this.px=g,this.py=m,this.pz=w,g==null||!r.isValid(g))throw new Error("x required");if(m==null||!r.isValid(m))throw new Error("y required");if(w==null||!r.isValid(w))throw new Error("z required")}static fromAffine(g){const{x:m,y:w}=g||{};if(!g||!r.isValid(m)||!r.isValid(w))throw new Error("invalid affine point");if(g instanceof h)throw new Error("projective point not allowed");const v=E=>r.eql(E,r.ZERO);return v(m)&&v(w)?h.ZERO:new h(m,w,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const m=r.invertBatch(g.map(w=>w.pz));return g.map((w,v)=>w.toAffine(m[v])).map(h.fromAffine)}static fromHex(g){const m=h.fromAffine(s(li("pointHex",g)));return m.assertValidity(),m}static fromPrivateKey(g){return h.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y:m}=this.toAffine();if(!r.isValid(g)||!r.isValid(m))throw new Error("bad point: x or y not FE");const w=r.sqr(m),v=i(g);if(!r.eql(w,v))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(r.isOdd)return!r.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){l(g);const{px:m,py:w,pz:v}=this,{px:E,py:A,pz:S}=g,C=r.eql(r.mul(m,S),r.mul(E,v)),T=r.eql(r.mul(w,S),r.mul(A,v));return C&&T}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:g,b:m}=e,w=r.mul(m,MN),{px:v,py:E,pz:A}=this;let S=r.ZERO,C=r.ZERO,T=r.ZERO,O=r.mul(v,v),P=r.mul(E,E),B=r.mul(A,A),L=r.mul(v,E);return L=r.add(L,L),T=r.mul(v,A),T=r.add(T,T),S=r.mul(g,T),C=r.mul(w,B),C=r.add(S,C),S=r.sub(P,C),C=r.add(P,C),C=r.mul(S,C),S=r.mul(L,S),T=r.mul(w,T),B=r.mul(g,B),L=r.sub(O,B),L=r.mul(g,L),L=r.add(L,T),T=r.add(O,O),O=r.add(T,O),O=r.add(O,B),O=r.mul(O,L),C=r.add(C,O),B=r.mul(E,A),B=r.add(B,B),O=r.mul(B,L),S=r.sub(S,O),T=r.mul(B,P),T=r.add(T,T),T=r.add(T,T),new h(S,C,T)}add(g){l(g);const{px:m,py:w,pz:v}=this,{px:E,py:A,pz:S}=g;let C=r.ZERO,T=r.ZERO,O=r.ZERO;const P=e.a,B=r.mul(e.b,MN);let L=r.mul(m,E),Q=r.mul(w,A),se=r.mul(v,S),V=r.add(m,w),I=r.add(E,A);V=r.mul(V,I),I=r.add(L,Q),V=r.sub(V,I),I=r.add(m,v);let x=r.add(E,S);return I=r.mul(I,x),x=r.add(L,se),I=r.sub(I,x),x=r.add(w,v),C=r.add(A,S),x=r.mul(x,C),C=r.add(Q,se),x=r.sub(x,C),O=r.mul(P,I),C=r.mul(B,se),O=r.add(C,O),C=r.sub(Q,O),O=r.add(Q,O),T=r.mul(C,O),Q=r.add(L,L),Q=r.add(Q,L),se=r.mul(P,se),I=r.mul(B,I),Q=r.add(Q,se),se=r.sub(L,se),se=r.mul(P,se),I=r.add(I,se),L=r.mul(Q,I),T=r.add(T,L),L=r.mul(x,I),C=r.mul(V,C),C=r.sub(C,L),L=r.mul(V,Q),O=r.mul(x,O),O=r.add(O,L),new h(C,T,O)}subtract(g){return this.add(g.negate())}is0(){return this.equals(h.ZERO)}wNAF(g){return f.wNAFCached(this,u,g,m=>{const w=r.invertBatch(m.map(v=>v.pz));return m.map((v,E)=>v.toAffine(w[E])).map(h.fromAffine)})}multiplyUnsafe(g){const m=h.ZERO;if(g===Xo)return m;if(a(g),g===Ks)return this;const{endo:w}=e;if(!w)return f.unsafeLadder(this,g);let{k1neg:v,k1:E,k2neg:A,k2:S}=w.splitScalar(g),C=m,T=m,O=this;for(;E>Xo||S>Xo;)E&Ks&&(C=C.add(O)),S&Ks&&(T=T.add(O)),O=O.double(),E>>=Ks,S>>=Ks;return v&&(C=C.negate()),A&&(T=T.negate()),T=new h(r.mul(T.px,w.beta),T.py,T.pz),C.add(T)}multiply(g){a(g);let m=g,w,v;const{endo:E}=e;if(E){const{k1neg:A,k1:S,k2neg:C,k2:T}=E.splitScalar(m);let{p:O,f:P}=this.wNAF(S),{p:B,f:L}=this.wNAF(T);O=f.constTimeNegate(A,O),B=f.constTimeNegate(C,B),B=new h(r.mul(B.px,E.beta),B.py,B.pz),w=O.add(B),v=P.add(L)}else{const{p:A,f:S}=this.wNAF(m);w=A,v=S}return h.normalizeZ([w,v])[0]}multiplyAndAddUnsafe(g,m,w){const v=h.BASE,E=(S,C)=>C===Xo||C===Ks||!S.equals(v)?S.multiplyUnsafe(C):S.multiply(C),A=E(this,m).add(E(g,w));return A.is0()?void 0:A}toAffine(g){const{px:m,py:w,pz:v}=this,E=this.is0();g==null&&(g=E?r.ONE:r.inv(v));const A=r.mul(m,g),S=r.mul(w,g),C=r.mul(v,g);if(E)return{x:r.ZERO,y:r.ZERO};if(!r.eql(C,r.ONE))throw new Error("invZ was invalid");return{x:A,y:S}}isTorsionFree(){const{h:g,isTorsionFree:m}=e;if(g===Ks)return!0;if(m)return m(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:m}=e;return g===Ks?this:m?m(h,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),n(h,this,g)}toHex(g=!0){return Td(this.toRawBytes(g))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const d=e.nBitLength,f=Jre(h,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function ene(t){const e=ND(t);return mm(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function tne(t){const e=ene(t),{Fp:r,n}=e,s=r.BYTES+1,i=2*r.BYTES+1;function o(I){return Xo<I&&I<r.ORDER}function a(I){return qn(I,n)}function c(I){return __(I,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:l,weierstrassEquation:h,isWithinCurveOrder:d}=Xre({...e,toBytes(I,x,M){const G=x.toAffine(),q=r.toBytes(G.x),Y=pg;return M?Y(Uint8Array.from([x.hasEvenY()?2:3]),q):Y(Uint8Array.from([4]),q,r.toBytes(G.y))},fromBytes(I){const x=I.length,M=I[0],G=I.subarray(1);if(x===s&&(M===2||M===3)){const q=Fu(G);if(!o(q))throw new Error("Point is not on curve");const Y=h(q);let U=r.sqrt(Y);const j=(U&Ks)===Ks;return(M&1)===1!==j&&(U=r.neg(U)),{x:q,y:U}}else if(x===i&&M===4){const q=r.fromBytes(G.subarray(0,r.BYTES)),Y=r.fromBytes(G.subarray(r.BYTES,2*r.BYTES));return{x:q,y:Y}}else throw new Error(`Point of length ${x} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=I=>Td(xd(I,e.nByteLength));function p(I){const x=n>>Ks;return I>x}function g(I){return p(I)?a(-I):I}const m=(I,x,M)=>Fu(I.slice(x,M));class w{constructor(x,M,G){this.r=x,this.s=M,this.recovery=G,this.assertValidity()}static fromCompact(x){const M=e.nByteLength;return x=li("compactSignature",x,M*2),new w(m(x,0,M),m(x,M,2*M))}static fromDER(x){const{r:M,s:G}=au.toSig(li("DER",x));return new w(M,G)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(x){return new w(this.r,this.s,x)}recoverPublicKey(x){const{r:M,s:G,recovery:q}=this,Y=T(li("msgHash",x));if(q==null||![0,1,2,3].includes(q))throw new Error("recovery id invalid");const U=q===2||q===3?M+e.n:M;if(U>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const j=(q&1)===0?"02":"03",F=u.fromHex(j+f(U)),W=c(U),te=a(-Y*W),ae=a(G*W),fe=u.BASE.multiplyAndAddUnsafe(F,te,ae);if(!fe)throw new Error("point at infinify");return fe.assertValidity(),fe}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Nd(this.toDERHex())}toDERHex(){return au.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Nd(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const v={isValidPrivateKey(I){try{return l(I),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const I=TD(e.n);return Gre(e.randomBytes(I),e.n)},precompute(I=8,x=u.BASE){return x._setWindowSize(I),x.multiply(BigInt(3)),x}};function E(I,x=!0){return u.fromPrivateKey(I).toRawBytes(x)}function A(I){const x=I instanceof Uint8Array,M=typeof I=="string",G=(x||M)&&I.length;return x?G===s||G===i:M?G===2*s||G===2*i:I instanceof u}function S(I,x,M=!0){if(A(I))throw new Error("first arg must be private key");if(!A(x))throw new Error("second arg must be public key");return u.fromHex(x).multiply(l(I)).toRawBytes(M)}const C=e.bits2int||function(I){const x=Fu(I),M=I.length*8-e.nBitLength;return M>0?x>>BigInt(M):x},T=e.bits2int_modN||function(I){return a(C(I))},O=E1(e.nBitLength);function P(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(Xo<=I&&I<O))throw new Error(`bigint expected < 2^${e.nBitLength}`);return xd(I,e.nByteLength)}function B(I,x,M=L){if(["recovered","canonical"].some(Ie=>Ie in M))throw new Error("sign() legacy options not supported");const{hash:G,randomBytes:q}=e;let{lowS:Y,prehash:U,extraEntropy:j}=M;Y==null&&(Y=!0),I=li("msgHash",I),U&&(I=li("prehashed msgHash",G(I)));const F=T(I),W=l(x),te=[P(W),P(F)];if(j!=null){const Ie=j===!0?q(r.BYTES):j;te.push(li("extraEntropy",Ie))}const ae=pg(...te),fe=F;function ge(Ie){const Je=C(Ie);if(!d(Je))return;const ze=c(Je),Le=u.BASE.multiply(Je).toAffine(),Ke=a(Le.x);if(Ke===Xo)return;const Pe=a(ze*a(fe+Ke*W));if(Pe===Xo)return;let hr=(Le.x===Ke?0:2)|Number(Le.y&Ks),nr=Pe;return Y&&p(Pe)&&(nr=g(Pe),hr^=1),new w(Ke,nr,hr)}return{seed:ae,k2sig:ge}}const L={lowS:e.lowS,prehash:!1},Q={lowS:e.lowS,prehash:!1};function se(I,x,M=L){const{seed:G,k2sig:q}=B(I,x,M),Y=e;return CD(Y.hash.outputLen,Y.nByteLength,Y.hmac)(G,q)}u.BASE._setWindowSize(8);function V(I,x,M,G=Q){var Le;const q=I;if(x=li("msgHash",x),M=li("publicKey",M),"strict"in G)throw new Error("options.strict was renamed to lowS");const{lowS:Y,prehash:U}=G;let j,F;try{if(typeof q=="string"||q instanceof Uint8Array)try{j=w.fromDER(q)}catch(Ke){if(!(Ke instanceof au.Err))throw Ke;j=w.fromCompact(q)}else if(typeof q=="object"&&typeof q.r=="bigint"&&typeof q.s=="bigint"){const{r:Ke,s:Pe}=q;j=new w(Ke,Pe)}else throw new Error("PARSE");F=u.fromHex(M)}catch(Ke){if(Ke.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Y&&j.hasHighS())return!1;U&&(x=e.hash(x));const{r:W,s:te}=j,ae=T(x),fe=c(te),ge=a(ae*fe),Ie=a(W*fe),Je=(Le=u.BASE.multiplyAndAddUnsafe(F,ge,Ie))==null?void 0:Le.toAffine();return Je?a(Je.x)===W:!1}return{CURVE:e,getPublicKey:E,getSharedSecret:S,sign:se,verify:V,ProjectivePoint:u,Signature:w,utils:v}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function rne(t){return{hash:t,hmac:(e,...r)=>sD(t,e,Hte(...r)),randomBytes:qte}}function nne(t,e){const r=n=>tne({...t,...rne(n)});return Object.freeze({...r(e),create:r})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xD=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),FN=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),sne=BigInt(1),A_=BigInt(2),jN=(t,e)=>(t+e/A_)/e;function ine(t){const e=xD,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,h=Bs(l,r,e)*l%e,d=Bs(h,r,e)*l%e,f=Bs(d,A_,e)*u%e,p=Bs(f,s,e)*f%e,g=Bs(p,i,e)*p%e,m=Bs(g,a,e)*g%e,w=Bs(m,c,e)*m%e,v=Bs(w,a,e)*g%e,E=Bs(v,r,e)*l%e,A=Bs(E,o,e)*p%e,S=Bs(A,n,e)*u%e,C=Bs(S,A_,e);if(!C_.eql(C_.sqr(C),t))throw new Error("Cannot find square root");return C}const C_=Vre(xD,void 0,void 0,{sqrt:ine}),Ra=nne({a:BigInt(0),b:BigInt(7),Fp:C_,n:FN,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=FN,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-sne*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=jN(i*t,e),c=jN(-n*t,e);let u=qn(t-a*r-c*s,e),l=qn(-a*n-c*i,e);const h=u>o,d=l>o;if(h&&(u=e-u),d&&(l=e-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:u,k2neg:d,k2:l}}}},oD);BigInt(0);Ra.ProjectivePoint;const gg="0x0000000000000000000000000000000000000000",zN="0x0000000000000000000000000000000000000000000000000000000000000000",HN=BigInt(0),qN=BigInt(1),WN=BigInt(2),VN=BigInt(27),GN=BigInt(28),ay=BigInt(35),Gl={};function KN(t){return tl(Cn(t),32)}var Rh,Ph,kh,vu;const ui=class ui{constructor(e,r,n,s){Z(this,Rh);Z(this,Ph);Z(this,kh);Z(this,vu);gm(e,Gl,"Signature"),k(this,Rh,r),k(this,Ph,n),k(this,kh,s),k(this,vu,null)}get r(){return _(this,Rh)}set r(e){z(mh(e)===32,"invalid r","value",e),k(this,Rh,Ae(e))}get s(){return _(this,Ph)}set s(e){z(mh(e)===32,"invalid s","value",e);const r=Ae(e);z(parseInt(r.substring(0,3))<8,"non-canonical s","value",r),k(this,Ph,r)}get v(){return _(this,kh)}set v(e){const r=He(e,"value");z(r===27||r===28,"invalid v","v",e),k(this,kh,r)}get networkV(){return _(this,vu)}get legacyChainId(){const e=this.networkV;return e==null?null:ui.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=nt(this.s);return this.yParity&&(e[0]|=128),Ae(e)}get compactSerialized(){return lr([this.r,this.yParityAndS])}get serialized(){return lr([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new ui(Gl,this.r,this.s,this.v);return this.networkV&&k(e,vu,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const r=Se(e,"v");return r==VN||r==GN?HN:(z(r>=ay,"invalid EIP-155 v","v",e),(r-ay)/WN)}static getChainIdV(e,r){return Se(e)*WN+BigInt(35+r-27)}static getNormalizedV(e){const r=Se(e);return r===HN||r===VN?27:r===qN||r===GN?28:(z(r>=ay,"invalid v","v",e),r&qN?27:28)}static from(e){function r(u,l){z(u,l,"signature",e)}if(e==null)return new ui(Gl,zN,zN,27);if(typeof e=="string"){const u=nt(e,"signature");if(u.length===64){const l=Ae(u.slice(0,32)),h=u.slice(32,64),d=h[0]&128?28:27;return h[0]&=127,new ui(Gl,l,Ae(h),d)}if(u.length===65){const l=Ae(u.slice(0,32)),h=u.slice(32,64);r((h[0]&128)===0,"non-canonical s");const d=ui.getNormalizedV(u[64]);return new ui(Gl,l,Ae(h),d)}r(!1,"invalid raw signature length")}if(e instanceof ui)return e.clone();const n=e.r;r(n!=null,"missing r");const s=KN(n),i=function(u,l){if(u!=null)return KN(u);if(l!=null){r(Pt(l,32),"invalid yParityAndS");const h=nt(l);return h[0]&=127,Ae(h)}r(!1,"missing s")}(e.s,e.yParityAndS);r((nt(i)[0]&128)==0,"non-canonical s");const{networkV:o,v:a}=function(u,l,h){if(u!=null){const d=Se(u);return{networkV:d>=ay?d:void 0,v:ui.getNormalizedV(d)}}if(l!=null)return r(Pt(l,32),"invalid yParityAndS"),{v:nt(l)[0]&128?28:27};if(h!=null){switch(He(h,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}r(!1,"invalid yParity")}r(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new ui(Gl,s,i,a);return o&&k(c,vu,o),r(e.yParity==null||He(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),r(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};Rh=new WeakMap,Ph=new WeakMap,kh=new WeakMap,vu=new WeakMap;let Ii=ui;var Ho;const Xc=class Xc{constructor(e){Z(this,Ho);z(mh(e)===32,"invalid private key","privateKey","[REDACTED]"),k(this,Ho,Ae(e))}get privateKey(){return _(this,Ho)}get publicKey(){return Xc.computePublicKey(_(this,Ho))}get compressedPublicKey(){return Xc.computePublicKey(_(this,Ho),!0)}sign(e){z(mh(e)===32,"invalid digest length","digest",e);const r=Ra.sign(_n(e),_n(_(this,Ho)),{lowS:!0});return Ii.from({r:Ec(r.r,32),s:Ec(r.s,32),v:r.recovery?28:27})}computeSharedSecret(e){const r=Xc.computePublicKey(e);return Ae(Ra.getSharedSecret(_n(_(this,Ho)),nt(r),!1))}static computePublicKey(e,r){let n=nt(e,"key");if(n.length===32){const i=Ra.getPublicKey(n,!!r);return Ae(i)}if(n.length===64){const i=new Uint8Array(65);i[0]=4,i.set(n,1),n=i}const s=Ra.ProjectivePoint.fromHex(n);return Ae(s.toRawBytes(r))}static recoverPublicKey(e,r){z(mh(e)===32,"invalid digest length","digest",e);const n=Ii.from(r);let s=Ra.Signature.fromCompact(_n(lr([n.r,n.s])));s=s.addRecoveryBit(n.yParity);const i=s.recoverPublicKey(_n(e));return z(i!=null,"invalid signautre for digest","signature",r),"0x"+i.toHex(!1)}static addPoints(e,r,n){const s=Ra.ProjectivePoint.fromHex(Xc.computePublicKey(e).substring(2)),i=Ra.ProjectivePoint.fromHex(Xc.computePublicKey(r).substring(2));return"0x"+s.add(i).toHex(!!n)}};Ho=new WeakMap;let mg=Xc;const one=BigInt(0),ane=BigInt(36);function JN(t){t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let s=0;s<40;s++)r[s]=e[s].charCodeAt(0);const n=nt(mr(r));for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(n[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const _1={};for(let t=0;t<10;t++)_1[String(t)]=String(t);for(let t=0;t<26;t++)_1[String.fromCharCode(65+t)]=String(10+t);const YN=15;function cne(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>_1[n]).join("");for(;e.length>=YN;){let n=e.substring(0,YN);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}const une=function(){const t={};for(let e=0;e<36;e++){const r="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[r]=BigInt(e)}return t}();function lne(t){t=t.toLowerCase();let e=one;for(let r=0;r<t.length;r++)e=e*ane+une[t[r]];return e}function vt(t){if(z(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=JN(t);return z(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){z(t.substring(2,4)===cne(t),"bad icap checksum","address",t);let e=lne(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return JN("0x"+e)}z(!1,"invalid address","address",t)}function hne(t){const e=vt(t.from);let n=Se(t.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,vt(rr(mr(rl([e,n])),12))}function OD(t){return t&&typeof t.getAddress=="function"}function Fpe(t){try{return vt(t),!0}catch{}return!1}async function xv(t,e){const r=await e;return(r==null||r==="0x0000000000000000000000000000000000000000")&&(ne(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),z(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),vt(r)}function In(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?vt(t):(ne(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),xv(t,e.resolveName(t)));if(OD(t))return xv(t,t.getAddress());if(t&&typeof t.then=="function")return xv(t,t);z(!1,"unsupported addressable value","target",t)}const Do={};function Ee(t,e){let r=!1;return e<0&&(r=!0,e*=-1),new un(Do,`${r?"":"u"}int${e}`,t,{signed:r,width:e})}function ct(t,e){return new un(Do,`bytes${e||""}`,t,{size:e})}const QN=Symbol.for("_ethers_typed");var Eu;const Uo=class Uo{constructor(e,r,n,s){K(this,"type");K(this,"value");Z(this,Eu);K(this,"_typedSymbol");s==null&&(s=null),gm(Do,e,"Typed"),xe(this,{_typedSymbol:QN,type:r,value:n}),k(this,Eu,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return _(this,Eu)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return _(this,Eu)===!0?-1:_(this,Eu)===!1?this.value.length:null}static from(e,r){return new Uo(Do,e,r)}static uint8(e){return Ee(e,8)}static uint16(e){return Ee(e,16)}static uint24(e){return Ee(e,24)}static uint32(e){return Ee(e,32)}static uint40(e){return Ee(e,40)}static uint48(e){return Ee(e,48)}static uint56(e){return Ee(e,56)}static uint64(e){return Ee(e,64)}static uint72(e){return Ee(e,72)}static uint80(e){return Ee(e,80)}static uint88(e){return Ee(e,88)}static uint96(e){return Ee(e,96)}static uint104(e){return Ee(e,104)}static uint112(e){return Ee(e,112)}static uint120(e){return Ee(e,120)}static uint128(e){return Ee(e,128)}static uint136(e){return Ee(e,136)}static uint144(e){return Ee(e,144)}static uint152(e){return Ee(e,152)}static uint160(e){return Ee(e,160)}static uint168(e){return Ee(e,168)}static uint176(e){return Ee(e,176)}static uint184(e){return Ee(e,184)}static uint192(e){return Ee(e,192)}static uint200(e){return Ee(e,200)}static uint208(e){return Ee(e,208)}static uint216(e){return Ee(e,216)}static uint224(e){return Ee(e,224)}static uint232(e){return Ee(e,232)}static uint240(e){return Ee(e,240)}static uint248(e){return Ee(e,248)}static uint256(e){return Ee(e,256)}static uint(e){return Ee(e,256)}static int8(e){return Ee(e,-8)}static int16(e){return Ee(e,-16)}static int24(e){return Ee(e,-24)}static int32(e){return Ee(e,-32)}static int40(e){return Ee(e,-40)}static int48(e){return Ee(e,-48)}static int56(e){return Ee(e,-56)}static int64(e){return Ee(e,-64)}static int72(e){return Ee(e,-72)}static int80(e){return Ee(e,-80)}static int88(e){return Ee(e,-88)}static int96(e){return Ee(e,-96)}static int104(e){return Ee(e,-104)}static int112(e){return Ee(e,-112)}static int120(e){return Ee(e,-120)}static int128(e){return Ee(e,-128)}static int136(e){return Ee(e,-136)}static int144(e){return Ee(e,-144)}static int152(e){return Ee(e,-152)}static int160(e){return Ee(e,-160)}static int168(e){return Ee(e,-168)}static int176(e){return Ee(e,-176)}static int184(e){return Ee(e,-184)}static int192(e){return Ee(e,-192)}static int200(e){return Ee(e,-200)}static int208(e){return Ee(e,-208)}static int216(e){return Ee(e,-216)}static int224(e){return Ee(e,-224)}static int232(e){return Ee(e,-232)}static int240(e){return Ee(e,-240)}static int248(e){return Ee(e,-248)}static int256(e){return Ee(e,-256)}static int(e){return Ee(e,-256)}static bytes1(e){return ct(e,1)}static bytes2(e){return ct(e,2)}static bytes3(e){return ct(e,3)}static bytes4(e){return ct(e,4)}static bytes5(e){return ct(e,5)}static bytes6(e){return ct(e,6)}static bytes7(e){return ct(e,7)}static bytes8(e){return ct(e,8)}static bytes9(e){return ct(e,9)}static bytes10(e){return ct(e,10)}static bytes11(e){return ct(e,11)}static bytes12(e){return ct(e,12)}static bytes13(e){return ct(e,13)}static bytes14(e){return ct(e,14)}static bytes15(e){return ct(e,15)}static bytes16(e){return ct(e,16)}static bytes17(e){return ct(e,17)}static bytes18(e){return ct(e,18)}static bytes19(e){return ct(e,19)}static bytes20(e){return ct(e,20)}static bytes21(e){return ct(e,21)}static bytes22(e){return ct(e,22)}static bytes23(e){return ct(e,23)}static bytes24(e){return ct(e,24)}static bytes25(e){return ct(e,25)}static bytes26(e){return ct(e,26)}static bytes27(e){return ct(e,27)}static bytes28(e){return ct(e,28)}static bytes29(e){return ct(e,29)}static bytes30(e){return ct(e,30)}static bytes31(e){return ct(e,31)}static bytes32(e){return ct(e,32)}static address(e){return new Uo(Do,"address",e)}static bool(e){return new Uo(Do,"bool",!!e)}static bytes(e){return new Uo(Do,"bytes",e)}static string(e){return new Uo(Do,"string",e)}static array(e,r){throw new Error("not implemented yet")}static tuple(e,r){throw new Error("not implemented yet")}static overrides(e){return new Uo(Do,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===QN}static dereference(e,r){if(Uo.isTyped(e)){if(e.type!==r)throw new Error(`invalid type: expecetd ${r}, got ${e.type}`);return e.value}return e}};Eu=new WeakMap;let un=Uo;class dne extends ba{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,r){let n=un.dereference(r,"string");try{n=vt(n)}catch(s){return this._throwError(s.message,r)}return e.writeValue(n)}decode(e){return vt(Ec(e.readValue(),20))}}class fne extends ba{constructor(r){super(r.name,r.type,"_",r.dynamic);K(this,"coder");this.coder=r}defaultValue(){return this.coder.defaultValue()}encode(r,n){return this.coder.encode(r,n)}decode(r){return this.coder.decode(r)}}function RD(t,e,r){let n=[];if(Array.isArray(r))n=r;else if(r&&typeof r=="object"){let c={};n=e.map(u=>{const l=u.localName;return ne(l,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:r}),ne(!c[l],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:r}),c[l]=!0,r[l]})}else z(!1,"invalid tuple value","tuple",r);z(e.length===n.length,"types/value length mismatch","tuple",r);let s=new y_,i=new y_,o=[];e.forEach((c,u)=>{let l=n[u];if(c.dynamic){let h=i.length;c.encode(i,l);let d=s.writeUpdatableValue();o.push(f=>{d(f+h)})}else c.encode(s,l)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function PD(t,e){let r=[],n=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(u){if(Kr(u,"BUFFER_OVERRUN"))throw u;o=u,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(Kr(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");r.push(o),n.push(i.localName||null)}),Sd.fromItems(r,n)}class pne extends ba{constructor(r,n,s){const i=r.type+"["+(n>=0?n:"")+"]",o=n===-1||r.dynamic;super("array",i,s,o);K(this,"coder");K(this,"length");xe(this,{coder:r,length:n})}defaultValue(){const r=this.coder.defaultValue(),n=[];for(let s=0;s<this.length;s++)n.push(r);return n}encode(r,n){const s=un.dereference(n,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,r.writeValue(s.length)),Fk(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return RD(r,o,s)}decode(r){let n=this.length;n===-1&&(n=r.readIndex(),ne(n*Sn<=r.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:r.bytes,offset:n*Sn,length:r.dataLength}));let s=[];for(let i=0;i<n;i++)s.push(new fne(this.coder));return PD(r,s)}}class gne extends ba{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,r){const n=un.dereference(r,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class kD extends ba{constructor(e,r){super(e,e,r,!0)}defaultValue(){return"0x"}encode(e,r){r=_n(r);let n=e.writeValue(r.length);return n+=e.writeBytes(r),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class mne extends kD{constructor(e){super("bytes",e)}decode(e){return Ae(super.decode(e))}}class yne extends ba{constructor(r,n){let s="bytes"+String(r);super(s,s,n,!1);K(this,"size");xe(this,{size:r},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(r,n){let s=_n(un.dereference(n,this.type));return s.length!==this.size&&this._throwError("incorrect data length",n),r.writeBytes(s)}decode(r){return Ae(r.readBytes(this.size))}}const wne=new Uint8Array([]);class bne extends ba{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,r){return r!=null&&this._throwError("not null",r),e.writeBytes(wne)}decode(e){return e.readBytes(0),null}}const vne=BigInt(0),Ene=BigInt(1),_ne=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Ane extends ba{constructor(r,n,s){const i=(n?"int":"uint")+r*8;super(i,i,s,!1);K(this,"size");K(this,"signed");xe(this,{size:r,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(r,n){let s=Se(un.dereference(n,this.type)),i=ou(_ne,Sn*8);if(this.signed){let o=ou(i,this.size*8-1);(s>o||s<-(o+Ene))&&this._throwError("value out-of-bounds",n),s=Hk(s,8*Sn)}else(s<vne||s>ou(i,this.size*8))&&this._throwError("value out-of-bounds",n);return r.writeValue(s)}decode(r){let n=ou(r.readValue(),this.size*8);return this.signed&&(n=bw(n,this.size*8)),n}}class Cne extends kD{constructor(e){super("string",e)}defaultValue(){return""}encode(e,r){return super.encode(e,uo(un.dereference(r,"string")))}decode(e){return vw(super.decode(e))}}class cy extends ba{constructor(r,n){let s=!1;const i=[];r.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,n,s);K(this,"coders");xe(this,{coders:Object.freeze(r.slice())})}defaultValue(){const r=[];this.coders.forEach(s=>{r.push(s.defaultValue())});const n=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||n[o]!==1||(o==="length"&&(o="_length"),r[o]==null&&(r[o]=r[i]))}),Object.freeze(r)}encode(r,n){const s=un.dereference(n,"tuple");return RD(r,this.coders,s)}decode(r){return PD(r,this.coders)}}function nl(t){return mr(uo(t))}var Sne="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const ZN=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),XN=4;function Ine(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),s=1,i=[0,1];for(let S=1;S<n;S++)i.push(s+=r());let o=r(),a=e;e+=o;let c=0,u=0;function l(){return c==0&&(u=u<<8|t[e++],c=8),u>>--c&1}const h=31,d=2**h,f=d>>>1,p=f>>1,g=d-1;let m=0;for(let S=0;S<h;S++)m=m<<1|l();let w=[],v=0,E=d;for(;;){let S=Math.floor(((m-v+1)*s-1)/E),C=0,T=n;for(;T-C>1;){let B=C+T>>>1;S<i[B]?T=B:C=B}if(C==0)break;w.push(C);let O=v+Math.floor(E*i[C]/s),P=v+Math.floor(E*i[C+1]/s)-1;for(;((O^P)&f)==0;)m=m<<1&g|l(),O=O<<1&g,P=P<<1&g|1;for(;O&~P&p;)m=m&f|m<<1&g>>>1|l(),O=O<<1^f,P=(P^f)<<1|f|1;v=O,E=1+P-O}let A=n-4;return w.map(S=>{switch(S-A){case 3:return A+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return A+256+(t[a++]<<8|t[a++]);case 1:return A+t[a++];default:return S-1}})}function Tne(t){let e=0;return()=>t[e++]}function DD(t){return Tne(Ine(Nne(t)))}function Nne(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let r=t.length,n=new Uint8Array(6*r>>3);for(let s=0,i=0,o=0,a=0;s<r;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(n[i++]=a>>(o-=8));return n}function xne(t){return t&1?~t>>1:t>>1}function One(t,e){let r=Array(t);for(let n=0,s=0;n<t;n++)r[n]=s+=xne(e());return r}function yg(t,e=0){let r=[];for(;;){let n=t(),s=t();if(!s)break;e+=n;for(let i=0;i<s;i++)r.push(e+i);e+=s+1}return r}function UD(t){return wg(()=>{let e=yg(t);if(e.length)return e})}function BD(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(Rne(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(Pne(r,t))}return e.flat()}function wg(t){let e=[];for(;;){let r=t(e.length);if(!r)break;e.push(r)}return e}function $D(t,e,r){let n=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)One(t,r).forEach((i,o)=>n[o].push(i));return n}function Rne(t,e){let r=1+e(),n=e(),s=wg(e);return $D(s.length,1+t,e).flatMap((o,a)=>{let[c,...u]=o;return Array(s[a]).fill().map((l,h)=>{let d=h*n;return[c+h*r,u.map(f=>f+d)]})})}function Pne(t,e){let r=1+e();return $D(r,1+t,e).map(s=>[s[0],s.slice(1)])}function kne(t){let e=[],r=yg(t);return s(n([]),[]),e;function n(i){let o=t(),a=wg(()=>{let c=yg(t).map(u=>r[u]);if(c.length)return n(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let u of o)for(let l of u.Q)s(u,[...a,l],c)}}}function Dne(t){return t.toString(16).toUpperCase().padStart(2,"0")}function LD(t){return`{${Dne(t)}}`}function Une(t){let e=[];for(let r=0,n=t.length;r<n;){let s=t.codePointAt(r);r+=s<65536?1:2,e.push(s)}return e}function Od(t){let r=t.length;if(r<4096)return String.fromCodePoint(...t);let n=[];for(let s=0;s<r;)n.push(String.fromCodePoint(...t.slice(s,s+=4096)));return n.join("")}function Bne(t,e){let r=t.length,n=r-e.length;for(let s=0;n==0&&s<r;s++)n=t[s]-e[s];return n}var $ne="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const bg=44032,Aw=4352,Cw=4449,Sw=4519,MD=19,FD=21,Rd=28,Iw=FD*Rd,Lne=MD*Iw,Mne=bg+Lne,Fne=Aw+MD,jne=Cw+FD,zne=Sw+Rd;function Wf(t){return t>>24&255}function jD(t){return t&16777215}let S_,ex,I_,Dy;function Hne(){let t=DD($ne);S_=new Map(UD(t).flatMap((e,r)=>e.map(n=>[n,r+1<<24]))),ex=new Set(yg(t)),I_=new Map,Dy=new Map;for(let[e,r]of BD(t)){if(!ex.has(e)&&r.length==2){let[n,s]=r,i=Dy.get(n);i||(i=new Map,Dy.set(n,i)),i.set(s,e)}I_.set(e,r.reverse())}}function zD(t){return t>=bg&&t<Mne}function qne(t,e){if(t>=Aw&&t<Fne&&e>=Cw&&e<jne)return bg+(t-Aw)*Iw+(e-Cw)*Rd;if(zD(t)&&e>Sw&&e<zne&&(t-bg)%Rd==0)return t+(e-Sw);{let r=Dy.get(t);return r&&(r=r.get(e),r)?r:-1}}function HD(t){S_||Hne();let e=[],r=[],n=!1;function s(i){let o=S_.get(i);o&&(n=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(zD(i)){let o=i-bg,a=o/Iw|0,c=o%Iw/Rd|0,u=o%Rd;s(Aw+a),s(Cw+c),u>0&&s(Sw+u)}else{let o=I_.get(i);o?r.push(...o):s(i)}if(!r.length)break;i=r.pop()}if(n&&e.length>1){let i=Wf(e[0]);for(let o=1;o<e.length;o++){let a=Wf(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let u=e[c+1];if(e[c+1]=e[c],e[c]=u,!c||(i=Wf(e[--c]),i<=a))break}i=Wf(e[o])}}return e}function Wne(t){let e=[],r=[],n=-1,s=0;for(let i of t){let o=Wf(i),a=jD(i);if(n==-1)o==0?n=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(n,...r),r.length=0,n=a):r.push(a),s=o;else{let c=qne(n,a);c>=0?n=c:s==0&&o==0?(e.push(n),n=a):(r.push(a),s=o)}}return n>=0&&e.push(n,...r),e}function qD(t){return HD(t).map(jD)}function Vne(t){return Wne(HD(t))}const tx=45,WD=".",VD=65039,GD=1,Tw=t=>Array.from(t);function vg(t,e){return t.P.has(e)||t.Q.has(e)}class Gne extends Array{get is_emoji(){return!0}}let T_,KD,cu,N_,JD,wh,Ov,th,zc,rx,x_;function A1(){if(T_)return;let t=DD(Sne);const e=()=>yg(t),r=()=>new Set(e()),n=(l,h)=>h.forEach(d=>l.add(d));T_=new Map(BD(t)),KD=r(),cu=e(),N_=new Set(e().map(l=>cu[l])),cu=new Set(cu),JD=r(),r();let s=UD(t),i=t();const o=()=>{let l=new Set;return e().forEach(h=>n(l,s[h])),n(l,e()),l};wh=wg(l=>{let h=wg(t).map(d=>d+96);if(h.length){let d=l>=i;h[0]-=32,h=Od(h),d&&(h=`Restricted[${h}]`);let f=o(),p=o(),g=!t();return{N:h,P:f,Q:p,M:g,R:d}}}),Ov=r(),th=new Map;let a=e().concat(Tw(Ov)).sort((l,h)=>l-h);a.forEach((l,h)=>{let d=t(),f=a[h]=d?a[h-d]:{V:[],M:new Map};f.V.push(l),Ov.has(l)||th.set(l,f)});for(let{V:l,M:h}of new Set(th.values())){let d=[];for(let p of l){let g=wh.filter(w=>vg(w,p)),m=d.find(({G:w})=>g.some(v=>w.has(v)));m||(m={G:new Set,V:[]},d.push(m)),m.V.push(p),n(m.G,g)}let f=d.flatMap(p=>Tw(p.G));for(let{G:p,V:g}of d){let m=new Set(f.filter(w=>!p.has(w)));for(let w of g)h.set(w,m)}}zc=new Set;let c=new Set;const u=l=>zc.has(l)?c.add(l):zc.add(l);for(let l of wh){for(let h of l.P)u(h);for(let h of l.Q)u(h)}for(let l of zc)!th.has(l)&&!c.has(l)&&th.set(l,GD);n(zc,qD(zc)),rx=kne(t).map(l=>Gne.from(l)).sort(Bne),x_=new Map;for(let l of rx){let h=[x_];for(let d of l){let f=h.map(p=>{let g=p.get(d);return g||(g=new Map,p.set(d,g)),g});d===VD?h.push(...f):h=f}for(let d of h)d.V=l}}function C1(t){return(YD(t)?"":`${S1(U0([t]))} `)+LD(t)}function S1(t){return`"${t}"‎`}function Kne(t){if(t.length>=4&&t[2]==tx&&t[3]==tx)throw new Error(`invalid label extension: "${Od(t.slice(0,4))}"`)}function Jne(t){for(let r=t.lastIndexOf(95);r>0;)if(t[--r]!==95)throw new Error("underscore allowed only at start")}function Yne(t){let e=t[0],r=ZN.get(e);if(r)throw gp(`leading ${r}`);let n=t.length,s=-1;for(let i=1;i<n;i++){e=t[i];let o=ZN.get(e);if(o){if(s==i)throw gp(`${r} + ${o}`);s=i+1,r=o}}if(s==n)throw gp(`trailing ${r}`)}function U0(t,e=1/0,r=LD){let n=[];Qne(t[0])&&n.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];YD(a)&&(n.push(Od(t.slice(s,o))),n.push(r(a)),s=o+1)}return n.push(Od(t.slice(s,i))),n.join("")}function Qne(t){return A1(),cu.has(t)}function YD(t){return A1(),JD.has(t)}function Zne(t){return rse(Xne(t,Vne,ise))}function Xne(t,e,r){if(!t)return[];A1();let n=0;return t.split(WD).map(s=>{let i=Une(s),o={input:i,offset:n};n+=i.length+1;try{let a=o.tokens=sse(i,e,r),c=a.length,u;if(!c)throw new Error("empty label");let l=o.output=a.flat();if(Jne(l),!(o.emoji=c>1||a[0].is_emoji)&&l.every(d=>d<128))Kne(l),u="ASCII";else{let d=a.flatMap(f=>f.is_emoji?[]:f);if(!d.length)u="Emoji";else{if(cu.has(l[0]))throw gp("leading combining mark");for(let g=1;g<c;g++){let m=a[g];if(!m.is_emoji&&cu.has(m[0]))throw gp(`emoji + combining mark: "${Od(a[g-1])} + ${U0([m[0]])}"`)}Yne(l);let f=Tw(new Set(d)),[p]=tse(f);nse(p,d),ese(p,f),u=p.N}}o.type=u}catch(a){o.error=a}return o})}function ese(t,e){let r,n=[];for(let s of e){let i=th.get(s);if(i===GD)return;if(i){let o=i.M.get(s);if(r=r?r.filter(a=>o.has(a)):Tw(o),!r.length)return}else n.push(s)}if(r){for(let s of r)if(n.every(i=>vg(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function tse(t){let e=wh;for(let r of t){let n=e.filter(s=>vg(s,r));if(!n.length)throw wh.some(s=>vg(s,r))?ZD(e[0],r):QD(r);if(e=n,n.length==1)break}return e}function rse(t){return t.map(({input:e,error:r,output:n})=>{if(r){let s=r.message;throw new Error(t.length==1?s:`Invalid label ${S1(U0(e,63))}: ${s}`)}return Od(n)}).join(WD)}function QD(t){return new Error(`disallowed character: ${C1(t)}`)}function ZD(t,e){let r=C1(e),n=wh.find(s=>s.P.has(e));return n&&(r=`${n.N} ${r}`),new Error(`illegal mixture: ${t.N} + ${r}`)}function gp(t){return new Error(`illegal placement: ${t}`)}function nse(t,e){for(let r of e)if(!vg(t,r))throw ZD(t,r);if(t.M){let r=qD(e);for(let n=1,s=r.length;n<s;n++)if(N_.has(r[n])){let i=n+1;for(let o;i<s&&N_.has(o=r[i]);i++)for(let a=n;a<i;a++)if(r[a]==o)throw new Error(`duplicate non-spacing marks: ${C1(o)}`);if(i-n>XN)throw new Error(`excessive non-spacing marks: ${S1(U0(r.slice(n-1,i)))} (${i-n}/${XN})`);n=i}}}function sse(t,e,r){let n=[],s=[];for(t=t.slice().reverse();t.length;){let i=ose(t);if(i)s.length&&(n.push(e(s)),s=[]),n.push(r(i));else{let o=t.pop();if(zc.has(o))s.push(o);else{let a=T_.get(o);if(a)s.push(...a);else if(!KD.has(o))throw QD(o)}}}return s.length&&n.push(e(s)),n}function ise(t){return t.filter(e=>e!=VD)}function ose(t,e){let r=x_,n,s=t.length;for(;s&&(r=r.get(t[--s]),!!r);){let{V:i}=r;i&&(n=i,t.length=s)}return n}const XD=new Uint8Array(32);XD.fill(0);function nx(t){return z(t.length!==0,"invalid ENS name; empty component","comp",t),t}function e3(t){const e=uo(ase(t)),r=[];if(t.length===0)return r;let n=0;for(let s=0;s<e.length;s++)e[s]===46&&(r.push(nx(e.slice(n,s))),n=s+1);return z(n<e.length,"invalid ENS name; empty component","name",t),r.push(nx(e.slice(n))),r}function ase(t){try{if(t.length===0)throw new Error("empty label");return Zne(t)}catch(e){z(!1,`invalid ENS name (${e.message})`,"name",t)}}function O_(t){z(typeof t=="string","invalid ENS name; not a string","name",t),z(t.length,"invalid ENS name (empty label)","name",t);let e=XD;const r=e3(t);for(;r.length;)e=mr(lr([e,mr(r.pop())]));return Ae(e)}function cse(t,e){const r=e;return z(r<=255,"DNS encoded label cannot exceed 255","length",r),Ae(lr(e3(t).map(n=>{z(n.length<=r,`label ${JSON.stringify(t)} exceeds ${r} bytes`,"name",t);const s=new Uint8Array(n.length+1);return s.set(n,1),s[0]=s.length-1,s})))+"00"}function Rv(t,e){return{address:vt(t),storageKeys:e.map((r,n)=>(z(Pt(r,32),"invalid slot",`storageKeys[${n}]`,r),r.toLowerCase()))}}function vl(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(z(r.length===2,"invalid slot set",`value[${n}]`,r),Rv(r[0],r[1])):(z(r!=null&&typeof r=="object","invalid address-slot set","value",t),Rv(r.address,r.storageKeys)));z(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(r=>{const n=t[r].reduce((s,i)=>(s[i]=!0,s),{});return Rv(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function use(t){let e;return typeof t=="string"?e=mg.computePublicKey(t,!1):e=t.publicKey,vt(mr("0x"+e.substring(4)).substring(26))}function lse(t,e){return use(mg.recoverPublicKey(t,e))}const Nr=BigInt(0),hse=BigInt(2),dse=BigInt(27),fse=BigInt(28),pse=BigInt(35),gse=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Pv=4096*32;function sx(t,e){let r=t.toString(16);for(;r.length<2;)r="0"+r;return r+=Xd(e).substring(4),"0x"+r}function B0(t){return t==="0x"?null:vt(t)}function I1(t,e){try{return vl(t)}catch(r){z(!1,r.message,e,t)}}function ym(t,e){return t==="0x"?0:He(t,e)}function ur(t,e){if(t==="0x")return Nr;const r=Se(t,e);return z(r<=gse,"value exceeds uint size",e,r),r}function zt(t,e){const r=Se(t,"value"),n=Cn(r);return z(n.length<=32,"value too large",`tx.${e}`,r),n}function T1(t){return vl(t).map(e=>[e.address,e.storageKeys])}function mse(t,e){z(Array.isArray(t),`invalid ${e}`,"value",t);for(let r=0;r<t.length;r++)z(Pt(t[r],32),"invalid ${ param } hash",`value[${r}]`,t[r]);return t}function yse(t){const e=R0(t);z(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const r={type:0,nonce:ym(e[0],"nonce"),gasPrice:ur(e[1],"gasPrice"),gasLimit:ur(e[2],"gasLimit"),to:B0(e[3]),value:ur(e[4],"value"),data:Ae(e[5]),chainId:Nr};if(e.length===6)return r;const n=ur(e[6],"v"),s=ur(e[7],"r"),i=ur(e[8],"s");if(s===Nr&&i===Nr)r.chainId=n;else{let o=(n-pse)/hse;o<Nr&&(o=Nr),r.chainId=o,z(o!==Nr||n===dse||n===fse,"non-canonical legacy v","v",e[6]),r.signature=Ii.from({r:tl(e[7],32),s:tl(e[8],32),v:n})}return r}function wse(t,e){const r=[zt(t.nonce,"nonce"),zt(t.gasPrice||0,"gasPrice"),zt(t.gasLimit,"gasLimit"),t.to||"0x",zt(t.value,"value"),t.data];let n=Nr;if(t.chainId!=Nr)n=Se(t.chainId,"tx.chainId"),z(!e||e.networkV==null||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(n=i)}if(!e)return n!==Nr&&(r.push(Cn(n)),r.push("0x"),r.push("0x")),rl(r);let s=BigInt(27+e.yParity);return n!==Nr?s=Ii.getChainIdV(n,e.v):BigInt(e.v)!==s&&z(!1,"tx.chainId/sig.v mismatch","sig",e),r.push(Cn(s)),r.push(Cn(e.r)),r.push(Cn(e.s)),rl(r)}function N1(t,e){let r;try{if(r=ym(e[0],"yParity"),r!==0&&r!==1)throw new Error("bad yParity")}catch{z(!1,"invalid yParity","yParity",e[0])}const n=tl(e[1],32),s=tl(e[2],32),i=Ii.from({r:n,s,yParity:r});t.signature=i}function bse(t){const e=R0(nt(t).slice(1));z(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Ae(t));const r={type:2,chainId:ur(e[0],"chainId"),nonce:ym(e[1],"nonce"),maxPriorityFeePerGas:ur(e[2],"maxPriorityFeePerGas"),maxFeePerGas:ur(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:ur(e[4],"gasLimit"),to:B0(e[5]),value:ur(e[6],"value"),data:Ae(e[7]),accessList:I1(e[8],"accessList")};return e.length===9||N1(r,e.slice(9)),r}function vse(t,e){const r=[zt(t.chainId,"chainId"),zt(t.nonce,"nonce"),zt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),zt(t.maxFeePerGas||0,"maxFeePerGas"),zt(t.gasLimit,"gasLimit"),t.to||"0x",zt(t.value,"value"),t.data,T1(t.accessList||[])];return e&&(r.push(zt(e.yParity,"yParity")),r.push(Cn(e.r)),r.push(Cn(e.s))),lr(["0x02",rl(r)])}function Ese(t){const e=R0(nt(t).slice(1));z(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Ae(t));const r={type:1,chainId:ur(e[0],"chainId"),nonce:ym(e[1],"nonce"),gasPrice:ur(e[2],"gasPrice"),gasLimit:ur(e[3],"gasLimit"),to:B0(e[4]),value:ur(e[5],"value"),data:Ae(e[6]),accessList:I1(e[7],"accessList")};return e.length===8||N1(r,e.slice(8)),r}function _se(t,e){const r=[zt(t.chainId,"chainId"),zt(t.nonce,"nonce"),zt(t.gasPrice||0,"gasPrice"),zt(t.gasLimit,"gasLimit"),t.to||"0x",zt(t.value,"value"),t.data,T1(t.accessList||[])];return e&&(r.push(zt(e.yParity,"recoveryParam")),r.push(Cn(e.r)),r.push(Cn(e.s))),lr(["0x01",rl(r)])}function Ase(t){let e=R0(nt(t).slice(1)),r="3",n=null;if(e.length===4&&Array.isArray(e[0])){r="3 (network format)";const i=e[1],o=e[2],a=e[3];z(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),z(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),z(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),z(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),z(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),n=[];for(let c=0;c<e[1].length;c++)n.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}z(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${r}`,"data",Ae(t));const s={type:3,chainId:ur(e[0],"chainId"),nonce:ym(e[1],"nonce"),maxPriorityFeePerGas:ur(e[2],"maxPriorityFeePerGas"),maxFeePerGas:ur(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:ur(e[4],"gasLimit"),to:B0(e[5]),value:ur(e[6],"value"),data:Ae(e[7]),accessList:I1(e[8],"accessList"),maxFeePerBlobGas:ur(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};n&&(s.blobs=n),z(s.to!=null,`invalid address for transaction type: ${r}`,"data",t),z(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)z(Pt(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||N1(s,e.slice(11)),s}function Cse(t,e,r){const n=[zt(t.chainId,"chainId"),zt(t.nonce,"nonce"),zt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),zt(t.maxFeePerGas||0,"maxFeePerGas"),zt(t.gasLimit,"gasLimit"),t.to||gg,zt(t.value,"value"),t.data,T1(t.accessList||[]),zt(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),mse(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(n.push(zt(e.yParity,"yParity")),n.push(Cn(e.r)),n.push(Cn(e.s)),r)?lr(["0x03",rl([n,r.map(s=>s.data),r.map(s=>s.commitment),r.map(s=>s.proof)])]):lr(["0x03",rl(n)])}var Wi,Dh,Uh,Bh,$h,Lh,Mh,Fh,jh,zh,Hh,qh,_u,za,qo,Ha,Wh,Uy;const Bo=class Bo{constructor(){Z(this,Wh);Z(this,Wi);Z(this,Dh);Z(this,Uh);Z(this,Bh);Z(this,$h);Z(this,Lh);Z(this,Mh);Z(this,Fh);Z(this,jh);Z(this,zh);Z(this,Hh);Z(this,qh);Z(this,_u);Z(this,za);Z(this,qo);Z(this,Ha);k(this,Wi,null),k(this,Dh,null),k(this,Bh,0),k(this,$h,Nr),k(this,Lh,null),k(this,Mh,null),k(this,Fh,null),k(this,Uh,"0x"),k(this,jh,Nr),k(this,zh,Nr),k(this,Hh,null),k(this,qh,null),k(this,_u,null),k(this,za,null),k(this,Ha,null),k(this,qo,null)}get type(){return _(this,Wi)}set type(e){switch(e){case null:k(this,Wi,null);break;case 0:case"legacy":k(this,Wi,0);break;case 1:case"berlin":case"eip-2930":k(this,Wi,1);break;case 2:case"london":case"eip-1559":k(this,Wi,2);break;case 3:case"cancun":case"eip-4844":k(this,Wi,3);break;default:z(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const e=_(this,Dh);return e==null&&this.type===3?gg:e}set to(e){k(this,Dh,e==null?null:vt(e))}get nonce(){return _(this,Bh)}set nonce(e){k(this,Bh,He(e,"value"))}get gasLimit(){return _(this,$h)}set gasLimit(e){k(this,$h,Se(e))}get gasPrice(){const e=_(this,Lh);return e==null&&(this.type===0||this.type===1)?Nr:e}set gasPrice(e){k(this,Lh,e==null?null:Se(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=_(this,Mh);return e??(this.type===2||this.type===3?Nr:null)}set maxPriorityFeePerGas(e){k(this,Mh,e==null?null:Se(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=_(this,Fh);return e??(this.type===2||this.type===3?Nr:null)}set maxFeePerGas(e){k(this,Fh,e==null?null:Se(e,"maxFeePerGas"))}get data(){return _(this,Uh)}set data(e){k(this,Uh,Ae(e))}get value(){return _(this,jh)}set value(e){k(this,jh,Se(e,"value"))}get chainId(){return _(this,zh)}set chainId(e){k(this,zh,Se(e))}get signature(){return _(this,Hh)||null}set signature(e){k(this,Hh,e==null?null:Ii.from(e))}get accessList(){const e=_(this,qh)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){k(this,qh,e==null?null:vl(e))}get maxFeePerBlobGas(){const e=_(this,_u);return e==null&&this.type===3?Nr:e}set maxFeePerBlobGas(e){k(this,_u,e==null?null:Se(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=_(this,za);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){z(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let r=0;r<e.length;r++)z(Pt(e[r],32),"invalid blobVersionedHash",`value[${r}]`,e[r])}k(this,za,e)}get blobs(){return _(this,Ha)==null?null:_(this,Ha).map(e=>Object.assign({},e))}set blobs(e){if(e==null){k(this,Ha,null);return}const r=[],n=[];for(let s=0;s<e.length;s++){const i=e[s];if(h1(i)){ne(_(this,qo),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=nt(i);if(z(o.length<=Pv,"blob is too large",`blobs[${s}]`,i),o.length!==Pv){const u=new Uint8Array(Pv);u.set(o),o=u}const a=_(this,qo).blobToKzgCommitment(o),c=Ae(_(this,qo).computeBlobKzgProof(o,a));r.push({data:Ae(o),commitment:Ae(a),proof:c}),n.push(sx(1,a))}else{const o=Ae(i.commitment);r.push({data:Ae(i.data),commitment:o,proof:Ae(i.proof)}),n.push(sx(1,o))}}k(this,Ha,r),k(this,za,n)}get kzg(){return _(this,qo)}set kzg(e){k(this,qo,e)}get hash(){return this.signature==null?null:mr(oe(this,Wh,Uy).call(this,!0,!1))}get unsignedHash(){return mr(this.unsignedSerialized)}get from(){return this.signature==null?null:lse(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:mg.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return oe(this,Wh,Uy).call(this,!0,!0)}get unsignedSerialized(){return oe(this,Wh,Uy).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,r=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,s=_(this,_u)!=null||_(this,za);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&ne(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ne(!r||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ne(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):r?i.push(2):e?(i.push(1),n||i.push(0)):n?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Bo.from(this)}toJSON(){const e=r=>r==null?null:r.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Bo;if(typeof e=="string"){const n=nt(e);if(n[0]>=127)return Bo.from(yse(n));switch(n[0]){case 1:return Bo.from(Ese(n));case 2:return Bo.from(bse(n));case 3:return Bo.from(Ase(n))}ne(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const r=new Bo;return e.type!=null&&(r.type=e.type),e.to!=null&&(r.to=e.to),e.nonce!=null&&(r.nonce=e.nonce),e.gasLimit!=null&&(r.gasLimit=e.gasLimit),e.gasPrice!=null&&(r.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(r.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(r.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(r.data=e.data),e.value!=null&&(r.value=e.value),e.chainId!=null&&(r.chainId=e.chainId),e.signature!=null&&(r.signature=Ii.from(e.signature)),e.accessList!=null&&(r.accessList=e.accessList),e.blobVersionedHashes!=null&&(r.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(r.kzg=e.kzg),e.blobs!=null&&(r.blobs=e.blobs),e.hash!=null&&(z(r.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),z(r.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(z(r.isSigned(),"unsigned transaction cannot define '.from'","tx",e),z(r.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),r}};Wi=new WeakMap,Dh=new WeakMap,Uh=new WeakMap,Bh=new WeakMap,$h=new WeakMap,Lh=new WeakMap,Mh=new WeakMap,Fh=new WeakMap,jh=new WeakMap,zh=new WeakMap,Hh=new WeakMap,qh=new WeakMap,_u=new WeakMap,za=new WeakMap,qo=new WeakMap,Ha=new WeakMap,Wh=new WeakSet,Uy=function(e,r){ne(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=e?this.signature:null;switch(this.inferType()){case 0:return wse(this,n);case 1:return _se(this,n);case 2:return vse(this,n);case 3:return Cse(this,n,r?this.blobs:null)}ne(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Nw=Bo;const t3=new Uint8Array(32);t3.fill(0);const Sse=BigInt(-1),r3=BigInt(0),n3=BigInt(1),Ise=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Tse(t){const e=nt(t),r=e.length%32;return r?lr([e,t3.slice(r)]):Ae(e)}const Nse=Ec(n3,32),xse=Ec(r3,32),ix={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},kv=["name","version","chainId","verifyingContract","salt"];function ox(t){return function(e){return z(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const Ose={name:ox("name"),version:ox("version"),chainId:function(t){const e=Se(t,"domain.chainId");return z(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):ah(e)},verifyingContract:function(t){try{return vt(t).toLowerCase()}catch{}z(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=nt(t,"domain.salt");return z(e.length===32,'invalid domain value "salt"',"domain.salt",t),Ae(e)}};function Dv(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const r=e[1]==="",n=parseInt(e[2]);z(n%8===0&&n!==0&&n<=256&&e[2]===String(n),"invalid numeric width","type",t);const s=ou(Ise,r?n-1:n),i=r?(s+n3)*Sse:r3;return function(o){const a=Se(o,"value");return z(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),Ec(r?Hk(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return z(r!==0&&r<=32&&e[1]===String(r),"invalid bytes width","type",t),function(n){const s=nt(n);return z(s.length===r,`invalid length for ${t}`,"value",n),Tse(n)}}}switch(t){case"address":return function(e){return tl(vt(e),32)};case"bool":return function(e){return e?Nse:xse};case"bytes":return function(e){return mr(e)};case"string":return function(e){return nl(e)}}return null}function ax(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}function uy(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var Bg,Wo,Vh,Gw,s3;const Fs=class Fs{constructor(e){Z(this,Gw);K(this,"primaryType");Z(this,Bg);Z(this,Wo);Z(this,Vh);k(this,Wo,new Map),k(this,Vh,new Map);const r=new Map,n=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:u,type:l})=>{let{base:h,index:d}=uy(l);return h==="int"&&!e.int&&(h="int256"),h==="uint"&&!e.uint&&(h="uint256"),{name:u,type:h+(d||"")}}),r.set(c,new Set),n.set(c,[]),s.set(c,new Set)}),k(this,Bg,JSON.stringify(i));for(const c in i){const u=new Set;for(const l of i[c]){z(!u.has(l.name),`duplicate variable name ${JSON.stringify(l.name)} in ${JSON.stringify(c)}`,"types",e),u.add(l.name);const h=uy(l.type).base;z(h!==c,`circular type reference to ${JSON.stringify(h)}`,"types",e),!Dv(h)&&(z(n.has(h),`unknown type ${JSON.stringify(h)}`,"types",e),n.get(h).push(c),r.get(c).add(h))}}const o=Array.from(n.keys()).filter(c=>n.get(c).length===0);z(o.length!==0,"missing primary type","types",e),z(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),xe(this,{primaryType:o[0]});function a(c,u){z(!u.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),u.add(c);for(const l of r.get(c))if(n.has(l)){a(l,u);for(const h of u)s.get(h).add(l)}u.delete(c)}a(this.primaryType,new Set);for(const[c,u]of s){const l=Array.from(u);l.sort(),_(this,Wo).set(c,ax(c,i[c])+l.map(h=>ax(h,i[h])).join(""))}}get types(){return JSON.parse(_(this,Bg))}getEncoder(e){let r=_(this,Vh).get(e);return r||(r=oe(this,Gw,s3).call(this,e),_(this,Vh).set(e,r)),r}encodeType(e){const r=_(this,Wo).get(e);return z(r,`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return mr(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(Dv(e))return n(e,r);const s=uy(e).array;if(s)return z(s.count===-1||s.count===r.length,`array length mismatch; expected length ${s.count}`,"value",r),r.map(o=>this._visit(s.prefix,o,n));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,r[a],n),o),{});z(!1,`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new Fs(e)}static getPrimaryType(e){return Fs.from(e).primaryType}static hashStruct(e,r,n){return Fs.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){if(e[n]==null)continue;const s=ix[n];z(s,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:s})}return r.sort((n,s)=>kv.indexOf(n.name)-kv.indexOf(s.name)),Fs.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return lr(["0x1901",Fs.hashDomain(e),Fs.from(r).hash(n)])}static hash(e,r,n){return mr(Fs.encode(e,r,n))}static async resolveNames(e,r,n,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!Pt(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=Fs.from(r);o.visit(n,(a,c)=>(a==="address"&&!Pt(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:n}}static getPayload(e,r,n){Fs.hashDomain(e);const s={},i=[];kv.forEach(c=>{const u=e[c];u!=null&&(s[c]=Ose[c](u),i.push({name:c,type:ix[c]}))});const o=Fs.from(r);r=o.types;const a=Object.assign({},r);return z(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",r),a.EIP712Domain=i,o.encode(n),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(n,(c,u)=>{if(c.match(/^bytes(\d*)/))return Ae(nt(u));if(c.match(/^u?int/))return Se(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return z(typeof u=="string","invalid string","value",u),u}z(!1,"unsupported type","type",c)})}}};Bg=new WeakMap,Wo=new WeakMap,Vh=new WeakMap,Gw=new WeakSet,s3=function(e){{const s=Dv(e);if(s)return s}const r=uy(e).array;if(r){const s=r.prefix,i=this.getEncoder(s);return o=>{z(r.count===-1||r.count===o.length,`array length mismatch; expected length ${r.count}`,"value",o);let a=o.map(i);return _(this,Wo).has(s)&&(a=a.map(mr)),mr(lr(a))}}const n=this.types[e];if(n){const s=nl(_(this,Wo).get(e));return i=>{const o=n.map(({name:a,type:c})=>{const u=this.getEncoder(c)(i[a]);return _(this,Wo).has(c)?mr(u):u});return o.unshift(s),lr(o)}}z(!1,`unknown type: ${e}`,"type",e)};let xw=Fs;function Tn(t){const e=new Set;return t.forEach(r=>e.add(r)),Object.freeze(e)}const Rse="external public payable override",Pse=Tn(Rse.split(" ")),i3="constant external internal payable private public pure view override",kse=Tn(i3.split(" ")),o3="constructor error event fallback function receive struct",a3=Tn(o3.split(" ")),c3="calldata memory storage payable indexed",Dse=Tn(c3.split(" ")),Use="tuple returns",Bse=[o3,c3,Use,i3].join(" "),$se=Tn(Bse.split(" ")),Lse={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Mse=new RegExp("^(\\s*)"),Fse=new RegExp("^([0-9]+)"),jse=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),u3=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),l3=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var zr,pi,$g,R_;const Kw=class Kw{constructor(e){Z(this,$g);Z(this,zr);Z(this,pi);k(this,zr,0),k(this,pi,e.slice())}get offset(){return _(this,zr)}get length(){return _(this,pi).length-_(this,zr)}clone(){return new Kw(_(this,pi))}reset(){k(this,zr,0)}popKeyword(e){const r=this.peek();if(r.type!=="KEYWORD"||!e.has(r.text))throw new Error(`expected keyword ${r.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const r=this.peek();throw new Error(`expected ${e}; got ${r.type} ${JSON.stringify(r.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const r=oe(this,$g,R_).call(this,_(this,zr)+1,e.match+1);return k(this,zr,e.match+1),r}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const r=[];for(;_(this,zr)<e.match-1;){const n=this.peek().linkNext;r.push(oe(this,$g,R_).call(this,_(this,zr)+1,n)),k(this,zr,n)}return k(this,zr,e.match+1),r}peek(){if(_(this,zr)>=_(this,pi).length)throw new Error("out-of-bounds");return _(this,pi)[_(this,zr)]}peekKeyword(e){const r=this.peekType("KEYWORD");return r!=null&&e.has(r)?r:null}peekType(e){if(this.length===0)return null;const r=this.peek();return r.type===e?r.text:null}pop(){const e=this.peek();return hf(this,zr)._++,e}toString(){const e=[];for(let r=_(this,zr);r<_(this,pi).length;r++){const n=_(this,pi)[r];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}};zr=new WeakMap,pi=new WeakMap,$g=new WeakSet,R_=function(e=0,r=0){return new Kw(_(this,pi).slice(e,r).map(n=>Object.freeze(Object.assign({},n,{match:n.match-e,linkBack:n.linkBack-e,linkNext:n.linkNext-e}))))};let Ti=Kw;function xc(t){const e=[],r=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let n=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(Mse);a&&(i+=a[1].length,o=t.substring(i));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let u=Lse[o[0]]||"";if(u){if(c.type=u,c.text=o[0],i++,u==="OPEN_PAREN")n.push(e.length-1),s.push(e.length-1);else if(u=="CLOSE_PAREN")n.length===0&&r("no matching open bracket"),c.match=n.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(u==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(u==="OPEN_BRACKET")c.type="BRACKET";else if(u==="CLOSE_BRACKET"){let l=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const h=e.pop().text;l=h+l,e[e.length-1].value=He(h)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=l}continue}if(a=o.match(jse),a){if(c.text=a[1],i+=c.text.length,$se.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(l3)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(Fse),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Ti(e.map(o=>Object.freeze(o)))}function cx(t,e){let r=[];for(const n in e.keys())t.has(n)&&r.push(n);if(r.length>1)throw new Error(`conflicting types: ${r.join(", ")}`)}function $0(t,e){if(e.peekKeyword(a3)){const r=e.pop().text;if(r!==t)throw new Error(`expected ${t}, got ${r}`)}return e.popType("ID")}function fa(t,e){const r=new Set;for(;;){const n=t.peekType("KEYWORD");if(n==null||e&&!e.has(n))break;if(t.pop(),r.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);r.add(n)}return Object.freeze(r)}function h3(t){let e=fa(t,kse);return cx(e,Tn("constant payable nonpayable".split(" "))),cx(e,Tn("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function aa(t,e){return t.popParams().map(r=>Jr.from(r,e))}function d3(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Se(t.pop().text);throw new Error("invalid gas")}return null}function sl(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const zse=new RegExp(/^(.*)\[([0-9]*)\]$/);function ux(t){const e=t.match(l3);if(z(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const r=parseInt(e[2]);z(r!==0&&r<=32,"invalid bytes length","type",t)}else if(e[3]){const r=parseInt(e[3]);z(r!==0&&r<=256&&r%8===0,"invalid numeric width","type",t)}return t}const Yt={},Qn=Symbol.for("_ethers_internal"),lx="_ParamTypeInternal",hx="_ErrorInternal",dx="_EventInternal",fx="_ConstructorInternal",px="_FallbackInternal",gx="_FunctionInternal",mx="_StructInternal";var Gh,By;const js=class js{constructor(e,r,n,s,i,o,a,c){Z(this,Gh);K(this,"name");K(this,"type");K(this,"baseType");K(this,"indexed");K(this,"components");K(this,"arrayLength");K(this,"arrayChildren");if(gm(e,Yt,"ParamType"),Object.defineProperty(this,Qn,{value:lx}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");xe(this,{name:r,type:n,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const n=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=n,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let r="";return this.isArray()?(r+=this.arrayChildren.format(e),r+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?r+="("+this.components.map(n=>n.format(e)).join(e==="full"?", ":",")+")":r+=this.type,e!=="sighash"&&(this.indexed===!0&&(r+=" indexed"),e==="full"&&this.name&&(r+=" "+this.name)),r}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,r){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map(s=>n.arrayChildren.walk(s,r))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map((s,i)=>n.components[i].walk(s,r))}return r(this.type,e)}async walkAsync(e,r){const n=[],s=[e];return oe(this,Gh,By).call(this,n,e,r,i=>{s[0]=i}),n.length&&await Promise.all(n),s[0]}static from(e,r){if(js.isParamType(e))return e;if(typeof e=="string")try{return js.from(xc(e),r)}catch{z(!1,"invalid param type","obj",e)}else if(e instanceof Ti){let a="",c="",u=null;fa(e,Tn(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",u=e.popParams().map(g=>js.from(g)),a=`tuple(${u.map(g=>g.format()).join(",")})`):(a=ux(e.popType("TYPE")),c=a);let l=null,h=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();l=new js(Yt,"",a,c,null,u,h,l),h=g.value,a+=g.text,c="array",u=null}let d=null;if(fa(e,Dse).has("indexed")){if(!r)throw new Error("");d=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new js(Yt,p,a,c,d,u,h,l)}const n=e.name;z(!n||typeof n=="string"&&n.match(u3),"invalid name","obj.name",n);let s=e.indexed;s!=null&&(z(r,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(zse);if(o){const a=parseInt(o[2]||"-1"),c=js.from({type:o[1],components:e.components});return new js(Yt,n||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(u=>js.from(u)):null;return new js(Yt,n||"",i,"tuple",s,a,null,null)}return i=ux(e.type),new js(Yt,n||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[Qn]===lx}};Gh=new WeakSet,By=function(e,r,n,s){if(this.isArray()){if(!Array.isArray(r))throw new Error("invalid array value");if(this.arrayLength!==-1&&r.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=r.slice();a.forEach((c,u)=>{var l;oe(l=o,Gh,By).call(l,e,c,n,h=>{a[u]=h})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(r))a=r.slice();else{if(r==null||typeof r!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in r))throw new Error(`missing value for component ${c.name}`);return r[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,u)=>{var l;oe(l=o[u],Gh,By).call(l,e,c,n,h=>{a[u]=h})}),s(a);return}const i=n(this.type,r);i.then?e.push(async function(){s(await i)}()):s(i)};let Jr=js;class il{constructor(e,r,n){K(this,"type");K(this,"inputs");gm(e,Yt,"Fragment"),n=Object.freeze(n.slice()),xe(this,{type:r,inputs:n})}static from(e){if(typeof e=="string"){try{il.from(JSON.parse(e))}catch{}return il.from(xc(e))}if(e instanceof Ti)switch(e.peekKeyword(a3)){case"constructor":return ra.from(e);case"error":return Vn.from(e);case"event":return ro.from(e);case"fallback":case"receive":return Lo.from(e);case"function":return no.from(e);case"struct":return ju.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return ra.from(e);case"error":return Vn.from(e);case"event":return ro.from(e);case"fallback":case"receive":return Lo.from(e);case"function":return no.from(e);case"struct":return ju.from(e)}ne(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}z(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return ra.isFragment(e)}static isError(e){return Vn.isFragment(e)}static isEvent(e){return ro.isFragment(e)}static isFunction(e){return no.isFragment(e)}static isStruct(e){return ju.isFragment(e)}}class L0 extends il{constructor(r,n,s,i){super(r,n,i);K(this,"name");z(typeof s=="string"&&s.match(u3),"invalid identifier","name",s),i=Object.freeze(i.slice()),xe(this,{name:s})}}function Eg(t,e){return"("+e.map(r=>r.format(t)).join(t==="full"?", ":",")+")"}class Vn extends L0{constructor(e,r,n){super(e,"error",r,n),Object.defineProperty(this,Qn,{value:hx})}get selector(){return nl(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const r=[];return e!=="sighash"&&r.push("error"),r.push(this.name+Eg(e,this.inputs)),r.join(" ")}static from(e){if(Vn.isFragment(e))return e;if(typeof e=="string")return Vn.from(xc(e));if(e instanceof Ti){const r=$0("error",e),n=aa(e);return sl(e),new Vn(Yt,r,n)}return new Vn(Yt,e.name,e.inputs?e.inputs.map(Jr.from):[])}static isFragment(e){return e&&e[Qn]===hx}}class ro extends L0{constructor(r,n,s,i){super(r,"event",n,s);K(this,"anonymous");Object.defineProperty(this,Qn,{value:dx}),xe(this,{anonymous:i})}get topicHash(){return nl(this.format("sighash"))}format(r){if(r==null&&(r="sighash"),r==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(r)))});const n=[];return r!=="sighash"&&n.push("event"),n.push(this.name+Eg(r,this.inputs)),r!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(r,n){return n=(n||[]).map(i=>Jr.from(i)),new ro(Yt,r,n,!1).topicHash}static from(r){if(ro.isFragment(r))return r;if(typeof r=="string")try{return ro.from(xc(r))}catch{z(!1,"invalid event fragment","obj",r)}else if(r instanceof Ti){const n=$0("event",r),s=aa(r,!0),i=!!fa(r,Tn(["anonymous"])).has("anonymous");return sl(r),new ro(Yt,n,s,i)}return new ro(Yt,r.name,r.inputs?r.inputs.map(n=>Jr.from(n,!0)):[],!!r.anonymous)}static isFragment(r){return r&&r[Qn]===dx}}class ra extends il{constructor(r,n,s,i,o){super(r,n,s);K(this,"payable");K(this,"gas");Object.defineProperty(this,Qn,{value:fx}),xe(this,{payable:i,gas:o})}format(r){if(ne(r!=null&&r!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),r==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(r)))});const n=[`constructor${Eg(r,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(r){if(ra.isFragment(r))return r;if(typeof r=="string")try{return ra.from(xc(r))}catch{z(!1,"invalid constuctor fragment","obj",r)}else if(r instanceof Ti){fa(r,Tn(["constructor"]));const n=aa(r),s=!!fa(r,Pse).has("payable"),i=d3(r);return sl(r),new ra(Yt,"constructor",n,s,i)}return new ra(Yt,"constructor",r.inputs?r.inputs.map(Jr.from):[],!!r.payable,r.gas!=null?r.gas:null)}static isFragment(r){return r&&r[Qn]===fx}}class Lo extends il{constructor(r,n,s){super(r,"fallback",n);K(this,"payable");Object.defineProperty(this,Qn,{value:px}),xe(this,{payable:s})}format(r){const n=this.inputs.length===0?"receive":"fallback";if(r==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:s})}return`${n}()${this.payable?" payable":""}`}static from(r){if(Lo.isFragment(r))return r;if(typeof r=="string")try{return Lo.from(xc(r))}catch{z(!1,"invalid fallback fragment","obj",r)}else if(r instanceof Ti){const n=r.toString(),s=r.peekKeyword(Tn(["fallback","receive"]));if(z(s,"type must be fallback or receive","obj",n),r.popKeyword(Tn(["fallback","receive"]))==="receive"){const c=aa(r);return z(c.length===0,"receive cannot have arguments","obj.inputs",c),fa(r,Tn(["payable"])),sl(r),new Lo(Yt,[],!0)}let o=aa(r);o.length?z(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[Jr.from("bytes")];const a=h3(r);if(z(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),fa(r,Tn(["returns"])).has("returns")){const c=aa(r);z(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(u=>u.format("minimal")).join(", "))}return sl(r),new Lo(Yt,o,a==="payable")}if(r.type==="receive")return new Lo(Yt,[],!0);if(r.type==="fallback"){const n=[Jr.from("bytes")],s=r.stateMutability==="payable";return new Lo(Yt,n,s)}z(!1,"invalid fallback description","obj",r)}static isFragment(r){return r&&r[Qn]===px}}class no extends L0{constructor(r,n,s,i,o,a){super(r,"function",n,i);K(this,"constant");K(this,"outputs");K(this,"stateMutability");K(this,"payable");K(this,"gas");Object.defineProperty(this,Qn,{value:gx}),o=Object.freeze(o.slice()),xe(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return nl(this.format("sighash")).substring(0,10)}format(r){if(r==null&&(r="sighash"),r==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(r))),outputs:this.outputs.map(s=>JSON.parse(s.format(r)))});const n=[];return r!=="sighash"&&n.push("function"),n.push(this.name+Eg(r,this.inputs)),r!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(Eg(r,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(r,n){return n=(n||[]).map(i=>Jr.from(i)),new no(Yt,r,"view",n,[],null).selector}static from(r){if(no.isFragment(r))return r;if(typeof r=="string")try{return no.from(xc(r))}catch{z(!1,"invalid function fragment","obj",r)}else if(r instanceof Ti){const s=$0("function",r),i=aa(r),o=h3(r);let a=[];fa(r,Tn(["returns"])).has("returns")&&(a=aa(r));const c=d3(r);return sl(r),new no(Yt,s,o,i,a,c)}let n=r.stateMutability;return n==null&&(n="payable",typeof r.constant=="boolean"?(n="view",r.constant||(n="payable",typeof r.payable=="boolean"&&!r.payable&&(n="nonpayable"))):typeof r.payable=="boolean"&&!r.payable&&(n="nonpayable")),new no(Yt,r.name,n,r.inputs?r.inputs.map(Jr.from):[],r.outputs?r.outputs.map(Jr.from):[],r.gas!=null?r.gas:null)}static isFragment(r){return r&&r[Qn]===gx}}class ju extends L0{constructor(e,r,n){super(e,"struct",r,n),Object.defineProperty(this,Qn,{value:mx})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return ju.from(xc(e))}catch{z(!1,"invalid struct fragment","obj",e)}else if(e instanceof Ti){const r=$0("struct",e),n=aa(e);return sl(e),new ju(Yt,r,n)}return new ju(Yt,e.name,e.inputs?e.inputs.map(Jr.from):[])}static isFragment(e){return e&&e[Qn]===mx}}const xi=new Map;xi.set(0,"GENERIC_PANIC");xi.set(1,"ASSERT_FALSE");xi.set(17,"OVERFLOW");xi.set(18,"DIVIDE_BY_ZERO");xi.set(33,"ENUM_RANGE_ERROR");xi.set(34,"BAD_STORAGE_DATA");xi.set(49,"STACK_UNDERFLOW");xi.set(50,"ARRAY_RANGE_ERROR");xi.set(65,"OUT_OF_MEMORY");xi.set(81,"UNINITIALIZED_FUNCTION_CALL");const Hse=new RegExp(/^bytes([0-9]*)$/),qse=new RegExp(/^(u?int)([0-9]*)$/);let Uv=null,yx=1024;function Wse(t,e,r,n){let s="missing revert data",i=null;const o=null;let a=null;if(r){s="execution reverted";const u=nt(r);if(r=Ae(r),u.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(u.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Ae(u.slice(0,4))==="0x08c379a0")try{i=n.decode(["string"],u.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Ae(u.slice(0,4))==="0x4e487b71")try{const l=Number(n.decode(["uint256"],u.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[l]},i=`Panic due to ${xi.get(l)||"UNKNOWN"}(${l})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?vt(e.to):null,data:e.data||"0x"};return e.from&&(c.from=vt(e.from)),Wt(s,"CALL_EXCEPTION",{action:t,data:r,reason:i,transaction:c,invocation:o,revert:a})}var qa,rh;const Jw=class Jw{constructor(){Z(this,qa)}getDefaultValue(e){const r=e.map(s=>oe(this,qa,rh).call(this,Jr.from(s)));return new cy(r,"_").defaultValue()}encode(e,r){Fk(r.length,e.length,"types/values length mismatch");const n=e.map(o=>oe(this,qa,rh).call(this,Jr.from(o))),s=new cy(n,"_"),i=new y_;return s.encode(i,r),i.data}decode(e,r,n){const s=e.map(o=>oe(this,qa,rh).call(this,Jr.from(o)));return new cy(s,"_").decode(new w_(r,n,yx))}static _setDefaultMaxInflation(e){z(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),yx=e}static defaultAbiCoder(){return Uv==null&&(Uv=new Jw),Uv}static getBuiltinCallException(e,r,n){return Wse(e,r,n,Jw.defaultAbiCoder())}};qa=new WeakSet,rh=function(e){if(e.isArray())return new pne(oe(this,qa,rh).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new cy(e.components.map(n=>oe(this,qa,rh).call(this,n)),e.name);switch(e.baseType){case"address":return new dne(e.name);case"bool":return new gne(e.name);case"string":return new Cne(e.name);case"bytes":return new mne(e.name);case"":return new bne(e.name)}let r=e.type.match(qse);if(r){let n=parseInt(r[2]||"256");return z(n!==0&&n<=256&&n%8===0,"invalid "+r[1]+" bit length","param",e),new Ane(n/8,r[1]==="int",e.name)}if(r=e.type.match(Hse),r){let n=parseInt(r[1]);return z(n!==0&&n<=32,"invalid bytes length","param",e),new yne(n,e.name)}z(!1,"invalid type","type",e.type)};let _g=Jw;class Vse{constructor(e,r,n){K(this,"fragment");K(this,"name");K(this,"signature");K(this,"topic");K(this,"args");const s=e.name,i=e.format();xe(this,{fragment:e,name:s,signature:i,topic:r,args:n})}}class Gse{constructor(e,r,n,s){K(this,"fragment");K(this,"name");K(this,"args");K(this,"signature");K(this,"selector");K(this,"value");const i=e.name,o=e.format();xe(this,{fragment:e,name:i,args:n,signature:o,selector:r,value:s})}}class Kse{constructor(e,r,n){K(this,"fragment");K(this,"name");K(this,"args");K(this,"signature");K(this,"selector");const s=e.name,i=e.format();xe(this,{fragment:e,name:s,args:n,signature:i,selector:r})}}class wx{constructor(e){K(this,"hash");K(this,"_isIndexed");xe(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const bx={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},vx={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&bx[t.toString()]&&(e=bx[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var Vi,Gi,Ki,tn,ho,$y,Ly;const eu=class eu{constructor(e){Z(this,ho);K(this,"fragments");K(this,"deploy");K(this,"fallback");K(this,"receive");Z(this,Vi);Z(this,Gi);Z(this,Ki);Z(this,tn);let r=[];typeof e=="string"?r=JSON.parse(e):r=e,k(this,Ki,new Map),k(this,Vi,new Map),k(this,Gi,new Map);const n=[];for(const o of r)try{n.push(il.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}xe(this,{fragments:Object.freeze(n)});let s=null,i=!1;k(this,tn,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}xe(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(z(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=_(this,Ki);break;case"event":c=_(this,Gi);break;case"error":c=_(this,Vi);break;default:return}const u=o.format();c.has(u)||c.set(u,o)}),this.deploy||xe(this,{deploy:ra.from("constructor()")}),xe(this,{fallback:s,receive:i})}format(e){const r=e?"minimal":"full";return this.fragments.map(s=>s.format(r))}formatJson(){const e=this.fragments.map(r=>r.format("json"));return JSON.stringify(e.map(r=>JSON.parse(r)))}getAbiCoder(){return _g.defaultAbiCoder()}getFunctionName(e){const r=oe(this,ho,$y).call(this,e,null,!1);return z(r,"no matching function","key",e),r.name}hasFunction(e){return!!oe(this,ho,$y).call(this,e,null,!1)}getFunction(e,r){return oe(this,ho,$y).call(this,e,r||null,!0)}forEachFunction(e){const r=Array.from(_(this,Ki).keys());r.sort((n,s)=>n.localeCompare(s));for(let n=0;n<r.length;n++){const s=r[n];e(_(this,Ki).get(s),n)}}getEventName(e){const r=oe(this,ho,Ly).call(this,e,null,!1);return z(r,"no matching event","key",e),r.name}hasEvent(e){return!!oe(this,ho,Ly).call(this,e,null,!1)}getEvent(e,r){return oe(this,ho,Ly).call(this,e,r||null,!0)}forEachEvent(e){const r=Array.from(_(this,Gi).keys());r.sort((n,s)=>n.localeCompare(s));for(let n=0;n<r.length;n++){const s=r[n];e(_(this,Gi).get(s),n)}}getError(e,r){if(Pt(e)){const s=e.toLowerCase();if(vx[s])return Vn.from(vx[s].signature);for(const i of _(this,Vi).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of _(this,Vi))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?Vn.from("error Error(string)"):e==="Panic"?Vn.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");z(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=Vn.from(e).format(),e==="Error(string)")return Vn.from("error Error(string)");if(e==="Panic(uint256)")return Vn.from("error Panic(uint256)");const n=_(this,Vi).get(e);return n||null}forEachError(e){const r=Array.from(_(this,Vi).keys());r.sort((n,s)=>n.localeCompare(s));for(let n=0;n<r.length;n++){const s=r[n];e(_(this,Vi).get(s),n)}}_decodeParams(e,r){return _(this,tn).decode(e,r)}_encodeParams(e,r){return _(this,tn).encode(e,r)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,r){if(typeof e=="string"){const n=this.getError(e);z(n,"unknown error","fragment",e),e=n}return z(rr(r,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",r),this._decodeParams(e.inputs,rr(r,4))}encodeErrorResult(e,r){if(typeof e=="string"){const n=this.getError(e);z(n,"unknown error","fragment",e),e=n}return lr([e.selector,this._encodeParams(e.inputs,r||[])])}decodeFunctionData(e,r){if(typeof e=="string"){const n=this.getFunction(e);z(n,"unknown function","fragment",e),e=n}return z(rr(r,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",r),this._decodeParams(e.inputs,rr(r,4))}encodeFunctionData(e,r){if(typeof e=="string"){const n=this.getFunction(e);z(n,"unknown function","fragment",e),e=n}return lr([e.selector,this._encodeParams(e.inputs,r||[])])}decodeFunctionResult(e,r){if(typeof e=="string"){const i=this.getFunction(e);z(i,"unknown function","fragment",e),e=i}let n="invalid length for result data";const s=_n(r);if(s.length%32===0)try{return _(this,tn).decode(e.outputs,s)}catch{n="could not decode result data"}ne(!1,n,"BAD_DATA",{value:Ae(s),info:{method:e.name,signature:e.format()}})}makeError(e,r){const n=nt(e,"data"),s=_g.getBuiltinCallException("call",r,n);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=Ae(n.slice(0,4)),c=this.getError(a);if(c)try{const u=_(this,tn).decode(c.inputs,n.slice(4));s.revert={name:c.name,signature:c.format(),args:u},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(r);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,r){if(typeof e=="string"){const n=this.getFunction(e);z(n,"unknown function","fragment",e),e=n}return Ae(_(this,tn).encode(e.outputs,r||[]))}encodeFilterTopics(e,r){if(typeof e=="string"){const i=this.getEvent(e);z(i,"unknown event","eventFragment",e),e=i}ne(r.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:r.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const s=(i,o)=>i.type==="string"?nl(o):i.type==="bytes"?mr(Ae(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=Ec(o):i.type.match(/^bytes/)?o=mte(o,32):i.type==="address"&&_(this,tn).encode(["address"],[o]),tl(Ae(o),32));for(r.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){z(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?z(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?n.push(i.map(c=>s(a,c))):n.push(s(a,i))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,r){if(typeof e=="string"){const o=this.getEvent(e);z(o,"unknown event","eventFragment",e),e=o}const n=[],s=[],i=[];return e.anonymous||n.push(e.topicHash),z(r.length===e.inputs.length,"event arguments/values mismatch","values",r),e.inputs.forEach((o,a)=>{const c=r[a];if(o.indexed)if(o.type==="string")n.push(nl(c));else if(o.type==="bytes")n.push(mr(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(_(this,tn).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:_(this,tn).encode(s,i),topics:n}}decodeEventLog(e,r,n){if(typeof e=="string"){const f=this.getEvent(e);z(f,"unknown event","eventFragment",e),e=f}if(n!=null&&!e.anonymous){const f=e.topicHash;z(Pt(n[0],32)&&n[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(Jr.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=n!=null?_(this,tn).decode(s,lr(n)):null,c=_(this,tn).decode(i,r,!0),u=[],l=[];let h=0,d=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new wx(null);else if(o[p])g=new wx(a[d++]);else try{g=a[d++]}catch(m){g=m}else try{g=c[h++]}catch(m){g=m}u.push(g),l.push(f.name||null)}),Sd.fromItems(u,l)}parseTransaction(e){const r=nt(e.data,"tx.data"),n=Se(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Ae(r.slice(0,4)));if(!s)return null;const i=_(this,tn).decode(s.inputs,r.slice(4));return new Gse(s,s.selector,i,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const r=this.getEvent(e.topics[0]);return!r||r.anonymous?null:new Vse(r,r.topicHash,this.decodeEventLog(r,e.data,e.topics))}parseError(e){const r=Ae(e),n=this.getError(rr(r,0,4));if(!n)return null;const s=_(this,tn).decode(n.inputs,rr(r,4));return new Kse(n,n.selector,s)}static from(e){return e instanceof eu?e:typeof e=="string"?new eu(JSON.parse(e)):typeof e.formatJson=="function"?new eu(e.formatJson()):typeof e.format=="function"?new eu(e.format("json")):new eu(e)}};Vi=new WeakMap,Gi=new WeakMap,Ki=new WeakMap,tn=new WeakMap,ho=new WeakSet,$y=function(e,r,n){if(Pt(e)){const i=e.toLowerCase();for(const o of _(this,Ki).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,Ki))o.split("(")[0]===e&&i.push(a);if(r){const o=r.length>0?r[r.length-1]:null;let a=r.length,c=!0;un.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let u=i.length-1;u>=0;u--){const l=i[u].inputs.length;l!==a&&(!c||l!==a-1)&&i.splice(u,1)}for(let u=i.length-1;u>=0;u--){const l=i[u].inputs;for(let h=0;h<r.length;h++)if(un.isTyped(r[h])){if(h>=l.length){if(r[h].type==="overrides")continue;i.splice(u,1);break}if(r[h].type!==l[h].baseType){i.splice(u,1);break}}}}if(i.length===1&&r&&r.length!==i[0].inputs.length){const o=r[r.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");z(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,Ki).get(no.from(e).format());return s||null},Ly=function(e,r,n){if(Pt(e)){const i=e.toLowerCase();for(const o of _(this,Gi).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,Gi))o.split("(")[0]===e&&i.push(a);if(r){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<r.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<r.length;c++)if(un.isTyped(r[c])&&r[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");z(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,Gi).get(ro.from(e).format());return s||null};let P_=eu;const f3=BigInt(0);function bh(t){return t??null}function sr(t){return t==null?null:t.toString()}class Ex{constructor(e,r,n){K(this,"gasPrice");K(this,"maxFeePerGas");K(this,"maxPriorityFeePerGas");xe(this,{gasPrice:bh(e),maxFeePerGas:bh(r),maxPriorityFeePerGas:bh(n)})}toJSON(){const{gasPrice:e,maxFeePerGas:r,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:sr(e),maxFeePerGas:sr(r),maxPriorityFeePerGas:sr(n)}}}function Ow(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Ae(t.data));const r="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=Se(t[s],`request.${s}`));const n="type,nonce".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=He(t[s],`request.${s}`));return t.accessList&&(e.accessList=vl(t.accessList)),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>h1(s)?Ae(s):Object.assign({},s))),e}var Vo;class Jse{constructor(e,r){K(this,"provider");K(this,"number");K(this,"hash");K(this,"timestamp");K(this,"parentHash");K(this,"parentBeaconBlockRoot");K(this,"nonce");K(this,"difficulty");K(this,"gasLimit");K(this,"gasUsed");K(this,"stateRoot");K(this,"receiptsRoot");K(this,"blobGasUsed");K(this,"excessBlobGas");K(this,"miner");K(this,"prevRandao");K(this,"extraData");K(this,"baseFeePerGas");Z(this,Vo);k(this,Vo,e.transactions.map(n=>typeof n!="string"?new Ag(n,r):n)),xe(this,{provider:r,hash:bh(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:bh(e.prevRandao),extraData:e.extraData,baseFeePerGas:bh(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return _(this,Vo).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=_(this,Vo).slice();return e.length===0?[]:(ne(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:r,extraData:n,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:u,number:l,parentHash:h,parentBeaconBlockRoot:d,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:m}=this;return{_type:"Block",baseFeePerGas:sr(e),difficulty:sr(r),extraData:n,gasLimit:sr(s),gasUsed:sr(i),blobGasUsed:sr(this.blobGasUsed),excessBlobGas:sr(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:u,number:l,parentHash:h,timestamp:g,parentBeaconBlockRoot:d,stateRoot:f,receiptsRoot:p,transactions:m}}[Symbol.iterator](){let e=0;const r=this.transactions;return{next:()=>e<this.length?{value:r[e++],done:!1}:{value:void 0,done:!0}}}get length(){return _(this,Vo).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let r;if(typeof e=="number")r=_(this,Vo)[e];else{const n=e.toLowerCase();for(const s of _(this,Vo))if(typeof s=="string"){if(s!==n)continue;r=s;break}else{if(s.hash!==n)continue;r=s;break}}if(r==null)throw new Error("no such tx");return typeof r=="string"?await this.provider.getTransaction(r):r}getPrefetchedTransaction(e){const r=this.prefetchedTransactions;if(typeof e=="number")return r[e];e=e.toLowerCase();for(const n of r)if(n.hash===e)return n;z(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return Yse(this)}}Vo=new WeakMap;class wm{constructor(e,r){K(this,"provider");K(this,"transactionHash");K(this,"blockHash");K(this,"blockNumber");K(this,"removed");K(this,"address");K(this,"data");K(this,"topics");K(this,"index");K(this,"transactionIndex");this.provider=r;const n=Object.freeze(e.topics.slice());xe(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:r,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:u}=this;return{_type:"log",address:e,blockHash:r,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:u}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ne(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ne(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ne(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return Qse(this)}}var Lg;class p3{constructor(e,r){K(this,"provider");K(this,"to");K(this,"from");K(this,"contractAddress");K(this,"hash");K(this,"index");K(this,"blockHash");K(this,"blockNumber");K(this,"logsBloom");K(this,"gasUsed");K(this,"blobGasUsed");K(this,"cumulativeGasUsed");K(this,"gasPrice");K(this,"blobGasPrice");K(this,"type");K(this,"status");K(this,"root");Z(this,Lg);k(this,Lg,Object.freeze(e.logs.map(s=>new wm(s,r))));let n=f3;e.effectiveGasPrice!=null?n=e.effectiveGasPrice:e.gasPrice!=null&&(n=e.gasPrice),xe(this,{provider:r,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:n,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return _(this,Lg)}toJSON(){const{to:e,from:r,contractAddress:n,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:u,status:l,root:h}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:n,cumulativeGasUsed:sr(this.cumulativeGasUsed),from:r,gasPrice:sr(this.gasPrice),blobGasUsed:sr(this.blobGasUsed),blobGasPrice:sr(this.blobGasPrice),gasUsed:sr(this.gasUsed),hash:s,index:i,logs:u,logsBloom:c,root:h,status:l,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return m3(this)}reorderedEvent(e){return ne(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),g3(this,e)}}Lg=new WeakMap;var Wa;const BC=class BC{constructor(e,r){K(this,"provider");K(this,"blockNumber");K(this,"blockHash");K(this,"index");K(this,"hash");K(this,"type");K(this,"to");K(this,"from");K(this,"nonce");K(this,"gasLimit");K(this,"gasPrice");K(this,"maxPriorityFeePerGas");K(this,"maxFeePerGas");K(this,"maxFeePerBlobGas");K(this,"data");K(this,"value");K(this,"chainId");K(this,"signature");K(this,"accessList");K(this,"blobVersionedHashes");Z(this,Wa);this.provider=r,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,k(this,Wa,-1)}toJSON(){const{blockNumber:e,blockHash:r,index:n,hash:s,type:i,to:o,from:a,nonce:c,data:u,signature:l,accessList:h,blobVersionedHashes:d}=this;return{_type:"TransactionResponse",accessList:h,blockNumber:e,blockHash:r,blobVersionedHashes:d,chainId:sr(this.chainId),data:u,from:a,gasLimit:sr(this.gasLimit),gasPrice:sr(this.gasPrice),hash:s,maxFeePerGas:sr(this.maxFeePerGas),maxPriorityFeePerGas:sr(this.maxPriorityFeePerGas),maxFeePerBlobGas:sr(this.maxFeePerBlobGas),nonce:c,signature:l,to:o,index:n,type:i,value:sr(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const n=await this.getTransaction();n&&(e=n.blockNumber)}if(e==null)return null;const r=this.provider.getBlock(e);if(r==null)throw new Error("TODO");return r}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:r,blockNumber:n}=await vn({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return r==null||r.blockNumber==null?0:n-r.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,r){const n=e??1,s=r??0;let i=_(this,Wa),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:d,nonce:f}=await vn({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=d;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<_(this,Wa)&&(o=_(this,Wa)));o<=d;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const m of g)if(m===this.hash)return;for(let m=0;m<g.length;m++){const w=await g.getTransaction(m);if(w.from===this.from&&w.nonce===this.nonce){if(a)return null;const v=await this.provider.getTransactionReceipt(w.hash);if(v==null||d-v.blockNumber+1<n)return;let E="replaced";w.data===this.data&&w.to===this.to&&w.value===this.value?E="repriced":w.data==="0x"&&w.from===w.to&&w.value===f3&&(E="cancelled"),ne(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:E==="replaced"||E==="cancelled",reason:E,replacement:w.replaceableTransaction(i),hash:w.hash,receipt:v})}}o++}},u=d=>{if(d==null||d.status!==0)return d;ne(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:d.to,from:d.from,data:""},receipt:d})},l=await this.provider.getTransactionReceipt(this.hash);if(n===0)return u(l);if(l){if(await l.confirmations()>=n)return u(l)}else if(await c(),n===0)return null;return await new Promise((d,f)=>{const p=[],g=()=>{p.forEach(w=>w())};if(p.push(()=>{a=!0}),s>0){const w=setTimeout(()=>{g(),f(Wt("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(w)})}const m=async w=>{if(await w.confirmations()>=n){g();try{d(u(w))}catch(v){f(v)}}};if(p.push(()=>{this.provider.off(this.hash,m)}),this.provider.on(this.hash,m),i>=0){const w=async()=>{try{await c()}catch(v){if(Kr(v,"TRANSACTION_REPLACED")){g(),f(v);return}}a||this.provider.once("block",w)};p.push(()=>{this.provider.off("block",w)}),this.provider.once("block",w)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return ne(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),m3(this)}reorderedEvent(e){return ne(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ne(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),g3(this,e)}replaceableTransaction(e){z(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const r=new BC(this,this.provider);return k(r,Wa,e),r}};Wa=new WeakMap;let Ag=BC;function Yse(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function g3(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function m3(t){return{orphan:"drop-transaction",tx:t}}function Qse(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class x1 extends wm{constructor(r,n,s){super(r,r.provider);K(this,"interface");K(this,"fragment");K(this,"args");const i=n.decodeEventLog(s,r.data,r.topics);xe(this,{args:i,fragment:s,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class y3 extends wm{constructor(r,n){super(r,r.provider);K(this,"error");xe(this,{error:n})}}var Kh;class Zse extends p3{constructor(r,n,s){super(s,n);Z(this,Kh);k(this,Kh,r)}get logs(){return super.logs.map(r=>{const n=r.topics.length?_(this,Kh).getEvent(r.topics[0]):null;if(n)try{return new x1(r,_(this,Kh),n)}catch(s){return new y3(r,s)}return r})}}Kh=new WeakMap;var Mg;class O1 extends Ag{constructor(r,n,s){super(s,n);Z(this,Mg);k(this,Mg,r)}async wait(r,n){const s=await super.wait(r,n);return s==null?null:new Zse(_(this,Mg),this.provider,s)}}Mg=new WeakMap;class w3 extends qk{constructor(r,n,s,i){super(r,n,s);K(this,"log");xe(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Xse extends w3{constructor(e,r,n,s,i){super(e,r,n,new x1(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);xe(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const _x=BigInt(0);function b3(t){return t&&typeof t.call=="function"}function v3(t){return t&&typeof t.estimateGas=="function"}function M0(t){return t&&typeof t.resolveName=="function"}function E3(t){return t&&typeof t.sendTransaction=="function"}function _3(t){if(t!=null){if(M0(t))return t;if(t.provider)return t.provider}}var Fg;class eie{constructor(e,r,n){Z(this,Fg);K(this,"fragment");if(xe(this,{fragment:r}),r.inputs.length<n.length)throw new Error("too many arguments");const s=ol(e.runner,"resolveName"),i=M0(s)?s:null;k(this,Fg,async function(){const o=await Promise.all(r.inputs.map((a,c)=>n[c]==null?null:a.walkAsync(n[c],(l,h)=>l==="address"?Array.isArray(h)?Promise.all(h.map(d=>In(d,i))):In(h,i):h)));return e.interface.encodeFilterTopics(r,o)}())}getTopicFilter(){return _(this,Fg)}}Fg=new WeakMap;function ol(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function uu(t){return t==null?null:t.provider||null}async function A3(t,e){const r=un.dereference(t,"overrides");z(typeof r=="object","invalid overrides parameter","overrides",t);const n=Ow(r);return z(n.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),z(n.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function tie(t,e,r){const n=ol(t,"resolveName"),s=M0(n)?n:null;return await Promise.all(e.map((i,o)=>i.walkAsync(r[o],(a,c)=>(c=un.dereference(c,a),a==="address"?In(c,s):c))))}function rie(t){const e=async function(o){const a=await A3(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await In(a.from,_3(t.runner)));const c=t.interface,u=Se(a.value||_x,"overrides.value")===_x,l=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!l&&!u&&z(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),z(c.fallback||l,"cannot send data to receive-only contract","overrides.data",a.data);const h=c.receive||c.fallback&&c.fallback.payable;return z(h||u,"cannot send value to non-payable fallback","overrides.value",a.value),z(c.fallback||l,"cannot send data to receive-only contract","overrides.data",a.data),a},r=async function(o){const a=ol(t.runner,"call");ne(b3(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(u){throw l1(u)&&u.data?t.interface.makeError(u.data,c):u}},n=async function(o){const a=t.runner;ne(E3(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),u=uu(t.runner);return new O1(t.interface,u,c)},s=async function(o){const a=ol(t.runner,"estimateGas");return ne(v3(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await n(o);return xe(i,{_contract:t,estimateGas:s,populateTransaction:e,send:n,staticCall:r}),i}function nie(t,e){const r=function(...u){const l=t.interface.getFunction(e,u);return ne(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:u}}),l},n=async function(...u){const l=r(...u);let h={};if(l.inputs.length+1===u.length&&(h=await A3(u.pop()),h.from&&(h.from=await In(h.from,_3(t.runner)))),l.inputs.length!==u.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const d=await tie(t.runner,l.inputs,u);return Object.assign({},h,await vn({to:t.getAddress(),data:t.interface.encodeFunctionData(l,d)}))},s=async function(...u){const l=await a(...u);return l.length===1?l[0]:l},i=async function(...u){const l=t.runner;ne(E3(l),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const h=await l.sendTransaction(await n(...u)),d=uu(t.runner);return new O1(t.interface,d,h)},o=async function(...u){const l=ol(t.runner,"estimateGas");return ne(v3(l),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await l.estimateGas(await n(...u))},a=async function(...u){const l=ol(t.runner,"call");ne(b3(l),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const h=await n(...u);let d="0x";try{d=await l.call(h)}catch(p){throw l1(p)&&p.data?t.interface.makeError(p.data,h):p}const f=r(...u);return t.interface.decodeFunctionResult(f,d)},c=async(...u)=>r(...u).constant?await s(...u):await i(...u);return xe(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:r,estimateGas:o,populateTransaction:n,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const u=t.interface.getFunction(e);return ne(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),u}}),c}function sie(t,e){const r=function(...s){const i=t.interface.getEvent(e,s);return ne(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},n=function(...s){return new eie(t,r(...s),s)};return xe(n,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:r}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return ne(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),n}const Rw=Symbol.for("_ethersInternal_contract"),C3=new WeakMap;function iie(t,e){C3.set(t[Rw],e)}function cs(t){return C3.get(t[Rw])}function oie(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function R1(t,e){let r,n=null;if(Array.isArray(e)){const i=function(o){if(Pt(o,32))return o;const a=t.interface.getEvent(o);return z(a,"unknown fragment","name",o),a.topicHash};r=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?r=[null]:typeof e=="string"?Pt(e,32)?r=[e]:(n=t.interface.getEvent(e),z(n,"unknown fragment","event",e),r=[n.topicHash]):oie(e)?r=await e.getTopicFilter():"fragment"in e?(n=e.fragment,r=[n.topicHash]):z(!1,"unknown event name","event",e);r=r.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=r.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:n,tag:s,topics:r}}async function Vf(t,e){const{subs:r}=cs(t);return r.get((await R1(t,e)).tag)||null}async function Ax(t,e,r){const n=uu(t.runner);ne(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await R1(t,r),{addr:a,subs:c}=cs(t);let u=c.get(i);if(!u){const h={address:a||t,topics:o},d=m=>{let w=s;if(w==null)try{w=t.interface.getEvent(m.topics[0])}catch{}if(w){const v=w,E=s?t.interface.decodeEventLog(s,m.data,m.topics):[];D_(t,r,E,A=>new Xse(t,A,r,v,m))}else D_(t,r,[],v=>new w3(t,v,r,m))};let f=[];u={tag:i,listeners:[],start:()=>{f.length||f.push(n.on(h,d))},stop:async()=>{if(f.length==0)return;let m=f;f=[],await Promise.all(m),n.off(h,d)}},c.set(i,u)}return u}let k_=Promise.resolve();async function aie(t,e,r,n){await k_;const s=await Vf(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(r);n&&c.push(n(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),cs(t).subs.delete(s.tag)),i>0}async function D_(t,e,r,n){try{await k_}catch{}const s=aie(t,e,r,n);return k_=s,await s}const ly=["then"];var o2;o2=Rw;const Ep=class Ep{constructor(e,r,n,s){K(this,"target");K(this,"interface");K(this,"runner");K(this,"filters");K(this,o2);K(this,"fallback");z(typeof e=="string"||OD(e),"invalid value for Contract target","target",e),n==null&&(n=null);const i=P_.from(r);xe(this,{target:e,runner:n,interface:i}),Object.defineProperty(this,Rw,{value:{}});let o,a=null,c=null;if(s){const h=uu(n);c=new O1(this.interface,h,s)}let u=new Map;if(typeof e=="string")if(Pt(e))a=e,o=Promise.resolve(e);else{const h=ol(n,"resolveName");if(!M0(h))throw Wt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=h.resolveName(e).then(d=>{if(d==null)throw Wt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return cs(this).addr=d,d})}else o=e.getAddress().then(h=>{if(h==null)throw new Error("TODO");return cs(this).addr=h,h});iie(this,{addrPromise:o,addr:a,deployTx:c,subs:u});const l=new Proxy({},{get:(h,d,f)=>{if(typeof d=="symbol"||ly.indexOf(d)>=0)return Reflect.get(h,d,f);try{return this.getEvent(d)}catch(p){if(!Kr(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(h,d)=>ly.indexOf(d)>=0?Reflect.has(h,d):Reflect.has(h,d)||this.interface.hasEvent(String(d))});return xe(this,{filters:l}),xe(this,{fallback:i.receive||i.fallback?rie(this):null}),new Proxy(this,{get:(h,d,f)=>{if(typeof d=="symbol"||d in h||ly.indexOf(d)>=0)return Reflect.get(h,d,f);try{return h.getFunction(d)}catch(p){if(!Kr(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(h,d)=>typeof d=="symbol"||d in h||ly.indexOf(d)>=0?Reflect.has(h,d):h.interface.hasFunction(d)})}connect(e){return new Ep(this.target,this.interface,e)}attach(e){return new Ep(e,this.interface,this.runner)}async getAddress(){return await cs(this).addrPromise}async getDeployedCode(){const e=uu(this.runner);ne(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const r=await e.getCode(await this.getAddress());return r==="0x"?null:r}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=uu(this.runner);return ne(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);n.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return cs(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),nie(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),sie(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,r,n){r==null&&(r=0),n==null&&(n="latest");const{addr:s,addrPromise:i}=cs(this),o=s||await i,{fragment:a,topics:c}=await R1(this,e),u={address:o,topics:c,fromBlock:r,toBlock:n},l=uu(this.runner);return ne(l,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await l.getLogs(u)).map(h=>{let d=a;if(d==null)try{d=this.interface.getEvent(h.topics[0])}catch{}if(d)try{return new x1(h,this.interface,d)}catch(f){return new y3(h,f)}return new wm(h,l)})}async on(e,r){const n=await Ax(this,"on",e);return n.listeners.push({listener:r,once:!1}),n.start(),this}async once(e,r){const n=await Ax(this,"once",e);return n.listeners.push({listener:r,once:!0}),n.start(),this}async emit(e,...r){return await D_(this,e,r,null)}async listenerCount(e){if(e){const s=await Vf(this,e);return s?s.listeners.length:0}const{subs:r}=cs(this);let n=0;for(const{listeners:s}of r.values())n+=s.length;return n}async listeners(e){if(e){const s=await Vf(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:r}=cs(this);let n=[];for(const{listeners:s}of r.values())n=n.concat(s.map(({listener:i})=>i));return n}async off(e,r){const n=await Vf(this,e);if(!n)return this;if(r){const s=n.listeners.map(({listener:i})=>i).indexOf(r);s>=0&&n.listeners.splice(s,1)}return(r==null||n.listeners.length===0)&&(n.stop(),cs(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){const r=await Vf(this,e);if(!r)return this;r.stop(),cs(this).subs.delete(r.tag)}else{const{subs:r}=cs(this);for(const{tag:n,stop:s}of r.values())s(),r.delete(n)}return this}async addListener(e,r){return await this.on(e,r)}async removeListener(e,r){return await this.off(e,r)}static buildClass(e){class r extends Ep{constructor(s,i=null){super(s,e,i)}}return r}static from(e,r,n){return n==null&&(n=null),new this(e,r,n)}};let U_=Ep;function cie(){return U_}class gc extends cie(){}function Bv(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):z(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class uie{constructor(e){K(this,"name");xe(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,r){throw new Error("unsupported coin")}async decodeAddress(e,r){throw new Error("unsupported coin")}}const S3=new RegExp("^(ipfs)://(.*)$","i"),Cx=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),S3,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Va,Au,Ga,nh,Yw,I3;const lh=class lh{constructor(e,r,n){Z(this,Ga);K(this,"provider");K(this,"address");K(this,"name");Z(this,Va);Z(this,Au);xe(this,{provider:e,address:r,name:n}),k(this,Va,null),k(this,Au,new gc(r,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return _(this,Va)==null&&k(this,Va,(async()=>{try{return await _(this,Au).supportsInterface("0x9061b923")}catch(e){if(Kr(e,"CALL_EXCEPTION"))return!1;throw k(this,Va,null),e}})()),await _(this,Va)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await oe(this,Ga,nh).call(this,"addr(bytes32)");return i==null||i===gg?null:i}catch(i){if(Kr(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await oe(this,Ga,nh).call(this,"addr(bytes32,uint)",[i]);if(Pt(o,20))return vt(o)}let r=null;for(const i of this.provider.plugins)if(i instanceof uie&&i.supportsCoinType(e)){r=i;break}if(r==null)return null;const n=await oe(this,Ga,nh).call(this,"addr(bytes32,uint)",[e]);if(n==null||n==="0x")return null;const s=await r.decodeAddress(e,n);if(s!=null)return s;ne(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:n}})}async getText(e){const r=await oe(this,Ga,nh).call(this,"text(bytes32,string)",[e]);return r==null||r==="0x"?null:r}async getContentHash(){const e=await oe(this,Ga,nh).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const r=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const s=r[1]==="e3010170"?"ipfs":"ipns",i=parseInt(r[4],16);if(r[5].length===i*2)return`${s}://${wte("0x"+r[2])}`}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;ne(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const r=await this.getText("avatar");if(r==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:r});for(let n=0;n<Cx.length;n++){const s=r.match(Cx[n]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:r}),{linkage:e,url:r};case"ipfs":{const o=Bv(r);return e.push({type:"ipfs",value:r}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:r});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const u=c[1],l=new gc(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await l.ownerOf(u);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await l.balanceOf(a,u);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let h=await l[o](u);if(h==null||h==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:h}),i==="erc1155"&&(h=h.replace("{id}",Ec(u,32).substring(2)),e.push({type:"metadata-url-expanded",value:h})),h.match(/^ipfs:/i)&&(h=Bv(h)),e.push({type:"metadata-url",value:h});let d={};const f=await new mo(h).send();f.assertOk();try{d=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const w=f.body;return w&&e.push({type:"!metadata",value:Ae(w)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!d)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(d)});let p=d.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(S3)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=Bv(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const r=await e.getNetwork(),n=r.getPlugin("org.ethers.plugins.network.Ens");return ne(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:r}}),n.address}static async fromName(e,r){var s;let n=r;for(;;){if(n===""||n==="."||r!=="eth"&&n==="eth")return null;const i=await oe(s=lh,Yw,I3).call(s,e,n);if(i!=null){const o=new lh(e,i,r);return n!==r&&!await o.supportsWildcard()?null:o}n=n.split(".").slice(1).join(".")}}};Va=new WeakMap,Au=new WeakMap,Ga=new WeakSet,nh=async function(e,r){r=(r||[]).slice();const n=_(this,Au).interface;r.unshift(O_(this.name));let s=null;await this.supportsWildcard()&&(s=n.getFunction(e),ne(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),r=[cse(this.name,255),n.encodeFunctionData(s,r)],e="resolve(bytes,bytes)"),r.push({enableCcipRead:!0});try{const i=await _(this,Au)[e](...r);return s?n.decodeFunctionResult(s,i)[0]:i}catch(i){if(!Kr(i,"CALL_EXCEPTION"))throw i}return null},Yw=new WeakSet,I3=async function(e,r){const n=await lh.getEnsAddress(e);try{const i=await new gc(n,["function resolver(bytes32) view returns (address)"],e).resolver(O_(r),{enableCcipRead:!0});return i===gg?null:i}catch(s){throw s}return null},Z(lh,Yw);let Pw=lh;const Sx=BigInt(0);function rt(t,e){return function(r){return r==null?e:t(r)}}function F0(t,e){return r=>{if(e&&r==null)return null;if(!Array.isArray(r))throw new Error("not an array");return r.map(n=>t(n))}}function bm(t,e){return r=>{const n={};for(const s in t){let i=s;if(e&&s in e&&!(i in r)){for(const o of e[s])if(o in r){i=o;break}}try{const o=t[s](r[i]);o!==void 0&&(n[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";ne(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:r})}}return n}}function lie(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}z(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function Pd(t){return z(Pt(t,!0),"invalid data","value",t),t}function Gr(t){return z(Pt(t,32),"invalid hash","value",t),t}const hie=bm({address:vt,blockHash:Gr,blockNumber:He,data:Pd,index:He,removed:rt(lie,!1),topics:F0(Gr),transactionHash:Gr,transactionIndex:He},{index:["logIndex"]});function die(t){return hie(t)}const fie=bm({hash:rt(Gr),parentHash:Gr,parentBeaconBlockRoot:rt(Gr,null),number:He,timestamp:He,nonce:rt(Pd),difficulty:Se,gasLimit:Se,gasUsed:Se,stateRoot:rt(Gr,null),receiptsRoot:rt(Gr,null),blobGasUsed:rt(Se,null),excessBlobGas:rt(Se,null),miner:rt(vt),prevRandao:rt(Gr,null),extraData:Pd,baseFeePerGas:rt(Se)},{prevRandao:["mixHash"]});function pie(t){const e=fie(t);return e.transactions=t.transactions.map(r=>typeof r=="string"?r:T3(r)),e}const gie=bm({transactionIndex:He,blockNumber:He,transactionHash:Gr,address:vt,topics:F0(Gr),data:Pd,index:He,blockHash:Gr},{index:["logIndex"]});function mie(t){return gie(t)}const yie=bm({to:rt(vt,null),from:rt(vt,null),contractAddress:rt(vt,null),index:He,root:rt(Ae),gasUsed:Se,blobGasUsed:rt(Se,null),logsBloom:rt(Pd),blockHash:Gr,hash:Gr,logs:F0(mie),blockNumber:He,cumulativeGasUsed:Se,effectiveGasPrice:rt(Se),blobGasPrice:rt(Se,null),status:rt(He),type:rt(He,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function wie(t){return yie(t)}function T3(t){t.to&&Se(t.to)===Sx&&(t.to="0x0000000000000000000000000000000000000000");const e=bm({hash:Gr,index:rt(He,void 0),type:r=>r==="0x"||r==null?0:He(r),accessList:rt(vl,null),blobVersionedHashes:rt(F0(Gr,!0),null),blockHash:rt(Gr,null),blockNumber:rt(He,null),transactionIndex:rt(He,null),from:vt,gasPrice:rt(Se),maxPriorityFeePerGas:rt(Se),maxFeePerGas:rt(Se),maxFeePerBlobGas:rt(Se,null),gasLimit:Se,to:rt(vt,null),value:Se,nonce:He,data:Pd,creates:rt(vt,null),chainId:rt(Se,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=hne(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=Ii.from(t.signature):e.signature=Ii.from(t),e.chainId==null){const r=e.signature.legacyChainId;r!=null&&(e.chainId=r)}return e.blockHash&&Se(e.blockHash)===Sx&&(e.blockHash=null),e}const bie="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class vm{constructor(e){K(this,"name");xe(this,{name:e})}clone(){return new vm(this.name)}}class j0 extends vm{constructor(r,n){r==null&&(r=0);super(`org.ethers.network.plugins.GasCost#${r||0}`);K(this,"effectiveBlock");K(this,"txBase");K(this,"txCreate");K(this,"txDataZero");K(this,"txDataNonzero");K(this,"txAccessListStorageKey");K(this,"txAccessListAddress");const s={effectiveBlock:r};function i(o,a){let c=(n||{})[o];c==null&&(c=a),z(typeof c=="number",`invalud value for ${o}`,"costs",n),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),xe(this,s)}clone(){return new j0(this.effectiveBlock,this)}}class z0 extends vm{constructor(r,n){super("org.ethers.plugins.network.Ens");K(this,"address");K(this,"targetNetwork");xe(this,{address:r||bie,targetNetwork:n??1})}clone(){return new z0(this.address,this.targetNetwork)}}var jg,zg;class vie extends vm{constructor(r,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");Z(this,jg);Z(this,zg);k(this,jg,r),k(this,zg,n)}get url(){return _(this,jg)}get processFunc(){return _(this,zg)}clone(){return this}}jg=new WeakMap,zg=new WeakMap;const $v=new Map;var Jh,Yh,Ka;const hh=class hh{constructor(e,r){Z(this,Jh);Z(this,Yh);Z(this,Ka);k(this,Jh,e),k(this,Yh,Se(r)),k(this,Ka,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return _(this,Jh)}set name(e){k(this,Jh,e)}get chainId(){return _(this,Yh)}set chainId(e){k(this,Yh,Se(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Se(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Se(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Se(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(_(this,Ka).values())}attachPlugin(e){if(_(this,Ka).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,Ka).set(e.name,e.clone()),this}getPlugin(e){return _(this,Ka).get(e)||null}getPlugins(e){return this.plugins.filter(r=>r.name.split("#")[0]===e)}clone(){const e=new hh(this.name,this.chainId);return this.plugins.forEach(r=>{e.attachPlugin(r.clone())}),e}computeIntrinsicGas(e){const r=this.getPlugin("org.ethers.plugins.network.GasCost")||new j0;let n=r.txBase;if(e.to==null&&(n+=r.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?n+=r.txDataZero:n+=r.txDataNonzero;if(e.accessList){const s=vl(e.accessList);for(const i in s)n+=r.txAccessListAddress+r.txAccessListStorageKey*s[i].storageKeys.length}return n}static from(e){if(Eie(),e==null)return hh.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const r=$v.get(e);if(r)return r();if(typeof e=="bigint")return new hh("unknown",e);z(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){z(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const r=new hh(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&r.attachPlugin(new z0(e.ensAddress,e.ensNetwork)),r}z(!1,"invalid network","network",e)}static register(e,r){typeof e=="number"&&(e=BigInt(e));const n=$v.get(e);n&&z(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",e),$v.set(e,r)}};Jh=new WeakMap,Yh=new WeakMap,Ka=new WeakMap;let _i=hh;function Ix(t,e){const r=String(t);if(!r.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const n=r.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;n[1].length<e;)n[1]+="0";if(n[1].length>9){let s=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||s++,n[1]=s.toString()}return BigInt(n[0]+n[1])}function Tx(t){return new vie(t,async(e,r,n)=>{n.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([n.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:Ix(a.maxFee,9),maxPriorityFeePerGas:Ix(a.maxPriorityFee,9)}}catch(i){ne(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:s,error:i})}})}let Nx=!1;function Eie(){if(Nx)return;Nx=!0;function t(e,r,n){const s=function(){const i=new _i(e,r);return n.ensNetwork!=null&&i.attachPlugin(new z0(null,n.ensNetwork)),i.attachPlugin(new j0),(n.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};_i.register(e,s),_i.register(r,s),n.altNames&&n.altNames.forEach(i=>{_i.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[Tx("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Tx("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function B_(t){return JSON.parse(JSON.stringify(t))}var Go,Hs,Ja,Ji,Qh,My;class _ie{constructor(e){Z(this,Qh);Z(this,Go);Z(this,Hs);Z(this,Ja);Z(this,Ji);k(this,Go,e),k(this,Hs,null),k(this,Ja,4e3),k(this,Ji,-2)}get pollingInterval(){return _(this,Ja)}set pollingInterval(e){k(this,Ja,e)}start(){_(this,Hs)||(k(this,Hs,_(this,Go)._setTimeout(oe(this,Qh,My).bind(this),_(this,Ja))),oe(this,Qh,My).call(this))}stop(){_(this,Hs)&&(_(this,Go)._clearTimeout(_(this,Hs)),k(this,Hs,null))}pause(e){this.stop(),e&&k(this,Ji,-2)}resume(){this.start()}}Go=new WeakMap,Hs=new WeakMap,Ja=new WeakMap,Ji=new WeakMap,Qh=new WeakSet,My=async function(){try{const e=await _(this,Go).getBlockNumber();if(_(this,Ji)===-2){k(this,Ji,e);return}if(e!==_(this,Ji)){for(let r=_(this,Ji)+1;r<=e;r++){if(_(this,Hs)==null)return;await _(this,Go).emit("block",r)}k(this,Ji,e)}}catch{}_(this,Hs)!=null&&k(this,Hs,_(this,Go)._setTimeout(oe(this,Qh,My).bind(this),_(this,Ja)))};var Cu,Su,Ya;class P1{constructor(e){Z(this,Cu);Z(this,Su);Z(this,Ya);k(this,Cu,e),k(this,Ya,!1),k(this,Su,r=>{this._poll(r,_(this,Cu))})}async _poll(e,r){throw new Error("sub-classes must override this")}start(){_(this,Ya)||(k(this,Ya,!0),_(this,Su).call(this,-2),_(this,Cu).on("block",_(this,Su)))}stop(){_(this,Ya)&&(k(this,Ya,!1),_(this,Cu).off("block",_(this,Su)))}pause(e){this.stop()}resume(){this.start()}}Cu=new WeakMap,Su=new WeakMap,Ya=new WeakMap;var Zh,Ko;class Aie extends P1{constructor(r,n){super(r);Z(this,Zh);Z(this,Ko);k(this,Zh,n),k(this,Ko,-2)}pause(r){r&&k(this,Ko,-2),super.pause(r)}async _poll(r,n){const s=await n.getBlock(_(this,Zh));s!=null&&(_(this,Ko)===-2?k(this,Ko,s.number):s.number>_(this,Ko)&&(n.emit(_(this,Zh),s.number),k(this,Ko,s.number)))}}Zh=new WeakMap,Ko=new WeakMap;var Qw;class Cie extends P1{constructor(r,n){super(r);Z(this,Qw);k(this,Qw,B_(n))}async _poll(r,n){throw new Error("@TODO")}}Qw=new WeakMap;var Xh;class Sie extends P1{constructor(r,n){super(r);Z(this,Xh);k(this,Xh,n)}async _poll(r,n){const s=await n.getTransactionReceipt(_(this,Xh));s&&n.emit(_(this,Xh),s)}}Xh=new WeakMap;var Jo,ed,td,Qa,qs,Zw,N3;class k1{constructor(e,r){Z(this,Zw);Z(this,Jo);Z(this,ed);Z(this,td);Z(this,Qa);Z(this,qs);k(this,Jo,e),k(this,ed,B_(r)),k(this,td,oe(this,Zw,N3).bind(this)),k(this,Qa,!1),k(this,qs,-2)}start(){_(this,Qa)||(k(this,Qa,!0),_(this,qs)===-2&&_(this,Jo).getBlockNumber().then(e=>{k(this,qs,e)}),_(this,Jo).on("block",_(this,td)))}stop(){_(this,Qa)&&(k(this,Qa,!1),_(this,Jo).off("block",_(this,td)))}pause(e){this.stop(),e&&k(this,qs,-2)}resume(){this.start()}}Jo=new WeakMap,ed=new WeakMap,td=new WeakMap,Qa=new WeakMap,qs=new WeakMap,Zw=new WeakSet,N3=async function(e){if(_(this,qs)===-2)return;const r=B_(_(this,ed));r.fromBlock=_(this,qs)+1,r.toBlock=e;const n=await _(this,Jo).getLogs(r);if(n.length===0){_(this,qs)<e-60&&k(this,qs,e-60);return}for(const s of n)_(this,Jo).emit(_(this,ed),s),k(this,qs,s.blockNumber)};const Iie=BigInt(2),Tie=10;function hy(t){return t&&typeof t.then=="function"}function Fy(t,e){return t+":"+JSON.stringify(e,(r,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n);return s.sort(),s.reduce((i,o)=>(i[o]=n[o],i),{})}return n})}class kw{constructor(e){K(this,"name");xe(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function Nie(t){return JSON.parse(JSON.stringify(t))}function $_(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function Lv(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(Pt(t,32)){const r=t.toLowerCase();return{type:"transaction",tag:Fy("tx",{hash:r}),hash:r}}if(t.orphan){const r=t;return{type:"orphan",tag:Fy("orphan",r),filter:Nie(r)}}if(t.address||t.topics){const r=t,n={topics:(r.topics||[]).map(s=>s==null?null:Array.isArray(s)?$_(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(r.address){const s=[],i=[],o=a=>{Pt(a)?s.push(a):i.push((async()=>{s.push(await In(a,e))})())};Array.isArray(r.address)?r.address.forEach(o):o(r.address),i.length&&await Promise.all(i),n.address=$_(s.map(a=>a.toLowerCase()))}return{filter:n,tag:Fy("event",n),type:"event"}}z(!1,"unknown ProviderEvent","event",t)}function Mv(){return new Date().getTime()}const xie={cacheTimeout:250,pollingInterval:4e3};var rn,Za,nn,rd,ds,Iu,Xa,Yo,Hg,Ws,nd,sd,Ye,os,L_,M_,Gf,F_,Kf,jy;class Oie{constructor(e,r){Z(this,Ye);Z(this,rn);Z(this,Za);Z(this,nn);Z(this,rd);Z(this,ds);Z(this,Iu);Z(this,Xa);Z(this,Yo);Z(this,Hg);Z(this,Ws);Z(this,nd);Z(this,sd);if(k(this,sd,Object.assign({},xie,r||{})),e==="any")k(this,Iu,!0),k(this,ds,null);else if(e){const n=_i.from(e);k(this,Iu,!1),k(this,ds,Promise.resolve(n)),setTimeout(()=>{this.emit("network",n,null)},0)}else k(this,Iu,!1),k(this,ds,null);k(this,Yo,-1),k(this,Xa,new Map),k(this,rn,new Map),k(this,Za,new Map),k(this,nn,null),k(this,rd,!1),k(this,Hg,1),k(this,Ws,new Map),k(this,nd,!1)}get pollingInterval(){return _(this,sd).pollingInterval}get provider(){return this}get plugins(){return Array.from(_(this,Za).values())}attachPlugin(e){if(_(this,Za).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,Za).set(e.name,e.connect(this)),this}getPlugin(e){return _(this,Za).get(e)||null}get disableCcipRead(){return _(this,nd)}set disableCcipRead(e){k(this,nd,!!e)}async ccipReadFetch(e,r,n){if(this.disableCcipRead||n.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=r.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],u=c.replace("{sender}",s).replace("{data}",i),l=new mo(u);c.indexOf("{data}")===-1&&(l.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:l,index:a,urls:n});let h="unknown error",d;try{d=await l.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:{error:f}});continue}try{const f=d.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:l,result:f}),f.data;f.message&&(h=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:f})}catch{}ne(d.statusCode<400||d.statusCode>=500,`response not found during CCIP fetch: ${h}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:h}}),o.push(h)}ne(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:o}})}_wrapBlock(e,r){return new Jse(pie(e),this)}_wrapLog(e,r){return new wm(die(e),this)}_wrapTransactionReceipt(e,r){return new p3(wie(e),this)}_wrapTransactionResponse(e,r){return new Ag(T3(e),this)}_detectNetwork(){ne(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ne(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=He(await oe(this,Ye,os).call(this,{method:"getBlockNumber"}),"%response");return _(this,Yo)>=0&&k(this,Yo,e),e}_getAddress(e){return In(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Pt(e))return Pt(e,32)?e:ah(e);if(typeof e=="bigint"&&(e=He(e,"blockTag")),typeof e=="number")return e>=0?ah(e):_(this,Yo)>=0?ah(_(this,Yo)+e):this.getBlockNumber().then(r=>ah(r+e));z(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const r=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?$_(c.map(u=>u.toLowerCase())):c.toLowerCase()),n="blockHash"in e?e.blockHash:void 0,s=(c,u,l)=>{let h;switch(c.length){case 0:break;case 1:h=c[0];break;default:c.sort(),h=c}if(n&&(u!=null||l!=null))throw new Error("invalid filter");const d={};return h&&(d.address=h),r.length&&(d.topics=r),u&&(d.fromBlock=u),l&&(d.toBlock=l),n&&(d.blockHash=n),d};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const r=Ow(e),n=[];if(["to","from"].forEach(s=>{if(r[s]==null)return;const i=In(r[s],this);hy(i)?n.push(async function(){r[s]=await i}()):r[s]=i}),r.blockTag!=null){const s=this._getBlockTag(r.blockTag);hy(s)?n.push(async function(){r.blockTag=await s}()):r.blockTag=s}return n.length?async function(){return await Promise.all(n),r}():r}async getNetwork(){if(_(this,ds)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw _(this,ds)===s&&k(this,ds,null),i}})();return k(this,ds,s),(await s).clone()}const e=_(this,ds),[r,n]=await Promise.all([e,this._detectNetwork()]);return r.chainId!==n.chainId&&(_(this,Iu)?(this.emit("network",n,r),_(this,ds)===e&&k(this,ds,Promise.resolve(n))):ne(!1,`network changed: ${r.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),r.clone()}async getFeeData(){const e=await this.getNetwork(),r=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await vn({_block:oe(this,Ye,F_).call(this,"latest",!1),gasPrice:(async()=>{try{const l=await oe(this,Ye,os).call(this,{method:"getGasPrice"});return Se(l,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const l=await oe(this,Ye,os).call(this,{method:"getPriorityFee"});return Se(l,"%response")}catch{}return null})()});let a=null,c=null;const u=this._wrapBlock(s,e);return u&&u.baseFeePerGas&&(c=o??BigInt("1000000000"),a=u.baseFeePerGas*Iie+c),new Ex(i,a,c)},n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const s=new mo(n.url),i=await n.processFunc(r,this,s);return new Ex(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await r()}async estimateGas(e){let r=this._getTransactionRequest(e);return hy(r)&&(r=await r),Se(await oe(this,Ye,os).call(this,{method:"estimateGas",transaction:r}),"%response")}async call(e){const{tx:r,blockTag:n}=await vn({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await oe(this,Ye,M_).call(this,oe(this,Ye,L_).call(this,r,n,e.enableCcipRead?0:-1))}async getBalance(e,r){return Se(await oe(this,Ye,Gf).call(this,{method:"getBalance"},e,r),"%response")}async getTransactionCount(e,r){return He(await oe(this,Ye,Gf).call(this,{method:"getTransactionCount"},e,r),"%response")}async getCode(e,r){return Ae(await oe(this,Ye,Gf).call(this,{method:"getCode"},e,r))}async getStorage(e,r,n){const s=Se(r,"position");return Ae(await oe(this,Ye,Gf).call(this,{method:"getStorage",position:s},e,n))}async broadcastTransaction(e){const{blockNumber:r,hash:n,network:s}=await vn({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=Nw.from(e);if(i.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(r)}async getBlock(e,r){const{network:n,params:s}=await vn({network:this.getNetwork(),params:oe(this,Ye,F_).call(this,e,!!r)});return s==null?null:this._wrapBlock(s,n)}async getTransaction(e){const{network:r,params:n}=await vn({network:this.getNetwork(),params:oe(this,Ye,os).call(this,{method:"getTransaction",hash:e})});return n==null?null:this._wrapTransactionResponse(n,r)}async getTransactionReceipt(e){const{network:r,params:n}=await vn({network:this.getNetwork(),params:oe(this,Ye,os).call(this,{method:"getTransactionReceipt",hash:e})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const s=await oe(this,Ye,os).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(n,r)}async getTransactionResult(e){const{result:r}=await vn({network:this.getNetwork(),result:oe(this,Ye,os).call(this,{method:"getTransactionResult",hash:e})});return r==null?null:Ae(r)}async getLogs(e){let r=this._getFilter(e);hy(r)&&(r=await r);const{network:n,params:s}=await vn({network:this.getNetwork(),params:oe(this,Ye,os).call(this,{method:"getLogs",filter:r})});return s.map(i=>this._wrapLog(i,n))}_getProvider(e){ne(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await Pw.fromName(this,e)}async getAvatar(e){const r=await this.getResolver(e);return r?await r.getAvatar():null}async resolveName(e){const r=await this.getResolver(e);return r?await r.getAddress():null}async lookupAddress(e){e=vt(e);const r=O_(e.substring(2).toLowerCase()+".addr.reverse");try{const n=await Pw.getEnsAddress(this),i=await new gc(n,["function resolver(bytes32) view returns (address)"],this).resolver(r);if(i==null||i===gg)return null;const a=await new gc(i,["function name(bytes32) view returns (string)"],this).name(r);return await this.resolveName(a)!==e?null:a}catch(n){if(Kr(n,"BAD_DATA")&&n.value==="0x"||Kr(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(e,r,n){const s=r??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async u=>{try{const l=await this.getTransactionReceipt(e);if(l!=null&&u-l.blockNumber+1>=s){i(l),a&&(clearTimeout(a),a=null);return}}catch(l){console.log("EEE",l)}this.once("block",c)};n!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(Wt("timeout","TIMEOUT",{reason:"timeout"})))},n)),c(await this.getBlockNumber())})}async waitForBlock(e){ne(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const r=_(this,Ws).get(e);r&&(r.timer&&clearTimeout(r.timer),_(this,Ws).delete(e))}_setTimeout(e,r){r==null&&(r=0);const n=hf(this,Hg)._++,s=()=>{_(this,Ws).delete(n),e()};if(this.paused)_(this,Ws).set(n,{timer:null,func:s,time:r});else{const i=setTimeout(s,r);_(this,Ws).set(n,{timer:i,func:s,time:Mv()})}return n}_forEachSubscriber(e){for(const r of _(this,rn).values())e(r.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new kw(e.type);case"block":{const r=new _ie(this);return r.pollingInterval=this.pollingInterval,r}case"safe":case"finalized":return new Aie(this,e.type);case"event":return new k1(this,e.filter);case"transaction":return new Sie(this,e.hash);case"orphan":return new Cie(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,r){for(const n of _(this,rn).values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=r,n.started&&r.start(),_(this,nn)!=null&&r.pause(_(this,nn));break}}async on(e,r){const n=await oe(this,Ye,jy).call(this,e);return n.listeners.push({listener:r,once:!1}),n.started||(n.subscriber.start(),n.started=!0,_(this,nn)!=null&&n.subscriber.pause(_(this,nn))),this}async once(e,r){const n=await oe(this,Ye,jy).call(this,e);return n.listeners.push({listener:r,once:!0}),n.started||(n.subscriber.start(),n.started=!0,_(this,nn)!=null&&n.subscriber.pause(_(this,nn))),this}async emit(e,...r){const n=await oe(this,Ye,Kf).call(this,e,r);if(!n||n.listeners.length===0)return!1;const s=n.listeners.length;return n.listeners=n.listeners.filter(({listener:i,once:o})=>{const a=new qk(this,o?null:i,e);try{i.call(this,...r,a)}catch{}return!o}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),_(this,rn).delete(n.tag)),s>0}async listenerCount(e){if(e){const n=await oe(this,Ye,Kf).call(this,e);return n?n.listeners.length:0}let r=0;for(const{listeners:n}of _(this,rn).values())r+=n.length;return r}async listeners(e){if(e){const n=await oe(this,Ye,Kf).call(this,e);return n?n.listeners.map(({listener:s})=>s):[]}let r=[];for(const{listeners:n}of _(this,rn).values())r=r.concat(n.map(({listener:s})=>s));return r}async off(e,r){const n=await oe(this,Ye,Kf).call(this,e);if(!n)return this;if(r){const s=n.listeners.map(({listener:i})=>i).indexOf(r);s>=0&&n.listeners.splice(s,1)}return(!r||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),_(this,rn).delete(n.tag)),this}async removeAllListeners(e){if(e){const{tag:r,started:n,subscriber:s}=await oe(this,Ye,jy).call(this,e);n&&s.stop(),_(this,rn).delete(r)}else for(const[r,{started:n,subscriber:s}]of _(this,rn))n&&s.stop(),_(this,rn).delete(r);return this}async addListener(e,r){return await this.on(e,r)}async removeListener(e,r){return this.off(e,r)}get destroyed(){return _(this,rd)}destroy(){this.removeAllListeners();for(const e of _(this,Ws).keys())this._clearTimeout(e);k(this,rd,!0)}get paused(){return _(this,nn)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(k(this,Yo,-1),_(this,nn)!=null){if(_(this,nn)==!!e)return;ne(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(r=>r.pause(e)),k(this,nn,!!e);for(const r of _(this,Ws).values())r.timer&&clearTimeout(r.timer),r.time=Mv()-r.time}resume(){if(_(this,nn)!=null){this._forEachSubscriber(e=>e.resume()),k(this,nn,null);for(const e of _(this,Ws).values()){let r=e.time;r<0&&(r=0),e.time=Mv(),setTimeout(e.func,r)}}}}rn=new WeakMap,Za=new WeakMap,nn=new WeakMap,rd=new WeakMap,ds=new WeakMap,Iu=new WeakMap,Xa=new WeakMap,Yo=new WeakMap,Hg=new WeakMap,Ws=new WeakMap,nd=new WeakMap,sd=new WeakMap,Ye=new WeakSet,os=async function(e){const r=_(this,sd).cacheTimeout;if(r<0)return await this._perform(e);const n=Fy(e.method,e);let s=_(this,Xa).get(n);return s||(s=this._perform(e),_(this,Xa).set(n,s),setTimeout(()=>{_(this,Xa).get(n)===s&&_(this,Xa).delete(n)},r)),await s},L_=async function(e,r,n){ne(n<Tie,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:r,enableCcipRead:!0})});const s=Ow(e);try{return Ae(await this._perform({method:"call",transaction:s,blockTag:r}))}catch(i){if(!this.disableCcipRead&&l1(i)&&i.data&&n>=0&&r==="latest"&&s.to!=null&&rr(i.data,0,4)==="0x556f1830"){const o=i.data,a=await In(s.to,this);let c;try{c=Uie(rr(i.data,4))}catch(h){ne(!1,h.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}ne(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const u=await this.ccipReadFetch(s,c.calldata,c.urls);ne(u!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const l={to:a,data:lr([c.selector,Die([u,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:l});try{const h=await oe(this,Ye,L_).call(this,l,r,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},l),result:h}),h}catch(h){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},l),error:h}),h}}throw i}},M_=async function(e){const{value:r}=await vn({network:this.getNetwork(),value:e});return r},Gf=async function(e,r,n){let s=this._getAddress(r),i=this._getBlockTag(n);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await oe(this,Ye,M_).call(this,oe(this,Ye,os).call(this,Object.assign(e,{address:s,blockTag:i})))},F_=async function(e,r){if(Pt(e,32))return await oe(this,Ye,os).call(this,{method:"getBlock",blockHash:e,includeTransactions:r});let n=this._getBlockTag(e);return typeof n!="string"&&(n=await n),await oe(this,Ye,os).call(this,{method:"getBlock",blockTag:n,includeTransactions:r})},Kf=async function(e,r){let n=await Lv(e,this);return n.type==="event"&&r&&r.length>0&&r[0].removed===!0&&(n=await Lv({orphan:"drop-log",log:r[0]},this)),_(this,rn).get(n.tag)||null},jy=async function(e){const r=await Lv(e,this),n=r.tag;let s=_(this,rn).get(n);return s||(s={subscriber:this._getSubscriber(r),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},_(this,rn).set(n,s)),s};function Rie(t,e){try{const r=j_(t,e);if(r)return vw(r)}catch{}return null}function j_(t,e){if(t==="0x")return null;try{const r=He(rr(t,e,e+32)),n=He(rr(t,r,r+32));return rr(t,r+32,r+32+n)}catch{}return null}function xx(t){const e=Cn(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function Pie(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const kie=new Uint8Array([]);function Die(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(kie),r+=32;for(let n=0;n<t.length;n++){const s=nt(t[n]);e[n]=xx(r),e.push(xx(s.length)),e.push(Pie(s)),r+=32+Math.ceil(s.length/32)*32}return lr(e)}const Ox="0x0000000000000000000000000000000000000000000000000000000000000000";function Uie(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ne(mh(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const r=rr(t,0,32);ne(rr(r,0,12)===rr(Ox,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=rr(r,12);try{const n=[],s=He(rr(t,32,64)),i=He(rr(t,s,s+32)),o=rr(t,s+32);for(let a=0;a<i;a++){const c=Rie(o,a*32);if(c==null)throw new Error("abort");n.push(c)}e.urls=n}catch{ne(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=j_(t,64);if(n==null)throw new Error("abort");e.calldata=n}catch{ne(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ne(rr(t,100,128)===rr(Ox,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=rr(t,96,100);try{const n=j_(t,128);if(n==null)throw new Error("abort");e.extraData=n}catch{ne(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>e[n]),e}function Kl(t,e){if(t.provider)return t.provider;ne(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function Rx(t,e){let r=Ow(e);if(r.to!=null&&(r.to=In(r.to,t)),r.from!=null){const n=r.from;r.from=Promise.all([t.getAddress(),In(n,t)]).then(([s,i])=>(z(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else r.from=t.getAddress();return await vn(r)}class Bie{constructor(e){K(this,"provider");xe(this,{provider:e||null})}async getNonce(e){return Kl(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await Rx(this,e)}async populateTransaction(e){const r=Kl(this,"populateTransaction"),n=await Rx(this,e);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const s=await this.provider.getNetwork();if(n.chainId!=null){const o=Se(n.chainId);z(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else n.chainId=s.chainId;const i=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||i)?z(!1,"eip-1559 transaction do not support gasPrice","tx",e):(n.type===0||n.type===1)&&i&&z(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const o=await r.getFeeData();ne(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice)}else{const o=await r.getFeeData();if(n.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(n.type=2,n.gasPrice!=null){const a=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=a,n.maxPriorityFeePerGas=a}else n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(ne(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice),n.type=0):ne(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(n.type===2||n.type===3)&&(n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await vn(n)}async estimateGas(e){return Kl(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Kl(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Kl(this,"resolveName").resolveName(e)}async sendTransaction(e){const r=Kl(this,"sendTransaction"),n=await this.populateTransaction(e);delete n.from;const s=Nw.from(n);return await r.broadcastTransaction(await this.signTransaction(s))}}const Px=new Set;function $ie(t){Px.has(t)||(Px.add(t),console.log("========= NOTICE ========="),console.log(`Request-Rate Exceeded for ${t} (this message will not be repeated)`),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.org/api-keys/"),console.log("=========================="))}function Lie(t){return JSON.parse(JSON.stringify(t))}var bn,Yi,Tu,ec,Nu,id,Ic,z_,H_;class x3{constructor(e){Z(this,Ic);Z(this,bn);Z(this,Yi);Z(this,Tu);Z(this,ec);Z(this,Nu);Z(this,id);k(this,bn,e),k(this,Yi,null),k(this,Tu,oe(this,Ic,z_).bind(this)),k(this,ec,!1),k(this,Nu,null),k(this,id,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,r){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){_(this,ec)||(k(this,ec,!0),oe(this,Ic,z_).call(this,-2))}stop(){_(this,ec)&&(k(this,ec,!1),k(this,id,!0),oe(this,Ic,H_).call(this),_(this,bn).off("block",_(this,Tu)))}pause(e){e&&oe(this,Ic,H_).call(this),_(this,bn).off("block",_(this,Tu))}resume(){this.start()}}bn=new WeakMap,Yi=new WeakMap,Tu=new WeakMap,ec=new WeakMap,Nu=new WeakMap,id=new WeakMap,Ic=new WeakSet,z_=async function(e){try{_(this,Yi)==null&&k(this,Yi,this._subscribe(_(this,bn)));let r=null;try{r=await _(this,Yi)}catch(i){if(!Kr(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(r==null){k(this,Yi,null),_(this,bn)._recoverSubscriber(this,this._recover(_(this,bn)));return}const n=await _(this,bn).getNetwork();if(_(this,Nu)||k(this,Nu,n),_(this,Nu).chainId!==n.chainId)throw new Error("chaid changed");if(_(this,id))return;const s=await _(this,bn).send("eth_getFilterChanges",[r]);await this._emitResults(_(this,bn),s)}catch(r){console.log("@TODO",r)}_(this,bn).once("block",_(this,Tu))},H_=function(){const e=_(this,Yi);e&&(k(this,Yi,null),e.then(r=>{_(this,bn).destroyed||_(this,bn).send("eth_uninstallFilter",[r])}))};var xu;class Mie extends x3{constructor(r,n){super(r);Z(this,xu);k(this,xu,Lie(n))}_recover(r){return new k1(r,_(this,xu))}async _subscribe(r){return await r.send("eth_newFilter",[_(this,xu)])}async _emitResults(r,n){for(const s of n)r.emit(_(this,xu),r._wrapLog(s,r._network))}}xu=new WeakMap;class Fie extends x3{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,r){for(const n of r)e.emit("pending",n)}}const jie="bigint,boolean,function,number,string,symbol".split(/,/g);function zy(t){if(t==null||jie.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(zy);if(typeof t=="object")return Object.keys(t).reduce((e,r)=>(e[r]=t[r],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function zie(t){return new Promise(e=>{setTimeout(e,t)})}function Jl(t){return t&&t.toLowerCase()}function kx(t){return t&&typeof t.pollingInterval=="number"}const O3={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class vh extends Bie{constructor(r,n){super(r);K(this,"address");n=vt(n),xe(this,{address:n})}connect(r){ne(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(r){return await this.populateCall(r)}async sendUncheckedTransaction(r){const n=zy(r),s=[];if(n.from){const o=n.from;s.push((async()=>{const a=await In(o,this.provider);z(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",r),n.from=a})())}else n.from=this.address;if(n.gasLimit==null&&s.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const o=n.to;s.push((async()=>{n.to=await In(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(r){const n=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(r);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const u=async()=>{try{const l=await this.provider.getTransaction(s);if(l!=null){i(l.replaceableTransaction(n));return}}catch(l){if(Kr(l,"CANCELLED")||Kr(l,"BAD_DATA")||Kr(l,"NETWORK_ERROR")||Kr(l,"UNSUPPORTED_OPERATION")){l.info==null&&(l.info={}),l.info.sendTransactionHash=s,o(l);return}if(Kr(l,"INVALID_ARGUMENT")&&(c++,l.info==null&&(l.info={}),l.info.sendTransactionHash=s,c>10)){o(l);return}this.provider.emit("error",Wt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:l}))}this.provider._setTimeout(()=>{u()},a.pop()||4e3)};u()})}async signTransaction(r){const n=zy(r);if(n.from){const i=await In(n.from,this.provider);z(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",r),n.from=i}else n.from=this.address;const s=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[s])}async signMessage(r){const n=typeof r=="string"?uo(r):r;return await this.provider.send("personal_sign",[Ae(n),this.address.toLowerCase()])}async signTypedData(r,n,s){const i=zy(s),o=await xw.resolveNames(r,n,i,async a=>{const c=await In(a);return z(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(xw.getPayload(o.domain,n,o.value))])}async unlock(r){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),r,null])}async _legacySignMessage(r){const n=typeof r=="string"?uo(r):r;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Ae(n)])}}var Ou,od,Qo,Qi,gi,Vs,zn,qg,q_;class R3 extends Oie{constructor(r,n){super(r,n);Z(this,qg);Z(this,Ou);Z(this,od);Z(this,Qo);Z(this,Qi);Z(this,gi);Z(this,Vs);Z(this,zn);k(this,od,1),k(this,Ou,Object.assign({},O3,n||{})),k(this,Qo,[]),k(this,Qi,null),k(this,Vs,null),k(this,zn,null);{let i=null;const o=new Promise(a=>{i=a});k(this,gi,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(z(!s||r!=="any","staticNetwork cannot be used on special network 'any'","options",n),s&&r!=null&&k(this,Vs,_i.from(r))):s&&(z(r==null||s.matches(r),"staticNetwork MUST match network object","options",n),k(this,Vs,s))}_getOption(r){return _(this,Ou)[r]}get _network(){return ne(_(this,Vs),"network is not available yet","NETWORK_ERROR"),_(this,Vs)}async _perform(r){if(r.method==="call"||r.method==="estimateGas"){let s=r.transaction;if(s&&s.type!=null&&Se(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(r=Object.assign({},r,{transaction:Object.assign({},s,{type:void 0})}))}}const n=this.getRpcRequest(r);return n!=null?await this.send(n.method,n.args):super._perform(r)}async _detectNetwork(){const r=this._getOption("staticNetwork");if(r)if(r===!0){if(_(this,Vs))return _(this,Vs)}else return r;return _(this,zn)?await _(this,zn):this.ready?(k(this,zn,(async()=>{try{const n=_i.from(Se(await this.send("eth_chainId",[])));return k(this,zn,null),n}catch(n){throw k(this,zn,null),n}})()),await _(this,zn)):(k(this,zn,(async()=>{const n={id:hf(this,od)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let s;try{s=(await this._send(n))[0],k(this,zn,null)}catch(i){throw k(this,zn,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return _i.from(Se(s.result));throw this.getRpcError(n,s)})()),await _(this,zn))}_start(){_(this,gi)==null||_(this,gi).resolve==null||(_(this,gi).resolve(),k(this,gi,null),(async()=>{for(;_(this,Vs)==null&&!this.destroyed;)try{k(this,Vs,await this._detectNetwork())}catch(r){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Wt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:r}})),await zie(1e3)}oe(this,qg,q_).call(this)})())}async _waitUntilReady(){if(_(this,gi)!=null)return await _(this,gi).promise}_getSubscriber(r){return r.type==="pending"?new Fie(this):r.type==="event"?this._getOption("polling")?new k1(this,r.filter):new Mie(this,r.filter):r.type==="orphan"&&r.filter.orphan==="drop-log"?new kw("orphan"):super._getSubscriber(r)}get ready(){return _(this,gi)==null}getRpcTransaction(r){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(r[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),n[i]=ah(Se(r[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{r[s]!=null&&(n[s]=Ae(r[s]))}),r.accessList&&(n.accessList=vl(r.accessList)),r.blobVersionedHashes&&(n.blobVersionedHashes=r.blobVersionedHashes.map(s=>s.toLowerCase())),n}getRpcRequest(r){switch(r.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Jl(r.address),r.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Jl(r.address),r.blockTag]};case"getCode":return{method:"eth_getCode",args:[Jl(r.address),r.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Jl(r.address),"0x"+r.position.toString(16),r.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[r.signedTransaction]};case"getBlock":if("blockTag"in r)return{method:"eth_getBlockByNumber",args:[r.blockTag,!!r.includeTransactions]};if("blockHash"in r)return{method:"eth_getBlockByHash",args:[r.blockHash,!!r.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[r.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[r.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(r.transaction),r.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(r.transaction)]};case"getLogs":return r.filter&&r.filter.address!=null&&(Array.isArray(r.filter.address)?r.filter.address=r.filter.address.map(Jl):r.filter.address=Jl(r.filter.address)),{method:"eth_getLogs",args:[r.filter]}}return null}getRpcError(r,n){const{method:s}=r,{error:i}=n;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return Wt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:r.params[0],info:{payload:r,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=W_(i),u=_g.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",r.params[0],c?c.data:null);return u.info={error:i,payload:r},u}const o=JSON.stringify(Hie(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return Wt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:r,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=r.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Wt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return Wt("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Wt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return Wt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?Wt("unsupported operation","UNSUPPORTED_OPERATION",{operation:r.method,info:{error:i,payload:r}}):Wt("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:r})}send(r,n){if(this.destroyed)return Promise.reject(Wt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:r}));const s=hf(this,od)._++,i=new Promise((o,a)=>{_(this,Qo).push({resolve:o,reject:a,payload:{method:r,params:n,id:s,jsonrpc:"2.0"}})});return oe(this,qg,q_).call(this),i}async getSigner(r){r==null&&(r=0);const n=this.send("eth_accounts",[]);if(typeof r=="number"){const i=await n;if(r>=i.length)throw new Error("no such account");return new vh(this,i[r])}const{accounts:s}=await vn({network:this.getNetwork(),accounts:n});r=vt(r);for(const i of s)if(vt(i)===r)return new vh(this,r);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new vh(this,n))}destroy(){_(this,Qi)&&(clearTimeout(_(this,Qi)),k(this,Qi,null));for(const{payload:r,reject:n}of _(this,Qo))n(Wt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:r.method}));k(this,Qo,[]),super.destroy()}}Ou=new WeakMap,od=new WeakMap,Qo=new WeakMap,Qi=new WeakMap,gi=new WeakMap,Vs=new WeakMap,zn=new WeakMap,qg=new WeakSet,q_=function(){if(_(this,Qi))return;const r=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");k(this,Qi,setTimeout(()=>{k(this,Qi,null);const n=_(this,Qo);for(k(this,Qo,[]);n.length;){const s=[n.shift()];for(;n.length&&s.length!==_(this,Ou).batchMaxCount;)if(s.push(n.shift()),JSON.stringify(s.map(o=>o.payload)).length>_(this,Ou).batchMaxSize){n.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:u}of s){if(this.destroyed){c(Wt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:u.method}));continue}const l=o.filter(h=>h.id===u.id)[0];if(l==null){const h=Wt("missing response for request","BAD_DATA",{value:o,info:{payload:u}});this.emit("error",h),c(h);continue}if("error"in l){c(this.getRpcError(u,l));continue}a(l.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},r))};var tc;class P3 extends R3{constructor(r,n){super(r,n);Z(this,tc);let s=this._getOption("pollingInterval");s==null&&(s=O3.pollingInterval),k(this,tc,s)}_getSubscriber(r){const n=super._getSubscriber(r);return kx(n)&&(n.pollingInterval=_(this,tc)),n}get pollingInterval(){return _(this,tc)}set pollingInterval(r){if(!Number.isInteger(r)||r<0)throw new Error("invalid interval");k(this,tc,r),this._forEachSubscriber(n=>{kx(n)&&(n.pollingInterval=_(this,tc))})}}tc=new WeakMap;var ad;class D1 extends P3{constructor(r,n,s){r==null&&(r="http://localhost:8545");super(n,s);Z(this,ad);typeof r=="string"?k(this,ad,new mo(r)):k(this,ad,r.clone())}_getConnection(){return _(this,ad).clone()}async send(r,n){return await this._start(),await super.send(r,n)}async _send(r){const n=this._getConnection();n.body=JSON.stringify(r),n.setHeader("content-type","application/json");const s=await n.send();s.assertOk();let i=s.bodyJson;return Array.isArray(i)||(i=[i]),i}}ad=new WeakMap;function W_(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&Pt(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const r=W_(t[e]);if(r)return r}return null}if(typeof t=="string")try{return W_(JSON.parse(t))}catch{}return null}function V_(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const r in t)V_(t[r],e);if(typeof t=="string")try{return V_(JSON.parse(t),e)}catch{}}}function Hie(t){const e=[];return V_(t,e),e}function qie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof Te<"u")return Te;throw new Error("unable to locate global object")}const Wie=qie().WebSocket;var Zi,Wg,rc,Ru,nc;class U1{constructor(e,r){Z(this,Zi);Z(this,Wg);Z(this,rc);Z(this,Ru);Z(this,nc);k(this,Zi,e),k(this,Wg,JSON.stringify(r)),k(this,rc,null),k(this,Ru,null),k(this,nc,null)}get filter(){return JSON.parse(_(this,Wg))}start(){k(this,rc,_(this,Zi).send("eth_subscribe",this.filter).then(e=>(_(this,Zi)._register(e,this),e)))}stop(){_(this,rc).then(e=>{_(this,Zi).destroyed||_(this,Zi).send("eth_unsubscribe",[e])}),k(this,rc,null)}pause(e){ne(e,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"}),k(this,Ru,!!e)}resume(){k(this,Ru,null)}_handleMessage(e){if(_(this,rc)!=null&&_(this,Ru)===null){let r=_(this,nc);r==null?r=this._emit(_(this,Zi),e):r=r.then(async()=>{await this._emit(_(this,Zi),e)}),k(this,nc,r.then(()=>{_(this,nc)===r&&k(this,nc,null)}))}}async _emit(e,r){throw new Error("sub-classes must implemente this; _emit")}}Zi=new WeakMap,Wg=new WeakMap,rc=new WeakMap,Ru=new WeakMap,nc=new WeakMap;class Vie extends U1{constructor(e){super(e,["newHeads"])}async _emit(e,r){e.emit("block",parseInt(r.number))}}class Gie extends U1{constructor(e){super(e,["newPendingTransactions"])}async _emit(e,r){e.emit("pending",r)}}var Vg;class Kie extends U1{constructor(r,n){super(r,["logs",n]);Z(this,Vg);k(this,Vg,JSON.stringify(n))}get logFilter(){return JSON.parse(_(this,Vg))}async _emit(r,n){r.emit(this.logFilter,r._wrapLog(n,r._network))}}Vg=new WeakMap;var Pu,cd,sc;class Jie extends R3{constructor(r,n){const s=Object.assign({},n??{});z(s.batchMaxCount==null||s.batchMaxCount===1,"sockets-based providers do not support batches","options.batchMaxCount",n),s.batchMaxCount=1,s.staticNetwork==null&&(s.staticNetwork=!0);super(r,s);Z(this,Pu);Z(this,cd);Z(this,sc);k(this,Pu,new Map),k(this,cd,new Map),k(this,sc,new Map)}_getSubscriber(r){switch(r.type){case"close":return new kw("close");case"block":return new Vie(this);case"pending":return new Gie(this);case"event":return new Kie(this,r.filter);case"orphan":if(r.filter.orphan==="drop-log")return new kw("drop-log")}return super._getSubscriber(r)}_register(r,n){_(this,cd).set(r,n);const s=_(this,sc).get(r);if(s){for(const i of s)n._handleMessage(i);_(this,sc).delete(r)}}async _send(r){z(!Array.isArray(r),"WebSocket does not support batch send","payload",r);const n=new Promise((s,i)=>{_(this,Pu).set(r.id,{payload:r,resolve:s,reject:i})});return await this._waitUntilReady(),await this._write(JSON.stringify(r)),[await n]}async _processMessage(r){const n=JSON.parse(r);if(n&&typeof n=="object"&&"id"in n){const s=_(this,Pu).get(n.id);if(s==null){this.emit("error",Wt("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:n}));return}_(this,Pu).delete(n.id),s.resolve(n)}else if(n&&n.method==="eth_subscription"){const s=n.params.subscription,i=_(this,cd).get(s);if(i)i._handleMessage(n.params.result);else{let o=_(this,sc).get(s);o==null&&(o=[],_(this,sc).set(s,o)),o.push(n.params.result)}}else{this.emit("error",Wt("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:n}));return}}async _write(r){throw new Error("sub-classes must override this")}}Pu=new WeakMap,cd=new WeakMap,sc=new WeakMap;var ku,mi;class k3 extends Jie{constructor(r,n,s){super(n,s);Z(this,ku);Z(this,mi);typeof r=="string"?(k(this,ku,()=>new Wie(r)),k(this,mi,_(this,ku).call(this))):typeof r=="function"?(k(this,ku,r),k(this,mi,r())):(k(this,ku,null),k(this,mi,r)),this.websocket.onopen=async()=>{try{await this._start(),this.resume()}catch(i){console.log("failed to start WebsocketProvider",i)}},this.websocket.onmessage=i=>{this._processMessage(i.data)}}get websocket(){if(_(this,mi)==null)throw new Error("websocket closed");return _(this,mi)}async _write(r){this.websocket.send(r)}async destroy(){_(this,mi)!=null&&(_(this,mi).close(),k(this,mi,null)),super.destroy()}}ku=new WeakMap,mi=new WeakMap;const Jf="84842078b09946638c03157f83405213";function Yie(t){switch(t){case"mainnet":return"mainnet.infura.io";case"goerli":return"goerli.infura.io";case"sepolia":return"sepolia.infura.io";case"arbitrum":return"arbitrum-mainnet.infura.io";case"arbitrum-goerli":return"arbitrum-goerli.infura.io";case"arbitrum-sepolia":return"arbitrum-sepolia.infura.io";case"base":return"base-mainnet.infura.io";case"base-goerlia":return"base-goerli.infura.io";case"base-sepolia":return"base-sepolia.infura.io";case"bnb":return"bnbsmartchain-mainnet.infura.io";case"bnbt":return"bnbsmartchain-testnet.infura.io";case"linea":return"linea-mainnet.infura.io";case"linea-goerli":return"linea-goerli.infura.io";case"linea-sepolia":return"linea-sepolia.infura.io";case"matic":return"polygon-mainnet.infura.io";case"matic-amoy":return"polygon-amoy.infura.io";case"matic-mumbai":return"polygon-mumbai.infura.io";case"optimism":return"optimism-mainnet.infura.io";case"optimism-goerli":return"optimism-goerli.infura.io";case"optimism-sepolia":return"optimism-sepolia.infura.io"}z(!1,"unsupported network","network",t)}class Qie extends k3{constructor(r,n){const s=new al(r,n),i=s._getConnection();ne(!i.credentials,"INFURA WebSocket project secrets unsupported","UNSUPPORTED_OPERATION",{operation:"InfuraProvider.getWebSocketProvider()"});const o=i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(o,s._network);K(this,"projectId");K(this,"projectSecret");xe(this,{projectId:s.projectId,projectSecret:s.projectSecret})}isCommunityResource(){return this.projectId===Jf}}class al extends D1{constructor(r,n,s){r==null&&(r="mainnet");const i=_i.from(r);n==null&&(n=Jf),s==null&&(s=null);const o=al.getRequest(i,n,s);super(o,i,{staticNetwork:i});K(this,"projectId");K(this,"projectSecret");xe(this,{projectId:n,projectSecret:s})}_getProvider(r){try{return new al(r,this.projectId,this.projectSecret)}catch{}return super._getProvider(r)}isCommunityResource(){return this.projectId===Jf}static getWebSocketProvider(r,n){return new Qie(r,n)}static getRequest(r,n,s){n==null&&(n=Jf),s==null&&(s=null);const i=new mo(`https://${Yie(r.name)}/v3/${n}`);return i.allowGzip=!0,s&&i.setCredentials("",s),n===Jf&&(i.retryFunc=async(o,a,c)=>($ie("InfuraProvider"),!0)),i}}var ud;class Fv extends P3{constructor(r,n,s){const i=Object.assign({},s??{},{batchMaxCount:1});z(r&&r.request,"invalid EIP-1193 provider","ethereum",r);super(n,i);Z(this,ud);k(this,ud,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const u=await r.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:u}),u}catch(u){const l=new Error(u.message);throw l.code=u.code,l.data=u.data,l.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:l}),l}})}async send(r,n){return await this._start(),await super.send(r,n)}async _send(r){z(!Array.isArray(r),"EIP-1193 does not support batch request","payload",r);try{const n=await _(this,ud).call(this,r.method,r.params||[]);return[{id:r.id,result:n}]}catch(n){return[{id:r.id,error:{code:n.code,data:n.data,message:n.message}}]}}getRpcError(r,n){switch(n=JSON.parse(JSON.stringify(n)),n.error.code||-1){case 4001:n.error.message=`ethers-user-denied: ${n.error.message}`;break;case 4200:n.error.message=`ethers-unsupported: ${n.error.message}`;break}return super.getRpcError(r,n)}async hasSigner(r){r==null&&(r=0);const n=await this.send("eth_accounts",[]);return typeof r=="number"?n.length>r:(r=r.toLowerCase(),n.filter(s=>s.toLowerCase()===r).length!==0)}async getSigner(r){if(r==null&&(r=0),!await this.hasSigner(r))try{await _(this,ud).call(this,"eth_requestAccounts",[])}catch(n){const s=n.payload;throw this.getRpcError(s,{id:s.id,error:n})}return await super.getSigner(r)}}ud=new WeakMap;const Eh={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,r]=await Promise.all([Eh.getAddresses(t),Eh.getChainId(t)]);return{chainId:r,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var n,s;const r=((n=e.rpcUrls.chainDefault)==null?void 0:n.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:Eh.numberToHexString(e.id),rpcUrls:[...r],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[to.NetworkImageIds[e.id]]}]})}},Oa={signMessage:async(t,e,r)=>{if(!e)throw new Error("signMessage - provider is undefined");const n=Pt(t)?t:Ae(uo(t));return await e.request({method:"personal_sign",params:[n,r]})},estimateGas:async(t,e,r,n)=>{if(!e)throw new Error("estimateGas - provider is undefined");if(!r)throw new Error("estimateGas - address is undefined");if(t.chainNamespace&&t.chainNamespace!=="eip155")throw new Error("estimateGas - chainNamespace is not eip155");const s={from:t.address,to:t.to,data:t.data,type:0},i=new Fv(e,n);return await new vh(i,r).estimateGas(s)},sendTransaction:async(t,e,r,n)=>{if(!e)throw new Error("sendTransaction - provider is undefined");if(!r)throw new Error("sendTransaction - address is undefined");if(t.chainNamespace&&t.chainNamespace!=="eip155")throw new Error("sendTransaction - chainNamespace is not eip155");const s={to:t.to,value:t.value,gasLimit:t.gas,gasPrice:t.gasPrice,data:t.data,type:0},i=new Fv(e,n),c=await(await new vh(i,r).sendTransaction(s)).wait();return(c==null?void 0:c.hash)||null},writeContract:async(t,e,r,n)=>{if(!e)throw new Error("writeContract - provider is undefined");if(!r)throw new Error("writeContract - address is undefined");const s=new Fv(e,n),i=new vh(s,r),o=new gc(t.tokenAddress,t.abi,i);if(!o||!t.method)throw new Error("Contract method is undefined");const a=o[t.method];if(a)return await a(...t.args);throw new Error("Contract method is undefined")},getEnsAddress:async(t,e)=>{try{const r=Number(e.id);let n=null,s=!1;return sM(t)&&(s=await c1.resolveReownName(t)||!1),r===1&&(n=await new al("mainnet").resolveName(t)),n||s||!1}catch{return!1}},getEnsAvatar:async(t,e)=>e===1&&await new al("mainnet").getAvatar(t)||!1,parseWalletCapabilities:t=>{try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}},parseUnits:$te,formatUnits:d1};class Zie extends Mk{constructor(){super({adapterType:le.ADAPTER_TYPES.ETHERS,namespace:le.CHAIN.EVM}),this.balancePromises={},this.providerHandlers=null}async createEthersConfig(e){if(!e.metadata)return;let r;function n(){if(r)return r;if(!(typeof window>"u")&&window.ethereum)return r=window.ethereum,r}async function s(){var o,a,c;try{const{createCoinbaseWalletSDK:u}=await Ls(async()=>{const{createCoinbaseWalletSDK:h}=await import("./index-DNb5aUB0.js");return{createCoinbaseWalletSDK:h}},__vite__mapDeps([36,1,2]));return typeof window>"u"?void 0:u({appName:(o=e==null?void 0:e.metadata)==null?void 0:o.name,appLogoUrl:(a=e==null?void 0:e.metadata)==null?void 0:a.icons[0],appChainIds:((c=e.networks)==null?void 0:c.map(h=>h.id))||[1,84532],preference:{options:e.coinbasePreference??"all"}}).getProvider()}catch(u){console.error("Failed to import Coinbase Wallet SDK:",u);return}}const i={metadata:e.metadata};if(e.enableInjected!==!1&&(i.injected=n()),e.enableCoinbase!==!1){const o=await s();o&&(i.coinbase=o)}return i.EIP6963=e.enableEIP6963!==!1,i}async signMessage(e){const{message:r,address:n,provider:s}=e;if(!s)throw new Error("Provider is undefined");try{return{signature:await Oa.signMessage(r,s,n)}}catch{throw new Error("EthersAdapter:signMessage - Sign message failed")}}async sendTransaction(e){var n;if(!e.provider)throw new Error("Provider is undefined");return{hash:await Oa.sendTransaction({value:e.value,to:e.to,data:e.data,gas:e.gas,gasPrice:e.gasPrice,address:e.address},e.provider,e.address,Number((n=e.caipNetwork)==null?void 0:n.id))}}async writeContract(e){var s;if(!e.provider)throw new Error("Provider is undefined");const{address:r}=Ro.parseCaipAddress(e.caipAddress);return{hash:await Oa.writeContract(e,e.provider,r,Number((s=e.caipNetwork)==null?void 0:s.id))}}async estimateGas(e){const{provider:r,caipNetwork:n,address:s}=e;if(!r)throw new Error("Provider is undefined");try{return{gas:await Oa.estimateGas({data:e.data,to:e.to,address:s},r,s,Number(n==null?void 0:n.id))}}catch{throw new Error("EthersAdapter:estimateGas - Estimate gas failed")}}async getEnsAddress(e){const{name:r,caipNetwork:n}=e;return n?{address:await Oa.getEnsAddress(r,n)}:{address:""}}parseUnits(e){return Oa.parseUnits(e.value,e.decimals)}formatUnits(e){return Oa.formatUnits(e.value,e.decimals)}async syncConnection(e){const{id:r,chainId:n}=e,s=this.connectors.find(c=>c.id===r),i=s==null?void 0:s.provider;if(!i)throw new Error("Provider not found");const o=await i.request({method:"eth_requestAccounts"}),a=await i.request({method:"eth_chainId"});if(this.listenProviderEvents(i),!o[0])throw new Error("No accounts found");if(!(s!=null&&s.type))throw new Error("Connector type not found");return{address:o[0],chainId:Number(a)||Number(n),provider:i,type:s.type,id:r}}async syncConnectors(e){var n;this.ethersConfig=await this.createEthersConfig(e),(n=this.ethersConfig)!=null&&n.EIP6963&&this.listenInjectedConnector(!0),Object.keys(this.ethersConfig||{}).filter(s=>s!=="metadata"&&s!=="EIP6963").forEach(s=>{var a,c;const i=s==="coinbase"?"coinbaseWalletSDK":s,o=s===le.CONNECTOR_ID.INJECTED;this.namespace&&this.addConnector({id:i,explorerId:to.ConnectorExplorerIds[i],imageUrl:(a=e==null?void 0:e.connectorImages)==null?void 0:a[i],name:to.ConnectorNamesMap[i]||"Unknown",imageId:to.ConnectorImageIds[i],type:to.ConnectorTypesMap[i]??"EXTERNAL",info:o?void 0:{rdns:i},chain:this.namespace,chains:[],provider:(c=this.ethersConfig)==null?void 0:c[s]})})}setUniversalProvider(e){this.addConnector(new u1({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}eip6963EventHandler(e){var r;if(e.detail){const{info:n,provider:s}=e.detail;if(!((r=this.connectors)==null?void 0:r.find(o=>o.name===(n==null?void 0:n.name)))){const o=to.ConnectorTypesMap[le.CONNECTOR_ID.EIP6963],a=(n==null?void 0:n.rdns)||(n==null?void 0:n.name)||(n==null?void 0:n.uuid);this.namespace&&a&&this.addConnector({id:a,type:o,imageUrl:n==null?void 0:n.icon,name:(n==null?void 0:n.name)||"Unknown",provider:s,info:n,chain:this.namespace,chains:[]})}}}listenInjectedConnector(e){if(typeof window<"u"&&e){const r=this.eip6963EventHandler.bind(this);window.addEventListener(Tt.EIP6963_ANNOUNCE_EVENT,r),window.dispatchEvent(new Event(Tt.EIP6963_REQUEST_EVENT))}}async connect({id:e,type:r,chainId:n}){var c;const s=this.connectors.find(u=>u.id===e),i=s==null?void 0:s.provider;if(!i)throw new Error("Provider not found");let o=[],a;if(r==="AUTH"){const{address:u}=await i.connect({chainId:n,preferredAccountType:(c=_e.state.preferredAccountTypes)==null?void 0:c.eip155});o=[u],this.emit("accountChanged",{address:o[0],chainId:Number(n)})}else{if(o=await i.request({method:"eth_requestAccounts"}),a=await i.request({method:"eth_chainId"}),a!==n){const u=this.getCaipNetworks().find(l=>l.id===n);if(!u)throw new Error("EthersAdapter:connect - could not find the caipNetwork to switch");try{await this.switchNetwork({caipNetwork:u,provider:i,providerType:r})}catch{throw new Error("EthersAdapter:connect - Switch network failed")}}this.emit("accountChanged",{address:o[0],chainId:Number(n)}),this.listenProviderEvents(i)}return{address:o[0],chainId:Number(n),provider:i,type:r,id:e}}async reconnect(e){var i;const{id:r,chainId:n}=e,s=this.connectors.find(o=>o.id===r);s&&s.type==="AUTH"&&n&&await s.provider.connect({chainId:n,preferredAccountType:(i=_e.state.preferredAccountTypes)==null?void 0:i.eip155})}async getAccounts(e){const r=this.connectors.find(i=>i.id===e.id),n=r==null?void 0:r.provider;if(!n||!r)throw new Error("Provider not found");if(e.id===le.CONNECTOR_ID.AUTH){const i=r.provider;if(!i.user)return{accounts:[]};const{accounts:o,address:a}=i.user;return Promise.resolve({accounts:(o||[{address:a,type:"eoa"}]).map(c=>De.createAccount("eip155",c.address,c.type))})}return{accounts:(await n.request({method:"eth_requestAccounts"})).map(i=>De.createAccount("eip155",i,"eoa"))}}async disconnect(e){if(!e.provider||!e.providerType)throw new Error("Provider or providerType not provided");switch(e.providerType){case"WALLET_CONNECT":e.provider.session&&e.provider.disconnect();break;case"AUTH":await e.provider.disconnect();break;case"ANNOUNCED":case"EXTERNAL":await this.revokeProviderPermissions(e.provider);break;default:throw new Error("Unsupported provider type")}}async getBalance(e){const r=e.address,n=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!r)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(n&&n.chainNamespace==="eip155"){const s=`${n.caipNetworkId}:${r}`,i=this.balancePromises[s];if(i)return i;const o=be.getNativeBalanceCacheForCaipAddress(s);if(o)return{balance:o.balance,symbol:o.symbol};const a=new D1(n.rpcUrls.default.http[0],{chainId:n.id,name:n.name});if(a)try{return this.balancePromises[s]=new Promise(async c=>{const u=await a.getBalance(r),l=f1(u);be.updateNativeBalanceCache({caipAddress:s,balance:l,symbol:n.nativeCurrency.symbol,timestamp:Date.now()}),c({balance:l,symbol:n.nativeCurrency.symbol})}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"}}catch{return{balance:"0.00",symbol:"ETH"}}}return{balance:"0.00",symbol:"ETH"}}async getProfile(e){if(e.chainId===1){const r=new al("mainnet"),n=await r.lookupAddress(e.address),s=await r.getAvatar(e.address);return{profileName:n||void 0,profileImage:s||void 0}}return{profileName:void 0,profileImage:void 0}}listenProviderEvents(e){const r=()=>{this.removeProviderListeners(e),this.emit("disconnect")},n=i=>{i.length>0?this.emit("accountChanged",{address:i[0]}):r()},s=i=>{const o=typeof i=="string"?Eh.hexStringToNumber(i):Number(i);this.emit("switchNetwork",{chainId:o})};e.on("disconnect",r),e.on("accountsChanged",n),e.on("chainChanged",s),this.providerHandlers={disconnect:r,accountsChanged:n,chainChanged:s}}removeProviderListeners(e){this.providerHandlers&&(e.removeListener("disconnect",this.providerHandlers.disconnect),e.removeListener("accountsChanged",this.providerHandlers.accountsChanged),e.removeListener("chainChanged",this.providerHandlers.chainChanged),this.providerHandlers=null)}async switchNetwork(e){var i,o;const{caipNetwork:r,provider:n,providerType:s}=e;if(s==="AUTH"){await super.switchNetwork(e);return}try{await n.request({method:"wallet_switchEthereumChain",params:[{chainId:Eh.numberToHexString(r.id)}]})}catch(a){if(a.code===ac.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||a.code===ac.ERROR_INVALID_CHAIN_ID||a.code===ac.ERROR_CODE_DEFAULT||((o=(i=a==null?void 0:a.data)==null?void 0:i.originalError)==null?void 0:o.code)===ac.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)await Eh.addEthereumChain(n,r);else if(s==="ANNOUNCED"||s==="EXTERNAL"||s==="INJECTED")throw new Error("Chain is not supported")}}getWalletConnectProvider(){var e;return(e=this.connectors.find(r=>r.type==="WALLET_CONNECT"))==null?void 0:e.provider}async revokeProviderPermissions(e){try{(await e.request({method:"wallet_getPermissions"})).find(s=>s.parentCapability==="eth_accounts")&&await e.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]})}catch(r){console.info("Could not revoke permissions from wallet. Disconnecting...",r)}}async getCapabilities(e){var s,i;const r=st.getProvider(le.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");const n=(i=(s=r.session)==null?void 0:s.sessionProperties)==null?void 0:i.capabilities;if(n){const a=Oa.parseWalletCapabilities(n)[e];if(a)return a}return await r.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){const r=st.getProvider(le.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){const r=st.getProvider(le.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_revokePermissions",params:[e]})}async walletGetAssets(e){const r=st.getProvider(le.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_getAssets",params:[e]})}}const D3="KINGS VAULT",Xie="COLLECT. WIN. DRIVE.",eoe="0.1.0",toe="87b00b5b-db10-431e-ab59-0751a12b6d3d",roe="https://kingsvault.io",noe="https://api.kingsvault.io",G_={address:"0x55d398326f99059fF775485246999027B3197955",decimals:18},soe="0xC77c92545edD8D22921Fac2C68E0F0084f14C153",ioe=[5,25,88,250],jpe=[5,35,150,500],zpe=[75e3,265e3,35e4],U3=1,B3=11155111,B1=56,$3=97,Em=B1;function ooe(t){switch(t){case U3:return"https://eth-mainnet.g.alchemy.com/v2/mcIqerGa_U7GsHt5G4XSjW_99veOp25s";case B3:return"https://eth-sepolia.g.alchemy.com/v2/0b_jUlh0jR71rsMUohyAxgFDN9Nq8Gsh";case B1:return"https://bsc-dataseed.nariox.org";case $3:return"https://data-seed-prebsc-1-s1.bnbchain.org:8545/";default:return}}function aoe(t){switch(t){case U3:return"wss://eth-mainnet.g.alchemy.com/v2/mcIqerGa_U7GsHt5G4XSjW_99veOp25s";case B3:return"wss://eth-sepolia.g.alchemy.com/v2/0b_jUlh0jR71rsMUohyAxgFDN9Nq8Gsh";case B1:return;case $3:return"https://data-seed-prebsc-1-s1.bnbchain.org:8546/";default:return}}const coe="35c1db7cbde70997e97b1eed713a76f0",L3=ite,uoe=[L3],loe={name:D3,description:Xie,url:"https://kingsvault.io/",icons:["https://avatars.githubusercontent.com/u/205055404"]},Hpe=fte({adapters:[new Zie],defaultNetwork:L3,networks:uoe,metadata:loe,privacyPolicyUrl:"https://kingsvault.io/#/privacy",termsConditionsUrl:"https://kingsvault.io/#/terms",projectId:coe,themeMode:"light",themeVariables:{},features:{onramp:!0,swaps:!0,allWallets:!0,email:!1,socials:!1,connectMethodsOrder:["wallet"],legalCheckbox:!0,history:!0,analytics:!0},defaultAccountTypes:{eip155:"eoa"},enableWalletConnect:!0,enableNetworkSwitch:!0,debug:!1,tokens:{[`eip155:${Em}`]:{address:G_.address}}});var jv={exports:{}},zv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dx;function hoe(){if(Dx)return zv;Dx=1;var t=c2();function e(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:e,n=t.useSyncExternalStore,s=t.useRef,i=t.useEffect,o=t.useMemo,a=t.useDebugValue;return zv.useSyncExternalStoreWithSelector=function(c,u,l,h,d){var f=s(null);if(f.current===null){var p={hasValue:!1,value:null};f.current=p}else p=f.current;f=o(function(){function m(S){if(!w){if(w=!0,v=S,S=h(S),d!==void 0&&p.hasValue){var C=p.value;if(d(C,S))return E=C}return E=S}if(C=E,r(v,S))return C;var T=h(S);return d!==void 0&&d(C,T)?(v=S,C):(v=S,E=T)}var w=!1,v,E,A=l===void 0?null:l;return[function(){return m(u())},A===null?void 0:function(){return m(A())}]},[u,l,h,d]);var g=n(c,f[0],f[1]);return i(function(){p.hasValue=!0,p.value=g},[g]),a(g),g},zv}var Ux;function doe(){return Ux||(Ux=1,jv.exports=hoe()),jv.exports}var foe=doe();function poe(t){t()}function goe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){poe(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=e={callback:r,next:null,prev:e};return s.prev?s.prev.next=s:t=s,function(){!n||t===null||(n=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}var Bx={notify(){},get:()=>[]};function moe(t,e){let r,n=Bx,s=0,i=!1;function o(g){l();const m=n.subscribe(g);let w=!1;return()=>{w||(w=!0,m(),h())}}function a(){n.notify()}function c(){p.onStateChange&&p.onStateChange()}function u(){return i}function l(){s++,r||(r=t.subscribe(c),n=goe())}function h(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=Bx)}function d(){i||(i=!0,l())}function f(){i&&(i=!1,h())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:c,isSubscribed:u,trySubscribe:d,tryUnsubscribe:f,getListeners:()=>n};return p}var yoe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",woe=yoe(),boe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",voe=boe(),Eoe=()=>woe||voe?J.useLayoutEffect:J.useEffect,_oe=Eoe(),Hv=Symbol.for("react-redux-context"),qv=typeof globalThis<"u"?globalThis:{};function Aoe(){if(!J.createContext)return{};const t=qv[Hv]??(qv[Hv]=new Map);let e=t.get(J.createContext);return e||(e=J.createContext(null),t.set(J.createContext,e)),e}var _c=Aoe();function Coe(t){const{children:e,context:r,serverState:n,store:s}=t,i=J.useMemo(()=>{const c=moe(s);return{store:s,subscription:c,getServerState:n?()=>n:void 0}},[s,n]),o=J.useMemo(()=>s.getState(),[s]);_oe(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const a=r||_c;return J.createElement(a.Provider,{value:i},e)}var qpe=Coe;function $1(t=_c){return function(){return J.useContext(t)}}var M3=$1();function F3(t=_c){const e=t===_c?M3:$1(t),r=()=>{const{store:n}=e();return n};return Object.assign(r,{withTypes:()=>r}),r}var Soe=F3();function Ioe(t=_c){const e=t===_c?Soe:F3(t),r=()=>e().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var Wpe=Ioe(),Toe=(t,e)=>t===e;function Noe(t=_c){const e=t===_c?M3:$1(t),r=(n,s={})=>{const{equalityFn:i=Toe}=typeof s=="function"?{equalityFn:s}:s,o=e(),{store:a,subscription:c,getServerState:u}=o;J.useRef(!0);const l=J.useCallback({[n.name](d){return n(d)}}[n.name],[n]),h=foe.useSyncExternalStoreWithSelector(c.addNestedSub,a.getState,u||a.getState,l,i);return J.useDebugValue(h),h};return Object.assign(r,{withTypes:()=>r}),r}var Vpe=Noe();function Hr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var xoe=typeof Symbol=="function"&&Symbol.observable||"@@observable",$x=xoe,Wv=()=>Math.random().toString(36).substring(7).split("").join("."),Ooe={INIT:`@@redux/INIT${Wv()}`,REPLACE:`@@redux/REPLACE${Wv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Wv()}`},Dw=Ooe;function L1(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function j3(t,e,r){if(typeof t!="function")throw new Error(Hr(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Hr(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Hr(1));return r(j3)(t,e)}let n=t,s=e,i=new Map,o=i,a=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((m,w)=>{o.set(w,m)}))}function l(){if(c)throw new Error(Hr(3));return s}function h(m){if(typeof m!="function")throw new Error(Hr(4));if(c)throw new Error(Hr(5));let w=!0;u();const v=a++;return o.set(v,m),function(){if(w){if(c)throw new Error(Hr(6));w=!1,u(),o.delete(v),i=null}}}function d(m){if(!L1(m))throw new Error(Hr(7));if(typeof m.type>"u")throw new Error(Hr(8));if(typeof m.type!="string")throw new Error(Hr(17));if(c)throw new Error(Hr(9));try{c=!0,s=n(s,m)}finally{c=!1}return(i=o).forEach(v=>{v()}),m}function f(m){if(typeof m!="function")throw new Error(Hr(10));n=m,d({type:Dw.REPLACE})}function p(){const m=h;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Hr(11));function v(){const A=w;A.next&&A.next(l())}return v(),{unsubscribe:m(v)}},[$x](){return this}}}return d({type:Dw.INIT}),{dispatch:d,subscribe:h,getState:l,replaceReducer:f,[$x]:p}}function Roe(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:Dw.INIT})>"u")throw new Error(Hr(12));if(typeof r(void 0,{type:Dw.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Hr(13))})}function z3(t){const e=Object.keys(t),r={};for(let i=0;i<e.length;i++){const o=e[i];typeof t[o]=="function"&&(r[o]=t[o])}const n=Object.keys(r);let s;try{Roe(r)}catch(i){s=i}return function(o={},a){if(s)throw s;let c=!1;const u={};for(let l=0;l<n.length;l++){const h=n[l],d=r[h],f=o[h],p=d(f,a);if(typeof p>"u")throw a&&a.type,new Error(Hr(14));u[h]=p,c=c||p!==f}return c=c||n.length!==Object.keys(o).length,c?u:o}}function Uw(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function Poe(...t){return e=>(r,n)=>{const s=e(r,n);let i=()=>{throw new Error(Hr(15))};const o={getState:s.getState,dispatch:(c,...u)=>i(c,...u)},a=t.map(c=>c(o));return i=Uw(...a)(s.dispatch),{...s,dispatch:i}}}function koe(t){return L1(t)&&"type"in t&&typeof t.type=="string"}var H3=Symbol.for("immer-nothing"),Lx=Symbol.for("immer-draftable"),As=Symbol.for("immer-state");function bi(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var kd=Object.getPrototypeOf;function cl(t){return!!t&&!!t[As]}function pa(t){var e;return t?q3(t)||Array.isArray(t)||!!t[Lx]||!!((e=t.constructor)!=null&&e[Lx])||q0(t)||W0(t):!1}var Doe=Object.prototype.constructor.toString();function q3(t){if(!t||typeof t!="object")return!1;const e=kd(t);if(e===null)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Doe}function Bw(t,e){H0(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function H0(t){const e=t[As];return e?e.type_:Array.isArray(t)?1:q0(t)?2:W0(t)?3:0}function K_(t,e){return H0(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function W3(t,e,r){const n=H0(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function Uoe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function q0(t){return t instanceof Map}function W0(t){return t instanceof Set}function Hc(t){return t.copy_||t.base_}function J_(t,e){if(q0(t))return new Map(t);if(W0(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=q3(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[As];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],a=n[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(kd(t),n)}else{const n=kd(t);if(n!==null&&r)return{...t};const s=Object.create(n);return Object.assign(s,t)}}function M1(t,e=!1){return V0(t)||cl(t)||!pa(t)||(H0(t)>1&&(t.set=t.add=t.clear=t.delete=Boe),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>M1(n,!0))),t}function Boe(){bi(2)}function V0(t){return Object.isFrozen(t)}var $oe={};function ul(t){const e=$oe[t];return e||bi(0,t),e}var Cg;function V3(){return Cg}function Loe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Mx(t,e){e&&(ul("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Y_(t){Q_(t),t.drafts_.forEach(Moe),t.drafts_=null}function Q_(t){t===Cg&&(Cg=t.parent_)}function Fx(t){return Cg=Loe(Cg,t)}function Moe(t){const e=t[As];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function jx(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[As].modified_&&(Y_(e),bi(4)),pa(t)&&(t=$w(e,t),e.parent_||Lw(e,t)),e.patches_&&ul("Patches").generateReplacementPatches_(r[As].base_,t,e.patches_,e.inversePatches_)):t=$w(e,r,[]),Y_(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==H3?t:void 0}function $w(t,e,r){if(V0(e))return e;const n=e[As];if(!n)return Bw(e,(s,i)=>zx(t,n,e,s,i,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Lw(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let i=s,o=!1;n.type_===3&&(i=new Set(s),s.clear(),o=!0),Bw(i,(a,c)=>zx(t,n,s,a,c,r,o)),Lw(t,s,!1),r&&t.patches_&&ul("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function zx(t,e,r,n,s,i,o){if(cl(s)){const a=i&&e&&e.type_!==3&&!K_(e.assigned_,n)?i.concat(n):void 0,c=$w(t,s,a);if(W3(r,n,c),cl(c))t.canAutoFreeze_=!1;else return}else o&&r.add(s);if(pa(s)&&!V0(s)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;$w(t,s),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Lw(t,s)}}function Lw(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&M1(e,r)}function Foe(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:V3(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=F1;r&&(s=[n],i=Sg);const{revoke:o,proxy:a}=Proxy.revocable(s,i);return n.draft_=a,n.revoke_=o,a}var F1={get(t,e){if(e===As)return t;const r=Hc(t);if(!K_(r,e))return joe(t,r,e);const n=r[e];return t.finalized_||!pa(n)?n:n===Vv(t.base_,e)?(Gv(t),t.copy_[e]=X_(n,t)):n},has(t,e){return e in Hc(t)},ownKeys(t){return Reflect.ownKeys(Hc(t))},set(t,e,r){const n=G3(Hc(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const s=Vv(Hc(t),e),i=s==null?void 0:s[As];if(i&&i.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(Uoe(r,s)&&(r!==void 0||K_(t.base_,e)))return!0;Gv(t),Z_(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Vv(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Gv(t),Z_(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Hc(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){bi(11)},getPrototypeOf(t){return kd(t.base_)},setPrototypeOf(){bi(12)}},Sg={};Bw(F1,(t,e)=>{Sg[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Sg.deleteProperty=function(t,e){return Sg.set.call(this,t,e,void 0)};Sg.set=function(t,e,r){return F1.set.call(this,t[0],e,r,t[0])};function Vv(t,e){const r=t[As];return(r?Hc(r):t)[e]}function joe(t,e,r){var s;const n=G3(e,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(t.draft_):void 0}function G3(t,e){if(!(e in t))return;let r=kd(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=kd(r)}}function Z_(t){t.modified_||(t.modified_=!0,t.parent_&&Z_(t.parent_))}function Gv(t){t.copy_||(t.copy_=J_(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var zoe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const i=r;r=e;const o=this;return function(c=i,...u){return o.produce(c,l=>r.call(this,l,...u))}}typeof r!="function"&&bi(6),n!==void 0&&typeof n!="function"&&bi(7);let s;if(pa(e)){const i=Fx(this),o=X_(e,void 0);let a=!0;try{s=r(o),a=!1}finally{a?Y_(i):Q_(i)}return Mx(i,n),jx(s,i)}else if(!e||typeof e!="object"){if(s=r(e),s===void 0&&(s=e),s===H3&&(s=void 0),this.autoFreeze_&&M1(s,!0),n){const i=[],o=[];ul("Patches").generateReplacementPatches_(e,s,i,o),n(i,o)}return s}else bi(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,c=>e(c,...a));let n,s;return[this.produce(e,r,(o,a)=>{n=o,s=a}),n,s]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){pa(t)||bi(8),cl(t)&&(t=Hoe(t));const e=Fx(this),r=X_(t,void 0);return r[As].isManual_=!0,Q_(e),r}finishDraft(t,e){const r=t&&t[As];(!r||!r.isManual_)&&bi(9);const{scope_:n}=r;return Mx(n,e),jx(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const s=e[r];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}r>-1&&(e=e.slice(r+1));const n=ul("Patches").applyPatches_;return cl(t)?n(t,e):this.produce(t,s=>n(s,e))}};function X_(t,e){const r=q0(t)?ul("MapSet").proxyMap_(t,e):W0(t)?ul("MapSet").proxySet_(t,e):Foe(t,e);return(e?e.scope_:V3()).drafts_.push(r),r}function Hoe(t){return cl(t)||bi(10,t),K3(t)}function K3(t){if(!pa(t)||V0(t))return t;const e=t[As];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=J_(t,e.scope_.immer_.useStrictShallowCopy_)}else r=J_(t,!0);return Bw(r,(n,s)=>{W3(r,n,K3(s))}),e&&(e.finalized_=!1),r}var Cs=new zoe,J3=Cs.produce;Cs.produceWithPatches.bind(Cs);Cs.setAutoFreeze.bind(Cs);Cs.setUseStrictShallowCopy.bind(Cs);Cs.applyPatches.bind(Cs);Cs.createDraft.bind(Cs);Cs.finishDraft.bind(Cs);function Y3(t){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,t):s(i)}var qoe=Y3(),Woe=Y3,Voe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Uw:Uw.apply(null,arguments)};function Hx(t,e){function r(...n){if(e){let s=e(...n);if(!s)throw new Error(ca(0));return{type:t,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>koe(n)&&n.type===t,r}var Q3=class Yf extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Yf.prototype)}static get[Symbol.species](){return Yf}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Yf(...e[0].concat(this)):new Yf(...e.concat(this))}};function qx(t){return pa(t)?J3(t,()=>{}):t}function dy(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function Goe(t){return typeof t=="boolean"}var Koe=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=e??{};let o=new Q3;return r&&(Goe(r)?o.push(qoe):o.push(Woe(r.extraArgument))),o},Joe="RTK_autoBatch",Wx=t=>e=>{setTimeout(e,t)},Yoe=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let s=!0,i=!1,o=!1;const a=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Wx(10):t.type==="callback"?t.queueNotification:Wx(t.timeout),u=()=>{o=!1,i&&(i=!1,a.forEach(l=>l()))};return Object.assign({},n,{subscribe(l){const h=()=>s&&l(),d=n.subscribe(h);return a.add(l),()=>{d(),a.delete(l)}},dispatch(l){var h;try{return s=!((h=l==null?void 0:l.meta)!=null&&h[Joe]),i=!s,i&&(o||(o=!0,c(u))),n.dispatch(l)}finally{s=!0}}})},Qoe=t=>function(r){const{autoBatch:n=!0}=r??{};let s=new Q3(t);return n&&s.push(Yoe(typeof n=="object"?n:void 0)),s};function Zoe(t){const e=Koe(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:o=void 0}=t||{};let a;if(typeof r=="function")a=r;else if(L1(r))a=z3(r);else throw new Error(ca(1));let c;typeof n=="function"?c=n(e):c=e();let u=Uw;s&&(u=Voe({trace:!1,...typeof s=="object"&&s}));const l=Poe(...c),h=Qoe(l);let d=typeof o=="function"?o(h):h();const f=u(...d);return j3(a,i,f)}function Z3(t){const e={},r=[];let n;const s={addCase(i,o){const a=typeof i=="string"?i:i.type;if(!a)throw new Error(ca(28));if(a in e)throw new Error(ca(29));return e[a]=o,s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return n=i,s}};return t(s),[e,r,n]}function Xoe(t){return typeof t=="function"}function eae(t,e){let[r,n,s]=Z3(e),i;if(Xoe(t))i=()=>qx(t());else{const a=qx(t);i=()=>a}function o(a=i(),c){let u=[r[c.type],...n.filter(({matcher:l})=>l(c)).map(({reducer:l})=>l)];return u.filter(l=>!!l).length===0&&(u=[s]),u.reduce((l,h)=>{if(h)if(cl(l)){const f=h(l,c);return f===void 0?l:f}else{if(pa(l))return J3(l,d=>h(d,c));{const d=h(l,c);if(d===void 0){if(l===null)return l;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return l},a)}return o.getInitialState=i,o}var tae=Symbol.for("rtk-slice-createasyncthunk");function rae(t,e){return`${t}/${e}`}function nae({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[tae];return function(s){const{name:i,reducerPath:o=i}=s;if(!i)throw new Error(ca(11));const a=(typeof s.reducers=="function"?s.reducers(iae()):s.reducers)||{},c=Object.keys(a),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},l={addCase(A,S){const C=typeof A=="string"?A:A.type;if(!C)throw new Error(ca(12));if(C in u.sliceCaseReducersByType)throw new Error(ca(13));return u.sliceCaseReducersByType[C]=S,l},addMatcher(A,S){return u.sliceMatchers.push({matcher:A,reducer:S}),l},exposeAction(A,S){return u.actionCreators[A]=S,l},exposeCaseReducer(A,S){return u.sliceCaseReducersByName[A]=S,l}};c.forEach(A=>{const S=a[A],C={reducerName:A,type:rae(i,A),createNotation:typeof s.reducers=="function"};aae(S)?uae(C,S,l,e):oae(C,S,l)});function h(){const[A={},S=[],C=void 0]=typeof s.extraReducers=="function"?Z3(s.extraReducers):[s.extraReducers],T={...A,...u.sliceCaseReducersByType};return eae(s.initialState,O=>{for(let P in T)O.addCase(P,T[P]);for(let P of u.sliceMatchers)O.addMatcher(P.matcher,P.reducer);for(let P of S)O.addMatcher(P.matcher,P.reducer);C&&O.addDefaultCase(C)})}const d=A=>A,f=new Map,p=new WeakMap;let g;function m(A,S){return g||(g=h()),g(A,S)}function w(){return g||(g=h()),g.getInitialState()}function v(A,S=!1){function C(O){let P=O[A];return typeof P>"u"&&S&&(P=dy(p,C,w)),P}function T(O=d){const P=dy(f,S,()=>new WeakMap);return dy(P,O,()=>{const B={};for(const[L,Q]of Object.entries(s.selectors??{}))B[L]=sae(Q,O,()=>dy(p,O,w),S);return B})}return{reducerPath:A,getSelectors:T,get selectors(){return T(C)},selectSlice:C}}const E={name:i,reducer:m,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:w,...v(o),injectInto(A,{reducerPath:S,...C}={}){const T=S??o;return A.inject({reducerPath:T,reducer:m},C),{...E,...v(T,!0)}}};return E}}function sae(t,e,r,n){function s(i,...o){let a=e(i);return typeof a>"u"&&n&&(a=r()),t(a,...o)}return s.unwrapped=t,s}var El=nae();function iae(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function oae({type:t,reducerName:e,createNotation:r},n,s){let i,o;if("reducer"in n){if(r&&!cae(n))throw new Error(ca(17));i=n.reducer,o=n.prepare}else i=n;s.addCase(t,i).exposeCaseReducer(e,i).exposeAction(e,o?Hx(t,o):Hx(t))}function aae(t){return t._reducerDefinitionType==="asyncThunk"}function cae(t){return t._reducerDefinitionType==="reducerWithPrepare"}function uae({type:t,reducerName:e},r,n,s){if(!s)throw new Error(ca(18));const{payloadCreator:i,fulfilled:o,pending:a,rejected:c,settled:u,options:l}=r,h=s(t,i,l);n.exposeAction(e,h),o&&n.addCase(h.fulfilled,o),a&&n.addCase(h.pending,a),c&&n.addCase(h.rejected,c),u&&n.addMatcher(h.settled,u),n.exposeCaseReducer(e,{fulfilled:o||fy,pending:a||fy,rejected:c||fy,settled:u||fy})}function fy(){}function ca(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Qf={exports:{}},lae=Qf.exports,Vx;function hae(){return Vx||(Vx=1,function(t,e){(function(r,n){n(e)})(lae,function(r){function n(U,j){U.super_=j,U.prototype=Object.create(j.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}})}function s(U,j){Object.defineProperty(this,"kind",{value:U,enumerable:!0}),j&&j.length&&Object.defineProperty(this,"path",{value:j,enumerable:!0})}function i(U,j,F){i.super_.call(this,"E",U),Object.defineProperty(this,"lhs",{value:j,enumerable:!0}),Object.defineProperty(this,"rhs",{value:F,enumerable:!0})}function o(U,j){o.super_.call(this,"N",U),Object.defineProperty(this,"rhs",{value:j,enumerable:!0})}function a(U,j){a.super_.call(this,"D",U),Object.defineProperty(this,"lhs",{value:j,enumerable:!0})}function c(U,j,F){c.super_.call(this,"A",U),Object.defineProperty(this,"index",{value:j,enumerable:!0}),Object.defineProperty(this,"item",{value:F,enumerable:!0})}function u(U,j,F){var W=U.slice(j+1||U.length);return U.length=j<0?U.length+j:j,U.push.apply(U,W),U}function l(U){var j=typeof U>"u"?"undefined":I(U);return j!=="object"?j:U===Math?"math":U===null?"null":Array.isArray(U)?"array":Object.prototype.toString.call(U)==="[object Date]"?"date":typeof U.toString=="function"&&/^\/.*\//.test(U.toString())?"regexp":"object"}function h(U,j,F,W,te,ae,fe){te=te||[],fe=fe||[];var ge=te.slice(0);if(typeof ae<"u"){if(W){if(typeof W=="function"&&W(ge,ae))return;if((typeof W>"u"?"undefined":I(W))==="object"){if(W.prefilter&&W.prefilter(ge,ae))return;if(W.normalize){var Ie=W.normalize(ge,ae,U,j);Ie&&(U=Ie[0],j=Ie[1])}}}ge.push(ae)}l(U)==="regexp"&&l(j)==="regexp"&&(U=U.toString(),j=j.toString());var Je=typeof U>"u"?"undefined":I(U),ze=typeof j>"u"?"undefined":I(j),Le=Je!=="undefined"||fe&&fe[fe.length-1].lhs&&fe[fe.length-1].lhs.hasOwnProperty(ae),Ke=ze!=="undefined"||fe&&fe[fe.length-1].rhs&&fe[fe.length-1].rhs.hasOwnProperty(ae);if(!Le&&Ke)F(new o(ge,j));else if(!Ke&&Le)F(new a(ge,U));else if(l(U)!==l(j))F(new i(ge,U,j));else if(l(U)==="date"&&U-j!==0)F(new i(ge,U,j));else if(Je==="object"&&U!==null&&j!==null)if(fe.filter(function(gt){return gt.lhs===U}).length)U!==j&&F(new i(ge,U,j));else{if(fe.push({lhs:U,rhs:j}),Array.isArray(U)){var Pe;for(U.length,Pe=0;Pe<U.length;Pe++)Pe>=j.length?F(new c(ge,Pe,new a(void 0,U[Pe]))):h(U[Pe],j[Pe],F,W,ge,Pe,fe);for(;Pe<j.length;)F(new c(ge,Pe,new o(void 0,j[Pe++])))}else{var hr=Object.keys(U),nr=Object.keys(j);hr.forEach(function(gt,ki){var Di=nr.indexOf(gt);Di>=0?(h(U[gt],j[gt],F,W,ge,gt,fe),nr=u(nr,Di)):h(U[gt],void 0,F,W,ge,gt,fe)}),nr.forEach(function(gt){h(void 0,j[gt],F,W,ge,gt,fe)})}fe.length=fe.length-1}else U!==j&&(Je==="number"&&isNaN(U)&&isNaN(j)||F(new i(ge,U,j)))}function d(U,j,F,W){return W=W||[],h(U,j,function(te){te&&W.push(te)},F),W.length?W:void 0}function f(U,j,F){if(F.path&&F.path.length){var W,te=U[j],ae=F.path.length-1;for(W=0;W<ae;W++)te=te[F.path[W]];switch(F.kind){case"A":f(te[F.path[W]],F.index,F.item);break;case"D":delete te[F.path[W]];break;case"E":case"N":te[F.path[W]]=F.rhs}}else switch(F.kind){case"A":f(U[j],F.index,F.item);break;case"D":U=u(U,j);break;case"E":case"N":U[j]=F.rhs}return U}function p(U,j,F){if(U&&j&&F&&F.kind){for(var W=U,te=-1,ae=F.path?F.path.length-1:0;++te<ae;)typeof W[F.path[te]]>"u"&&(W[F.path[te]]=typeof F.path[te]=="number"?[]:{}),W=W[F.path[te]];switch(F.kind){case"A":f(F.path?W[F.path[te]]:W,F.index,F.item);break;case"D":delete W[F.path[te]];break;case"E":case"N":W[F.path[te]]=F.rhs}}}function g(U,j,F){if(F.path&&F.path.length){var W,te=U[j],ae=F.path.length-1;for(W=0;W<ae;W++)te=te[F.path[W]];switch(F.kind){case"A":g(te[F.path[W]],F.index,F.item);break;case"D":te[F.path[W]]=F.lhs;break;case"E":te[F.path[W]]=F.lhs;break;case"N":delete te[F.path[W]]}}else switch(F.kind){case"A":g(U[j],F.index,F.item);break;case"D":U[j]=F.lhs;break;case"E":U[j]=F.lhs;break;case"N":U=u(U,j)}return U}function m(U,j,F){if(U&&j&&F&&F.kind){var W,te,ae=U;for(te=F.path.length-1,W=0;W<te;W++)typeof ae[F.path[W]]>"u"&&(ae[F.path[W]]={}),ae=ae[F.path[W]];switch(F.kind){case"A":g(ae[F.path[W]],F.index,F.item);break;case"D":ae[F.path[W]]=F.lhs;break;case"E":ae[F.path[W]]=F.lhs;break;case"N":delete ae[F.path[W]]}}}function w(U,j,F){if(U&&j){var W=function(te){F&&!F(U,j,te)||p(U,j,te)};h(U,j,W)}}function v(U){return"color: "+G[U].color+"; font-weight: bold"}function E(U){var j=U.kind,F=U.path,W=U.lhs,te=U.rhs,ae=U.index,fe=U.item;switch(j){case"E":return[F.join("."),W,"→",te];case"N":return[F.join("."),te];case"D":return[F.join(".")];case"A":return[F.join(".")+"["+ae+"]",fe];default:return[]}}function A(U,j,F,W){var te=d(U,j);try{W?F.groupCollapsed("diff"):F.group("diff")}catch{F.log("diff")}te?te.forEach(function(ae){var fe=ae.kind,ge=E(ae);F.log.apply(F,["%c "+G[fe].text,v(fe)].concat(x(ge)))}):F.log("—— no diff ——");try{F.groupEnd()}catch{F.log("—— diff end —— ")}}function S(U,j,F,W){switch(typeof U>"u"?"undefined":I(U)){case"object":return typeof U[W]=="function"?U[W].apply(U,x(F)):U[W];case"function":return U(j);default:return U}}function C(U){var j=U.timestamp,F=U.duration;return function(W,te,ae){var fe=["action"];return fe.push("%c"+String(W.type)),j&&fe.push("%c@ "+te),F&&fe.push("%c(in "+ae.toFixed(2)+" ms)"),fe.join(" ")}}function T(U,j){var F=j.logger,W=j.actionTransformer,te=j.titleFormatter,ae=te===void 0?C(j):te,fe=j.collapsed,ge=j.colors,Ie=j.level,Je=j.diff,ze=typeof j.titleFormatter>"u";U.forEach(function(Le,Ke){var Pe=Le.started,hr=Le.startedTime,nr=Le.action,gt=Le.prevState,ki=Le.error,Di=Le.took,kn=Le.nextState,vo=U[Ke+1];vo&&(kn=vo.prevState,Di=vo.started-Pe);var gn=W(nr),va=typeof fe=="function"?fe(function(){return kn},nr,Le):fe,Eo=se(hr),mn=ge.title?"color: "+ge.title(gn)+";":"",Os=["color: gray; font-weight: lighter;"];Os.push(mn),j.timestamp&&Os.push("color: gray; font-weight: lighter;"),j.duration&&Os.push("color: gray; font-weight: lighter;");var _o=ae(gn,Eo,Di);try{va?ge.title&&ze?F.groupCollapsed.apply(F,["%c "+_o].concat(Os)):F.groupCollapsed(_o):ge.title&&ze?F.group.apply(F,["%c "+_o].concat(Os)):F.group(_o)}catch{F.log(_o)}var Dn=S(Ie,gn,[gt],"prevState"),Pc=S(Ie,gn,[gn],"action"),N=S(Ie,gn,[ki,gt],"error"),y=S(Ie,gn,[kn],"nextState");if(Dn)if(ge.prevState){var b="color: "+ge.prevState(gt)+"; font-weight: bold";F[Dn]("%c prev state",b,gt)}else F[Dn]("prev state",gt);if(Pc)if(ge.action){var D="color: "+ge.action(gn)+"; font-weight: bold";F[Pc]("%c action    ",D,gn)}else F[Pc]("action    ",gn);if(ki&&N)if(ge.error){var H="color: "+ge.error(ki,gt)+"; font-weight: bold;";F[N]("%c error     ",H,ki)}else F[N]("error     ",ki);if(y)if(ge.nextState){var X="color: "+ge.nextState(kn)+"; font-weight: bold";F[y]("%c next state",X,kn)}else F[y]("next state",kn);Je&&A(gt,kn,F,va);try{F.groupEnd()}catch{F.log("—— log end ——")}})}function O(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},j=Object.assign({},q,U),F=j.logger,W=j.stateTransformer,te=j.errorTransformer,ae=j.predicate,fe=j.logErrors,ge=j.diffPredicate;if(typeof F>"u")return function(){return function(Je){return function(ze){return Je(ze)}}};if(U.getState&&U.dispatch)return console.error(`[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:
// Logger with default options
import { logger } from 'redux-logger'
const store = createStore(
  reducer,
  applyMiddleware(logger)
)
// Or you can create your own logger with custom options http://bit.ly/redux-logger-options
import createLogger from 'redux-logger'
const logger = createLogger({
  // ...options
});
const store = createStore(
  reducer,
  applyMiddleware(logger)
)
`),function(){return function(Je){return function(ze){return Je(ze)}}};var Ie=[];return function(Je){var ze=Je.getState;return function(Le){return function(Ke){if(typeof ae=="function"&&!ae(ze,Ke))return Le(Ke);var Pe={};Ie.push(Pe),Pe.started=V.now(),Pe.startedTime=new Date,Pe.prevState=W(ze()),Pe.action=Ke;var hr=void 0;if(fe)try{hr=Le(Ke)}catch(gt){Pe.error=te(gt)}else hr=Le(Ke);Pe.took=V.now()-Pe.started,Pe.nextState=W(ze());var nr=j.diff&&typeof ge=="function"?ge(ze,Ke):j.diff;if(T(Ie,Object.assign({},j,{diff:nr})),Ie.length=0,Pe.error)throw Pe.error;return hr}}}}var P,B,L=function(U,j){return new Array(j+1).join(U)},Q=function(U,j){return L("0",j-U.toString().length)+U},se=function(U){return Q(U.getHours(),2)+":"+Q(U.getMinutes(),2)+":"+Q(U.getSeconds(),2)+"."+Q(U.getMilliseconds(),3)},V=typeof performance<"u"&&performance!==null&&typeof performance.now=="function"?performance:Date,I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},x=function(U){if(Array.isArray(U)){for(var j=0,F=Array(U.length);j<U.length;j++)F[j]=U[j];return F}return Array.from(U)},M=[];P=(typeof Wn>"u"?"undefined":I(Wn))==="object"&&Wn?Wn:typeof window<"u"?window:{},B=P.DeepDiff,B&&M.push(function(){typeof B<"u"&&P.DeepDiff===d&&(P.DeepDiff=B,B=void 0)}),n(i,s),n(o,s),n(a,s),n(c,s),Object.defineProperties(d,{diff:{value:d,enumerable:!0},observableDiff:{value:h,enumerable:!0},applyDiff:{value:w,enumerable:!0},applyChange:{value:p,enumerable:!0},revertChange:{value:m,enumerable:!0},isConflict:{value:function(){return typeof B<"u"},enumerable:!0},noConflict:{value:function(){return M&&(M.forEach(function(U){U()}),M=null),d},enumerable:!0}});var G={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},q={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(U){return U},actionTransformer:function(U){return U},errorTransformer:function(U){return U},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},Y=function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},j=U.dispatch,F=U.getState;return typeof j=="function"||typeof F=="function"?O()({dispatch:j,getState:F}):void console.error(`
[redux-logger v3] BREAKING CHANGE
[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.
[redux-logger v3] Change
[redux-logger v3] import createLogger from 'redux-logger'
[redux-logger v3] to
[redux-logger v3] import { createLogger } from 'redux-logger'
`)};r.defaults=q,r.createLogger=O,r.logger=Y,r.default=Y,Object.defineProperty(r,"__esModule",{value:!0})})}(Qf,Qf.exports)),Qf.exports}hae();function X3(t){var e=function(n){var s=n.dispatch,i=n.getState;return function(o){return function(a){return typeof a=="function"?a(s,i,t):o(a)}}};return e}var eU=X3();eU.withExtraArgument=X3;var Oi=function(e){return"@@redux-saga/"+e},dae=Oi("CANCEL_PROMISE"),tU=Oi("CHANNEL_END"),rU=Oi("IO"),Gx=Oi("MATCH"),nU=Oi("MULTICAST"),sU=Oi("SAGA_ACTION"),fae=Oi("SELF_CANCELLATION"),pae=Oi("TASK"),_h=Oi("TASK_CANCEL"),iU=Oi("TERMINATE"),gae=Oi("LOCATION");function Mw(){return Mw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mw.apply(null,arguments)}function mae(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var oU=function(e){return e==null},Hy=function(e){return e!=null},Ss=function(e){return typeof e=="function"},j1=function(e){return typeof e=="string"},Oc=Array.isArray,G0=function(e){return e&&Ss(e.then)},z1=function(e){return e&&Ss(e.next)&&Ss(e.throw)},Kx=function t(e){return e&&(j1(e)||cU(e)||Ss(e)||Oc(e)&&e.every(t))},aU=function(e){return e&&Ss(e.take)&&Ss(e.close)},yae=function(e){return Ss(e)&&e.hasOwnProperty("toString")},cU=function(e){return!!e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype},wae=function(e){return aU(e)&&e[nU]},bae=function(e){return function(){return e}},vae=bae(!0),En=function(){},uU=function(e){return e},H1=function(e,r){Mw(e,r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(r).forEach(function(n){e[n]=r[n]})},Eae=function(e,r){var n;return(n=[]).concat.apply(n,r.map(e))};function K0(t,e){var r=t.indexOf(e);r>=0&&t.splice(r,1)}function _ae(t){var e=!1;return function(){e||(e=!0,t())}}var Aae=function(e){throw e},Cae=function(e){return{value:e,done:!0}};function Jx(t,e,r){e===void 0&&(e=Aae),r===void 0&&(r="iterator");var n={meta:{name:r},next:t,throw:e,return:Cae,isSagaIterator:!0};return typeof Symbol<"u"&&(n[Symbol.iterator]=function(){return n}),n}function Sae(t,e){var r=e.sagaStack;console.error(t),console.error(r)}var lU=function(e){return Array.apply(null,new Array(e))},Iae=function(e){return function(r){return e(Object.defineProperty(r,sU,{value:!0}))}},hU=function(e){return e===iU},dU=function(e){return e===_h},fU=function(e){return hU(e)||dU(e)};function pU(t,e){var r=Object.keys(t),n=r.length,s=0,i,o=Oc(t)?lU(n):{},a={};function c(){s===n&&(i=!0,e(o))}return r.forEach(function(u){var l=function(d,f){i||(f||fU(d)?(e.cancel(),e(d,f)):(o[u]=d,s++,c()))};l.cancel=En,a[u]=l}),e.cancel=function(){i||(i=!0,r.forEach(function(u){return a[u].cancel()}))},a}function q1(t){return{name:t.name||"anonymous",location:gU(t)}}function gU(t){return t[gae]}function Tae(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(n){return n}:e.length===1?e[0]:e.reduce(function(n,s){return function(){return n(s.apply(void 0,arguments))}})}var Nae="Channel's Buffer overflow!",xae=1,Oae=3,mU=4;function Rae(t,e){t===void 0&&(t=10);var r=new Array(t),n=0,s=0,i=0,o=function(l){r[s]=l,s=(s+1)%t,n++},a=function(){if(n!=0){var l=r[i];return r[i]=null,n--,i=(i+1)%t,l}},c=function(){for(var l=[];n;)l.push(a());return l};return{isEmpty:function(){return n==0},put:function(l){if(n<t)o(l);else{var h;switch(e){case xae:throw new Error(Nae);case Oae:r[s]=l,s=(s+1)%t,i=s;break;case mU:h=2*t,r=c(),n=r.length,s=r.length,i=0,r.length=h,t=h,o(l);break}}},take:a,flush:c}}var Pae=function(e){return Rae(e,mU)},qy="TAKE",yU="PUT",wU="ALL",kae="RACE",bU="CALL",Dae="CPS",vU="FORK",Uae="JOIN",Bae="CANCEL",EU="SELECT",$ae="ACTION_CHANNEL",Lae="CANCELLED",Mae="FLUSH",Fae="GET_CONTEXT",jae="SET_CONTEXT",mc=function(e,r){var n;return n={},n[rU]=!0,n.combinator=!1,n.type=e,n.payload=r,n};function zae(t,e){if(t===void 0&&(t="*"),Kx(t))return Hy(e)&&console.warn("take(pattern) takes one argument but two were provided. Consider passing an array for listening to several action types"),mc(qy,{pattern:t});if(wae(t)&&Hy(e)&&Kx(e))return mc(qy,{channel:t,pattern:e});if(aU(t))return Hy(e)&&console.warn("take(channel) takes one argument but two were provided. Second argument is ignored."),mc(qy,{channel:t})}function qr(t,e){return oU(e)&&(e=t,t=void 0),mc(yU,{channel:t,action:e})}function Hae(t){var e=mc(wU,t);return e.combinator=!0,e}function _U(t,e){var r=null,n;return Ss(t)?n=t:(Oc(t)?(r=t[0],n=t[1]):(r=t.context,n=t.fn),r&&j1(n)&&Ss(r[n])&&(n=r[n])),{context:r,fn:n,args:e}}function AU(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return mc(bU,_U(t,r))}function qc(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return mc(vU,_U(t,r))}function io(t){t===void 0&&(t=uU);for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return mc(EU,{selector:t,args:r})}function qae(){var t={};return t.promise=new Promise(function(e,r){t.resolve=e,t.reject=r}),t}var CU=[],J0=0;function Wae(t){try{W1(),t()}finally{TU()}}function SU(t){CU.push(t),J0||(W1(),NU())}function IU(t){try{return W1(),t()}finally{NU()}}function W1(){J0++}function TU(){J0--}function NU(){TU();for(var t;!J0&&(t=CU.shift())!==void 0;)Wae(t)}var Vae=function(e){return function(r){return e.some(function(n){return V1(n)(r)})}},Gae=function(e){return function(r){return e(r)}},Yx=function(e){return function(r){return r.type===String(e)}},Kae=function(e){return function(r){return r.type===e}},xU=function(){return vae};function V1(t){var e=t==="*"?xU:j1(t)?Yx:Oc(t)?Vae:yae(t)?Yx:Ss(t)?Gae:cU(t)?Kae:null;if(e===null)throw new Error("invalid pattern: "+t);return e(t)}var mp={type:tU},G1=function(e){return e&&e.type===tU};function Jae(t){t===void 0&&(t=Pae());var e=!1,r=[];function n(a){if(!e){if(r.length===0)return t.put(a);var c=r.shift();c(a)}}function s(a){e&&t.isEmpty()?a(mp):t.isEmpty()?(r.push(a),a.cancel=function(){K0(r,a)}):a(t.take())}function i(a){if(e&&t.isEmpty()){a(mp);return}a(t.flush())}function o(){if(!e){e=!0;var a=r;r=[];for(var c=0,u=a.length;c<u;c++){var l=a[c];l(mp)}}}return{take:s,put:n,flush:i,close:o}}function Yae(){var t,e=!1,r=[],n=r,s=function(){n===r&&(n=r.slice())},i=function(){e=!0;var a=r=n;n=[],a.forEach(function(c){c(mp)})};return t={},t[nU]=!0,t.put=function(a){if(!e){if(G1(a)){i();return}for(var c=r=n,u=0,l=c.length;u<l;u++){var h=c[u];h[Gx](a)&&(h.cancel(),h(a))}}},t.take=function(a,c){if(c===void 0&&(c=xU),e){a(mp);return}a[Gx]=c,s(),n.push(a),a.cancel=_ae(function(){s(),K0(n,a)})},t.close=i,t}function OU(){var t=Yae(),e=t.put;return t.put=function(r){if(r[sU]){e(r);return}SU(function(){e(r)})},t}var Qc=0,ea=1,Wy=2,RU=3;function K1(t,e){var r=t[dae];Ss(r)&&(e.cancel=r),t.then(e,function(n){e(n,!0)})}var _m=0,PU=function(){return++_m},Mr;function Qae(t,e){return t.isSagaIterator?{name:t.meta.name}:q1(e)}function Zae(t){var e=t.context,r=t.fn,n=t.args;try{var s=r.apply(e,n);if(z1(s))return s;var i=!1,o=function(c){return i?{value:c,done:!0}:(i=!0,{value:s,done:!G0(s)})};return Jx(o)}catch(a){return Jx(function(){throw a})}}function Xae(t,e,r){var n=e.channel,s=e.action,i=e.resolve;SU(function(){var o;try{o=(n?n.put:t.dispatch)(s)}catch(a){r(a,!0);return}i&&G0(o)?K1(o,r):r(o)})}function ece(t,e,r){var n=e.channel,s=n===void 0?t.channel:n,i=e.pattern,o=e.maybe,a=function(u){if(u instanceof Error){r(u,!0);return}if(G1(u)&&!o){r(iU);return}r(u)};try{s.take(a,Hy(i)?V1(i):null)}catch(c){r(c,!0);return}r.cancel=a.cancel}function tce(t,e,r,n){var s=e.context,i=e.fn,o=e.args,a=n.task;try{var c=i.apply(s,o);if(G0(c)){K1(c,r);return}if(z1(c)){Y0(t,c,a.context,_m,q1(i),!1,r);return}r(c)}catch(u){r(u,!0)}}function rce(t,e,r){var n=e.context,s=e.fn,i=e.args;try{var o=function(c,u){oU(c)?r(u):r(c,!0)};s.apply(n,i.concat(o)),o.cancel&&(r.cancel=o.cancel)}catch(a){r(a,!0)}}function nce(t,e,r,n){var s=e.context,i=e.fn,o=e.args,a=e.detached,c=n.task,u=Zae({context:s,fn:i,args:o}),l=Qae(u,i);IU(function(){var h=Y0(t,u,c.context,_m,l,a,void 0);a?r(h):h.isRunning()?(c.queue.addTask(h),r(h)):h.isAborted()?c.queue.abort(h.error()):r(h)})}function sce(t,e,r,n){var s=n.task,i=function(c,u){if(c.isRunning()){var l={task:s,cb:u};u.cancel=function(){c.isRunning()&&K0(c.joiners,l)},c.joiners.push(l)}else c.isAborted()?u(c.error(),!0):u(c.result())};if(Oc(e)){if(e.length===0){r([]);return}var o=pU(e,r);e.forEach(function(a,c){i(a,o[c])})}else i(e,r)}function Kv(t){t.isRunning()&&t.cancel()}function ice(t,e,r,n){var s=n.task;e===fae?Kv(s):Oc(e)?e.forEach(Kv):Kv(e),r()}function oce(t,e,r,n){var s=n.digestEffect,i=_m,o=Object.keys(e);if(o.length===0){r(Oc(e)?[]:{});return}var a=pU(e,r);o.forEach(function(c){s(e[c],i,a[c],c)})}function ace(t,e,r,n){var s=n.digestEffect,i=_m,o=Object.keys(e),a=Oc(e)?lU(o.length):{},c={},u=!1;o.forEach(function(l){var h=function(f,p){u||(p||fU(f)?(r.cancel(),r(f,p)):(r.cancel(),u=!0,a[l]=f,r(a)))};h.cancel=En,c[l]=h}),r.cancel=function(){u||(u=!0,o.forEach(function(l){return c[l].cancel()}))},o.forEach(function(l){u||s(e[l],i,c[l],l)})}function cce(t,e,r){var n=e.selector,s=e.args;try{var i=n.apply(void 0,[t.getState()].concat(s));r(i)}catch(o){r(o,!0)}}function uce(t,e,r){var n=e.pattern,s=e.buffer,i=Jae(s),o=V1(n),a=function u(l){G1(l)||t.channel.take(u,o),i.put(l)},c=i.close;i.close=function(){a.cancel(),c()},t.channel.take(a,o),r(i)}function lce(t,e,r,n){var s=n.task;r(s.isCancelled())}function hce(t,e,r){e.flush(r)}function dce(t,e,r,n){var s=n.task;r(s.context[e])}function fce(t,e,r,n){var s=n.task;H1(s.context,e),r()}var pce=(Mr={},Mr[qy]=ece,Mr[yU]=Xae,Mr[wU]=oce,Mr[kae]=ace,Mr[bU]=tce,Mr[Dae]=rce,Mr[vU]=nce,Mr[Uae]=sce,Mr[Bae]=ice,Mr[EU]=cce,Mr[$ae]=uce,Mr[Lae]=lce,Mr[Mae]=hce,Mr[Fae]=dce,Mr[jae]=fce,Mr);function gce(t,e,r){var n=[],s,i=!1;c(t);var o=function(){return n};function a(l){e(),u(),r(l,!0)}function c(l){n.push(l),l.cont=function(h,d){i||(K0(n,l),l.cont=En,d?a(h):(l===t&&(s=h),n.length||(i=!0,r(s))))}}function u(){i||(i=!0,n.forEach(function(l){l.cont=En,l.cancel()}),n=[])}return{addTask:c,cancelAll:u,abort:a,getTasks:o}}function kU(t,e){return t+"?"+e}function mce(t){var e=gU(t);if(e){var r=e.code,n=e.fileName,s=e.lineNumber,i=r+"  "+kU(n,s);return i}return""}function Qx(t){var e=t.name,r=t.location;return r?e+"  "+kU(r.fileName,r.lineNumber):e}function yce(t){var e=Eae(function(r){return r.cancelledTasks},t);return e.length?["Tasks cancelled due to error:"].concat(e).join(`
`):""}var J1=null,yp=[],wce=function(e){e.crashedEffect=J1,yp.push(e)},DU=function(){J1=null,yp.length=0},bce=function(e){J1=e},vce=function(){var e=yp[0],r=yp.slice(1),n=e.crashedEffect?mce(e.crashedEffect):null,s="The above error occurred in task "+Qx(e.meta)+(n?` 
 when executing effect `+n:"");return[s].concat(r.map(function(i){return"    created by "+Qx(i.meta)}),[yce(yp)]).join(`
`)};function Ece(t,e,r,n,s,i,o){var a;o===void 0&&(o=En);var c=Qc,u,l,h=null,d=[],f=Object.create(r),p=gce(e,function(){d.push.apply(d,p.getTasks().map(function(S){return S.meta.name}))},m);function g(){c===Qc&&(c=ea,p.cancelAll(),m(_h,!1))}function m(A,S){if(!S)A===_h?c=ea:c!==ea&&(c=RU),u=A,h&&h.resolve(A);else{if(c=Wy,wce({meta:s,cancelledTasks:d}),E.isRoot){var C=vce();DU(),t.onError(A,{sagaStack:C})}l=A,h&&h.reject(A)}E.cont(A,S),E.joiners.forEach(function(T){T.cb(A,S)}),E.joiners=null}function w(A){H1(f,A)}function v(){return h||(h=qae(),c===Wy?h.reject(l):c!==Qc&&h.resolve(u)),h.promise}var E=(a={},a[pae]=!0,a.id=n,a.meta=s,a.isRoot=i,a.context=f,a.joiners=[],a.queue=p,a.cancel=g,a.cont=o,a.end=m,a.setContext=w,a.toPromise=v,a.isRunning=function(){return c===Qc},a.isCancelled=function(){return c===ea||c===Qc&&e.status===ea},a.isAborted=function(){return c===Wy},a.result=function(){return u},a.error=function(){return l},a);return E}function Y0(t,e,r,n,s,i,o){var a=t.finalizeRunEffect(f);d.cancel=En;var c={meta:s,cancel:h,status:Qc},u=Ece(t,c,r,n,s,i,o),l={task:u,digestEffect:p};function h(){c.status===Qc&&(c.status=ea,d(_h))}return o&&(o.cancel=u.cancel),d(),u;function d(g,m){try{var w;m?(w=e.throw(g),DU()):dU(g)?(c.status=ea,d.cancel(),w=Ss(e.return)?e.return(_h):{done:!0,value:_h}):hU(g)?w=Ss(e.return)?e.return():{done:!0}:w=e.next(g),w.done?(c.status!==ea&&(c.status=RU),c.cont(w.value)):p(w.value,n,d)}catch(v){if(c.status===ea)throw v;c.status=Wy,c.cont(v,!0)}}function f(g,m,w){if(G0(g))K1(g,w);else if(z1(g))Y0(t,g,u.context,m,s,!1,w);else if(g&&g[rU]){var v=pce[g.type];v(t,g.payload,w,l)}else w(g)}function p(g,m,w,v){v===void 0&&(v="");var E=PU();t.sagaMonitor&&t.sagaMonitor.effectTriggered({effectId:E,parentEffectId:m,label:v,effect:g});var A;function S(C,T){A||(A=!0,w.cancel=En,t.sagaMonitor&&(T?t.sagaMonitor.effectRejected(E,C):t.sagaMonitor.effectResolved(E,C)),T&&bce(g),w(C,T))}S.cancel=En,w.cancel=function(){A||(A=!0,S.cancel(),S.cancel=En,t.sagaMonitor&&t.sagaMonitor.effectCancelled(E))},a(g,E,S)}}function _ce(t,e){for(var r=t.channel,n=r===void 0?OU():r,s=t.dispatch,i=t.getState,o=t.context,a=o===void 0?{}:o,c=t.sagaMonitor,u=t.effectMiddlewares,l=t.onError,h=l===void 0?Sae:l,d=arguments.length,f=new Array(d>2?d-2:0),p=2;p<d;p++)f[p-2]=arguments[p];var g=e.apply(void 0,f),m=PU();c&&(c.rootSagaStarted=c.rootSagaStarted||En,c.effectTriggered=c.effectTriggered||En,c.effectResolved=c.effectResolved||En,c.effectRejected=c.effectRejected||En,c.effectCancelled=c.effectCancelled||En,c.actionDispatched=c.actionDispatched||En,c.rootSagaStarted({effectId:m,saga:e,args:f}));var w;if(u){var v=Tae.apply(void 0,u);w=function(S){return function(C,T,O){var P=function(L){return S(L,T,O)};return v(P)(C)}}}else w=uU;var E={channel:n,dispatch:Iae(s),getState:i,sagaMonitor:c,onError:h,finalizeRunEffect:w};return IU(function(){var A=Y0(E,g,a,m,q1(e),!0,void 0);return c&&c.effectResolved(m,A),A})}function Ace(t){var e={},r=e.context,n=r===void 0?{}:r,s=e.channel,i=s===void 0?OU():s,o=e.sagaMonitor,a=mae(e,["context","channel","sagaMonitor"]),c;function u(l){var h=l.getState,d=l.dispatch;return c=_ce.bind(null,Mw({},a,{context:n,channel:i,dispatch:d,getState:h,sagaMonitor:o})),function(f){return function(p){o&&o.actionDispatched&&o.actionDispatched(p);var g=f(p);return i.put(p),g}}}return u.run=function(){return c.apply(void 0,arguments)},u.setContext=function(l){H1(n,l)},u}const UU=Ace(),Cce=[UU,eU];/**
 * @license
 * MIT License
 * 
 * Copyright (c) 2014-present, Lee Byron and other contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var Am="delete",xt=5,bs=1<<xt,Nn=bs-1,et={};function eA(){return{value:!1}}function Ys(t){t&&(t.value=!0)}function Y1(){}function Dd(t){return t.size===void 0&&(t.size=t.__iterate(BU)),t.size}function Ac(t,e){if(typeof e!="number"){var r=e>>>0;if(""+r!==e||r===4294967295)return NaN;e=r}return e<0?Dd(t)+e:e}function BU(){return!0}function Q0(t,e,r){return(t===0&&!LU(t)||r!==void 0&&t<=-r)&&(e===void 0||r!==void 0&&e>=r)}function Cm(t,e){return $U(t,e,0)}function Z0(t,e){return $U(t,e,e)}function $U(t,e,r){return t===void 0?r:LU(t)?e===1/0?e:Math.max(0,e+t)|0:e===void 0||e===t?t:Math.min(e,t)|0}function LU(t){return t<0||t===0&&1/t===-1/0}var MU="@@__IMMUTABLE_ITERABLE__@@";function Is(t){return!!(t&&t[MU])}var Fw="@@__IMMUTABLE_KEYED__@@";function Vt(t){return!!(t&&t[Fw])}var jw="@@__IMMUTABLE_INDEXED__@@";function Zs(t){return!!(t&&t[jw])}function Q1(t){return Vt(t)||Zs(t)}var ln=function(e){return Is(e)?e:Zn(e)},ri=function(t){function e(r){return Vt(r)?r:Rc(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ln),_l=function(t){function e(r){return Zs(r)?r:Ri(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ln),ef=function(t){function e(r){return Is(r)&&!Q1(r)?r:sf(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ln);ln.Keyed=ri;ln.Indexed=_l;ln.Set=ef;var FU="@@__IMMUTABLE_SEQ__@@";function Z1(t){return!!(t&&t[FU])}var jU="@@__IMMUTABLE_RECORD__@@";function tf(t){return!!(t&&t[jU])}function wo(t){return Is(t)||tf(t)}var Cc="@@__IMMUTABLE_ORDERED__@@";function lo(t){return!!(t&&t[Cc])}var rf=0,Ts=1,Ns=2,tA=typeof Symbol=="function"&&Symbol.iterator,zU="@@iterator",X0=tA||zU,it=function(e){this.next=e};it.prototype.toString=function(){return"[Iterator]"};it.KEYS=rf;it.VALUES=Ts;it.ENTRIES=Ns;it.prototype.inspect=it.prototype.toSource=function(){return this.toString()};it.prototype[X0]=function(){return this};function Gt(t,e,r,n){var s=t===rf?e:t===Ts?r:[e,r];return n?n.value=s:n={value:s,done:!1},n}function Rn(){return{value:void 0,done:!0}}function HU(t){return Array.isArray(t)?!0:!!eb(t)}function Zx(t){return t&&typeof t.next=="function"}function rA(t){var e=eb(t);return e&&e.call(t)}function eb(t){var e=t&&(tA&&t[tA]||t[zU]);if(typeof e=="function")return e}function Sce(t){var e=eb(t);return e&&e===t.entries}function Ice(t){var e=eb(t);return e&&e===t.keys}var nf=Object.prototype.hasOwnProperty;function qU(t){return Array.isArray(t)||typeof t=="string"?!0:t&&typeof t=="object"&&Number.isInteger(t.length)&&t.length>=0&&(t.length===0?Object.keys(t).length===1:t.hasOwnProperty(t.length-1))}var Zn=function(t){function e(r){return r==null?eC():wo(r)?r.toSeq():Nce(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(n,s){var i=this._cache;if(i){for(var o=i.length,a=0;a!==o;){var c=i[s?o-++a:a++];if(n(c[1],c[0],this)===!1)break}return a}return this.__iterateUncached(n,s)},e.prototype.__iterator=function(n,s){var i=this._cache;if(i){var o=i.length,a=0;return new it(function(){if(a===o)return Rn();var c=i[s?o-++a:a++];return Gt(n,c[0],c[1])})}return this.__iteratorUncached(n,s)},e}(ln),Rc=function(t){function e(r){return r==null?eC().toKeyedSeq():Is(r)?Vt(r)?r.toSeq():r.fromEntrySeq():tf(r)?r.toSeq():tC(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(Zn),Ri=function(t){function e(r){return r==null?eC():Is(r)?Vt(r)?r.entrySeq():r.toIndexedSeq():tf(r)?r.toSeq().entrySeq():WU(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(Zn),sf=function(t){function e(r){return(Is(r)&&!Q1(r)?r:Ri(r)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(Zn);Zn.isSeq=Z1;Zn.Keyed=Rc;Zn.Set=sf;Zn.Indexed=Ri;Zn.prototype[FU]=!0;var Ud=function(t){function e(r){this._array=r,this.size=r.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,s){return this.has(n)?this._array[Ac(this,n)]:s},e.prototype.__iterate=function(n,s){for(var i=this._array,o=i.length,a=0;a!==o;){var c=s?o-++a:a++;if(n(i[c],c,this)===!1)break}return a},e.prototype.__iterator=function(n,s){var i=this._array,o=i.length,a=0;return new it(function(){if(a===o)return Rn();var c=s?o-++a:a++;return Gt(n,c,i[c])})},e}(Ri),X1=function(t){function e(r){var n=Object.keys(r).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r):[]);this._object=r,this._keys=n,this.size=n.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,s){return s!==void 0&&!this.has(n)?s:this._object[n]},e.prototype.has=function(n){return nf.call(this._object,n)},e.prototype.__iterate=function(n,s){for(var i=this._object,o=this._keys,a=o.length,c=0;c!==a;){var u=o[s?a-++c:c++];if(n(i[u],u,this)===!1)break}return c},e.prototype.__iterator=function(n,s){var i=this._object,o=this._keys,a=o.length,c=0;return new it(function(){if(c===a)return Rn();var u=o[s?a-++c:c++];return Gt(n,u,i[u])})},e}(Rc);X1.prototype[Cc]=!0;var Tce=function(t){function e(r){this._collection=r,this.size=r.length||r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(n,s){if(s)return this.cacheResult().__iterate(n,s);var i=this._collection,o=rA(i),a=0;if(Zx(o))for(var c;!(c=o.next()).done&&n(c.value,a++,this)!==!1;);return a},e.prototype.__iteratorUncached=function(n,s){if(s)return this.cacheResult().__iterator(n,s);var i=this._collection,o=rA(i);if(!Zx(o))return new it(Rn);var a=0;return new it(function(){var c=o.next();return c.done?c:Gt(n,a++,c.value)})},e}(Ri),Xx;function eC(){return Xx||(Xx=new Ud([]))}function tC(t){var e=rC(t);if(e)return e.fromEntrySeq();if(typeof t=="object")return new X1(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function WU(t){var e=rC(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function Nce(t){var e=rC(t);if(e)return Sce(t)?e.fromEntrySeq():Ice(t)?e.toSetSeq():e;if(typeof t=="object")return new X1(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}function rC(t){return qU(t)?new Ud(t):HU(t)?new Tce(t):void 0}var VU="@@__IMMUTABLE_MAP__@@";function nC(t){return!!(t&&t[VU])}function GU(t){return nC(t)&&lo(t)}function eO(t){return!!(t&&typeof t.equals=="function"&&typeof t.hashCode=="function")}function vs(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if(typeof t.valueOf=="function"&&typeof e.valueOf=="function"){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!!(eO(t)&&eO(e)&&t.equals(e))}var Uf=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(e,r){e|=0,r|=0;var n=e&65535,s=r&65535;return n*s+((e>>>16)*s+n*(r>>>16)<<16>>>0)|0};function tb(t){return t>>>1&1073741824|t&3221225471}var xce=Object.prototype.valueOf;function ms(t){if(t==null)return tO(t);if(typeof t.hashCode=="function")return tb(t.hashCode(t));var e=Uce(t);if(e==null)return tO(e);switch(typeof e){case"boolean":return e?1108378657:1108378656;case"number":return Oce(e);case"string":return e.length>Bce?Rce(e):nA(e);case"object":case"function":return kce(e);case"symbol":return Pce(e);default:if(typeof e.toString=="function")return nA(e.toString());throw new Error("Value type "+typeof e+" cannot be hashed.")}}function tO(t){return t===null?1108378658:1108378659}function Oce(t){if(t!==t||t===1/0)return 0;var e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)t/=4294967295,e^=t;return tb(e)}function Rce(t){var e=Qv[t];return e===void 0&&(e=nA(t),Yv===$ce&&(Yv=0,Qv={}),Yv++,Qv[t]=e),e}function nA(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return tb(e)}function Pce(t){var e=sO[t];return e!==void 0||(e=KU(),sO[t]=e),e}function kce(t){var e;if(sA&&(e=iA.get(t),e!==void 0)||(e=t[Zc],e!==void 0)||!nO&&(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Zc],e!==void 0||(e=Dce(t),e!==void 0)))return e;if(e=KU(),sA)iA.set(t,e);else{if(rO!==void 0&&rO(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(nO)Object.defineProperty(t,Zc,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Zc]=e;else if(t.nodeType!==void 0)t[Zc]=e;else throw new Error("Unable to set a non-enumerable property on object.")}return e}var rO=Object.isExtensible,nO=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function Dce(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function Uce(t){return t.valueOf!==xce&&typeof t.valueOf=="function"?t.valueOf(t):t}function KU(){var t=++Jv;return Jv&1073741824&&(Jv=0),t}var sA=typeof WeakMap=="function",iA;sA&&(iA=new WeakMap);var sO=Object.create(null),Jv=0,Zc="__immutablehash__";typeof Symbol=="function"&&(Zc=Symbol(Zc));var Bce=16,$ce=255,Yv=0,Qv={},rb=function(t){function e(r,n){this._iter=r,this._useKeys=n,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,s){return this._iter.get(n,s)},e.prototype.has=function(n){return this._iter.has(n)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var n=this,s=sC(this,!0);return this._useKeys||(s.valueSeq=function(){return n._iter.toSeq().reverse()}),s},e.prototype.map=function(n,s){var i=this,o=XU(this,n,s);return this._useKeys||(o.valueSeq=function(){return i._iter.toSeq().map(n,s)}),o},e.prototype.__iterate=function(n,s){var i=this;return this._iter.__iterate(function(o,a){return n(o,a,i)},s)},e.prototype.__iterator=function(n,s){return this._iter.__iterator(n,s)},e}(Rc);rb.prototype[Cc]=!0;var JU=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,s){var i=this,o=0;return s&&Dd(this),this._iter.__iterate(function(a){return n(a,s?i.size-++o:o++,i)},s)},e.prototype.__iterator=function(n,s){var i=this,o=this._iter.__iterator(Ts,s),a=0;return s&&Dd(this),new it(function(){var c=o.next();return c.done?c:Gt(n,s?i.size-++a:a++,c.value,c)})},e}(Ri),YU=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,s){var i=this;return this._iter.__iterate(function(o){return n(o,o,i)},s)},e.prototype.__iterator=function(n,s){var i=this._iter.__iterator(Ts,s);return new it(function(){var o=i.next();return o.done?o:Gt(n,o.value,o.value,o)})},e}(sf),QU=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(n,s){var i=this;return this._iter.__iterate(function(o){if(o){oO(o);var a=Is(o);return n(a?o.get(1):o[1],a?o.get(0):o[0],i)}},s)},e.prototype.__iterator=function(n,s){var i=this._iter.__iterator(Ts,s);return new it(function(){for(;;){var o=i.next();if(o.done)return o;var a=o.value;if(a){oO(a);var c=Is(a);return Gt(n,c?a.get(0):a[0],c?a.get(1):a[1],o)}}})},e}(Rc);JU.prototype.cacheResult=rb.prototype.cacheResult=YU.prototype.cacheResult=QU.prototype.cacheResult=aC;function ZU(t){var e=bo(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var r=t.reverse.apply(this);return r.flip=function(){return t.reverse()},r},e.has=function(r){return t.includes(r)},e.includes=function(r){return t.has(r)},e.cacheResult=aC,e.__iterateUncached=function(r,n){var s=this;return t.__iterate(function(i,o){return r(o,i,s)!==!1},n)},e.__iteratorUncached=function(r,n){if(r===Ns){var s=t.__iterator(r,n);return new it(function(){var i=s.next();if(!i.done){var o=i.value[0];i.value[0]=i.value[1],i.value[1]=o}return i})}return t.__iterator(r===Ts?rf:Ts,n)},e}function XU(t,e,r){var n=bo(t);return n.size=t.size,n.has=function(s){return t.has(s)},n.get=function(s,i){var o=t.get(s,et);return o===et?i:e.call(r,o,s,t)},n.__iterateUncached=function(s,i){var o=this;return t.__iterate(function(a,c,u){return s(e.call(r,a,c,u),c,o)!==!1},i)},n.__iteratorUncached=function(s,i){var o=t.__iterator(Ns,i);return new it(function(){var a=o.next();if(a.done)return a;var c=a.value,u=c[0];return Gt(s,u,e.call(r,c[1],u,t),a)})},n}function sC(t,e){var r=this,n=bo(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var s=ZU(t);return s.reverse=function(){return t.flip()},s}),n.get=function(s,i){return t.get(e?s:-1-s,i)},n.has=function(s){return t.has(e?s:-1-s)},n.includes=function(s){return t.includes(s)},n.cacheResult=aC,n.__iterate=function(s,i){var o=this,a=0;return i&&Dd(t),t.__iterate(function(c,u){return s(c,e?u:i?o.size-++a:a++,o)},!i)},n.__iterator=function(s,i){var o=0;i&&Dd(t);var a=t.__iterator(Ns,!i);return new it(function(){var c=a.next();if(c.done)return c;var u=c.value;return Gt(s,e?u[0]:i?r.size-++o:o++,u[1],c)})},n}function eB(t,e,r,n){var s=bo(t);return n&&(s.has=function(i){var o=t.get(i,et);return o!==et&&!!e.call(r,o,i,t)},s.get=function(i,o){var a=t.get(i,et);return a!==et&&e.call(r,a,i,t)?a:o}),s.__iterateUncached=function(i,o){var a=this,c=0;return t.__iterate(function(u,l,h){if(e.call(r,u,l,h))return c++,i(u,n?l:c-1,a)},o),c},s.__iteratorUncached=function(i,o){var a=t.__iterator(Ns,o),c=0;return new it(function(){for(;;){var u=a.next();if(u.done)return u;var l=u.value,h=l[0],d=l[1];if(e.call(r,d,h,t))return Gt(i,n?h:c++,d,u)}})},s}function Lce(t,e,r){var n=af().asMutable();return t.__iterate(function(s,i){n.update(e.call(r,s,i,t),0,function(o){return o+1})}),n.asImmutable()}function Mce(t,e,r){var n=Vt(t),s=(lo(t)?ma():af()).asMutable();t.__iterate(function(o,a){s.update(e.call(r,o,a,t),function(c){return c=c||[],c.push(n?[a,o]:o),c})});var i=oC(t);return s.map(function(o){return Nt(t,i(o))}).asImmutable()}function Fce(t,e,r){var n=Vt(t),s=[[],[]];t.__iterate(function(o,a){s[e.call(r,o,a,t)?1:0].push(n?[a,o]:o)});var i=oC(t);return s.map(function(o){return Nt(t,i(o))})}function iC(t,e,r,n){var s=t.size;if(Q0(e,r,s))return t;if(typeof s>"u"&&(e<0||r<0))return iC(t.toSeq().cacheResult(),e,r,n);var i=Cm(e,s),o=Z0(r,s),a=o-i,c;a===a&&(c=a<0?0:a);var u=bo(t);return u.size=c===0?c:t.size&&c||void 0,!n&&Z1(t)&&c>=0&&(u.get=function(l,h){return l=Ac(this,l),l>=0&&l<c?t.get(l+i,h):h}),u.__iterateUncached=function(l,h){var d=this;if(c===0)return 0;if(h)return this.cacheResult().__iterate(l,h);var f=0,p=!0,g=0;return t.__iterate(function(m,w){if(!(p&&(p=f++<i)))return g++,l(m,n?w:g-1,d)!==!1&&g!==c}),g},u.__iteratorUncached=function(l,h){if(c!==0&&h)return this.cacheResult().__iterator(l,h);if(c===0)return new it(Rn);var d=t.__iterator(l,h),f=0,p=0;return new it(function(){for(;f++<i;)d.next();if(++p>c)return Rn();var g=d.next();return n||l===Ts||g.done?g:l===rf?Gt(l,p-1,void 0,g):Gt(l,p-1,g.value[1],g)})},u}function jce(t,e,r){var n=bo(t);return n.__iterateUncached=function(s,i){var o=this;if(i)return this.cacheResult().__iterate(s,i);var a=0;return t.__iterate(function(c,u,l){return e.call(r,c,u,l)&&++a&&s(c,u,o)}),a},n.__iteratorUncached=function(s,i){var o=this;if(i)return this.cacheResult().__iterator(s,i);var a=t.__iterator(Ns,i),c=!0;return new it(function(){if(!c)return Rn();var u=a.next();if(u.done)return u;var l=u.value,h=l[0],d=l[1];return e.call(r,d,h,o)?s===Ns?u:Gt(s,h,d,u):(c=!1,Rn())})},n}function tB(t,e,r,n){var s=bo(t);return s.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var c=!0,u=0;return t.__iterate(function(l,h,d){if(!(c&&(c=e.call(r,l,h,d))))return u++,i(l,n?h:u-1,a)}),u},s.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var c=t.__iterator(Ns,o),u=!0,l=0;return new it(function(){var h,d,f;do{if(h=c.next(),h.done)return n||i===Ts?h:i===rf?Gt(i,l++,void 0,h):Gt(i,l++,h.value[1],h);var p=h.value;d=p[0],f=p[1],u&&(u=e.call(r,f,d,a))}while(u);return i===Ns?h:Gt(i,d,f,h)})},s}var zce=function(t){function e(r){this._wrappedIterables=r.flatMap(function(n){return n._wrappedIterables?n._wrappedIterables:[n]}),this.size=this._wrappedIterables.reduce(function(n,s){if(n!==void 0){var i=s.size;if(i!==void 0)return n+i}},0),this[Fw]=this._wrappedIterables[0][Fw],this[jw]=this._wrappedIterables[0][jw],this[Cc]=this._wrappedIterables[0][Cc]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(n,s){if(this._wrappedIterables.length!==0){if(s)return this.cacheResult().__iterate(n,s);for(var i=0,o=Vt(this),a=o?Ns:Ts,c=this._wrappedIterables[i].__iterator(a,s),u=!0,l=0;u;){for(var h=c.next();h.done;){if(i++,i===this._wrappedIterables.length)return l;c=this._wrappedIterables[i].__iterator(a,s),h=c.next()}var d=o?n(h.value[1],h.value[0],this):n(h.value,l,this);u=d!==!1,l++}return l}},e.prototype.__iteratorUncached=function(n,s){var i=this;if(this._wrappedIterables.length===0)return new it(Rn);if(s)return this.cacheResult().__iterator(n,s);var o=0,a=this._wrappedIterables[o].__iterator(n,s);return new it(function(){for(var c=a.next();c.done;){if(o++,o===i._wrappedIterables.length)return c;a=i._wrappedIterables[o].__iterator(n,s),c=a.next()}return c})},e}(Zn);function Hce(t,e){var r=Vt(t),n=[t].concat(e).map(function(i){return Is(i)?r&&(i=ri(i)):i=r?tC(i):WU(Array.isArray(i)?i:[i]),i}).filter(function(i){return i.size!==0});if(n.length===0)return t;if(n.length===1){var s=n[0];if(s===t||r&&Vt(s)||Zs(t)&&Zs(s))return s}return new zce(n)}function rB(t,e,r){var n=bo(t);return n.__iterateUncached=function(s,i){if(i)return this.cacheResult().__iterate(s,i);var o=0,a=!1;function c(u,l){u.__iterate(function(h,d){return(!e||l<e)&&Is(h)?c(h,l+1):(o++,s(h,r?d:o-1,n)===!1&&(a=!0)),!a},i)}return c(t,0),o},n.__iteratorUncached=function(s,i){if(i)return this.cacheResult().__iterator(s,i);var o=t.__iterator(s,i),a=[],c=0;return new it(function(){for(;o;){var u=o.next();if(u.done!==!1){o=a.pop();continue}var l=u.value;if(s===Ns&&(l=l[1]),(!e||a.length<e)&&Is(l))a.push(o),o=l.__iterator(s,i);else return r?u:Gt(s,c++,l,u)}return Rn()})},n}function qce(t,e,r){var n=oC(t);return t.toSeq().map(function(s,i){return n(e.call(r,s,i,t))}).flatten(!0)}function Wce(t,e){var r=bo(t);return r.size=t.size&&t.size*2-1,r.__iterateUncached=function(n,s){var i=this,o=0;return t.__iterate(function(a){return(!o||n(e,o++,i)!==!1)&&n(a,o++,i)!==!1},s),o},r.__iteratorUncached=function(n,s){var i=t.__iterator(Ts,s),o=0,a;return new it(function(){return(!a||o%2)&&(a=i.next(),a.done)?a:o%2?Gt(n,o++,e):Gt(n,o++,a.value,a)})},r}function Bd(t,e,r){e||(e=nB);var n=Vt(t),s=0,i=t.toSeq().map(function(o,a){return[a,o,s++,r?r(o,a,t):o]}).valueSeq().toArray();return i.sort(function(o,a){return e(o[3],a[3])||o[2]-a[2]}).forEach(n?function(o,a){i[a].length=2}:function(o,a){i[a]=o[1]}),n?Rc(i):Zs(t)?Ri(i):sf(i)}function py(t,e,r){if(e||(e=nB),r){var n=t.toSeq().map(function(s,i){return[s,r(s,i,t)]}).reduce(function(s,i){return iO(e,s[1],i[1])?i:s});return n&&n[0]}return t.reduce(function(s,i){return iO(e,s,i)?i:s})}function iO(t,e,r){var n=t(r,e);return n===0&&r!==e&&(r==null||r!==r)||n>0}function gy(t,e,r,n){var s=bo(t),i=new Ud(r).map(function(o){return o.size});return s.size=n?i.max():i.min(),s.__iterate=function(o,a){for(var c=this.__iterator(Ts,a),u,l=0;!(u=c.next()).done&&o(u.value,l++,this)!==!1;);return l},s.__iteratorUncached=function(o,a){var c=r.map(function(h){return h=ln(h),rA(a?h.reverse():h)}),u=0,l=!1;return new it(function(){var h;return l||(h=c.map(function(d){return d.next()}),l=n?h.every(function(d){return d.done}):h.some(function(d){return d.done})),l?Rn():Gt(o,u++,e.apply(null,h.map(function(d){return d.value})))})},s}function Nt(t,e){return t===e?t:Z1(t)?e:t.constructor(e)}function oO(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function oC(t){return Vt(t)?ri:Zs(t)?_l:ef}function bo(t){return Object.create((Vt(t)?Rc:Zs(t)?Ri:sf).prototype)}function aC(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Zn.prototype.cacheResult.call(this)}function nB(t,e){return t===void 0&&e===void 0?0:t===void 0?1:e===void 0?-1:t>e?1:t<e?-1:0}function so(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),s=0;s<r;s++)n[s]=t[s+e];return n}function wp(t,e){if(!t)throw new Error(e)}function ys(t){wp(t!==1/0,"Cannot perform this action with an infinite size.")}function sB(t){if(qU(t)&&typeof t!="string")return t;if(lo(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}var Vce=Object.prototype.toString;function Gce(t){if(!t||typeof t!="object"||Vce.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e,n=Object.getPrototypeOf(e);n!==null;)r=n,n=Object.getPrototypeOf(r);return r===e}function Sc(t){return typeof t=="object"&&(wo(t)||Array.isArray(t)||Gce(t))}function Ig(t){try{return typeof t=="string"?JSON.stringify(t):String(t)}catch{return JSON.stringify(t)}}function Kce(t,e){return wo(t)?t.has(e):Sc(t)&&nf.call(t,e)}function iB(t,e,r){return wo(t)?t.get(e,r):Kce(t,e)?typeof t.get=="function"?t.get(e):t[e]:r}function zw(t){if(Array.isArray(t))return so(t);var e={};for(var r in t)nf.call(t,r)&&(e[r]=t[r]);return e}function Jce(t,e){if(!Sc(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(wo(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!nf.call(t,e))return t;var r=zw(t);return Array.isArray(r)?r.splice(e,1):delete r[e],r}function Yce(t,e,r){if(!Sc(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(wo(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,r)}if(nf.call(t,e)&&r===t[e])return t;var n=zw(t);return n[e]=r,n}function of(t,e,r,n){n||(n=r,r=void 0);var s=oB(wo(t),t,sB(e),0,r,n);return s===et?r:s}function oB(t,e,r,n,s,i){var o=e===et;if(n===r.length){var a=o?s:e,c=i(a);return c===a?e:c}if(!o&&!Sc(e))throw new TypeError("Cannot update within non-data-structure value in path ["+Array.from(r).slice(0,n).map(Ig)+"]: "+e);var u=r[n];if(typeof u>"u")throw new TypeError("Index can not be undefined in updateIn(). This should not happen");var l=o?et:iB(e,u,et),h=oB(l===et?t:wo(l),l,r,n+1,s,i);return h===l?e:h===et?Jce(e,u):Yce(o?t?oo():{}:e,u,h)}function ut(t,e,r){return of(t,e,et,function(){return r})}function cC(t,e){return ut(this,t,e)}function Qce(t,e){return of(t,e,function(){return et})}function uC(t){return Qce(this,t)}function aB(t,e,r,n){return of(t,[e],r,n)}function lC(t,e,r){return arguments.length===1?t(this):aB(this,t,e,r)}function hC(t,e,r){return of(this,t,e,r)}function cB(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return lB(this,t)}function uB(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if(typeof t!="function")throw new TypeError("Invalid merger function: "+t);return lB(this,e,t)}function lB(t,e,r){for(var n=[],s=0;s<e.length;s++){var i=ri(e[s]);i.size!==0&&n.push(i)}return n.length===0?t:t.toSeq().size===0&&!t.__ownerID&&n.length===1?t.constructor(n[0]):t.withMutations(function(o){for(var a=r?function(u,l){aB(o,l,et,function(h){return h===et?u:r(h,u,l)})}:function(u,l){o.set(l,u)},c=0;c<n.length;c++)n[c].forEach(a)})}function dC(t,e,r){return fC(t,e,Zce(r))}function fC(t,e,r){if(!Sc(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(wo(t))return typeof r=="function"&&t.mergeWith?t.mergeWith.apply(t,[r].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var n=Array.isArray(t),s=t,i=n?_l:ri,o=n?function(c){s===t&&(s=zw(s)),s.push(c)}:function(c,u){var l=nf.call(s,u),h=l&&r?r(s[u],c,u):c;(!l||h!==s[u])&&(s===t&&(s=zw(s)),s[u]=h)},a=0;a<e.length;a++)i(e[a]).forEach(o);return s}function Zce(t){function e(r,n,s){return Sc(r)&&Sc(n)&&Xce(r,n)?fC(r,[n],e):t?t(r,n,s):n}return e}function Xce(t,e){var r=Zn(t),n=Zn(e);return Zs(r)===Zs(n)&&Vt(r)===Vt(n)}function hB(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return dC(this,t)}function dB(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return dC(this,e,t)}function pC(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return of(this,t,oo(),function(n){return fC(n,e)})}function gC(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return of(this,t,oo(),function(n){return dC(n,e)})}function Sm(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function Im(){return this.__ownerID?this:this.__ensureOwner(new Y1)}function Tm(){return this.__ensureOwner()}function mC(){return this.__altered}var af=function(t){function e(r){return r==null?oo():nC(r)&&!lo(r)?r:oo().withMutations(function(n){var s=t(r);ys(s.size),s.forEach(function(i,o){return n.set(o,i)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(n,s){return this._root?this._root.get(0,void 0,n,s):s},e.prototype.set=function(n,s){return uO(this,n,s)},e.prototype.remove=function(n){return uO(this,n,et)},e.prototype.deleteAll=function(n){var s=ln(n);return s.size===0?this:this.withMutations(function(i){s.forEach(function(o){return i.remove(o)})})},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):oo()},e.prototype.sort=function(n){return ma(Bd(this,n))},e.prototype.sortBy=function(n,s){return ma(Bd(this,s,n))},e.prototype.map=function(n,s){var i=this;return this.withMutations(function(o){o.forEach(function(a,c){o.set(c,n.call(s,a,c,i))})})},e.prototype.__iterator=function(n,s){return new eue(this,n,s)},e.prototype.__iterate=function(n,s){var i=this,o=0;return this._root&&this._root.iterate(function(a){return o++,n(a[1],a[0],i)},s),o},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?yC(this.size,this._root,n,this.__hash):this.size===0?oo():(this.__ownerID=n,this.__altered=!1,this)},e}(ri);af.isMap=nC;var Ht=af.prototype;Ht[VU]=!0;Ht[Am]=Ht.remove;Ht.removeAll=Ht.deleteAll;Ht.setIn=cC;Ht.removeIn=Ht.deleteIn=uC;Ht.update=lC;Ht.updateIn=hC;Ht.merge=Ht.concat=cB;Ht.mergeWith=uB;Ht.mergeDeep=hB;Ht.mergeDeepWith=dB;Ht.mergeIn=pC;Ht.mergeDeepIn=gC;Ht.withMutations=Sm;Ht.wasAltered=mC;Ht.asImmutable=Tm;Ht["@@transducer/init"]=Ht.asMutable=Im;Ht["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])};Ht["@@transducer/result"]=function(t){return t.asImmutable()};var Tg=function(e,r){this.ownerID=e,this.entries=r};Tg.prototype.get=function(e,r,n,s){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(vs(n,i[o][0]))return i[o][1];return s};Tg.prototype.update=function(e,r,n,s,i,o,a){for(var c=i===et,u=this.entries,l=0,h=u.length;l<h&&!vs(s,u[l][0]);l++);var d=l<h;if(d?u[l][1]===i:c)return this;if(Ys(a),(c||!d)&&Ys(o),!(c&&u.length===1)){if(!d&&!c&&u.length>=oue)return tue(e,u,s,i);var f=e&&e===this.ownerID,p=f?u:so(u);return d?c?l===h-1?p.pop():p[l]=p.pop():p[l]=[s,i]:p.push([s,i]),f?(this.entries=p,this):new Tg(e,p)}};var $d=function(e,r,n){this.ownerID=e,this.bitmap=r,this.nodes=n};$d.prototype.get=function(e,r,n,s){r===void 0&&(r=ms(n));var i=1<<((e===0?r:r>>>e)&Nn),o=this.bitmap;return(o&i)===0?s:this.nodes[fB(o&i-1)].get(e+xt,r,n,s)};$d.prototype.update=function(e,r,n,s,i,o,a){n===void 0&&(n=ms(s));var c=(r===0?n:n>>>r)&Nn,u=1<<c,l=this.bitmap,h=(l&u)!==0;if(!h&&i===et)return this;var d=fB(l&u-1),f=this.nodes,p=h?f[d]:void 0,g=wC(p,e,r+xt,n,s,i,o,a);if(g===p)return this;if(!h&&g&&f.length>=aue)return nue(e,f,l,c,g);if(h&&!g&&f.length===2&&lO(f[d^1]))return f[d^1];if(h&&g&&f.length===1&&lO(g))return g;var m=e&&e===this.ownerID,w=h?g?l:l^u:l|u,v=h?g?pB(f,d,g,m):iue(f,d,m):sue(f,d,g,m);return m?(this.bitmap=w,this.nodes=v,this):new $d(e,w,v)};var Ng=function(e,r,n){this.ownerID=e,this.count=r,this.nodes=n};Ng.prototype.get=function(e,r,n,s){r===void 0&&(r=ms(n));var i=(e===0?r:r>>>e)&Nn,o=this.nodes[i];return o?o.get(e+xt,r,n,s):s};Ng.prototype.update=function(e,r,n,s,i,o,a){n===void 0&&(n=ms(s));var c=(r===0?n:n>>>r)&Nn,u=i===et,l=this.nodes,h=l[c];if(u&&!h)return this;var d=wC(h,e,r+xt,n,s,i,o,a);if(d===h)return this;var f=this.count;if(!h)f++;else if(!d&&(f--,f<cue))return rue(e,l,f,c);var p=e&&e===this.ownerID,g=pB(l,c,d,p);return p?(this.count=f,this.nodes=g,this):new Ng(e,f,g)};var Ld=function(e,r,n){this.ownerID=e,this.keyHash=r,this.entries=n};Ld.prototype.get=function(e,r,n,s){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(vs(n,i[o][0]))return i[o][1];return s};Ld.prototype.update=function(e,r,n,s,i,o,a){n===void 0&&(n=ms(s));var c=i===et;if(n!==this.keyHash)return c?this:(Ys(a),Ys(o),bC(this,e,r,n,[s,i]));for(var u=this.entries,l=0,h=u.length;l<h&&!vs(s,u[l][0]);l++);var d=l<h;if(d?u[l][1]===i:c)return this;if(Ys(a),(c||!d)&&Ys(o),c&&h===2)return new ga(e,this.keyHash,u[l^1]);var f=e&&e===this.ownerID,p=f?u:so(u);return d?c?l===h-1?p.pop():p[l]=p.pop():p[l]=[s,i]:p.push([s,i]),f?(this.entries=p,this):new Ld(e,this.keyHash,p)};var ga=function(e,r,n){this.ownerID=e,this.keyHash=r,this.entry=n};ga.prototype.get=function(e,r,n,s){return vs(n,this.entry[0])?this.entry[1]:s};ga.prototype.update=function(e,r,n,s,i,o,a){var c=i===et,u=vs(s,this.entry[0]);if(u?i===this.entry[1]:c)return this;if(Ys(a),c){Ys(o);return}return u?e&&e===this.ownerID?(this.entry[1]=i,this):new ga(e,this.keyHash,[s,i]):(Ys(o),bC(this,e,r,ms(s),[s,i]))};Tg.prototype.iterate=Ld.prototype.iterate=function(t,e){for(var r=this.entries,n=0,s=r.length-1;n<=s;n++)if(t(r[e?s-n:n])===!1)return!1};$d.prototype.iterate=Ng.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,s=r.length-1;n<=s;n++){var i=r[e?s-n:n];if(i&&i.iterate(t,e)===!1)return!1}};ga.prototype.iterate=function(t,e){return t(this.entry)};var eue=function(t){function e(r,n,s){this._type=n,this._reverse=s,this._stack=r._root&&aO(r._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var n=this._type,s=this._stack;s;){var i=s.node,o=s.index++,a=void 0;if(i.entry){if(o===0)return Zv(n,i.entry)}else if(i.entries){if(a=i.entries.length-1,o<=a)return Zv(n,i.entries[this._reverse?a-o:o])}else if(a=i.nodes.length-1,o<=a){var c=i.nodes[this._reverse?a-o:o];if(c){if(c.entry)return Zv(n,c.entry);s=this._stack=aO(c,s)}continue}s=this._stack=this._stack.__prev}return Rn()},e}(it);function Zv(t,e){return Gt(t,e[0],e[1])}function aO(t,e){return{node:t,index:0,__prev:e}}function yC(t,e,r,n){var s=Object.create(Ht);return s.size=t,s._root=e,s.__ownerID=r,s.__hash=n,s.__altered=!1,s}var cO;function oo(){return cO||(cO=yC(0))}function uO(t,e,r){var n,s;if(t._root){var i=eA(),o=eA();if(n=wC(t._root,t.__ownerID,0,void 0,e,r,i,o),!o.value)return t;s=t.size+(i.value?r===et?-1:1:0)}else{if(r===et)return t;s=1,n=new Tg(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=s,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?yC(s,n):oo()}function wC(t,e,r,n,s,i,o,a){return t?t.update(e,r,n,s,i,o,a):i===et?t:(Ys(a),Ys(o),new ga(e,n,[s,i]))}function lO(t){return t.constructor===ga||t.constructor===Ld}function bC(t,e,r,n,s){if(t.keyHash===n)return new Ld(e,n,[t.entry,s]);var i=(r===0?t.keyHash:t.keyHash>>>r)&Nn,o=(r===0?n:n>>>r)&Nn,a,c=i===o?[bC(t,e,r+xt,n,s)]:(a=new ga(e,n,s),i<o?[t,a]:[a,t]);return new $d(e,1<<i|1<<o,c)}function tue(t,e,r,n){t||(t=new Y1);for(var s=new ga(t,ms(r),[r,n]),i=0;i<e.length;i++){var o=e[i];s=s.update(t,0,void 0,o[0],o[1])}return s}function rue(t,e,r,n){for(var s=0,i=0,o=new Array(r),a=0,c=1,u=e.length;a<u;a++,c<<=1){var l=e[a];l!==void 0&&a!==n&&(s|=c,o[i++]=l)}return new $d(t,s,o)}function nue(t,e,r,n,s){for(var i=0,o=new Array(bs),a=0;r!==0;a++,r>>>=1)o[a]=r&1?e[i++]:void 0;return o[n]=s,new Ng(t,i+1,o)}function fB(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function pB(t,e,r,n){var s=n?t:so(t);return s[e]=r,s}function sue(t,e,r,n){var s=t.length+1;if(n&&e+1===s)return t[e]=r,t;for(var i=new Array(s),o=0,a=0;a<s;a++)a===e?(i[a]=r,o=-1):i[a]=t[a+o];return i}function iue(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var s=new Array(n),i=0,o=0;o<n;o++)o===e&&(i=1),s[o]=t[o+i];return s}var oue=bs/4,aue=bs/2,cue=bs/4,gB="@@__IMMUTABLE_LIST__@@";function mB(t){return!!(t&&t[gB])}var nb=function(t){function e(r){var n=Vy();if(r==null)return n;if(mB(r))return r;var s=t(r),i=s.size;return i===0?n:(ys(i),i>0&&i<bs?xg(0,i,xt,null,new yc(s.toArray())):n.withMutations(function(o){o.setSize(i),s.forEach(function(a,c){return o.set(c,a)})}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(n,s){if(n=Ac(this,n),n>=0&&n<this.size){n+=this._origin;var i=yB(this,n);return i&&i.array[n&Nn]}return s},e.prototype.set=function(n,s){return uue(this,n,s)},e.prototype.remove=function(n){return this.has(n)?n===0?this.shift():n===this.size-1?this.pop():this.splice(n,1):this},e.prototype.insert=function(n,s){return this.splice(n,0,s)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=xt,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):Vy()},e.prototype.push=function(){var n=arguments,s=this.size;return this.withMutations(function(i){Da(i,0,s+n.length);for(var o=0;o<n.length;o++)i.set(s+o,n[o])})},e.prototype.pop=function(){return Da(this,0,-1)},e.prototype.unshift=function(){var n=arguments;return this.withMutations(function(s){Da(s,-n.length);for(var i=0;i<n.length;i++)s.set(i,n[i])})},e.prototype.shift=function(){return Da(this,1)},e.prototype.shuffle=function(n){return n===void 0&&(n=Math.random),this.withMutations(function(s){for(var i=s.size,o,a;i;)o=Math.floor(n()*i--),a=s.get(o),s.set(o,s.get(i)),s.set(i,a)})},e.prototype.concat=function(){for(var n=arguments,s=[],i=0;i<arguments.length;i++){var o=n[i],a=t(typeof o!="string"&&HU(o)?o:[o]);a.size!==0&&s.push(a)}return s.length===0?this:this.size===0&&!this.__ownerID&&s.length===1?this.constructor(s[0]):this.withMutations(function(c){s.forEach(function(u){return u.forEach(function(l){return c.push(l)})})})},e.prototype.setSize=function(n){return Da(this,0,n)},e.prototype.map=function(n,s){var i=this;return this.withMutations(function(o){for(var a=0;a<i.size;a++)o.set(a,n.call(s,o.get(a),a,i))})},e.prototype.slice=function(n,s){var i=this.size;return Q0(n,s,i)?this:Da(this,Cm(n,i),Z0(s,i))},e.prototype.__iterator=function(n,s){var i=s?this.size:0,o=hO(this,s);return new it(function(){var a=o();return a===bp?Rn():Gt(n,s?--i:i++,a)})},e.prototype.__iterate=function(n,s){for(var i=s?this.size:0,o=hO(this,s),a;(a=o())!==bp&&n(a,s?--i:i++,this)!==!1;);return i},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?xg(this._origin,this._capacity,this._level,this._root,this._tail,n,this.__hash):this.size===0?Vy():(this.__ownerID=n,this.__altered=!1,this)},e}(_l);nb.isList=mB;var yr=nb.prototype;yr[gB]=!0;yr[Am]=yr.remove;yr.merge=yr.concat;yr.setIn=cC;yr.deleteIn=yr.removeIn=uC;yr.update=lC;yr.updateIn=hC;yr.mergeIn=pC;yr.mergeDeepIn=gC;yr.withMutations=Sm;yr.wasAltered=mC;yr.asImmutable=Tm;yr["@@transducer/init"]=yr.asMutable=Im;yr["@@transducer/step"]=function(t,e){return t.push(e)};yr["@@transducer/result"]=function(t){return t.asImmutable()};var yc=function(e,r){this.array=e,this.ownerID=r};yc.prototype.removeBefore=function(e,r,n){if((n&(1<<r+xt)-1)===0||this.array.length===0)return this;var s=n>>>r&Nn;if(s>=this.array.length)return new yc([],e);var i=s===0,o;if(r>0){var a=this.array[s];if(o=a&&a.removeBefore(e,r-xt,n),o===a&&i)return this}if(i&&!o)return this;var c=Md(this,e);if(!i)for(var u=0;u<s;u++)c.array[u]=void 0;return o&&(c.array[s]=o),c};yc.prototype.removeAfter=function(e,r,n){if(n===(r?1<<r+xt:bs)||this.array.length===0)return this;var s=n-1>>>r&Nn;if(s>=this.array.length)return this;var i;if(r>0){var o=this.array[s];if(i=o&&o.removeAfter(e,r-xt,n),i===o&&s===this.array.length-1)return this}var a=Md(this,e);return a.array.splice(s+1),i&&(a.array[s]=i),a};var bp={};function hO(t,e){var r=t._origin,n=t._capacity,s=Og(n),i=t._tail;return o(t._root,t._level,0);function o(u,l,h){return l===0?a(u,h):c(u,l,h)}function a(u,l){var h=l===s?i&&i.array:u&&u.array,d=l>r?0:r-l,f=n-l;return f>bs&&(f=bs),function(){if(d===f)return bp;var p=e?--f:d++;return h&&h[p]}}function c(u,l,h){var d,f=u&&u.array,p=h>r?0:r-h>>l,g=(n-h>>l)+1;return g>bs&&(g=bs),function(){for(;;){if(d){var m=d();if(m!==bp)return m;d=null}if(p===g)return bp;var w=e?--g:p++;d=o(f&&f[w],l-xt,h+(w<<l))}}}}function xg(t,e,r,n,s,i,o){var a=Object.create(yr);return a.size=e-t,a._origin=t,a._capacity=e,a._level=r,a._root=n,a._tail=s,a.__ownerID=i,a.__hash=o,a.__altered=!1,a}function Vy(){return xg(0,0,xt)}function uue(t,e,r){if(e=Ac(t,e),e!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(o){e<0?Da(o,e).set(0,r):Da(o,0,e+1).set(e,r)});e+=t._origin;var n=t._tail,s=t._root,i=eA();return e>=Og(t._capacity)?n=oA(n,t.__ownerID,0,e,r,i):s=oA(s,t.__ownerID,t._level,e,r,i),i.value?t.__ownerID?(t._root=s,t._tail=n,t.__hash=void 0,t.__altered=!0,t):xg(t._origin,t._capacity,t._level,s,n):t}function oA(t,e,r,n,s,i){var o=n>>>r&Nn,a=t&&o<t.array.length;if(!a&&s===void 0)return t;var c;if(r>0){var u=t&&t.array[o],l=oA(u,e,r-xt,n,s,i);return l===u?t:(c=Md(t,e),c.array[o]=l,c)}return a&&t.array[o]===s?t:(i&&Ys(i),c=Md(t,e),s===void 0&&o===c.array.length-1?c.array.pop():c.array[o]=s,c)}function Md(t,e){return e&&t&&e===t.ownerID?t:new yc(t?t.array.slice():[],e)}function yB(t,e){if(e>=Og(t._capacity))return t._tail;if(e<1<<t._level+xt){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&Nn],n-=xt;return r}}function Da(t,e,r){e!==void 0&&(e|=0),r!==void 0&&(r|=0);var n=t.__ownerID||new Y1,s=t._origin,i=t._capacity,o=s+e,a=r===void 0?i:r<0?i+r:s+r;if(o===s&&a===i)return t;if(o>=a)return t.clear();for(var c=t._level,u=t._root,l=0;o+l<0;)u=new yc(u&&u.array.length?[void 0,u]:[],n),c+=xt,l+=1<<c;l&&(o+=l,s+=l,a+=l,i+=l);for(var h=Og(i),d=Og(a);d>=1<<c+xt;)u=new yc(u&&u.array.length?[u]:[],n),c+=xt;var f=t._tail,p=d<h?yB(t,a-1):d>h?new yc([],n):f;if(f&&d>h&&o<i&&f.array.length){u=Md(u,n);for(var g=u,m=c;m>xt;m-=xt){var w=h>>>m&Nn;g=g.array[w]=Md(g.array[w],n)}g.array[h>>>xt&Nn]=f}if(a<i&&(p=p&&p.removeAfter(n,0,a)),o>=d)o-=d,a-=d,c=xt,u=null,p=p&&p.removeBefore(n,0,o);else if(o>s||d<h){for(l=0;u;){var v=o>>>c&Nn;if(v!==d>>>c&Nn)break;v&&(l+=(1<<c)*v),c-=xt,u=u.array[v]}u&&o>s&&(u=u.removeBefore(n,c,o-l)),u&&d<h&&(u=u.removeAfter(n,c,d-l)),l&&(o-=l,a-=l)}return t.__ownerID?(t.size=a-o,t._origin=o,t._capacity=a,t._level=c,t._root=u,t._tail=p,t.__hash=void 0,t.__altered=!0,t):xg(o,a,c,u,p)}function Og(t){return t<bs?0:t-1>>>xt<<xt}var ma=function(t){function e(r){return r==null?Zf():GU(r)?r:Zf().withMutations(function(n){var s=ri(r);ys(s.size),s.forEach(function(i,o){return n.set(o,i)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(n,s){var i=this._map.get(n);return i!==void 0?this._list.get(i)[1]:s},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):Zf()},e.prototype.set=function(n,s){return fO(this,n,s)},e.prototype.remove=function(n){return fO(this,n,et)},e.prototype.__iterate=function(n,s){var i=this;return this._list.__iterate(function(o){return o&&n(o[1],o[0],i)},s)},e.prototype.__iterator=function(n,s){return this._list.fromEntrySeq().__iterator(n,s)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var s=this._map.__ensureOwner(n),i=this._list.__ensureOwner(n);return n?vC(s,i,n,this.__hash):this.size===0?Zf():(this.__ownerID=n,this.__altered=!1,this._map=s,this._list=i,this)},e}(af);ma.isOrderedMap=GU;ma.prototype[Cc]=!0;ma.prototype[Am]=ma.prototype.remove;function vC(t,e,r,n){var s=Object.create(ma.prototype);return s.size=t?t.size:0,s._map=t,s._list=e,s.__ownerID=r,s.__hash=n,s.__altered=!1,s}var dO;function Zf(){return dO||(dO=vC(oo(),Vy()))}function fO(t,e,r){var n=t._map,s=t._list,i=n.get(e),o=i!==void 0,a,c;if(r===et){if(!o)return t;s.size>=bs&&s.size>=n.size*2?(c=s.filter(function(u,l){return u!==void 0&&i!==l}),a=c.toKeyedSeq().map(function(u){return u[0]}).flip().toMap(),t.__ownerID&&(a.__ownerID=c.__ownerID=t.__ownerID)):(a=n.remove(e),c=i===s.size-1?s.pop():s.set(i,void 0))}else if(o){if(r===s.get(i)[1])return t;a=n,c=s.set(i,[e,r])}else a=n.set(e,s.size),c=s.set(s.size,[e,r]);return t.__ownerID?(t.size=a.size,t._map=a,t._list=c,t.__hash=void 0,t.__altered=!0,t):vC(a,c)}var wB="@@__IMMUTABLE_STACK__@@";function aA(t){return!!(t&&t[wB])}var EC=function(t){function e(r){return r==null?my():aA(r)?r:my().pushAll(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(n,s){var i=this._head;for(n=Ac(this,n);i&&n--;)i=i.next;return i?i.value:s},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var n=arguments;if(arguments.length===0)return this;for(var s=this.size+arguments.length,i=this._head,o=arguments.length-1;o>=0;o--)i={value:n[o],next:i};return this.__ownerID?(this.size=s,this._head=i,this.__hash=void 0,this.__altered=!0,this):Xf(s,i)},e.prototype.pushAll=function(n){if(n=t(n),n.size===0)return this;if(this.size===0&&aA(n))return n;ys(n.size);var s=this.size,i=this._head;return n.__iterate(function(o){s++,i={value:o,next:i}},!0),this.__ownerID?(this.size=s,this._head=i,this.__hash=void 0,this.__altered=!0,this):Xf(s,i)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):my()},e.prototype.slice=function(n,s){if(Q0(n,s,this.size))return this;var i=Cm(n,this.size),o=Z0(s,this.size);if(o!==this.size)return t.prototype.slice.call(this,n,s);for(var a=this.size-i,c=this._head;i--;)c=c.next;return this.__ownerID?(this.size=a,this._head=c,this.__hash=void 0,this.__altered=!0,this):Xf(a,c)},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?Xf(this.size,this._head,n,this.__hash):this.size===0?my():(this.__ownerID=n,this.__altered=!1,this)},e.prototype.__iterate=function(n,s){var i=this;if(s)return new Ud(this.toArray()).__iterate(function(c,u){return n(c,u,i)},s);for(var o=0,a=this._head;a&&n(a.value,o++,this)!==!1;)a=a.next;return o},e.prototype.__iterator=function(n,s){if(s)return new Ud(this.toArray()).__iterator(n,s);var i=0,o=this._head;return new it(function(){if(o){var a=o.value;return o=o.next,Gt(n,i++,a)}return Rn()})},e}(_l);EC.isStack=aA;var Pn=EC.prototype;Pn[wB]=!0;Pn.shift=Pn.pop;Pn.unshift=Pn.push;Pn.unshiftAll=Pn.pushAll;Pn.withMutations=Sm;Pn.wasAltered=mC;Pn.asImmutable=Tm;Pn["@@transducer/init"]=Pn.asMutable=Im;Pn["@@transducer/step"]=function(t,e){return t.unshift(e)};Pn["@@transducer/result"]=function(t){return t.asImmutable()};function Xf(t,e,r,n){var s=Object.create(Pn);return s.size=t,s._head=e,s.__ownerID=r,s.__hash=n,s.__altered=!1,s}var pO;function my(){return pO||(pO=Xf(0))}var bB="@@__IMMUTABLE_SET__@@";function _C(t){return!!(t&&t[bB])}function vB(t){return _C(t)&&lo(t)}function EB(t,e){if(t===e)return!0;if(!Is(e)||t.size!==void 0&&e.size!==void 0&&t.size!==e.size||t.__hash!==void 0&&e.__hash!==void 0&&t.__hash!==e.__hash||Vt(t)!==Vt(e)||Zs(t)!==Zs(e)||lo(t)!==lo(e))return!1;if(t.size===0&&e.size===0)return!0;var r=!Q1(t);if(lo(t)){var n=t.entries();return e.every(function(c,u){var l=n.next().value;return l&&vs(l[1],c)&&(r||vs(l[0],u))})&&n.next().done}var s=!1;if(t.size===void 0)if(e.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else{s=!0;var i=t;t=e,e=i}var o=!0,a=e.__iterate(function(c,u){if(r?!t.has(c):s?!vs(c,t.get(u,et)):!vs(t.get(u,et),c))return o=!1,!1});return o&&t.size===a}function Al(t,e){var r=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function Hw(t){if(!t||typeof t!="object")return t;if(!Is(t)){if(!Sc(t))return t;t=Zn(t)}if(Vt(t)){var e={};return t.__iterate(function(n,s){e[s]=Hw(n)}),e}var r=[];return t.__iterate(function(n){r.push(Hw(n))}),r}var sb=function(t){function e(r){return r==null?ep():_C(r)&&!lo(r)?r:ep().withMutations(function(n){var s=t(r);ys(s.size),s.forEach(function(i){return n.add(i)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(ri(n).keySeq())},e.intersect=function(n){return n=ln(n).toArray(),n.length?Yr.intersect.apply(e(n.pop()),n):ep()},e.union=function(n){return n=ln(n).toArray(),n.length?Yr.union.apply(e(n.pop()),n):ep()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(n){return this._map.has(n)},e.prototype.add=function(n){return yy(this,this._map.set(n,n))},e.prototype.remove=function(n){return yy(this,this._map.remove(n))},e.prototype.clear=function(){return yy(this,this._map.clear())},e.prototype.map=function(n,s){var i=this,o=!1,a=yy(this,this._map.mapEntries(function(c){var u=c[1],l=n.call(s,u,u,i);return l!==u&&(o=!0),[l,l]},s));return o?a:this},e.prototype.union=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return n=n.filter(function(i){return i.size!==0}),n.length===0?this:this.size===0&&!this.__ownerID&&n.length===1?this.constructor(n[0]):this.withMutations(function(i){for(var o=0;o<n.length;o++)typeof n[o]=="string"?i.add(n[o]):t(n[o]).forEach(function(a){return i.add(a)})})},e.prototype.intersect=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];if(n.length===0)return this;n=n.map(function(o){return t(o)});var i=[];return this.forEach(function(o){n.every(function(a){return a.includes(o)})||i.push(o)}),this.withMutations(function(o){i.forEach(function(a){o.remove(a)})})},e.prototype.subtract=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];if(n.length===0)return this;n=n.map(function(o){return t(o)});var i=[];return this.forEach(function(o){n.some(function(a){return a.includes(o)})&&i.push(o)}),this.withMutations(function(o){i.forEach(function(a){o.remove(a)})})},e.prototype.sort=function(n){return Rg(Bd(this,n))},e.prototype.sortBy=function(n,s){return Rg(Bd(this,s,n))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(n,s){var i=this;return this._map.__iterate(function(o){return n(o,o,i)},s)},e.prototype.__iterator=function(n,s){return this._map.__iterator(n,s)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var s=this._map.__ensureOwner(n);return n?this.__make(s,n):this.size===0?this.__empty():(this.__ownerID=n,this._map=s,this)},e}(ef);sb.isSet=_C;var Yr=sb.prototype;Yr[bB]=!0;Yr[Am]=Yr.remove;Yr.merge=Yr.concat=Yr.union;Yr.withMutations=Sm;Yr.asImmutable=Tm;Yr["@@transducer/init"]=Yr.asMutable=Im;Yr["@@transducer/step"]=function(t,e){return t.add(e)};Yr["@@transducer/result"]=function(t){return t.asImmutable()};Yr.__empty=ep;Yr.__make=_B;function yy(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:e.size===0?t.__empty():t.__make(e)}function _B(t,e){var r=Object.create(Yr);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var gO;function ep(){return gO||(gO=_B(oo()))}var lue=function(t){function e(r,n,s){if(s===void 0&&(s=1),!(this instanceof e))return new e(r,n,s);if(wp(s!==0,"Cannot step a Range by 0"),wp(r!==void 0,"You must define a start value when using Range"),wp(n!==void 0,"You must define an end value when using Range"),s=Math.abs(s),n<r&&(s=-s),this._start=r,this._end=n,this._step=s,this.size=Math.max(0,Math.ceil((n-r)/s-1)+1),this.size===0){if(Xv)return Xv;Xv=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},e.prototype.get=function(n,s){return this.has(n)?this._start+Ac(this,n)*this._step:s},e.prototype.includes=function(n){var s=(n-this._start)/this._step;return s>=0&&s<this.size&&s===Math.floor(s)},e.prototype.slice=function(n,s){return Q0(n,s,this.size)?this:(n=Cm(n,this.size),s=Z0(s,this.size),s<=n?new e(0,0):new e(this.get(n,this._end),this.get(s,this._end),this._step))},e.prototype.indexOf=function(n){var s=n-this._start;if(s%this._step===0){var i=s/this._step;if(i>=0&&i<this.size)return i}return-1},e.prototype.lastIndexOf=function(n){return this.indexOf(n)},e.prototype.__iterate=function(n,s){for(var i=this.size,o=this._step,a=s?this._start+(i-1)*o:this._start,c=0;c!==i&&n(a,s?i-++c:c++,this)!==!1;)a+=s?-o:o;return c},e.prototype.__iterator=function(n,s){var i=this.size,o=this._step,a=s?this._start+(i-1)*o:this._start,c=0;return new it(function(){if(c===i)return Rn();var u=a;return a+=s?-o:o,Gt(n,s?i-++c:c++,u)})},e.prototype.equals=function(n){return n instanceof e?this._start===n._start&&this._end===n._end&&this._step===n._step:EB(this,n)},e}(Ri),Xv;function rs(t,e,r){for(var n=sB(e),s=0;s!==n.length;)if(t=iB(t,n[s++],et),t===et)return r;return t}function AB(t,e){return rs(this,t,e)}function hue(t,e){return rs(t,e,et)!==et}function due(t){return hue(this,t)}function CB(){ys(this.size);var t={};return this.__iterate(function(e,r){t[r]=e}),t}ln.Iterator=it;Al(ln,{toArray:function(){ys(this.size);var e=new Array(this.size||0),r=Vt(this),n=0;return this.__iterate(function(s,i){e[n++]=r?[i,s]:s}),e},toIndexedSeq:function(){return new JU(this)},toJS:function(){return Hw(this)},toKeyedSeq:function(){return new rb(this,!0)},toMap:function(){return af(this.toKeyedSeq())},toObject:CB,toOrderedMap:function(){return ma(this.toKeyedSeq())},toOrderedSet:function(){return Rg(Vt(this)?this.valueSeq():this)},toSet:function(){return sb(Vt(this)?this.valueSeq():this)},toSetSeq:function(){return new YU(this)},toSeq:function(){return Zs(this)?this.toIndexedSeq():Vt(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return EC(Vt(this)?this.valueSeq():this)},toList:function(){return nb(Vt(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,r){return this.size===0?e+r:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+r},concat:function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return Nt(this,Hce(this,e))},includes:function(e){return this.some(function(r){return vs(r,e)})},entries:function(){return this.__iterator(Ns)},every:function(e,r){ys(this.size);var n=!0;return this.__iterate(function(s,i,o){if(!e.call(r,s,i,o))return n=!1,!1}),n},filter:function(e,r){return Nt(this,eB(this,e,r,!0))},partition:function(e,r){return Fce(this,e,r)},find:function(e,r,n){var s=this.findEntry(e,r);return s?s[1]:n},forEach:function(e,r){return ys(this.size),this.__iterate(r?e.bind(r):e)},join:function(e){ys(this.size),e=e!==void 0?""+e:",";var r="",n=!0;return this.__iterate(function(s){n?n=!1:r+=e,r+=s!=null?s.toString():""}),r},keys:function(){return this.__iterator(rf)},map:function(e,r){return Nt(this,XU(this,e,r))},reduce:function(e,r,n){return mO(this,e,r,n,arguments.length<2,!1)},reduceRight:function(e,r,n){return mO(this,e,r,n,arguments.length<2,!0)},reverse:function(){return Nt(this,sC(this,!0))},slice:function(e,r){return Nt(this,iC(this,e,r,!0))},some:function(e,r){ys(this.size);var n=!1;return this.__iterate(function(s,i,o){if(e.call(r,s,i,o))return n=!0,!1}),n},sort:function(e){return Nt(this,Bd(this,e))},values:function(){return this.__iterator(Ts)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(e,r){return Dd(e?this.toSeq().filter(e,r):this)},countBy:function(e,r){return Lce(this,e,r)},equals:function(e){return EB(this,e)},entrySeq:function(){var e=this;if(e._cache)return new Ud(e._cache);var r=e.toSeq().map(pue).toIndexedSeq();return r.fromEntrySeq=function(){return e.toSeq()},r},filterNot:function(e,r){return this.filter(eE(e),r)},findEntry:function(e,r,n){var s=n;return this.__iterate(function(i,o,a){if(e.call(r,i,o,a))return s=[o,i],!1}),s},findKey:function(e,r){var n=this.findEntry(e,r);return n&&n[0]},findLast:function(e,r,n){return this.toKeyedSeq().reverse().find(e,r,n)},findLastEntry:function(e,r,n){return this.toKeyedSeq().reverse().findEntry(e,r,n)},findLastKey:function(e,r){return this.toKeyedSeq().reverse().findKey(e,r)},first:function(e){return this.find(BU,null,e)},flatMap:function(e,r){return Nt(this,qce(this,e,r))},flatten:function(e){return Nt(this,rB(this,e,!0))},fromEntrySeq:function(){return new QU(this)},get:function(e,r){return this.find(function(n,s){return vs(s,e)},void 0,r)},getIn:AB,groupBy:function(e,r){return Mce(this,e,r)},has:function(e){return this.get(e,et)!==et},hasIn:due,isSubset:function(e){return e=typeof e.includes=="function"?e:ln(e),this.every(function(r){return e.includes(r)})},isSuperset:function(e){return e=typeof e.isSubset=="function"?e:ln(e),e.isSubset(this)},keyOf:function(e){return this.findKey(function(r){return vs(r,e)})},keySeq:function(){return this.toSeq().map(fue).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return py(this,e)},maxBy:function(e,r){return py(this,r,e)},min:function(e){return py(this,e?yO(e):bO)},minBy:function(e,r){return py(this,r?yO(r):bO,e)},rest:function(){return this.slice(1)},skip:function(e){return e===0?this:this.slice(Math.max(0,e))},skipLast:function(e){return e===0?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,r){return Nt(this,tB(this,e,r,!0))},skipUntil:function(e,r){return this.skipWhile(eE(e),r)},sortBy:function(e,r){return Nt(this,Bd(this,r,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,r){return Nt(this,jce(this,e,r))},takeUntil:function(e,r){return this.takeWhile(eE(e),r)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=gue(this))}});var fn=ln.prototype;fn[MU]=!0;fn[X0]=fn.values;fn.toJSON=fn.toArray;fn.__toStringMapper=Ig;fn.inspect=fn.toSource=function(){return this.toString()};fn.chain=fn.flatMap;fn.contains=fn.includes;Al(ri,{flip:function(){return Nt(this,ZU(this))},mapEntries:function(e,r){var n=this,s=0;return Nt(this,this.toSeq().map(function(i,o){return e.call(r,[o,i],s++,n)}).fromEntrySeq())},mapKeys:function(e,r){var n=this;return Nt(this,this.toSeq().flip().map(function(s,i){return e.call(r,s,i,n)}).flip())}});var Nm=ri.prototype;Nm[Fw]=!0;Nm[X0]=fn.entries;Nm.toJSON=CB;Nm.__toStringMapper=function(t,e){return Ig(e)+": "+Ig(t)};Al(_l,{toKeyedSeq:function(){return new rb(this,!1)},filter:function(e,r){return Nt(this,eB(this,e,r,!1))},findIndex:function(e,r){var n=this.findEntry(e,r);return n?n[0]:-1},indexOf:function(e){var r=this.keyOf(e);return r===void 0?-1:r},lastIndexOf:function(e){var r=this.lastKeyOf(e);return r===void 0?-1:r},reverse:function(){return Nt(this,sC(this,!1))},slice:function(e,r){return Nt(this,iC(this,e,r,!1))},splice:function(e,r){var n=arguments.length;if(r=Math.max(r||0,0),n===0||n===2&&!r)return this;e=Cm(e,e<0?this.count():this.size);var s=this.slice(0,e);return Nt(this,n===1?s:s.concat(so(arguments,2),this.slice(e+r)))},findLastIndex:function(e,r){var n=this.findLastEntry(e,r);return n?n[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return Nt(this,rB(this,e,!1))},get:function(e,r){return e=Ac(this,e),e<0||this.size===1/0||this.size!==void 0&&e>this.size?r:this.find(function(n,s){return s===e},void 0,r)},has:function(e){return e=Ac(this,e),e>=0&&(this.size!==void 0?this.size===1/0||e<this.size:this.indexOf(e)!==-1)},interpose:function(e){return Nt(this,Wce(this,e))},interleave:function(){var e=[this].concat(so(arguments)),r=gy(this.toSeq(),Ri.of,e),n=r.flatten(!0);return r.size&&(n.size=r.size*e.length),Nt(this,n)},keySeq:function(){return lue(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,r){return Nt(this,tB(this,e,r,!1))},zip:function(){var e=[this].concat(so(arguments));return Nt(this,gy(this,wO,e))},zipAll:function(){var e=[this].concat(so(arguments));return Nt(this,gy(this,wO,e,!0))},zipWith:function(e){var r=so(arguments);return r[0]=this,Nt(this,gy(this,e,r))}});var cf=_l.prototype;cf[jw]=!0;cf[Cc]=!0;Al(ef,{get:function(e,r){return this.has(e)?e:r},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var Fd=ef.prototype;Fd.has=fn.includes;Fd.contains=Fd.includes;Fd.keys=Fd.values;Al(Rc,Nm);Al(Ri,cf);Al(sf,Fd);function mO(t,e,r,n,s,i){return ys(t.size),t.__iterate(function(o,a,c){s?(s=!1,r=o):r=e.call(n,r,o,a,c)},i),r}function fue(t,e){return e}function pue(t,e){return[e,t]}function eE(t){return function(){return!t.apply(this,arguments)}}function yO(t){return function(){return-t.apply(this,arguments)}}function wO(){return so(arguments)}function bO(t,e){return t<e?1:t>e?-1:0}function gue(t){if(t.size===1/0)return 0;var e=lo(t),r=Vt(t),n=e?1:0;return t.__iterate(r?e?function(s,i){n=31*n+vO(ms(s),ms(i))|0}:function(s,i){n=n+vO(ms(s),ms(i))|0}:e?function(s){n=31*n+ms(s)|0}:function(s){n=n+ms(s)|0}),mue(t.size,n)}function mue(t,e){return e=Uf(e,3432918353),e=Uf(e<<15|e>>>-15,461845907),e=Uf(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=Uf(e^e>>>16,2246822507),e=Uf(e^e>>>13,3266489909),e=tb(e^e>>>16),e}function vO(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var Rg=function(t){function e(r){return r==null?cA():vB(r)?r:cA().withMutations(function(n){var s=ef(r);ys(s.size),s.forEach(function(i){return n.add(i)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(ri(n).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(sb);Rg.isOrderedSet=vB;var Cl=Rg.prototype;Cl[Cc]=!0;Cl.zip=cf.zip;Cl.zipWith=cf.zipWith;Cl.zipAll=cf.zipAll;Cl.__empty=cA;Cl.__make=SB;function SB(t,e){var r=Object.create(Cl);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var EO;function cA(){return EO||(EO=SB(Zf()))}function yue(t){if(tf(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(wo(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(t===null||typeof t!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var Ur=function(e,r){var n;yue(e);var s=function(a){var c=this;if(a instanceof s)return a;if(!(this instanceof s))return new s(a);if(!n){n=!0;var u=Object.keys(e),l=i._indices={};i._name=r,i._keys=u,i._defaultValues=e;for(var h=0;h<u.length;h++){var d=u[h];l[d]=h,i[d]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+CC(this)+' with property "'+d+'" since that property name is part of the Record API.'):wue(i,d)}}return this.__ownerID=void 0,this._values=nb().withMutations(function(f){f.setSize(c._keys.length),ri(a).forEach(function(p,g){f.set(c._indices[g],p===c._defaultValues[g]?void 0:p)})}),this},i=s.prototype=Object.create(Lt);return i.constructor=s,r&&(s.displayName=r),s};Ur.prototype.toString=function(){for(var e=CC(this)+" { ",r=this._keys,n,s=0,i=r.length;s!==i;s++)n=r[s],e+=(s?", ":"")+n+": "+Ig(this.get(n));return e+" }"};Ur.prototype.equals=function(e){return this===e||tf(e)&&jd(this).equals(jd(e))};Ur.prototype.hashCode=function(){return jd(this).hashCode()};Ur.prototype.has=function(e){return this._indices.hasOwnProperty(e)};Ur.prototype.get=function(e,r){if(!this.has(e))return r;var n=this._indices[e],s=this._values.get(n);return s===void 0?this._defaultValues[e]:s};Ur.prototype.set=function(e,r){if(this.has(e)){var n=this._values.set(this._indices[e],r===this._defaultValues[e]?void 0:r);if(n!==this._values&&!this.__ownerID)return AC(this,n)}return this};Ur.prototype.remove=function(e){return this.set(e)};Ur.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:AC(this,e)};Ur.prototype.wasAltered=function(){return this._values.wasAltered()};Ur.prototype.toSeq=function(){return jd(this)};Ur.prototype.toJS=function(){return Hw(this)};Ur.prototype.entries=function(){return this.__iterator(Ns)};Ur.prototype.__iterator=function(e,r){return jd(this).__iterator(e,r)};Ur.prototype.__iterate=function(e,r){return jd(this).__iterate(e,r)};Ur.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var r=this._values.__ensureOwner(e);return e?AC(this,r,e):(this.__ownerID=e,this._values=r,this)};Ur.isRecord=tf;Ur.getDescriptiveName=CC;var Lt=Ur.prototype;Lt[jU]=!0;Lt[Am]=Lt.remove;Lt.deleteIn=Lt.removeIn=uC;Lt.getIn=AB;Lt.hasIn=fn.hasIn;Lt.merge=cB;Lt.mergeWith=uB;Lt.mergeIn=pC;Lt.mergeDeep=hB;Lt.mergeDeepWith=dB;Lt.mergeDeepIn=gC;Lt.setIn=cC;Lt.update=lC;Lt.updateIn=hC;Lt.withMutations=Sm;Lt.asMutable=Im;Lt.asImmutable=Tm;Lt[X0]=Lt.entries;Lt.toJSON=Lt.toObject=fn.toObject;Lt.inspect=Lt.toSource=function(){return this.toString()};function AC(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._values=e,n.__ownerID=r,n}function CC(t){return t.constructor.displayName||t.constructor.name||"Record"}function jd(t){return tC(t._keys.map(function(e){return[e,t.get(e)]}))}function wue(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(r){wp(this.__ownerID,"Cannot set on an immutable record."),this.set(e,r)}})}catch{}}const on=(t,e,...r)=>qc(function*(){for(;;){const n=yield zae(t);yield AU(e,...r.concat(n))}}),ya=t=>JSON.parse(JSON.stringify(t)),_O={initialised:!1,isExpand:!1},IB=El({name:"sidebar",initialState:_O,reducers:{clear:(t,e)=>{const r=ya(_O),n=Object.keys(r);for(let s in n)t=ut(t,[n[s]],r[n[s]]);return t},init:(t,e)=>(t=ut(t,["initialised"],!0),t=ut(t,["isExpand"],!1),t),expand:(t,e)=>(t=ut(t,["isExpand"],e.payload),t)}}),{clear:TB,init:bue,expand:vue}=IB.actions,Eue=IB.reducer,AO={initialised:!1,milliseconds:Date.now()},NB=El({name:"clock",initialState:AO,reducers:{clear:(t,e)=>{const r=ya(AO),n=Object.keys(r);for(let s in n)t=ut(t,[n[s]],r[n[s]]);return t},init:(t,e)=>(t=ut(t,["initialised"],!0),t=ut(t,["milliseconds"],Date.now()),t),tick:(t,e)=>(t=ut(t,["milliseconds"],Date.now()),t)}}),{clear:xB,init:_ue,tick:Aue}=NB.actions,Cue=NB.reducer,Sue={status:"IDLE",isAvailable:!1,updatedAt:0,pingInterval:60*1e3},OB=El({name:"serverApi",initialState:Sue,reducers:{init:(t,e)=>(t=ut(t,["status"],"PENDING"),t),ping:(t,e)=>(t=ut(t,["status"],"PENDING"),t),pingSucceeded:(t,e)=>(t=ut(t,["status"],"SUCCEEDED"),t=ut(t,["updatedAt"],Date.now()),t=ut(t,["isAvailable"],!0),t),pingFailed:(t,e)=>(t=ut(t,["status"],"FAILED"),t=ut(t,["updatedAt"],Date.now()),t=ut(t,["isAvailable"],!1),t)}}),{init:Iue,ping:Tue,pingSucceeded:uA,pingFailed:tp}=OB.actions,Nue=OB.reducer,CO={blockNumberBsc:0},RB=El({name:"onChainData",initialState:CO,reducers:{clear:(t,e)=>{const r=ya(CO),n=Object.keys(r);for(let s in n)t=ut(t,[n[s]],r[n[s]]);return t},setBlockNumberBsc:(t,e)=>(e.payload>t.blockNumberBsc&&(t=ut(t,["blockNumberBsc"],e.payload)),t)}}),{clear:PB,setBlockNumberBsc:xue}=RB.actions,Oue=RB.reducer,lA={address:null,bsc:{bnb:"0.0",usdt:"0.0"}},kB=El({name:"balances",initialState:lA,reducers:{update:(t,e)=>t,clear:(t,e)=>{const r=ya(lA);t=ut(t,["address"],r.address);const n=Object.keys(r.bsc);for(let s in n)t=ut(t,["bsc",n[s]],r.bsc[n[s]]);return t},setAddress:(t,e)=>(t=ut(t,["address"],e.payload),t),setBsc:(t,e)=>{t=ut(t,["address"],e.payload.address);const r=ya(e.payload.balances),n=Object.keys(r);for(let s in n)t=ut(t,["bsc",n[s]],r[n[s]]);return t}}}),{update:Rue,clear:DB,setAddress:Pue,setBsc:hA}=kB.actions,kue=kB.reducer,dA={updatedAt:Date.now(),currentBlock:-1,_buybackStarted:!1,_drawStarted:!1,_saleStopped:!1,_winnersAwarded:!1,_buyers:0,_ticketsForCertificate:0,_totalRaised:0,_totalRefRewards:0,_totalRefRewardsClaimed:0,_totalTeamRewards:0,_totalTeamRewardsClaimed:0},UB=El({name:"presale",initialState:dA,reducers:{clear:(t,e)=>{const r=ya(dA),n=Object.keys(r);for(let s in n)t=ut(t,[n[s]],r[n[s]]);return t=ut(t,["updatedAt"],Date.now()),t},set:(t,e)=>{const r=ya(e.payload),n=Object.keys(r);for(let s in n)t=ut(t,[n[s]],r[n[s]]);return t=ut(t,["updatedAt"],Date.now()),t}}}),{clear:BB,set:fA}=UB.actions,Due=UB.reducer,pA={updatedAt:0,top:[],latest:[]},$B=El({name:"data",initialState:pA,reducers:{clear:(t,e)=>{const r=ya(pA),n=Object.keys(r);for(let s in n)t=ut(t,[n[s]],r[n[s]]);return t=ut(t,["updatedAt"],Date.now()),t},set:(t,e)=>{const r=ya(e.payload),n=Object.keys(r);for(let s in n)t=ut(t,[n[s]],r[n[s]]);return t=ut(t,["updatedAt"],Date.now()),t}}}),{clear:Uue,set:Bue}=$B.actions,$ue=$B.reducer,Lue=z3({presale:Due,balances:kue,sidebar:Eue,clock:Cue,serverApi:Nue,onChainData:Oue,data:$ue}),Mue="sidebar/clear",Fue=Object.freeze(Object.defineProperty({__proto__:null,clear:TB,expand:vue,init:bue},Symbol.toStringTag,{value:"Module"}));function jue({api:t}){return{clearSaga:function*(){yield qr(TB())}}}function zue({api:t}){const{clearSaga:e}=jue({api:t});return function*(){yield on(Mue,e)}}const LB="clock/clear",Hue="clock/init",que="clock/tick",Wue=Object.freeze(Object.defineProperty({__proto__:null,CLEAR:LB,INIT:Hue,TICK:que},Symbol.toStringTag,{value:"Module"})),Vue=Object.freeze(Object.defineProperty({__proto__:null,clear:xB,init:_ue,tick:Aue},Symbol.toStringTag,{value:"Module"}));function Gue({api:t}){return{clearSaga:function*(){yield qr(xB())}}}function Kue({api:t}){const{clearSaga:e}=Gue({api:t});return function*(){yield on(LB,e)}}const Jue="serverApi/init",Yue="serverApi/ping",Que=Object.freeze(Object.defineProperty({__proto__:null,init:Iue,ping:Tue,pingFailed:tp,pingSucceeded:uA},Symbol.toStringTag,{value:"Module"})),ib="serverApi",MB=t=>rs(t,[ib,"isAvailable"],!1),FB=t=>rs(t,[ib,"updatedAt"],0),jB=t=>rs(t,[ib,"pingInterval"],0),zB=t=>rs(t,[ib,"status"],"IDLE"),Zue=Object.freeze(Object.defineProperty({__proto__:null,isAvailable:MB,pingInterval:jB,status:zB,updatedAt:FB},Symbol.toStringTag,{value:"Module"})),Xue=Object.freeze(Object.defineProperty({__proto__:null,clear:PB,setBlockNumberBsc:xue},Symbol.toStringTag,{value:"Module"})),ele=Object.freeze(Object.defineProperty({__proto__:null,clear:DB,setAddress:Pue,setBsc:hA,update:Rue},Symbol.toStringTag,{value:"Module"})),tle=Object.freeze(Object.defineProperty({__proto__:null,clear:BB,set:fA},Symbol.toStringTag,{value:"Module"})),rle=Object.freeze(Object.defineProperty({__proto__:null,clear:Uue,set:Bue},Symbol.toStringTag,{value:"Module"})),SO={sidebar:Fue,clock:Vue,serverApi:Que,onChainData:Xue,balances:ele,presale:tle,data:rle};function nle({api:t}){return{pingSaga:function*(){try{const n=yield io(zB),s=yield io(FB),i=yield io(jB);if(["SUCCEEDED","PENDING"].includes(n)&&s+i>Date.now())return;(yield t.getApiServerV1Ping()).ok?yield qr(uA()):yield qr(tp())}catch{yield qr(tp())}},updatePresaleStateSaga:function*(){try{if(!(yield io(MB)))return;const s=yield t.getApiServerV1StateData();s.ok?(yield qr(SO.presale.set(s.data.presale)),yield qr(SO.data.set({top:s.data.top,latest:s.data.latest})),yield qr(uA())):yield qr(tp())}catch{yield qr(tp())}}}}const HB="onChainData/clear",sle="onChainData/setBlockNumberBsc",ile=Object.freeze(Object.defineProperty({__proto__:null,CLEAR:HB,SET_BLOCK_NUMBER_BSC:sle},Symbol.toStringTag,{value:"Module"})),IO="balances/update",TO="presale/update",ole="presale/clear",zd={clock:Wue,onChainData:ile};function ale({api:t}){const{pingSaga:e,updatePresaleStateSaga:r}=nle({api:t});return function*(){yield on(Jue,e),yield on(Yue,e),yield on(zd.clock.TICK,e),yield on(zd.onChainData.SET_BLOCK_NUMBER_BSC,r)}}function cle(){return{clearSaga:function*(){yield qr(PB())}}}function ule(){const{clearSaga:t}=cle();return function*(){yield on(HB,t)}}const lle="balances",NO=t=>rs(t,[lle,"address"],lA.address);function hle({api:t}){return{clearSaga:function*(){yield qr(DB())},updateBscBalanceBnbSaga:function*(){const s=yield io(NO);if(!s)return;const o=yield t.getProviderBsc().getBalance(s);yield qr(hA({address:s,balances:{bnb:f1(o)}}))},updateBscBalanceUsdtSaga:function*(){const s=yield io(NO);if(!s)return;const{contract:i,decimals:o}=t.getUsdtBsc(),a=yield i.balanceOf(s);yield qr(hA({address:s,balances:{usdt:d1(a,o)}}))}}}function dle({api:t}){const{updateBscBalanceBnbSaga:e,updateBscBalanceUsdtSaga:r}=hle({api:t});return function*(){yield on(IO,e),yield on(IO,r),yield on(zd.onChainData.SET_BLOCK_NUMBER_BSC,e),yield on(zd.onChainData.SET_BLOCK_NUMBER_BSC,r)}}const qB="sidebar",fle=t=>rs(t,[qB,"initialised"],!1),ple=t=>rs(t,[qB,"isExpand"],!1),gle=Object.freeze(Object.defineProperty({__proto__:null,isExpand:ple,isInitialised:fle},Symbol.toStringTag,{value:"Module"})),mle="onChainData",yle=t=>rs(t,[mle,"blockNumberBsc"],0),wle=Object.freeze(Object.defineProperty({__proto__:null,getBlockNumberBsc:yle},Symbol.toStringTag,{value:"Module"})),ble="presale",vle=t=>rs(t,[ble],dA),Ele=Object.freeze(Object.defineProperty({__proto__:null,get:vle},Symbol.toStringTag,{value:"Module"})),SC="data",_le=t=>rs(t,[SC],pA),Ale=t=>rs(t,[SC,"top"],[]),Cle=t=>rs(t,[SC,"latest"],[]),Sle=Object.freeze(Object.defineProperty({__proto__:null,get:_le,getLatest:Cle,getTop:Ale},Symbol.toStringTag,{value:"Module"})),wy={sidebar:gle,serverApi:Zue,onChainData:wle,presale:Ele,data:Sle};function Ile({api:t}){return{clearSaga:function*(){yield qr(BB())},updatePresaleBscStateSaga:function*(){if(yield io(wy.serverApi.isAvailable))return;const i=yield io(wy.onChainData.getBlockNumberBsc),{contract:o}=t.getPresaleBsc(),a=yield o.getState();yield qr(fA({...a.toObject(),currentBlock:i,updatedAt:Date.now()}))},updatePresaleBscCounterSaga:function*(){if(yield io(wy.serverApi.isAvailable))return;const i=yield io(wy.onChainData.getBlockNumberBsc),{contract:o}=t.getPresaleBsc();let a=yield o.getCounter();a=a.toObject(),Object.keys(a).forEach(c=>{switch(c){case"_buyers":case"_ticketsForCertificate":a[c]=Number(a[c]);break;default:a[c]=Number(f1(a[c]));break}}),yield qr(fA({...a,currentBlock:i,updatedAt:Date.now()}))}}}function Tle({api:t}){const{clearSaga:e,updatePresaleBscStateSaga:r,updatePresaleBscCounterSaga:n}=Ile({api:t});return function*(){yield on(ole,e),yield on(TO,r),yield on(TO,n),yield on(zd.onChainData.SET_BLOCK_NUMBER_BSC,r),yield on(zd.onChainData.SET_BLOCK_NUMBER_BSC,n)}}const Nle="sagas/rootSaga";function*xle(){try{const t="background: white; color: black; font-size: 48px;",e="font-size: 18px;";console.log("========================================================================================"),console.log(`%c Version ${eoe}`,e),console.log("========================================================================================"),console.log(`%c ${D3} `,t),console.log("========================================================================================"),console.log("%c This browser feature is intended for developers.",e),console.log("%c If someone told you to copy-paste something here,",e),console.log("%c it is a scam and will give them access to your money!",e),console.log("========================================================================================")}catch(t){console.error(Nle,"welcomeSaga()",t)}yield!0}function*Ole(t){const e=[AU(xle),qc(zue(t)),qc(Kue(t)),qc(ale(t)),qc(ule()),qc(dle(t)),qc(Tle(t))];yield Hae(e)}function WB(t,e){return function(){return t.apply(e,arguments)}}const{toString:Rle}=Object.prototype,{getPrototypeOf:IC}=Object,{iterator:ob,toStringTag:VB}=Symbol,ab=(t=>e=>{const r=Rle.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Pi=t=>(t=t.toLowerCase(),e=>ab(e)===t),cb=t=>e=>typeof e===t,{isArray:uf}=Array,Pg=cb("undefined");function Ple(t){return t!==null&&!Pg(t)&&t.constructor!==null&&!Pg(t.constructor)&&Jn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const GB=Pi("ArrayBuffer");function kle(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&GB(t.buffer),e}const Dle=cb("string"),Jn=cb("function"),KB=cb("number"),ub=t=>t!==null&&typeof t=="object",Ule=t=>t===!0||t===!1,Gy=t=>{if(ab(t)!=="object")return!1;const e=IC(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(VB in t)&&!(ob in t)},Ble=Pi("Date"),$le=Pi("File"),Lle=Pi("Blob"),Mle=Pi("FileList"),Fle=t=>ub(t)&&Jn(t.pipe),jle=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Jn(t.append)&&((e=ab(t))==="formdata"||e==="object"&&Jn(t.toString)&&t.toString()==="[object FormData]"))},zle=Pi("URLSearchParams"),[Hle,qle,Wle,Vle]=["ReadableStream","Request","Response","Headers"].map(Pi),Gle=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xm(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),uf(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{const i=r?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(n=0;n<o;n++)a=i[n],e.call(null,t[a],a,t)}}function JB(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}const lu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Te,YB=t=>!Pg(t)&&t!==lu;function gA(){const{caseless:t}=YB(this)&&this||{},e={},r=(n,s)=>{const i=t&&JB(e,s)||s;Gy(e[i])&&Gy(n)?e[i]=gA(e[i],n):Gy(n)?e[i]=gA({},n):uf(n)?e[i]=n.slice():e[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&xm(arguments[n],r);return e}const Kle=(t,e,r,{allOwnKeys:n}={})=>(xm(e,(s,i)=>{r&&Jn(s)?t[i]=WB(s,r):t[i]=s},{allOwnKeys:n}),t),Jle=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Yle=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Qle=(t,e,r,n)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&IC(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Zle=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},Xle=t=>{if(!t)return null;if(uf(t))return t;let e=t.length;if(!KB(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},ehe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&IC(Uint8Array)),the=(t,e)=>{const n=(t&&t[ob]).call(t);let s;for(;(s=n.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},rhe=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},nhe=Pi("HTMLFormElement"),she=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),xO=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),ihe=Pi("RegExp"),QB=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};xm(r,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(n[i]=o||s)}),Object.defineProperties(t,n)},ohe=t=>{QB(t,(e,r)=>{if(Jn(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Jn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},ahe=(t,e)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return uf(t)?n(t):n(String(t).split(e)),r},che=()=>{},uhe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function lhe(t){return!!(t&&Jn(t.append)&&t[VB]==="FormData"&&t[ob])}const hhe=t=>{const e=new Array(10),r=(n,s)=>{if(ub(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const i=uf(n)?[]:{};return xm(n,(o,a)=>{const c=r(o,s+1);!Pg(c)&&(i[a]=c)}),e[s]=void 0,i}}return n};return r(t,0)},dhe=Pi("AsyncFunction"),fhe=t=>t&&(ub(t)||Jn(t))&&Jn(t.then)&&Jn(t.catch),ZB=((t,e)=>t?setImmediate:e?((r,n)=>(lu.addEventListener("message",({source:s,data:i})=>{s===lu&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),lu.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Jn(lu.postMessage)),phe=typeof queueMicrotask<"u"?queueMicrotask.bind(lu):typeof Er<"u"&&Er.nextTick||ZB,ghe=t=>t!=null&&Jn(t[ob]),ee={isArray:uf,isArrayBuffer:GB,isBuffer:Ple,isFormData:jle,isArrayBufferView:kle,isString:Dle,isNumber:KB,isBoolean:Ule,isObject:ub,isPlainObject:Gy,isReadableStream:Hle,isRequest:qle,isResponse:Wle,isHeaders:Vle,isUndefined:Pg,isDate:Ble,isFile:$le,isBlob:Lle,isRegExp:ihe,isFunction:Jn,isStream:Fle,isURLSearchParams:zle,isTypedArray:ehe,isFileList:Mle,forEach:xm,merge:gA,extend:Kle,trim:Gle,stripBOM:Jle,inherits:Yle,toFlatObject:Qle,kindOf:ab,kindOfTest:Pi,endsWith:Zle,toArray:Xle,forEachEntry:the,matchAll:rhe,isHTMLForm:nhe,hasOwnProperty:xO,hasOwnProp:xO,reduceDescriptors:QB,freezeMethods:ohe,toObjectSet:ahe,toCamelCase:she,noop:che,toFiniteNumber:uhe,findKey:JB,global:lu,isContextDefined:YB,isSpecCompliantForm:lhe,toJSONObject:hhe,isAsyncFn:dhe,isThenable:fhe,setImmediate:ZB,asap:phe,isIterable:ghe};function Fe(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}ee.inherits(Fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const XB=Fe.prototype,e5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{e5[t]={value:t}});Object.defineProperties(Fe,e5);Object.defineProperty(XB,"isAxiosError",{value:!0});Fe.from=(t,e,r,n,s,i)=>{const o=Object.create(XB);return ee.toFlatObject(t,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),Fe.call(o,t.message,e,r,n,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const mhe=null;function mA(t){return ee.isPlainObject(t)||ee.isArray(t)}function t5(t){return ee.endsWith(t,"[]")?t.slice(0,-2):t}function OO(t,e,r){return t?t.concat(e).map(function(s,i){return s=t5(s),!r&&i?"["+s+"]":s}).join(r?".":""):e}function yhe(t){return ee.isArray(t)&&!t.some(mA)}const whe=ee.toFlatObject(ee,{},null,function(e){return/^is[A-Z]/.test(e)});function lb(t,e,r){if(!ee.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=ee.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,m){return!ee.isUndefined(m[g])});const n=r.metaTokens,s=r.visitor||l,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(e);if(!ee.isFunction(s))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(ee.isDate(p))return p.toISOString();if(!c&&ee.isBlob(p))throw new Fe("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(p)||ee.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):_r.from(p):p}function l(p,g,m){let w=p;if(p&&!m&&typeof p=="object"){if(ee.endsWith(g,"{}"))g=n?g:g.slice(0,-2),p=JSON.stringify(p);else if(ee.isArray(p)&&yhe(p)||(ee.isFileList(p)||ee.endsWith(g,"[]"))&&(w=ee.toArray(p)))return g=t5(g),w.forEach(function(E,A){!(ee.isUndefined(E)||E===null)&&e.append(o===!0?OO([g],A,i):o===null?g:g+"[]",u(E))}),!1}return mA(p)?!0:(e.append(OO(m,g,i),u(p)),!1)}const h=[],d=Object.assign(whe,{defaultVisitor:l,convertValue:u,isVisitable:mA});function f(p,g){if(!ee.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(p),ee.forEach(p,function(w,v){(!(ee.isUndefined(w)||w===null)&&s.call(e,w,ee.isString(v)?v.trim():v,g,d))===!0&&f(w,g?g.concat(v):[v])}),h.pop()}}if(!ee.isObject(t))throw new TypeError("data must be an object");return f(t),e}function RO(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function TC(t,e){this._pairs=[],t&&lb(t,this,e)}const r5=TC.prototype;r5.append=function(e,r){this._pairs.push([e,r])};r5.toString=function(e){const r=e?function(n){return e.call(this,n,RO)}:RO;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function bhe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function n5(t,e,r){if(!e)return t;const n=r&&r.encode||bhe;ee.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(e,r):i=ee.isURLSearchParams(e)?e.toString():new TC(e,r).toString(n),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class PO{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ee.forEach(this.handlers,function(n){n!==null&&e(n)})}}const s5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vhe=typeof URLSearchParams<"u"?URLSearchParams:TC,Ehe=typeof FormData<"u"?FormData:null,_he=typeof Blob<"u"?Blob:null,Ahe={isBrowser:!0,classes:{URLSearchParams:vhe,FormData:Ehe,Blob:_he},protocols:["http","https","file","blob","url","data"]},NC=typeof window<"u"&&typeof document<"u",yA=typeof navigator=="object"&&navigator||void 0,Che=NC&&(!yA||["ReactNative","NativeScript","NS"].indexOf(yA.product)<0),She=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ihe=NC&&window.location.href||"http://localhost",The=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:NC,hasStandardBrowserEnv:Che,hasStandardBrowserWebWorkerEnv:She,navigator:yA,origin:Ihe},Symbol.toStringTag,{value:"Module"})),an={...The,...Ahe};function Nhe(t,e){return lb(t,new an.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,i){return an.isNode&&ee.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function xhe(t){return ee.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Ohe(t){const e={},r=Object.keys(t);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],e[i]=t[i];return e}function i5(t){function e(r,n,s,i){let o=r[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=i>=r.length;return o=!o&&ee.isArray(s)?s.length:o,c?(ee.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!a):((!s[o]||!ee.isObject(s[o]))&&(s[o]=[]),e(r,n,s[o],i)&&ee.isArray(s[o])&&(s[o]=Ohe(s[o])),!a)}if(ee.isFormData(t)&&ee.isFunction(t.entries)){const r={};return ee.forEachEntry(t,(n,s)=>{e(xhe(n),s,r,0)}),r}return null}function Rhe(t,e,r){if(ee.isString(t))try{return(e||JSON.parse)(t),ee.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Om={transitional:s5,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=ee.isObject(e);if(i&&ee.isHTMLForm(e)&&(e=new FormData(e)),ee.isFormData(e))return s?JSON.stringify(i5(e)):e;if(ee.isArrayBuffer(e)||ee.isBuffer(e)||ee.isStream(e)||ee.isFile(e)||ee.isBlob(e)||ee.isReadableStream(e))return e;if(ee.isArrayBufferView(e))return e.buffer;if(ee.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Nhe(e,this.formSerializer).toString();if((a=ee.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return lb(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),Rhe(e)):e}],transformResponse:[function(e){const r=this.transitional||Om.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(ee.isResponse(e)||ee.isReadableStream(e))return e;if(e&&ee.isString(e)&&(n&&!this.responseType||s)){const o=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Fe.from(a,Fe.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:an.classes.FormData,Blob:an.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],t=>{Om.headers[t]={}});const Phe=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),khe=t=>{const e={};let r,n,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),r=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!r||e[r]&&Phe[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},kO=Symbol("internals");function Bf(t){return t&&String(t).trim().toLowerCase()}function Ky(t){return t===!1||t==null?t:ee.isArray(t)?t.map(Ky):String(t)}function Dhe(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const Uhe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function tE(t,e,r,n,s){if(ee.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!ee.isString(e)){if(ee.isString(n))return e.indexOf(n)!==-1;if(ee.isRegExp(n))return n.test(e)}}function Bhe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function $he(t,e){const r=ee.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,i,o){return this[n].call(this,e,s,i,o)},configurable:!0})})}let Yn=class{constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function i(a,c,u){const l=Bf(c);if(!l)throw new Error("header name must be a non-empty string");const h=ee.findKey(s,l);(!h||s[h]===void 0||u===!0||u===void 0&&s[h]!==!1)&&(s[h||c]=Ky(a))}const o=(a,c)=>ee.forEach(a,(u,l)=>i(u,l,c));if(ee.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(ee.isString(e)&&(e=e.trim())&&!Uhe(e))o(khe(e),r);else if(ee.isObject(e)&&ee.isIterable(e)){let a={},c,u;for(const l of e){if(!ee.isArray(l))throw TypeError("Object iterator must return a key-value pair");a[u=l[0]]=(c=a[u])?ee.isArray(c)?[...c,l[1]]:[c,l[1]]:l[1]}o(a,r)}else e!=null&&i(r,e,n);return this}get(e,r){if(e=Bf(e),e){const n=ee.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(r===!0)return Dhe(s);if(ee.isFunction(r))return r.call(this,s,n);if(ee.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Bf(e),e){const n=ee.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||tE(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let s=!1;function i(o){if(o=Bf(o),o){const a=ee.findKey(n,o);a&&(!r||tE(n,n[a],a,r))&&(delete n[a],s=!0)}}return ee.isArray(e)?e.forEach(i):i(e),s}clear(e){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!e||tE(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const r=this,n={};return ee.forEach(this,(s,i)=>{const o=ee.findKey(n,i);if(o){r[o]=Ky(s),delete r[i];return}const a=e?Bhe(i):String(i).trim();a!==i&&delete r[i],r[a]=Ky(s),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return ee.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&ee.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[kO]=this[kO]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=Bf(o);n[a]||($he(s,o),n[a]=!0)}return ee.isArray(e)?e.forEach(i):i(e),this}};Yn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(Yn.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});ee.freezeMethods(Yn);function rE(t,e){const r=this||Om,n=e||r,s=Yn.from(n.headers);let i=n.data;return ee.forEach(t,function(a){i=a.call(r,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function o5(t){return!!(t&&t.__CANCEL__)}function lf(t,e,r){Fe.call(this,t??"canceled",Fe.ERR_CANCELED,e,r),this.name="CanceledError"}ee.inherits(lf,Fe,{__CANCEL__:!0});function a5(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Fe("Request failed with status code "+r.status,[Fe.ERR_BAD_REQUEST,Fe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Lhe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Mhe(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),l=n[i];o||(o=u),r[s]=c,n[s]=u;let h=i,d=0;for(;h!==s;)d+=r[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),u-o<e)return;const f=l&&u-l;return f?Math.round(d*1e3/f):void 0}}function Fhe(t,e){let r=0,n=1e3/e,s,i;const o=(u,l=Date.now())=>{r=l,s=null,i&&(clearTimeout(i),i=null),t.apply(null,u)};return[(...u)=>{const l=Date.now(),h=l-r;h>=n?o(u,l):(s=u,i||(i=setTimeout(()=>{i=null,o(s)},n-h)))},()=>s&&o(s)]}const qw=(t,e,r=3)=>{let n=0;const s=Mhe(50,250);return Fhe(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,c=o-n,u=s(c),l=o<=a;n=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:u||void 0,estimated:u&&a&&l?(a-o)/u:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},r)},DO=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},UO=t=>(...e)=>ee.asap(()=>t(...e)),jhe=an.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,an.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(an.origin),an.navigator&&/(msie|trident)/i.test(an.navigator.userAgent)):()=>!0,zhe=an.hasStandardBrowserEnv?{write(t,e,r,n,s,i){const o=[t+"="+encodeURIComponent(e)];ee.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),ee.isString(n)&&o.push("path="+n),ee.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Hhe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function qhe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function c5(t,e,r){let n=!Hhe(e);return t&&(n||r==!1)?qhe(t,e):e}const BO=t=>t instanceof Yn?{...t}:t;function ll(t,e){e=e||{};const r={};function n(u,l,h,d){return ee.isPlainObject(u)&&ee.isPlainObject(l)?ee.merge.call({caseless:d},u,l):ee.isPlainObject(l)?ee.merge({},l):ee.isArray(l)?l.slice():l}function s(u,l,h,d){if(ee.isUndefined(l)){if(!ee.isUndefined(u))return n(void 0,u,h,d)}else return n(u,l,h,d)}function i(u,l){if(!ee.isUndefined(l))return n(void 0,l)}function o(u,l){if(ee.isUndefined(l)){if(!ee.isUndefined(u))return n(void 0,u)}else return n(void 0,l)}function a(u,l,h){if(h in e)return n(u,l);if(h in t)return n(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,l,h)=>s(BO(u),BO(l),h,!0)};return ee.forEach(Object.keys(Object.assign({},t,e)),function(l){const h=c[l]||s,d=h(t[l],e[l],l);ee.isUndefined(d)&&h!==a||(r[l]=d)}),r}const u5=t=>{const e=ll({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=Yn.from(o),e.url=n5(c5(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(ee.isFormData(r)){if(an.hasStandardBrowserEnv||an.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...l]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...l].join("; "))}}if(an.hasStandardBrowserEnv&&(n&&ee.isFunction(n)&&(n=n(e)),n||n!==!1&&jhe(e.url))){const u=s&&i&&zhe.read(i);u&&o.set(s,u)}return e},Whe=typeof XMLHttpRequest<"u",Vhe=Whe&&function(t){return new Promise(function(r,n){const s=u5(t);let i=s.data;const o=Yn.from(s.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:u}=s,l,h,d,f,p;function g(){f&&f(),p&&p(),s.cancelToken&&s.cancelToken.unsubscribe(l),s.signal&&s.signal.removeEventListener("abort",l)}let m=new XMLHttpRequest;m.open(s.method.toUpperCase(),s.url,!0),m.timeout=s.timeout;function w(){if(!m)return;const E=Yn.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),S={data:!a||a==="text"||a==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:E,config:t,request:m};a5(function(T){r(T),g()},function(T){n(T),g()},S),m=null}"onloadend"in m?m.onloadend=w:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(w)},m.onabort=function(){m&&(n(new Fe("Request aborted",Fe.ECONNABORTED,t,m)),m=null)},m.onerror=function(){n(new Fe("Network Error",Fe.ERR_NETWORK,t,m)),m=null},m.ontimeout=function(){let A=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const S=s.transitional||s5;s.timeoutErrorMessage&&(A=s.timeoutErrorMessage),n(new Fe(A,S.clarifyTimeoutError?Fe.ETIMEDOUT:Fe.ECONNABORTED,t,m)),m=null},i===void 0&&o.setContentType(null),"setRequestHeader"in m&&ee.forEach(o.toJSON(),function(A,S){m.setRequestHeader(S,A)}),ee.isUndefined(s.withCredentials)||(m.withCredentials=!!s.withCredentials),a&&a!=="json"&&(m.responseType=s.responseType),u&&([d,p]=qw(u,!0),m.addEventListener("progress",d)),c&&m.upload&&([h,f]=qw(c),m.upload.addEventListener("progress",h),m.upload.addEventListener("loadend",f)),(s.cancelToken||s.signal)&&(l=E=>{m&&(n(!E||E.type?new lf(null,t,m):E),m.abort(),m=null)},s.cancelToken&&s.cancelToken.subscribe(l),s.signal&&(s.signal.aborted?l():s.signal.addEventListener("abort",l)));const v=Lhe(s.url);if(v&&an.protocols.indexOf(v)===-1){n(new Fe("Unsupported protocol "+v+":",Fe.ERR_BAD_REQUEST,t));return}m.send(i||null)})},Ghe=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,s;const i=function(u){if(!s){s=!0,a();const l=u instanceof Error?u:this.reason;n.abort(l instanceof Fe?l:new lf(l instanceof Error?l.message:l))}};let o=e&&setTimeout(()=>{o=null,i(new Fe(`timeout ${e} of ms exceeded`,Fe.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>ee.asap(a),c}},Khe=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,s;for(;n<r;)s=n+e,yield t.slice(n,s),n=s},Jhe=async function*(t,e){for await(const r of Yhe(t))yield*Khe(r,e)},Yhe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},$O=(t,e,r,n)=>{const s=Jhe(t,e);let i=0,o,a=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:l}=await s.next();if(u){a(),c.close();return}let h=l.byteLength;if(r){let d=i+=h;r(d)}c.enqueue(new Uint8Array(l))}catch(u){throw a(u),u}},cancel(c){return a(c),s.return()}},{highWaterMark:2})},hb=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",l5=hb&&typeof ReadableStream=="function",Qhe=hb&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),h5=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Zhe=l5&&h5(()=>{let t=!1;const e=new Request(an.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),LO=64*1024,wA=l5&&h5(()=>ee.isReadableStream(new Response("").body)),Ww={stream:wA&&(t=>t.body)};hb&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Ww[e]&&(Ww[e]=ee.isFunction(t[e])?r=>r[e]():(r,n)=>{throw new Fe(`Response type '${e}' is not supported`,Fe.ERR_NOT_SUPPORT,n)})})})(new Response);const Xhe=async t=>{if(t==null)return 0;if(ee.isBlob(t))return t.size;if(ee.isSpecCompliantForm(t))return(await new Request(an.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(t)||ee.isArrayBuffer(t))return t.byteLength;if(ee.isURLSearchParams(t)&&(t=t+""),ee.isString(t))return(await Qhe(t)).byteLength},ede=async(t,e)=>{const r=ee.toFiniteNumber(t.getContentLength());return r??Xhe(e)},tde=hb&&(async t=>{let{url:e,method:r,data:n,signal:s,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:u,headers:l,withCredentials:h="same-origin",fetchOptions:d}=u5(t);u=u?(u+"").toLowerCase():"text";let f=Ghe([s,i&&i.toAbortSignal()],o),p;const g=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let m;try{if(c&&Zhe&&r!=="get"&&r!=="head"&&(m=await ede(l,n))!==0){let S=new Request(e,{method:"POST",body:n,duplex:"half"}),C;if(ee.isFormData(n)&&(C=S.headers.get("content-type"))&&l.setContentType(C),S.body){const[T,O]=DO(m,qw(UO(c)));n=$O(S.body,LO,T,O)}}ee.isString(h)||(h=h?"include":"omit");const w="credentials"in Request.prototype;p=new Request(e,{...d,signal:f,method:r.toUpperCase(),headers:l.normalize().toJSON(),body:n,duplex:"half",credentials:w?h:void 0});let v=await fetch(p);const E=wA&&(u==="stream"||u==="response");if(wA&&(a||E&&g)){const S={};["status","statusText","headers"].forEach(P=>{S[P]=v[P]});const C=ee.toFiniteNumber(v.headers.get("content-length")),[T,O]=a&&DO(C,qw(UO(a),!0))||[];v=new Response($O(v.body,LO,T,()=>{O&&O(),g&&g()}),S)}u=u||"text";let A=await Ww[ee.findKey(Ww,u)||"text"](v,t);return!E&&g&&g(),await new Promise((S,C)=>{a5(S,C,{data:A,headers:Yn.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:p})})}catch(w){throw g&&g(),w&&w.name==="TypeError"&&/Load failed|fetch/i.test(w.message)?Object.assign(new Fe("Network Error",Fe.ERR_NETWORK,t,p),{cause:w.cause||w}):Fe.from(w,w&&w.code,t,p)}}),bA={http:mhe,xhr:Vhe,fetch:tde};ee.forEach(bA,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const MO=t=>`- ${t}`,rde=t=>ee.isFunction(t)||t===null||t===!1,d5={getAdapter:t=>{t=ee.isArray(t)?t:[t];const{length:e}=t;let r,n;const s={};for(let i=0;i<e;i++){r=t[i];let o;if(n=r,!rde(r)&&(n=bA[(o=String(r)).toLowerCase()],n===void 0))throw new Fe(`Unknown adapter '${o}'`);if(n)break;s[o||"#"+i]=n}if(!n){const i=Object.entries(s).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(MO).join(`
`):" "+MO(i[0]):"as no adapter specified";throw new Fe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:bA};function nE(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new lf(null,t)}function FO(t){return nE(t),t.headers=Yn.from(t.headers),t.data=rE.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),d5.getAdapter(t.adapter||Om.adapter)(t).then(function(n){return nE(t),n.data=rE.call(t,t.transformResponse,n),n.headers=Yn.from(n.headers),n},function(n){return o5(n)||(nE(t),n&&n.response&&(n.response.data=rE.call(t,t.transformResponse,n.response),n.response.headers=Yn.from(n.response.headers))),Promise.reject(n)})}const f5="1.9.0",db={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{db[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const jO={};db.transitional=function(e,r,n){function s(i,o){return"[Axios v"+f5+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,a)=>{if(e===!1)throw new Fe(s(o," has been removed"+(r?" in "+r:"")),Fe.ERR_DEPRECATED);return r&&!jO[o]&&(jO[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,o,a):!0}};db.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function nde(t,e,r){if(typeof t!="object")throw new Fe("options must be an object",Fe.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const i=n[s],o=e[i];if(o){const a=t[i],c=a===void 0||o(a,i,t);if(c!==!0)throw new Fe("option "+i+" must be "+c,Fe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Fe("Unknown option "+i,Fe.ERR_BAD_OPTION)}}const Jy={assertOptions:nde,validators:db},Fi=Jy.validators;let zu=class{constructor(e){this.defaults=e||{},this.interceptors={request:new PO,response:new PO}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=ll(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&Jy.assertOptions(n,{silentJSONParsing:Fi.transitional(Fi.boolean),forcedJSONParsing:Fi.transitional(Fi.boolean),clarifyTimeoutError:Fi.transitional(Fi.boolean)},!1),s!=null&&(ee.isFunction(s)?r.paramsSerializer={serialize:s}:Jy.assertOptions(s,{encode:Fi.function,serialize:Fi.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Jy.assertOptions(r,{baseUrl:Fi.spelling("baseURL"),withXsrfToken:Fi.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&ee.merge(i.common,i[r.method]);i&&ee.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),r.headers=Yn.concat(o,i);const a=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(c=c&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let l,h=0,d;if(!c){const p=[FO.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,u),d=p.length,l=Promise.resolve(r);h<d;)l=l.then(p[h++],p[h++]);return l}d=a.length;let f=r;for(h=0;h<d;){const p=a[h++],g=a[h++];try{f=p(f)}catch(m){g.call(this,m);break}}try{l=FO.call(this,f)}catch(p){return Promise.reject(p)}for(h=0,d=u.length;h<d;)l=l.then(u[h++],u[h++]);return l}getUri(e){e=ll(this.defaults,e);const r=c5(e.baseURL,e.url,e.allowAbsoluteUrls);return n5(r,e.params,e.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(e){zu.prototype[e]=function(r,n){return this.request(ll(n||{},{method:e,url:r,data:(n||{}).data}))}});ee.forEach(["post","put","patch"],function(e){function r(n){return function(i,o,a){return this.request(ll(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}zu.prototype[e]=r(),zu.prototype[e+"Form"]=r(!0)});let sde=class p5{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{n.subscribe(a),i=a}).then(s);return o.cancel=function(){n.unsubscribe(i)},o},e(function(i,o,a){n.reason||(n.reason=new lf(i,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new p5(function(s){e=s}),cancel:e}}};function ide(t){return function(r){return t.apply(null,r)}}function ode(t){return ee.isObject(t)&&t.isAxiosError===!0}const vA={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vA).forEach(([t,e])=>{vA[e]=t});function g5(t){const e=new zu(t),r=WB(zu.prototype.request,e);return ee.extend(r,zu.prototype,e,{allOwnKeys:!0}),ee.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return g5(ll(t,s))},r}const Kt=g5(Om);Kt.Axios=zu;Kt.CanceledError=lf;Kt.CancelToken=sde;Kt.isCancel=o5;Kt.VERSION=f5;Kt.toFormData=lb;Kt.AxiosError=Fe;Kt.Cancel=Kt.CanceledError;Kt.all=function(e){return Promise.all(e)};Kt.spread=ide;Kt.isAxiosError=ode;Kt.mergeConfig=ll;Kt.AxiosHeaders=Yn;Kt.formToJSON=t=>i5(ee.isHTMLForm(t)?new FormData(t):t);Kt.getAdapter=d5.getAdapter;Kt.HttpStatusCode=vA;Kt.default=Kt;const{Axios:Jpe,AxiosError:Ype,CanceledError:Qpe,isCancel:Zpe,CancelToken:Xpe,VERSION:ege,all:tge,Cancel:rge,isAxiosError:nge,spread:sge,toFormData:ige,AxiosHeaders:oge,HttpStatusCode:age,formToJSON:cge,getAdapter:uge,mergeConfig:lge}=Kt,m5="%[a-f0-9]{2}",zO=new RegExp("("+m5+")|([^%]+?)","gi"),HO=new RegExp("("+m5+")+","gi");function EA(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;const r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],EA(r),EA(n))}function ade(t){try{return decodeURIComponent(t)}catch{let e=t.match(zO)||[];for(let r=1;r<e.length;r++)t=EA(e,r).join(""),e=t.match(zO)||[];return t}}function cde(t){const e={"%FE%FF":"��","%FF%FE":"��"};let r=HO.exec(t);for(;r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{const s=ade(r[0]);s!==r[0]&&(e[r[0]]=s)}r=HO.exec(t)}e["%C2"]="�";const n=Object.keys(e);for(const s of n)t=t.replace(new RegExp(s,"g"),e[s]);return t}function ude(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return decodeURIComponent(t)}catch{return cde(t)}}function lde(t,e){const r={};if(Array.isArray(e))for(const n of e){const s=Object.getOwnPropertyDescriptor(t,n);s!=null&&s.enumerable&&Object.defineProperty(r,n,s)}else for(const n of Reflect.ownKeys(t)){const s=Object.getOwnPropertyDescriptor(t,n);if(s.enumerable){const i=t[n];e(n,i,t)&&Object.defineProperty(r,n,s)}}return r}function y5(t,e){if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t===""||e==="")return[];const r=t.indexOf(e);return r===-1?[]:[t.slice(0,r),t.slice(r+e.length)]}const hde=t=>t==null,dde=t=>encodeURIComponent(t).replaceAll(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),_A=Symbol("encodeFragmentIdentifier");function fde(t){switch(t.arrayFormat){case"index":return e=>(r,n)=>{const s=r.length;return n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[fr(e,t),"[",s,"]"].join("")]:[...r,[fr(e,t),"[",fr(s,t),"]=",fr(n,t)].join("")]};case"bracket":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[fr(e,t),"[]"].join("")]:[...r,[fr(e,t),"[]=",fr(n,t)].join("")];case"colon-list-separator":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[fr(e,t),":list="].join("")]:[...r,[fr(e,t),":list=",fr(n,t)].join("")];case"comma":case"separator":case"bracket-separator":{const e=t.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,s)=>s===void 0||t.skipNull&&s===null||t.skipEmptyString&&s===""?n:(s=s===null?"":s,n.length===0?[[fr(r,t),e,fr(s,t)].join("")]:[[n,fr(s,t)].join(t.arrayFormatSeparator)])}default:return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,fr(e,t)]:[...r,[fr(e,t),"=",fr(n,t)].join("")]}}function pde(t){let e;switch(t.arrayFormat){case"index":return(r,n,s)=>{if(e=/\[(\d*)]$/.exec(r),r=r.replace(/\[\d*]$/,""),!e){s[r]=n;return}s[r]===void 0&&(s[r]={}),s[r][e[1]]=n};case"bracket":return(r,n,s)=>{if(e=/(\[])$/.exec(r),r=r.replace(/\[]$/,""),!e){s[r]=n;return}if(s[r]===void 0){s[r]=[n];return}s[r]=[...s[r],n]};case"colon-list-separator":return(r,n,s)=>{if(e=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!e){s[r]=n;return}if(s[r]===void 0){s[r]=[n];return}s[r]=[...s[r],n]};case"comma":case"separator":return(r,n,s)=>{const i=typeof n=="string"&&n.includes(t.arrayFormatSeparator),o=typeof n=="string"&&!i&&Mo(n,t).includes(t.arrayFormatSeparator);n=o?Mo(n,t):n;const a=i||o?n.split(t.arrayFormatSeparator).map(c=>Mo(c,t)):n===null?n:Mo(n,t);s[r]=a};case"bracket-separator":return(r,n,s)=>{const i=/(\[])$/.test(r);if(r=r.replace(/\[]$/,""),!i){s[r]=n&&Mo(n,t);return}const o=n===null?[]:Mo(n,t).split(t.arrayFormatSeparator);if(s[r]===void 0){s[r]=o;return}s[r]=[...s[r],...o]};default:return(r,n,s)=>{if(s[r]===void 0){s[r]=n;return}s[r]=[...[s[r]].flat(),n]}}}function w5(t){if(typeof t!="string"||t.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function fr(t,e){return e.encode?e.strict?dde(t):encodeURIComponent(t):t}function Mo(t,e){return e.decode?ude(t):t}function b5(t){return Array.isArray(t)?t.sort():typeof t=="object"?b5(Object.keys(t)).sort((e,r)=>Number(e)-Number(r)).map(e=>t[e]):t}function v5(t){const e=t.indexOf("#");return e!==-1&&(t=t.slice(0,e)),t}function gde(t){let e="";const r=t.indexOf("#");return r!==-1&&(e=t.slice(r)),e}function qO(t,e,r){return r==="string"&&typeof t=="string"?t:typeof r=="function"&&typeof t=="string"?r(t):e.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")?t.toLowerCase()==="true":r==="number"&&!Number.isNaN(Number(t))&&typeof t=="string"&&t.trim()!==""||e.parseNumbers&&!Number.isNaN(Number(t))&&typeof t=="string"&&t.trim()!==""?Number(t):t}function xC(t){t=v5(t);const e=t.indexOf("?");return e===-1?"":t.slice(e+1)}function OC(t,e){e={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,types:Object.create(null),...e},w5(e.arrayFormatSeparator);const r=pde(e),n=Object.create(null);if(typeof t!="string"||(t=t.trim().replace(/^[?#&]/,""),!t))return n;for(const s of t.split("&")){if(s==="")continue;const i=e.decode?s.replaceAll("+"," "):s;let[o,a]=y5(i,"=");o===void 0&&(o=i),a=a===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?a:Mo(a,e),r(Mo(o,e),a,n)}for(const[s,i]of Object.entries(n))if(typeof i=="object"&&i!==null&&e.types[s]!=="string")for(const[o,a]of Object.entries(i)){const c=e.types[s]?e.types[s].replace("[]",""):void 0;i[o]=qO(a,e,c)}else typeof i=="object"&&i!==null&&e.types[s]==="string"?n[s]=Object.values(i).join(e.arrayFormatSeparator):n[s]=qO(i,e,e.types[s]);return e.sort===!1?n:(e.sort===!0?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce((s,i)=>{const o=n[i];return s[i]=o&&typeof o=="object"&&!Array.isArray(o)?b5(o):o,s},Object.create(null))}function E5(t,e){if(!t)return"";e={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...e},w5(e.arrayFormatSeparator);const r=o=>e.skipNull&&hde(t[o])||e.skipEmptyString&&t[o]==="",n=fde(e),s={};for(const[o,a]of Object.entries(t))r(o)||(s[o]=a);const i=Object.keys(s);return e.sort!==!1&&i.sort(e.sort),i.map(o=>{const a=t[o];return a===void 0?"":a===null?fr(o,e):Array.isArray(a)?a.length===0&&e.arrayFormat==="bracket-separator"?fr(o,e)+"[]":a.reduce(n(o),[]).join("&"):fr(o,e)+"="+fr(a,e)}).filter(o=>o.length>0).join("&")}function _5(t,e){var s;e={decode:!0,...e};let[r,n]=y5(t,"#");return r===void 0&&(r=t),{url:((s=r==null?void 0:r.split("?"))==null?void 0:s[0])??"",query:OC(xC(t),e),...e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:Mo(n,e)}:{}}}function A5(t,e){e={encode:!0,strict:!0,[_A]:!0,...e};const r=v5(t.url).split("?")[0]||"",n=xC(t.url),s={...OC(n,{sort:!1}),...t.query};let i=E5(s,e);i&&(i=`?${i}`);let o=gde(t.url);if(typeof t.fragmentIdentifier=="string"){const a=new URL(r);a.hash=t.fragmentIdentifier,o=e[_A]?a.hash:`#${t.fragmentIdentifier}`}return`${r}${i}${o}`}function C5(t,e,r){r={parseFragmentIdentifier:!0,[_A]:!1,...r};const{url:n,query:s,fragmentIdentifier:i}=_5(t,r);return A5({url:n,query:lde(s,e),fragmentIdentifier:i},r)}function mde(t,e,r){const n=Array.isArray(e)?s=>!e.includes(s):(s,i)=>!e(s,i);return C5(t,n,r)}const S5=Object.freeze(Object.defineProperty({__proto__:null,exclude:mde,extract:xC,parse:OC,parseUrl:_5,pick:C5,stringify:E5,stringifyUrl:A5},Symbol.toStringTag,{value:"Module"}));function Ft(t){return t!=null&&typeof t=="object"&&t["@@functional/placeholder"]===!0}function Gn(t){return function e(r){return arguments.length===0||Ft(r)?e:t.apply(this,arguments)}}function Rr(t){return function e(r,n){switch(arguments.length){case 0:return e;case 1:return Ft(r)?e:Gn(function(s){return t(r,s)});default:return Ft(r)&&Ft(n)?e:Ft(r)?Gn(function(s){return t(s,n)}):Ft(n)?Gn(function(s){return t(r,s)}):t(r,n)}}}function fb(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(r){return e.apply(this,arguments)};case 2:return function(r,n){return e.apply(this,arguments)};case 3:return function(r,n,s){return e.apply(this,arguments)};case 4:return function(r,n,s,i){return e.apply(this,arguments)};case 5:return function(r,n,s,i,o){return e.apply(this,arguments)};case 6:return function(r,n,s,i,o,a){return e.apply(this,arguments)};case 7:return function(r,n,s,i,o,a,c){return e.apply(this,arguments)};case 8:return function(r,n,s,i,o,a,c,u){return e.apply(this,arguments)};case 9:return function(r,n,s,i,o,a,c,u,l){return e.apply(this,arguments)};case 10:return function(r,n,s,i,o,a,c,u,l,h){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function I5(t,e,r){return function(){for(var n=[],s=0,i=t,o=0;o<e.length||s<arguments.length;){var a;o<e.length&&(!Ft(e[o])||s>=arguments.length)?a=e[o]:(a=arguments[s],s+=1),n[o]=a,Ft(a)||(i-=1),o+=1}return i<=0?r.apply(this,n):fb(i,I5(t,n,r))}}var T5=Rr(function(e,r){return e===1?Gn(r):fb(e,I5(e,[],r))});function Rm(t){return function e(r,n,s){switch(arguments.length){case 0:return e;case 1:return Ft(r)?e:Rr(function(i,o){return t(r,i,o)});case 2:return Ft(r)&&Ft(n)?e:Ft(r)?Rr(function(i,o){return t(i,n,o)}):Ft(n)?Rr(function(i,o){return t(r,i,o)}):Gn(function(i){return t(r,n,i)});default:return Ft(r)&&Ft(n)&&Ft(s)?e:Ft(r)&&Ft(n)?Rr(function(i,o){return t(i,o,s)}):Ft(r)&&Ft(s)?Rr(function(i,o){return t(i,n,o)}):Ft(n)&&Ft(s)?Rr(function(i,o){return t(r,i,o)}):Ft(r)?Gn(function(i){return t(i,n,s)}):Ft(n)?Gn(function(i){return t(r,i,s)}):Ft(s)?Gn(function(i){return t(r,n,i)}):t(r,n,s)}}}const RC=Array.isArray||function(e){return e!=null&&e.length>=0&&Object.prototype.toString.call(e)==="[object Array]"};function yde(t){return t!=null&&typeof t["@@transducer/step"]=="function"}function wde(t,e,r){return function(){if(arguments.length===0)return r();var n=Array.prototype.slice.call(arguments,0),s=n.pop();if(!RC(s)){for(var i=0;i<t.length;){if(typeof s[t[i]]=="function")return s[t[i]].apply(s,n);i+=1}if(yde(s)){var o=e.apply(null,n);return o(s)}}return r.apply(this,arguments)}}const WO={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}};function bde(t,e){for(var r=0,n=e.length,s=Array(n);r<n;)s[r]=t(e[r]),r+=1;return s}function PC(t){return Object.prototype.toString.call(t)==="[object String]"}var vde=Gn(function(e){return RC(e)?!0:!e||typeof e!="object"||PC(e)?!1:e.nodeType===1?!!e.length:e.length===0?!0:e.length>0?e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1):!1}),Ede=function(){function t(e){this.f=e}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(e){return e},t.prototype["@@transducer/step"]=function(e,r){return this.f(e,r)},t}();function _de(t){return new Ede(t)}var Ade=Rr(function(e,r){return fb(e.length,function(){return e.apply(r,arguments)})});function Cde(t,e,r){for(var n=0,s=r.length;n<s;){if(e=t["@@transducer/step"](e,r[n]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n+=1}return t["@@transducer/result"](e)}function VO(t,e,r){for(var n=r.next();!n.done;){if(e=t["@@transducer/step"](e,n.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n=r.next()}return t["@@transducer/result"](e)}function GO(t,e,r,n){return t["@@transducer/result"](r[n](Ade(t["@@transducer/step"],t),e))}var KO=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function N5(t,e,r){if(typeof t=="function"&&(t=_de(t)),vde(r))return Cde(t,e,r);if(typeof r["fantasy-land/reduce"]=="function")return GO(t,e,r,"fantasy-land/reduce");if(r[KO]!=null)return VO(t,e,r[KO]());if(typeof r.next=="function")return VO(t,e,r);if(typeof r.reduce=="function")return GO(t,e,r,"reduce");throw new TypeError("reduce: list must be array or iterable")}var Sde=function(){function t(e,r){this.xf=r,this.f=e}return t.prototype["@@transducer/init"]=WO.init,t.prototype["@@transducer/result"]=WO.result,t.prototype["@@transducer/step"]=function(e,r){return this.xf["@@transducer/step"](e,this.f(r))},t}(),Ide=Rr(function(e,r){return new Sde(e,r)});function cc(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var JO=Object.prototype.toString,Tde=function(){return JO.call(arguments)==="[object Arguments]"?function(e){return JO.call(e)==="[object Arguments]"}:function(e){return cc("callee",e)}}(),Nde=!{toString:null}.propertyIsEnumerable("toString"),YO=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],QO=function(){return arguments.propertyIsEnumerable("length")}(),xde=function(e,r){for(var n=0;n<e.length;){if(e[n]===r)return!0;n+=1}return!1},Ode=Gn(typeof Object.keys=="function"&&!QO?function(e){return Object(e)!==e?[]:Object.keys(e)}:function(e){if(Object(e)!==e)return[];var r,n,s=[],i=QO&&Tde(e);for(r in e)cc(r,e)&&(!i||r!=="length")&&(s[s.length]=r);if(Nde)for(n=YO.length-1;n>=0;)r=YO[n],cc(r,e)&&!xde(s,r)&&(s[s.length]=r),n-=1;return s}),Rde=Rr(wde(["fantasy-land/map","map"],Ide,function(e,r){switch(Object.prototype.toString.call(r)){case"[object Function]":return T5(r.length,function(){return e.call(this,r.apply(this,arguments))});case"[object Object]":return N5(function(n,s){return n[s]=e(r[s]),n},{},Ode(r));default:return bde(e,r)}}));const Pde=Number.isInteger||function(e){return e<<0===e};var kde=Rr(function(e,r){var n=e<0?r.length+e:e;return PC(r)?r.charAt(n):r[n]}),Dde=Rr(function(e,r){return e.map(function(n){for(var s=r,i=0,o;i<n.length;){if(s==null)return;o=n[i],s=Pde(o)?kde(o,s):s[o],i+=1}return s})}),kC=Rr(function(e,r){return Dde([e],r)[0]}),Ude=Rr(function(e,r){return kC([e],r)}),Bde=Rm(N5),$de=Gn(function(e){return T5(e.length,e)});function Lde(t,e){return function(){return e.call(this,t.apply(this,arguments))}}function x5(t,e){return function(){var r=arguments.length;if(r===0)return e();var n=arguments[r-1];return RC(n)||typeof n[t]!="function"?e.apply(this,arguments):n[t].apply(n,Array.prototype.slice.call(arguments,0,r-1))}}var Mde=Rm(x5("slice",function(e,r,n){return Array.prototype.slice.call(n,e,r)})),Fde=Gn(x5("tail",Mde(1,1/0)));function jde(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return fb(arguments[0].length,Bde(Lde,arguments[0],Fde(arguments)))}var zde=Gn(function(e){return PC(e)?e.split("").reverse().join(""):Array.prototype.slice.call(e,0).reverse()});function Hde(){if(arguments.length===0)throw new Error("compose requires at least one argument");return jde.apply(this,zde(arguments))}function ZO(t){return Object.prototype.toString.call(t)==="[object Object]"}var qde=Rr(function(e,r){return r==null||r!==r?e:r});function Wde(t){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),r=1,n=arguments.length;r<n;){var s=arguments[r];if(s!=null)for(var i in s)cc(i,s)&&(e[i]=s[i]);r+=1}return e}const Vde=typeof Object.assign=="function"?Object.assign:Wde;var XO=Rr(function(e,r){return Vde({},e,r)}),Gde=Rm(function(e,r,n){var s={},i;for(i in r)cc(i,r)&&(s[i]=cc(i,n)?e(i,r[i],n[i]):r[i]);for(i in n)cc(i,n)&&!cc(i,s)&&(s[i]=n[i]);return s}),O5=Rm(function t(e,r,n){return Gde(function(s,i,o){return ZO(i)&&ZO(o)?t(e,i,o):e(s,i,o)},r,n)}),Kde=Rr(function(e,r){return O5(function(n,s,i){return s},e,r)}),Jde=Rr(function(e,r){return O5(function(n,s,i){return i},e,r)}),Yde=Rm(function(e,r,n){return qde(e,kC(r,n))});const Fr=[];for(let t=0;t<256;++t)Fr.push((t+256).toString(16).slice(1));function Qde(t,e=0){return(Fr[t[e+0]]+Fr[t[e+1]]+Fr[t[e+2]]+Fr[t[e+3]]+"-"+Fr[t[e+4]]+Fr[t[e+5]]+"-"+Fr[t[e+6]]+Fr[t[e+7]]+"-"+Fr[t[e+8]]+Fr[t[e+9]]+"-"+Fr[t[e+10]]+Fr[t[e+11]]+Fr[t[e+12]]+Fr[t[e+13]]+Fr[t[e+14]]+Fr[t[e+15]]).toLowerCase()}let sE;const Zde=new Uint8Array(16);function Xde(){if(!sE){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");sE=crypto.getRandomValues.bind(crypto)}return sE(Zde)}const efe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),e2={randomUUID:efe};function tfe(t,e,r){var s;if(e2.randomUUID&&!t)return e2.randomUUID();t=t||{};const n=t.random??((s=t.rng)==null?void 0:s.call(t))??Xde();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Qde(n)}Kt.defaults.withCredentials=!1;Kt.defaults.timeout=1/0;const rfe=({apiKey:t})=>{const e=(u,l,h)=>{const f=h?u:XO({},u);return l==="application/x-www-form-urlencoded"?S5.stringify(f):f},r=(u,l)=>{let h=window.localStorage.getItem("did");h||(h=tfe(),window.localStorage.setItem("did",h));const d={"Content-Type":u,"X-TIME":Date.now(),"X-API-KEY":t,"X-DID":h};return l&&(d.Authorization=`Bearer ${l}`),d},n=({contentType:u="application/x-www-form-urlencoded",endPoint:l,method:h,headers:d,data:f,removeDefaultPostData:p,sessionToken:g,url:m,...w})=>{const v=`${m}${l}`,E=e(f,u,p),A=Jde(r(u,g),d||{});return Kt.request({url:v,method:h,data:E,headers:A,...w}).catch(S=>{const C=Yde({},["response","data"],S),T=kC(["response","status"],S);throw typeof C=="string"?C:XO(C,{status:T})}).then(Ude("data"))};return{deleteRequest:u=>n({method:"DELETE",...u}),get:({ignoreQueryParams:u,endPoint:l,data:h,...d})=>n({...d,method:"GET",endPoint:u?l:`${l}?${e(h,"application/x-www-form-urlencoded")}`}),post:u=>n({method:"POST",...u}),put:u=>n({method:"PUT",...u}),patch:u=>n({method:"PATCH",...u})}};var $f={},t2;function nfe(){if(t2)return $f;t2=1,Object.defineProperty($f,"__esModule",{value:!0}),$f.Base64=void 0;var t=function(){function e(){this.b64c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.b64u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",this.b64pad="="}return e.prototype.encode=function(r){var n=unescape(encodeURIComponent(r));return this.encodeData(n,n.length,this.b64c)},e.prototype.urlEncode=function(r){var n=unescape(encodeURIComponent(r));return this.encodeData(n,n.length,this.b64u)},e.prototype.decode=function(r){var n="",s,i,o,a,c;for(s=0;s<r.length-3;s+=4)i=this.charIndex(r.charAt(s+0)),o=this.charIndex(r.charAt(s+1)),a=this.charIndex(r.charAt(s+2)),c=this.charIndex(r.charAt(s+3)),n+=String.fromCharCode(i<<2|o>>>4),r.charAt(s+2)!==this.b64pad&&(n+=String.fromCharCode(o<<4&240|a>>>2&15)),r.charAt(s+3)!==this.b64pad&&(n+=String.fromCharCode(a<<6&192|c));return n=decodeURIComponent(escape(n)),n},e.prototype.urlSniff=function(r){return r.indexOf("-")>=0||r.indexOf("_")>=0},e.prototype.encodeData=function(r,n,s){var i="",o=0;for(o=0;o<=n-3;o+=3)i+=s.charAt(r.charCodeAt(o)>>>2),i+=s.charAt((r.charCodeAt(o)&3)<<4|r.charCodeAt(o+1)>>>4),i+=s.charAt((r.charCodeAt(o+1)&15)<<2|r.charCodeAt(o+2)>>>6),i+=s.charAt(r.charCodeAt(o+2)&63);return n%3===2?(i+=s.charAt(r.charCodeAt(o)>>>2),i+=s.charAt((r.charCodeAt(o)&3)<<4|r.charCodeAt(o+1)>>>4),i+=s.charAt((r.charCodeAt(o+1)&15)<<2),i+=this.b64pad):n%3===1&&(i+=s.charAt(r.charCodeAt(o)>>>2),i+=s.charAt((r.charCodeAt(o)&3)<<4),i+=this.b64pad,i+=this.b64pad),i},e.prototype.charIndex=function(r){return r==="+"?62:r==="/"?63:this.b64u.indexOf(r)},e}();return $f.Base64=t,$f}var sfe=nfe();const ife=new sfe.Base64,ofe=t=>{const{guid:e,token:r}=t,n={headers:{"x-guid":e}};return r&&(n.headers.Authorization=`Bearer ${ife.encode(r)}`),n},afe=$de((t,e,r,n)=>Hde(r,Kde(n),ofe)(t()).catch(s=>{if(s.status!==401||s.type==="UNKNOWN_USER"||s.type==="NO_TRADE_PERMISSION"||s.type==="INVALID_CREDENTIALS"||s.type==="BAD_2FA")throw s;return e()})),cfe=(t,e,r)=>Rde(afe(e,r),t),r2=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],n2=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"BuybackAlreadyStarted","type":"error"},{"inputs":[],"name":"BuybackMustBeStarted","type":"error"},{"inputs":[],"name":"DrawAlreadyStarted","type":"error"},{"inputs":[],"name":"DrawMustBeStarted","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"balance","type":"uint256"},{"internalType":"uint256","name":"needed","type":"uint256"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ERC1155InsufficientBalance","type":"error"},{"inputs":[{"internalType":"address","name":"approver","type":"address"}],"name":"ERC1155InvalidApprover","type":"error"},{"inputs":[{"internalType":"uint256","name":"idsLength","type":"uint256"},{"internalType":"uint256","name":"valuesLength","type":"uint256"}],"name":"ERC1155InvalidArrayLength","type":"error"},{"inputs":[{"internalType":"address","name":"operator","type":"address"}],"name":"ERC1155InvalidOperator","type":"error"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"}],"name":"ERC1155InvalidReceiver","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"name":"ERC1155InvalidSender","type":"error"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"address","name":"owner","type":"address"}],"name":"ERC1155MissingApprovalForAll","type":"error"},{"inputs":[],"name":"InvalidInitialization","type":"error"},{"inputs":[],"name":"InvalidTier","type":"error"},{"inputs":[],"name":"LengthMismatch","type":"error"},{"inputs":[],"name":"MilestoneNotReached","type":"error"},{"inputs":[],"name":"MilestoneReached","type":"error"},{"inputs":[],"name":"NotAWinner","type":"error"},{"inputs":[],"name":"NotInitializing","type":"error"},{"inputs":[],"name":"OnlyAdminOrOwner","type":"error"},{"inputs":[{"internalType":"address","name":"have","type":"address"},{"internalType":"address","name":"want","type":"address"}],"name":"OnlyCoordinatorCanFulfill","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"OwnableInvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"OwnableUnauthorizedAccount","type":"error"},{"inputs":[],"name":"OwnerQueryForNonexistentTicket","type":"error"},{"inputs":[],"name":"PaymentFailed","type":"error"},{"inputs":[],"name":"ReentrancyGuardReentrantCall","type":"error"},{"inputs":[],"name":"SaleAlreadyStopped","type":"error"},{"inputs":[],"name":"SaleMustBeStopped","type":"error"},{"inputs":[],"name":"TicketsBalanceQueryForZeroAddress","type":"error"},{"inputs":[],"name":"TicketsInvalidQueryRange","type":"error"},{"inputs":[],"name":"TicketsMintToZeroAddress","type":"error"},{"inputs":[],"name":"TicketsMintZeroQuantity","type":"error"},{"inputs":[],"name":"TokensNotTransferable","type":"error"},{"inputs":[],"name":"USDTTransferFailed","type":"error"},{"inputs":[],"name":"WinnersAlreadyAwarded","type":"error"},{"inputs":[],"name":"WinnersNotAwarded","type":"error"},{"inputs":[],"name":"ZeroQuantity","type":"error"},{"inputs":[],"name":"ZeroTeamWallet","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"admin","type":"address"},{"indexed":true,"internalType":"bool","name":"status","type":"bool"}],"name":"AdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Buyback","type":"event"},{"anonymous":false,"inputs":[],"name":"BuybackStarted","type":"event"},{"anonymous":false,"inputs":[],"name":"DrawStarted","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint64","name":"version","type":"uint64"}],"name":"Initialized","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"winner","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"PrizeCashed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"team","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"PrizeWithdrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":true,"internalType":"uint256","name":"tier","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"quantity","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"tickets","type":"uint256"}],"name":"Purchase","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"referrer","type":"address"},{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"RefRewardsAccrued","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"referrer","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"RefRewardsClaimed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"referrer","type":"address"},{"indexed":true,"internalType":"bool","name":"status","type":"bool"}],"name":"ReferrerChanged","type":"event"},{"anonymous":false,"inputs":[],"name":"SaleStopped","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"team","type":"address"},{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"TeamRewardsAccrued","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"team","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"TeamRewardsClaimed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"prev","type":"address"},{"indexed":true,"internalType":"address","name":"next","type":"address"}],"name":"TeamWalletChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"uint256","name":"ticketId","type":"uint256"}],"name":"Ticket","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"indexed":false,"internalType":"uint256[]","name":"values","type":"uint256[]"}],"name":"TransferBatch","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"TransferSingle","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"value","type":"string"},{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"}],"name":"URI","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"winner","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Winner","type":"event"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address[]","name":"accounts","type":"address[]"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"}],"name":"balanceOfBatch","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"baseURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"internalType":"uint256[]","name":"values","type":"uint256[]"}],"name":"burnBatch","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"burnPrize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tier","type":"uint256"},{"internalType":"uint256","name":"qty","type":"uint256"},{"internalType":"address","name":"ref","type":"address"}],"name":"buy","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tier","type":"uint256"},{"internalType":"uint256","name":"qty","type":"uint256"},{"internalType":"address","name":"ref","type":"address"}],"name":"buyTo","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"buyback","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address[]","name":"users","type":"address[]"}],"name":"buybackBatch","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"claimRefRewards","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address[]","name":"users","type":"address[]"}],"name":"claimRefRewardsBatch","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"contractURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"exists","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getCounter","outputs":[{"components":[{"internalType":"uint256","name":"_buyers","type":"uint256"},{"internalType":"uint256","name":"_ticketsForCertificate","type":"uint256"},{"internalType":"uint256","name":"_totalRaised","type":"uint256"},{"internalType":"uint256","name":"_totalTeamRewards","type":"uint256"},{"internalType":"uint256","name":"_totalTeamRewardsClaimed","type":"uint256"},{"internalType":"uint256","name":"_totalRefRewards","type":"uint256"},{"internalType":"uint256","name":"_totalRefRewardsClaimed","type":"uint256"}],"internalType":"struct IKingsVaultCards.CounterStorage","name":"","type":"tuple"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"getState","outputs":[{"components":[{"internalType":"bool","name":"_saleStopped","type":"bool"},{"internalType":"bool","name":"_buybackStarted","type":"bool"},{"internalType":"bool","name":"_drawStarted","type":"bool"},{"internalType":"bool","name":"_winnersAwarded","type":"bool"}],"internalType":"struct IKingsVaultCards.StateStorage","name":"","type":"tuple"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"wallet","type":"address"}],"name":"getUser","outputs":[{"internalType":"uint256","name":"_spent","type":"uint256"},{"internalType":"address","name":"_referrer","type":"address"},{"internalType":"uint256","name":"_refRewards","type":"uint256"},{"internalType":"uint256","name":"_tickets","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address[]","name":"users","type":"address[]"},{"internalType":"uint256[]","name":"tickets","type":"uint256[]"}],"name":"giftTickets","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"initialOwner_","type":"address"},{"internalType":"address","name":"usdt_","type":"address"},{"internalType":"address","name":"teamWallet_","type":"address"},{"internalType":"address","name":"vrfCoordinator_","type":"address"},{"internalType":"address","name":"linkToken_","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"wallet","type":"address"}],"name":"isAdmin","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"wallet","type":"address"}],"name":"isReferrer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"proxy","outputs":[{"internalType":"uint64","name":"initializedVersion","type":"uint64"},{"internalType":"address","name":"admin","type":"address"},{"internalType":"address","name":"implementation","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"requestId","type":"uint256"},{"internalType":"uint256[]","name":"randomWords","type":"uint256[]"}],"name":"rawFulfillRandomWords","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"requestId","type":"uint256"},{"internalType":"uint256[]","name":"randomWords","type":"uint256[]"}],"name":"rawFulfillRandomWordsTest","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"safeBatchTransferFrom","outputs":[],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"bytes32","name":"keyHash","type":"bytes32"},{"internalType":"uint64","name":"subscriptionId","type":"uint64"},{"internalType":"uint16","name":"requestConfirmations","type":"uint16"},{"internalType":"uint32","name":"callbackGasLimit","type":"uint32"}],"name":"selectWinners","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"wallet","type":"address"},{"internalType":"bool","name":"status","type":"bool"}],"name":"setAdmin","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"bool","name":"","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"string","name":"newuri","type":"string"}],"name":"setBaseURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"wallet","type":"address"},{"internalType":"bool","name":"status","type":"bool"}],"name":"setReferrer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"teamWallet_","type":"address"}],"name":"setTeamWallet","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"startBuyback","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"startDraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"stopSale","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"ticketsBalanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"ticketId","type":"uint256"}],"name":"ticketsExplicitOwnershipOf","outputs":[{"components":[{"internalType":"address","name":"addr","type":"address"},{"internalType":"uint64","name":"startTimestamp","type":"uint64"},{"internalType":"bool","name":"burned","type":"bool"},{"internalType":"uint24","name":"extraData","type":"uint24"}],"internalType":"struct ITickets.TicketOwnership","name":"ownership","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"ticketsOfOwner","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"start","type":"uint256"},{"internalType":"uint256","name":"stop","type":"uint256"}],"name":"ticketsOfOwnerIn","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"ticketId","type":"uint256"}],"name":"ticketsOwnerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ticketsTotal","outputs":[{"internalType":"uint256","name":"result","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"uri","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"version","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"consumerAddress","type":"address"}],"name":"vrfAddConsumer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"receivingWallet","type":"address"}],"name":"vrfCancelSubscription","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"consumerAddress","type":"address"}],"name":"vrfRemoveConsumer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"vrfTopUpSubscription","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"vrfWithdrawLinkTo","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdrawCarPrice","outputs":[],"stateMutability":"nonpayable","type":"function"}]');function ufe(t){const e=Em,r=soe,n=new gc(r,n2,t);return{chainId:e,address:r,abi:n2,contract:n}}function lfe(t){const e=Em,r=G_.address,n=G_.decimals,s=new gc(r,r2,t);return{chainId:e,address:r,decimals:n,abi:r2,contract:s}}let vp;const s2=aoe(Em);s2?vp=new k3(s2):vp=new D1(ooe(Em));const hfe=()=>({getProviderBsc:()=>vp,getUsdtBsc:()=>lfe(vp),getPresaleBsc:()=>ufe(vp)}),dfe=({apiUrl:t,get:e})=>({getApiServerPing:()=>e({url:t,endPoint:"/ping",contentType:"application/json"}),getApiServerV1Ping:()=>e({url:t,endPoint:"/api/v1/ping",contentType:"application/json"})}),ffe=({apiUrl:t,get:e})=>({getApiServerV1StateData:()=>e({url:t,endPoint:"/api/v1/state",contentType:"application/json"})}),pfe=({apiUrl:t,get:e})=>({getWertIoWidgetBuyPermission:({chainId:n,to:s,tier:i,qty:o,ref:a,click_id:c})=>e({url:t,endPoint:"/api/v1/permission/wert-io",contentType:"application/json",data:{chainId:n,to:s,tier:i,qty:o,ref:a,click_id:c}})});function gfe(){return document.cookie.split(";").reduce((t,e)=>{let r=e.trim().split("=");return r[0]=="_fbp"?r[1]:t})}const mfe=({post:t})=>({sendPixelData:async({tierId:r,quantity:n})=>{const s="v22.0",i="9646136658755953",o="EAAIOudaxhdABOwcal2PVKUuro6CM3A8DiCyH0jtvXH2ioB299VbQv5UZC0kKQJWNBvnmaktDqOeSQCZCFsy7Op8jOfuhJcorZB8kaGsnlZCMM2guZAQFZCSzT6jSTWEpEbDswZAkwGZCrkTHlgxlhI6gZAn563lZAPQZB4RE4Ar0B0hEOtgEghID7IVdHyVs4MaTZB2tTwZDZD";let a=gfe(),c;const u=S5.parse(window.location.search);u.fbclid&&(c=u.fbclid);let l=null;try{l=(await Kt.get("https://api.ipgeolocation.io/ipgeo?apiKey=e0f142091af64dd4a311a3285e8e074f",{headers:{"Content-Type":"application/json"}})).data}catch(h){console.error("apiInfo res.data",h)}return t({url:"https://graph.facebook.com",endPoint:`/${s}/${i}/events?access_token=${o}`,contentType:"application/json",data:{data:[{event_name:"Purchase",event_time:Math.floor(Date.now()/1e3),event_source_url:"https://kingsvault.io/",action_source:"website",user_data:{client_ip_address:l?l.ip:"",client_user_agent:navigator.userAgent,fbp:a.replace("_fbp=",""),fbc:c},custom_data:{currency:"usd",value:ioe[r]*n,contents:[{id:`tier_${r+1}`,quantity:n}]}}]}})}}),yfe=({options:t,apiKey:e,getAuthCredentials:r,reauthenticate:n})=>{const s=t.domains.root,i=t.domains.api,o=rfe({apiKey:e}),a=cfe(o,r,n),c={rootUrl:s,apiUrl:i,...o,authorizedGet:a.get,authorizedPost:a.post,authorizedPut:a.put,authorizedPatch:a.patch,authorizedDelete:a.deleteRequest};return{...c,...hfe(),...dfe(c),...ffe(c),...pfe(c),...mfe(c)}},hge=Zoe({reducer:Lue,middleware:t=>t({thunk:!0,immutableCheck:!0,serializableCheck:!0,actionCreatorCheck:!0}).concat(Cce),devTools:!1,preloadedState:window==null?void 0:window.__PRELOADED_STATE__}),R5={apiKey:toe,options:{domains:{root:roe,api:noe}},getAuthCredentials:()=>({guid:void 0,token:void 0}),reauthenticate:()=>null},P5=yfe({...R5}),wfe={api:P5,options:R5.options};UU.run(Ole,wfe);const dge=J.createContext(P5);export{be as $,dge as A,_r as B,Npe as C,Me as D,ta as E,cn as F,Rpe as G,Afe as H,le as I,_k as J,_e as K,Efe as L,ar as M,De as N,$ as O,qpe as P,Ot as Q,_fe as R,Vr as S,sn as T,Ppe as U,gs as V,gr as W,Bt as X,ue as Y,Tt as Z,Fee as _,Hpe as a,km as a0,YT as a1,F2 as a2,ke as a3,Zt as a4,np as a5,JT as a6,Xn as a7,hn as a8,Sfe as a9,wy as aA,Bpe as aB,$pe as aC,Dpe as aD,jpe as aE,ioe as aF,Fv as aG,ufe as aH,lfe as aI,$te as aJ,gg as aK,tfe as aL,P2 as aM,zpe as aN,Cfe as aO,SO as aP,Tc as aQ,Upe as aR,Ue as aa,Ife as ab,PQ as ac,yi as ad,kpe as ae,xpe as af,c_ as ag,Oy as ah,up as ai,Or as aj,Ope as ak,Pk as al,u_ as am,Ad as an,Yj as ao,upe as ap,HS as aq,PR as ar,Fj as as,Qj as at,lpe as au,cpe as av,f0 as aw,fpe as ax,hpe as ay,Rt as az,P5 as b,Vpe as c,_ue as d,vue as e,Iue as f,yle as g,xue as h,ple as i,Spe as j,Lpe as k,NO as l,Pue as m,Rue as n,DB as o,Em as p,L3 as q,nL as r,hge as s,Aue as t,Wpe as u,S5 as v,Fpe as w,ph as x,Py as y,wt as z};
