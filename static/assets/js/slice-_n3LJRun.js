const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/assets/js/embedded-wallet-BznT4L_d.js","static/assets/js/if-defined-pKm18Cmw.js","static/assets/js/index-DJvLkJTi.js","static/assets/css/index-DhtU8CcV.css","static/assets/js/index-CAgqS0N0.js","static/assets/js/index-BYr67e3e.js","static/assets/js/index-De4abG9g.js","static/assets/js/index-CRD8q8Nb.js","static/assets/js/index-B4_CJOi5.js","static/assets/js/index-BGPJPhM4.js","static/assets/js/index-D9EJrpBK.js","static/assets/js/index-CRSSXvEC.js","static/assets/js/email-DyrkZVxH.js","static/assets/js/index-CKBmlRaI.js","static/assets/js/socials-DlWwHXMr.js","static/assets/js/index-BFpKZVma.js","static/assets/js/index-BnB5TyVN.js","static/assets/js/index-CrGA5vnp.js","static/assets/js/index-BmckTfpt.js","static/assets/js/swaps-DHzS7S5j.js","static/assets/js/index-Cm4_Sgv3.js","static/assets/js/index-Cw5cdG-1.js","static/assets/js/index-0yEI4HQk.js","static/assets/js/send-CFDiLVdj.js","static/assets/js/index-P_GSgptz.js","static/assets/js/receive-CVxqoyvo.js","static/assets/js/index-5ro6oHWf.js","static/assets/js/onramp-B8PhpJhH.js","static/assets/js/index-Dcu59j0h.js","static/assets/js/index-0QckeY7j.js","static/assets/js/transactions-DFj4R89w.js","static/assets/js/index-B47MfjoO.js","static/assets/js/index-BoGeYc0t.js","static/assets/js/index-BpxjxwMc.js","static/assets/js/w3m-modal-BM3Wb9sv.js","static/assets/js/index-D2y6MeIM.js"])))=>i.map(i=>d[i]);
var Uk=Object.defineProperty;var wA=t=>{throw TypeError(t)};var Bk=(t,e,r)=>e in t?Uk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var q=(t,e,r)=>Bk(t,typeof e!="symbol"?e+"":e,r),Lw=(t,e,r)=>e.has(t)||wA("Cannot "+r);var E=(t,e,r)=>(Lw(t,e,"read from private field"),r?r.call(t):e.get(t)),V=(t,e,r)=>e.has(t)?wA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),k=(t,e,r,n)=>(Lw(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),ee=(t,e,r)=>(Lw(t,e,"access private method"),r);var yd=(t,e,r,n)=>({set _(s){k(t,e,s,r)},get _(){return E(t,e,n)}});import{r as J,p as kr,g as By,d as tT,_ as ls,c as Ai,a as rT,R as Lk}from"./index-DJvLkJTi.js";const _e=globalThis||void 0||self;var wd={},bA;function $k(){if(bA)return wd;bA=1,Object.defineProperty(wd,"__esModule",{value:!0}),wd.parse=o,wd.serialize=u;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,i=(()=>{const d=function(){};return d.prototype=Object.create(null),d})();function o(d,f){const p=new i,g=d.length;if(g<2)return p;const y=(f==null?void 0:f.decode)||l;let b=0;do{const v=d.indexOf("=",b);if(v===-1)break;const _=d.indexOf(";",b),S=_===-1?g:_;if(v>S){b=d.lastIndexOf(";",v-1)+1;continue}const N=a(d,b,v),A=c(d,v,N),x=d.slice(N,A);if(p[x]===void 0){let P=a(d,v+1,S),R=c(d,S,P);const B=y(d.slice(P,R));p[x]=B}b=S+1}while(b<g);return p}function a(d,f,p){do{const g=d.charCodeAt(f);if(g!==32&&g!==9)return f}while(++f<p);return p}function c(d,f,p){for(;f>p;){const g=d.charCodeAt(--f);if(g!==32&&g!==9)return f+1}return p}function u(d,f,p){const g=(p==null?void 0:p.encode)||encodeURIComponent;if(!t.test(d))throw new TypeError(`argument name is invalid: ${d}`);const y=g(f);if(!e.test(y))throw new TypeError(`argument val is invalid: ${f}`);let b=d+"="+y;if(!p)return b;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);b+="; Max-Age="+p.maxAge}if(p.domain){if(!r.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);b+="; Domain="+p.domain}if(p.path){if(!n.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);b+="; Path="+p.path}if(p.expires){if(!h(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);b+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(b+="; HttpOnly"),p.secure&&(b+="; Secure"),p.partitioned&&(b+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return b}function l(d){if(d.indexOf("%")===-1)return d;try{return decodeURIComponent(d)}catch{return d}}function h(d){return s.call(d)==="[object Date]"}return wd}$k();var EA="popstate";function Mk(t={}){function e(s,i){let{pathname:o="/",search:a="",hash:c=""}=bu(s.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Sb("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");a=u===-1?c:c.slice(0,u)}return a+"#"+(typeof i=="string"?i:Af(i))}function n(s,i){Qs(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return jk(e,r,n,t)}function jt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Qs(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Fk(){return Math.random().toString(36).substring(2,10)}function vA(t,e){return{usr:t.state,key:t.key,idx:e}}function Sb(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?bu(e):e,state:r,key:e&&e.key||n||Fk()}}function Af({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function bu(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function jk(t,e,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a="POP",c=null,u=l();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function l(){return(o.state||{idx:null}).idx}function h(){a="POP";let y=l(),b=y==null?null:y-u;u=y,c&&c({action:a,location:g.location,delta:b})}function d(y,b){a="PUSH";let v=Sb(g.location,y,b);r&&r(v,y),u=l()+1;let _=vA(v,u),S=g.createHref(v);try{o.pushState(_,"",S)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(S)}i&&c&&c({action:a,location:g.location,delta:1})}function f(y,b){a="REPLACE";let v=Sb(g.location,y,b);r&&r(v,y),u=l();let _=vA(v,u),S=g.createHref(v);o.replaceState(_,"",S),i&&c&&c({action:a,location:g.location,delta:0})}function p(y){let b=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof y=="string"?y:Af(y);return v=v.replace(/ $/,"%20"),jt(b,`No window.location.(origin|href) available to create URL for href: ${v}`),new URL(v,b)}let g={get action(){return a},get location(){return t(s,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(EA,h),c=y,()=>{s.removeEventListener(EA,h),c=null}},createHref(y){return e(s,y)},createURL:p,encodeLocation(y){let b=p(y);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:d,replace:f,go(y){return o.go(y)}};return g}function nT(t,e,r="/"){return Hk(t,e,r,!1)}function Hk(t,e,r,n){let s=typeof e=="string"?bu(e):e,i=To(s.pathname||"/",r);if(i==null)return null;let o=sT(t);zk(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=eD(i);a=Zk(o[c],u,n)}return a}function sT(t,e=[],r=[],n=""){let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(jt(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let u=_o([n,c.relativePath]),l=r.concat(c);i.children&&i.children.length>0&&(jt(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),sT(i.children,e,l,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:Yk(u,i.index),routesMeta:l})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of iT(i.path))s(i,o,c)}),e}function iT(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=iT(n.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function zk(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Qk(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var qk=/^:[\w-]+$/,Wk=3,Vk=2,Gk=1,Kk=10,Jk=-2,_A=t=>t==="*";function Yk(t,e){let r=t.split("/"),n=r.length;return r.some(_A)&&(n+=Jk),e&&(n+=Vk),r.filter(s=>!_A(s)).reduce((s,i)=>s+(qk.test(i)?Wk:i===""?Gk:Kk),n)}function Qk(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function Zk(t,e,r=!1){let{routesMeta:n}=t,s={},i="/",o=[];for(let a=0;a<n.length;++a){let c=n[a],u=a===n.length-1,l=i==="/"?e:e.slice(i.length)||"/",h=Lm({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},l),d=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=Lm({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},l)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:_o([i,h.pathname]),pathnameBase:sD(_o([i,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(i=_o([i,h.pathnameBase]))}return o}function Lm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Xk(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((u,{paramName:l,isOptional:h},d)=>{if(l==="*"){let p=a[d]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const f=a[d];return h&&!f?u[l]=void 0:u[l]=(f||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function Xk(t,e=!1,r=!0){Qs(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(n.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function eD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qs(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function To(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function tD(t,e="/"){let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?bu(t):t;return{pathname:r?r.startsWith("/")?r:rD(r,e):e,search:iD(n),hash:oD(s)}}function rD(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function $w(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function nD(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function oT(t){let e=nD(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function aT(t,e,r,n=!1){let s;typeof t=="string"?s=bu(t):(s={...t},jt(!s.pathname||!s.pathname.includes("?"),$w("?","pathname","search",s)),jt(!s.pathname||!s.pathname.includes("#"),$w("#","pathname","hash",s)),jt(!s.search||!s.search.includes("#"),$w("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;s.pathname=d.join("/")}a=h>=0?e[h]:"/"}let c=tD(s,a),u=o&&o!=="/"&&o.endsWith("/"),l=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||l)&&(c.pathname+="/"),c}var _o=t=>t.join("/").replace(/\/\/+/g,"/"),sD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),iD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,oD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function aD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var cT=["POST","PUT","PATCH","DELETE"];new Set(cT);var cD=["GET",...cT];new Set(cD);var Yh=J.createContext(null);Yh.displayName="DataRouter";var Ly=J.createContext(null);Ly.displayName="DataRouterState";var uT=J.createContext({isTransitioning:!1});uT.displayName="ViewTransition";var uD=J.createContext(new Map);uD.displayName="Fetchers";var lD=J.createContext(null);lD.displayName="Await";var Fi=J.createContext(null);Fi.displayName="Navigation";var Vp=J.createContext(null);Vp.displayName="Location";var Bo=J.createContext({outlet:null,matches:[],isDataRoute:!1});Bo.displayName="Route";var Cv=J.createContext(null);Cv.displayName="RouteError";function hD(t,{relative:e}={}){jt(Gp(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=J.useContext(Fi),{hash:s,pathname:i,search:o}=Kp(t,{relative:e}),a=i;return r!=="/"&&(a=i==="/"?r:_o([r,i])),n.createHref({pathname:a,search:o,hash:s})}function Gp(){return J.useContext(Vp)!=null}function Eu(){return jt(Gp(),"useLocation() may be used only in the context of a <Router> component."),J.useContext(Vp).location}var lT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hT(t){J.useContext(Fi).static||J.useLayoutEffect(t)}function dD(){let{isDataRoute:t}=J.useContext(Bo);return t?SD():fD()}function fD(){jt(Gp(),"useNavigate() may be used only in the context of a <Router> component.");let t=J.useContext(Yh),{basename:e,navigator:r}=J.useContext(Fi),{matches:n}=J.useContext(Bo),{pathname:s}=Eu(),i=JSON.stringify(oT(n)),o=J.useRef(!1);return hT(()=>{o.current=!0}),J.useCallback((c,u={})=>{if(Qs(o.current,lT),!o.current)return;if(typeof c=="number"){r.go(c);return}let l=aT(c,JSON.parse(i),s,u.relative==="path");t==null&&e!=="/"&&(l.pathname=l.pathname==="/"?e:_o([e,l.pathname])),(u.replace?r.replace:r.push)(l,u.state,u)},[e,r,i,s,t])}J.createContext(null);function Kp(t,{relative:e}={}){let{matches:r}=J.useContext(Bo),{pathname:n}=Eu(),s=JSON.stringify(oT(r));return J.useMemo(()=>aT(t,JSON.parse(s),n,e==="path"),[t,s,n,e])}function pD(t,e){return dT(t,e)}function dT(t,e,r,n){var v;jt(Gp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:i}=J.useContext(Fi),{matches:o}=J.useContext(Bo),a=o[o.length-1],c=a?a.params:{},u=a?a.pathname:"/",l=a?a.pathnameBase:"/",h=a&&a.route;{let _=h&&h.path||"";fT(u,!h||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let d=Eu(),f;if(e){let _=typeof e=="string"?bu(e):e;jt(l==="/"||((v=_.pathname)==null?void 0:v.startsWith(l)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${l}" but pathname "${_.pathname}" was given in the \`location\` prop.`),f=_}else f=d;let p=f.pathname||"/",g=p;if(l!=="/"){let _=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(_.length).join("/")}let y=!i&&r&&r.matches&&r.matches.length>0?r.matches:nT(t,{pathname:g});Qs(h||y!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Qs(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=bD(y&&y.map(_=>Object.assign({},_,{params:Object.assign({},c,_.params),pathname:_o([l,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:_o([l,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,r,n);return e&&b?J.createElement(Vp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},b):b}function gD(){let t=CD(),e=aD(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=J.createElement(J.Fragment,null,J.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),J.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",J.createElement("code",{style:i},"ErrorBoundary")," or"," ",J.createElement("code",{style:i},"errorElement")," prop on your route.")),J.createElement(J.Fragment,null,J.createElement("h2",null,"Unexpected Application Error!"),J.createElement("h3",{style:{fontStyle:"italic"}},e),r?J.createElement("pre",{style:s},r):null,o)}var mD=J.createElement(gD,null),yD=class extends J.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?J.createElement(Bo.Provider,{value:this.props.routeContext},J.createElement(Cv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function wD({routeContext:t,match:e,children:r}){let n=J.useContext(Yh);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),J.createElement(Bo.Provider,{value:t},r)}function bD(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,i=r==null?void 0:r.errors;if(i!=null){let c=s.findIndex(u=>u.route.id&&(i==null?void 0:i[u.route.id])!==void 0);jt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let o=!1,a=-1;if(r)for(let c=0;c<s.length;c++){let u=s[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=c),u.route.id){let{loaderData:l,errors:h}=r,d=u.route.loader&&!l.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||d){o=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((c,u,l)=>{let h,d=!1,f=null,p=null;r&&(h=i&&u.route.id?i[u.route.id]:void 0,f=u.route.errorElement||mD,o&&(a<0&&l===0?(fT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):a===l&&(d=!0,p=u.route.hydrateFallbackElement||null)));let g=e.concat(s.slice(0,l+1)),y=()=>{let b;return h?b=f:d?b=p:u.route.Component?b=J.createElement(u.route.Component,null):u.route.element?b=u.route.element:b=c,J.createElement(wD,{match:u,routeContext:{outlet:c,matches:g,isDataRoute:r!=null},children:b})};return r&&(u.route.ErrorBoundary||u.route.errorElement||l===0)?J.createElement(yD,{location:r.location,revalidation:r.revalidation,component:f,error:h,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}function Sv(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ED(t){let e=J.useContext(Yh);return jt(e,Sv(t)),e}function vD(t){let e=J.useContext(Ly);return jt(e,Sv(t)),e}function _D(t){let e=J.useContext(Bo);return jt(e,Sv(t)),e}function Iv(t){let e=_D(t),r=e.matches[e.matches.length-1];return jt(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function AD(){return Iv("useRouteId")}function CD(){var n;let t=J.useContext(Cv),e=vD("useRouteError"),r=Iv("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function SD(){let{router:t}=ED("useNavigate"),e=Iv("useNavigate"),r=J.useRef(!1);return hT(()=>{r.current=!0}),J.useCallback(async(s,i={})=>{Qs(r.current,lT),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var AA={};function fT(t,e,r){!e&&!AA[t]&&(AA[t]=!0,Qs(!1,r))}J.memo(ID);function ID({routes:t,future:e,state:r}){return dT(t,void 0,r,e)}function ND(t){jt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function TD({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){jt(!Gp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=J.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof r=="string"&&(r=bu(r));let{pathname:c="/",search:u="",hash:l="",state:h=null,key:d="default"}=r,f=J.useMemo(()=>{let p=To(c,o);return p==null?null:{location:{pathname:p,search:u,hash:l,state:h,key:d},navigationType:n}},[o,c,u,l,h,d,n]);return Qs(f!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${l}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:J.createElement(Fi.Provider,{value:a},J.createElement(Vp.Provider,{children:e,value:f}))}function nne({children:t,location:e}){return pD(Ib(t),e)}function Ib(t,e=[]){let r=[];return J.Children.forEach(t,(n,s)=>{if(!J.isValidElement(n))return;let i=[...e,s];if(n.type===J.Fragment){r.push.apply(r,Ib(n.props.children,i));return}jt(n.type===ND,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),jt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Ib(n.props.children,i)),r.push(o)}),r}var dm="get",fm="application/x-www-form-urlencoded";function $y(t){return t!=null&&typeof t.tagName=="string"}function OD(t){return $y(t)&&t.tagName.toLowerCase()==="button"}function xD(t){return $y(t)&&t.tagName.toLowerCase()==="form"}function PD(t){return $y(t)&&t.tagName.toLowerCase()==="input"}function RD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function kD(t,e){return t.button===0&&(!e||e==="_self")&&!RD(t)}var Ig=null;function DD(){if(Ig===null)try{new FormData(document.createElement("form"),0),Ig=!1}catch{Ig=!0}return Ig}var UD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mw(t){return t!=null&&!UD.has(t)?(Qs(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fm}"`),null):t}function BD(t,e){let r,n,s,i,o;if(xD(t)){let a=t.getAttribute("action");n=a?To(a,e):null,r=t.getAttribute("method")||dm,s=Mw(t.getAttribute("enctype"))||fm,i=new FormData(t)}else if(OD(t)||PD(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||a.getAttribute("action");if(n=c?To(c,e):null,r=t.getAttribute("formmethod")||a.getAttribute("method")||dm,s=Mw(t.getAttribute("formenctype"))||Mw(a.getAttribute("enctype"))||fm,i=new FormData(a,t),!DD()){let{name:u,type:l,value:h}=t;if(l==="image"){let d=u?`${u}.`:"";i.append(`${d}x`,"0"),i.append(`${d}y`,"0")}else u&&i.append(u,h)}}else{if($y(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=dm,n=null,s=fm,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:o}}function Nv(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function LD(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $D(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function MD(t,e,r){let n=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await LD(i,r);return o.links?o.links():[]}return[]}));return zD(n.flat(1).filter($D).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function CA(t,e,r,n,s,i){let o=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,a=(c,u)=>{var l;return r[u].pathname!==c.pathname||((l=r[u].route.path)==null?void 0:l.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,u)=>o(c,u)||a(c,u)):i==="data"?e.filter((c,u)=>{var h;let l=n.routes[c.route.id];if(!l||!l.hasLoader)return!1;if(o(c,u)||a(c,u))return!0;if(c.route.shouldRevalidate){let d=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function FD(t,e,{includeHydrateFallback:r}={}){return jD(t.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function jD(t){return[...new Set(t)]}function HD(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function zD(t,e){let r=new Set;return new Set(e),t.reduce((n,s)=>{let i=JSON.stringify(HD(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function qD(t,e){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname="_root.data":e&&To(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function pT(){let t=J.useContext(Yh);return Nv(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function WD(){let t=J.useContext(Ly);return Nv(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Tv=J.createContext(void 0);Tv.displayName="FrameworkContext";function gT(){let t=J.useContext(Tv);return Nv(t,"You must render this element inside a <HydratedRouter> element"),t}function VD(t,e){let r=J.useContext(Tv),[n,s]=J.useState(!1),[i,o]=J.useState(!1),{onFocus:a,onBlur:c,onMouseEnter:u,onMouseLeave:l,onTouchStart:h}=e,d=J.useRef(null);J.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let g=b=>{b.forEach(v=>{o(v.isIntersecting)})},y=new IntersectionObserver(g,{threshold:.5});return d.current&&y.observe(d.current),()=>{y.disconnect()}}},[t]),J.useEffect(()=>{if(n){let g=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(g)}}},[n]);let f=()=>{s(!0)},p=()=>{s(!1),o(!1)};return r?t!=="intent"?[i,d,{}]:[i,d,{onFocus:bd(a,f),onBlur:bd(c,p),onMouseEnter:bd(u,f),onMouseLeave:bd(l,p),onTouchStart:bd(h,f)}]:[!1,d,{}]}function bd(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function GD({page:t,...e}){let{router:r}=pT(),n=J.useMemo(()=>nT(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?J.createElement(JD,{page:t,matches:n,...e}):null}function KD(t){let{manifest:e,routeModules:r}=gT(),[n,s]=J.useState([]);return J.useEffect(()=>{let i=!1;return MD(t,e,r).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,r]),n}function JD({page:t,matches:e,...r}){let n=Eu(),{manifest:s,routeModules:i}=gT(),{basename:o}=pT(),{loaderData:a,matches:c}=WD(),u=J.useMemo(()=>CA(t,e,c,s,n,"data"),[t,e,c,s,n]),l=J.useMemo(()=>CA(t,e,c,s,n,"assets"),[t,e,c,s,n]),h=J.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let p=new Set,g=!1;if(e.forEach(b=>{var _;let v=s.routes[b.route.id];!v||!v.hasLoader||(!u.some(S=>S.route.id===b.route.id)&&b.route.id in a&&((_=i[b.route.id])!=null&&_.shouldRevalidate)||v.hasClientLoader?g=!0:p.add(b.route.id))}),p.size===0)return[];let y=qD(t,o);return g&&p.size>0&&y.searchParams.set("_routes",e.filter(b=>p.has(b.route.id)).map(b=>b.route.id).join(",")),[y.pathname+y.search]},[o,a,n,s,u,e,t,i]),d=J.useMemo(()=>FD(l,s),[l,s]),f=KD(l);return J.createElement(J.Fragment,null,h.map(p=>J.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...r})),d.map(p=>J.createElement("link",{key:p,rel:"modulepreload",href:p,...r})),f.map(({key:p,link:g})=>J.createElement("link",{key:p,...g})))}function YD(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var mT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mT&&(window.__reactRouterVersion="7.4.0")}catch{}function sne({basename:t,children:e,window:r}){let n=J.useRef();n.current==null&&(n.current=Mk({window:r,v5Compat:!0}));let s=n.current,[i,o]=J.useState({action:s.action,location:s.location}),a=J.useCallback(c=>{J.startTransition(()=>o(c))},[o]);return J.useLayoutEffect(()=>s.listen(a),[s,a]),J.createElement(TD,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var yT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wT=J.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:o,state:a,target:c,to:u,preventScrollReset:l,viewTransition:h,...d},f){let{basename:p}=J.useContext(Fi),g=typeof u=="string"&&yT.test(u),y,b=!1;if(typeof u=="string"&&g&&(y=u,mT))try{let R=new URL(window.location.href),B=u.startsWith("//")?new URL(R.protocol+u):new URL(u),$=To(B.pathname,p);B.origin===R.origin&&$!=null?u=$+B.search+B.hash:b=!0}catch{Qs(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=hD(u,{relative:s}),[_,S,N]=VD(n,d),A=e3(u,{replace:o,state:a,target:c,preventScrollReset:l,relative:s,viewTransition:h});function x(R){e&&e(R),R.defaultPrevented||A(R)}let P=J.createElement("a",{...d,...N,href:y||v,onClick:b||i?e:x,ref:YD(f,S),target:c,"data-discover":!g&&r==="render"?"true":void 0});return _&&!g?J.createElement(J.Fragment,null,P,J.createElement(GD,{page:v})):P});wT.displayName="Link";var QD=J.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:o,viewTransition:a,children:c,...u},l){let h=Kp(o,{relative:u.relative}),d=Eu(),f=J.useContext(Ly),{navigator:p,basename:g}=J.useContext(Fi),y=f!=null&&i3(h)&&a===!0,b=p.encodeLocation?p.encodeLocation(h).pathname:h.pathname,v=d.pathname,_=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;r||(v=v.toLowerCase(),_=_?_.toLowerCase():null,b=b.toLowerCase()),_&&g&&(_=To(_,g)||_);const S=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let N=v===b||!s&&v.startsWith(b)&&v.charAt(S)==="/",A=_!=null&&(_===b||!s&&_.startsWith(b)&&_.charAt(b.length)==="/"),x={isActive:N,isPending:A,isTransitioning:y},P=N?e:void 0,R;typeof n=="function"?R=n(x):R=[n,N?"active":null,A?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let B=typeof i=="function"?i(x):i;return J.createElement(wT,{...u,"aria-current":P,className:R,ref:l,style:B,to:o,viewTransition:a},typeof c=="function"?c(x):c)});QD.displayName="NavLink";var ZD=J.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:s,state:i,method:o=dm,action:a,onSubmit:c,relative:u,preventScrollReset:l,viewTransition:h,...d},f)=>{let p=n3(),g=s3(a,{relative:u}),y=o.toLowerCase()==="get"?"get":"post",b=typeof a=="string"&&yT.test(a),v=_=>{if(c&&c(_),_.defaultPrevented)return;_.preventDefault();let S=_.nativeEvent.submitter,N=(S==null?void 0:S.getAttribute("formmethod"))||o;p(S||_.currentTarget,{fetcherKey:e,method:N,navigate:r,replace:s,state:i,relative:u,preventScrollReset:l,viewTransition:h})};return J.createElement("form",{ref:f,method:y,action:g,onSubmit:n?c:v,...d,"data-discover":!b&&t==="render"?"true":void 0})});ZD.displayName="Form";function XD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bT(t){let e=J.useContext(Yh);return jt(e,XD(t)),e}function e3(t,{target:e,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=dD(),c=Eu(),u=Kp(t,{relative:i});return J.useCallback(l=>{if(kD(l,e)){l.preventDefault();let h=r!==void 0?r:Af(c)===Af(u);a(t,{replace:h,state:n,preventScrollReset:s,relative:i,viewTransition:o})}},[c,a,u,r,n,e,t,s,i,o])}var t3=0,r3=()=>`__${String(++t3)}__`;function n3(){let{router:t}=bT("useSubmit"),{basename:e}=J.useContext(Fi),r=AD();return J.useCallback(async(n,s={})=>{let{action:i,method:o,encType:a,formData:c,body:u}=BD(n,e);if(s.navigate===!1){let l=s.fetcherKey||r3();await t.fetch(l,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function s3(t,{relative:e}={}){let{basename:r}=J.useContext(Fi),n=J.useContext(Bo);jt(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Kp(t||".",{relative:e})},o=Eu();if(t==null){i.search=o.search;let a=new URLSearchParams(i.search),c=a.getAll("index");if(c.some(l=>l==="")){a.delete("index"),c.filter(h=>h).forEach(h=>a.append("index",h));let l=a.toString();i.search=l?`?${l}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:_o([r,i.pathname])),Af(i)}function i3(t,e={}){let r=J.useContext(uT);jt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=bT("useViewTransitionState"),s=Kp(t,{relative:e.relative});if(!r.isTransitioning)return!1;let i=To(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=To(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Lm(s.pathname,o)!=null||Lm(s.pathname,i)!=null}new TextEncoder;const o3=Symbol(),Ov=Symbol(),Ed="a",of="w";let a3=(t,e)=>new Proxy(t,e);const Nb=Object.getPrototypeOf,Tb=new WeakMap,ET=t=>t&&(Tb.has(t)?Tb.get(t):Nb(t)===Object.prototype||Nb(t)===Array.prototype),$m=t=>typeof t=="object"&&t!==null,c3=t=>{if(Array.isArray(t))return Array.from(t);const e=Object.getOwnPropertyDescriptors(t);return Object.values(e).forEach(r=>{r.configurable=!0}),Object.create(Nb(t),e)},xv=t=>t[Ov]||t,vT=(t,e,r,n)=>{if(!ET(t))return t;let s=n&&n.get(t);if(!s){const c=xv(t);s=(u=>Object.values(Object.getOwnPropertyDescriptors(u)).some(l=>!l.configurable&&!l.writable))(c)?[c,c3(c)]:[c],n==null||n.set(t,s)}const[i,o]=s;let a=r&&r.get(i);return a&&a[1].f===!!o||(a=((c,u)=>{const l={f:u};let h=!1;const d=(p,g)=>{if(!h){let y=l[Ed].get(c);if(y||(y={},l[Ed].set(c,y)),p===of)y[of]=!0;else{let b=y[p];b||(b=new Set,y[p]=b),b.add(g)}}},f={get:(p,g)=>g===Ov?c:(d("k",g),vT(Reflect.get(p,g),l[Ed],l.c,l.t)),has:(p,g)=>g===o3?(h=!0,l[Ed].delete(c),!0):(d("h",g),Reflect.has(p,g)),getOwnPropertyDescriptor:(p,g)=>(d("o",g),Reflect.getOwnPropertyDescriptor(p,g)),ownKeys:p=>(d(of),Reflect.ownKeys(p))};return u&&(f.set=f.deleteProperty=()=>!1),[f,l]})(i,!!o),a[1].p=a3(o||i,a[0]),r&&r.set(i,a)),a[1][Ed]=e,a[1].c=r,a[1].t=n,a[1].p},_T=(t,e,r,n,s=Object.is)=>{if(s(t,e))return!1;if(!$m(t)||!$m(e))return!0;const i=r.get(xv(t));if(!i)return!0;if(n){const a=n.get(t);if(a&&a.n===e)return a.g;n.set(t,{n:e,g:!1})}let o=null;try{for(const a of i.h||[])if(o=Reflect.has(t,a)!==Reflect.has(e,a),o)return o;if(i[of]===!0){if(o=((a,c)=>{const u=Reflect.ownKeys(a),l=Reflect.ownKeys(c);return u.length!==l.length||u.some((h,d)=>h!==l[d])})(t,e),o)return o}else for(const a of i.o||[])if(o=!!Reflect.getOwnPropertyDescriptor(t,a)!=!!Reflect.getOwnPropertyDescriptor(e,a),o)return o;for(const a of i.k||[])if(o=_T(t[a],e[a],r,n,s),o)return o;return o===null&&(o=!0),o}finally{n&&n.set(t,{n:e,g:o})}},u3=t=>ET(t)&&t[Ov]||null,SA=(t,e=!0)=>{Tb.set(t,e)},l3=(t,e,r)=>{const n=[],s=new WeakSet,i=(o,a)=>{if(s.has(o))return;$m(o)&&s.add(o);const c=$m(o)&&e.get(xv(o));if(c){var u,l;if((u=c.h)==null||u.forEach(d=>{const f=`:has(${String(d)})`;n.push(a?[...a,f]:[f])}),c[of]===!0){const d=":ownKeys";n.push(a?[...a,d]:[d])}else{var h;(h=c.o)==null||h.forEach(d=>{const f=`:hasOwn(${String(d)})`;n.push(a?[...a,f]:[f])})}(l=c.k)==null||l.forEach(d=>{!("value"in(Object.getOwnPropertyDescriptor(o,d)||{}))||i(o[d],a?[...a,d]:[d])})}else a&&n.push(a)};return i(t),n},Mm={},Fw=t=>typeof t=="object"&&t!==null,Jo=new WeakMap,Hd=new WeakSet,h3=(t=Object.is,e=(u,l)=>new Proxy(u,l),r=u=>Fw(u)&&!Hd.has(u)&&(Array.isArray(u)||!(Symbol.iterator in u))&&!(u instanceof WeakMap)&&!(u instanceof WeakSet)&&!(u instanceof Error)&&!(u instanceof Number)&&!(u instanceof Date)&&!(u instanceof String)&&!(u instanceof RegExp)&&!(u instanceof ArrayBuffer),n=u=>{switch(u.status){case"fulfilled":return u.value;case"rejected":throw u.reason;default:throw u}},s=new WeakMap,i=(u,l,h=n)=>{const d=s.get(u);if((d==null?void 0:d[0])===l)return d[1];const f=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u));return SA(f,!0),s.set(u,[l,f]),Reflect.ownKeys(u).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(u,p),{enumerable:y}=Reflect.getOwnPropertyDescriptor(u,p),b={value:g,enumerable:y,configurable:!0};if(Hd.has(g))SA(g,!1);else if(g instanceof Promise)delete b.value,b.get=()=>h(g);else if(Jo.has(g)){const[v,_]=Jo.get(g);b.value=i(v,_(),h)}Object.defineProperty(f,p,b)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=u=>{if(!Fw(u))throw new Error("object required");const l=o.get(u);if(l)return l;let h=a[0];const d=new Set,f=(R,B=++a[0])=>{h!==B&&(h=B,d.forEach($=>$(R,B)))};let p=a[1];const g=(R=++a[1])=>(p!==R&&!d.size&&(p=R,b.forEach(([B])=>{const $=B[1](R);$>h&&(h=$)})),h),y=R=>(B,$)=>{const K=[...B];K[1]=[R,...K[1]],f(K,$)},b=new Map,v=(R,B)=>{if((Mm?"production":void 0)!=="production"&&b.has(R))throw new Error("prop listener already exists");if(d.size){const $=B[3](y(R));b.set(R,[B,$])}else b.set(R,[B])},_=R=>{var B;const $=b.get(R);$&&(b.delete(R),(B=$[1])==null||B.call($))},S=R=>(d.add(R),d.size===1&&b.forEach(([$,K],te)=>{if((Mm?"production":void 0)!=="production"&&K)throw new Error("remove already exists");const H=$[3](y(te));b.set(te,[$,H])}),()=>{d.delete(R),d.size===0&&b.forEach(([$,K],te)=>{K&&(K(),b.set(te,[$]))})}),N=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u)),x=e(N,{deleteProperty(R,B){const $=Reflect.get(R,B);_(B);const K=Reflect.deleteProperty(R,B);return K&&f(["delete",[B],$]),K},set(R,B,$,K){const te=Reflect.has(R,B),H=Reflect.get(R,B,K);if(te&&(t(H,$)||o.has($)&&t(H,o.get($))))return!0;_(B),Fw($)&&($=u3($)||$);let C=$;if($ instanceof Promise)$.then(T=>{$.status="fulfilled",$.value=T,f(["resolve",[B],T])}).catch(T=>{$.status="rejected",$.reason=T,f(["reject",[B],T])});else{!Jo.has($)&&r($)&&(C=c($));const T=!Hd.has(C)&&Jo.get(C);T&&v(B,T)}return Reflect.set(R,B,C,K),f(["set",[B],$,H]),!0}});o.set(u,x);const P=[N,g,i,S];return Jo.set(x,P),Reflect.ownKeys(u).forEach(R=>{const B=Object.getOwnPropertyDescriptor(u,R);"value"in B&&(x[R]=u[R],delete B.value,delete B.writable),Object.defineProperty(N,R,B)}),x})=>[c,Jo,Hd,t,e,r,n,s,i,o,a],[d3]=h3();function Ht(t={}){return d3(t)}function Gr(t,e,r){const n=Jo.get(t);(Mm?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let s;const i=[],o=n[3];let a=!1;const u=o(l=>{i.push(l),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,u()}}function Zc(t,e){const r=Jo.get(t);(Mm?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");const[n,s,i]=r;return i(n,s(),e)}function Xc(t){return Hd.add(t),t}function In(t,e,r,n){let s=t[e];return Gr(t,()=>{const i=t[e];Object.is(s,i)||r(s=i)})}function f3(t){const e=Ht({data:Array.from([]),has(r){return this.data.some(n=>n[0]===r)},set(r,n){const s=this.data.find(i=>i[0]===r);return s?s[1]=n:this.data.push([r,n]),this},get(r){var n;return(n=this.data.find(s=>s[0]===r))==null?void 0:n[1]},delete(r){const n=this.data.findIndex(s=>s[0]===r);return n===-1?!1:(this.data.splice(n,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(r){this.data.forEach(n=>{r(n[1],n[0],this)})},keys(){return this.data.map(r=>r[0]).values()},values(){return this.data.map(r=>r[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}const AT={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(r=>r.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]}};var p3=20,g3=1,Qh=1e6,m3=1e6,y3=-7,w3=21,b3=!1,Jp="[big.js] ",vu=Jp+"Invalid ",My=vu+"decimal places",E3=vu+"rounding mode",CT=Jp+"Division by zero",lt={},Pi=void 0,v3=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function ST(){function t(e){var r=this;if(!(r instanceof t))return e===Pi?ST():new t(e);if(e instanceof t)r.s=e.s,r.e=e.e,r.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(vu+"value");e=e===0&&1/e<0?"-0":String(e)}_3(r,e)}r.constructor=t}return t.prototype=lt,t.DP=p3,t.RM=g3,t.NE=y3,t.PE=w3,t.strict=b3,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function _3(t,e){var r,n,s;if(!v3.test(e))throw Error(vu+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),s=e.length,n=0;n<s&&e.charAt(n)=="0";)++n;if(n==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=r-n-1,t.c=[],r=0;n<=s;)t.c[r++]=+e.charAt(n++)}return t}function _u(t,e,r,n){var s=t.c;if(r===Pi&&(r=t.constructor.RM),r!==0&&r!==1&&r!==2&&r!==3)throw Error(E3);if(e<1)n=r===3&&(n||!!s[0])||e===0&&(r===1&&s[0]>=5||r===2&&(s[0]>5||s[0]===5&&(n||s[1]!==Pi))),s.length=1,n?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(n=r===1&&s[e]>=5||r===2&&(s[e]>5||s[e]===5&&(n||s[e+1]!==Pi||s[e-1]&1))||r===3&&(n||!!s[0]),s.length=e,n){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function Au(t,e,r){var n=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)s="0"+s;s="0."+s}else if(n>0)if(++n>i)for(n-=i;n--;)s+="0";else n<i&&(s=s.slice(0,n)+"."+s.slice(n));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&r?"-"+s:s}lt.abs=function(){var t=new this.constructor(this);return t.s=1,t};lt.cmp=function(t){var e,r=this,n=r.c,s=(t=new r.constructor(t)).c,i=r.s,o=t.s,a=r.e,c=t.e;if(!n[0]||!s[0])return n[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=n.length)<(c=s.length)?a:c,i=-1;++i<o;)if(n[i]!=s[i])return n[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};lt.div=function(t){var e=this,r=e.constructor,n=e.c,s=(t=new r(t)).c,i=e.s==t.s?1:-1,o=r.DP;if(o!==~~o||o<0||o>Qh)throw Error(My);if(!s[0])throw Error(CT);if(!n[0])return t.s=i,t.c=[t.e=0],t;var a,c,u,l,h,d=s.slice(),f=a=s.length,p=n.length,g=n.slice(0,a),y=g.length,b=t,v=b.c=[],_=0,S=o+(b.e=e.e-t.e)+1;for(b.s=i,i=S<0?0:S,d.unshift(0);y++<a;)g.push(0);do{for(u=0;u<10;u++){if(a!=(y=g.length))l=a>y?1:-1;else for(h=-1,l=0;++h<a;)if(s[h]!=g[h]){l=s[h]>g[h]?1:-1;break}if(l<0){for(c=y==a?s:d;y;){if(g[--y]<c[y]){for(h=y;h&&!g[--h];)g[h]=9;--g[h],g[y]+=10}g[y]-=c[y]}for(;!g[0];)g.shift()}else break}v[_++]=l?u:++u,g[0]&&l?g[y]=n[f]||0:g=[n[f]]}while((f++<p||g[0]!==Pi)&&i--);return!v[0]&&_!=1&&(v.shift(),b.e--,S--),_>S&&_u(b,S,r.RM,g[0]!==Pi),b};lt.eq=function(t){return this.cmp(t)===0};lt.gt=function(t){return this.cmp(t)>0};lt.gte=function(t){return this.cmp(t)>-1};lt.lt=function(t){return this.cmp(t)<0};lt.lte=function(t){return this.cmp(t)<1};lt.minus=lt.sub=function(t){var e,r,n,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var u=i.c.slice(),l=i.e,h=t.c,d=t.e;if(!u[0]||!h[0])return h[0]?t.s=-c:u[0]?t=new o(i):t.s=1,t;if(a=l-d){for((s=a<0)?(a=-a,n=u):(d=l,n=h),n.reverse(),c=a;c--;)n.push(0);n.reverse()}else for(r=((s=u.length<h.length)?u:h).length,a=c=0;c<r;c++)if(u[c]!=h[c]){s=u[c]<h[c];break}if(s&&(n=u,u=h,h=n,t.s=-t.s),(c=(r=h.length)-(e=u.length))>0)for(;c--;)u[e++]=0;for(c=e;r>a;){if(u[--r]<h[r]){for(e=r;e&&!u[--e];)u[e]=9;--u[e],u[r]+=10}u[r]-=h[r]}for(;u[--c]===0;)u.pop();for(;u[0]===0;)u.shift(),--d;return u[0]||(t.s=1,u=[d=0]),t.c=u,t.e=d,t};lt.mod=function(t){var e,r=this,n=r.constructor,s=r.s,i=(t=new n(t)).s;if(!t.c[0])throw Error(CT);return r.s=t.s=1,e=t.cmp(r)==1,r.s=s,t.s=i,e?new n(r):(s=n.DP,i=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=s,n.RM=i,this.minus(r.times(t)))};lt.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};lt.plus=lt.add=function(t){var e,r,n,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,u=t.c;if(!a[0]||!u[0])return u[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,n=u):(e=-e,n=a),n.reverse();e--;)n.push(0);n.reverse()}for(a.length-u.length<0&&(n=u,u=a,a=n),e=u.length,r=0;e;a[e]%=10)r=(a[--e]=a[e]+u[e]+r)/10|0;for(r&&(a.unshift(r),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};lt.pow=function(t){var e=this,r=new e.constructor("1"),n=r,s=t<0;if(t!==~~t||t<-1e6||t>m3)throw Error(vu+"exponent");for(s&&(t=-t);t&1&&(n=n.times(e)),t>>=1,!!t;)e=e.times(e);return s?r.div(n):n};lt.prec=function(t,e){if(t!==~~t||t<1||t>Qh)throw Error(vu+"precision");return _u(new this.constructor(this),t,e)};lt.round=function(t,e){if(t===Pi)t=0;else if(t!==~~t||t<-1e6||t>Qh)throw Error(My);return _u(new this.constructor(this),t+this.e+1,e)};lt.sqrt=function(){var t,e,r,n=this,s=n.constructor,i=n.s,o=n.e,a=new s("0.5");if(!n.c[0])return new s(n);if(i<0)throw Error(Jp+"No square root");i=Math.sqrt(+Au(n,!0,!0)),i===0||i===1/0?(e=n.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do r=t,t=a.times(r.plus(n.div(r)));while(r.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return _u(t,(s.DP-=4)+t.e+1,s.RM)};lt.times=lt.mul=function(t){var e,r=this,n=r.constructor,s=r.c,i=(t=new n(t)).c,o=s.length,a=i.length,c=r.e,u=t.e;if(t.s=r.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+u,o<a&&(e=s,s=i,i=e,u=o,o=a,a=u),e=new Array(u=o+a);u--;)e[u]=0;for(c=a;c--;){for(a=0,u=o+c;u>c;)a=e[u]+i[c]*s[u-c-1]+a,e[u--]=a%10,a=a/10|0;e[u]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};lt.toExponential=function(t,e){var r=this,n=r.c[0];if(t!==Pi){if(t!==~~t||t<0||t>Qh)throw Error(My);for(r=_u(new r.constructor(r),++t,e);r.c.length<t;)r.c.push(0)}return Au(r,!0,!!n)};lt.toFixed=function(t,e){var r=this,n=r.c[0];if(t!==Pi){if(t!==~~t||t<0||t>Qh)throw Error(My);for(r=_u(new r.constructor(r),t+r.e+1,e),t=t+r.e+1;r.c.length<t;)r.c.push(0)}return Au(r,!1,!!n)};lt[Symbol.for("nodejs.util.inspect.custom")]=lt.toJSON=lt.toString=function(){var t=this,e=t.constructor;return Au(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};lt.toNumber=function(){var t=+Au(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(Jp+"Imprecise conversion");return t};lt.toPrecision=function(t,e){var r=this,n=r.constructor,s=r.c[0];if(t!==Pi){if(t!==~~t||t<1||t>Qh)throw Error(vu+"precision");for(r=_u(new n(r),t,e);r.c.length<t;)r.c.push(0)}return Au(r,t<=r.e||r.e<=n.NE||r.e>=n.PE,!!s)};lt.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(Jp+"valueOf disallowed");return Au(t,t.e<=e.NE||t.e>=e.PE,!0)};var vd=ST();const Ng={bigNumber(t){return t?new vd(t):new vd(0)},multiply(t,e){if(t===void 0||e===void 0)return new vd(0);const r=new vd(t),n=new vd(e);return r.times(n)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},A3=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],C3=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],S3=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],oe={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network"},I3={getERC20Abi:t=>oe.USDT_CONTRACT_ADDRESSES.includes(t)?S3:A3,getSwapAbi:()=>C3},Qi={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[r,n,s]=e;if(!r||!n||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:r,chainId:n,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[r,n]=e;if(!r||!n)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:r,chainId:n}}},Le={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types"};function jw(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const ke={setItem(t,e){zd()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(zd())return localStorage.getItem(t)||void 0},removeItem(t){zd()&&localStorage.removeItem(t)},clear(){zd()&&localStorage.clear()}};function zd(){return typeof window<"u"&&typeof localStorage<"u"}function Eo(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}function N3(t){return(t==null?void 0:t.endsWith(oe.WC_NAME_SUFFIX_LEGACY))||(t==null?void 0:t.endsWith(oe.WC_NAME_SUFFIX))}var IA={};const Hw=(typeof kr<"u"&&typeof IA<"u"?IA.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",ine=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],one="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",qr={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:Hw,SECURE_SITE_DASHBOARD:`${Hw}/dashboard`,SECURE_SITE_FAVICON:`${Hw}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in a new browser tab"},DEFAULT_FEATURES:{swaps:!0,onramp:!0,receive:!0,send:!0,email:!0,emailShowWallets:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],history:!0,analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},ge={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=ge.getActiveNamespace(),e=ge.getActiveCaipNetworkId(),r=e?e.split(":")[1]:void 0,n=r?isNaN(Number(r))?r:Number(r):void 0;return{namespace:t,caipNetworkId:e,chainId:n}},setWalletConnectDeepLink({name:t,href:e}){try{ke.setItem(Le.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=ke.getItem(Le.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{ke.removeItem(Le.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{ke.setItem(Le.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{ke.setItem(Le.ACTIVE_CAIP_NETWORK_ID,t),ge.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return ke.getItem(Le.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{ke.removeItem(Le.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=jw(t);ke.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=ge.getRecentWallets();e.find(n=>n.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),ke.setItem(Le.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=ke.getItem(Le.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const r=jw(t);ke.setItem(r,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return ke.getItem(Le.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=jw(t);return ke.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{ke.setItem(Le.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return ke.getItem(Le.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{ke.removeItem(Le.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return ke.getItem(Le.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var r;const t=ke.getItem(Le.ACTIVE_CAIP_NETWORK_ID);return(r=t==null?void 0:t.split(":"))==null?void 0:r[1]},setConnectionStatus(t){try{ke.setItem(Le.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return ke.getItem(Le.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=ke.getItem(Le.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));ke.setItem(Le.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=ge.getConnectedNamespaces();e.includes(t)||(e.push(t),ge.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=ge.getConnectedNamespaces(),r=e.indexOf(t);r>-1&&(e.splice(r,1),ge.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return ke.getItem(Le.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{ke.setItem(Le.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{ke.removeItem(Le.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=ke.getItem(Le.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=ge.getBalanceCache();ke.setItem(Le.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const r=ge.getBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.portfolio))return r.balance;ge.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=ge.getBalanceCache();e[t.caipAddress]=t,ke.setItem(Le.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=ke.getItem(Le.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=ge.getBalanceCache();ke.setItem(Le.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const r=ge.getNativeBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.nativeBalance))return r;console.info("Discarding cache for address",t),ge.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=ge.getNativeBalanceCache();e[t.caipAddress]=t,ke.setItem(Le.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=ke.getItem(Le.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const r=ge.getEnsCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.ens))return r.ens;ge.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=ge.getEnsCache();e[t.address]=t,ke.setItem(Le.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=ge.getEnsCache();ke.setItem(Le.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=ke.getItem(Le.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const r=ge.getIdentityCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.identity))return r.identity;ge.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=ge.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},ke.setItem(Le.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=ge.getIdentityCache();ke.setItem(Le.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{ke.removeItem(Le.PORTFOLIO_CACHE),ke.removeItem(Le.NATIVE_BALANCE_CACHE),ke.removeItem(Le.ENS_CACHE),ke.removeItem(Le.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{ke.setItem(Le.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=ke.getItem(Le.PREFERRED_ACCOUNT_TYPES);return JSON.parse(t)}catch{console.info("Unable to get preferred account types")}}},Oe={isMobile(){var t;return this.isClient()?!!((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Oe.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=qr.TEN_SEC_MS:!0},isAllowedRetry(t,e=qr.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},getPairingExpiry(){return Date.now()+qr.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let r;return(...n)=>{function s(){t(...n)}r&&clearTimeout(r),r=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e){if(Oe.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},formatUniversalUrl(t,e){if(!Oe.isHttpUrl(t))return this.formatNativeUrl(t,e);let r=t;r.endsWith("/")||(r=`${r}/`);const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?ge.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,r){window==null||window.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},returnOpenHref(t,e,r){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},async preloadImage(t){const e=new Promise((r,n)=>{const s=new Image;s.onload=r,s.onerror=n,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Oe.wait(2e3)])},formatBalance(t,e){let r="0.000";if(typeof t=="string"){const n=Number(t);if(n){const s=Math.floor(n*1e3)/1e3;s&&(r=s.toString())}}return`${r}${e?` ${e}`:""}`},formatBalance2(t,e){var n;let r;if(t==="0")r="0";else if(typeof t=="string"){const s=Number(t);s&&(r=(n=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:n[0])}return{value:r??"0",rest:r==="0"?"000":"",symbol:e}},getApiUrl(){return oe.W3M_API_URL},getBlockchainApiUrl(){return oe.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return oe.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,r;return typeof t=="string"?t:typeof((r=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:r.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const r={};return e&&t&&(t.forEach((n,s)=>{r[n]=s}),e.sort((n,s)=>{const i=r[n.id],o=r[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const r of t)e+=r.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[r,n]=e.split(".");return{dollars:r,pennies:n}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const r=new Set;return t.filter(n=>{const s=n[e];return r.has(s)?!1:(r.add(s),!0)})},generateSdkVersion(t,e,r){const s=t.length===0?qr.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${r}`},createAccount(t,e,r,n,s){return{namespace:t,address:e,type:r,publicKey:n,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),r=e[0];return e.filter(Boolean).length===3&&r in oe.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,r="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),r,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,r,e)},injectIntoUrl(t,e,r){const n=t.indexOf(e);if(n===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",n),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,n+i),c=t.substring(n+i,o),u=t.substring(s),l=c+r;return a+l+u}};async function _d(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Fy{constructor({baseUrl:e,clientId:r}){this.baseUrl=e,this.clientId=r}async get({headers:e,signal:r,cache:n,...s}){const i=this.createUrl(s);return(await _d(i,{method:"GET",headers:e,signal:r,cache:n})).json()}async getBlob({headers:e,signal:r,...n}){const s=this.createUrl(n);return(await _d(s,{method:"GET",headers:e,signal:r})).blob()}async post({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await _d(i,{method:"POST",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async put({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await _d(i,{method:"PUT",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async delete({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await _d(i,{method:"DELETE",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}createUrl({path:e,params:r}){const n=new URL(e,this.baseUrl);return r&&Object.entries(r).forEach(([s,i])=>{i&&n.searchParams.append(s,i)}),this.clientId&&n.searchParams.append("clientId",this.clientId),n}}const T3={handleSolanaDeeplinkRedirect(t){if(U.state.activeChain===oe.CHAIN.SOLANA){const e=window.location.href,r=encodeURIComponent(e);if(t==="Phantom"&&!("phantom"in window)){const n=e.startsWith("https")?"https":"http",s=e.split("/")[2],i=encodeURIComponent(`${n}://${s}`);window.location.href=`https://phantom.app/ul/browse/${r}?ref=${i}`}t==="Coinbase Wallet"&&!("coinbaseSolana"in window)&&(window.location.href=`https://go.cb-w.com/dapp?cb_url=${r}`)}}},xn=Ht({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),zs={state:xn,subscribeNetworkImages(t){return Gr(xn.networkImages,()=>t(xn.networkImages))},subscribeKey(t,e){return In(xn,t,e)},subscribe(t){return Gr(xn,()=>t(xn))},setWalletImage(t,e){xn.walletImages[t]=e},setNetworkImage(t,e){xn.networkImages[t]=e},setChainImage(t,e){xn.chainImages[t]=e},setConnectorImage(t,e){xn.connectorImages={...xn.connectorImages,[t]:e}},setTokenImage(t,e){xn.tokenImages[t]=e},setCurrencyImage(t,e){xn.currencyImages[t]=e}},O3={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00"},zw=Ht({networkImagePromises:{}}),IT={async fetchWalletImage(t){if(t)return await xe._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(zw.networkImagePromises[t]||(zw.networkImagePromises[t]=xe._fetchNetworkImage(t)),await zw.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return zs.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return zs.state.walletImages[t.image_id]},getNetworkImage(t){var e,r,n;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(r=t==null?void 0:t.assets)==null?void 0:r.imageUrl;if((n=t==null?void 0:t.assets)!=null&&n.imageId)return zs.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return zs.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return zs.state.connectorImages[t.imageId]},getChainImage(t){return zs.state.networkImages[O3[t]]}},x3={getFeatureValue(t,e){const r=e==null?void 0:e[t];return r===void 0?qr.DEFAULT_FEATURES[t]:r},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Oe.isTelegram()){if(Oe.isIos())return t.filter(e=>e!=="google");if(Oe.isMac())return t.filter(e=>e!=="x");if(Oe.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Ie=Ht({features:qr.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:{solana:"eoa",bip122:"payment",polkadot:"eoa",eip155:"smartAccount"},enableNetworkSwitch:!0}),ie={state:Ie,subscribeKey(t,e){return In(Ie,t,e)},setOptions(t){Object.assign(Ie,t)},setFeatures(t){if(!t)return;Ie.features||(Ie.features=qr.DEFAULT_FEATURES);const e={...Ie.features,...t};Ie.features=e,Ie.features.socials&&(Ie.features.socials=x3.filterSocialsByPlatform(Ie.features.socials))},setProjectId(t){Ie.projectId=t},setCustomRpcUrls(t){Ie.customRpcUrls=t},setAllWallets(t){Ie.allWallets=t},setIncludeWalletIds(t){Ie.includeWalletIds=t},setExcludeWalletIds(t){Ie.excludeWalletIds=t},setFeaturedWalletIds(t){Ie.featuredWalletIds=t},setTokens(t){Ie.tokens=t},setTermsConditionsUrl(t){Ie.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Ie.privacyPolicyUrl=t},setCustomWallets(t){Ie.customWallets=t},setIsSiweEnabled(t){Ie.isSiweEnabled=t},setIsUniversalProvider(t){Ie.isUniversalProvider=t},setSdkVersion(t){Ie.sdkVersion=t},setMetadata(t){Ie.metadata=t},setDisableAppend(t){Ie.disableAppend=t},setEIP6963Enabled(t){Ie.enableEIP6963=t},setDebug(t){Ie.debug=t},setEnableWalletConnect(t){Ie.enableWalletConnect=t},setEnableWalletGuide(t){Ie.enableWalletGuide=t},setEnableAuthLogger(t){Ie.enableAuthLogger=t},setEnableWallets(t){Ie.enableWallets=t},setHasMultipleAddresses(t){Ie.hasMultipleAddresses=t},setSIWX(t){Ie.siwx=t},setConnectMethodsOrder(t){Ie.features={...Ie.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Ie.features={...Ie.features,walletFeaturesOrder:t}},setSocialsOrder(t){Ie.features={...Ie.features,socials:t}},setCollapseWallets(t){Ie.features={...Ie.features,collapseWallets:t}},setEnableEmbedded(t){Ie.enableEmbedded=t},setAllowUnsupportedChain(t){Ie.allowUnsupportedChain=t},setManualWCControl(t){Ie.manualWCControl=t},setEnableNetworkSwitch(t){Ie.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,r])=>{r&&(Ie.defaultAccountTypes[e]=r)})},setUniversalProviderConfigOverride(t){Ie.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Ie.universalProviderConfigOverride},getSnapshot(){return Zc(Ie)}},$o=Ht({message:"",variant:"info",open:!1}),af={state:$o,subscribeKey(t,e){return In($o,t,e)},open(t,e){const{debug:r}=ie.state,{shortMessage:n,longMessage:s}=t;r&&($o.message=n,$o.variant=e,$o.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){$o.open=!1,$o.message="",$o.variant="info"}},P3=Oe.getAnalyticsUrl(),R3=new Fy({baseUrl:P3,clientId:null}),k3=["MODAL_CREATED"],zi=Ht({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),At={state:zi,subscribe(t){return Gr(zi,()=>t(zi))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=ie.state;return{projectId:t,st:e,sv:r||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=we.state.address;if(k3.includes(t.data.event)||typeof window>"u")return;await R3.post({path:"/e",params:At.getSdkProperties(),body:{eventId:Oe.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),zi.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===oe.HTTP_STATUS_CODES.FORBIDDEN&&!zi.reportedErrors.FORBIDDEN&&(af.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${zd()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),zi.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;zi.timestamp=Date.now(),zi.data=t,(e=ie.state.features)!=null&&e.analytics&&At._sendAnalyticsEvent(zi)}},D3=["1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79","fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa","a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393"],U3=Oe.getApiUrl(),ns=new Fy({baseUrl:U3,clientId:null}),B3=40,NA=4,L3=20,at=Ht({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),xe={state:at,subscribeKey(t,e){return In(at,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=ie.state;return{projectId:t,st:e||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ie.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${ns.baseUrl}/getWalletImage/${t}`,r=await ns.getBlob({path:e,params:xe._getSdkProperties()});zs.setWalletImage(t,URL.createObjectURL(r))},async _fetchNetworkImage(t){const e=`${ns.baseUrl}/public/getAssetImage/${t}`,r=await ns.getBlob({path:e,params:xe._getSdkProperties()});zs.setNetworkImage(t,URL.createObjectURL(r))},async _fetchConnectorImage(t){const e=`${ns.baseUrl}/public/getAssetImage/${t}`,r=await ns.getBlob({path:e,params:xe._getSdkProperties()});zs.setConnectorImage(t,URL.createObjectURL(r))},async _fetchCurrencyImage(t){const e=`${ns.baseUrl}/public/getCurrencyImage/${t}`,r=await ns.getBlob({path:e,params:xe._getSdkProperties()});zs.setCurrencyImage(t,URL.createObjectURL(r))},async _fetchTokenImage(t){const e=`${ns.baseUrl}/public/getTokenImage/${t}`,r=await ns.getBlob({path:e,params:xe._getSdkProperties()});zs.setTokenImage(t,URL.createObjectURL(r))},async fetchNetworkImages(){const t=U.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:r})=>r==null?void 0:r.imageId).filter(Boolean).filter(r=>!IT.getNetworkImageById(r));e&&await Promise.allSettled(e.map(r=>xe._fetchNetworkImage(r)))},async fetchConnectorImages(){const{connectors:t}=De.state,e=t.map(({imageId:r})=>r).filter(Boolean);await Promise.allSettled(e.map(r=>xe._fetchConnectorImage(r)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>xe._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>xe._fetchTokenImage(e)))},async fetchWallets(t){var n,s;const e=t.exclude??[];return xe._getSdkProperties().sv.startsWith("html-core-")&&e.push(...D3),await ns.get({path:"/getWallets",params:{...xe._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(n=t.include)==null?void 0:n.join(","),exclude:(s=t.exclude)==null?void 0:s.join(",")}})},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ie.state;if(t!=null&&t.length){const e={...xe._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??NA,include:t},{data:r}=await xe.fetchWallets(e);r.sort((s,i)=>t.indexOf(s.id)-t.indexOf(i.id));const n=r.map(s=>s.image_id).filter(Boolean);await Promise.allSettled(n.map(s=>xe._fetchWalletImage(s))),at.featured=r,at.allFeatured=r}},async fetchRecommendedWallets(){try{at.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:r}=ie.state,n=[...e??[],...r??[]].filter(Boolean),s=U.getRequestedCaipNetworkIds().join(","),i={page:1,entries:NA,include:t,exclude:n,chains:s},{data:o,count:a}=await xe.fetchWallets(i),c=ge.getRecentWallets(),u=o.map(h=>h.image_id).filter(Boolean),l=c.map(h=>h.image_id).filter(Boolean);await Promise.allSettled([...u,...l].map(h=>xe._fetchWalletImage(h))),at.recommended=o,at.allRecommended=o,at.count=a??0}catch{}finally{at.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:r,featuredWalletIds:n}=ie.state,s=U.getRequestedCaipNetworkIds().join(","),i=[...at.recommended.map(({id:l})=>l),...r??[],...n??[]].filter(Boolean),o={page:t,entries:B3,include:e,exclude:i,chains:s},{data:a,count:c}=await xe.fetchWallets(o),u=a.slice(0,L3).map(l=>l.image_id).filter(Boolean);await Promise.allSettled(u.map(l=>xe._fetchWalletImage(l))),at.wallets=Oe.uniqueBy([...at.wallets,...xe._filterOutExtensions(a)],"id"),at.count=c>at.count?c:at.count,at.page=t},async initializeExcludedWallets({ids:t}){const e=U.getRequestedCaipNetworkIds().join(","),r={page:1,entries:t.length,include:t,chains:e},{data:n}=await xe.fetchWallets(r);n&&n.forEach(s=>{at.excludedWallets.push({rdns:s.rdns,name:s.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:r,excludeWalletIds:n}=ie.state,s=U.getRequestedCaipNetworkIds().join(",");at.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:r,exclude:n,chains:s},{data:o}=await xe.fetchWallets(i);At.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>xe._fetchWalletImage(c)),Oe.wait(300)]),at.search=xe._filterOutExtensions(o)},initPromise(t,e){const r=at.promises[t];return r||(at.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:n=!0}={}){const s=[t&&xe.initPromise("connectorImages",xe.fetchConnectorImages),e&&xe.initPromise("featuredWallets",xe.fetchFeaturedWallets),r&&xe.initPromise("recommendedWallets",xe.fetchRecommendedWallets),n&&xe.initPromise("networkImages",xe.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=ie.state.features)!=null&&t.analytics&&xe.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await ns.get({path:"/getAnalyticsConfig",params:xe._getSdkProperties()});ie.setFeatures({analytics:t})}catch{ie.setFeatures({analytics:!1})}},setFilterByNamespace(t){if(!t){at.featured=at.allFeatured,at.recommended=at.allRecommended;return}const e=U.getRequestedCaipNetworkIds().join(",");at.featured=at.allFeatured.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(s=>e.includes(s))}),at.recommended=at.allRecommended.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(s=>e.includes(s))})}},st=Ht({view:"Connect",history:["Connect"],transactionStack:[]}),ut={state:st,subscribeKey(t,e){return In(st,t,e)},pushTransactionStack(t){st.transactionStack.push(t)},popTransactionStack(t){var r,n;const e=st.transactionStack.pop();if(e)if(t)this.goBack(),(r=e==null?void 0:e.onCancel)==null||r.call(e);else{if(e.goBack)this.goBack();else if(e.replace){const i=st.history.indexOf("ConnectingSiwe");i>0?this.goBackToIndex(i-1):(Qt.close(),st.history=[])}else e.view&&this.reset(e.view);(n=e==null?void 0:e.onSuccess)==null||n.call(e)}},push(t,e){t!==st.view&&(st.view=t,st.history.push(t),st.data=e)},reset(t,e){st.view=t,st.history=[t],st.data=e},replace(t,e){st.history.at(-1)===t||(st.view=t,st.history[st.history.length-1]=t,st.data=e)},goBack(){var e;const t=!U.state.activeCaipAddress&&this.state.view==="ConnectingFarcaster";if(st.history.length>1&&!st.history.includes("UnsupportedChain")){st.history.pop();const[r]=st.history.slice(-1);r&&(st.view=r)}else Qt.close();(e=st.data)!=null&&e.wallet&&(st.data.wallet=void 0),setTimeout(()=>{var r,n,s;if(t){we.setFarcasterUrl(void 0,U.state.activeChain);const i=De.getAuthConnector();(r=i==null?void 0:i.provider)==null||r.reload();const o=Zc(ie.state);(s=(n=i==null?void 0:i.provider)==null?void 0:n.syncDappData)==null||s.call(n,{metadata:o.metadata,sdkVersion:o.sdkVersion,projectId:o.projectId,sdkType:o.sdkType})}},100)},goBackToIndex(t){if(st.history.length>1){st.history=st.history.slice(0,t+1);const[e]=st.history.slice(-1);e&&(st.view=e)}}},qi=Ht({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),zr={state:qi,subscribe(t){return Gr(qi,()=>t(qi))},setThemeMode(t){qi.themeMode=t;try{const e=De.getAuthConnector();if(e){const r=zr.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:r,w3mThemeVariables:Eo(r,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){qi.themeVariables={...qi.themeVariables,...t};try{const e=De.getAuthConnector();if(e){const r=zr.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:r,w3mThemeVariables:Eo(qi.themeVariables,qi.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Zc(qi)}},NT={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},ct=Ht({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...NT}}),De={state:ct,subscribe(t){return Gr(ct,()=>{t(ct)})},subscribeKey(t,e){return In(ct,t,e)},initialize(t){t.forEach(e=>{const r=ge.getConnectedConnectorId(e);r&&this.setConnectorId(r,e)})},setActiveConnector(t){t&&(ct.activeConnector=Xc(t))},setConnectors(t){t.filter(r=>!ct.allConnectors.some(n=>n.id===r.id&&this.getConnectorName(n.name)===this.getConnectorName(r.name)&&n.chain===r.chain)).forEach(r=>{r.type!=="MULTI_CHAIN"&&ct.allConnectors.push(Xc(r))}),ct.connectors=this.mergeMultiChainConnectors(ct.allConnectors)},removeAdapter(t){ct.allConnectors=ct.allConnectors.filter(e=>e.chain!==t),ct.connectors=this.mergeMultiChainConnectors(ct.allConnectors)},mergeMultiChainConnectors(t){const e=this.generateConnectorMapByName(t),r=[];return e.forEach(n=>{const s=n[0],i=(s==null?void 0:s.id)===oe.CONNECTOR_ID.AUTH;n.length>1&&s?r.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...n],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&r.push(s)}),r},generateConnectorMapByName(t){const e=new Map;return t.forEach(r=>{const{name:n}=r,s=this.getConnectorName(n);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===r.chain)||i.push(r),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(r=>{e.find(n=>n.chain===r.chain)||e.push(r)}),e},addConnector(t){var e,r,n;if(t.id===oe.CONNECTOR_ID.AUTH){const s=t,i=Zc(ie.state),o=zr.getSnapshot().themeMode,a=zr.getSnapshot().themeVariables;(r=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||r.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(n=s==null?void 0:s.provider)==null||n.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Eo(a,o)}),this.setConnectors([t])}else this.setConnectors([t])},getAuthConnector(t){var n;const e=t||U.state.activeChain,r=ct.connectors.find(s=>s.id===oe.CONNECTOR_ID.AUTH);if(r)return(n=r==null?void 0:r.connectors)!=null&&n.length?r.connectors.find(i=>i.chain===e):r},getAnnouncedConnectorRdns(){return ct.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return ct.allConnectors.find(e=>e.id===t)},getConnector(t,e){return ct.allConnectors.filter(n=>n.chain===U.state.activeChain).find(n=>{var s;return n.explorerId===t||((s=n.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,r=Zc(ie.state),n=zr.getSnapshot().themeMode,s=zr.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:r.metadata,sdkVersion:r.sdkVersion,sdkType:r.sdkType,projectId:r.projectId}),e.provider.syncTheme({themeMode:n,themeVariables:s,w3mThemeVariables:Eo(s,n)})},getConnectorsByNamespace(t){const e=ct.allConnectors.filter(r=>r.chain===t);return this.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=De.getConnector(t.id,t.rdns);U.state.activeChain===oe.CHAIN.SOLANA&&T3.handleSolanaDeeplinkRedirect((e==null?void 0:e.name)||t.name||""),e?ut.push("ConnectingExternal",{connector:e}):ut.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?this.getConnectorsByNamespace(t):this.mergeMultiChainConnectors(ct.allConnectors)},setFilterByNamespace(t){ct.filterByNamespace=t,ct.connectors=this.getConnectors(t),xe.setFilterByNamespace(t)},setConnectorId(t,e){t&&(ct.activeConnectorIds={...ct.activeConnectorIds,[e]:t},ge.setConnectedConnectorId(e,t))},removeConnectorId(t){ct.activeConnectorIds={...ct.activeConnectorIds,[t]:void 0},ge.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return ct.activeConnectorIds[t]},isConnected(t){return t?!!ct.activeConnectorIds[t]:Object.values(ct.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){ct.activeConnectorIds={...NT}}};function Tg(t,e){return De.getConnectorId(t)===e}function $3(t){const e=Array.from(U.state.chains.keys());let r=[];return t?(r.push([t,U.state.chains.get(t)]),Tg(t,oe.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(n=>{n!==t&&Tg(n,oe.CONNECTOR_ID.WALLET_CONNECT)&&r.push([n,U.state.chains.get(n)])}):Tg(t,oe.CONNECTOR_ID.AUTH)&&e.forEach(n=>{n!==t&&Tg(n,oe.CONNECTOR_ID.AUTH)&&r.push([n,U.state.chains.get(n)])})):r=Array.from(U.state.chains.entries()),r}var TT={},jy={};jy.byteLength=j3;jy.toByteArray=z3;jy.fromByteArray=V3;var Si=[],ps=[],M3=typeof Uint8Array<"u"?Uint8Array:Array,qw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Du=0,F3=qw.length;Du<F3;++Du)Si[Du]=qw[Du],ps[qw.charCodeAt(Du)]=Du;ps[45]=62;ps[95]=63;function OT(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function j3(t){var e=OT(t),r=e[0],n=e[1];return(r+n)*3/4-n}function H3(t,e,r){return(e+r)*3/4-r}function z3(t){var e,r=OT(t),n=r[0],s=r[1],i=new M3(H3(t,n,s)),o=0,a=s>0?n-4:n,c;for(c=0;c<a;c+=4)e=ps[t.charCodeAt(c)]<<18|ps[t.charCodeAt(c+1)]<<12|ps[t.charCodeAt(c+2)]<<6|ps[t.charCodeAt(c+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=ps[t.charCodeAt(c)]<<2|ps[t.charCodeAt(c+1)]>>4,i[o++]=e&255),s===1&&(e=ps[t.charCodeAt(c)]<<10|ps[t.charCodeAt(c+1)]<<4|ps[t.charCodeAt(c+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function q3(t){return Si[t>>18&63]+Si[t>>12&63]+Si[t>>6&63]+Si[t&63]}function W3(t,e,r){for(var n,s=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(q3(n));return s.join("")}function V3(t){for(var e,r=t.length,n=r%3,s=[],i=16383,o=0,a=r-n;o<a;o+=i)s.push(W3(t,o,o+i>a?a:o+i));return n===1?(e=t[r-1],s.push(Si[e>>2]+Si[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],s.push(Si[e>>10]+Si[e>>4&63]+Si[e<<2&63]+"=")),s.join("")}var Pv={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Pv.read=function(t,e,r,n,s){var i,o,a=s*8-n-1,c=(1<<a)-1,u=c>>1,l=-7,h=r?s-1:0,d=r?-1:1,f=t[e+h];for(h+=d,i=f&(1<<-l)-1,f>>=-l,l+=a;l>0;i=i*256+t[e+h],h+=d,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=n;l>0;o=o*256+t[e+h],h+=d,l-=8);if(i===0)i=1-u;else{if(i===c)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-u}return(f?-1:1)*o*Math.pow(2,i-n)};Pv.write=function(t,e,r,n,s,i){var o,a,c,u=i*8-s-1,l=(1<<u)-1,h=l>>1,d=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:i-1,p=n?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?e+=d/c:e+=d*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=l?(a=0,o=l):o+h>=1?(a=(e*c-1)*Math.pow(2,s),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,s),o=0));s>=8;t[r+f]=a&255,f+=p,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;t[r+f]=o&255,f+=p,o/=256,u-=8);t[r+f-p]|=g*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=jy,r=Pv,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=N,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;l.TYPED_ARRAY_SUPPORT=c(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const I=new i(1),m={foo:function(){return 42}};return Object.setPrototypeOf(m,i.prototype),Object.setPrototypeOf(I,m),I.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function u(I){if(I>s)throw new RangeError('The value "'+I+'" is invalid for option "size"');const m=new i(I);return Object.setPrototypeOf(m,l.prototype),m}function l(I,m,w){if(typeof I=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(I)}return h(I,m,w)}l.poolSize=8192;function h(I,m,w){if(typeof I=="string")return g(I,m);if(o.isView(I))return b(I);if(I==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I);if(On(I,o)||I&&On(I.buffer,o)||typeof a<"u"&&(On(I,a)||I&&On(I.buffer,a)))return v(I,m,w);if(typeof I=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const D=I.valueOf&&I.valueOf();if(D!=null&&D!==I)return l.from(D,m,w);const F=_(I);if(F)return F;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof I[Symbol.toPrimitive]=="function")return l.from(I[Symbol.toPrimitive]("string"),m,w);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I)}l.from=function(I,m,w){return h(I,m,w)},Object.setPrototypeOf(l.prototype,i.prototype),Object.setPrototypeOf(l,i);function d(I){if(typeof I!="number")throw new TypeError('"size" argument must be of type number');if(I<0)throw new RangeError('The value "'+I+'" is invalid for option "size"')}function f(I,m,w){return d(I),I<=0?u(I):m!==void 0?typeof w=="string"?u(I).fill(m,w):u(I).fill(m):u(I)}l.alloc=function(I,m,w){return f(I,m,w)};function p(I){return d(I),u(I<0?0:S(I)|0)}l.allocUnsafe=function(I){return p(I)},l.allocUnsafeSlow=function(I){return p(I)};function g(I,m){if((typeof m!="string"||m==="")&&(m="utf8"),!l.isEncoding(m))throw new TypeError("Unknown encoding: "+m);const w=A(I,m)|0;let D=u(w);const F=D.write(I,m);return F!==w&&(D=D.slice(0,F)),D}function y(I){const m=I.length<0?0:S(I.length)|0,w=u(m);for(let D=0;D<m;D+=1)w[D]=I[D]&255;return w}function b(I){if(On(I,i)){const m=new i(I);return v(m.buffer,m.byteOffset,m.byteLength)}return y(I)}function v(I,m,w){if(m<0||I.byteLength<m)throw new RangeError('"offset" is outside of buffer bounds');if(I.byteLength<m+(w||0))throw new RangeError('"length" is outside of buffer bounds');let D;return m===void 0&&w===void 0?D=new i(I):w===void 0?D=new i(I,m):D=new i(I,m,w),Object.setPrototypeOf(D,l.prototype),D}function _(I){if(l.isBuffer(I)){const m=S(I.length)|0,w=u(m);return w.length===0||I.copy(w,0,0,m),w}if(I.length!==void 0)return typeof I.length!="number"||ku(I.length)?u(0):y(I);if(I.type==="Buffer"&&Array.isArray(I.data))return y(I.data)}function S(I){if(I>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return I|0}function N(I){return+I!=I&&(I=0),l.alloc(+I)}l.isBuffer=function(m){return m!=null&&m._isBuffer===!0&&m!==l.prototype},l.compare=function(m,w){if(On(m,i)&&(m=l.from(m,m.offset,m.byteLength)),On(w,i)&&(w=l.from(w,w.offset,w.byteLength)),!l.isBuffer(m)||!l.isBuffer(w))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(m===w)return 0;let D=m.length,F=w.length;for(let G=0,Y=Math.min(D,F);G<Y;++G)if(m[G]!==w[G]){D=m[G],F=w[G];break}return D<F?-1:F<D?1:0},l.isEncoding=function(m){switch(String(m).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(m,w){if(!Array.isArray(m))throw new TypeError('"list" argument must be an Array of Buffers');if(m.length===0)return l.alloc(0);let D;if(w===void 0)for(w=0,D=0;D<m.length;++D)w+=m[D].length;const F=l.allocUnsafe(w);let G=0;for(D=0;D<m.length;++D){let Y=m[D];if(On(Y,i))G+Y.length>F.length?(l.isBuffer(Y)||(Y=l.from(Y)),Y.copy(F,G)):i.prototype.set.call(F,Y,G);else if(l.isBuffer(Y))Y.copy(F,G);else throw new TypeError('"list" argument must be an Array of Buffers');G+=Y.length}return F};function A(I,m){if(l.isBuffer(I))return I.length;if(o.isView(I)||On(I,o))return I.byteLength;if(typeof I!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof I);const w=I.length,D=arguments.length>2&&arguments[2]===!0;if(!D&&w===0)return 0;let F=!1;for(;;)switch(m){case"ascii":case"latin1":case"binary":return w;case"utf8":case"utf-8":return Ru(I).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w*2;case"hex":return w>>>1;case"base64":return md(I).length;default:if(F)return D?-1:Ru(I).length;m=(""+m).toLowerCase(),F=!0}}l.byteLength=A;function x(I,m,w){let D=!1;if((m===void 0||m<0)&&(m=0),m>this.length||((w===void 0||w>this.length)&&(w=this.length),w<=0)||(w>>>=0,m>>>=0,w<=m))return"";for(I||(I="utf8");;)switch(I){case"hex":return ne(this,m,w);case"utf8":case"utf-8":return L(this,m,w);case"ascii":return W(this,m,w);case"latin1":case"binary":return re(this,m,w);case"base64":return T(this,m,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,m,w);default:if(D)throw new TypeError("Unknown encoding: "+I);I=(I+"").toLowerCase(),D=!0}}l.prototype._isBuffer=!0;function P(I,m,w){const D=I[m];I[m]=I[w],I[w]=D}l.prototype.swap16=function(){const m=this.length;if(m%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let w=0;w<m;w+=2)P(this,w,w+1);return this},l.prototype.swap32=function(){const m=this.length;if(m%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let w=0;w<m;w+=4)P(this,w,w+3),P(this,w+1,w+2);return this},l.prototype.swap64=function(){const m=this.length;if(m%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let w=0;w<m;w+=8)P(this,w,w+7),P(this,w+1,w+6),P(this,w+2,w+5),P(this,w+3,w+4);return this},l.prototype.toString=function(){const m=this.length;return m===0?"":arguments.length===0?L(this,0,m):x.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(m){if(!l.isBuffer(m))throw new TypeError("Argument must be a Buffer");return this===m?!0:l.compare(this,m)===0},l.prototype.inspect=function(){let m="";const w=t.INSPECT_MAX_BYTES;return m=this.toString("hex",0,w).replace(/(.{2})/g,"$1 ").trim(),this.length>w&&(m+=" ... "),"<Buffer "+m+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(m,w,D,F,G){if(On(m,i)&&(m=l.from(m,m.offset,m.byteLength)),!l.isBuffer(m))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof m);if(w===void 0&&(w=0),D===void 0&&(D=m?m.length:0),F===void 0&&(F=0),G===void 0&&(G=this.length),w<0||D>m.length||F<0||G>this.length)throw new RangeError("out of range index");if(F>=G&&w>=D)return 0;if(F>=G)return-1;if(w>=D)return 1;if(w>>>=0,D>>>=0,F>>>=0,G>>>=0,this===m)return 0;let Y=G-F,ze=D-w;const zt=Math.min(Y,ze),Ut=this.slice(F,G),qt=m.slice(w,D);for(let mt=0;mt<zt;++mt)if(Ut[mt]!==qt[mt]){Y=Ut[mt],ze=qt[mt];break}return Y<ze?-1:ze<Y?1:0};function R(I,m,w,D,F){if(I.length===0)return-1;if(typeof w=="string"?(D=w,w=0):w>2147483647?w=2147483647:w<-2147483648&&(w=-2147483648),w=+w,ku(w)&&(w=F?0:I.length-1),w<0&&(w=I.length+w),w>=I.length){if(F)return-1;w=I.length-1}else if(w<0)if(F)w=0;else return-1;if(typeof m=="string"&&(m=l.from(m,D)),l.isBuffer(m))return m.length===0?-1:B(I,m,w,D,F);if(typeof m=="number")return m=m&255,typeof i.prototype.indexOf=="function"?F?i.prototype.indexOf.call(I,m,w):i.prototype.lastIndexOf.call(I,m,w):B(I,[m],w,D,F);throw new TypeError("val must be string, number or Buffer")}function B(I,m,w,D,F){let G=1,Y=I.length,ze=m.length;if(D!==void 0&&(D=String(D).toLowerCase(),D==="ucs2"||D==="ucs-2"||D==="utf16le"||D==="utf-16le")){if(I.length<2||m.length<2)return-1;G=2,Y/=2,ze/=2,w/=2}function zt(qt,mt){return G===1?qt[mt]:qt.readUInt16BE(mt*G)}let Ut;if(F){let qt=-1;for(Ut=w;Ut<Y;Ut++)if(zt(I,Ut)===zt(m,qt===-1?0:Ut-qt)){if(qt===-1&&(qt=Ut),Ut-qt+1===ze)return qt*G}else qt!==-1&&(Ut-=Ut-qt),qt=-1}else for(w+ze>Y&&(w=Y-ze),Ut=w;Ut>=0;Ut--){let qt=!0;for(let mt=0;mt<ze;mt++)if(zt(I,Ut+mt)!==zt(m,mt)){qt=!1;break}if(qt)return Ut}return-1}l.prototype.includes=function(m,w,D){return this.indexOf(m,w,D)!==-1},l.prototype.indexOf=function(m,w,D){return R(this,m,w,D,!0)},l.prototype.lastIndexOf=function(m,w,D){return R(this,m,w,D,!1)};function $(I,m,w,D){w=Number(w)||0;const F=I.length-w;D?(D=Number(D),D>F&&(D=F)):D=F;const G=m.length;D>G/2&&(D=G/2);let Y;for(Y=0;Y<D;++Y){const ze=parseInt(m.substr(Y*2,2),16);if(ku(ze))return Y;I[w+Y]=ze}return Y}function K(I,m,w,D){return Wa(Ru(m,I.length-w),I,w,D)}function te(I,m,w,D){return Wa(gd(m),I,w,D)}function H(I,m,w,D){return Wa(md(m),I,w,D)}function C(I,m,w,D){return Wa(Sg(m,I.length-w),I,w,D)}l.prototype.write=function(m,w,D,F){if(w===void 0)F="utf8",D=this.length,w=0;else if(D===void 0&&typeof w=="string")F=w,D=this.length,w=0;else if(isFinite(w))w=w>>>0,isFinite(D)?(D=D>>>0,F===void 0&&(F="utf8")):(F=D,D=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const G=this.length-w;if((D===void 0||D>G)&&(D=G),m.length>0&&(D<0||w<0)||w>this.length)throw new RangeError("Attempt to write outside buffer bounds");F||(F="utf8");let Y=!1;for(;;)switch(F){case"hex":return $(this,m,w,D);case"utf8":case"utf-8":return K(this,m,w,D);case"ascii":case"latin1":case"binary":return te(this,m,w,D);case"base64":return H(this,m,w,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,m,w,D);default:if(Y)throw new TypeError("Unknown encoding: "+F);F=(""+F).toLowerCase(),Y=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(I,m,w){return m===0&&w===I.length?e.fromByteArray(I):e.fromByteArray(I.slice(m,w))}function L(I,m,w){w=Math.min(I.length,w);const D=[];let F=m;for(;F<w;){const G=I[F];let Y=null,ze=G>239?4:G>223?3:G>191?2:1;if(F+ze<=w){let zt,Ut,qt,mt;switch(ze){case 1:G<128&&(Y=G);break;case 2:zt=I[F+1],(zt&192)===128&&(mt=(G&31)<<6|zt&63,mt>127&&(Y=mt));break;case 3:zt=I[F+1],Ut=I[F+2],(zt&192)===128&&(Ut&192)===128&&(mt=(G&15)<<12|(zt&63)<<6|Ut&63,mt>2047&&(mt<55296||mt>57343)&&(Y=mt));break;case 4:zt=I[F+1],Ut=I[F+2],qt=I[F+3],(zt&192)===128&&(Ut&192)===128&&(qt&192)===128&&(mt=(G&15)<<18|(zt&63)<<12|(Ut&63)<<6|qt&63,mt>65535&&mt<1114112&&(Y=mt))}}Y===null?(Y=65533,ze=1):Y>65535&&(Y-=65536,D.push(Y>>>10&1023|55296),Y=56320|Y&1023),D.push(Y),F+=ze}return j(D)}const z=4096;function j(I){const m=I.length;if(m<=z)return String.fromCharCode.apply(String,I);let w="",D=0;for(;D<m;)w+=String.fromCharCode.apply(String,I.slice(D,D+=z));return w}function W(I,m,w){let D="";w=Math.min(I.length,w);for(let F=m;F<w;++F)D+=String.fromCharCode(I[F]&127);return D}function re(I,m,w){let D="";w=Math.min(I.length,w);for(let F=m;F<w;++F)D+=String.fromCharCode(I[F]);return D}function ne(I,m,w){const D=I.length;(!m||m<0)&&(m=0),(!w||w<0||w>D)&&(w=D);let F="";for(let G=m;G<w;++G)F+=Uw[I[G]];return F}function le(I,m,w){const D=I.slice(m,w);let F="";for(let G=0;G<D.length-1;G+=2)F+=String.fromCharCode(D[G]+D[G+1]*256);return F}l.prototype.slice=function(m,w){const D=this.length;m=~~m,w=w===void 0?D:~~w,m<0?(m+=D,m<0&&(m=0)):m>D&&(m=D),w<0?(w+=D,w<0&&(w=0)):w>D&&(w=D),w<m&&(w=m);const F=this.subarray(m,w);return Object.setPrototypeOf(F,l.prototype),F};function Z(I,m,w){if(I%1!==0||I<0)throw new RangeError("offset is not uint");if(I+m>w)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(m,w,D){m=m>>>0,w=w>>>0,D||Z(m,w,this.length);let F=this[m],G=1,Y=0;for(;++Y<w&&(G*=256);)F+=this[m+Y]*G;return F},l.prototype.readUintBE=l.prototype.readUIntBE=function(m,w,D){m=m>>>0,w=w>>>0,D||Z(m,w,this.length);let F=this[m+--w],G=1;for(;w>0&&(G*=256);)F+=this[m+--w]*G;return F},l.prototype.readUint8=l.prototype.readUInt8=function(m,w){return m=m>>>0,w||Z(m,1,this.length),this[m]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(m,w){return m=m>>>0,w||Z(m,2,this.length),this[m]|this[m+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(m,w){return m=m>>>0,w||Z(m,2,this.length),this[m]<<8|this[m+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(m,w){return m=m>>>0,w||Z(m,4,this.length),(this[m]|this[m+1]<<8|this[m+2]<<16)+this[m+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(m,w){return m=m>>>0,w||Z(m,4,this.length),this[m]*16777216+(this[m+1]<<16|this[m+2]<<8|this[m+3])},l.prototype.readBigUInt64LE=ii(function(m){m=m>>>0,Ts(m,"offset");const w=this[m],D=this[m+7];(w===void 0||D===void 0)&&qa(m,this.length-8);const F=w+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24,G=this[++m]+this[++m]*2**8+this[++m]*2**16+D*2**24;return BigInt(F)+(BigInt(G)<<BigInt(32))}),l.prototype.readBigUInt64BE=ii(function(m){m=m>>>0,Ts(m,"offset");const w=this[m],D=this[m+7];(w===void 0||D===void 0)&&qa(m,this.length-8);const F=w*2**24+this[++m]*2**16+this[++m]*2**8+this[++m],G=this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+D;return(BigInt(F)<<BigInt(32))+BigInt(G)}),l.prototype.readIntLE=function(m,w,D){m=m>>>0,w=w>>>0,D||Z(m,w,this.length);let F=this[m],G=1,Y=0;for(;++Y<w&&(G*=256);)F+=this[m+Y]*G;return G*=128,F>=G&&(F-=Math.pow(2,8*w)),F},l.prototype.readIntBE=function(m,w,D){m=m>>>0,w=w>>>0,D||Z(m,w,this.length);let F=w,G=1,Y=this[m+--F];for(;F>0&&(G*=256);)Y+=this[m+--F]*G;return G*=128,Y>=G&&(Y-=Math.pow(2,8*w)),Y},l.prototype.readInt8=function(m,w){return m=m>>>0,w||Z(m,1,this.length),this[m]&128?(255-this[m]+1)*-1:this[m]},l.prototype.readInt16LE=function(m,w){m=m>>>0,w||Z(m,2,this.length);const D=this[m]|this[m+1]<<8;return D&32768?D|4294901760:D},l.prototype.readInt16BE=function(m,w){m=m>>>0,w||Z(m,2,this.length);const D=this[m+1]|this[m]<<8;return D&32768?D|4294901760:D},l.prototype.readInt32LE=function(m,w){return m=m>>>0,w||Z(m,4,this.length),this[m]|this[m+1]<<8|this[m+2]<<16|this[m+3]<<24},l.prototype.readInt32BE=function(m,w){return m=m>>>0,w||Z(m,4,this.length),this[m]<<24|this[m+1]<<16|this[m+2]<<8|this[m+3]},l.prototype.readBigInt64LE=ii(function(m){m=m>>>0,Ts(m,"offset");const w=this[m],D=this[m+7];(w===void 0||D===void 0)&&qa(m,this.length-8);const F=this[m+4]+this[m+5]*2**8+this[m+6]*2**16+(D<<24);return(BigInt(F)<<BigInt(32))+BigInt(w+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24)}),l.prototype.readBigInt64BE=ii(function(m){m=m>>>0,Ts(m,"offset");const w=this[m],D=this[m+7];(w===void 0||D===void 0)&&qa(m,this.length-8);const F=(w<<24)+this[++m]*2**16+this[++m]*2**8+this[++m];return(BigInt(F)<<BigInt(32))+BigInt(this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+D)}),l.prototype.readFloatLE=function(m,w){return m=m>>>0,w||Z(m,4,this.length),r.read(this,m,!0,23,4)},l.prototype.readFloatBE=function(m,w){return m=m>>>0,w||Z(m,4,this.length),r.read(this,m,!1,23,4)},l.prototype.readDoubleLE=function(m,w){return m=m>>>0,w||Z(m,8,this.length),r.read(this,m,!0,52,8)},l.prototype.readDoubleBE=function(m,w){return m=m>>>0,w||Z(m,8,this.length),r.read(this,m,!1,52,8)};function he(I,m,w,D,F,G){if(!l.isBuffer(I))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>F||m<G)throw new RangeError('"value" argument is out of bounds');if(w+D>I.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(m,w,D,F){if(m=+m,w=w>>>0,D=D>>>0,!F){const ze=Math.pow(2,8*D)-1;he(this,m,w,D,ze,0)}let G=1,Y=0;for(this[w]=m&255;++Y<D&&(G*=256);)this[w+Y]=m/G&255;return w+D},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(m,w,D,F){if(m=+m,w=w>>>0,D=D>>>0,!F){const ze=Math.pow(2,8*D)-1;he(this,m,w,D,ze,0)}let G=D-1,Y=1;for(this[w+G]=m&255;--G>=0&&(Y*=256);)this[w+G]=m/Y&255;return w+D},l.prototype.writeUint8=l.prototype.writeUInt8=function(m,w,D){return m=+m,w=w>>>0,D||he(this,m,w,1,255,0),this[w]=m&255,w+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(m,w,D){return m=+m,w=w>>>0,D||he(this,m,w,2,65535,0),this[w]=m&255,this[w+1]=m>>>8,w+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(m,w,D){return m=+m,w=w>>>0,D||he(this,m,w,2,65535,0),this[w]=m>>>8,this[w+1]=m&255,w+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(m,w,D){return m=+m,w=w>>>0,D||he(this,m,w,4,4294967295,0),this[w+3]=m>>>24,this[w+2]=m>>>16,this[w+1]=m>>>8,this[w]=m&255,w+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(m,w,D){return m=+m,w=w>>>0,D||he(this,m,w,4,4294967295,0),this[w]=m>>>24,this[w+1]=m>>>16,this[w+2]=m>>>8,this[w+3]=m&255,w+4};function Se(I,m,w,D,F){rs(m,D,F,I,w,7);let G=Number(m&BigInt(4294967295));I[w++]=G,G=G>>8,I[w++]=G,G=G>>8,I[w++]=G,G=G>>8,I[w++]=G;let Y=Number(m>>BigInt(32)&BigInt(4294967295));return I[w++]=Y,Y=Y>>8,I[w++]=Y,Y=Y>>8,I[w++]=Y,Y=Y>>8,I[w++]=Y,w}function je(I,m,w,D,F){rs(m,D,F,I,w,7);let G=Number(m&BigInt(4294967295));I[w+7]=G,G=G>>8,I[w+6]=G,G=G>>8,I[w+5]=G,G=G>>8,I[w+4]=G;let Y=Number(m>>BigInt(32)&BigInt(4294967295));return I[w+3]=Y,Y=Y>>8,I[w+2]=Y,Y=Y>>8,I[w+1]=Y,Y=Y>>8,I[w]=Y,w+8}l.prototype.writeBigUInt64LE=ii(function(m,w=0){return Se(this,m,w,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=ii(function(m,w=0){return je(this,m,w,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(m,w,D,F){if(m=+m,w=w>>>0,!F){const zt=Math.pow(2,8*D-1);he(this,m,w,D,zt-1,-zt)}let G=0,Y=1,ze=0;for(this[w]=m&255;++G<D&&(Y*=256);)m<0&&ze===0&&this[w+G-1]!==0&&(ze=1),this[w+G]=(m/Y>>0)-ze&255;return w+D},l.prototype.writeIntBE=function(m,w,D,F){if(m=+m,w=w>>>0,!F){const zt=Math.pow(2,8*D-1);he(this,m,w,D,zt-1,-zt)}let G=D-1,Y=1,ze=0;for(this[w+G]=m&255;--G>=0&&(Y*=256);)m<0&&ze===0&&this[w+G+1]!==0&&(ze=1),this[w+G]=(m/Y>>0)-ze&255;return w+D},l.prototype.writeInt8=function(m,w,D){return m=+m,w=w>>>0,D||he(this,m,w,1,127,-128),m<0&&(m=255+m+1),this[w]=m&255,w+1},l.prototype.writeInt16LE=function(m,w,D){return m=+m,w=w>>>0,D||he(this,m,w,2,32767,-32768),this[w]=m&255,this[w+1]=m>>>8,w+2},l.prototype.writeInt16BE=function(m,w,D){return m=+m,w=w>>>0,D||he(this,m,w,2,32767,-32768),this[w]=m>>>8,this[w+1]=m&255,w+2},l.prototype.writeInt32LE=function(m,w,D){return m=+m,w=w>>>0,D||he(this,m,w,4,2147483647,-2147483648),this[w]=m&255,this[w+1]=m>>>8,this[w+2]=m>>>16,this[w+3]=m>>>24,w+4},l.prototype.writeInt32BE=function(m,w,D){return m=+m,w=w>>>0,D||he(this,m,w,4,2147483647,-2147483648),m<0&&(m=4294967295+m+1),this[w]=m>>>24,this[w+1]=m>>>16,this[w+2]=m>>>8,this[w+3]=m&255,w+4},l.prototype.writeBigInt64LE=ii(function(m,w=0){return Se(this,m,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=ii(function(m,w=0){return je(this,m,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function qe(I,m,w,D,F,G){if(w+D>I.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("Index out of range")}function Re(I,m,w,D,F){return m=+m,w=w>>>0,F||qe(I,m,w,4),r.write(I,m,w,D,23,4),w+4}l.prototype.writeFloatLE=function(m,w,D){return Re(this,m,w,!0,D)},l.prototype.writeFloatBE=function(m,w,D){return Re(this,m,w,!1,D)};function St(I,m,w,D,F){return m=+m,w=w>>>0,F||qe(I,m,w,8),r.write(I,m,w,D,52,8),w+8}l.prototype.writeDoubleLE=function(m,w,D){return St(this,m,w,!0,D)},l.prototype.writeDoubleBE=function(m,w,D){return St(this,m,w,!1,D)},l.prototype.copy=function(m,w,D,F){if(!l.isBuffer(m))throw new TypeError("argument should be a Buffer");if(D||(D=0),!F&&F!==0&&(F=this.length),w>=m.length&&(w=m.length),w||(w=0),F>0&&F<D&&(F=D),F===D||m.length===0||this.length===0)return 0;if(w<0)throw new RangeError("targetStart out of bounds");if(D<0||D>=this.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("sourceEnd out of bounds");F>this.length&&(F=this.length),m.length-w<F-D&&(F=m.length-w+D);const G=F-D;return this===m&&typeof i.prototype.copyWithin=="function"?this.copyWithin(w,D,F):i.prototype.set.call(m,this.subarray(D,F),w),G},l.prototype.fill=function(m,w,D,F){if(typeof m=="string"){if(typeof w=="string"?(F=w,w=0,D=this.length):typeof D=="string"&&(F=D,D=this.length),F!==void 0&&typeof F!="string")throw new TypeError("encoding must be a string");if(typeof F=="string"&&!l.isEncoding(F))throw new TypeError("Unknown encoding: "+F);if(m.length===1){const Y=m.charCodeAt(0);(F==="utf8"&&Y<128||F==="latin1")&&(m=Y)}}else typeof m=="number"?m=m&255:typeof m=="boolean"&&(m=Number(m));if(w<0||this.length<w||this.length<D)throw new RangeError("Out of range index");if(D<=w)return this;w=w>>>0,D=D===void 0?this.length:D>>>0,m||(m=0);let G;if(typeof m=="number")for(G=w;G<D;++G)this[G]=m;else{const Y=l.isBuffer(m)?m:l.from(m,F),ze=Y.length;if(ze===0)throw new TypeError('The value "'+m+'" is invalid for argument "value"');for(G=0;G<D-w;++G)this[G+w]=Y[G%ze]}return this};const pt={};function It(I,m,w){pt[I]=class extends w{constructor(){super(),Object.defineProperty(this,"message",{value:m.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${I}]`,this.stack,delete this.name}get code(){return I}set code(F){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:F,writable:!0})}toString(){return`${this.name} [${I}]: ${this.message}`}}}It("ERR_BUFFER_OUT_OF_BOUNDS",function(I){return I?`${I} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),It("ERR_INVALID_ARG_TYPE",function(I,m){return`The "${I}" argument must be of type number. Received type ${typeof m}`},TypeError),It("ERR_OUT_OF_RANGE",function(I,m,w){let D=`The value of "${I}" is out of range.`,F=w;return Number.isInteger(w)&&Math.abs(w)>2**32?F=gt(String(w)):typeof w=="bigint"&&(F=String(w),(w>BigInt(2)**BigInt(32)||w<-(BigInt(2)**BigInt(32)))&&(F=gt(F)),F+="n"),D+=` It must be ${m}. Received ${F}`,D},RangeError);function gt(I){let m="",w=I.length;const D=I[0]==="-"?1:0;for(;w>=D+4;w-=3)m=`_${I.slice(w-3,w)}${m}`;return`${I.slice(0,w)}${m}`}function Gt(I,m,w){Ts(m,"offset"),(I[m]===void 0||I[m+w]===void 0)&&qa(m,I.length-(w+1))}function rs(I,m,w,D,F,G){if(I>w||I<m){const Y=typeof m=="bigint"?"n":"";let ze;throw m===0||m===BigInt(0)?ze=`>= 0${Y} and < 2${Y} ** ${(G+1)*8}${Y}`:ze=`>= -(2${Y} ** ${(G+1)*8-1}${Y}) and < 2 ** ${(G+1)*8-1}${Y}`,new pt.ERR_OUT_OF_RANGE("value",ze,I)}Gt(D,F,G)}function Ts(I,m){if(typeof I!="number")throw new pt.ERR_INVALID_ARG_TYPE(m,"number",I)}function qa(I,m,w){throw Math.floor(I)!==I?(Ts(I,w),new pt.ERR_OUT_OF_RANGE("offset","an integer",I)):m<0?new pt.ERR_BUFFER_OUT_OF_BOUNDS:new pt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${m}`,I)}const Dw=/[^+/0-9A-Za-z-_]/g;function Cg(I){if(I=I.split("=")[0],I=I.trim().replace(Dw,""),I.length<2)return"";for(;I.length%4!==0;)I=I+"=";return I}function Ru(I,m){m=m||1/0;let w;const D=I.length;let F=null;const G=[];for(let Y=0;Y<D;++Y){if(w=I.charCodeAt(Y),w>55295&&w<57344){if(!F){if(w>56319){(m-=3)>-1&&G.push(239,191,189);continue}else if(Y+1===D){(m-=3)>-1&&G.push(239,191,189);continue}F=w;continue}if(w<56320){(m-=3)>-1&&G.push(239,191,189),F=w;continue}w=(F-55296<<10|w-56320)+65536}else F&&(m-=3)>-1&&G.push(239,191,189);if(F=null,w<128){if((m-=1)<0)break;G.push(w)}else if(w<2048){if((m-=2)<0)break;G.push(w>>6|192,w&63|128)}else if(w<65536){if((m-=3)<0)break;G.push(w>>12|224,w>>6&63|128,w&63|128)}else if(w<1114112){if((m-=4)<0)break;G.push(w>>18|240,w>>12&63|128,w>>6&63|128,w&63|128)}else throw new Error("Invalid code point")}return G}function gd(I){const m=[];for(let w=0;w<I.length;++w)m.push(I.charCodeAt(w)&255);return m}function Sg(I,m){let w,D,F;const G=[];for(let Y=0;Y<I.length&&!((m-=2)<0);++Y)w=I.charCodeAt(Y),D=w>>8,F=w%256,G.push(F),G.push(D);return G}function md(I){return e.toByteArray(Cg(I))}function Wa(I,m,w,D){let F;for(F=0;F<D&&!(F+w>=m.length||F>=I.length);++F)m[F+w]=I[F];return F}function On(I,m){return I instanceof m||I!=null&&I.constructor!=null&&I.constructor.name!=null&&I.constructor.name===m.name}function ku(I){return I!==I}const Uw=function(){const I="0123456789abcdef",m=new Array(256);for(let w=0;w<16;++w){const D=w*16;for(let F=0;F<16;++F)m[D+F]=I[w]+I[F]}return m}();function ii(I){return typeof BigInt>"u"?Bw:I}function Bw(){throw new Error("BigInt not supported")}})(TT);const vr=TT.Buffer;var Og={exports:{}},TA;function G3(){if(TA)return Og.exports;TA=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(N,A,x){return Function.prototype.apply.call(N,A,x)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:r=function(N){return Object.getOwnPropertyNames(N)};function n(S){console&&console.warn&&console.warn(S)}var s=Number.isNaN||function(N){return N!==N};function i(){i.init.call(this)}Og.exports=i,Og.exports.once=b,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(S){if(typeof S!="number"||S<0||s(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");o=S}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(N){if(typeof N!="number"||N<0||s(N))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+N+".");return this._maxListeners=N,this};function c(S){return S._maxListeners===void 0?i.defaultMaxListeners:S._maxListeners}i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(N){for(var A=[],x=1;x<arguments.length;x++)A.push(arguments[x]);var P=N==="error",R=this._events;if(R!==void 0)P=P&&R.error===void 0;else if(!P)return!1;if(P){var B;if(A.length>0&&(B=A[0]),B instanceof Error)throw B;var $=new Error("Unhandled error."+(B?" ("+B.message+")":""));throw $.context=B,$}var K=R[N];if(K===void 0)return!1;if(typeof K=="function")e(K,this,A);else for(var te=K.length,H=p(K,te),x=0;x<te;++x)e(H[x],this,A);return!0};function u(S,N,A,x){var P,R,B;if(a(A),R=S._events,R===void 0?(R=S._events=Object.create(null),S._eventsCount=0):(R.newListener!==void 0&&(S.emit("newListener",N,A.listener?A.listener:A),R=S._events),B=R[N]),B===void 0)B=R[N]=A,++S._eventsCount;else if(typeof B=="function"?B=R[N]=x?[A,B]:[B,A]:x?B.unshift(A):B.push(A),P=c(S),P>0&&B.length>P&&!B.warned){B.warned=!0;var $=new Error("Possible EventEmitter memory leak detected. "+B.length+" "+String(N)+" listeners added. Use emitter.setMaxListeners() to increase limit");$.name="MaxListenersExceededWarning",$.emitter=S,$.type=N,$.count=B.length,n($)}return S}i.prototype.addListener=function(N,A){return u(this,N,A,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(N,A){return u(this,N,A,!0)};function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(S,N,A){var x={fired:!1,wrapFn:void 0,target:S,type:N,listener:A},P=l.bind(x);return P.listener=A,x.wrapFn=P,P}i.prototype.once=function(N,A){return a(A),this.on(N,h(this,N,A)),this},i.prototype.prependOnceListener=function(N,A){return a(A),this.prependListener(N,h(this,N,A)),this},i.prototype.removeListener=function(N,A){var x,P,R,B,$;if(a(A),P=this._events,P===void 0)return this;if(x=P[N],x===void 0)return this;if(x===A||x.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete P[N],P.removeListener&&this.emit("removeListener",N,x.listener||A));else if(typeof x!="function"){for(R=-1,B=x.length-1;B>=0;B--)if(x[B]===A||x[B].listener===A){$=x[B].listener,R=B;break}if(R<0)return this;R===0?x.shift():g(x,R),x.length===1&&(P[N]=x[0]),P.removeListener!==void 0&&this.emit("removeListener",N,$||A)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(N){var A,x,P;if(x=this._events,x===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[N]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete x[N]),this;if(arguments.length===0){var R=Object.keys(x),B;for(P=0;P<R.length;++P)B=R[P],B!=="removeListener"&&this.removeAllListeners(B);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=x[N],typeof A=="function")this.removeListener(N,A);else if(A!==void 0)for(P=A.length-1;P>=0;P--)this.removeListener(N,A[P]);return this};function d(S,N,A){var x=S._events;if(x===void 0)return[];var P=x[N];return P===void 0?[]:typeof P=="function"?A?[P.listener||P]:[P]:A?y(P):p(P,P.length)}i.prototype.listeners=function(N){return d(this,N,!0)},i.prototype.rawListeners=function(N){return d(this,N,!1)},i.listenerCount=function(S,N){return typeof S.listenerCount=="function"?S.listenerCount(N):f.call(S,N)},i.prototype.listenerCount=f;function f(S){var N=this._events;if(N!==void 0){var A=N[S];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function p(S,N){for(var A=new Array(N),x=0;x<N;++x)A[x]=S[x];return A}function g(S,N){for(;N+1<S.length;N++)S[N]=S[N+1];S.pop()}function y(S){for(var N=new Array(S.length),A=0;A<N.length;++A)N[A]=S[A].listener||S[A];return N}function b(S,N){return new Promise(function(A,x){function P(B){S.removeListener(N,R),x(B)}function R(){typeof S.removeListener=="function"&&S.removeListener("error",P),A([].slice.call(arguments))}_(S,N,R,{once:!0}),N!=="error"&&v(S,P,{once:!0})})}function v(S,N,A){typeof S.on=="function"&&_(S,"error",N,A)}function _(S,N,A,x){if(typeof S.on=="function")x.once?S.once(N,A):S.on(N,A);else if(typeof S.addEventListener=="function")S.addEventListener(N,function P(R){x.once&&S.removeEventListener(N,P),A(R)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}return Og.exports}var Cs=G3();const Rv=By(Cs);var Ww={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ob=function(t,e){return Ob=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},Ob(t,e)};function K3(t,e){Ob(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var xb=function(){return xb=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},xb.apply(this,arguments)};function J3(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function Y3(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,r,i):o(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function Q3(t,e){return function(r,n){e(r,n,t)}}function Z3(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function X3(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(h){o(h)}}function c(l){try{u(n.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function eU(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function tU(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function rU(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Pb(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xT(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function nU(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(xT(arguments[e]));return t}function sU(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function Cf(t){return this instanceof Cf?(this.v=t,this):new Cf(t)}function iU(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(d){n[d]&&(s[d]=function(f){return new Promise(function(p,g){i.push([d,f,p,g])>1||a(d,f)})})}function a(d,f){try{c(n[d](f))}catch(p){h(i[0][3],p)}}function c(d){d.value instanceof Cf?Promise.resolve(d.value.v).then(u,l):h(i[0][2],d)}function u(d){a("next",d)}function l(d){a("throw",d)}function h(d,f){d(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function oU(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(o){return(r=!r)?{value:Cf(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function aU(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Pb=="function"?Pb(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function cU(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function uU(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function lU(t){return t&&t.__esModule?t:{default:t}}function hU(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function dU(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const fU=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return xb},__asyncDelegator:oU,__asyncGenerator:iU,__asyncValues:aU,__await:Cf,__awaiter:X3,__classPrivateFieldGet:hU,__classPrivateFieldSet:dU,__createBinding:tU,__decorate:Y3,__exportStar:rU,__extends:K3,__generator:eU,__importDefault:lU,__importStar:uU,__makeTemplateObject:cU,__metadata:Z3,__param:Q3,__read:xT,__rest:J3,__spread:nU,__spreadArrays:sU,__values:Pb},Symbol.toStringTag,{value:"Module"})),Hy=tT(fU);var Vw={},Ad={},OA;function pU(){if(OA)return Ad;OA=1,Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Ad.delay=t,Ad}var Va={},Gw={},Ga={},xA;function gU(){return xA||(xA=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.ONE_THOUSAND=Ga.ONE_HUNDRED=void 0,Ga.ONE_HUNDRED=100,Ga.ONE_THOUSAND=1e3),Ga}var Kw={},PA;function mU(){return PA||(PA=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Kw)),Kw}var RA;function PT(){return RA||(RA=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Hy;e.__exportStar(gU(),t),e.__exportStar(mU(),t)}(Gw)),Gw}var kA;function yU(){if(kA)return Va;kA=1,Object.defineProperty(Va,"__esModule",{value:!0}),Va.fromMiliseconds=Va.toMiliseconds=void 0;const t=PT();function e(n){return n*t.ONE_THOUSAND}Va.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return Va.fromMiliseconds=r,Va}var DA;function wU(){return DA||(DA=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Hy;e.__exportStar(pU(),t),e.__exportStar(yU(),t)}(Vw)),Vw}var Uu={},UA;function bU(){if(UA)return Uu;UA=1,Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const s=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:s})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Uu.Watch=t,Uu.default=t,Uu}var Jw={},Cd={},BA;function EU(){if(BA)return Cd;BA=1,Object.defineProperty(Cd,"__esModule",{value:!0}),Cd.IWatch=void 0;class t{}return Cd.IWatch=t,Cd}var LA;function vU(){return LA||(LA=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Hy.__exportStar(EU(),t)}(Jw)),Jw}var $A;function _U(){return $A||($A=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Hy;e.__exportStar(wU(),t),e.__exportStar(bU(),t),e.__exportStar(vU(),t),e.__exportStar(PT(),t)}(Ww)),Ww}var ae=_U();class Cu{}let AU=class extends Cu{constructor(e){super()}};const MA=ae.FIVE_SECONDS,Zh={pulse:"heartbeat_pulse"};let CU=class RT extends AU{constructor(e){super(e),this.events=new Cs.EventEmitter,this.interval=MA,this.interval=(e==null?void 0:e.interval)||MA}static async init(e){const r=new RT(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),ae.toMiliseconds(this.interval))}pulse(){this.events.emit(Zh.pulse)}};const SU=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,IU=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,NU=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function TU(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){OU(t);return}return e}function OU(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function xg(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const r=t.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!NU.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(SU.test(t)||IU.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,TU)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function xU(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function dr(t,...e){try{return xU(t(...e))}catch(r){return Promise.reject(r)}}function PU(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function RU(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function pm(t){if(PU(t))return String(t);if(RU(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return pm(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Rb="base64:";function kU(t){return typeof t=="string"?t:Rb+BU(t)}function DU(t){return typeof t!="string"||!t.startsWith(Rb)?t:UU(t.slice(Rb.length))}function UU(t){return globalThis.Buffer?vr.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function BU(t){return globalThis.Buffer?vr.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function mn(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function LU(...t){return mn(t.join(":"))}function Pg(t){return t=mn(t),t?t+":":""}function $U(t,e){if(e===void 0)return!0;let r=0,n=t.indexOf(":");for(;n>-1;)r++,n=t.indexOf(":",n+1);return r<=e}function MU(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const FU="memory",jU=()=>{const t=new Map;return{name:FU,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function HU(t={}){const e={mounts:{"":t.driver||jU()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=u=>{for(const l of e.mountpoints)if(u.startsWith(l))return{base:l,relativeKey:u.slice(l.length),driver:e.mounts[l]};return{base:"",relativeKey:u,driver:e.mounts[""]}},n=(u,l)=>e.mountpoints.filter(h=>h.startsWith(u)||l&&u.startsWith(h)).map(h=>({relativeBase:u.length>h.length?u.slice(h.length):void 0,mountpoint:h,driver:e.mounts[h]})),s=(u,l)=>{if(e.watching){l=mn(l);for(const h of e.watchListeners)h(u,l)}},i=async()=>{if(!e.watching){e.watching=!0;for(const u in e.mounts)e.unwatch[u]=await FA(e.mounts[u],s,u)}},o=async()=>{if(e.watching){for(const u in e.unwatch)await e.unwatch[u]();e.unwatch={},e.watching=!1}},a=(u,l,h)=>{const d=new Map,f=p=>{let g=d.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},d.set(p.base,g)),g};for(const p of u){const g=typeof p=="string",y=mn(g?p:p.key),b=g?void 0:p.value,v=g||!p.options?l:{...l,...p.options},_=r(y);f(_).items.push({key:y,value:b,relativeKey:_.relativeKey,options:v})}return Promise.all([...d.values()].map(p=>h(p))).then(p=>p.flat())},c={hasItem(u,l={}){u=mn(u);const{relativeKey:h,driver:d}=r(u);return dr(d.hasItem,h,l)},getItem(u,l={}){u=mn(u);const{relativeKey:h,driver:d}=r(u);return dr(d.getItem,h,l).then(f=>xg(f))},getItems(u,l={}){return a(u,l,h=>h.driver.getItems?dr(h.driver.getItems,h.items.map(d=>({key:d.relativeKey,options:d.options})),l).then(d=>d.map(f=>({key:LU(h.base,f.key),value:xg(f.value)}))):Promise.all(h.items.map(d=>dr(h.driver.getItem,d.relativeKey,d.options).then(f=>({key:d.key,value:xg(f)})))))},getItemRaw(u,l={}){u=mn(u);const{relativeKey:h,driver:d}=r(u);return d.getItemRaw?dr(d.getItemRaw,h,l):dr(d.getItem,h,l).then(f=>DU(f))},async setItem(u,l,h={}){if(l===void 0)return c.removeItem(u);u=mn(u);const{relativeKey:d,driver:f}=r(u);f.setItem&&(await dr(f.setItem,d,pm(l),h),f.watch||s("update",u))},async setItems(u,l){await a(u,l,async h=>{if(h.driver.setItems)return dr(h.driver.setItems,h.items.map(d=>({key:d.relativeKey,value:pm(d.value),options:d.options})),l);h.driver.setItem&&await Promise.all(h.items.map(d=>dr(h.driver.setItem,d.relativeKey,pm(d.value),d.options)))})},async setItemRaw(u,l,h={}){if(l===void 0)return c.removeItem(u,h);u=mn(u);const{relativeKey:d,driver:f}=r(u);if(f.setItemRaw)await dr(f.setItemRaw,d,l,h);else if(f.setItem)await dr(f.setItem,d,kU(l),h);else return;f.watch||s("update",u)},async removeItem(u,l={}){typeof l=="boolean"&&(l={removeMeta:l}),u=mn(u);const{relativeKey:h,driver:d}=r(u);d.removeItem&&(await dr(d.removeItem,h,l),(l.removeMeta||l.removeMata)&&await dr(d.removeItem,h+"$",l),d.watch||s("remove",u))},async getMeta(u,l={}){typeof l=="boolean"&&(l={nativeOnly:l}),u=mn(u);const{relativeKey:h,driver:d}=r(u),f=Object.create(null);if(d.getMeta&&Object.assign(f,await dr(d.getMeta,h,l)),!l.nativeOnly){const p=await dr(d.getItem,h+"$",l).then(g=>xg(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(u,l,h={}){return this.setItem(u+"$",l,h)},removeMeta(u,l={}){return this.removeItem(u+"$",l)},async getKeys(u,l={}){var y;u=Pg(u);const h=n(u,!0);let d=[];const f=[];let p=!0;for(const b of h){(y=b.driver.flags)!=null&&y.maxDepth||(p=!1);const v=await dr(b.driver.getKeys,b.relativeBase,l);for(const _ of v){const S=b.mountpoint+mn(_);d.some(N=>S.startsWith(N))||f.push(S)}d=[b.mountpoint,...d.filter(_=>!_.startsWith(b.mountpoint))]}const g=l.maxDepth!==void 0&&!p;return f.filter(b=>(!g||$U(b,l.maxDepth))&&MU(b,u))},async clear(u,l={}){u=Pg(u),await Promise.all(n(u,!1).map(async h=>{if(h.driver.clear)return dr(h.driver.clear,h.relativeBase,l);if(h.driver.removeItem){const d=await h.driver.getKeys(h.relativeBase||"",l);return Promise.all(d.map(f=>h.driver.removeItem(f,l)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(u=>jA(u)))},async watch(u){return await i(),e.watchListeners.push(u),async()=>{e.watchListeners=e.watchListeners.filter(l=>l!==u),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(u,l){if(u=Pg(u),u&&e.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(e.mountpoints.push(u),e.mountpoints.sort((h,d)=>d.length-h.length)),e.mounts[u]=l,e.watching&&Promise.resolve(FA(l,s,u)).then(h=>{e.unwatch[u]=h}).catch(console.error),c},async unmount(u,l=!0){var h,d;u=Pg(u),!(!u||!e.mounts[u])&&(e.watching&&u in e.unwatch&&((d=(h=e.unwatch)[u])==null||d.call(h),delete e.unwatch[u]),l&&await jA(e.mounts[u]),e.mountpoints=e.mountpoints.filter(f=>f!==u),delete e.mounts[u])},getMount(u=""){u=mn(u)+":";const l=r(u);return{driver:l.driver,base:l.base}},getMounts(u="",l={}){return u=mn(u),n(u,l.parents).map(d=>({driver:d.driver,base:d.mountpoint}))},keys:(u,l={})=>c.getKeys(u,l),get:(u,l={})=>c.getItem(u,l),set:(u,l,h={})=>c.setItem(u,l,h),has:(u,l={})=>c.hasItem(u,l),del:(u,l={})=>c.removeItem(u,l),remove:(u,l={})=>c.removeItem(u,l)};return c}function FA(t,e,r){return t.watch?t.watch((n,s)=>e(n,r+s)):()=>{}}async function jA(t){typeof t.dispose=="function"&&await dr(t.dispose)}function Su(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function kT(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const n=Su(r);return(s,i)=>n.then(o=>i(o.transaction(e,s).objectStore(e)))}let Yw;function Yp(){return Yw||(Yw=kT("keyval-store","keyval")),Yw}function HA(t,e=Yp()){return e("readonly",r=>Su(r.get(t)))}function zU(t,e,r=Yp()){return r("readwrite",n=>(n.put(e,t),Su(n.transaction)))}function qU(t,e=Yp()){return e("readwrite",r=>(r.delete(t),Su(r.transaction)))}function WU(t=Yp()){return t("readwrite",e=>(e.clear(),Su(e.transaction)))}function VU(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Su(t.transaction)}function GU(t=Yp()){return t("readonly",e=>{if(e.getAllKeys)return Su(e.getAllKeys());const r=[];return VU(e,n=>r.push(n.key)).then(()=>r)})}const KU=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),JU=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function eu(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JU(t)}catch{return t}}function Oo(t){return typeof t=="string"?t:KU(t)||""}const YU="idb-keyval";var QU=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=s=>e+s;let n;return t.dbName&&t.storeName&&(n=kT(t.dbName,t.storeName)),{name:YU,options:t,async hasItem(s){return!(typeof await HA(r(s),n)>"u")},async getItem(s){return await HA(r(s),n)??null},setItem(s,i){return zU(r(s),i,n)},removeItem(s){return qU(r(s),n)},getKeys(){return GU(n)},clear(){return WU(n)}}};const ZU="WALLET_CONNECT_V2_INDEXED_DB",XU="keyvaluestorage";let eB=class{constructor(){this.indexedDb=HU({driver:QU({dbName:ZU,storeName:XU})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,Oo(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Qw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof _e<"u"?_e:typeof self<"u"?self:{},gm={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Qw<"u"&&Qw.localStorage?gm.exports=Qw.localStorage:typeof window<"u"&&window.localStorage?gm.exports=window.localStorage:gm.exports=new e})();function tB(t){var e;return[t[0],eu((e=t[1])!=null?e:"")]}let rB=class{constructor(){this.localStorage=gm.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(tB)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return eu(r)}async setItem(e,r){this.localStorage.setItem(e,Oo(r))}async removeItem(e){this.localStorage.removeItem(e)}};const nB="wc_storage_version",zA=1,sB=async(t,e,r)=>{const n=nB,s=await e.getItem(n);if(s&&s>=zA){r(e);return}const i=await t.getKeys();if(!i.length){r(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const u=await t.getItem(a);await e.setItem(a,u),o.push(a)}}await e.setItem(n,zA),r(e),iB(t,o)},iB=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let oB=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new rB;this.storage=e;try{const r=new eB;sB(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};var Zw,qA;function aB(){if(qA)return Zw;qA=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Zw=e;function e(r,n,s){var i=s&&s.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var c=new Array(a);c[0]=i(r);for(var u=1;u<a;u++)c[u]=i(n[u]);return c.join(" ")}if(typeof r!="string")return r;var l=n.length;if(l===0)return r;for(var h="",d=1-o,f=-1,p=r&&r.length||0,g=0;g<p;){if(r.charCodeAt(g)===37&&g+1<p){switch(f=f>-1?f:0,r.charCodeAt(g+1)){case 100:case 102:if(d>=l||n[d]==null)break;f<g&&(h+=r.slice(f,g)),h+=Number(n[d]),f=g+2,g++;break;case 105:if(d>=l||n[d]==null)break;f<g&&(h+=r.slice(f,g)),h+=Math.floor(Number(n[d])),f=g+2,g++;break;case 79:case 111:case 106:if(d>=l||n[d]===void 0)break;f<g&&(h+=r.slice(f,g));var y=typeof n[d];if(y==="string"){h+="'"+n[d]+"'",f=g+2,g++;break}if(y==="function"){h+=n[d].name||"<anonymous>",f=g+2,g++;break}h+=i(n[d]),f=g+2,g++;break;case 115:if(d>=l)break;f<g&&(h+=r.slice(f,g)),h+=String(n[d]),f=g+2,g++;break;case 37:f<g&&(h+=r.slice(f,g)),h+="%",f=g+2,g++,d--;break}++d}++g}return f===-1?r:(f<p&&(h+=r.slice(f)),h)}return Zw}var Xw,WA;function cB(){if(WA)return Xw;WA=1;const t=aB();Xw=s;const e=N().console||{},r={mapHttpRequest:p,mapHttpResponse:p,wrapRequestSerializer:g,wrapResponseSerializer:g,wrapErrorSerializer:g,req:p,res:p,err:d};function n(A,x){return Array.isArray(A)?A.filter(function(R){return R!=="!stdSerializers.err"}):A===!0?Object.keys(x):!1}function s(A){A=A||{},A.browser=A.browser||{};const x=A.browser.transmit;if(x&&typeof x.send!="function")throw Error("pino: transmit option must have a send function");const P=A.browser.write||e;A.browser.write&&(A.browser.asObject=!0);const R=A.serializers||{},B=n(A.browser.serialize,R);let $=A.browser.serialize;Array.isArray(A.browser.serialize)&&A.browser.serialize.indexOf("!stdSerializers.err")>-1&&($=!1);const K=["error","fatal","warn","info","debug","trace"];typeof P=="function"&&(P.error=P.fatal=P.warn=P.info=P.debug=P.trace=P),A.enabled===!1&&(A.level="silent");const te=A.level||"info",H=Object.create(P);H.log||(H.log=y),Object.defineProperty(H,"levelVal",{get:T}),Object.defineProperty(H,"level",{get:L,set:z});const C={transmit:x,serialize:B,asObject:A.browser.asObject,levels:K,timestamp:f(A)};H.levels=s.levels,H.level=te,H.setMaxListeners=H.getMaxListeners=H.emit=H.addListener=H.on=H.prependListener=H.once=H.prependOnceListener=H.removeListener=H.removeAllListeners=H.listeners=H.listenerCount=H.eventNames=H.write=H.flush=y,H.serializers=R,H._serialize=B,H._stdErrSerialize=$,H.child=j,x&&(H._logEvent=h());function T(){return this.level==="silent"?1/0:this.levels.values[this.level]}function L(){return this._level}function z(W){if(W!=="silent"&&!this.levels.values[W])throw Error("unknown level "+W);this._level=W,i(C,H,"error","log"),i(C,H,"fatal","error"),i(C,H,"warn","error"),i(C,H,"info","log"),i(C,H,"debug","log"),i(C,H,"trace","log")}function j(W,re){if(!W)throw new Error("missing bindings for child Pino");re=re||{},B&&W.serializers&&(re.serializers=W.serializers);const ne=re.serializers;if(B&&ne){var le=Object.assign({},R,ne),Z=A.browser.serialize===!0?Object.keys(le):B;delete W.serializers,c([W],Z,le,this._stdErrSerialize)}function he(Se){this._childLevel=(Se._childLevel|0)+1,this.error=u(Se,W,"error"),this.fatal=u(Se,W,"fatal"),this.warn=u(Se,W,"warn"),this.info=u(Se,W,"info"),this.debug=u(Se,W,"debug"),this.trace=u(Se,W,"trace"),le&&(this.serializers=le,this._serialize=Z),x&&(this._logEvent=h([].concat(Se._logEvent.bindings,W)))}return he.prototype=this,new he(this)}return H}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=r,s.stdTimeFunctions=Object.assign({},{nullTime:b,epochTime:v,unixTime:_,isoTime:S});function i(A,x,P,R){const B=Object.getPrototypeOf(x);x[P]=x.levelVal>x.levels.values[P]?y:B[P]?B[P]:e[P]||e[R]||y,o(A,x,P)}function o(A,x,P){!A.transmit&&x[P]===y||(x[P]=function(R){return function(){const $=A.timestamp(),K=new Array(arguments.length),te=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var H=0;H<K.length;H++)K[H]=arguments[H];if(A.serialize&&!A.asObject&&c(K,this._serialize,this.serializers,this._stdErrSerialize),A.asObject?R.call(te,a(this,P,K,$)):R.apply(te,K),A.transmit){const C=A.transmit.level||x.level,T=s.levels.values[C],L=s.levels.values[P];if(L<T)return;l(this,{ts:$,methodLevel:P,methodValue:L,transmitValue:s.levels.values[A.transmit.level||x.level],send:A.transmit.send,val:x.levelVal},K)}}}(x[P]))}function a(A,x,P,R){A._serialize&&c(P,A._serialize,A.serializers,A._stdErrSerialize);const B=P.slice();let $=B[0];const K={};R&&(K.time=R),K.level=s.levels.values[x];let te=(A._childLevel|0)+1;if(te<1&&(te=1),$!==null&&typeof $=="object"){for(;te--&&typeof B[0]=="object";)Object.assign(K,B.shift());$=B.length?t(B.shift(),B):void 0}else typeof $=="string"&&($=t(B.shift(),B));return $!==void 0&&(K.msg=$),K}function c(A,x,P,R){for(const B in A)if(R&&A[B]instanceof Error)A[B]=s.stdSerializers.err(A[B]);else if(typeof A[B]=="object"&&!Array.isArray(A[B]))for(const $ in A[B])x&&x.indexOf($)>-1&&$ in P&&(A[B][$]=P[$](A[B][$]))}function u(A,x,P){return function(){const R=new Array(1+arguments.length);R[0]=x;for(var B=1;B<R.length;B++)R[B]=arguments[B-1];return A[P].apply(this,R)}}function l(A,x,P){const R=x.send,B=x.ts,$=x.methodLevel,K=x.methodValue,te=x.val,H=A._logEvent.bindings;c(P,A._serialize||Object.keys(A.serializers),A.serializers,A._stdErrSerialize===void 0?!0:A._stdErrSerialize),A._logEvent.ts=B,A._logEvent.messages=P.filter(function(C){return H.indexOf(C)===-1}),A._logEvent.level.label=$,A._logEvent.level.value=K,R($,A._logEvent,te),A._logEvent=h(H)}function h(A){return{ts:0,messages:[],bindings:A||[],level:{label:"",value:0}}}function d(A){const x={type:A.constructor.name,msg:A.message,stack:A.stack};for(const P in A)x[P]===void 0&&(x[P]=A[P]);return x}function f(A){return typeof A.timestamp=="function"?A.timestamp:A.timestamp===!1?b:v}function p(){return{}}function g(A){return A}function y(){}function b(){return!1}function v(){return Date.now()}function _(){return Math.round(Date.now()/1e3)}function S(){return new Date(Date.now()).toISOString()}function N(){function A(x){return typeof x<"u"&&x}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return A(self)||A(window)||A(this)||{}}}return Xw}var sl=cB();const Qp=By(sl),uB={level:"info"},Zp="custom_context",kv=1e3*1024;let lB=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},VA=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new lB(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}},DT=class{constructor(e,r=kv){this.level=e??"error",this.levelValue=sl.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new VA(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===sl.levels.values.error?console.error(e):r===sl.levels.values.warn?console.warn(e):r===sl.levels.values.debug?console.debug(e):r===sl.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Oo({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new VA(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(Oo({extraMetadata:e})),new Blob(r,{type:"application/json"})}},hB=class{constructor(e,r=kv){this.baseChunkLogger=new DT(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}},dB=class{constructor(e,r=kv){this.baseChunkLogger=new DT(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var fB=Object.defineProperty,pB=Object.defineProperties,gB=Object.getOwnPropertyDescriptors,GA=Object.getOwnPropertySymbols,mB=Object.prototype.hasOwnProperty,yB=Object.prototype.propertyIsEnumerable,KA=(t,e,r)=>e in t?fB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fm=(t,e)=>{for(var r in e||(e={}))mB.call(e,r)&&KA(t,r,e[r]);if(GA)for(var r of GA(e))yB.call(e,r)&&KA(t,r,e[r]);return t},jm=(t,e)=>pB(t,gB(e));function Xh(t){return jm(Fm({},t),{level:(t==null?void 0:t.level)||uB.level})}function wB(t,e=Zp){return t[e]||""}function bB(t,e,r=Zp){return t[r]=e,t}function Nn(t,e=Zp){let r="";return typeof t.bindings>"u"?r=wB(t,e):r=t.bindings().context||"",r}function EB(t,e,r=Zp){const n=Nn(t,r);return n.trim()?`${n}/${e}`:e}function Yr(t,e,r=Zp){const n=EB(t,e,r),s=t.child({context:n});return bB(s,n,r)}function vB(t){var e,r;const n=new hB((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Qp(jm(Fm({},t.opts),{level:"trace",browser:jm(Fm({},(r=t.opts)==null?void 0:r.browser),{write:s=>n.write(s)})})),chunkLoggerController:n}}function _B(t){var e;const r=new dB((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Qp(jm(Fm({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function Dv(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?vB(t):_B(t)}var AB=Object.defineProperty,CB=(t,e,r)=>e in t?AB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,JA=(t,e,r)=>CB(t,typeof e!="symbol"?e+"":e,r);let SB=class extends Cu{constructor(e){super(),this.opts=e,JA(this,"protocol","wc"),JA(this,"version",2)}};var IB=Object.defineProperty,NB=(t,e,r)=>e in t?IB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,TB=(t,e,r)=>NB(t,e+"",r);let OB=class extends Cu{constructor(e,r){super(),this.core=e,this.logger=r,TB(this,"records",new Map)}},xB=class{constructor(e,r){this.logger=e,this.core=r}},PB=class extends Cu{constructor(e,r){super(),this.relayer=e,this.logger=r}},RB=class extends Cu{constructor(e){super()}},kB=class{constructor(e,r,n,s){this.core=e,this.logger=r,this.name=n}},DB=class extends Cu{constructor(e,r){super(),this.relayer=e,this.logger=r}},UB=class extends Cu{constructor(e,r){super(),this.core=e,this.logger=r}},BB=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},LB=class{constructor(e,r){this.projectId=e,this.logger=r}},$B=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}};var MB=Object.defineProperty,FB=(t,e,r)=>e in t?MB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,YA=(t,e,r)=>FB(t,typeof e!="symbol"?e+"":e,r);let jB=class{constructor(e){this.opts=e,YA(this,"protocol","wc"),YA(this,"version",2)}},HB=class{constructor(e){this.client=e}};function zB(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function UT(t,...e){if(!zB(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function QA(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function qB(t,e){UT(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Bu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e0=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function WB(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function BT(t){return typeof t=="string"&&(t=WB(t)),UT(t),t}let VB=class{clone(){return this._cloneInto()}};function GB(t){const e=n=>t().update(BT(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function LT(t=32){if(Bu&&typeof Bu.getRandomValues=="function")return Bu.getRandomValues(new Uint8Array(t));if(Bu&&typeof Bu.randomBytes=="function")return Bu.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function KB(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}let JB=class extends VB{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=e0(this.buffer)}update(e){QA(this);const{view:r,buffer:n,blockLen:s}=this;e=BT(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=e0(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){QA(this),qB(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let h=o;h<s;h++)r[h]=0;KB(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=e0(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,l[h],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};const Rg=BigInt(2**32-1),kb=BigInt(32);function $T(t,e=!1){return e?{h:Number(t&Rg),l:Number(t>>kb&Rg)}:{h:Number(t>>kb&Rg)|0,l:Number(t&Rg)|0}}function YB(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=$T(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const QB=(t,e)=>BigInt(t>>>0)<<kb|BigInt(e>>>0),ZB=(t,e,r)=>t>>>r,XB=(t,e,r)=>t<<32-r|e>>>r,eL=(t,e,r)=>t>>>r|e<<32-r,tL=(t,e,r)=>t<<32-r|e>>>r,rL=(t,e,r)=>t<<64-r|e>>>r-32,nL=(t,e,r)=>t>>>r-32|e<<64-r,sL=(t,e)=>e,iL=(t,e)=>t,oL=(t,e,r)=>t<<r|e>>>32-r,aL=(t,e,r)=>e<<r|t>>>32-r,cL=(t,e,r)=>e<<r-32|t>>>64-r,uL=(t,e,r)=>t<<r-32|e>>>64-r;function lL(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const hL=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),dL=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,fL=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),pL=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,gL=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),mL=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,$e={fromBig:$T,split:YB,toBig:QB,shrSH:ZB,shrSL:XB,rotrSH:eL,rotrSL:tL,rotrBH:rL,rotrBL:nL,rotr32H:sL,rotr32L:iL,rotlSH:oL,rotlSL:aL,rotlBH:cL,rotlBL:uL,add:lL,add3L:hL,add3H:dL,add4L:fL,add4H:pL,add5H:mL,add5L:gL},[yL,wL]=$e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Mo=new Uint32Array(80),Fo=new Uint32Array(80);let bL=class extends JB{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:h,Fl:d,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,r,n,s,i,o,a,c,u,l,h,d,f,p,g,y]}set(e,r,n,s,i,o,a,c,u,l,h,d,f,p,g,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=h|0,this.Fl=d|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,r){for(let _=0;_<16;_++,r+=4)Mo[_]=e.getUint32(r),Fo[_]=e.getUint32(r+=4);for(let _=16;_<80;_++){const S=Mo[_-15]|0,N=Fo[_-15]|0,A=$e.rotrSH(S,N,1)^$e.rotrSH(S,N,8)^$e.shrSH(S,N,7),x=$e.rotrSL(S,N,1)^$e.rotrSL(S,N,8)^$e.shrSL(S,N,7),P=Mo[_-2]|0,R=Fo[_-2]|0,B=$e.rotrSH(P,R,19)^$e.rotrBH(P,R,61)^$e.shrSH(P,R,6),$=$e.rotrSL(P,R,19)^$e.rotrBL(P,R,61)^$e.shrSL(P,R,6),K=$e.add4L(x,$,Fo[_-7],Fo[_-16]),te=$e.add4H(K,A,B,Mo[_-7],Mo[_-16]);Mo[_]=te|0,Fo[_]=K|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:h,El:d,Fh:f,Fl:p,Gh:g,Gl:y,Hh:b,Hl:v}=this;for(let _=0;_<80;_++){const S=$e.rotrSH(h,d,14)^$e.rotrSH(h,d,18)^$e.rotrBH(h,d,41),N=$e.rotrSL(h,d,14)^$e.rotrSL(h,d,18)^$e.rotrBL(h,d,41),A=h&f^~h&g,x=d&p^~d&y,P=$e.add5L(v,N,x,wL[_],Fo[_]),R=$e.add5H(P,b,S,A,yL[_],Mo[_]),B=P|0,$=$e.rotrSH(n,s,28)^$e.rotrBH(n,s,34)^$e.rotrBH(n,s,39),K=$e.rotrSL(n,s,28)^$e.rotrBL(n,s,34)^$e.rotrBL(n,s,39),te=n&i^n&a^i&a,H=s&o^s&c^o&c;b=g|0,v=y|0,g=f|0,y=p|0,f=h|0,p=d|0,{h,l:d}=$e.add(u|0,l|0,R|0,B|0),u=a|0,l=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const C=$e.add3L(B,K,H);n=$e.add3H(C,R,$,te),s=C|0}({h:n,l:s}=$e.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=$e.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=$e.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=$e.add(this.Dh|0,this.Dl|0,u|0,l|0),{h,l:d}=$e.add(this.Eh|0,this.El|0,h|0,d|0),{h:f,l:p}=$e.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=$e.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:b,l:v}=$e.add(this.Hh|0,this.Hl|0,b|0,v|0),this.set(n,s,i,o,a,c,u,l,h,d,f,p,g,y,b,v)}roundClean(){Mo.fill(0),Fo.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const EL=GB(()=>new bL);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Uv=BigInt(0),MT=BigInt(1),vL=BigInt(2);function Bv(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Lv(t){if(!Bv(t))throw new Error("Uint8Array expected")}function t0(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const _L=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function $v(t){Lv(t);let e="";for(let r=0;r<t.length;r++)e+=_L[t[r]];return e}function FT(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Uv:BigInt("0x"+t)}const Wi={_0:48,_9:57,A:65,F:70,a:97,f:102};function ZA(t){if(t>=Wi._0&&t<=Wi._9)return t-Wi._0;if(t>=Wi.A&&t<=Wi.F)return t-(Wi.A-10);if(t>=Wi.a&&t<=Wi.f)return t-(Wi.a-10)}function jT(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=ZA(t.charCodeAt(i)),a=ZA(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function AL(t){return FT($v(t))}function mm(t){return Lv(t),FT($v(Uint8Array.from(t).reverse()))}function HT(t,e){return jT(t.toString(16).padStart(e*2,"0"))}function Db(t,e){return HT(t,e).reverse()}function Vi(t,e,r){let n;if(typeof e=="string")try{n=jT(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Bv(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function XA(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];Lv(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}const r0=t=>typeof t=="bigint"&&Uv<=t;function CL(t,e,r){return r0(t)&&r0(e)&&r0(r)&&e<=t&&t<r}function Sd(t,e,r,n){if(!CL(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function SL(t){let e;for(e=0;t>Uv;t>>=MT,e+=1);return e}const IL=t=>(vL<<BigInt(t-1))-MT,NL={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Bv(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Mv(t,e,r={}){const n=(s,i,o)=>{const a=NL[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}function e1(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}const wr=BigInt(0),Jt=BigInt(1),nc=BigInt(2),TL=BigInt(3),Ub=BigInt(4),t1=BigInt(5),r1=BigInt(8);function ur(t,e){const r=t%e;return r>=wr?r:e+r}function OL(t,e,r){if(e<wr)throw new Error("invalid exponent, negatives unsupported");if(r<=wr)throw new Error("invalid modulus");if(r===Jt)return wr;let n=Jt;for(;e>wr;)e&Jt&&(n=n*t%r),t=t*t%r,e>>=Jt;return n}function oi(t,e,r){let n=t;for(;e-- >wr;)n*=n,n%=r;return n}function n1(t,e){if(t===wr)throw new Error("invert: expected non-zero number");if(e<=wr)throw new Error("invert: expected positive modulus, got "+e);let r=ur(t,e),n=e,s=wr,i=Jt;for(;r!==wr;){const o=n/r,a=n%r,c=s-i*o;n=r,r=a,s=i,i=c}if(n!==Jt)throw new Error("invert: does not exist");return ur(s,e)}function xL(t){const e=(t-Jt)/nc;let r,n,s;for(r=t-Jt,n=0;r%nc===wr;r/=nc,n++);for(s=nc;s<t&&OL(s,e,t)!==t-Jt;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+Jt)/Ub;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(r+Jt)/nc;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,u=o.pow(o.mul(o.ONE,s),r),l=o.pow(a,i),h=o.pow(a,r);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let d=1;for(let p=o.sqr(h);d<c&&!o.eql(p,o.ONE);d++)p=o.sqr(p);const f=o.pow(u,Jt<<BigInt(c-d-1));u=o.sqr(f),l=o.mul(l,f),h=o.mul(h,u),c=d}return l}}function PL(t){if(t%Ub===TL){const e=(t+Jt)/Ub;return function(r,n){const s=r.pow(n,e);if(!r.eql(r.sqr(s),n))throw new Error("Cannot find square root");return s}}if(t%r1===t1){const e=(t-t1)/r1;return function(r,n){const s=r.mul(n,nc),i=r.pow(s,e),o=r.mul(n,i),a=r.mul(r.mul(o,nc),i),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return xL(t)}const RL=(t,e)=>(ur(t,e)&Jt)===Jt,kL=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function DL(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=kL.reduce((n,s)=>(n[s]="function",n),e);return Mv(t,r)}function UL(t,e,r){if(r<wr)throw new Error("invalid exponent, negatives unsupported");if(r===wr)return t.ONE;if(r===Jt)return e;let n=t.ONE,s=e;for(;r>wr;)r&Jt&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Jt;return n}function BL(t,e){const r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function zT(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function qT(t,e,r=!1,n={}){if(t<=wr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=zT(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:s,BYTES:i,MASK:IL(s),ZERO:wr,ONE:Jt,create:c=>ur(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return wr<=c&&c<t},is0:c=>c===wr,isOdd:c=>(c&Jt)===Jt,neg:c=>ur(-c,t),eql:(c,u)=>c===u,sqr:c=>ur(c*c,t),add:(c,u)=>ur(c+u,t),sub:(c,u)=>ur(c-u,t),mul:(c,u)=>ur(c*u,t),pow:(c,u)=>UL(a,c,u),div:(c,u)=>ur(c*n1(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>n1(c,t),sqrt:n.sqrt||(c=>(o||(o=PL(t)),o(a,c))),invertBatch:c=>BL(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>r?Db(c,i):HT(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return r?mm(c):AL(c)}});return Object.freeze(a)}const s1=BigInt(0),kg=BigInt(1);function n0(t,e){const r=e.negate();return t?r:e}function WT(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function s0(t,e){WT(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function LL(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function $L(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const i0=new WeakMap,VT=new WeakMap;function o0(t){return VT.get(t)||1}function ML(t,e){return{constTimeNegate:n0,hasPrecomputes(r){return o0(r)!==1},unsafeLadder(r,n,s=t.ZERO){let i=r;for(;n>s1;)n&kg&&(s=s.add(i)),i=i.double(),n>>=kg;return s},precomputeWindow(r,n){const{windows:s,windowSize:i}=s0(n,e),o=[];let a=r,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,s){const{windows:i,windowSize:o}=s0(r,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**r-1),l=2**r,h=BigInt(r);for(let d=0;d<i;d++){const f=d*o;let p=Number(s&u);s>>=h,p>o&&(p-=l,s+=kg);const g=f,y=f+Math.abs(p)-1,b=d%2!==0,v=p<0;p===0?c=c.add(n0(b,n[g])):a=a.add(n0(v,n[y]))}return{p:a,f:c}},wNAFUnsafe(r,n,s,i=t.ZERO){const{windows:o,windowSize:a}=s0(r,e),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let h=0;h<o;h++){const d=h*a;if(s===s1)break;let f=Number(s&c);if(s>>=l,f>a&&(f-=u,s+=kg),f===0)continue;let p=n[d+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(r,n,s){let i=i0.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&i0.set(n,s(i))),i},wNAFCached(r,n,s){const i=o0(r);return this.wNAF(i,this.getPrecomputes(i,r,s),n)},wNAFCachedUnsafe(r,n,s,i){const o=o0(r);return o===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,r,s),n,i)},setWindowSize(r,n){WT(n,e),VT.set(r,n),i0.delete(r)}}}function FL(t,e,r,n){if(LL(r,t),$L(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=SL(BigInt(r.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),u=Math.floor((e.BITS-1)/o)*o;let l=s;for(let h=u;h>=0;h-=o){c.fill(s);for(let f=0;f<n.length;f++){const p=n[f],g=Number(p>>BigInt(h)&BigInt(a));c[g]=c[g].add(r[f])}let d=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),d=d.add(p);if(l=l.add(d),h!==0)for(let f=0;f<o;f++)l=l.double()}return l}function jL(t){return DL(t.Fp),Mv(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...zT(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Os=BigInt(0),dn=BigInt(1),Dg=BigInt(2),HL=BigInt(8),zL={zip215:!0};function qL(t){const e=jL(t);return Mv(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function WL(t){const e=qL(t),{Fp:r,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,u=Dg<<BigInt(a*8)-dn,l=r.create,h=qT(e.n,e.nBitLength),d=e.uvRatio||((C,T)=>{try{return{isValid:!0,value:r.sqrt(C*r.inv(T))}}catch{return{isValid:!1,value:Os}}}),f=e.adjustScalarBytes||(C=>C),p=e.domain||((C,T,L)=>{if(t0("phflag",L),T.length||L)throw new Error("Contexts/pre-hash are not supported");return C});function g(C,T){Sd("coordinate "+C,T,Os,u)}function y(C){if(!(C instanceof _))throw new Error("ExtendedPoint expected")}const b=e1((C,T)=>{const{ex:L,ey:z,ez:j}=C,W=C.is0();T==null&&(T=W?HL:r.inv(j));const re=l(L*T),ne=l(z*T),le=l(j*T);if(W)return{x:Os,y:dn};if(le!==dn)throw new Error("invZ was invalid");return{x:re,y:ne}}),v=e1(C=>{const{a:T,d:L}=e;if(C.is0())throw new Error("bad point: ZERO");const{ex:z,ey:j,ez:W,et:re}=C,ne=l(z*z),le=l(j*j),Z=l(W*W),he=l(Z*Z),Se=l(ne*T),je=l(Z*l(Se+le)),qe=l(he+l(L*l(ne*le)));if(je!==qe)throw new Error("bad point: equation left != right (1)");const Re=l(z*j),St=l(W*re);if(Re!==St)throw new Error("bad point: equation left != right (2)");return!0});class _{constructor(T,L,z,j){this.ex=T,this.ey=L,this.ez=z,this.et=j,g("x",T),g("y",L),g("z",z),g("t",j),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(T){if(T instanceof _)throw new Error("extended point not allowed");const{x:L,y:z}=T||{};return g("x",L),g("y",z),new _(L,z,dn,l(L*z))}static normalizeZ(T){const L=r.invertBatch(T.map(z=>z.ez));return T.map((z,j)=>z.toAffine(L[j])).map(_.fromAffine)}static msm(T,L){return FL(_,h,T,L)}_setWindowSize(T){A.setWindowSize(this,T)}assertValidity(){v(this)}equals(T){y(T);const{ex:L,ey:z,ez:j}=this,{ex:W,ey:re,ez:ne}=T,le=l(L*ne),Z=l(W*j),he=l(z*ne),Se=l(re*j);return le===Z&&he===Se}is0(){return this.equals(_.ZERO)}negate(){return new _(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:T}=e,{ex:L,ey:z,ez:j}=this,W=l(L*L),re=l(z*z),ne=l(Dg*l(j*j)),le=l(T*W),Z=L+z,he=l(l(Z*Z)-W-re),Se=le+re,je=Se-ne,qe=le-re,Re=l(he*je),St=l(Se*qe),pt=l(he*qe),It=l(je*Se);return new _(Re,St,It,pt)}add(T){y(T);const{a:L,d:z}=e,{ex:j,ey:W,ez:re,et:ne}=this,{ex:le,ey:Z,ez:he,et:Se}=T;if(L===BigInt(-1)){const Cg=l((W-j)*(Z+le)),Ru=l((W+j)*(Z-le)),gd=l(Ru-Cg);if(gd===Os)return this.double();const Sg=l(re*Dg*Se),md=l(ne*Dg*he),Wa=md+Sg,On=Ru+Cg,ku=md-Sg,Uw=l(Wa*gd),ii=l(On*ku),Bw=l(Wa*ku),I=l(gd*On);return new _(Uw,ii,I,Bw)}const je=l(j*le),qe=l(W*Z),Re=l(ne*z*Se),St=l(re*he),pt=l((j+W)*(le+Z)-je-qe),It=St-Re,gt=St+Re,Gt=l(qe-L*je),rs=l(pt*It),Ts=l(gt*Gt),qa=l(pt*Gt),Dw=l(It*gt);return new _(rs,Ts,Dw,qa)}subtract(T){return this.add(T.negate())}wNAF(T){return A.wNAFCached(this,T,_.normalizeZ)}multiply(T){const L=T;Sd("scalar",L,dn,n);const{p:z,f:j}=this.wNAF(L);return _.normalizeZ([z,j])[0]}multiplyUnsafe(T,L=_.ZERO){const z=T;return Sd("scalar",z,Os,n),z===Os?N:this.is0()||z===dn?this:A.wNAFCachedUnsafe(this,z,_.normalizeZ,L)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return A.unsafeLadder(this,n).is0()}toAffine(T){return b(this,T)}clearCofactor(){const{h:T}=e;return T===dn?this:this.multiplyUnsafe(T)}static fromHex(T,L=!1){const{d:z,a:j}=e,W=r.BYTES;T=Vi("pointHex",T,W),t0("zip215",L);const re=T.slice(),ne=T[W-1];re[W-1]=ne&-129;const le=mm(re),Z=L?u:r.ORDER;Sd("pointHex.y",le,Os,Z);const he=l(le*le),Se=l(he-dn),je=l(z*he-j);let{isValid:qe,value:Re}=d(Se,je);if(!qe)throw new Error("Point.fromHex: invalid y coordinate");const St=(Re&dn)===dn,pt=(ne&128)!==0;if(!L&&Re===Os&&pt)throw new Error("Point.fromHex: x=0 and x_0=1");return pt!==St&&(Re=l(-Re)),_.fromAffine({x:Re,y:le})}static fromPrivateKey(T){return R(T).point}toRawBytes(){const{x:T,y:L}=this.toAffine(),z=Db(L,r.BYTES);return z[z.length-1]|=T&dn?128:0,z}toHex(){return $v(this.toRawBytes())}}_.BASE=new _(e.Gx,e.Gy,dn,l(e.Gx*e.Gy)),_.ZERO=new _(Os,dn,dn,Os);const{BASE:S,ZERO:N}=_,A=ML(_,a*8);function x(C){return ur(C,n)}function P(C){return x(mm(C))}function R(C){const T=r.BYTES;C=Vi("private key",C,T);const L=Vi("hashed private key",i(C),2*T),z=f(L.slice(0,T)),j=L.slice(T,2*T),W=P(z),re=S.multiply(W),ne=re.toRawBytes();return{head:z,prefix:j,scalar:W,point:re,pointBytes:ne}}function B(C){return R(C).pointBytes}function $(C=new Uint8Array,...T){const L=XA(...T);return P(i(p(L,Vi("context",C),!!s)))}function K(C,T,L={}){C=Vi("message",C),s&&(C=s(C));const{prefix:z,scalar:j,pointBytes:W}=R(T),re=$(L.context,z,C),ne=S.multiply(re).toRawBytes(),le=$(L.context,ne,W,C),Z=x(re+le*j);Sd("signature.s",Z,Os,n);const he=XA(ne,Db(Z,r.BYTES));return Vi("result",he,r.BYTES*2)}const te=zL;function H(C,T,L,z=te){const{context:j,zip215:W}=z,re=r.BYTES;C=Vi("signature",C,2*re),T=Vi("message",T),L=Vi("publicKey",L,re),W!==void 0&&t0("zip215",W),s&&(T=s(T));const ne=mm(C.slice(re,2*re));let le,Z,he;try{le=_.fromHex(L,W),Z=_.fromHex(C.slice(0,re),W),he=S.multiplyUnsafe(ne)}catch{return!1}if(!W&&le.isSmallOrder())return!1;const Se=$(j,Z.toRawBytes(),le.toRawBytes(),T);return Z.add(le.multiplyUnsafe(Se)).subtract(he).clearCofactor().equals(_.ZERO)}return S._setWindowSize(8),{CURVE:e,getPublicKey:B,sign:K,verify:H,ExtendedPoint:_,utils:{getExtendedPublicKey:R,randomPrivateKey:()=>o(r.BYTES),precompute(C=8,T=_.BASE){return T._setWindowSize(C),T.multiply(BigInt(3)),T}}}}BigInt(0),BigInt(1);const Fv=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),i1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const VL=BigInt(1),o1=BigInt(2);BigInt(3);const GL=BigInt(5),KL=BigInt(8);function JL(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=Fv,o=t*t%i*t%i,a=oi(o,o1,i)*o%i,c=oi(a,VL,i)*t%i,u=oi(c,GL,i)*c%i,l=oi(u,e,i)*u%i,h=oi(l,r,i)*l%i,d=oi(h,n,i)*h%i,f=oi(d,s,i)*d%i,p=oi(f,s,i)*d%i,g=oi(p,e,i)*u%i;return{pow_p_5_8:oi(g,o1,i)*t%i,b2:o}}function YL(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function QL(t,e){const r=Fv,n=ur(e*e*e,r),s=ur(n*n*e,r),i=JL(t*s).pow_p_5_8;let o=ur(t*n*i,r);const a=ur(e*o*o,r),c=o,u=ur(o*i1,r),l=a===t,h=a===ur(-t,r),d=a===ur(-t*i1,r);return l&&(o=c),(h||d)&&(o=u),RL(o,r)&&(o=ur(-o,r)),{isValid:l||h,value:o}}const ZL=qT(Fv,void 0,!0),XL={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:ZL,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:KL,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:EL,randomBytes:LT,adjustScalarBytes:YL,uvRatio:QL},GT=WL(XL),e$="EdDSA",t$="JWT",Hm=".",zy="base64url",KT="utf8",JT="utf8",r$=":",n$="did",s$="key",a1="base58btc",i$="z",o$="K36",a$=32;function jv(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function YT(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?jv(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function QT(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const r=YT(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return jv(r)}function c$(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,b=0,v=p.length;b!==v&&p[b]===0;)b++,g++;for(var _=(v-b)*l+1>>>0,S=new Uint8Array(_);b!==v;){for(var N=p[b],A=0,x=_-1;(N!==0||A<y)&&x!==-1;x--,A++)N+=256*S[x]>>>0,S[x]=N%a>>>0,N=N/a>>>0;if(N!==0)throw new Error("Non-zero carry");y=A,b++}for(var P=_-y;P!==_&&S[P]===0;)P++;for(var R=c.repeat(g);P<_;++P)R+=t.charAt(S[P]);return R}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,b=0;p[g]===c;)y++,g++;for(var v=(p.length-g)*u+1>>>0,_=new Uint8Array(v);p[g];){var S=r[p.charCodeAt(g)];if(S===255)return;for(var N=0,A=v-1;(S!==0||N<b)&&A!==-1;A--,N++)S+=a*_[A]>>>0,_[A]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");b=N,g++}if(p[g]!==" "){for(var x=v-b;x!==v&&_[x]===0;)x++;for(var P=new Uint8Array(y+(v-x)),R=y;x!==v;)P[R++]=_[x++];return P}}}function f(p){var g=d(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var u$=c$,l$=u$;const ZT=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},h$=t=>new TextEncoder().encode(t),d$=t=>new TextDecoder().decode(t);let f$=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},p$=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return XT(this,e)}},g$=class{constructor(e){this.decoders=e}or(e){return XT(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const XT=(t,e)=>new g$({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let m$=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new f$(e,r,n),this.decoder=new p$(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const qy=({name:t,prefix:e,encode:r,decode:n})=>new m$(t,e,r,n),Xp=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=l$(r,e);return qy({prefix:t,name:e,encode:n,decode:i=>ZT(s(i))})},y$=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const h=s[t[l]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},w$=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Br=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>qy({prefix:e,name:t,encode(s){return w$(s,n,r)},decode(s){return y$(s,n,r,t)}}),b$=qy({prefix:"\0",name:"identity",encode:t=>d$(t),decode:t=>h$(t)});var E$=Object.freeze({__proto__:null,identity:b$});const v$=Br({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var _$=Object.freeze({__proto__:null,base2:v$});const A$=Br({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var C$=Object.freeze({__proto__:null,base8:A$});const S$=Xp({prefix:"9",name:"base10",alphabet:"0123456789"});var I$=Object.freeze({__proto__:null,base10:S$});const N$=Br({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),T$=Br({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var O$=Object.freeze({__proto__:null,base16:N$,base16upper:T$});const x$=Br({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),P$=Br({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),R$=Br({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),k$=Br({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),D$=Br({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),U$=Br({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),B$=Br({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),L$=Br({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),$$=Br({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var M$=Object.freeze({__proto__:null,base32:x$,base32upper:P$,base32pad:R$,base32padupper:k$,base32hex:D$,base32hexupper:U$,base32hexpad:B$,base32hexpadupper:L$,base32z:$$});const F$=Xp({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),j$=Xp({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var H$=Object.freeze({__proto__:null,base36:F$,base36upper:j$});const z$=Xp({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),q$=Xp({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var W$=Object.freeze({__proto__:null,base58btc:z$,base58flickr:q$});const V$=Br({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),G$=Br({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),K$=Br({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),J$=Br({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Y$=Object.freeze({__proto__:null,base64:V$,base64pad:G$,base64url:K$,base64urlpad:J$});const eO=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),Q$=eO.reduce((t,e,r)=>(t[r]=e,t),[]),Z$=eO.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function X$(t){return t.reduce((e,r)=>(e+=Q$[r],e),"")}function e8(t){const e=[];for(const r of t){const n=Z$[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const t8=qy({prefix:"ðŸš€",name:"base256emoji",encode:X$,decode:e8});var r8=Object.freeze({__proto__:null,base256emoji:t8}),n8=tO,c1=128,s8=-128,i8=Math.pow(2,31);function tO(t,e,r){e=e||[],r=r||0;for(var n=r;t>=i8;)e[r++]=t&255|c1,t/=128;for(;t&s8;)e[r++]=t&255|c1,t>>>=7;return e[r]=t|0,tO.bytes=r-n+1,e}var o8=Bb,a8=128,u1=127;function Bb(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw Bb.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&u1)<<s:(o&u1)*Math.pow(2,s),s+=7}while(o>=a8);return Bb.bytes=i-n,r}var c8=Math.pow(2,7),u8=Math.pow(2,14),l8=Math.pow(2,21),h8=Math.pow(2,28),d8=Math.pow(2,35),f8=Math.pow(2,42),p8=Math.pow(2,49),g8=Math.pow(2,56),m8=Math.pow(2,63),y8=function(t){return t<c8?1:t<u8?2:t<l8?3:t<h8?4:t<d8?5:t<f8?6:t<p8?7:t<g8?8:t<m8?9:10},w8={encode:n8,decode:o8,encodingLength:y8},rO=w8;const l1=(t,e,r=0)=>(rO.encode(t,e,r),e),h1=t=>rO.encodingLength(t),Lb=(t,e)=>{const r=e.byteLength,n=h1(t),s=n+h1(r),i=new Uint8Array(s+r);return l1(t,i,0),l1(r,i,n),i.set(e,s),new b8(t,r,e,i)};let b8=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};const nO=({name:t,code:e,encode:r})=>new E8(t,e,r);let E8=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Lb(this.code,r):r.then(n=>Lb(this.code,n))}else throw Error("Unknown type, must be binary type")}};const sO=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),v8=nO({name:"sha2-256",code:18,encode:sO("SHA-256")}),_8=nO({name:"sha2-512",code:19,encode:sO("SHA-512")});var A8=Object.freeze({__proto__:null,sha256:v8,sha512:_8});const iO=0,C8="identity",oO=ZT,S8=t=>Lb(iO,oO(t)),I8={code:iO,name:C8,encode:oO,digest:S8};var N8=Object.freeze({__proto__:null,identity:I8});new TextEncoder,new TextDecoder;const d1={...E$,..._$,...C$,...I$,...O$,...M$,...H$,...W$,...Y$,...r8};({...A8,...N8});function aO(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const f1=aO("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),a0=aO("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=YT(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),cO={utf8:f1,"utf-8":f1,hex:d1.base16,latin1:a0,ascii:a0,binary:a0,...d1};function Wy(t,e="utf8"){const r=cO[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function ed(t,e="utf8"){const r=cO[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?jv(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function p1(t){return eu(Wy(ed(t,zy),KT))}function zm(t){return Wy(ed(Oo(t),KT),zy)}function uO(t){const e=ed(o$,a1),r=i$+Wy(QT([e,t]),a1);return[n$,s$,r].join(r$)}function T8(t){return Wy(t,zy)}function O8(t){return ed(t,zy)}function x8(t){return ed([zm(t.header),zm(t.payload)].join(Hm),JT)}function P8(t){return[zm(t.header),zm(t.payload),T8(t.signature)].join(Hm)}function $b(t){const e=t.split(Hm),r=p1(e[0]),n=p1(e[1]),s=O8(e[2]),i=ed(e.slice(0,2).join(Hm),JT);return{header:r,payload:n,signature:s,data:i}}function g1(t=LT(a$)){const e=GT.getPublicKey(t);return{secretKey:QT([t,e]),publicKey:e}}async function R8(t,e,r,n,s=ae.fromMiliseconds(Date.now())){const i={alg:e$,typ:t$},o=uO(n.publicKey),a=s+r,c={iss:o,sub:t,aud:e,iat:s,exp:a},u=x8({header:i,payload:c}),l=GT.sign(u,n.secretKey.slice(0,32));return P8({header:i,payload:c,signature:l})}var m1=function(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},k8=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),D8=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=kr.platform}return t}(),U8=function(){function t(e,r,n,s){this.name=e,this.version=r,this.os=n,this.bot=s,this.type="bot-device"}return t}(),B8=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),L8=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),$8=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,M8=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,y1=3,F8=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",$8]],w1=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function j8(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new L8:typeof navigator<"u"?z8(navigator.userAgent):W8()}function H8(t){return t!==""&&F8.reduce(function(e,r){var n=r[0],s=r[1];if(e)return e;var i=s.exec(t);return!!i&&[n,i]},!1)}function z8(t){var e=H8(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new B8;var s=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);s?s.length<y1&&(s=m1(m1([],s,!0),V8(y1-s.length),!0)):s=[];var i=s.join("."),o=q8(t),a=M8.exec(t);return a&&a[1]?new U8(r,i,o,a[1]):new k8(r,i,o)}function q8(t){for(var e=0,r=w1.length;e<r;e++){var n=w1[e],s=n[0],i=n[1],o=i.exec(t);if(o)return s}return null}function W8(){var t=typeof kr<"u"&&kr.version;return t?new D8(kr.version.slice(1)):null}function V8(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var yt={},b1;function lO(){if(b1)return yt;b1=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.getLocalStorage=yt.getLocalStorageOrThrow=yt.getCrypto=yt.getCryptoOrThrow=yt.getLocation=yt.getLocationOrThrow=yt.getNavigator=yt.getNavigatorOrThrow=yt.getDocument=yt.getDocumentOrThrow=yt.getFromWindowOrThrow=yt.getFromWindow=void 0;function t(d){let f;return typeof window<"u"&&typeof window[d]<"u"&&(f=window[d]),f}yt.getFromWindow=t;function e(d){const f=t(d);if(!f)throw new Error(`${d} is not defined in Window`);return f}yt.getFromWindowOrThrow=e;function r(){return e("document")}yt.getDocumentOrThrow=r;function n(){return t("document")}yt.getDocument=n;function s(){return e("navigator")}yt.getNavigatorOrThrow=s;function i(){return t("navigator")}yt.getNavigator=i;function o(){return e("location")}yt.getLocationOrThrow=o;function a(){return t("location")}yt.getLocation=a;function c(){return e("crypto")}yt.getCryptoOrThrow=c;function u(){return t("crypto")}yt.getCrypto=u;function l(){return e("localStorage")}yt.getLocalStorageOrThrow=l;function h(){return t("localStorage")}return yt.getLocalStorage=h,yt}var tu=lO(),Id={},E1;function G8(){if(E1)return Id;E1=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.getWindowMetadata=void 0;const t=lO();function e(){let r,n;try{r=t.getDocumentOrThrow(),n=t.getLocationOrThrow()}catch{return null}function s(){const f=r.getElementsByTagName("link"),p=[];for(let g=0;g<f.length;g++){const y=f[g],b=y.getAttribute("rel");if(b&&b.toLowerCase().indexOf("icon")>-1){const v=y.getAttribute("href");if(v)if(v.toLowerCase().indexOf("https:")===-1&&v.toLowerCase().indexOf("http:")===-1&&v.indexOf("//")!==0){let _=n.protocol+"//"+n.host;if(v.indexOf("/")===0)_+=v;else{const S=n.pathname.split("/");S.pop();const N=S.join("/");_+=N+"/"+v}p.push(_)}else if(v.indexOf("//")===0){const _=n.protocol+v;p.push(_)}else p.push(v)}}return p}function i(...f){const p=r.getElementsByTagName("meta");for(let g=0;g<p.length;g++){const y=p[g],b=["itemprop","property","name"].map(v=>y.getAttribute(v)).filter(v=>v?f.includes(v):!1);if(b.length&&b){const v=y.getAttribute("content");if(v)return v}}return""}function o(){let f=i("name","og:site_name","og:title","twitter:title");return f||(f=r.title),f}function a(){return i("description","og:description","twitter:description","keywords")}const c=o(),u=a(),l=n.origin,h=s();return{description:u,url:l,icons:h,name:c}}return Id.getWindowMetadata=e,Id}var K8=G8();function Sf(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function v1(t){return Sf(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const hO="2.23.2";let Nd={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${hO}`},Vy=class Mb extends Error{constructor(e,r={}){var a;const n=(()=>{var c;return r.cause instanceof Mb?r.cause.details:(c=r.cause)!=null&&c.message?r.cause.message:r.details})(),s=r.cause instanceof Mb&&r.cause.docsPath||r.docsPath,i=(a=Nd.getDocsUrl)==null?void 0:a.call(Nd,{...r,docsPath:s}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...n?[`Details: ${n}`]:[],...Nd.version?[`Version: ${Nd.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=s,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=hO}walk(e){return dO(this,e)}};function dO(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?dO(t.cause,e):e?null:t}let fO=class extends Vy{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}};function td(t,{dir:e,size:r=32}={}){return typeof t=="string"?J8(t,{dir:e,size:r}):Y8(t,{dir:e,size:r})}function J8(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new fO({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function Y8(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new fO({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let s=0;s<r;s++){const i=e==="right";n[i?s:r-s-1]=t[i?s:t.length-s-1]}return n}let Q8=class extends Vy{constructor({max:e,min:r,signed:n,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}},Z8=class extends Vy{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function rd(t,{size:e}){if(v1(t)>e)throw new Z8({givenSize:v1(t),maxSize:e})}function Fb(t,e={}){const{signed:r}=e;e.size&&rd(t,{size:e.size});const n=BigInt(t);if(!r)return n;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return n<=i?n:n-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function X8(t,e={}){return Number(Fb(t,e))}const eM=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function jb(t,e={}){return typeof t=="number"||typeof t=="bigint"?gO(t,e):typeof t=="string"?nM(t,e):typeof t=="boolean"?tM(t,e):pO(t,e)}function tM(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(rd(r,{size:e.size}),td(r,{size:e.size})):r}function pO(t,e={}){let r="";for(let s=0;s<t.length;s++)r+=eM[t[s]];const n=`0x${r}`;return typeof e.size=="number"?(rd(n,{size:e.size}),td(n,{dir:"right",size:e.size})):n}function gO(t,e={}){const{signed:r,size:n}=e,s=BigInt(t);let i;n?r?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&r?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new Q8({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?td(a,{size:n}):a}const rM=new TextEncoder;function nM(t,e={}){const r=rM.encode(t);return pO(r,e)}const sM=new TextEncoder;function iM(t,e={}){return typeof t=="number"||typeof t=="bigint"?aM(t,e):typeof t=="boolean"?oM(t,e):Sf(t)?mO(t,e):yO(t,e)}function oM(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(rd(r,{size:e.size}),td(r,{size:e.size})):r}const Gi={zero:48,nine:57,A:65,F:70,a:97,f:102};function _1(t){if(t>=Gi.zero&&t<=Gi.nine)return t-Gi.zero;if(t>=Gi.A&&t<=Gi.F)return t-(Gi.A-10);if(t>=Gi.a&&t<=Gi.f)return t-(Gi.a-10)}function mO(t,e={}){let r=t;e.size&&(rd(r,{size:e.size}),r=td(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const s=n.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=_1(n.charCodeAt(a++)),u=_1(n.charCodeAt(a++));if(c===void 0||u===void 0)throw new Vy(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);i[o]=c*16+u}return i}function aM(t,e){const r=gO(t,e);return mO(r)}function yO(t,e={}){const r=sM.encode(t);return typeof e.size=="number"?(rd(r,{size:e.size}),td(r,{dir:"right",size:e.size})):r}function A1(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function cM(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Hv(t,...e){if(!cM(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function C1(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function uM(t,e){Hv(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Ug=BigInt(2**32-1),S1=BigInt(32);function lM(t,e=!1){return e?{h:Number(t&Ug),l:Number(t>>S1&Ug)}:{h:Number(t>>S1&Ug)|0,l:Number(t&Ug)|0}}function hM(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=lM(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const dM=(t,e,r)=>t<<r|e>>>32-r,fM=(t,e,r)=>e<<r|t>>>32-r,pM=(t,e,r)=>e<<r-32|t>>>64-r,gM=(t,e,r)=>t<<r-32|e>>>64-r;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function mM(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}const I1=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function yM(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function N1(t){for(let e=0;e<t.length;e++)t[e]=yM(t[e])}function wM(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function wO(t){return typeof t=="string"&&(t=wM(t)),Hv(t),t}let bM=class{clone(){return this._cloneInto()}};function EM(t){const e=n=>t().update(wO(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}const bO=[],EO=[],vO=[],vM=BigInt(0),Td=BigInt(1),_M=BigInt(2),AM=BigInt(7),CM=BigInt(256),SM=BigInt(113);for(let t=0,e=Td,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],bO.push(2*(5*n+r)),EO.push((t+1)*(t+2)/2%64);let s=vM;for(let i=0;i<7;i++)e=(e<<Td^(e>>AM)*SM)%CM,e&_M&&(s^=Td<<(Td<<BigInt(i))-Td);vO.push(s)}const[IM,NM]=hM(vO,!0),T1=(t,e,r)=>r>32?pM(t,e,r):dM(t,e,r),O1=(t,e,r)=>r>32?gM(t,e,r):fM(t,e,r);function TM(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],h=T1(u,l,1)^r[a],d=O1(u,l,1)^r[a+1];for(let f=0;f<50;f+=10)t[o+f]^=h,t[o+f+1]^=d}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=EO[o],c=T1(s,i,a),u=O1(s,i,a),l=bO[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=IM[n],t[1]^=NM[n]}r.fill(0)}let OM=class _O extends bM{constructor(e,r,n,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,A1(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=mM(this.state)}keccak(){I1||N1(this.state32),TM(this.state32,this.rounds),I1||N1(this.state32),this.posOut=0,this.pos=0}update(e){C1(this);const{blockLen:r,state:n}=this;e=wO(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){C1(this,!1),Hv(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return A1(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(uM(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new _O(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const xM=(t,e,r)=>EM(()=>new OM(e,t,r)),PM=xM(1,136,256/8);function AO(t,e){const r=e||"hex",n=PM(Sf(t,{strict:!1})?iM(t):t);return r==="bytes"?n:jb(n)}let RM=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}};const c0=new RM(8192);function kM(t,e){if(c0.has(`${t}.${e}`))return c0.get(`${t}.${e}`);const r=t.substring(2).toLowerCase(),n=AO(yO(r),"bytes"),s=r.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(n[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return c0.set(`${t}.${e}`,i),i}function DM(t){const e=AO(`0x${t.substring(4)}`).substring(26);return kM(`0x${e}`)}async function UM({hash:t,signature:e}){const r=Sf(t)?t:jb(t),{secp256k1:n}=await ls(async()=>{const{secp256k1:o}=await import("./secp256k1-CawA04_n.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:u,s:l,v:h,yParity:d}=e,f=Number(d??h),p=x1(f);return new n.Signature(Fb(u),Fb(l)).addRecoveryBit(p)}const o=Sf(e)?e:jb(e),a=X8(`0x${o.slice(130)}`),c=x1(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function x1(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function BM({hash:t,signature:e}){return DM(await UM({hash:t,signature:e}))}function LM(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<t.length;u++){const l=t.charAt(u),h=l.charCodeAt(0);if(e[h]!==255)throw new TypeError(l+" is ambiguous");e[h]=u}const r=t.length,n=t.charAt(0),s=Math.log(r)/Math.log(256),i=Math.log(256)/Math.log(r);function o(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let l=0,h=0,d=0;const f=u.length;for(;d!==f&&u[d]===0;)d++,l++;const p=(f-d)*i+1>>>0,g=new Uint8Array(p);for(;d!==f;){let v=u[d],_=0;for(let S=p-1;(v!==0||_<h)&&S!==-1;S--,_++)v+=256*g[S]>>>0,g[S]=v%r>>>0,v=v/r>>>0;if(v!==0)throw new Error("Non-zero carry");h=_,d++}let y=p-h;for(;y!==p&&g[y]===0;)y++;let b=n.repeat(l);for(;y<p;++y)b+=t.charAt(g[y]);return b}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let l=0,h=0,d=0;for(;u[l]===n;)h++,l++;const f=(u.length-l)*s+1>>>0,p=new Uint8Array(f);for(;l<u.length;){const v=u.charCodeAt(l);if(v>255)return;let _=e[v];if(_===255)return;let S=0;for(let N=f-1;(_!==0||S<d)&&N!==-1;N--,S++)_+=r*p[N]>>>0,p[N]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");d=S,l++}let g=f-d;for(;g!==f&&p[g]===0;)g++;const y=new Uint8Array(h+(f-g));let b=h;for(;g!==f;)y[b++]=p[g++];return y}function c(u){const l=a(u);if(l)return l;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var $M="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const CO=LM($M);function SO(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function cf(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const r=SO(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return r}function MM(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,b=0,v=p.length;b!==v&&p[b]===0;)b++,g++;for(var _=(v-b)*l+1>>>0,S=new Uint8Array(_);b!==v;){for(var N=p[b],A=0,x=_-1;(N!==0||A<y)&&x!==-1;x--,A++)N+=256*S[x]>>>0,S[x]=N%a>>>0,N=N/a>>>0;if(N!==0)throw new Error("Non-zero carry");y=A,b++}for(var P=_-y;P!==_&&S[P]===0;)P++;for(var R=c.repeat(g);P<_;++P)R+=t.charAt(S[P]);return R}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,b=0;p[g]===c;)y++,g++;for(var v=(p.length-g)*u+1>>>0,_=new Uint8Array(v);p[g];){var S=r[p.charCodeAt(g)];if(S===255)return;for(var N=0,A=v-1;(S!==0||N<b)&&A!==-1;A--,N++)S+=a*_[A]>>>0,_[A]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");b=N,g++}if(p[g]!==" "){for(var x=v-b;x!==v&&_[x]===0;)x++;for(var P=new Uint8Array(y+(v-x)),R=y;x!==v;)P[R++]=_[x++];return P}}}function f(p){var g=d(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var FM=MM,jM=FM;const HM=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},zM=t=>new TextEncoder().encode(t),qM=t=>new TextDecoder().decode(t);class WM{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class VM{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return IO(this,e)}}class GM{constructor(e){this.decoders=e}or(e){return IO(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const IO=(t,e)=>new GM({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class KM{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new WM(e,r,n),this.decoder=new VM(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Gy=({name:t,prefix:e,encode:r,decode:n})=>new KM(t,e,r,n),eg=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=jM(r,e);return Gy({prefix:t,name:e,encode:n,decode:i=>HM(s(i))})},JM=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const h=s[t[l]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},YM=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Lr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Gy({prefix:e,name:t,encode(s){return YM(s,n,r)},decode(s){return JM(s,n,r,t)}}),QM=Gy({prefix:"\0",name:"identity",encode:t=>qM(t),decode:t=>zM(t)}),ZM=Object.freeze(Object.defineProperty({__proto__:null,identity:QM},Symbol.toStringTag,{value:"Module"})),XM=Lr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),e5=Object.freeze(Object.defineProperty({__proto__:null,base2:XM},Symbol.toStringTag,{value:"Module"})),t5=Lr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),r5=Object.freeze(Object.defineProperty({__proto__:null,base8:t5},Symbol.toStringTag,{value:"Module"})),n5=eg({prefix:"9",name:"base10",alphabet:"0123456789"}),s5=Object.freeze(Object.defineProperty({__proto__:null,base10:n5},Symbol.toStringTag,{value:"Module"})),i5=Lr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),o5=Lr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),a5=Object.freeze(Object.defineProperty({__proto__:null,base16:i5,base16upper:o5},Symbol.toStringTag,{value:"Module"})),c5=Lr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),u5=Lr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),l5=Lr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),h5=Lr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),d5=Lr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),f5=Lr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),p5=Lr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),g5=Lr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),m5=Lr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),y5=Object.freeze(Object.defineProperty({__proto__:null,base32:c5,base32hex:d5,base32hexpad:p5,base32hexpadupper:g5,base32hexupper:f5,base32pad:l5,base32padupper:h5,base32upper:u5,base32z:m5},Symbol.toStringTag,{value:"Module"})),w5=eg({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),b5=eg({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),E5=Object.freeze(Object.defineProperty({__proto__:null,base36:w5,base36upper:b5},Symbol.toStringTag,{value:"Module"})),v5=eg({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),_5=eg({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),A5=Object.freeze(Object.defineProperty({__proto__:null,base58btc:v5,base58flickr:_5},Symbol.toStringTag,{value:"Module"})),C5=Lr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),S5=Lr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),I5=Lr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),N5=Lr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),T5=Object.freeze(Object.defineProperty({__proto__:null,base64:C5,base64pad:S5,base64url:I5,base64urlpad:N5},Symbol.toStringTag,{value:"Module"})),NO=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),O5=NO.reduce((t,e,r)=>(t[r]=e,t),[]),x5=NO.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function P5(t){return t.reduce((e,r)=>(e+=O5[r],e),"")}function R5(t){const e=[];for(const r of t){const n=x5[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const k5=Gy({prefix:"ðŸš€",name:"base256emoji",encode:P5,decode:R5}),D5=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:k5},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const P1={...ZM,...e5,...r5,...s5,...a5,...y5,...E5,...A5,...T5,...D5};function TO(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const R1=TO("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),u0=TO("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=SO(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),OO={utf8:R1,"utf-8":R1,hex:P1.base16,latin1:u0,ascii:u0,binary:u0,...P1};function vs(t,e="utf8"){const r=OO[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function An(t,e="utf8"){const r=OO[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}const U5={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var B5={};const L5=":";function El(t){const[e,r]=t.split(L5);return{namespace:e,reference:r}}function xO(t,e){return t.includes(":")?[t]:e.chains||[]}var $5=Object.defineProperty,M5=Object.defineProperties,F5=Object.getOwnPropertyDescriptors,k1=Object.getOwnPropertySymbols,j5=Object.prototype.hasOwnProperty,H5=Object.prototype.propertyIsEnumerable,D1=(t,e,r)=>e in t?$5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,U1=(t,e)=>{for(var r in e||(e={}))j5.call(e,r)&&D1(t,r,e[r]);if(k1)for(var r of k1(e))H5.call(e,r)&&D1(t,r,e[r]);return t},z5=(t,e)=>M5(t,F5(e));const q5="ReactNative",Wn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},W5="js";function qm(){return typeof kr<"u"&&typeof kr.versions<"u"&&typeof kr.versions.node<"u"}function ja(){return!tu.getDocument()&&!!tu.getNavigator()&&navigator.product===q5}function V5(){return ja()&&typeof _e<"u"&&typeof(_e==null?void 0:_e.Platform)<"u"&&(_e==null?void 0:_e.Platform.OS)==="android"}function G5(){return ja()&&typeof _e<"u"&&typeof(_e==null?void 0:_e.Platform)<"u"&&(_e==null?void 0:_e.Platform.OS)==="ios"}function tg(){return!qm()&&!!tu.getNavigator()&&!!tu.getDocument()}function rg(){return ja()?Wn.reactNative:qm()?Wn.node:tg()?Wn.browser:Wn.unknown}function B1(){var t;try{return ja()&&typeof _e<"u"&&typeof(_e==null?void 0:_e.Application)<"u"?(t=_e.Application)==null?void 0:t.applicationId:void 0}catch{return}}function K5(t,e){const r=new URLSearchParams(t);for(const n of Object.keys(e).sort())if(e.hasOwnProperty(n)){const s=e[n];s!==void 0&&r.set(n,s)}return r.toString()}function J5(t){var e,r;const n=PO();try{return t!=null&&t.url&&n.url&&t.url!==n.url&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),t.url=n.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),z5(U1(U1({},n),t),{url:(t==null?void 0:t.url)||n.url,name:(t==null?void 0:t.name)||n.name,description:(t==null?void 0:t.description)||n.description,icons:(r=t==null?void 0:t.icons)!=null&&r.length&&t.icons.length>0?t.icons:n.icons})}catch(s){return console.warn("Error populating app metadata",s),t||n}}function PO(){return K8.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function Y5(){if(rg()===Wn.reactNative&&typeof _e<"u"&&typeof(_e==null?void 0:_e.Platform)<"u"){const{OS:r,Version:n}=_e.Platform;return[r,n].join("-")}const t=j8();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Q5(){var t;const e=rg();return e===Wn.browser?[e,((t=tu.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function RO(t,e,r){const n=Y5(),s=Q5();return[[t,e].join("-"),[W5,r].join("-"),n,s].join("/")}function Z5({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const u=r.split("?"),l=RO(t,e,n),h={auth:s,ua:l,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},d=K5(u[1]||"",h);return u[0]+"?"+d}function dc(t,e){return t.filter(r=>e.includes(r)).length===t.length}function Hb(t){return Object.fromEntries(t.entries())}function zb(t){return new Map(Object.entries(t))}function Za(t=ae.FIVE_MINUTES,e){const r=ae.toMiliseconds(t||ae.FIVE_MINUTES);let n,s,i,o;return{resolve:a=>{i&&n&&(clearTimeout(i),n(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const u=new Error(e);o=Promise.reject(u),c(u)},r),n=a,s=c})}}function _a(t,e,r){return new Promise(async(n,s)=>{const i=setTimeout(()=>s(new Error(r)),e);try{const o=await t;n(o)}catch(o){s(o)}clearTimeout(i)})}function kO(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function X5(t){return kO("topic",t)}function eF(t){return kO("id",t)}function DO(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function cr(t,e){return ae.fromMiliseconds(Date.now()+ae.toMiliseconds(t))}function Yo(t){return Date.now()>=ae.toMiliseconds(t)}function it(t,e){return`${t}${e?`:${e}`:""}`}function ym(t=[],e=[]){return[...new Set([...t,...e])]}async function tF({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const s=typeof r=="string"?JSON.parse(r):r,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=rF(i,t,e),a=rg();if(a===Wn.browser){if(!((n=tu.getDocument())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}nF(o)}else a===Wn.reactNative&&typeof(_e==null?void 0:_e.Linking)<"u"&&await _e.Linking.openURL(o)}catch(s){console.error(s)}}function rF(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${aF(n,!0)}`}else s=`${s}/wc?${n}`;return s}function nF(t){let e="_self";oF()?e="_top":(iF()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function sF(t,e){let r="";try{if(tg()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function L1(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function $1(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function zv(){return typeof kr<"u"&&B5.IS_VITEST==="true"}function iF(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function oF(){try{return window.self!==window.top}catch{return!1}}function aF(t,e=!1){const r=vr.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function UO(t){return vr.from(t,"base64").toString("utf-8")}function cF(t){return new Promise(e=>setTimeout(e,t))}function If(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function uF(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ng(t,...e){if(!uF(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function qv(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");If(t.outputLen),If(t.blockLen)}function wh(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function BO(t,e){ng(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Bg=BigInt(2**32-1),M1=BigInt(32);function lF(t,e=!1){return e?{h:Number(t&Bg),l:Number(t>>M1&Bg)}:{h:Number(t>>M1&Bg)|0,l:Number(t&Bg)|0}}function hF(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=lF(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const dF=(t,e,r)=>t<<r|e>>>32-r,fF=(t,e,r)=>e<<r|t>>>32-r,pF=(t,e,r)=>e<<r-32|t>>>64-r,gF=(t,e,r)=>t<<r-32|e>>>64-r,Lu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function mF(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function l0(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ai(t,e){return t<<32-e|t>>>e}const F1=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function yF(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function j1(t){for(let e=0;e<t.length;e++)t[e]=yF(t[e])}function wF(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function bh(t){return typeof t=="string"&&(t=wF(t)),ng(t),t}function bF(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];ng(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}let Wv=class{clone(){return this._cloneInto()}};function LO(t){const e=n=>t().update(bh(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function nd(t=32){if(Lu&&typeof Lu.getRandomValues=="function")return Lu.getRandomValues(new Uint8Array(t));if(Lu&&typeof Lu.randomBytes=="function")return Lu.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const $O=[],MO=[],FO=[],EF=BigInt(0),Od=BigInt(1),vF=BigInt(2),_F=BigInt(7),AF=BigInt(256),CF=BigInt(113);for(let t=0,e=Od,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],$O.push(2*(5*n+r)),MO.push((t+1)*(t+2)/2%64);let s=EF;for(let i=0;i<7;i++)e=(e<<Od^(e>>_F)*CF)%AF,e&vF&&(s^=Od<<(Od<<BigInt(i))-Od);FO.push(s)}const[SF,IF]=hF(FO,!0),H1=(t,e,r)=>r>32?pF(t,e,r):dF(t,e,r),z1=(t,e,r)=>r>32?gF(t,e,r):fF(t,e,r);function NF(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],h=H1(u,l,1)^r[a],d=z1(u,l,1)^r[a+1];for(let f=0;f<50;f+=10)t[o+f]^=h,t[o+f+1]^=d}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=MO[o],c=H1(s,i,a),u=z1(s,i,a),l=$O[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=SF[n],t[1]^=IF[n]}r.fill(0)}let TF=class jO extends Wv{constructor(e,r,n,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,If(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=mF(this.state)}keccak(){F1||j1(this.state32),NF(this.state32,this.rounds),F1||j1(this.state32),this.posOut=0,this.pos=0}update(e){wh(this);const{blockLen:r,state:n}=this;e=bh(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){wh(this,!1),ng(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return If(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(BO(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new jO(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const OF=(t,e,r)=>LO(()=>new TF(e,t,r)),xF=OF(1,136,256/8),PF="https://rpc.walletconnect.org/v1";function HO(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+vr.from(xF(r)).toString("hex")}async function RF(t,e,r,n,s,i){switch(r.t){case"eip191":return await kF(t,e,r.s);case"eip1271":return await DF(t,e,r.s,n,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function kF(t,e,r){return(await BM({hash:HO(e),signature:r})).toLowerCase()===t.toLowerCase()}async function DF(t,e,r,n,s,i){const o=El(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",u="0000000000000000000000000000000000000000000000000000000000000041",l=r.substring(2),h=HO(e).substring(2),d=a+h+c+u+l,f=await fetch(`${i||PF}/?chainId=${n}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:UF(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:d},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function UF(){return Date.now()+Math.floor(Math.random()*1e3)}function BF(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const s=1+n*64;if(r.length<s)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const i=vr.from(t,"base64").slice(1,65);return CO.encode(i)}var LF=Object.defineProperty,$F=Object.defineProperties,MF=Object.getOwnPropertyDescriptors,q1=Object.getOwnPropertySymbols,FF=Object.prototype.hasOwnProperty,jF=Object.prototype.propertyIsEnumerable,W1=(t,e,r)=>e in t?LF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,HF=(t,e)=>{for(var r in e||(e={}))FF.call(e,r)&&W1(t,r,e[r]);if(q1)for(var r of q1(e))jF.call(e,r)&&W1(t,r,e[r]);return t},zF=(t,e)=>$F(t,MF(e));const qF="did:pkh:",Vv=t=>t==null?void 0:t.split(":"),WF=t=>{const e=t&&Vv(t);if(e)return t.includes(qF)?e[3]:e[1]},qb=t=>{const e=t&&Vv(t);if(e)return e[2]+":"+e[3]},Wm=t=>{const e=t&&Vv(t);if(e)return e.pop()};async function V1(t){const{cacao:e,projectId:r}=t,{s:n,p:s}=e,i=zO(s,s.iss),o=Wm(s.iss);return await RF(o,i,n,qb(s.iss),r)}const zO=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=Wm(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${WF(e)}`,c=`Nonce: ${t.nonce}`,u=`Issued At: ${t.iat}`,l=t.exp?`Expiration Time: ${t.exp}`:void 0,h=t.nbf?`Not Before: ${t.nbf}`:void 0,d=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=wm(t.resources);if(p){const g=Nf(p);s=e4(s,g)}return[r,n,"",s,"",i,o,a,c,u,l,h,d,f].filter(g=>g!=null).join(`
`)};function VF(t){return vr.from(JSON.stringify(t)).toString("base64")}function GF(t){return JSON.parse(vr.from(t,"base64").toString("utf-8"))}function ru(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(s=>{const i=n[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function KF(t,e,r,n={}){return r==null||r.sort((s,i)=>s.localeCompare(i)),{att:{[t]:JF(e,r,n)}}}function JF(t,e,r={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const n=e.map(s=>({[`${t}/${s}`]:[r]}));return Object.assign({},...n)}function qO(t){return ru(t),`urn:recap:${VF(t).replace(/=/g,"")}`}function Nf(t){const e=GF(t.replace("urn:recap:",""));return ru(e),e}function YF(t,e,r){const n=KF(t,e,r);return qO(n)}function QF(t){return t&&t.includes("urn:recap:")}function ZF(t,e){const r=Nf(t),n=Nf(e),s=XF(r,n);return qO(s)}function XF(t,e){ru(t),ru(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),n={att:{}};return r.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,u;n.att[s]=zF(HF({},n.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((u=e.att[s])==null?void 0:u[a])})})}),n}function e4(t="",e){ru(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(h=>({ability:h.split("/")[0],action:h.split("/")[1]}));c.sort((h,d)=>h.action.localeCompare(d.action));const u={};c.forEach(h=>{u[h.ability]||(u[h.ability]=[]),u[h.ability].push(h.action)});const l=Object.keys(u).map(h=>(s++,`(${s}) '${h}': '${u[h].join("', '")}' for '${a}'.`));n.push(l.join(", ").replace(".,","."))});const i=n.join(" "),o=`${r}${i}`;return`${t?t+" ":""}${o}`}function G1(t){var e;const r=Nf(t);ru(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(s=>s.split("/")[1]):[]}function K1(t){const e=Nf(t);ru(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&r.push(s[0].chains)})}),[...new Set(r.flat())]}function wm(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return QF(e)?e:void 0}function h0(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function WO(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function jn(t,...e){if(!WO(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function J1(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function t4(t,e){jn(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Y1(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const Sa=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),r4=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),n4=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!n4)throw new Error("Non little-endian hardware is not supported");function s4(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Wb(t){if(typeof t=="string")t=s4(t);else if(WO(t))t=Vb(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function i4(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function o4(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const a4=(t,e)=>{function r(n,...s){if(jn(n),t.nonceLength!==void 0){const u=s[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?jn(u):jn(u,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&jn(s[1]);const o=e(n,...s),a=(u,l)=>{if(l!==void 0){if(u!==2)throw new Error("cipher output not supported");jn(l)}};let c=!1;return{encrypt(u,l){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,jn(u),a(o.encrypt.length,l),o.encrypt(u,l)},decrypt(u,l){if(jn(u),i&&u.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,l),o.decrypt(u,l)}}}return Object.assign(r,t),r};function Q1(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!c4(e))throw new Error("invalid output, must be aligned");return e}function Z1(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i);t.setUint32(e+4,o,n),t.setUint32(e+0,a,n)}function c4(t){return t.byteOffset%4===0}function Vb(t){return Uint8Array.from(t)}function Eh(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const VO=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),u4=VO("expand 16-byte k"),l4=VO("expand 32-byte k"),h4=Sa(u4),d4=Sa(l4);function Ze(t,e){return t<<e|t>>>32-e}function Gb(t){return t.byteOffset%4===0}const Lg=64,f4=16,GO=2**32-1,X1=new Uint32Array;function p4(t,e,r,n,s,i,o,a){const c=s.length,u=new Uint8Array(Lg),l=Sa(u),h=Gb(s)&&Gb(i),d=h?Sa(s):X1,f=h?Sa(i):X1;for(let p=0;p<c;o++){if(t(e,r,n,l,o,a),o>=GO)throw new Error("arx: counter overflow");const g=Math.min(Lg,c-p);if(h&&g===Lg){const y=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let b=0,v;b<f4;b++)v=y+b,f[v]=d[v]^l[b];p+=Lg;continue}for(let y=0,b;y<g;y++)b=p+y,i[b]=s[b]^u[y];p+=g}}function g4(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:s,counterRight:i,rounds:o}=i4({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return h0(s),h0(o),Y1(i),Y1(r),(a,c,u,l,h=0)=>{jn(a),jn(c),jn(u);const d=u.length;if(l===void 0&&(l=new Uint8Array(d)),jn(l),h0(h),h<0||h>=GO)throw new Error("arx: counter overflow");if(l.length<d)throw new Error(`arx: output (${l.length}) is shorter than data (${d})`);const f=[];let p=a.length,g,y;if(p===32)f.push(g=Vb(a)),y=d4;else if(p===16&&r)g=new Uint8Array(32),g.set(a),g.set(a,16),y=h4,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);Gb(c)||f.push(c=Vb(c));const b=Sa(g);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(y,b,Sa(c.subarray(0,16)),b),c=c.subarray(16)}const v=16-s;if(v!==c.length)throw new Error(`arx: nonce must be ${v} or 16 bytes`);if(v!==12){const S=new Uint8Array(12);S.set(c,i?0:12-c.length),c=S,f.push(c)}const _=Sa(c);return p4(t,y,b,_,u,l,h,o),Eh(...f),l}}const Ar=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class m4{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Wb(e),jn(e,32);const r=Ar(e,0),n=Ar(e,2),s=Ar(e,4),i=Ar(e,6),o=Ar(e,8),a=Ar(e,10),c=Ar(e,12),u=Ar(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=Ar(e,16+2*l)}process(e,r,n=!1){const s=n?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],u=o[2],l=o[3],h=o[4],d=o[5],f=o[6],p=o[7],g=o[8],y=o[9],b=Ar(e,r+0),v=Ar(e,r+2),_=Ar(e,r+4),S=Ar(e,r+6),N=Ar(e,r+8),A=Ar(e,r+10),x=Ar(e,r+12),P=Ar(e,r+14);let R=i[0]+(b&8191),B=i[1]+((b>>>13|v<<3)&8191),$=i[2]+((v>>>10|_<<6)&8191),K=i[3]+((_>>>7|S<<9)&8191),te=i[4]+((S>>>4|N<<12)&8191),H=i[5]+(N>>>1&8191),C=i[6]+((N>>>14|A<<2)&8191),T=i[7]+((A>>>11|x<<5)&8191),L=i[8]+((x>>>8|P<<8)&8191),z=i[9]+(P>>>5|s),j=0,W=j+R*a+B*(5*y)+$*(5*g)+K*(5*p)+te*(5*f);j=W>>>13,W&=8191,W+=H*(5*d)+C*(5*h)+T*(5*l)+L*(5*u)+z*(5*c),j+=W>>>13,W&=8191;let re=j+R*c+B*a+$*(5*y)+K*(5*g)+te*(5*p);j=re>>>13,re&=8191,re+=H*(5*f)+C*(5*d)+T*(5*h)+L*(5*l)+z*(5*u),j+=re>>>13,re&=8191;let ne=j+R*u+B*c+$*a+K*(5*y)+te*(5*g);j=ne>>>13,ne&=8191,ne+=H*(5*p)+C*(5*f)+T*(5*d)+L*(5*h)+z*(5*l),j+=ne>>>13,ne&=8191;let le=j+R*l+B*u+$*c+K*a+te*(5*y);j=le>>>13,le&=8191,le+=H*(5*g)+C*(5*p)+T*(5*f)+L*(5*d)+z*(5*h),j+=le>>>13,le&=8191;let Z=j+R*h+B*l+$*u+K*c+te*a;j=Z>>>13,Z&=8191,Z+=H*(5*y)+C*(5*g)+T*(5*p)+L*(5*f)+z*(5*d),j+=Z>>>13,Z&=8191;let he=j+R*d+B*h+$*l+K*u+te*c;j=he>>>13,he&=8191,he+=H*a+C*(5*y)+T*(5*g)+L*(5*p)+z*(5*f),j+=he>>>13,he&=8191;let Se=j+R*f+B*d+$*h+K*l+te*u;j=Se>>>13,Se&=8191,Se+=H*c+C*a+T*(5*y)+L*(5*g)+z*(5*p),j+=Se>>>13,Se&=8191;let je=j+R*p+B*f+$*d+K*h+te*l;j=je>>>13,je&=8191,je+=H*u+C*c+T*a+L*(5*y)+z*(5*g),j+=je>>>13,je&=8191;let qe=j+R*g+B*p+$*f+K*d+te*h;j=qe>>>13,qe&=8191,qe+=H*l+C*u+T*c+L*a+z*(5*y),j+=qe>>>13,qe&=8191;let Re=j+R*y+B*g+$*p+K*f+te*d;j=Re>>>13,Re&=8191,Re+=H*h+C*l+T*u+L*c+z*a,j+=Re>>>13,Re&=8191,j=(j<<2)+j|0,j=j+W|0,W=j&8191,j=j>>>13,re+=j,i[0]=W,i[1]=re,i[2]=ne,i[3]=le,i[4]=Z,i[5]=he,i[6]=Se,i[7]=je,i[8]=qe,i[9]=Re}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,n[0]=e[0]+5,s=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+s,s=n[a]>>>13,n[a]&=8191;n[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)n[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;Eh(n)}update(e){J1(this);const{buffer:r,blockLen:n}=this;e=Wb(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);if(o===n){for(;n<=s-i;i+=n)this.process(e,i);continue}r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){Eh(this.h,this.r,this.buffer,this.pad)}digestInto(e){J1(this),t4(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:s}=this;if(s){for(r[s++]=1;s<16;s++)r[s]=0;this.process(r,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}}function y4(t){const e=(n,s)=>t(s).update(Wb(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const w4=y4(t=>new m4(t));function b4(t,e,r,n,s,i=20){let o=t[0],a=t[1],c=t[2],u=t[3],l=e[0],h=e[1],d=e[2],f=e[3],p=e[4],g=e[5],y=e[6],b=e[7],v=s,_=r[0],S=r[1],N=r[2],A=o,x=a,P=c,R=u,B=l,$=h,K=d,te=f,H=p,C=g,T=y,L=b,z=v,j=_,W=S,re=N;for(let le=0;le<i;le+=2)A=A+B|0,z=Ze(z^A,16),H=H+z|0,B=Ze(B^H,12),A=A+B|0,z=Ze(z^A,8),H=H+z|0,B=Ze(B^H,7),x=x+$|0,j=Ze(j^x,16),C=C+j|0,$=Ze($^C,12),x=x+$|0,j=Ze(j^x,8),C=C+j|0,$=Ze($^C,7),P=P+K|0,W=Ze(W^P,16),T=T+W|0,K=Ze(K^T,12),P=P+K|0,W=Ze(W^P,8),T=T+W|0,K=Ze(K^T,7),R=R+te|0,re=Ze(re^R,16),L=L+re|0,te=Ze(te^L,12),R=R+te|0,re=Ze(re^R,8),L=L+re|0,te=Ze(te^L,7),A=A+$|0,re=Ze(re^A,16),T=T+re|0,$=Ze($^T,12),A=A+$|0,re=Ze(re^A,8),T=T+re|0,$=Ze($^T,7),x=x+K|0,z=Ze(z^x,16),L=L+z|0,K=Ze(K^L,12),x=x+K|0,z=Ze(z^x,8),L=L+z|0,K=Ze(K^L,7),P=P+te|0,j=Ze(j^P,16),H=H+j|0,te=Ze(te^H,12),P=P+te|0,j=Ze(j^P,8),H=H+j|0,te=Ze(te^H,7),R=R+B|0,W=Ze(W^R,16),C=C+W|0,B=Ze(B^C,12),R=R+B|0,W=Ze(W^R,8),C=C+W|0,B=Ze(B^C,7);let ne=0;n[ne++]=o+A|0,n[ne++]=a+x|0,n[ne++]=c+P|0,n[ne++]=u+R|0,n[ne++]=l+B|0,n[ne++]=h+$|0,n[ne++]=d+K|0,n[ne++]=f+te|0,n[ne++]=p+H|0,n[ne++]=g+C|0,n[ne++]=y+T|0,n[ne++]=b+L|0,n[ne++]=v+z|0,n[ne++]=_+j|0,n[ne++]=S+W|0,n[ne++]=N+re|0}const E4=g4(b4,{counterRight:!1,counterLength:4,allowShortKeys:!1}),v4=new Uint8Array(16),eC=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(v4.subarray(r))},_4=new Uint8Array(32);function tC(t,e,r,n,s){const i=t(e,r,_4),o=w4.create(i);s&&eC(o,s),eC(o,n);const a=new Uint8Array(16),c=r4(a);Z1(c,0,BigInt(s?s.length:0),!0),Z1(c,8,BigInt(n.length),!0),o.update(a);const u=o.digest();return Eh(i,a),u}const A4=t=>(e,r,n)=>({encrypt(s,i){const o=s.length;i=Q1(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,r,a,a,1);const c=tC(t,e,r,a,n);return i.set(c,o),Eh(c),i},decrypt(s,i){i=Q1(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=tC(t,e,r,o,n);if(!o4(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,r,i,i,1),Eh(c),i}}),KO=a4({blockSize:64,nonceLength:12,tagLength:16},A4(E4));let JO=class extends Wv{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,qv(e);const n=bh(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return wh(this),this.iHash.update(e),this}digestInto(e){wh(this),ng(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Ky=(t,e,r)=>new JO(t,e).update(r).digest();Ky.create=(t,e)=>new JO(t,e);function C4(t,e,r){return qv(t),r===void 0&&(r=new Uint8Array(t.outputLen)),Ky(t,bh(r),bh(e))}const d0=new Uint8Array([0]),rC=new Uint8Array;function S4(t,e,r,n=32){if(qv(t),If(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(n/t.outputLen);r===void 0&&(r=rC);const i=new Uint8Array(s*t.outputLen),o=Ky.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let u=0;u<s;u++)d0[0]=u+1,a.update(u===0?rC:c).update(r).update(d0).digestInto(c),i.set(c,t.outputLen*u),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),d0.fill(0),i.slice(0,n)}const I4=(t,e,r,n,s)=>S4(t,C4(t,e,r),n,s);function N4(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}function T4(t,e,r){return t&e^~t&r}function O4(t,e,r){return t&e^t&r^e&r}let x4=class extends Wv{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=l0(this.buffer)}update(e){wh(this);const{view:r,buffer:n,blockLen:s}=this;e=bh(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=l0(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){wh(this),BO(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let h=o;h<s;h++)r[h]=0;N4(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=l0(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,l[h],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};const P4=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),jo=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ho=new Uint32Array(64);class R4 extends x4{constructor(){super(64,32,8,!1),this.A=jo[0]|0,this.B=jo[1]|0,this.C=jo[2]|0,this.D=jo[3]|0,this.E=jo[4]|0,this.F=jo[5]|0,this.G=jo[6]|0,this.H=jo[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)Ho[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const d=Ho[h-15],f=Ho[h-2],p=ai(d,7)^ai(d,18)^d>>>3,g=ai(f,17)^ai(f,19)^f>>>10;Ho[h]=g+Ho[h-7]+p+Ho[h-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let h=0;h<64;h++){const d=ai(a,6)^ai(a,11)^ai(a,25),f=l+d+T4(a,c,u)+P4[h]+Ho[h]|0,p=(ai(n,2)^ai(n,13)^ai(n,22))+O4(n,s,i)|0;l=u,u=c,c=a,a=o+f|0,o=i,i=s,s=n,n=f+p|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){Ho.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sg=LO(()=>new R4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Jy=BigInt(0),Yy=BigInt(1),k4=BigInt(2);function nu(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ig(t){if(!nu(t))throw new Error("Uint8Array expected")}function vh(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const D4=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function _h(t){ig(t);let e="";for(let r=0;r<t.length;r++)e+=D4[t[r]];return e}function dl(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Gv(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Jy:BigInt("0x"+t)}const Ki={_0:48,_9:57,A:65,F:70,a:97,f:102};function nC(t){if(t>=Ki._0&&t<=Ki._9)return t-Ki._0;if(t>=Ki.A&&t<=Ki.F)return t-(Ki.A-10);if(t>=Ki.a&&t<=Ki.f)return t-(Ki.a-10)}function Ah(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=nC(t.charCodeAt(i)),a=nC(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function qc(t){return Gv(_h(t))}function Tf(t){return ig(t),Gv(_h(Uint8Array.from(t).reverse()))}function Ch(t,e){return Ah(t.toString(16).padStart(e*2,"0"))}function Qy(t,e){return Ch(t,e).reverse()}function U4(t){return Ah(dl(t))}function Fn(t,e,r){let n;if(typeof e=="string")try{n=Ah(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(nu(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function Of(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];ig(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}function B4(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function L4(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const f0=t=>typeof t=="bigint"&&Jy<=t;function Zy(t,e,r){return f0(t)&&f0(e)&&f0(r)&&e<=t&&t<r}function Ao(t,e,r,n){if(!Zy(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function YO(t){let e;for(e=0;t>Jy;t>>=Yy,e+=1);return e}function $4(t,e){return t>>BigInt(e)&Yy}function M4(t,e,r){return t|(r?Yy:Jy)<<BigInt(e)}const Kv=t=>(k4<<BigInt(t-1))-Yy,p0=t=>new Uint8Array(t),sC=t=>Uint8Array.from(t);function QO(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=p0(t),s=p0(t),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...l)=>r(s,n,...l),c=(l=p0())=>{s=a(sC([0]),l),n=a(),l.length!==0&&(s=a(sC([1]),l),n=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const h=[];for(;l<e;){n=a();const d=n.slice();h.push(d),l+=n.length}return Of(...h)};return(l,h)=>{o(),c(l);let d;for(;!(d=h(u()));)c();return o(),d}}const F4={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||nu(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function sd(t,e,r={}){const n=(s,i,o)=>{const a=F4[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}const j4=()=>{throw new Error("not implemented")};function Kb(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}var H4=Object.freeze({__proto__:null,isBytes:nu,abytes:ig,abool:vh,bytesToHex:_h,numberToHexUnpadded:dl,hexToNumber:Gv,hexToBytes:Ah,bytesToNumberBE:qc,bytesToNumberLE:Tf,numberToBytesBE:Ch,numberToBytesLE:Qy,numberToVarBytesBE:U4,ensureBytes:Fn,concatBytes:Of,equalBytes:B4,utf8ToBytes:L4,inRange:Zy,aInRange:Ao,bitLen:YO,bitGet:$4,bitSet:M4,bitMask:Kv,createHmacDrbg:QO,validateObject:sd,notImplemented:j4,memoized:Kb});const br=BigInt(0),Yt=BigInt(1),sc=BigInt(2),z4=BigInt(3),Jb=BigInt(4),iC=BigInt(5),oC=BigInt(8);function En(t,e){const r=t%e;return r>=br?r:e+r}function ZO(t,e,r){if(e<br)throw new Error("invalid exponent, negatives unsupported");if(r<=br)throw new Error("invalid modulus");if(r===Yt)return br;let n=Yt;for(;e>br;)e&Yt&&(n=n*t%r),t=t*t%r,e>>=Yt;return n}function ks(t,e,r){let n=t;for(;e-- >br;)n*=n,n%=r;return n}function Yb(t,e){if(t===br)throw new Error("invert: expected non-zero number");if(e<=br)throw new Error("invert: expected positive modulus, got "+e);let r=En(t,e),n=e,s=br,i=Yt;for(;r!==br;){const o=n/r,a=n%r,c=s-i*o;n=r,r=a,s=i,i=c}if(n!==Yt)throw new Error("invert: does not exist");return En(s,e)}function q4(t){const e=(t-Yt)/sc;let r,n,s;for(r=t-Yt,n=0;r%sc===br;r/=sc,n++);for(s=sc;s<t&&ZO(s,e,t)!==t-Yt;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+Yt)/Jb;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(r+Yt)/sc;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,u=o.pow(o.mul(o.ONE,s),r),l=o.pow(a,i),h=o.pow(a,r);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let d=1;for(let p=o.sqr(h);d<c&&!o.eql(p,o.ONE);d++)p=o.sqr(p);const f=o.pow(u,Yt<<BigInt(c-d-1));u=o.sqr(f),l=o.mul(l,f),h=o.mul(h,u),c=d}return l}}function W4(t){if(t%Jb===z4){const e=(t+Yt)/Jb;return function(r,n){const s=r.pow(n,e);if(!r.eql(r.sqr(s),n))throw new Error("Cannot find square root");return s}}if(t%oC===iC){const e=(t-iC)/oC;return function(r,n){const s=r.mul(n,sc),i=r.pow(s,e),o=r.mul(n,i),a=r.mul(r.mul(o,sc),i),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return q4(t)}const V4=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function G4(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=V4.reduce((n,s)=>(n[s]="function",n),e);return sd(t,r)}function K4(t,e,r){if(r<br)throw new Error("invalid exponent, negatives unsupported");if(r===br)return t.ONE;if(r===Yt)return e;let n=t.ONE,s=e;for(;r>br;)r&Yt&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Yt;return n}function J4(t,e){const r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function XO(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function ex(t,e,r=!1,n={}){if(t<=br)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=XO(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:s,BYTES:i,MASK:Kv(s),ZERO:br,ONE:Yt,create:c=>En(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return br<=c&&c<t},is0:c=>c===br,isOdd:c=>(c&Yt)===Yt,neg:c=>En(-c,t),eql:(c,u)=>c===u,sqr:c=>En(c*c,t),add:(c,u)=>En(c+u,t),sub:(c,u)=>En(c-u,t),mul:(c,u)=>En(c*u,t),pow:(c,u)=>K4(a,c,u),div:(c,u)=>En(c*Yb(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Yb(c,t),sqrt:n.sqrt||(c=>(o||(o=W4(t)),o(a,c))),invertBatch:c=>J4(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>r?Qy(c,i):Ch(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return r?Tf(c):qc(c)}});return Object.freeze(a)}function tx(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function rx(t){const e=tx(t);return e+Math.ceil(e/2)}function Y4(t,e,r=!1){const n=t.length,s=tx(e),i=rx(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=r?Tf(t):qc(t),a=En(o,e-Yt)+Yt;return r?Qy(a,s):Ch(a,s)}const aC=BigInt(0),$g=BigInt(1);function g0(t,e){const r=e.negate();return t?r:e}function nx(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function m0(t,e){nx(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function Q4(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function Z4(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const y0=new WeakMap,sx=new WeakMap;function w0(t){return sx.get(t)||1}function X4(t,e){return{constTimeNegate:g0,hasPrecomputes(r){return w0(r)!==1},unsafeLadder(r,n,s=t.ZERO){let i=r;for(;n>aC;)n&$g&&(s=s.add(i)),i=i.double(),n>>=$g;return s},precomputeWindow(r,n){const{windows:s,windowSize:i}=m0(n,e),o=[];let a=r,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,s){const{windows:i,windowSize:o}=m0(r,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**r-1),l=2**r,h=BigInt(r);for(let d=0;d<i;d++){const f=d*o;let p=Number(s&u);s>>=h,p>o&&(p-=l,s+=$g);const g=f,y=f+Math.abs(p)-1,b=d%2!==0,v=p<0;p===0?c=c.add(g0(b,n[g])):a=a.add(g0(v,n[y]))}return{p:a,f:c}},wNAFUnsafe(r,n,s,i=t.ZERO){const{windows:o,windowSize:a}=m0(r,e),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let h=0;h<o;h++){const d=h*a;if(s===aC)break;let f=Number(s&c);if(s>>=l,f>a&&(f-=u,s+=$g),f===0)continue;let p=n[d+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(r,n,s){let i=y0.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&y0.set(n,s(i))),i},wNAFCached(r,n,s){const i=w0(r);return this.wNAF(i,this.getPrecomputes(i,r,s),n)},wNAFCachedUnsafe(r,n,s,i){const o=w0(r);return o===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,r,s),n,i)},setWindowSize(r,n){nx(n,e),sx.set(r,n),y0.delete(r)}}}function e6(t,e,r,n){if(Q4(r,t),Z4(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=YO(BigInt(r.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),u=Math.floor((e.BITS-1)/o)*o;let l=s;for(let h=u;h>=0;h-=o){c.fill(s);for(let f=0;f<n.length;f++){const p=n[f],g=Number(p>>BigInt(h)&BigInt(a));c[g]=c[g].add(r[f])}let d=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),d=d.add(p);if(l=l.add(d),h!==0)for(let f=0;f<o;f++)l=l.double()}return l}function ix(t){return G4(t.Fp),sd(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...XO(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const $u=BigInt(0),b0=BigInt(1);function t6(t){return sd(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function r6(t){const e=t6(t),{P:r}=e,n=v=>En(v,r),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(v=>v),c=e.powPminus2||(v=>ZO(v,r-BigInt(2),r));function u(v,_,S){const N=n(v*(_-S));return _=n(_-N),S=n(S+N),[_,S]}const l=(e.a-BigInt(2))/BigInt(4);function h(v,_){Ao("u",v,$u,r),Ao("scalar",_,$u,r);const S=_,N=v;let A=b0,x=$u,P=v,R=b0,B=$u,$;for(let te=BigInt(s-1);te>=$u;te--){const H=S>>te&b0;B^=H,$=u(B,A,P),A=$[0],P=$[1],$=u(B,x,R),x=$[0],R=$[1],B=H;const C=A+x,T=n(C*C),L=A-x,z=n(L*L),j=T-z,W=P+R,re=P-R,ne=n(re*C),le=n(W*L),Z=ne+le,he=ne-le;P=n(Z*Z),R=n(N*n(he*he)),A=n(T*z),x=n(j*(T+n(l*j)))}$=u(B,A,P),A=$[0],P=$[1],$=u(B,x,R),x=$[0],R=$[1];const K=c(x);return n(A*K)}function d(v){return Qy(n(v),i)}function f(v){const _=Fn("u coordinate",v,i);return o===32&&(_[31]&=127),Tf(_)}function p(v){const _=Fn("scalar",v),S=_.length;if(S!==i&&S!==o){let N=""+i+" or "+o;throw new Error("invalid scalar, expected "+N+" bytes, got "+S)}return Tf(a(_))}function g(v,_){const S=f(_),N=p(v),A=h(S,N);if(A===$u)throw new Error("invalid private or public key received");return d(A)}const y=d(e.Gu);function b(v){return g(v,y)}return{scalarMult:g,scalarMultBase:b,getSharedSecret:(v,_)=>g(v,_),getPublicKey:v=>b(v),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:y}}const Qb=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const n6=BigInt(1),cC=BigInt(2),s6=BigInt(3),i6=BigInt(5);BigInt(8);function o6(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=Qb,o=t*t%i*t%i,a=ks(o,cC,i)*o%i,c=ks(a,n6,i)*t%i,u=ks(c,i6,i)*c%i,l=ks(u,e,i)*u%i,h=ks(l,r,i)*l%i,d=ks(h,n,i)*h%i,f=ks(d,s,i)*d%i,p=ks(f,s,i)*d%i,g=ks(p,e,i)*u%i;return{pow_p_5_8:ks(g,cC,i)*t%i,b2:o}}function a6(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Zb=r6({P:Qb,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=Qb,{pow_p_5_8:r,b2:n}=o6(t);return En(ks(r,s6,e)*n,e)},adjustScalarBytes:a6,randomBytes:nd});function uC(t){t.lowS!==void 0&&vh("lowS",t.lowS),t.prehash!==void 0&&vh("prehash",t.prehash)}function c6(t){const e=ix(t);sd(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:u6,hexToBytes:l6}=H4;class h6 extends Error{constructor(e=""){super(e)}}const no={Err:h6,_tlv:{encode:(t,e)=>{const{Err:r}=no;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,s=dl(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?dl(s.length/2|128):"";return dl(t)+i+s+e},decode(t,e){const{Err:r}=no;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const u=e.subarray(n,n+c);if(u.length!==c)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=no;if(t<wo)throw new e("integer: negative integers are not allowed");let r=dl(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=no;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return u6(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=no,s=typeof t=="string"?l6(t):t;ig(s);const{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:u,l}=n.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(t){const{_tlv:e,_int:r}=no,n=e.encode(2,r.encode(t.r)),s=e.encode(2,r.encode(t.s)),i=n+s;return e.encode(48,i)}},wo=BigInt(0),pr=BigInt(1);BigInt(2);const lC=BigInt(3);BigInt(4);function d6(t){const e=c6(t),{Fp:r}=e,n=ex(e.n,e.nBitLength),s=e.toBytes||((g,y,b)=>{const v=y.toAffine();return Of(Uint8Array.from([4]),r.toBytes(v.x),r.toBytes(v.y))}),i=e.fromBytes||(g=>{const y=g.subarray(1),b=r.fromBytes(y.subarray(0,r.BYTES)),v=r.fromBytes(y.subarray(r.BYTES,2*r.BYTES));return{x:b,y:v}});function o(g){const{a:y,b}=e,v=r.sqr(g),_=r.mul(v,g);return r.add(r.add(_,r.mul(g,y)),b)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return Zy(g,pr,e.n)}function c(g){const{allowedPrivateKeyLengths:y,nByteLength:b,wrapPrivateKey:v,n:_}=e;if(y&&typeof g!="bigint"){if(nu(g)&&(g=_h(g)),typeof g!="string"||!y.includes(g.length))throw new Error("invalid private key");g=g.padStart(b*2,"0")}let S;try{S=typeof g=="bigint"?g:qc(Fn("private key",g,b))}catch{throw new Error("invalid private key, expected hex or "+b+" bytes, got "+typeof g)}return v&&(S=En(S,_)),Ao("private key",S,pr,_),S}function u(g){if(!(g instanceof d))throw new Error("ProjectivePoint expected")}const l=Kb((g,y)=>{const{px:b,py:v,pz:_}=g;if(r.eql(_,r.ONE))return{x:b,y:v};const S=g.is0();y==null&&(y=S?r.ONE:r.inv(_));const N=r.mul(b,y),A=r.mul(v,y),x=r.mul(_,y);if(S)return{x:r.ZERO,y:r.ZERO};if(!r.eql(x,r.ONE))throw new Error("invZ was invalid");return{x:N,y:A}}),h=Kb(g=>{if(g.is0()){if(e.allowInfinityPoint&&!r.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:y,y:b}=g.toAffine();if(!r.isValid(y)||!r.isValid(b))throw new Error("bad point: x or y not FE");const v=r.sqr(b),_=o(y);if(!r.eql(v,_))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(y,b,v){if(this.px=y,this.py=b,this.pz=v,y==null||!r.isValid(y))throw new Error("x required");if(b==null||!r.isValid(b))throw new Error("y required");if(v==null||!r.isValid(v))throw new Error("z required");Object.freeze(this)}static fromAffine(y){const{x:b,y:v}=y||{};if(!y||!r.isValid(b)||!r.isValid(v))throw new Error("invalid affine point");if(y instanceof d)throw new Error("projective point not allowed");const _=S=>r.eql(S,r.ZERO);return _(b)&&_(v)?d.ZERO:new d(b,v,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const b=r.invertBatch(y.map(v=>v.pz));return y.map((v,_)=>v.toAffine(b[_])).map(d.fromAffine)}static fromHex(y){const b=d.fromAffine(i(Fn("pointHex",y)));return b.assertValidity(),b}static fromPrivateKey(y){return d.BASE.multiply(c(y))}static msm(y,b){return e6(d,n,y,b)}_setWindowSize(y){p.setWindowSize(this,y)}assertValidity(){h(this)}hasEvenY(){const{y}=this.toAffine();if(r.isOdd)return!r.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){u(y);const{px:b,py:v,pz:_}=this,{px:S,py:N,pz:A}=y,x=r.eql(r.mul(b,A),r.mul(S,_)),P=r.eql(r.mul(v,A),r.mul(N,_));return x&&P}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){const{a:y,b}=e,v=r.mul(b,lC),{px:_,py:S,pz:N}=this;let A=r.ZERO,x=r.ZERO,P=r.ZERO,R=r.mul(_,_),B=r.mul(S,S),$=r.mul(N,N),K=r.mul(_,S);return K=r.add(K,K),P=r.mul(_,N),P=r.add(P,P),A=r.mul(y,P),x=r.mul(v,$),x=r.add(A,x),A=r.sub(B,x),x=r.add(B,x),x=r.mul(A,x),A=r.mul(K,A),P=r.mul(v,P),$=r.mul(y,$),K=r.sub(R,$),K=r.mul(y,K),K=r.add(K,P),P=r.add(R,R),R=r.add(P,R),R=r.add(R,$),R=r.mul(R,K),x=r.add(x,R),$=r.mul(S,N),$=r.add($,$),R=r.mul($,K),A=r.sub(A,R),P=r.mul($,B),P=r.add(P,P),P=r.add(P,P),new d(A,x,P)}add(y){u(y);const{px:b,py:v,pz:_}=this,{px:S,py:N,pz:A}=y;let x=r.ZERO,P=r.ZERO,R=r.ZERO;const B=e.a,$=r.mul(e.b,lC);let K=r.mul(b,S),te=r.mul(v,N),H=r.mul(_,A),C=r.add(b,v),T=r.add(S,N);C=r.mul(C,T),T=r.add(K,te),C=r.sub(C,T),T=r.add(b,_);let L=r.add(S,A);return T=r.mul(T,L),L=r.add(K,H),T=r.sub(T,L),L=r.add(v,_),x=r.add(N,A),L=r.mul(L,x),x=r.add(te,H),L=r.sub(L,x),R=r.mul(B,T),x=r.mul($,H),R=r.add(x,R),x=r.sub(te,R),R=r.add(te,R),P=r.mul(x,R),te=r.add(K,K),te=r.add(te,K),H=r.mul(B,H),T=r.mul($,T),te=r.add(te,H),H=r.sub(K,H),H=r.mul(B,H),T=r.add(T,H),K=r.mul(te,T),P=r.add(P,K),K=r.mul(L,T),x=r.mul(C,x),x=r.sub(x,K),K=r.mul(C,te),R=r.mul(L,R),R=r.add(R,K),new d(x,P,R)}subtract(y){return this.add(y.negate())}is0(){return this.equals(d.ZERO)}wNAF(y){return p.wNAFCached(this,y,d.normalizeZ)}multiplyUnsafe(y){const{endo:b,n:v}=e;Ao("scalar",y,wo,v);const _=d.ZERO;if(y===wo)return _;if(this.is0()||y===pr)return this;if(!b||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,y,d.normalizeZ);let{k1neg:S,k1:N,k2neg:A,k2:x}=b.splitScalar(y),P=_,R=_,B=this;for(;N>wo||x>wo;)N&pr&&(P=P.add(B)),x&pr&&(R=R.add(B)),B=B.double(),N>>=pr,x>>=pr;return S&&(P=P.negate()),A&&(R=R.negate()),R=new d(r.mul(R.px,b.beta),R.py,R.pz),P.add(R)}multiply(y){const{endo:b,n:v}=e;Ao("scalar",y,pr,v);let _,S;if(b){const{k1neg:N,k1:A,k2neg:x,k2:P}=b.splitScalar(y);let{p:R,f:B}=this.wNAF(A),{p:$,f:K}=this.wNAF(P);R=p.constTimeNegate(N,R),$=p.constTimeNegate(x,$),$=new d(r.mul($.px,b.beta),$.py,$.pz),_=R.add($),S=B.add(K)}else{const{p:N,f:A}=this.wNAF(y);_=N,S=A}return d.normalizeZ([_,S])[0]}multiplyAndAddUnsafe(y,b,v){const _=d.BASE,S=(A,x)=>x===wo||x===pr||!A.equals(_)?A.multiplyUnsafe(x):A.multiply(x),N=S(this,b).add(S(y,v));return N.is0()?void 0:N}toAffine(y){return l(this,y)}isTorsionFree(){const{h:y,isTorsionFree:b}=e;if(y===pr)return!0;if(b)return b(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:b}=e;return y===pr?this:b?b(d,this):this.multiplyUnsafe(e.h)}toRawBytes(y=!0){return vh("isCompressed",y),this.assertValidity(),s(d,this,y)}toHex(y=!0){return vh("isCompressed",y),_h(this.toRawBytes(y))}}d.BASE=new d(e.Gx,e.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);const f=e.nBitLength,p=X4(d,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function f6(t){const e=ix(t);return sd(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function p6(t){const e=f6(t),{Fp:r,n}=e,s=r.BYTES+1,i=2*r.BYTES+1;function o(H){return En(H,n)}function a(H){return Yb(H,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:h}=d6({...e,toBytes(H,C,T){const L=C.toAffine(),z=r.toBytes(L.x),j=Of;return vh("isCompressed",T),T?j(Uint8Array.from([C.hasEvenY()?2:3]),z):j(Uint8Array.from([4]),z,r.toBytes(L.y))},fromBytes(H){const C=H.length,T=H[0],L=H.subarray(1);if(C===s&&(T===2||T===3)){const z=qc(L);if(!Zy(z,pr,r.ORDER))throw new Error("Point is not on curve");const j=l(z);let W;try{W=r.sqrt(j)}catch(ne){const le=ne instanceof Error?": "+ne.message:"";throw new Error("Point is not on curve"+le)}const re=(W&pr)===pr;return(T&1)===1!==re&&(W=r.neg(W)),{x:z,y:W}}else if(C===i&&T===4){const z=r.fromBytes(L.subarray(0,r.BYTES)),j=r.fromBytes(L.subarray(r.BYTES,2*r.BYTES));return{x:z,y:j}}else{const z=s,j=i;throw new Error("invalid Point, expected length of "+z+", or uncompressed "+j+", got "+C)}}}),d=H=>_h(Ch(H,e.nByteLength));function f(H){const C=n>>pr;return H>C}function p(H){return f(H)?o(-H):H}const g=(H,C,T)=>qc(H.slice(C,T));class y{constructor(C,T,L){this.r=C,this.s=T,this.recovery=L,this.assertValidity()}static fromCompact(C){const T=e.nByteLength;return C=Fn("compactSignature",C,T*2),new y(g(C,0,T),g(C,T,2*T))}static fromDER(C){const{r:T,s:L}=no.toSig(Fn("DER",C));return new y(T,L)}assertValidity(){Ao("r",this.r,pr,n),Ao("s",this.s,pr,n)}addRecoveryBit(C){return new y(this.r,this.s,C)}recoverPublicKey(C){const{r:T,s:L,recovery:z}=this,j=A(Fn("msgHash",C));if(z==null||![0,1,2,3].includes(z))throw new Error("recovery id invalid");const W=z===2||z===3?T+e.n:T;if(W>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const re=(z&1)===0?"02":"03",ne=c.fromHex(re+d(W)),le=a(W),Z=o(-j*le),he=o(L*le),Se=c.BASE.multiplyAndAddUnsafe(ne,Z,he);if(!Se)throw new Error("point at infinify");return Se.assertValidity(),Se}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Ah(this.toDERHex())}toDERHex(){return no.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ah(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const b={isValidPrivateKey(H){try{return u(H),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const H=rx(e.n);return Y4(e.randomBytes(H),e.n)},precompute(H=8,C=c.BASE){return C._setWindowSize(H),C.multiply(BigInt(3)),C}};function v(H,C=!0){return c.fromPrivateKey(H).toRawBytes(C)}function _(H){const C=nu(H),T=typeof H=="string",L=(C||T)&&H.length;return C?L===s||L===i:T?L===2*s||L===2*i:H instanceof c}function S(H,C,T=!0){if(_(H))throw new Error("first arg must be private key");if(!_(C))throw new Error("second arg must be public key");return c.fromHex(C).multiply(u(H)).toRawBytes(T)}const N=e.bits2int||function(H){if(H.length>8192)throw new Error("input is too large");const C=qc(H),T=H.length*8-e.nBitLength;return T>0?C>>BigInt(T):C},A=e.bits2int_modN||function(H){return o(N(H))},x=Kv(e.nBitLength);function P(H){return Ao("num < 2^"+e.nBitLength,H,wo,x),Ch(H,e.nByteLength)}function R(H,C,T=B){if(["recovered","canonical"].some(qe=>qe in T))throw new Error("sign() legacy options not supported");const{hash:L,randomBytes:z}=e;let{lowS:j,prehash:W,extraEntropy:re}=T;j==null&&(j=!0),H=Fn("msgHash",H),uC(T),W&&(H=Fn("prehashed msgHash",L(H)));const ne=A(H),le=u(C),Z=[P(le),P(ne)];if(re!=null&&re!==!1){const qe=re===!0?z(r.BYTES):re;Z.push(Fn("extraEntropy",qe))}const he=Of(...Z),Se=ne;function je(qe){const Re=N(qe);if(!h(Re))return;const St=a(Re),pt=c.BASE.multiply(Re).toAffine(),It=o(pt.x);if(It===wo)return;const gt=o(St*o(Se+It*le));if(gt===wo)return;let Gt=(pt.x===It?0:2)|Number(pt.y&pr),rs=gt;return j&&f(gt)&&(rs=p(gt),Gt^=1),new y(It,rs,Gt)}return{seed:he,k2sig:je}}const B={lowS:e.lowS,prehash:!1},$={lowS:e.lowS,prehash:!1};function K(H,C,T=B){const{seed:L,k2sig:z}=R(H,C,T),j=e;return QO(j.hash.outputLen,j.nByteLength,j.hmac)(L,z)}c.BASE._setWindowSize(8);function te(H,C,T,L=$){var gt;const z=H;C=Fn("msgHash",C),T=Fn("publicKey",T);const{lowS:j,prehash:W,format:re}=L;if(uC(L),"strict"in L)throw new Error("options.strict was renamed to lowS");if(re!==void 0&&re!=="compact"&&re!=="der")throw new Error("format must be compact or der");const ne=typeof z=="string"||nu(z),le=!ne&&!re&&typeof z=="object"&&z!==null&&typeof z.r=="bigint"&&typeof z.s=="bigint";if(!ne&&!le)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let Z,he;try{if(le&&(Z=new y(z.r,z.s)),ne){try{re!=="compact"&&(Z=y.fromDER(z))}catch(Gt){if(!(Gt instanceof no.Err))throw Gt}!Z&&re!=="der"&&(Z=y.fromCompact(z))}he=c.fromHex(T)}catch{return!1}if(!Z||j&&Z.hasHighS())return!1;W&&(C=e.hash(C));const{r:Se,s:je}=Z,qe=A(C),Re=a(je),St=o(qe*Re),pt=o(Se*Re),It=(gt=c.BASE.multiplyAndAddUnsafe(he,St,pt))==null?void 0:gt.toAffine();return It?o(It.x)===Se:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:S,sign:K,verify:te,ProjectivePoint:c,Signature:y,utils:b}}function g6(t){return{hash:t,hmac:(e,...r)=>Ky(t,e,bF(...r)),randomBytes:nd}}function m6(t,e){const r=n=>p6({...t,...g6(n)});return{...r(e),create:r}}const ox=ex(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),y6=ox.create(BigInt("-3")),w6=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),b6=m6({a:y6,b:w6,Fp:ox,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},sg),ax="base10",cn="base16",Vs="base64pad",Xo="base64url",og="utf8",cx=0,Co=1,ag=2,E6=0,hC=1,uf=12,Jv=32;function v6(){const t=Zb.utils.randomPrivateKey(),e=Zb.getPublicKey(t);return{privateKey:An(t,cn),publicKey:An(e,cn)}}function Xb(){const t=nd(Jv);return An(t,cn)}function _6(t,e){const r=Zb.getSharedSecret(vs(t,cn),vs(e,cn)),n=I4(sg,r,void 0,void 0,Jv);return An(n,cn)}function bm(t){const e=sg(vs(t,cn));return An(e,cn)}function Ci(t){const e=sg(vs(t,og));return An(e,cn)}function ux(t){return vs(`${t}`,ax)}function su(t){return Number(An(t,ax))}function lx(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function hx(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4;return e+"=".repeat(r)}function A6(t){const e=ux(typeof t.type<"u"?t.type:cx);if(su(e)===Co&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?vs(t.senderPublicKey,cn):void 0,n=typeof t.iv<"u"?vs(t.iv,cn):nd(uf),s=vs(t.symKey,cn),i=KO(s,n).encrypt(vs(t.message,og)),o=dx({type:e,sealed:i,iv:n,senderPublicKey:r});return t.encoding===Xo?lx(o):o}function C6(t){const e=vs(t.symKey,cn),{sealed:r,iv:n}=xf({encoded:t.encoded,encoding:t.encoding}),s=KO(e,n).decrypt(r);if(s===null)throw new Error("Failed to decrypt");return An(s,og)}function S6(t,e){const r=ux(ag),n=nd(uf),s=vs(t,og),i=dx({type:r,sealed:s,iv:n});return e===Xo?lx(i):i}function I6(t,e){const{sealed:r}=xf({encoded:t,encoding:e});return An(r,og)}function dx(t){if(su(t.type)===ag)return An(cf([t.type,t.sealed]),Vs);if(su(t.type)===Co){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return An(cf([t.type,t.senderPublicKey,t.iv,t.sealed]),Vs)}return An(cf([t.type,t.iv,t.sealed]),Vs)}function xf(t){const e=(t.encoding||Vs)===Xo?hx(t.encoded):t.encoded,r=vs(e,Vs),n=r.slice(E6,hC),s=hC;if(su(n)===Co){const c=s+Jv,u=c+uf,l=r.slice(s,c),h=r.slice(c,u),d=r.slice(u);return{type:n,sealed:d,iv:h,senderPublicKey:l}}if(su(n)===ag){const c=r.slice(s),u=nd(uf);return{type:n,sealed:c,iv:u}}const i=s+uf,o=r.slice(s,i),a=r.slice(i);return{type:n,sealed:a,iv:o}}function N6(t,e){const r=xf({encoded:t,encoding:e==null?void 0:e.encoding});return fx({type:su(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?An(r.senderPublicKey,cn):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function fx(t){const e=(t==null?void 0:t.type)||cx;if(e===Co){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function dC(t){return t.type===Co&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function fC(t){return t.type===ag}function T6(t){const e=vr.from(t.x,"base64"),r=vr.from(t.y,"base64");return cf([new Uint8Array([4]),e,r])}function O6(t,e){const[r,n,s]=t.split("."),i=vr.from(hx(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${r}.${n}`,u=sg(c),l=T6(e);if(!b6.verify(cf([o,a]),u,l))throw new Error("Invalid signature");return $b(t).payload}const x6="irn";function Vm(t){return(t==null?void 0:t.relay)||{protocol:x6}}function qd(t){const e=U5[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function P6(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(n)){const i=s.replace(n,""),o=t[s];r[i]=o}}),r}function pC(t){if(!t.includes("wc:")){const u=UO(t);u!=null&&u.includes("wc:")&&(t=u)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),s=t.substring(e+1,r).split("@"),i=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(i),a={};o.forEach((u,l)=>{a[l]=u});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:R6(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:P6(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function R6(t){return t.startsWith("//")?t.substring(2):t}function k6(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(s=>{const i=s,o=r+e+i;t[i]&&(n[o]=t[i])}),n}function gC(t){const e=new URLSearchParams,r=k6(t.relay);Object.keys(r).sort().forEach(s=>{e.set(s,r[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const n=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${n}`}function Mg(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}function id(t){const e=[];return t.forEach(r=>{const[n,s]=r.split(":");e.push(`${n}:${s}`)}),e}function D6(t){const e=[];return Object.values(t).forEach(r=>{e.push(...id(r.accounts))}),e}function U6(t,e){const r=[];return Object.values(t).forEach(n=>{id(n.accounts).includes(e)&&r.push(...n.methods)}),r}function B6(t,e){const r=[];return Object.values(t).forEach(n=>{id(n.accounts).includes(e)&&r.push(...n.events)}),r}function Yv(t){return t.includes(":")}function Wd(t){return Yv(t)?t.split(":")[0]:t}function L6(t){const e={};return t==null||t.forEach(r=>{var n;const[s,i]=r.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(r),(n=e[s].chains)==null||n.push(`${s}:${i}`)}),e}function mC(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=L6(e);for(const[n,s]of Object.entries(r))s.methods?s.methods=ym(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return r}const $6={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},M6={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ce(t,e){const{message:r,code:n}=M6[t];return{message:e?`${r} ${e}`:r,code:n}}function dt(t,e){const{message:r,code:n}=$6[t];return{message:e?`${r} ${e}`:r,code:n}}function Ia(t,e){return!!Array.isArray(t)}function Pf(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Or(t){return typeof t>"u"}function nr(t,e){return e&&Or(t)?!0:typeof t=="string"&&!!t.trim().length}function Qv(t,e){return e&&Or(t)?!0:typeof t=="number"&&!isNaN(t)}function F6(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),s=Object.keys(r);let i=!0;return dc(s,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],l=id(a),h=r[o];(!dc(xO(o,h),l)||!dc(h.methods,c)||!dc(h.events,u))&&(i=!1)}),i):!1}function Gm(t){return nr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function j6(t){if(nr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Gm(r)}}return!1}function H6(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(nr(t,!1)){if(e(t))return!0;const r=UO(t);return e(r)}}catch{}return!1}function z6(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function q6(t){return t==null?void 0:t.topic}function W6(t,e){let r=null;return nr(t==null?void 0:t.publicKey,!1)||(r=ce("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function yC(t){let e=!0;return Ia(t)?t.length&&(e=t.every(r=>nr(r,!1))):e=!1,e}function V6(t,e,r){let n=null;return Ia(e)&&e.length?e.forEach(s=>{n||Gm(s)||(n=dt("UNSUPPORTED_CHAINS",`${r}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Gm(t)||(n=dt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function G6(t,e,r){let n=null;return Object.entries(t).forEach(([s,i])=>{if(n)return;const o=V6(s,xO(s,i),`${e} ${r}`);o&&(n=o)}),n}function K6(t,e){let r=null;return Ia(t)?t.forEach(n=>{r||j6(n)||(r=dt("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=dt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function J6(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=K6(n==null?void 0:n.accounts,`${e} namespace`);s&&(r=s)}),r}function Y6(t,e){let r=null;return yC(t==null?void 0:t.methods)?yC(t==null?void 0:t.events)||(r=dt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=dt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function px(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=Y6(n,`${e}, namespace`);s&&(r=s)}),r}function Q6(t,e,r){let n=null;if(t&&Pf(t)){const s=px(t,e);s&&(n=s);const i=G6(t,e,r);i&&(n=i)}else n=ce("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function E0(t,e){let r=null;if(t&&Pf(t)){const n=px(t,e);n&&(r=n);const s=J6(t,e);s&&(r=s)}else r=ce("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function gx(t){return nr(t.protocol,!0)}function Z6(t,e){let r=!1;return t?t&&Ia(t)&&t.length&&t.forEach(n=>{r=gx(n)}):r=!0,r}function X6(t){return typeof t=="number"}function yn(t){return typeof t<"u"&&typeof t!==null}function ej(t){return!(!t||typeof t!="object"||!t.code||!Qv(t.code,!1)||!t.message||!nr(t.message,!1))}function tj(t){return!(Or(t)||!nr(t.method,!1))}function rj(t){return!(Or(t)||Or(t.result)&&Or(t.error)||!Qv(t.id,!1)||!nr(t.jsonrpc,!1))}function nj(t){return!(Or(t)||!nr(t.name,!1))}function wC(t,e){return!(!Gm(e)||!D6(t).includes(e))}function sj(t,e,r){return nr(r,!1)?U6(t,e).includes(r):!1}function ij(t,e,r){return nr(r,!1)?B6(t,e).includes(r):!1}function bC(t,e,r){let n=null;const s=oj(t),i=aj(e),o=Object.keys(s),a=Object.keys(i),c=EC(Object.keys(t)),u=EC(Object.keys(e)),l=c.filter(h=>!u.includes(h));return l.length&&(n=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(e).toString()}`)),dc(o,a)||(n=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(h=>{if(!h.includes(":")||n)return;const d=id(e[h].accounts);d.includes(h)||(n=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${h}
        Required: ${h}
        Approved: ${d.toString()}`))}),o.forEach(h=>{n||(dc(s[h].methods,i[h].methods)?dc(s[h].events,i[h].events)||(n=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${h}`)):n=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${h}`))}),n}function oj(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(s=>{e[s]={methods:t[r].methods,events:t[r].events}})}),e}function EC(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function aj(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=id(t[r].accounts);n==null||n.forEach(s=>{e[s]={accounts:t[r].accounts.filter(i=>i.includes(`${s}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function cj(t,e){return Qv(t,!1)&&t<=e.max&&t>=e.min}function vC(){const t=rg();return new Promise(e=>{switch(t){case Wn.browser:e(uj());break;case Wn.reactNative:e(lj());break;case Wn.node:e(hj());break;default:e(!0)}})}function uj(){return tg()&&(navigator==null?void 0:navigator.onLine)}async function lj(){if(ja()&&typeof _e<"u"&&_e!=null&&_e.NetInfo){const t=await(_e==null?void 0:_e.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function hj(){return!0}function dj(t){switch(rg()){case Wn.browser:fj(t);break;case Wn.reactNative:pj(t);break}}function fj(t){!ja()&&tg()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function pj(t){ja()&&typeof _e<"u"&&_e!=null&&_e.NetInfo&&(_e==null||_e.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const v0={};class xd{static get(e){return v0[e]}static set(e,r){v0[e]=r}static delete(e){delete v0[e]}}const gj="PARSE_ERROR",mj="INVALID_REQUEST",yj="METHOD_NOT_FOUND",wj="INVALID_PARAMS",mx="INTERNAL_ERROR",Zv="SERVER_ERROR",bj=[-32700,-32600,-32601,-32602,-32603],lf={[gj]:{code:-32700,message:"Parse error"},[mj]:{code:-32600,message:"Invalid Request"},[yj]:{code:-32601,message:"Method not found"},[wj]:{code:-32602,message:"Invalid params"},[mx]:{code:-32603,message:"Internal error"},[Zv]:{code:-32e3,message:"Server error"}},yx=Zv;function Ej(t){return bj.includes(t)}function _C(t){return Object.keys(lf).includes(t)?lf[t]:lf[yx]}function vj(t){const e=Object.values(lf).find(r=>r.code===t);return e||lf[yx]}function wx(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var _0={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var eE=function(t,e){return eE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},eE(t,e)};function _j(t,e){eE(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var tE=function(){return tE=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},tE.apply(this,arguments)};function Aj(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function Cj(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,r,i):o(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function Sj(t,e){return function(r,n){e(r,n,t)}}function Ij(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Nj(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(h){o(h)}}function c(l){try{u(n.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function Tj(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Oj(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function xj(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function rE(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bx(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function Pj(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(bx(arguments[e]));return t}function Rj(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function Rf(t){return this instanceof Rf?(this.v=t,this):new Rf(t)}function kj(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(d){n[d]&&(s[d]=function(f){return new Promise(function(p,g){i.push([d,f,p,g])>1||a(d,f)})})}function a(d,f){try{c(n[d](f))}catch(p){h(i[0][3],p)}}function c(d){d.value instanceof Rf?Promise.resolve(d.value.v).then(u,l):h(i[0][2],d)}function u(d){a("next",d)}function l(d){a("throw",d)}function h(d,f){d(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Dj(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(o){return(r=!r)?{value:Rf(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function Uj(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof rE=="function"?rE(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function Bj(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Lj(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function $j(t){return t&&t.__esModule?t:{default:t}}function Mj(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Fj(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const jj=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return tE},__asyncDelegator:Dj,__asyncGenerator:kj,__asyncValues:Uj,__await:Rf,__awaiter:Nj,__classPrivateFieldGet:Mj,__classPrivateFieldSet:Fj,__createBinding:Oj,__decorate:Cj,__exportStar:xj,__extends:_j,__generator:Tj,__importDefault:$j,__importStar:Lj,__makeTemplateObject:Bj,__metadata:Ij,__param:Sj,__read:bx,__rest:Aj,__spread:Pj,__spreadArrays:Rj,__values:rE},Symbol.toStringTag,{value:"Module"})),Hj=tT(jj);var Ji={},AC;function zj(){if(AC)return Ji;AC=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.isBrowserCryptoAvailable=Ji.getSubtleCrypto=Ji.getBrowerCrypto=void 0;function t(){return(Ai===null||Ai===void 0?void 0:Ai.crypto)||(Ai===null||Ai===void 0?void 0:Ai.msCrypto)||{}}Ji.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}Ji.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return Ji.isBrowserCryptoAvailable=r,Ji}var Yi={},CC;function qj(){if(CC)return Yi;CC=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.isBrowser=Yi.isNode=Yi.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Yi.isReactNative=t;function e(){return typeof kr<"u"&&typeof kr.versions<"u"&&typeof kr.versions.node<"u"}Yi.isNode=e;function r(){return!t()&&!e()}return Yi.isBrowser=r,Yi}var SC;function Wj(){return SC||(SC=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Hj;e.__exportStar(zj(),t),e.__exportStar(qj(),t)}(_0)),_0}var Vj=Wj();function di(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function fc(t=6){return BigInt(di(t))}function Aa(t,e,r){return{id:r||di(),jsonrpc:"2.0",method:t,params:e}}function Xy(t,e){return{id:t,jsonrpc:"2.0",result:e}}function ew(t,e,r){return{id:t,jsonrpc:"2.0",error:Gj(e)}}function Gj(t,e){return typeof t>"u"?_C(mx):(typeof t=="string"&&(t=Object.assign(Object.assign({},_C(Zv)),{message:t})),Ej(t.code)&&(t=vj(t.code)),t)}let Kj=class{},Jj=class extends Kj{constructor(){super()}},Yj=class extends Jj{constructor(e){super()}};const Qj="^https?:",Zj="^wss?:";function Xj(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Ex(t,e){const r=Xj(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function IC(t){return Ex(t,Qj)}function NC(t){return Ex(t,Zj)}function e9(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function vx(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Xv(t){return vx(t)&&"method"in t}function tw(t){return vx(t)&&(fi(t)||bs(t))}function fi(t){return"result"in t}function bs(t){return"error"in t}let Ss=class extends Yj{constructor(e){super(e),this.events=new Cs.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Aa(e.method,e.params||[],e.id||fc().toString()),r)}async requestStrict(e,r){return new Promise(async(n,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{bs(i)?s(i.error):n(i.result)});try{await this.connection.send(e,r)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),tw(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const t9=()=>typeof WebSocket<"u"?WebSocket:typeof _e<"u"&&typeof _e.WebSocket<"u"?_e.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),r9=()=>typeof WebSocket<"u"||typeof _e<"u"&&typeof _e.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",TC=t=>t.split("?")[0],OC=10,n9=t9();let s9=class{constructor(e){if(this.url=e,this.events=new Cs.EventEmitter,this.registering=!1,!NC(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Oo(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!NC(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const s=Vj.isReactNative()?void 0:{rejectUnauthorized:!e9(e)},i=new n9(e,[],s);r9()?i.onerror=o=>{const a=o;n(this.emitError(a.error))}:i.on("error",o=>{n(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),r(i)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?eu(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),s=n.message||n.toString(),i=ew(e,s);this.events.emit("payload",i)}parseError(e,r=this.url){return wx(e,TC(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>OC&&this.events.setMaxListeners(OC)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${TC(this.url)}`));return this.events.emit("register_error",r),r}};var i9={};const _x="wc",Ax=2,nE="core",Bi=`${_x}@2:${nE}:`,o9={logger:"error"},a9={database:":memory:"},c9="crypto",xC="client_ed25519_seed",u9=ae.ONE_DAY,l9="keychain",h9="0.3",d9="messages",f9="0.3",PC=ae.SIX_HOURS,p9="publisher",Cx="irn",g9="error",Sx="wss://relay.walletconnect.org",m9="relayer",mr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},y9="_subscription",ss={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},w9=.1,sE="2.19.2",Rt={link_mode:"link_mode",relay:"relay"},Em={inbound:"inbound",outbound:"outbound"},b9="0.3",E9="WALLETCONNECT_CLIENT_ID",RC="WALLETCONNECT_LINK_MODE_APPS",Dn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},v9="subscription",_9="0.3",A9="pairing",C9="0.3",Pd={wc_pairingDelete:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ae.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ae.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ae.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:0},res:{ttl:ae.ONE_DAY,prompt:!1,tag:0}}},ic={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},xs={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},S9="history",I9="0.3",N9="expirer",hs={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},T9="0.3",O9="verify-api",x9="https://verify.walletconnect.com",Ix="https://verify.walletconnect.org",hf=Ix,P9=`${hf}/v3`,R9=[x9,Ix],k9="echo",D9="https://echo.walletconnect.com",hi={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Zi={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Ps={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Ka={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Ja={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Rd={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},U9=.1,B9="event-client",L9=86400,$9="https://pulse.walletconnect.org/batch";function M9(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,b=0,v=p.length;b!==v&&p[b]===0;)b++,g++;for(var _=(v-b)*l+1>>>0,S=new Uint8Array(_);b!==v;){for(var N=p[b],A=0,x=_-1;(N!==0||A<y)&&x!==-1;x--,A++)N+=256*S[x]>>>0,S[x]=N%a>>>0,N=N/a>>>0;if(N!==0)throw new Error("Non-zero carry");y=A,b++}for(var P=_-y;P!==_&&S[P]===0;)P++;for(var R=c.repeat(g);P<_;++P)R+=t.charAt(S[P]);return R}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,b=0;p[g]===c;)y++,g++;for(var v=(p.length-g)*u+1>>>0,_=new Uint8Array(v);p[g];){var S=r[p.charCodeAt(g)];if(S===255)return;for(var N=0,A=v-1;(S!==0||N<b)&&A!==-1;A--,N++)S+=a*_[A]>>>0,_[A]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");b=N,g++}if(p[g]!==" "){for(var x=v-b;x!==v&&_[x]===0;)x++;for(var P=new Uint8Array(y+(v-x)),R=y;x!==v;)P[R++]=_[x++];return P}}}function f(p){var g=d(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var F9=M9,j9=F9;const Nx=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},H9=t=>new TextEncoder().encode(t),z9=t=>new TextDecoder().decode(t);class q9{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class W9{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Tx(this,e)}}class V9{constructor(e){this.decoders=e}or(e){return Tx(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Tx=(t,e)=>new V9({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class G9{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new q9(e,r,n),this.decoder=new W9(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const rw=({name:t,prefix:e,encode:r,decode:n})=>new G9(t,e,r,n),cg=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=j9(r,e);return rw({prefix:t,name:e,encode:n,decode:i=>Nx(s(i))})},K9=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const h=s[t[l]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},J9=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},$r=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>rw({prefix:e,name:t,encode(s){return J9(s,n,r)},decode(s){return K9(s,n,r,t)}}),Y9=rw({prefix:"\0",name:"identity",encode:t=>z9(t),decode:t=>H9(t)});var Q9=Object.freeze({__proto__:null,identity:Y9});const Z9=$r({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var X9=Object.freeze({__proto__:null,base2:Z9});const e7=$r({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var t7=Object.freeze({__proto__:null,base8:e7});const r7=cg({prefix:"9",name:"base10",alphabet:"0123456789"});var n7=Object.freeze({__proto__:null,base10:r7});const s7=$r({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),i7=$r({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var o7=Object.freeze({__proto__:null,base16:s7,base16upper:i7});const a7=$r({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),c7=$r({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),u7=$r({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),l7=$r({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),h7=$r({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),d7=$r({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),f7=$r({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),p7=$r({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),g7=$r({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var m7=Object.freeze({__proto__:null,base32:a7,base32upper:c7,base32pad:u7,base32padupper:l7,base32hex:h7,base32hexupper:d7,base32hexpad:f7,base32hexpadupper:p7,base32z:g7});const y7=cg({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),w7=cg({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var b7=Object.freeze({__proto__:null,base36:y7,base36upper:w7});const E7=cg({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),v7=cg({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var _7=Object.freeze({__proto__:null,base58btc:E7,base58flickr:v7});const A7=$r({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),C7=$r({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),S7=$r({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),I7=$r({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var N7=Object.freeze({__proto__:null,base64:A7,base64pad:C7,base64url:S7,base64urlpad:I7});const Ox=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),T7=Ox.reduce((t,e,r)=>(t[r]=e,t),[]),O7=Ox.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function x7(t){return t.reduce((e,r)=>(e+=T7[r],e),"")}function P7(t){const e=[];for(const r of t){const n=O7[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const R7=rw({prefix:"ðŸš€",name:"base256emoji",encode:x7,decode:P7});var k7=Object.freeze({__proto__:null,base256emoji:R7}),D7=xx,kC=128,U7=-128,B7=Math.pow(2,31);function xx(t,e,r){e=e||[],r=r||0;for(var n=r;t>=B7;)e[r++]=t&255|kC,t/=128;for(;t&U7;)e[r++]=t&255|kC,t>>>=7;return e[r]=t|0,xx.bytes=r-n+1,e}var L7=iE,$7=128,DC=127;function iE(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw iE.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&DC)<<s:(o&DC)*Math.pow(2,s),s+=7}while(o>=$7);return iE.bytes=i-n,r}var M7=Math.pow(2,7),F7=Math.pow(2,14),j7=Math.pow(2,21),H7=Math.pow(2,28),z7=Math.pow(2,35),q7=Math.pow(2,42),W7=Math.pow(2,49),V7=Math.pow(2,56),G7=Math.pow(2,63),K7=function(t){return t<M7?1:t<F7?2:t<j7?3:t<H7?4:t<z7?5:t<q7?6:t<W7?7:t<V7?8:t<G7?9:10},J7={encode:D7,decode:L7,encodingLength:K7},Px=J7;const UC=(t,e,r=0)=>(Px.encode(t,e,r),e),BC=t=>Px.encodingLength(t),oE=(t,e)=>{const r=e.byteLength,n=BC(t),s=n+BC(r),i=new Uint8Array(s+r);return UC(t,i,0),UC(r,i,n),i.set(e,s),new Y7(t,r,e,i)};class Y7{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}}const Rx=({name:t,code:e,encode:r})=>new Q7(t,e,r);class Q7{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?oE(this.code,r):r.then(n=>oE(this.code,n))}else throw Error("Unknown type, must be binary type")}}const kx=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Z7=Rx({name:"sha2-256",code:18,encode:kx("SHA-256")}),X7=Rx({name:"sha2-512",code:19,encode:kx("SHA-512")});var eH=Object.freeze({__proto__:null,sha256:Z7,sha512:X7});const Dx=0,tH="identity",Ux=Nx,rH=t=>oE(Dx,Ux(t)),nH={code:Dx,name:tH,encode:Ux,digest:rH};var sH=Object.freeze({__proto__:null,identity:nH});new TextEncoder,new TextDecoder;const LC={...Q9,...X9,...t7,...n7,...o7,...m7,...b7,..._7,...N7,...k7};({...eH,...sH});function iH(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Bx(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const $C=Bx("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),A0=Bx("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=iH(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),oH={utf8:$C,"utf-8":$C,hex:LC.base16,latin1:A0,ascii:A0,binary:A0,...LC};function aH(t,e="utf8"){const r=oH[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var cH=Object.defineProperty,uH=(t,e,r)=>e in t?cH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ci=(t,e,r)=>uH(t,typeof e!="symbol"?e+"":e,r);class lH{constructor(e,r){this.core=e,this.logger=r,ci(this,"keychain",new Map),ci(this,"name",l9),ci(this,"version",h9),ci(this,"initialized",!1),ci(this,"storagePrefix",Bi),ci(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),ci(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),ci(this,"set",async(n,s)=>{this.isInitialized(),this.keychain.set(n,s),await this.persist()}),ci(this,"get",n=>{this.isInitialized();const s=this.keychain.get(n);if(typeof s>"u"){const{message:i}=ce("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(i)}return s}),ci(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=Yr(r,this.name)}get context(){return Nn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Hb(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?zb(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}var hH=Object.defineProperty,dH=(t,e,r)=>e in t?hH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Cr=(t,e,r)=>dH(t,typeof e!="symbol"?e+"":e,r);class fH{constructor(e,r,n){this.core=e,this.logger=r,Cr(this,"name",c9),Cr(this,"keychain"),Cr(this,"randomSessionIdentifier",Xb()),Cr(this,"initialized",!1),Cr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Cr(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Cr(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=g1(s);return uO(i.publicKey)}),Cr(this,"generateKeyPair",()=>{this.isInitialized();const s=v6();return this.setPrivateKey(s.publicKey,s.privateKey)}),Cr(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=g1(i),a=this.randomSessionIdentifier;return await R8(a,s,u9,o)}),Cr(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=_6(a,i);return this.setSymKey(c,o)}),Cr(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||bm(s);return await this.keychain.set(o,s),o}),Cr(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Cr(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Cr(this,"encode",async(s,i,o)=>{this.isInitialized();const a=fx(o),c=Oo(i);if(fC(a))return S6(c,o==null?void 0:o.encoding);if(dC(a)){const d=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(d,f)}const u=this.getSymKey(s),{type:l,senderPublicKey:h}=a;return A6({type:l,symKey:u,message:c,senderPublicKey:h,encoding:o==null?void 0:o.encoding})}),Cr(this,"decode",async(s,i,o)=>{this.isInitialized();const a=N6(i,o);if(fC(a)){const c=I6(i,o==null?void 0:o.encoding);return eu(c)}if(dC(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;s=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(s),u=C6({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return eu(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Cr(this,"getPayloadType",(s,i=Vs)=>{const o=xf({encoded:s,encoding:i});return su(o.type)}),Cr(this,"getPayloadSenderPublicKey",(s,i=Vs)=>{const o=xf({encoded:s,encoding:i});return o.senderPublicKey?An(o.senderPublicKey,cn):void 0}),this.core=e,this.logger=Yr(r,this.name),this.keychain=n||new lH(this.core,this.logger)}get context(){return Nn(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(xC)}catch{e=Xb(),await this.keychain.set(xC,e)}return aH(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}var pH=Object.defineProperty,gH=Object.defineProperties,mH=Object.getOwnPropertyDescriptors,MC=Object.getOwnPropertySymbols,yH=Object.prototype.hasOwnProperty,wH=Object.prototype.propertyIsEnumerable,aE=(t,e,r)=>e in t?pH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bH=(t,e)=>{for(var r in e||(e={}))yH.call(e,r)&&aE(t,r,e[r]);if(MC)for(var r of MC(e))wH.call(e,r)&&aE(t,r,e[r]);return t},EH=(t,e)=>gH(t,mH(e)),Pn=(t,e,r)=>aE(t,typeof e!="symbol"?e+"":e,r);class vH extends xB{constructor(e,r){super(e,r),this.logger=e,this.core=r,Pn(this,"messages",new Map),Pn(this,"messagesWithoutClientAck",new Map),Pn(this,"name",d9),Pn(this,"version",f9),Pn(this,"initialized",!1),Pn(this,"storagePrefix",Bi),Pn(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),Pn(this,"set",async(n,s,i)=>{this.isInitialized();const o=Ci(s);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(n,a),i===Em.inbound){const c=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,EH(bH({},c),{[o]:s}))}return await this.persist(),o}),Pn(this,"get",n=>{this.isInitialized();let s=this.messages.get(n);return typeof s>"u"&&(s={}),s}),Pn(this,"getWithoutAck",n=>{this.isInitialized();const s={};for(const i of n){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Pn(this,"has",(n,s)=>{this.isInitialized();const i=this.get(n),o=Ci(s);return typeof i[o]<"u"}),Pn(this,"ack",async(n,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(n);if(typeof i>"u")return;const o=Ci(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,i),await this.persist()}),Pn(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=Yr(e,this.name),this.core=r}get context(){return Nn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Hb(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Hb(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?zb(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?zb(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}var _H=Object.defineProperty,AH=Object.defineProperties,CH=Object.getOwnPropertyDescriptors,FC=Object.getOwnPropertySymbols,SH=Object.prototype.hasOwnProperty,IH=Object.prototype.propertyIsEnumerable,cE=(t,e,r)=>e in t?_H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fg=(t,e)=>{for(var r in e||(e={}))SH.call(e,r)&&cE(t,r,e[r]);if(FC)for(var r of FC(e))IH.call(e,r)&&cE(t,r,e[r]);return t},C0=(t,e)=>AH(t,CH(e)),Rs=(t,e,r)=>cE(t,typeof e!="symbol"?e+"":e,r);class NH extends PB{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Rs(this,"events",new Cs.EventEmitter),Rs(this,"name",p9),Rs(this,"queue",new Map),Rs(this,"publishTimeout",ae.toMiliseconds(ae.ONE_MINUTE)),Rs(this,"initialPublishTimeout",ae.toMiliseconds(ae.ONE_SECOND*15)),Rs(this,"needsTransportRestart",!1),Rs(this,"publish",async(n,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||PC,c=Vm(i),u=(i==null?void 0:i.prompt)||!1,l=(i==null?void 0:i.tag)||0,h=(i==null?void 0:i.id)||fc().toString(),d={topic:n,message:s,opts:{ttl:a,relay:c,prompt:u,tag:l,id:h,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${h} tag:${l}`;try{const p=new Promise(async g=>{const y=({id:v})=>{d.opts.id===v&&(this.removeRequestFromQueue(v),this.relayer.events.removeListener(mr.publish,y),g(d))};this.relayer.events.on(mr.publish,y);const b=_a(new Promise((v,_)=>{this.rpcPublish({topic:n,message:s,ttl:a,prompt:u,tag:l,id:h,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(v).catch(S=>{this.logger.warn(S,S==null?void 0:S.message),_(S)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${h} tag:${l}`);try{await b,this.events.removeListener(mr.publish,y)}catch(v){this.queue.set(h,C0(Fg({},d),{attempt:1})),this.logger.warn(v,v==null?void 0:v.message)}});this.logger.trace({type:"method",method:"publish",params:{id:h,topic:n,message:s,opts:i}}),await _a(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(h)}}),Rs(this,"on",(n,s)=>{this.events.on(n,s)}),Rs(this,"once",(n,s)=>{this.events.once(n,s)}),Rs(this,"off",(n,s)=>{this.events.off(n,s)}),Rs(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.relayer=e,this.logger=Yr(r,this.name),this.registerEventListeners()}get context(){return Nn(this.logger)}async rpcPublish(e){var r,n,s,i;const{topic:o,message:a,ttl:c=PC,prompt:u,tag:l,id:h,attestation:d,tvf:f}=e,p={method:qd(Vm().protocol).publish,params:Fg({topic:o,message:a,ttl:c,prompt:u,tag:l,attestation:d},f),id:h};Or((r=p.params)==null?void 0:r.prompt)&&((n=p.params)==null||delete n.prompt),Or((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(mr.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const n=e.attempt+1;this.queue.set(r,C0(Fg({},e),{attempt:n}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${n}`),await this.rpcPublish(C0(Fg({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Zh.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(mr.connection_stalled);return}this.checkQueue()}),this.relayer.on(mr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var TH=Object.defineProperty,OH=(t,e,r)=>e in t?TH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Mu=(t,e,r)=>OH(t,typeof e!="symbol"?e+"":e,r);class xH{constructor(){Mu(this,"map",new Map),Mu(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),Mu(this,"get",e=>this.map.get(e)||[]),Mu(this,"exists",(e,r)=>this.get(e).includes(r)),Mu(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const s=n.filter(i=>i!==r);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Mu(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var PH=Object.defineProperty,RH=Object.defineProperties,kH=Object.getOwnPropertyDescriptors,jC=Object.getOwnPropertySymbols,DH=Object.prototype.hasOwnProperty,UH=Object.prototype.propertyIsEnumerable,uE=(t,e,r)=>e in t?PH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,kd=(t,e)=>{for(var r in e||(e={}))DH.call(e,r)&&uE(t,r,e[r]);if(jC)for(var r of jC(e))UH.call(e,r)&&uE(t,r,e[r]);return t},S0=(t,e)=>RH(t,kH(e)),wt=(t,e,r)=>uE(t,typeof e!="symbol"?e+"":e,r);class BH extends DB{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,wt(this,"subscriptions",new Map),wt(this,"topicMap",new xH),wt(this,"events",new Cs.EventEmitter),wt(this,"name",v9),wt(this,"version",_9),wt(this,"pending",new Map),wt(this,"cached",[]),wt(this,"initialized",!1),wt(this,"storagePrefix",Bi),wt(this,"subscribeTimeout",ae.toMiliseconds(ae.ONE_MINUTE)),wt(this,"initialSubscribeTimeout",ae.toMiliseconds(ae.ONE_SECOND*15)),wt(this,"clientId"),wt(this,"batchSubscribeTopicsLimit",500),wt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),wt(this,"subscribe",async(n,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}});try{const i=Vm(s),o={topic:n,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(n,o);const a=await this.rpcSubscribe(n,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),wt(this,"unsubscribe",async(n,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(n,s.id,s):await this.unsubscribeByTopic(n,s)}),wt(this,"isSubscribed",n=>new Promise(s=>{s(this.topicMap.topics.includes(n))})),wt(this,"isKnownTopic",n=>new Promise(s=>{s(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(i=>i.topic===n))})),wt(this,"on",(n,s)=>{this.events.on(n,s)}),wt(this,"once",(n,s)=>{this.events.once(n,s)}),wt(this,"off",(n,s)=>{this.events.off(n,s)}),wt(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),wt(this,"start",async()=>{await this.onConnect()}),wt(this,"stop",async()=>{await this.onDisconnect()}),wt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),wt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(s=>{n.push(s)}),await this.batchSubscribe(n)}),wt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Zh.pulse,async()=>{await this.checkPending()}),this.events.on(Dn.created,async n=>{const s=Dn.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()}),this.events.on(Dn.deleted,async n=>{const s=Dn.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()})}),this.relayer=e,this.logger=Yr(r,this.name),this.clientId=""}get context(){return Nn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async s=>await this.unsubscribeById(e,s,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const s=Vm(n);await this.restartToComplete({topic:e,id:r,relay:s}),await this.rpcUnsubscribe(e,r,s);const i=dt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,r,n){var s;(!n||(n==null?void 0:n.transportType)===Rt.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const i={method:qd(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((n==null?void 0:n.transportType)===Rt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(l=>this.logger.warn(l))},ae.toMiliseconds(ae.ONE_SECOND)),a;const c=new Promise(async l=>{const h=d=>{d.topic===e&&(this.events.removeListener(Dn.created,h),l(d.id))};this.events.on(Dn.created,h);try{const d=await _a(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Dn.created,h),l(d)}catch{}}),u=await _a(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return u?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(mr.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:qd(r.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await _a(new Promise(s=>{this.relayer.request(n).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(mr.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:qd(r.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let s;try{s=await await _a(new Promise((i,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(mr.connection_stalled)}return s}rpcUnsubscribe(e,r,n){const s={method:qd(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,r){this.setSubscription(e,S0(kd({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,kd({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,kd({},r)),this.topicMap.set(r.topic,e),this.events.emit(Dn.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Dn.deleted,S0(kd({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Dn.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Dn.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>S0(kd({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await cF(ae.toMiliseconds(ae.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Ci(e+await this.getClientId())}}var LH=Object.defineProperty,HC=Object.getOwnPropertySymbols,$H=Object.prototype.hasOwnProperty,MH=Object.prototype.propertyIsEnumerable,lE=(t,e,r)=>e in t?LH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zC=(t,e)=>{for(var r in e||(e={}))$H.call(e,r)&&lE(t,r,e[r]);if(HC)for(var r of HC(e))MH.call(e,r)&&lE(t,r,e[r]);return t},Xe=(t,e,r)=>lE(t,typeof e!="symbol"?e+"":e,r);class FH extends RB{constructor(e){super(e),Xe(this,"protocol","wc"),Xe(this,"version",2),Xe(this,"core"),Xe(this,"logger"),Xe(this,"events",new Cs.EventEmitter),Xe(this,"provider"),Xe(this,"messages"),Xe(this,"subscriber"),Xe(this,"publisher"),Xe(this,"name",m9),Xe(this,"transportExplicitlyClosed",!1),Xe(this,"initialized",!1),Xe(this,"connectionAttemptInProgress",!1),Xe(this,"relayUrl"),Xe(this,"projectId"),Xe(this,"packageName"),Xe(this,"bundleId"),Xe(this,"hasExperiencedNetworkDisruption",!1),Xe(this,"pingTimeout"),Xe(this,"heartBeatTimeout",ae.toMiliseconds(ae.THIRTY_SECONDS+ae.FIVE_SECONDS)),Xe(this,"reconnectTimeout"),Xe(this,"connectPromise"),Xe(this,"reconnectInProgress",!1),Xe(this,"requestsInFlight",[]),Xe(this,"connectTimeout",ae.toMiliseconds(ae.ONE_SECOND*15)),Xe(this,"request",async r=>{var n,s;this.logger.debug("Publishing Request Payload");const i=r.id||fc().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${i}:${((s=r.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),Xe(this,"resetPingTimeout",()=>{qm()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),Xe(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),Xe(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected ðŸ›œ"),this.startPingTimeout(),this.events.emit(mr.connect)}),Xe(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected ðŸ›‘"),this.requestsInFlight=[],this.onProviderDisconnect()}),Xe(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(mr.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Xe(this,"registerProviderListeners",()=>{this.provider.on(ss.payload,this.onPayloadHandler),this.provider.on(ss.connect,this.onConnectHandler),this.provider.on(ss.disconnect,this.onDisconnectHandler),this.provider.on(ss.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Yr(e.logger,this.name):Qp(Xh({level:e.logger||g9})),this.messages=new vH(this.logger,e.core),this.subscriber=new BH(this,this.logger),this.publisher=new NH(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Sx,this.projectId=e.projectId,V5()?this.packageName=B1():G5()&&(this.bundleId=B1()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return Nn(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:Rt.relay},Em.outbound)}async subscribe(e,r){var n,s,i;this.isInitialized(),(!(r!=null&&r.transportType)||(r==null?void 0:r.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((n=r==null?void 0:r.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const u=l=>{l.topic===e&&(this.subscriber.off(Dn.created,u),c())};return await Promise.all([new Promise(l=>{c=l,this.subscriber.on(Dn.created,u)}),new Promise(async(l,h)=>{a=await this.subscriber.subscribe(e,zC({internal:{throwOnFailedPublish:o}},r)).catch(d=>{o&&h(d)})||a,l()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await _a(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await vC())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,s)=>n.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const s=cr(ae.FIVE_MINUTES),i={topic:n,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,i)}this.events.emit(mr.message,e),await this.recordMessageEvent(e,Em.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ss.disconnect,i),await _a(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(ss.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ss.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(ss.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const s=n;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,ae.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,s,i;if(qm())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((i=(s=(n=this.provider)==null?void 0:n.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ss(new s9(Z5({sdkVersion:sE,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:n,message:s}=e;await this.messages.set(n,s,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const s=this.messages.has(r,n);return s&&this.logger.warn(`Ignoring duplicate message: ${n}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Xv(e)){if(!e.method.endsWith(y9))return;const r=e.params,{topic:n,message:s,publishedAt:i,attestation:o}=r.data,a={topic:n,message:s,publishedAt:i,transportType:Rt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(zC({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else tw(e)&&this.events.emit(mr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Em.inbound),this.events.emit(mr.message,e))}async acknowledgePayload(e){const r=Xy(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(ss.payload,this.onPayloadHandler),this.provider.off(ss.connect,this.onConnectHandler),this.provider.off(ss.disconnect,this.onDisconnectHandler),this.provider.off(ss.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await vC();dj(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n==null?void 0:n.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(mr.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},ae.toMiliseconds(w9)))))}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}}function jH(){}function qC(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function WC(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function VC(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const HH="[object RegExp]",zH="[object String]",qH="[object Number]",WH="[object Boolean]",GC="[object Arguments]",VH="[object Symbol]",GH="[object Date]",KH="[object Map]",JH="[object Set]",YH="[object Array]",QH="[object Function]",ZH="[object ArrayBuffer]",I0="[object Object]",XH="[object Error]",ez="[object DataView]",tz="[object Uint8Array]",rz="[object Uint8ClampedArray]",nz="[object Uint16Array]",sz="[object Uint32Array]",iz="[object BigUint64Array]",oz="[object Int8Array]",az="[object Int16Array]",cz="[object Int32Array]",uz="[object BigInt64Array]",lz="[object Float32Array]",hz="[object Float64Array]";function dz(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function fz(t,e,r){return Vd(t,e,void 0,void 0,void 0,void 0,r)}function Vd(t,e,r,n,s,i,o){const a=o(t,e,r,n,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return df(t,e,i,o)}return df(t,e,i,o)}function df(t,e,r,n){if(Object.is(t,e))return!0;let s=VC(t),i=VC(e);if(s===GC&&(s=I0),i===GC&&(i=I0),s!==i)return!1;switch(s){case zH:return t.toString()===e.toString();case qH:{const c=t.valueOf(),u=e.valueOf();return dz(c,u)}case WH:case GH:case VH:return Object.is(t.valueOf(),e.valueOf());case HH:return t.source===e.source&&t.flags===e.flags;case QH:return t===e}r=r??new Map;const o=r.get(t),a=r.get(e);if(o!=null&&a!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(s){case KH:{if(t.size!==e.size)return!1;for(const[c,u]of t.entries())if(!e.has(c)||!Vd(u,e.get(c),c,t,e,r,n))return!1;return!0}case JH:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),u=Array.from(e.values());for(let l=0;l<c.length;l++){const h=c[l],d=u.findIndex(f=>Vd(h,f,void 0,t,e,r,n));if(d===-1)return!1;u.splice(d,1)}return!0}case YH:case tz:case rz:case nz:case sz:case iz:case oz:case az:case cz:case uz:case lz:case hz:{if(typeof vr<"u"&&vr.isBuffer(t)!==vr.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Vd(t[c],e[c],c,t,e,r,n))return!1;return!0}case ZH:return t.byteLength!==e.byteLength?!1:df(new Uint8Array(t),new Uint8Array(e),r,n);case ez:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:df(new Uint8Array(t),new Uint8Array(e),r,n);case XH:return t.name===e.name&&t.message===e.message;case I0:{if(!(df(t.constructor,e.constructor,r,n)||qC(t)&&qC(e)))return!1;const c=[...Object.keys(t),...WC(t)],u=[...Object.keys(e),...WC(e)];if(c.length!==u.length)return!1;for(let l=0;l<c.length;l++){const h=c[l],d=t[h];if(!Object.hasOwn(e,h))return!1;const f=e[h];if(!Vd(d,f,h,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function pz(t,e){return fz(t,e,jH)}var gz=Object.defineProperty,KC=Object.getOwnPropertySymbols,mz=Object.prototype.hasOwnProperty,yz=Object.prototype.propertyIsEnumerable,hE=(t,e,r)=>e in t?gz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,JC=(t,e)=>{for(var r in e||(e={}))mz.call(e,r)&&hE(t,r,e[r]);if(KC)for(var r of KC(e))yz.call(e,r)&&hE(t,r,e[r]);return t},fn=(t,e,r)=>hE(t,typeof e!="symbol"?e+"":e,r);class Iu extends kB{constructor(e,r,n,s=Bi,i=void 0){super(e,r,n,s),this.core=e,this.logger=r,this.name=n,fn(this,"map",new Map),fn(this,"version",b9),fn(this,"cached",[]),fn(this,"initialized",!1),fn(this,"getKey"),fn(this,"storagePrefix",Bi),fn(this,"recentlyDeleted",[]),fn(this,"recentlyDeletedLimit",200),fn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Or(o)?this.map.set(this.getKey(o),o):z6(o)?this.map.set(o.id,o):q6(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),fn(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),fn(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),fn(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>pz(a[c],o[c]))):this.values)),fn(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=JC(JC({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),fn(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Yr(r,this.name),this.storagePrefix=s,this.getKey=i}get context(){return Nn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:s}=ce("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:n}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}var wz=Object.defineProperty,bz=(t,e,r)=>e in t?wz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,We=(t,e,r)=>bz(t,typeof e!="symbol"?e+"":e,r);class Ez{constructor(e,r){this.core=e,this.logger=r,We(this,"name",A9),We(this,"version",C9),We(this,"events",new Rv),We(this,"pairings"),We(this,"initialized",!1),We(this,"storagePrefix",Bi),We(this,"ignoredPayloadTypes",[Co]),We(this,"registeredMethods",[]),We(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),We(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),We(this,"create",async n=>{this.isInitialized();const s=Xb(),i=await this.core.crypto.setSymKey(s),o=cr(ae.FIVE_MINUTES),a={protocol:Cx},c={topic:i,expiry:o,relay:a,active:!1,methods:n==null?void 0:n.methods},u=gC({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:n==null?void 0:n.methods});return this.events.emit(ic.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:n==null?void 0:n.transportType}),{topic:i,uri:u}}),We(this,"pair",async n=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:n==null?void 0:n.uri,trace:[hi.pairing_started]}});this.isValidPair(n,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:u}=pC(n.uri);s.props.properties.topic=i,s.addTrace(hi.pairing_uri_validation_success),s.addTrace(hi.pairing_uri_not_expired);let l;if(this.pairings.keys.includes(i)){if(l=this.pairings.get(i),s.addTrace(hi.existing_pairing),l.active)throw s.setError(Zi.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(hi.pairing_not_expired)}const h=c||cr(ae.FIVE_MINUTES),d={topic:i,relay:a,expiry:h,active:!1,methods:u};this.core.expirer.set(i,h),await this.pairings.set(i,d),s.addTrace(hi.store_new_pairing),n.activatePairing&&await this.activate({topic:i}),this.events.emit(ic.create,d),s.addTrace(hi.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(hi.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Zi.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Zi.subscribe_pairing_topic_failure),f}return s.addTrace(hi.subscribe_pairing_topic_success),d}),We(this,"activate",async({topic:n})=>{this.isInitialized();const s=cr(ae.FIVE_MINUTES);this.core.expirer.set(n,s),await this.pairings.update(n,{active:!0,expiry:s})}),We(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=n;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Za();this.events.once(it("pairing_ping",i),({error:u})=>{u?c(u):a()}),await o()}}),We(this,"updateExpiry",async({topic:n,expiry:s})=>{this.isInitialized(),await this.pairings.update(n,{expiry:s})}),We(this,"updateMetadata",async({topic:n,metadata:s})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:s})}),We(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),We(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:s}=n;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",dt("USER_DISCONNECTED")),await this.deletePairing(s))}),We(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(s);return gC({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),We(this,"sendRequest",async(n,s,i)=>{const o=Aa(s,i),a=await this.core.crypto.encode(n,o),c=Pd[s].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),We(this,"sendResult",async(n,s,i)=>{const o=Xy(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,u=Pd[c].res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),We(this,"sendError",async(n,s,i)=>{const o=ew(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,u=Pd[c]?Pd[c].res:Pd.unregistered_method.res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),We(this,"deletePairing",async(n,s)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,dt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),s?Promise.resolve():this.core.expirer.del(n)])}),We(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(s=>Yo(s.expiry));await Promise.all(n.map(s=>this.deletePairing(s.topic)))}),We(this,"onRelayEventRequest",async n=>{const{topic:s,payload:i}=n;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),We(this,"onRelayEventResponse",async n=>{const{topic:s,payload:i}=n,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),We(this,"onPairingPingRequest",async(n,s)=>{const{id:i}=s;try{this.isValidPing({topic:n}),await this.sendResult(i,n,!0),this.events.emit(ic.ping,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),We(this,"onPairingPingResponse",(n,s)=>{const{id:i}=s;setTimeout(()=>{fi(s)?this.events.emit(it("pairing_ping",i),{}):bs(s)&&this.events.emit(it("pairing_ping",i),{error:s.error})},500)}),We(this,"onPairingDeleteRequest",async(n,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(ic.delete,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),We(this,"onUnknownRpcMethodRequest",async(n,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=dt("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,n,a),this.logger.error(a)}catch(a){await this.sendError(i,n,a),this.logger.error(a)}}),We(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(dt("WC_METHOD_UNSUPPORTED",n))}),We(this,"isValidPair",(n,s)=>{var i;if(!yn(n)){const{message:a}=ce("MISSING_OR_INVALID",`pair() params: ${n}`);throw s.setError(Zi.malformed_pairing_uri),new Error(a)}if(!H6(n.uri)){const{message:a}=ce("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw s.setError(Zi.malformed_pairing_uri),new Error(a)}const o=pC(n==null?void 0:n.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=ce("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Zi.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=ce("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Zi.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&ae.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Zi.pairing_expired);const{message:a}=ce("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),We(this,"isValidPing",async n=>{if(!yn(n)){const{message:i}=ce("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),We(this,"isValidDisconnect",async n=>{if(!yn(n)){const{message:i}=ce("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),We(this,"isValidPairingTopic",async n=>{if(!nr(n,!1)){const{message:s}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(s)}if(!this.pairings.keys.includes(n)){const{message:s}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(s)}if(Yo(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:s}=ce("EXPIRED",`pairing topic: ${n}`);throw new Error(s)}}),this.core=e,this.logger=Yr(r,this.name),this.pairings=new Iu(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Nn(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(mr.message,async e=>{const{topic:r,message:n,transportType:s}=e;if(this.pairings.keys.includes(r)&&s!==Rt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const i=await this.core.crypto.decode(r,n);Xv(i)?(this.core.history.set(r,i),await this.onRelayEventRequest({topic:r,payload:i})):tw(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id)),await this.core.relayer.messages.ack(r,n)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(hs.expired,async e=>{const{topic:r}=DO(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(ic.expire,{topic:r}))})}}var vz=Object.defineProperty,_z=(t,e,r)=>e in t?vz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Sr=(t,e,r)=>_z(t,typeof e!="symbol"?e+"":e,r);class Az extends OB{constructor(e,r){super(e,r),this.core=e,this.logger=r,Sr(this,"records",new Map),Sr(this,"events",new Cs.EventEmitter),Sr(this,"name",S9),Sr(this,"version",I9),Sr(this,"cached",[]),Sr(this,"initialized",!1),Sr(this,"storagePrefix",Bi),Sr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Sr(this,"set",(n,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:n,request:{method:s.method,params:s.params||null},chainId:i,expiry:cr(ae.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(xs.created,o)}),Sr(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const s=await this.getRecord(n.id);typeof s.response>"u"&&(s.response=bs(n)?{error:n.error}:{result:n.result},this.records.set(s.id,s),this.persist(),this.events.emit(xs.updated,s))}),Sr(this,"get",async(n,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:s}),await this.getRecord(s))),Sr(this,"delete",(n,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===n){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(xs.deleted,i)}}),this.persist()}),Sr(this,"exists",async(n,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===n:!1)),Sr(this,"on",(n,s)=>{this.events.on(n,s)}),Sr(this,"once",(n,s)=>{this.events.once(n,s)}),Sr(this,"off",(n,s)=>{this.events.off(n,s)}),Sr(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=Yr(r,this.name)}get context(){return Nn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Aa(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(xs.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(xs.created,e=>{const r=xs.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(xs.updated,e=>{const r=xs.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(xs.deleted,e=>{const r=xs.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(Zh.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{ae.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(xs.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Cz=Object.defineProperty,Sz=(t,e,r)=>e in t?Cz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Mr=(t,e,r)=>Sz(t,typeof e!="symbol"?e+"":e,r);class Iz extends UB{constructor(e,r){super(e,r),this.core=e,this.logger=r,Mr(this,"expirations",new Map),Mr(this,"events",new Cs.EventEmitter),Mr(this,"name",N9),Mr(this,"version",T9),Mr(this,"cached",[]),Mr(this,"initialized",!1),Mr(this,"storagePrefix",Bi),Mr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Mr(this,"has",n=>{try{const s=this.formatTarget(n);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Mr(this,"set",(n,s)=>{this.isInitialized();const i=this.formatTarget(n),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(hs.created,{target:i,expiration:o})}),Mr(this,"get",n=>{this.isInitialized();const s=this.formatTarget(n);return this.getExpiration(s)}),Mr(this,"del",n=>{if(this.isInitialized(),this.has(n)){const s=this.formatTarget(n),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(hs.deleted,{target:s,expiration:i})}}),Mr(this,"on",(n,s)=>{this.events.on(n,s)}),Mr(this,"once",(n,s)=>{this.events.once(n,s)}),Mr(this,"off",(n,s)=>{this.events.off(n,s)}),Mr(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=Yr(r,this.name)}get context(){return Nn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return X5(e);if(typeof e=="number")return eF(e);const{message:r}=ce("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(hs.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;ae.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(hs.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Zh.pulse,()=>this.checkExpirations()),this.events.on(hs.created,e=>{const r=hs.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(hs.expired,e=>{const r=hs.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(hs.deleted,e=>{const r=hs.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Nz=Object.defineProperty,Tz=(t,e,r)=>e in t?Nz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tr=(t,e,r)=>Tz(t,typeof e!="symbol"?e+"":e,r);class Oz extends BB{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,tr(this,"name",O9),tr(this,"abortController"),tr(this,"isDevEnv"),tr(this,"verifyUrlV3",P9),tr(this,"storagePrefix",Bi),tr(this,"version",Ax),tr(this,"publicKey"),tr(this,"fetchPromise"),tr(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&ae.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),tr(this,"register",async s=>{if(!tg()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const u=tu.getDocument(),l=this.startAbortTimer(ae.ONE_SECOND*5),h=await new Promise((d,f)=>{const p=()=>{window.removeEventListener("message",y),u.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=u.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const y=b=>{if(b.data&&typeof b.data=="string")try{const v=JSON.parse(b.data);if(v.type==="verify_attestation"){if($b(v.attestation).payload.id!==o)return;clearInterval(l),u.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",y),d(v.attestation===null?"":v.attestation)}}catch(v){this.logger.warn(v)}};u.body.appendChild(g),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",h),h}catch(u){this.logger.warn(u)}return""}),tr(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if($b(i).payload.id!==a)return;const u=await this.isValidJwtAttestation(i);if(u){if(!u.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return u}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),tr(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(ae.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),tr(this,"getVerifyUrl",s=>{let i=s||hf;return R9.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${hf}`),i=hf),i}),tr(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(ae.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),tr(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),tr(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),tr(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),tr(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),tr(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),tr(this,"validateAttestation",(s,i)=>{const o=O6(s,i.publicKey),a={hasExpired:ae.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Yr(r,this.name),this.abortController=new AbortController,this.isDevEnv=zv(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Nn(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ae.toMiliseconds(e))}}var xz=Object.defineProperty,Pz=(t,e,r)=>e in t?xz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,YC=(t,e,r)=>Pz(t,typeof e!="symbol"?e+"":e,r);class Rz extends LB{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,YC(this,"context",k9),YC(this,"registerDeviceToken",async n=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=n,c=`${D9}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Yr(r,this.context)}}var kz=Object.defineProperty,QC=Object.getOwnPropertySymbols,Dz=Object.prototype.hasOwnProperty,Uz=Object.prototype.propertyIsEnumerable,dE=(t,e,r)=>e in t?kz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Dd=(t,e)=>{for(var r in e||(e={}))Dz.call(e,r)&&dE(t,r,e[r]);if(QC)for(var r of QC(e))Uz.call(e,r)&&dE(t,r,e[r]);return t},lr=(t,e,r)=>dE(t,typeof e!="symbol"?e+"":e,r);class Bz extends $B{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,lr(this,"context",B9),lr(this,"storagePrefix",Bi),lr(this,"storageVersion",U9),lr(this,"events",new Map),lr(this,"shouldPersist",!1),lr(this,"init",async()=>{if(!zv())try{const s={eventId:$1(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:RO(this.core.relayer.protocol,this.core.relayer.version,sE)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),lr(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,u=$1(),l=this.core.projectId||"",h=Date.now(),d=Dd({eventId:u,timestamp:h,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:l,domain:this.getAppDomain()},this.setMethods(u));return this.telemetryEnabled&&(this.events.set(u,d),this.shouldPersist=!0),d}),lr(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Dd(Dd({},a),this.setMethods(a.eventId))}),lr(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),lr(this,"setEventListeners",()=>{this.core.heartbeat.on(Zh.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{ae.fromMiliseconds(Date.now())-ae.fromMiliseconds(s.timestamp)>L9&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),lr(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),lr(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),lr(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),lr(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),lr(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Dd(Dd({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),lr(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),lr(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${$9}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${sE}${i}`,{method:"POST",body:JSON.stringify(s)})}),lr(this,"getAppDomain",()=>PO().url),this.logger=Yr(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Lz=Object.defineProperty,ZC=Object.getOwnPropertySymbols,$z=Object.prototype.hasOwnProperty,Mz=Object.prototype.propertyIsEnumerable,fE=(t,e,r)=>e in t?Lz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,XC=(t,e)=>{for(var r in e||(e={}))$z.call(e,r)&&fE(t,r,e[r]);if(ZC)for(var r of ZC(e))Mz.call(e,r)&&fE(t,r,e[r]);return t},Nt=(t,e,r)=>fE(t,typeof e!="symbol"?e+"":e,r);let Fz=class Lx extends SB{constructor(e){var r;super(e),Nt(this,"protocol",_x),Nt(this,"version",Ax),Nt(this,"name",nE),Nt(this,"relayUrl"),Nt(this,"projectId"),Nt(this,"customStoragePrefix"),Nt(this,"events",new Cs.EventEmitter),Nt(this,"logger"),Nt(this,"heartbeat"),Nt(this,"relayer"),Nt(this,"crypto"),Nt(this,"storage"),Nt(this,"history"),Nt(this,"expirer"),Nt(this,"pairing"),Nt(this,"verify"),Nt(this,"echoClient"),Nt(this,"linkModeSupportedApps"),Nt(this,"eventClient"),Nt(this,"initialized",!1),Nt(this,"logChunkController"),Nt(this,"on",(a,c)=>this.events.on(a,c)),Nt(this,"once",(a,c)=>this.events.once(a,c)),Nt(this,"off",(a,c)=>this.events.off(a,c)),Nt(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Nt(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:u})=>{if(!a||!c)return;const l={topic:a,message:c,publishedAt:Date.now(),transportType:Rt.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:u})});const n=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(n)try{return this.customStoragePrefix=n.customStoragePrefix,this.logger=n.logger,this.heartbeat=n.heartbeat,this.crypto=n.crypto,this.history=n.history,this.expirer=n.expirer,this.storage=n.storage,this.relayer=n.relayer,this.pairing=n.pairing,this.verify=n.verify,this.echoClient=n.echoClient,this.linkModeSupportedApps=n.linkModeSupportedApps,this.eventClient=n.eventClient,this.initialized=n.initialized,this.logChunkController=n.logChunkController,n}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Sx,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Xh({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:o9.logger,name:nE}),{logger:i,chunkLoggerController:o}=Dv({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Yr(i,this.name),this.heartbeat=new CU,this.crypto=new fH(this,this.logger,e==null?void 0:e.keychain),this.history=new Az(this,this.logger),this.expirer=new Iz(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new oB(XC(XC({},a9),e==null?void 0:e.storageOptions)),this.relayer=new FH({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Ez(this,this.logger),this.verify=new Oz(this,this.logger,this.storage),this.echoClient=new Rz(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Bz(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const r=new Lx(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(E9,n),r}get context(){return Nn(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(RC,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(RC)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${e}`,n=`${r}_count`;return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[n]} times.`),globalThis[r]}catch(r){console.warn("Failed to get global WalletConnect core",r);return}}setGlobalCore(e){var r;try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${((r=e.opts)==null?void 0:r.customStoragePrefix)||""}`;globalThis[n]=e}catch(n){console.warn("Failed to set global WalletConnect core",n)}}isGlobalCoreDisabled(){try{return typeof kr<"u"&&i9.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const jz=Fz,$x="wc",Mx=2,Fx="client",e_=`${$x}@${Mx}:${Fx}:`,N0={name:Fx,logger:"error"},eS="WALLETCONNECT_DEEPLINK_CHOICE",Hz="proposal",tS="Proposal expired",zz="session",Fu=ae.SEVEN_DAYS,qz="engine",hr={wc_sessionPropose:{req:{ttl:ae.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ae.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ae.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ae.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ae.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ae.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:1114},res:{ttl:ae.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:ae.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:ae.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1119}}},T0={min:ae.FIVE_MINUTES,max:ae.SEVEN_DAYS},ui={idle:"IDLE",active:"ACTIVE"},rS={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},Wz="request",Vz=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Gz="wc",Kz="auth",Jz="authKeys",Yz="pairingTopics",Qz="requests",nw=`${Gz}@${1.5}:${Kz}:`,vm=`${nw}:PUB_KEY`;var Zz=Object.defineProperty,Xz=Object.defineProperties,eq=Object.getOwnPropertyDescriptors,nS=Object.getOwnPropertySymbols,tq=Object.prototype.hasOwnProperty,rq=Object.prototype.propertyIsEnumerable,pE=(t,e,r)=>e in t?Zz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bt=(t,e)=>{for(var r in e||(e={}))tq.call(e,r)&&pE(t,r,e[r]);if(nS)for(var r of nS(e))rq.call(e,r)&&pE(t,r,e[r]);return t},Qr=(t,e)=>Xz(t,eq(e)),X=(t,e,r)=>pE(t,typeof e!="symbol"?e+"":e,r);class nq extends HB{constructor(e){super(e),X(this,"name",qz),X(this,"events",new Rv),X(this,"initialized",!1),X(this,"requestQueue",{state:ui.idle,queue:[]}),X(this,"sessionRequestQueue",{state:ui.idle,queue:[]}),X(this,"requestQueueDelay",ae.ONE_SECOND),X(this,"expectedPairingMethodMap",new Map),X(this,"recentlyDeletedMap",new Map),X(this,"recentlyDeletedLimit",200),X(this,"relayMessageCache",[]),X(this,"pendingSessions",new Map),X(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(hr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ae.toMiliseconds(this.requestQueueDelay)))}),X(this,"connect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=Qr(bt({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:u}=n;let l=s,h,d=!1;try{if(l){const A=this.client.core.pairing.pairings.get(l);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),d=A.active}}catch(A){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),A}if(!l||!d){const{topic:A,uri:x}=await this.client.core.pairing.create();l=A,h=x}if(!l){const{message:A}=ce("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(A)}const f=await this.client.core.crypto.generateKeyPair(),p=hr.wc_sessionPropose.req.ttl||ae.FIVE_MINUTES,g=cr(p),y=Qr(bt(bt({requiredNamespaces:i,optionalNamespaces:o,relays:u??[{protocol:Cx}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:l},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:di()}),b=it("session_connect",y.id),{reject:v,resolve:_,done:S}=Za(p,tS),N=({id:A})=>{A===y.id&&(this.client.events.off("proposal_expire",N),this.pendingSessions.delete(y.id),this.events.emit(b,{error:{message:tS,code:0}}))};return this.client.events.on("proposal_expire",N),this.events.once(b,({error:A,session:x})=>{this.client.events.off("proposal_expire",N),A?v(A):x&&_(x)}),await this.sendRequest({topic:l,method:"wc_sessionPropose",params:y,throwOnFailedPublish:!0,clientRpcId:y.id}),await this.setProposal(y.id,y),{uri:h,approval:S}}),X(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),X(this,"approve",async r=>{var n,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r==null?void 0:r.id)==null?void 0:n.toString(),trace:[Ps.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(R){throw o.setError(Ka.no_internet_connection),R}try{await this.isValidProposalId(r==null?void 0:r.id)}catch(R){throw this.client.logger.error(`approve() -> proposal.get(${r==null?void 0:r.id}) failed`),o.setError(Ka.proposal_not_found),R}try{await this.isValidApprove(r)}catch(R){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Ka.session_approve_namespace_validation_failure),R}const{id:a,relayProtocol:c,namespaces:u,sessionProperties:l,scopedProperties:h,sessionConfig:d}=r,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:y,optionalNamespaces:b}=f;let v=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});v||(v=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Ps.session_approve_started,properties:{topic:p,trace:[Ps.session_approve_started,Ps.session_namespaces_validation_success]}}));const _=await this.client.core.crypto.generateKeyPair(),S=g.publicKey,N=await this.client.core.crypto.generateSharedKey(_,S),A=bt(bt(bt({relay:{protocol:c??"irn"},namespaces:u,controller:{publicKey:_,metadata:this.client.metadata},expiry:cr(Fu)},l&&{sessionProperties:l}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),x=Rt.relay;v.addTrace(Ps.subscribing_session_topic);try{await this.client.core.relayer.subscribe(N,{transportType:x})}catch(R){throw v.setError(Ka.subscribe_session_topic_failure),R}v.addTrace(Ps.subscribe_session_topic_success);const P=Qr(bt({},A),{topic:N,requiredNamespaces:y,optionalNamespaces:b,pairingTopic:p,acknowledged:!1,self:A.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:_,transportType:Rt.relay});await this.client.session.set(N,P),v.addTrace(Ps.store_session);try{v.addTrace(Ps.publishing_session_settle),await this.sendRequest({topic:N,method:"wc_sessionSettle",params:A,throwOnFailedPublish:!0}).catch(R=>{throw v==null||v.setError(Ka.session_settle_publish_failure),R}),v.addTrace(Ps.session_settle_publish_success),v.addTrace(Ps.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:_},throwOnFailedPublish:!0}).catch(R=>{throw v==null||v.setError(Ka.session_approve_publish_failure),R}),v.addTrace(Ps.session_approve_publish_success)}catch(R){throw this.client.logger.error(R),this.client.session.delete(N,dt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(N),R}return this.client.core.eventClient.deleteEvent({eventId:v.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,dt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(N,cr(Fu)),{topic:N,acknowledged:()=>Promise.resolve(this.client.session.get(N))}}),X(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:s}=r;let i;try{i=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}i&&(await this.sendError({id:n,topic:i,error:s,rpcOpts:hr.wc_sessionPropose.reject}),await this.client.proposal.delete(n,dt("USER_DISCONNECTED")))}),X(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(h){throw this.client.logger.error("update() -> isValidUpdate() failed"),h}const{topic:n,namespaces:s}=r,{done:i,resolve:o,reject:a}=Za(),c=di(),u=fc().toString(),l=this.client.session.get(n).namespaces;return this.events.once(it("session_update",c),({error:h})=>{h?a(h):o()}),await this.client.session.update(n,{namespaces:s}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:u}).catch(h=>{this.client.logger.error(h),this.client.session.update(n,{namespaces:l}),a(h)}),{acknowledged:i}}),X(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=r,s=di(),{done:i,resolve:o,reject:a}=Za();return this.events.once(it("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,cr(Fu)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),X(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(b){throw this.client.logger.error("request() -> isValidRequest() failed"),b}const{chainId:n,request:s,topic:i,expiry:o=hr.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Rt.relay&&await this.confirmOnlineStateOrThrow();const c=di(),u=fc().toString(),{done:l,resolve:h,reject:d}=Za(o,"Request expired. Please try again.");this.events.once(it("session_request",c),({error:b,result:v})=>{b?d(b):h(v)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:f,params:{request:Qr(bt({},s),{expiryTimestamp:cr(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(b=>d(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),await l();const g={request:Qr(bt({},s),{expiryTimestamp:cr(o)}),chainId:n},y=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async b=>{await this.sendRequest(bt({clientRpcId:c,relayRpcId:u,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},y&&{tvf:this.getTVFParams(c,g)})).catch(v=>d(v)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),b()}),new Promise(async b=>{var v;if(!((v=a.sessionConfig)!=null&&v.disableDeepLink)){const _=await sF(this.client.core.storage,eS);await tF({id:c,topic:i,wcDeepLink:_})}b()}),l()]).then(b=>b[2])}),X(this,"respond",async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:s}=r,{id:i}=s,o=this.client.session.get(n);o.transportType===Rt.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);fi(s)?await this.sendResult({id:i,topic:n,result:s.result,throwOnFailedPublish:!0,appLink:a}):bs(s)&&await this.sendError({id:i,topic:n,error:s.error,appLink:a}),this.cleanupAfterResponse(r)}),X(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:n}=r;if(this.client.session.keys.includes(n)){const s=di(),i=fc().toString(),{done:o,resolve:a,reject:c}=Za();this.events.once(it("session_ping",s),({error:u})=>{u?c(u):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),X(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:s,chainId:i}=r,o=fc().toString(),a=di();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),X(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:dt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:s}=ce("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(s)}}),X(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>F6(n,r)))),X(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),X(this,"authenticate",async(r,n)=>{var s;this.isInitialized(),this.isValidAuthenticate(r);const i=n&&this.client.core.linkModeSupportedApps.includes(n)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Rt.link_mode:Rt.relay;o===Rt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:u,domain:l,nonce:h,type:d,exp:f,nbf:p,methods:g=[],expiry:y}=r,b=[...r.resources||[]],{topic:v,uri:_}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:v,uri:_}});const S=await this.client.core.crypto.generateKeyPair(),N=bm(S);if(await Promise.all([this.client.auth.authKeys.set(vm,{responseTopic:N,publicKey:S}),this.client.auth.pairingTopics.set(N,{topic:N,pairingTopic:v})]),await this.client.core.relayer.subscribe(N,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${v}`),g.length>0){const{namespace:j}=El(a[0]);let W=YF(j,"request",g);wm(b)&&(W=ZF(W,b.pop())),b.push(W)}const A=y&&y>hr.wc_sessionAuthenticate.req.ttl?y:hr.wc_sessionAuthenticate.req.ttl,x={authPayload:{type:d??"caip122",chains:a,statement:c,aud:u,domain:l,version:"1",nonce:h,iat:new Date().toISOString(),exp:f,nbf:p,resources:b},requester:{publicKey:S,metadata:this.client.metadata},expiryTimestamp:cr(A)},P={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},R={requiredNamespaces:{},optionalNamespaces:P,relays:[{protocol:"irn"}],pairingTopic:v,proposer:{publicKey:S,metadata:this.client.metadata},expiryTimestamp:cr(hr.wc_sessionPropose.req.ttl),id:di()},{done:B,resolve:$,reject:K}=Za(A,"Request expired"),te=di(),H=it("session_connect",R.id),C=it("session_request",te),T=async({error:j,session:W})=>{this.events.off(C,L),j?K(j):W&&$({session:W})},L=async j=>{var W,re,ne;if(await this.deletePendingAuthRequest(te,{message:"fulfilled",code:0}),j.error){const Re=dt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return j.error.code===Re.code?void 0:(this.events.off(H,T),K(j.error.message))}await this.deleteProposal(R.id),this.events.off(H,T);const{cacaos:le,responder:Z}=j.result,he=[],Se=[];for(const Re of le){await V1({cacao:Re,projectId:this.client.core.projectId})||(this.client.logger.error(Re,"Signature verification failed"),K(dt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:St}=Re,pt=wm(St.resources),It=[qb(St.iss)],gt=Wm(St.iss);if(pt){const Gt=G1(pt),rs=K1(pt);he.push(...Gt),It.push(...rs)}for(const Gt of It)Se.push(`${Gt}:${gt}`)}const je=await this.client.core.crypto.generateSharedKey(S,Z.publicKey);let qe;he.length>0&&(qe={topic:je,acknowledged:!0,self:{publicKey:S,metadata:this.client.metadata},peer:Z,controller:Z.publicKey,expiry:cr(Fu),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:v,namespaces:mC([...new Set(he)],[...new Set(Se)]),transportType:o},await this.client.core.relayer.subscribe(je,{transportType:o}),await this.client.session.set(je,qe),v&&await this.client.core.pairing.updateMetadata({topic:v,metadata:Z.metadata}),qe=this.client.session.get(je)),(W=this.client.metadata.redirect)!=null&&W.linkMode&&(re=Z.metadata.redirect)!=null&&re.linkMode&&(ne=Z.metadata.redirect)!=null&&ne.universal&&n&&(this.client.core.addLinkModeSupportedApp(Z.metadata.redirect.universal),this.client.session.update(je,{transportType:Rt.link_mode})),$({auths:le,session:qe})};this.events.once(H,T),this.events.once(C,L);let z;try{if(i){const j=Aa("wc_sessionAuthenticate",x,te);this.client.core.history.set(v,j);const W=await this.client.core.crypto.encode("",j,{type:ag,encoding:Xo});z=Mg(n,v,W)}else await Promise.all([this.sendRequest({topic:v,method:"wc_sessionAuthenticate",params:x,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:te}),this.sendRequest({topic:v,method:"wc_sessionPropose",params:R,expiry:hr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:R.id})])}catch(j){throw this.events.off(H,T),this.events.off(C,L),j}return await this.setProposal(R.id,R),await this.setAuthRequest(te,{request:Qr(bt({},x),{verifyContext:{}}),pairingTopic:v,transportType:o}),{uri:z??_,response:B}}),X(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:s}=r,i=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[Ja.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(Rd.no_internet_connection),y}const o=this.getPendingAuthRequest(n);if(!o)throw i.setError(Rd.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||Rt.relay;a===Rt.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),l=bm(c),h={type:Co,receiverPublicKey:c,senderPublicKey:u},d=[],f=[];for(const y of s){if(!await V1({cacao:y,projectId:this.client.core.projectId})){i.setError(Rd.invalid_cacao);const N=dt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:l,error:N,encodeOpts:h}),new Error(N.message)}i.addTrace(Ja.cacaos_verified);const{p:b}=y,v=wm(b.resources),_=[qb(b.iss)],S=Wm(b.iss);if(v){const N=G1(v),A=K1(v);d.push(...N),_.push(...A)}for(const N of _)f.push(`${N}:${S}`)}const p=await this.client.core.crypto.generateSharedKey(u,c);i.addTrace(Ja.create_authenticated_session_topic);let g;if((d==null?void 0:d.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:u,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:cr(Fu),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:mC([...new Set(d)],[...new Set(f)]),transportType:a},i.addTrace(Ja.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(y){throw i.setError(Rd.subscribe_authenticated_session_topic_failure),y}i.addTrace(Ja.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Ja.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Ja.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:n,result:{cacaos:s,responder:{publicKey:u,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(Rd.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),X(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:s}=r,i=this.getPendingAuthRequest(n);if(!i)throw new Error(`Could not find pending auth request with id ${n}`);i.transportType===Rt.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=bm(o),u={type:Co,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:s,encodeOpts:u,rpcOpts:hr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,dt("USER_DISCONNECTED"))}),X(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:s}=r;return zO(n,s)}),X(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),X(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&i.topic&&i.topic!==n.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),X(this,"deleteSession",async r=>{var n;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,dt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(eS).catch(u=>this.client.logger.warn(u)),this.getPendingSessionRequests().forEach(u=>{u.topic===s&&this.deletePendingSessionRequest(u.id,dt("USER_DISCONNECTED"))}),s===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=ui.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),X(this,"deleteProposal",async(r,n)=>{if(n)try{const s=this.client.proposal.get(r),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Ka.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,dt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),X(this,"deletePendingSessionRequest",async(r,n,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==r),s&&(this.sessionRequestQueue.state=ui.idle,this.client.events.emit("session_request_expire",{id:r}))}),X(this,"deletePendingAuthRequest",async(r,n,s=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)])}),X(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),X(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,cr(hr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),X(this,"setAuthRequest",async(r,n)=>{const{request:s,pairingTopic:i,transportType:o=Rt.relay}=n;this.client.core.expirer.set(r,s.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:r,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),X(this,"setPendingSessionRequest",async r=>{const{id:n,topic:s,params:i,verifyContext:o}=r,a=i.request.expiryTimestamp||cr(hr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:s,params:i,verifyContext:o})}),X(this,"sendRequest",async r=>{const{topic:n,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u,appLink:l,tvf:h}=r,d=Aa(s,i,c);let f;const p=!!l;try{const b=p?Xo:Vs;f=await this.client.core.crypto.encode(n,d,{encoding:b})}catch(b){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),b}let g;if(Vz.includes(s)){const b=Ci(JSON.stringify(d)),v=Ci(f);g=await this.client.core.verify.register({id:v,decryptedId:b})}const y=hr[s].req;if(y.attestation=g,o&&(y.ttl=o),a&&(y.id=a),this.client.core.history.set(n,d),p){const b=Mg(l,n,f);await _e.Linking.openURL(b,this.client.name)}else{const b=hr[s].req;o&&(b.ttl=o),a&&(b.id=a),b.tvf=Qr(bt({},h),{correlationId:d.id}),u?(b.internal=Qr(bt({},b.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,f,b)):this.client.core.relayer.publish(n,f,b).catch(v=>this.client.logger.error(v))}return d.id}),X(this,"sendResult",async r=>{const{id:n,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,u=Xy(n,i);let l;const h=c&&typeof(_e==null?void 0:_e.Linking)<"u";try{const p=h?Xo:Vs;l=await this.client.core.crypto.encode(s,u,Qr(bt({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let d,f;try{d=await this.client.core.history.get(s,n);const p=d.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(n,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${n}) failed`),p}if(h){const p=Mg(c,s,l);await _e.Linking.openURL(p,this.client.name)}else{const p=d.request.method,g=hr[p].res;g.tvf=Qr(bt({},f),{correlationId:n}),o?(g.internal=Qr(bt({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,l,g)):this.client.core.relayer.publish(s,l,g).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(u)}),X(this,"sendError",async r=>{const{id:n,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=r,u=ew(n,i);let l;const h=c&&typeof(_e==null?void 0:_e.Linking)<"u";try{const f=h?Xo:Vs;l=await this.client.core.crypto.encode(s,u,Qr(bt({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let d;try{d=await this.client.core.history.get(s,n)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${n}) failed`),f}if(h){const f=Mg(c,s,l);await _e.Linking.openURL(f,this.client.name)}else{const f=d.request.method,p=a||hr[f].res;this.client.core.relayer.publish(s,l,p)}await this.client.core.history.resolve(u)}),X(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(s=>{let i=!1;Yo(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&r.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Yo(s.expiryTimestamp)&&n.push(s.id)}),await Promise.all([...r.map(s=>this.deleteSession({topic:s})),...n.map(s=>this.deleteProposal(s))])}),X(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),X(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),X(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ui.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ui.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=ui.idle}),X(this,"processRequest",async r=>{const{topic:n,payload:s,attestation:i,transportType:o,encryptedId:a}=r,c=s.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,s);case"wc_sessionPing":return await this.onSessionPingRequest(n,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),X(this,"onRelayEventResponse",async r=>{const{topic:n,payload:s,transportType:i}=r,o=(await this.client.core.history.get(n,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,s);case"wc_sessionExtend":return this.onSessionExtendResponse(n,s);case"wc_sessionPing":return this.onSessionPingResponse(n,s);case"wc_sessionRequest":return this.onSessionRequestResponse(n,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),X(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:s}=ce("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),X(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:s}=r,i=this.expectedPairingMethodMap.get(n);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),X(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:s,attestation:i,encryptedId:o}=r,{params:a,id:c}=s;try{const u=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),u==null||u.setError(Zi.proposal_listener_not_found)),this.isValidConnect(bt({},s.params));const l=a.expiryTimestamp||cr(hr.wc_sessionPropose.req.ttl),h=bt({id:c,pairingTopic:n,expiryTimestamp:l},a);await this.setProposal(c,h);const d=await this.getVerifyContext({attestationId:i,hash:Ci(JSON.stringify(s)),encryptedId:o,metadata:h.proposer.metadata});u==null||u.addTrace(hi.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:h,verifyContext:d})}catch(u){await this.sendError({id:c,topic:n,error:u,rpcOpts:hr.wc_sessionPropose.autoReject}),this.client.logger.error(u)}}),X(this,"onSessionProposeResponse",async(r,n,s)=>{const{id:i}=n;if(fi(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const u=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const l=await this.client.core.crypto.generateSharedKey(c,u);this.pendingSessions.set(i,{sessionTopic:l,pairingTopic:r,proposalId:i,publicKey:c});const h=await this.client.core.relayer.subscribe(l,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:r})}else if(bs(n)){await this.client.proposal.delete(i,dt("USER_DISCONNECTED"));const o=it("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),X(this,"onSessionSettleRequest",async(r,n)=>{const{id:s,params:i}=n;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:u,sessionProperties:l,scopedProperties:h,sessionConfig:d}=n.params,f=[...this.pendingSessions.values()].find(y=>y.sessionTopic===r);if(!f)return this.client.logger.error(`Pending session not found for topic ${r}`);const p=this.client.proposal.get(f.proposalId),g=Qr(bt(bt(bt({topic:r,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},l&&{sessionProperties:l}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),{transportType:Rt.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(it("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:n.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),X(this,"onSessionSettleResponse",async(r,n)=>{const{id:s}=n;fi(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(it("session_approve",s),{})):bs(n)&&(await this.client.session.delete(r,dt("USER_DISCONNECTED")),this.events.emit(it("session_approve",s),{error:n.error}))}),X(this,"onSessionUpdateRequest",async(r,n)=>{const{params:s,id:i}=n;try{const o=`${r}_session_update`,a=xd.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:r,error:dt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(bt({topic:r},s));try{xd.set(o,i),await this.client.session.update(r,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0})}catch(c){throw xd.delete(o),c}this.client.events.emit("session_update",{id:i,topic:r,params:s})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),X(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),X(this,"onSessionUpdateResponse",(r,n)=>{const{id:s}=n,i=it("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);fi(n)?this.events.emit(it("session_update",s),{}):bs(n)&&this.events.emit(it("session_update",s),{error:n.error})}),X(this,"onSessionExtendRequest",async(r,n)=>{const{id:s}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,cr(Fu)),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),X(this,"onSessionExtendResponse",(r,n)=>{const{id:s}=n,i=it("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);fi(n)?this.events.emit(it("session_extend",s),{}):bs(n)&&this.events.emit(it("session_extend",s),{error:n.error})}),X(this,"onSessionPingRequest",async(r,n)=>{const{id:s}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),X(this,"onSessionPingResponse",(r,n)=>{const{id:s}=n,i=it("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);fi(n)?this.events.emit(it("session_ping",s),{}):bs(n)&&this.events.emit(it("session_ping",s),{error:n.error})},500)}),X(this,"onSessionDeleteRequest",async(r,n)=>{const{id:s}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(mr.publish,async()=>{i(await this.deleteSession({topic:r,id:s}))})}),this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:dt("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),X(this,"onSessionRequest",async r=>{var n,s,i;const{topic:o,payload:a,attestation:c,encryptedId:u,transportType:l}=r,{id:h,params:d}=a;try{await this.isValidRequest(bt({topic:o},d));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Ci(JSON.stringify(Aa("wc_sessionRequest",d,h))),encryptedId:u,metadata:f.peer.metadata,transportType:l}),g={id:h,topic:o,params:d,verifyContext:p};await this.setPendingSessionRequest(g),l===Rt.link_mode&&(n=f.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:h,topic:o,error:f}),this.client.logger.error(f)}}),X(this,"onSessionRequestResponse",(r,n)=>{const{id:s}=n,i=it("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);fi(n)?this.events.emit(it("session_request",s),{result:n.result}):bs(n)&&this.events.emit(it("session_request",s),{error:n.error})}),X(this,"onSessionEventRequest",async(r,n)=>{const{id:s,params:i}=n;try{const o=`${r}_session_event_${i.event.name}`,a=xd.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(bt({topic:r},i)),this.client.events.emit("session_event",{id:s,topic:r,params:i}),xd.set(o,s)}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),X(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:s}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),fi(n)?this.events.emit(it("session_request",s),{result:n.result}):bs(n)&&this.events.emit(it("session_request",s),{error:n.error})}),X(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:u,authPayload:l,expiryTimestamp:h}=i.params,d=await this.getVerifyContext({attestationId:o,hash:Ci(JSON.stringify(i)),encryptedId:a,metadata:u.metadata,transportType:c}),f={requester:u,pairingTopic:s,id:i.id,authPayload:l,verifyContext:d,expiryTimestamp:h};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Rt.link_mode&&(n=u.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(u.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:d})}catch(u){this.client.logger.error(u);const l=i.params.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),d=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Co,receiverPublicKey:l,senderPublicKey:h};await this.sendError({id:i.id,topic:s,error:u,encodeOpts:f,rpcOpts:hr.wc_sessionAuthenticate.autoReject,appLink:d})}}),X(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),X(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ui.idle,this.processSessionRequestQueue()},ae.toMiliseconds(this.requestQueueDelay))}),X(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===r&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=it("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(it("session_request",i.request.id),{error:n})})}),X(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ui.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ui.active,this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),X(this,"emitSessionRequest",r=>{this.client.events.emit("session_request",r)}),X(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(s=>s.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:Aa("wc_sessionPropose",Qr(bt({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id)})}),X(this,"isValidConnect",async r=>{if(!yn(r)){const{message:u}=ce("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(u)}const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=r;if(Or(n)||await this.isValidPairingTopic(n),!Z6(c)){const{message:u}=ce("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(u)}if(!Or(s)&&Pf(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!Or(i)&&Pf(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Or(o)||this.validateSessionProps(o,"sessionProperties"),!Or(a)){this.validateSessionProps(a,"scopedProperties");const u=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(l=>u.includes(l)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(u)}`)}}),X(this,"validateNamespaces",(r,n)=>{const s=Q6(r,"connect()",n);if(s)throw new Error(s.message)}),X(this,"isValidApprove",async r=>{if(!yn(r))throw new Error(ce("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const c=this.client.proposal.get(n),u=E0(s,"approve()");if(u)throw new Error(u.message);const l=bC(c.requiredNamespaces,s,"approve()");if(l)throw new Error(l.message);if(!nr(i,!0)){const{message:h}=ce("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(h)}if(Or(o)||this.validateSessionProps(o,"sessionProperties"),!Or(a)){this.validateSessionProps(a,"scopedProperties");const h=new Set(Object.keys(s));if(!Object.keys(a).every(d=>h.has(d)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(h).join(", ")}`)}}),X(this,"isValidReject",async r=>{if(!yn(r)){const{message:i}=ce("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(i)}const{id:n,reason:s}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!ej(s)){const{message:i}=ce("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),X(this,"isValidSessionSettleRequest",r=>{if(!yn(r)){const{message:u}=ce("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(u)}const{relay:n,controller:s,namespaces:i,expiry:o}=r;if(!gx(n)){const{message:u}=ce("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=W6(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=E0(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Yo(o)){const{message:u}=ce("EXPIRED","onSessionSettleRequest()");throw new Error(u)}}),X(this,"isValidUpdate",async r=>{if(!yn(r)){const{message:c}=ce("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:s}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const i=this.client.session.get(n),o=E0(s,"update()");if(o)throw new Error(o.message);const a=bC(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),X(this,"isValidExtend",async r=>{if(!yn(r)){const{message:s}=ce("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(s)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),X(this,"isValidRequest",async r=>{if(!yn(r)){const{message:c}=ce("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:s,chainId:i,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!wC(a,i)){const{message:c}=ce("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!tj(s)){const{message:c}=ce("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!sj(a,i,s.method)){const{message:c}=ce("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!cj(o,T0)){const{message:c}=ce("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${T0.min} and ${T0.max}`);throw new Error(c)}}),X(this,"isValidRespond",async r=>{var n;if(!yn(r)){const{message:o}=ce("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:s,response:i}=r;try{await this.isValidSessionTopic(s)}catch(o){throw(n=r==null?void 0:r.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!rj(i)){const{message:o}=ce("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),X(this,"isValidPing",async r=>{if(!yn(r)){const{message:s}=ce("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),X(this,"isValidEmit",async r=>{if(!yn(r)){const{message:a}=ce("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:s,chainId:i}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!wC(o,i)){const{message:a}=ce("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!nj(s)){const{message:a}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!ij(o,i,s.name)){const{message:a}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),X(this,"isValidDisconnect",async r=>{if(!yn(r)){const{message:s}=ce("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),X(this,"isValidAuthenticate",r=>{const{chains:n,uri:s,domain:i,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!nr(s,!1))throw new Error("uri is required parameter");if(!nr(i,!1))throw new Error("domain is required parameter");if(!nr(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>El(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=El(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),X(this,"getVerifyContext",async r=>{const{attestationId:n,hash:s,encryptedId:i,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||hf,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Rt.link_mode){const l=this.getAppLinkIfEnabled(o,a);return c.verified.validation=l&&new URL(l).origin===new URL(o.url).origin?"VALID":"INVALID",c}const u=await this.client.core.verify.resolve({attestationId:n,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});u&&(c.verified.origin=u.origin,c.verified.isScam=u.isScam,c.verified.validation=u.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.warn(u)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),X(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((s,i)=>{if(s==null){const{message:o}=ce("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${s} for key ${Object.keys(r)[i]}`);throw new Error(o)}})}),X(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),X(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),X(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:s}=ce("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(s)}}),X(this,"isLinkModeEnabled",(r,n)=>{var s,i,o,a,c,u,l,h,d;return!r||n!==Rt.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==""&&((l=r==null?void 0:r.redirect)==null?void 0:l.universal)!==void 0&&((h=r==null?void 0:r.redirect)==null?void 0:h.universal)!==""&&((d=r==null?void 0:r.redirect)==null?void 0:d.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(_e==null?void 0:_e.Linking)<"u"}),X(this,"getAppLinkIfEnabled",(r,n)=>{var s;return this.isLinkModeEnabled(r,n)?(s=r==null?void 0:r.redirect)==null?void 0:s.universal:void 0}),X(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=L1(r,"topic")||"",s=decodeURIComponent(L1(r,"wc_ev")||""),i=this.client.session.keys.includes(n);i&&this.client.session.update(n,{transportType:Rt.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:s,sessionExists:i})}),X(this,"registerLinkModeListeners",async()=>{var r;if(zv()||ja()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=_e==null?void 0:_e.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await n.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),X(this,"shouldSetTVF",(r,n)=>{if(!n||r!=="wc_sessionRequest")return!1;const{request:s}=n;return Object.keys(rS).includes(s.method)}),X(this,"getTVFParams",(r,n,s)=>{var i,o;try{const a=n.request.method,c=this.extractTxHashesFromResult(a,s);return Qr(bt({correlationId:r,rpcMethods:[a],chainId:n.chainId},this.isValidContractData(n.request.params)&&{contractAddresses:[(o=(i=n.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),X(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const s=(r==null?void 0:r.data)||((n=r==null?void 0:r[0])==null?void 0:n.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),X(this,"extractTxHashesFromResult",(r,n)=>{try{const s=rS[r];if(typeof n=="string")return[n];const i=n[s.key];if(Ia(i))return r==="solana_signAllTransactions"?i.map(o=>BF(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,s]of Object.entries(r))for(const i of s)try{await this.onProviderMessageEvent({topic:n,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(mr.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(vm)?this.client.auth.authKeys.get(vm):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:i===Rt.link_mode?Xo:Vs});Xv(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:s,transportType:i,encryptedId:Ci(n)})):tw(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:i}),this.client.core.history.delete(r,a.id)):await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(r,n)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(hs.expired,async e=>{const{topic:r,id:n}=DO(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,ce("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,ce("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(ic.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ic.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!nr(e,!1)){const{message:r}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Yo(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=ce("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!nr(e,!1)){const{message:r}=ce("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=ce("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Yo(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=ce("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=ce("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(nr(e,!1)){const{message:r}=ce("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=ce("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!X6(e)){const{message:r}=ce("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=ce("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Yo(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=ce("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class sq extends Iu{constructor(e,r){super(e,r,Hz,e_),this.core=e,this.logger=r}}let iq=class extends Iu{constructor(e,r){super(e,r,zz,e_),this.core=e,this.logger=r}};class oq extends Iu{constructor(e,r){super(e,r,Wz,e_,n=>n.id),this.core=e,this.logger=r}}class aq extends Iu{constructor(e,r){super(e,r,Jz,nw,()=>vm),this.core=e,this.logger=r}}class cq extends Iu{constructor(e,r){super(e,r,Yz,nw),this.core=e,this.logger=r}}class uq extends Iu{constructor(e,r){super(e,r,Qz,nw,n=>n.id),this.core=e,this.logger=r}}var lq=Object.defineProperty,hq=(t,e,r)=>e in t?lq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,O0=(t,e,r)=>hq(t,typeof e!="symbol"?e+"":e,r);class dq{constructor(e,r){this.core=e,this.logger=r,O0(this,"authKeys"),O0(this,"pairingTopics"),O0(this,"requests"),this.authKeys=new aq(this.core,this.logger),this.pairingTopics=new cq(this.core,this.logger),this.requests=new uq(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var fq=Object.defineProperty,pq=(t,e,r)=>e in t?fq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ve=(t,e,r)=>pq(t,typeof e!="symbol"?e+"":e,r);let gq=class jx extends jB{constructor(e){super(e),Ve(this,"protocol",$x),Ve(this,"version",Mx),Ve(this,"name",N0.name),Ve(this,"metadata"),Ve(this,"core"),Ve(this,"logger"),Ve(this,"events",new Cs.EventEmitter),Ve(this,"engine"),Ve(this,"session"),Ve(this,"proposal"),Ve(this,"pendingRequest"),Ve(this,"auth"),Ve(this,"signConfig"),Ve(this,"on",(n,s)=>this.events.on(n,s)),Ve(this,"once",(n,s)=>this.events.once(n,s)),Ve(this,"off",(n,s)=>this.events.off(n,s)),Ve(this,"removeListener",(n,s)=>this.events.removeListener(n,s)),Ve(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),Ve(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(s){throw this.logger.error(s.message),s}}),Ve(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(s){throw this.logger.error(s.message),s}}),Ve(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(s){throw this.logger.error(s.message),s}}),Ve(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(s){throw this.logger.error(s.message),s}}),Ve(this,"update",async n=>{try{return await this.engine.update(n)}catch(s){throw this.logger.error(s.message),s}}),Ve(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(s){throw this.logger.error(s.message),s}}),Ve(this,"request",async n=>{try{return await this.engine.request(n)}catch(s){throw this.logger.error(s.message),s}}),Ve(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(s){throw this.logger.error(s.message),s}}),Ve(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(s){throw this.logger.error(s.message),s}}),Ve(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(s){throw this.logger.error(s.message),s}}),Ve(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(s){throw this.logger.error(s.message),s}}),Ve(this,"find",n=>{try{return this.engine.find(n)}catch(s){throw this.logger.error(s.message),s}}),Ve(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),Ve(this,"authenticate",async(n,s)=>{try{return await this.engine.authenticate(n,s)}catch(i){throw this.logger.error(i.message),i}}),Ve(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(s){throw this.logger.error(s.message),s}}),Ve(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),Ve(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||N0.name,this.metadata=J5(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qp(Xh({level:(e==null?void 0:e.logger)||N0.logger}));this.core=(e==null?void 0:e.core)||new jz(e),this.logger=Yr(r,this.name),this.session=new iq(this.core,this.logger),this.proposal=new sq(this.core,this.logger),this.pendingRequest=new oq(this.core,this.logger),this.engine=new nq(this),this.auth=new dq(this.core,this.logger)}static async init(e){const r=new jx(e);return await r.initialize(),r}get context(){return Nn(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},ae.toMiliseconds(ae.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var jg={exports:{}},sS;function mq(){return sS||(sS=1,function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Ai<"u"&&Ai,n=function(){function i(){this.fetch=!1,this.DOMException=r.DOMException}return i.prototype=r,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof Ai<"u"&&Ai||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(C){return C&&DataView.prototype.isPrototypeOf(C)}if(c.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(C){return C&&l.indexOf(Object.prototype.toString.call(C))>-1};function d(C){if(typeof C!="string"&&(C=String(C)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(C)||C==="")throw new TypeError('Invalid character in header field name: "'+C+'"');return C.toLowerCase()}function f(C){return typeof C!="string"&&(C=String(C)),C}function p(C){var T={next:function(){var L=C.shift();return{done:L===void 0,value:L}}};return c.iterable&&(T[Symbol.iterator]=function(){return T}),T}function g(C){this.map={},C instanceof g?C.forEach(function(T,L){this.append(L,T)},this):Array.isArray(C)?C.forEach(function(T){if(T.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+T.length);this.append(T[0],T[1])},this):C&&Object.getOwnPropertyNames(C).forEach(function(T){this.append(T,C[T])},this)}g.prototype.append=function(C,T){C=d(C),T=f(T);var L=this.map[C];this.map[C]=L?L+", "+T:T},g.prototype.delete=function(C){delete this.map[d(C)]},g.prototype.get=function(C){return C=d(C),this.has(C)?this.map[C]:null},g.prototype.has=function(C){return this.map.hasOwnProperty(d(C))},g.prototype.set=function(C,T){this.map[d(C)]=f(T)},g.prototype.forEach=function(C,T){for(var L in this.map)this.map.hasOwnProperty(L)&&C.call(T,this.map[L],L,this)},g.prototype.keys=function(){var C=[];return this.forEach(function(T,L){C.push(L)}),p(C)},g.prototype.values=function(){var C=[];return this.forEach(function(T){C.push(T)}),p(C)},g.prototype.entries=function(){var C=[];return this.forEach(function(T,L){C.push([L,T])}),p(C)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(C){if(!C._noBody){if(C.bodyUsed)return Promise.reject(new TypeError("Already read"));C.bodyUsed=!0}}function b(C){return new Promise(function(T,L){C.onload=function(){T(C.result)},C.onerror=function(){L(C.error)}})}function v(C){var T=new FileReader,L=b(T);return T.readAsArrayBuffer(C),L}function _(C){var T=new FileReader,L=b(T),z=/charset=([A-Za-z0-9_-]+)/.exec(C.type),j=z?z[1]:"utf-8";return T.readAsText(C,j),L}function S(C){for(var T=new Uint8Array(C),L=new Array(T.length),z=0;z<T.length;z++)L[z]=String.fromCharCode(T[z]);return L.join("")}function N(C){if(C.slice)return C.slice(0);var T=new Uint8Array(C.byteLength);return T.set(new Uint8Array(C)),T.buffer}function A(){return this.bodyUsed=!1,this._initBody=function(C){this.bodyUsed=this.bodyUsed,this._bodyInit=C,C?typeof C=="string"?this._bodyText=C:c.blob&&Blob.prototype.isPrototypeOf(C)?this._bodyBlob=C:c.formData&&FormData.prototype.isPrototypeOf(C)?this._bodyFormData=C:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)?this._bodyText=C.toString():c.arrayBuffer&&c.blob&&u(C)?(this._bodyArrayBuffer=N(C.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(C)||h(C))?this._bodyArrayBuffer=N(C):this._bodyText=C=Object.prototype.toString.call(C):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof C=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var C=y(this);if(C)return C;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var C=y(this);return C||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(v);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var C=y(this);if(C)return C;if(this._bodyBlob)return _(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(S(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(B)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function P(C){var T=C.toUpperCase();return x.indexOf(T)>-1?T:C}function R(C,T){if(!(this instanceof R))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');T=T||{};var L=T.body;if(C instanceof R){if(C.bodyUsed)throw new TypeError("Already read");this.url=C.url,this.credentials=C.credentials,T.headers||(this.headers=new g(C.headers)),this.method=C.method,this.mode=C.mode,this.signal=C.signal,!L&&C._bodyInit!=null&&(L=C._bodyInit,C.bodyUsed=!0)}else this.url=String(C);if(this.credentials=T.credentials||this.credentials||"same-origin",(T.headers||!this.headers)&&(this.headers=new g(T.headers)),this.method=P(T.method||this.method||"GET"),this.mode=T.mode||this.mode||null,this.signal=T.signal||this.signal||function(){if("AbortController"in a){var W=new AbortController;return W.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(L),(this.method==="GET"||this.method==="HEAD")&&(T.cache==="no-store"||T.cache==="no-cache")){var z=/([?&])_=[^&]*/;if(z.test(this.url))this.url=this.url.replace(z,"$1_="+new Date().getTime());else{var j=/\?/;this.url+=(j.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}R.prototype.clone=function(){return new R(this,{body:this._bodyInit})};function B(C){var T=new FormData;return C.trim().split("&").forEach(function(L){if(L){var z=L.split("="),j=z.shift().replace(/\+/g," "),W=z.join("=").replace(/\+/g," ");T.append(decodeURIComponent(j),decodeURIComponent(W))}}),T}function $(C){var T=new g,L=C.replace(/\r?\n[\t ]+/g," ");return L.split("\r").map(function(z){return z.indexOf(`
`)===0?z.substr(1,z.length):z}).forEach(function(z){var j=z.split(":"),W=j.shift().trim();if(W){var re=j.join(":").trim();try{T.append(W,re)}catch(ne){console.warn("Response "+ne.message)}}}),T}A.call(R.prototype);function K(C,T){if(!(this instanceof K))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(T||(T={}),this.type="default",this.status=T.status===void 0?200:T.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=T.statusText===void 0?"":""+T.statusText,this.headers=new g(T.headers),this.url=T.url||"",this._initBody(C)}A.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},K.error=function(){var C=new K(null,{status:200,statusText:""});return C.ok=!1,C.status=0,C.type="error",C};var te=[301,302,303,307,308];K.redirect=function(C,T){if(te.indexOf(T)===-1)throw new RangeError("Invalid status code");return new K(null,{status:T,headers:{location:C}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(T,L){this.message=T,this.name=L;var z=Error(T);this.stack=z.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function H(C,T){return new Promise(function(L,z){var j=new R(C,T);if(j.signal&&j.signal.aborted)return z(new o.DOMException("Aborted","AbortError"));var W=new XMLHttpRequest;function re(){W.abort()}W.onload=function(){var Z={statusText:W.statusText,headers:$(W.getAllResponseHeaders()||"")};j.url.indexOf("file://")===0&&(W.status<200||W.status>599)?Z.status=200:Z.status=W.status,Z.url="responseURL"in W?W.responseURL:Z.headers.get("X-Request-URL");var he="response"in W?W.response:W.responseText;setTimeout(function(){L(new K(he,Z))},0)},W.onerror=function(){setTimeout(function(){z(new TypeError("Network request failed"))},0)},W.ontimeout=function(){setTimeout(function(){z(new TypeError("Network request timed out"))},0)},W.onabort=function(){setTimeout(function(){z(new o.DOMException("Aborted","AbortError"))},0)};function ne(Z){try{return Z===""&&a.location.href?a.location.href:Z}catch{return Z}}if(W.open(j.method,ne(j.url),!0),j.credentials==="include"?W.withCredentials=!0:j.credentials==="omit"&&(W.withCredentials=!1),"responseType"in W&&(c.blob?W.responseType="blob":c.arrayBuffer&&(W.responseType="arraybuffer")),T&&typeof T.headers=="object"&&!(T.headers instanceof g||a.Headers&&T.headers instanceof a.Headers)){var le=[];Object.getOwnPropertyNames(T.headers).forEach(function(Z){le.push(d(Z)),W.setRequestHeader(Z,f(T.headers[Z]))}),j.headers.forEach(function(Z,he){le.indexOf(he)===-1&&W.setRequestHeader(he,Z)})}else j.headers.forEach(function(Z,he){W.setRequestHeader(he,Z)});j.signal&&(j.signal.addEventListener("abort",re),W.onreadystatechange=function(){W.readyState===4&&j.signal.removeEventListener("abort",re)}),W.send(typeof j._bodyInit>"u"?null:j._bodyInit)})}return H.polyfill=!0,a.fetch||(a.fetch=H,a.Headers=g,a.Request=R,a.Response=K),o.Headers=g,o.Request=R,o.Response=K,o.fetch=H,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=r.fetch?r:n;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e}(jg,jg.exports)),jg.exports}var yq=mq();const iS=By(yq);var wq=Object.defineProperty,bq=Object.defineProperties,Eq=Object.getOwnPropertyDescriptors,oS=Object.getOwnPropertySymbols,vq=Object.prototype.hasOwnProperty,_q=Object.prototype.propertyIsEnumerable,aS=(t,e,r)=>e in t?wq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,cS=(t,e)=>{for(var r in e||(e={}))vq.call(e,r)&&aS(t,r,e[r]);if(oS)for(var r of oS(e))_q.call(e,r)&&aS(t,r,e[r]);return t},uS=(t,e)=>bq(t,Eq(e));const Aq={Accept:"application/json","Content-Type":"application/json"},Cq="POST",lS={headers:Aq,method:Cq},hS=10;let ti=class{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new Cs.EventEmitter,this.isAvailable=!1,this.registering=!1,!IC(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=Oo(e),n=await(await iS(this.url,uS(cS({},lS),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!IC(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=Oo({id:1,jsonrpc:"2.0",method:"test",params:[]});await iS(e,uS(cS({},lS),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?eu(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),s=n.message||n.toString(),i=ew(e,s);this.events.emit("payload",i)}parseError(e,r=this.url){return wx(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>hS&&this.events.setMaxListeners(hS)}};const dS="error",Sq="wss://relay.walletconnect.org",Iq="wc",Nq="universal_provider",Hg=`${Iq}@2:${Nq}:`,Hx="https://rpc.walletconnect.org/v1/",il="generic",Tq=`${Hx}bundler`,Is={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function Oq(){}function t_(t){return t==null||typeof t!="object"&&typeof t!="function"}function r_(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function xq(t){if(t_(t))return t;if(Array.isArray(t)||r_(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const n=new r(t);return n.lastIndex=t.lastIndex,n}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const n=new r(t.message);return n.stack=t.stack,n.name=t.name,n.cause=t.cause,n}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const n=Object.create(e);return Object.assign(n,t)}return t}function fS(t){return typeof t=="object"&&t!==null}function zx(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function qx(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Pq="[object RegExp]",Wx="[object String]",Vx="[object Number]",Gx="[object Boolean]",Kx="[object Arguments]",Rq="[object Symbol]",kq="[object Date]",Dq="[object Map]",Uq="[object Set]",Bq="[object Array]",Lq="[object ArrayBuffer]",$q="[object Object]",Mq="[object DataView]",Fq="[object Uint8Array]",jq="[object Uint8ClampedArray]",Hq="[object Uint16Array]",zq="[object Uint32Array]",qq="[object Int8Array]",Wq="[object Int16Array]",Vq="[object Int32Array]",Gq="[object Float32Array]",Kq="[object Float64Array]";function Jq(t,e){return fl(t,void 0,t,new Map,e)}function fl(t,e,r,n=new Map,s=void 0){const i=s==null?void 0:s(t,e,r,n);if(i!=null)return i;if(t_(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const o=new Array(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=fl(t[a],a,r,n,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;n.set(t,o);for(const[a,c]of t)o.set(a,fl(c,a,r,n,s));return o}if(t instanceof Set){const o=new Set;n.set(t,o);for(const a of t)o.add(fl(a,void 0,r,n,s));return o}if(typeof vr<"u"&&vr.isBuffer(t))return t.subarray();if(r_(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=fl(t[a],a,r,n,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,o),oc(o,t,r,n,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return n.set(t,o),oc(o,t,r,n,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return n.set(t,o),oc(o,t,r,n,s),o}if(t instanceof Error){const o=new t.constructor;return n.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,oc(o,t,r,n,s),o}if(typeof t=="object"&&Yq(t)){const o=Object.create(Object.getPrototypeOf(t));return n.set(t,o),oc(o,t,r,n,s),o}return t}function oc(t,e,r=t,n,s){const i=[...Object.keys(e),...zx(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=fl(e[a],a,r,n,s))}}function Yq(t){switch(qx(t)){case Kx:case Bq:case Lq:case Mq:case Gx:case kq:case Gq:case Kq:case qq:case Wq:case Vq:case Dq:case Vx:case $q:case Pq:case Uq:case Wx:case Rq:case Fq:case jq:case Hq:case zq:return!0;default:return!1}}function Qq(t,e){return Jq(t,(r,n,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case Vx:case Wx:case Gx:{const o=new t.constructor(t==null?void 0:t.valueOf());return oc(o,t),o}case Kx:{const o={};return oc(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function pS(t){return Qq(t)}function gS(t){return t!==null&&typeof t=="object"&&qx(t)==="[object Arguments]"}function Zq(t){return r_(t)}function Xq(t){var r;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!((r=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&r.writable)?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function eW(t,...e){const r=e.slice(0,-1),n=e[e.length-1];let s=t;for(let i=0;i<r.length;i++){const o=r[i];s=gE(s,o,n,new Map)}return s}function gE(t,e,r,n){if(t_(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(n.has(e))return xq(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...zx(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(gS(a)&&(a={...a}),gS(c)&&(c={...c}),typeof vr<"u"&&vr.isBuffer(a)&&(a=pS(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const l=[],h=Reflect.ownKeys(c);for(let d=0;d<h.length;d++){const f=h[d];l[f]=c[f]}c=l}else c=[];const u=r(c,a,o,t,e,n);u!=null?t[o]=u:Array.isArray(a)||fS(c)&&fS(a)?t[o]=gE(c,a,r,n):c==null&&Xq(a)?t[o]=gE({},a,r,n):c==null&&Zq(a)?t[o]=pS(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function tW(t,...e){return eW(t,...e,Oq)}var rW=Object.defineProperty,nW=Object.defineProperties,sW=Object.getOwnPropertyDescriptors,mS=Object.getOwnPropertySymbols,iW=Object.prototype.hasOwnProperty,oW=Object.prototype.propertyIsEnumerable,yS=(t,e,r)=>e in t?rW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zg=(t,e)=>{for(var r in e||(e={}))iW.call(e,r)&&yS(t,r,e[r]);if(mS)for(var r of mS(e))oW.call(e,r)&&yS(t,r,e[r]);return t},aW=(t,e)=>nW(t,sW(e));function Kn(t,e,r){var n;const s=El(t);return((n=e.rpcMap)==null?void 0:n[s.reference])||`${Hx}?chainId=${s.namespace}:${s.reference}&projectId=${r}`}function Nu(t){return t.includes(":")?t.split(":")[1]:t}function Jx(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function cW(t,e){const r=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!r.length)return[];const n=[];return r.forEach(s=>{const i=e.namespaces[s].accounts;n.push(...i)}),n}function x0(t={},e={}){const r=wS(t),n=wS(e);return tW(r,n)}function wS(t){var e,r,n,s;const i={};if(!Pf(t))return i;for(const[o,a]of Object.entries(t)){const c=Yv(o)?[o]:a.chains,u=a.methods||[],l=a.events||[],h=a.rpcMap||{},d=Wd(o);i[d]=aW(zg(zg({},i[d]),a),{chains:ym(c,(e=i[d])==null?void 0:e.chains),methods:ym(u,(r=i[d])==null?void 0:r.methods),events:ym(l,(n=i[d])==null?void 0:n.events),rpcMap:zg(zg({},h),(s=i[d])==null?void 0:s.rpcMap)})}return i}function bS(t){return t.includes(":")?t.split(":")[2]:t}function ES(t){const e={};for(const[r,n]of Object.entries(t)){const s=n.methods||[],i=n.events||[],o=n.accounts||[],a=Yv(r)?[r]:n.chains?n.chains:Jx(n.accounts);e[r]={chains:a,methods:s,events:i,accounts:o}}return e}function P0(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const Yx={},nt=t=>Yx[t],R0=(t,e)=>{Yx[t]=e};var uW=Object.defineProperty,lW=(t,e,r)=>e in t?uW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ju=(t,e,r)=>lW(t,typeof e!="symbol"?e+"":e,r);class hW{constructor(e){ju(this,"name","polkadot"),ju(this,"client"),ju(this,"httpProviders"),ju(this,"events"),ju(this,"namespace"),ju(this,"chainId"),this.namespace=e.namespace,this.events=nt("events"),this.client=nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Is.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Nu(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Kn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ss(new ti(n,nt("disableProviderPing")))}}var dW=Object.defineProperty,fW=Object.defineProperties,pW=Object.getOwnPropertyDescriptors,vS=Object.getOwnPropertySymbols,gW=Object.prototype.hasOwnProperty,mW=Object.prototype.propertyIsEnumerable,mE=(t,e,r)=>e in t?dW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_S=(t,e)=>{for(var r in e||(e={}))gW.call(e,r)&&mE(t,r,e[r]);if(vS)for(var r of vS(e))mW.call(e,r)&&mE(t,r,e[r]);return t},AS=(t,e)=>fW(t,pW(e)),Hu=(t,e,r)=>mE(t,typeof e!="symbol"?e+"":e,r);class yW{constructor(e){Hu(this,"name","eip155"),Hu(this,"client"),Hu(this,"chainId"),Hu(this,"namespace"),Hu(this,"httpProviders"),Hu(this,"events"),this.namespace=e.namespace,this.events=nt("events"),this.client=nt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(Is.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||Kn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ss(new ti(n,nt("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=parseInt(Nu(r));e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let s=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,s;const i=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0];if(!i)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const o=this.client.session.get(e.topic),a=((s=o==null?void 0:o.sessionProperties)==null?void 0:s.capabilities)||{};if(a!=null&&a[i])return a==null?void 0:a[i];const c=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:AS(_S({},o.sessionProperties||{}),{capabilities:AS(_S({},a||{}),{[i]:c})})})}catch(u){console.warn("Failed to update session with capabilities",u)}return c}async getCallStatus(e){var r,n;const s=this.client.session.get(e.topic),i=(r=s.sessionProperties)==null?void 0:r.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(n=s.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Aa("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,r){return`${Tq}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}var wW=Object.defineProperty,bW=(t,e,r)=>e in t?wW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zu=(t,e,r)=>bW(t,typeof e!="symbol"?e+"":e,r);class EW{constructor(e){zu(this,"name","solana"),zu(this,"client"),zu(this,"httpProviders"),zu(this,"events"),zu(this,"namespace"),zu(this,"chainId"),this.namespace=e.namespace,this.events=nt("events"),this.client=nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Is.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Nu(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Kn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ss(new ti(n,nt("disableProviderPing")))}}var vW=Object.defineProperty,_W=(t,e,r)=>e in t?vW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qu=(t,e,r)=>_W(t,typeof e!="symbol"?e+"":e,r);class AW{constructor(e){qu(this,"name","cosmos"),qu(this,"client"),qu(this,"httpProviders"),qu(this,"events"),qu(this,"namespace"),qu(this,"chainId"),this.namespace=e.namespace,this.events=nt("events"),this.client=nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Is.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Nu(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Kn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ss(new ti(n,nt("disableProviderPing")))}}var CW=Object.defineProperty,SW=(t,e,r)=>e in t?CW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Wu=(t,e,r)=>SW(t,typeof e!="symbol"?e+"":e,r);class IW{constructor(e){Wu(this,"name","algorand"),Wu(this,"client"),Wu(this,"httpProviders"),Wu(this,"events"),Wu(this,"namespace"),Wu(this,"chainId"),this.namespace=e.namespace,this.events=nt("events"),this.client=nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||Kn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(Is.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Kn(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new Ss(new ti(n,nt("disableProviderPing")))}}var NW=Object.defineProperty,TW=(t,e,r)=>e in t?NW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vu=(t,e,r)=>TW(t,typeof e!="symbol"?e+"":e,r);class OW{constructor(e){Vu(this,"name","cip34"),Vu(this,"client"),Vu(this,"httpProviders"),Vu(this,"events"),Vu(this,"namespace"),Vu(this,"chainId"),this.namespace=e.namespace,this.events=nt("events"),this.client=nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Is.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),s=Nu(r);e[s]=this.createHttpProvider(s,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ss(new ti(n,nt("disableProviderPing")))}}var xW=Object.defineProperty,PW=(t,e,r)=>e in t?xW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Gu=(t,e,r)=>PW(t,typeof e!="symbol"?e+"":e,r);class RW{constructor(e){Gu(this,"name","elrond"),Gu(this,"client"),Gu(this,"httpProviders"),Gu(this,"events"),Gu(this,"namespace"),Gu(this,"chainId"),this.namespace=e.namespace,this.events=nt("events"),this.client=nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Is.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Nu(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Kn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ss(new ti(n,nt("disableProviderPing")))}}var kW=Object.defineProperty,DW=(t,e,r)=>e in t?kW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ku=(t,e,r)=>DW(t,typeof e!="symbol"?e+"":e,r);class UW{constructor(e){Ku(this,"name","multiversx"),Ku(this,"client"),Ku(this,"httpProviders"),Ku(this,"events"),Ku(this,"namespace"),Ku(this,"chainId"),this.namespace=e.namespace,this.events=nt("events"),this.client=nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Is.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Nu(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Kn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ss(new ti(n,nt("disableProviderPing")))}}var BW=Object.defineProperty,LW=(t,e,r)=>e in t?BW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ju=(t,e,r)=>LW(t,typeof e!="symbol"?e+"":e,r);class $W{constructor(e){Ju(this,"name","near"),Ju(this,"client"),Ju(this,"httpProviders"),Ju(this,"events"),Ju(this,"namespace"),Ju(this,"chainId"),this.namespace=e.namespace,this.events=nt("events"),this.client=nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Kn(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Is.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Kn(e,this.namespace);return typeof n>"u"?void 0:new Ss(new ti(n,nt("disableProviderPing")))}}var MW=Object.defineProperty,FW=(t,e,r)=>e in t?MW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yu=(t,e,r)=>FW(t,typeof e!="symbol"?e+"":e,r);class jW{constructor(e){Yu(this,"name","tezos"),Yu(this,"client"),Yu(this,"httpProviders"),Yu(this,"events"),Yu(this,"namespace"),Yu(this,"chainId"),this.namespace=e.namespace,this.events=nt("events"),this.client=nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Kn(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Is.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Kn(e,this.namespace);return typeof n>"u"?void 0:new Ss(new ti(n))}}var HW=Object.defineProperty,zW=(t,e,r)=>e in t?HW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qu=(t,e,r)=>zW(t,typeof e!="symbol"?e+"":e,r);class qW{constructor(e){Qu(this,"name",il),Qu(this,"client"),Qu(this,"httpProviders"),Qu(this,"events"),Qu(this,"namespace"),Qu(this,"chainId"),this.namespace=e.namespace,this.events=nt("events"),this.client=nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Is.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(s=>{const i=El(s);n[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),n}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Kn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ss(new ti(n,nt("disableProviderPing")))}}var WW=Object.defineProperty,VW=Object.defineProperties,GW=Object.getOwnPropertyDescriptors,CS=Object.getOwnPropertySymbols,KW=Object.prototype.hasOwnProperty,JW=Object.prototype.propertyIsEnumerable,yE=(t,e,r)=>e in t?WW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qg=(t,e)=>{for(var r in e||(e={}))KW.call(e,r)&&yE(t,r,e[r]);if(CS)for(var r of CS(e))JW.call(e,r)&&yE(t,r,e[r]);return t},k0=(t,e)=>VW(t,GW(e)),is=(t,e,r)=>yE(t,typeof e!="symbol"?e+"":e,r);let YW=class Qx{constructor(e){is(this,"client"),is(this,"namespaces"),is(this,"optionalNamespaces"),is(this,"sessionProperties"),is(this,"scopedProperties"),is(this,"events",new Rv),is(this,"rpcProviders",{}),is(this,"session"),is(this,"providerOpts"),is(this,"logger"),is(this,"uri"),is(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qp(Xh({level:(e==null?void 0:e.logger)||dS})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new Qx(e);return await r.initialize(),r}async request(e,r,n){const[s,i]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:qg({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,s){const i=new Date().getTime();this.request(e,n,s).then(o=>r(null,Xy(i,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:dt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:s}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const i=await s();if(this.session=i.session,this.session){const o=ES(this.session.namespaces);this.namespaces=x0(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});r&&(this.uri=r,this.events.emit("display_uri",r));const s=await n();this.session=s;const i=ES(s.namespaces);return this.namespaces=x0(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,s]=this.validateChain(e),i=this.getProvider(n);i.name===il?i.setDefaultChain(`${n}:${s}`,r):i.setDefaultChain(s,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(Ia(r)){for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await gq.init({core:this.providerOpts.core,logger:this.providerOpts.logger||dS,relayUrl:this.providerOpts.relayUrl||Sq,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error("Failed to get session",n),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>Wd(r)))];R0("client",this.client),R0("events",this.events),R0("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=cW(r,this.session),s=Jx(n),i=x0(this.namespaces,this.optionalNamespaces),o=k0(qg({},i[r]),{accounts:n,chains:s});switch(r){case"eip155":this.rpcProviders[r]=new yW({namespace:o});break;case"algorand":this.rpcProviders[r]=new IW({namespace:o});break;case"solana":this.rpcProviders[r]=new EW({namespace:o});break;case"cosmos":this.rpcProviders[r]=new AW({namespace:o});break;case"polkadot":this.rpcProviders[r]=new hW({namespace:o});break;case"cip34":this.rpcProviders[r]=new OW({namespace:o});break;case"elrond":this.rpcProviders[r]=new RW({namespace:o});break;case"multiversx":this.rpcProviders[r]=new UW({namespace:o});break;case"near":this.rpcProviders[r]=new $W({namespace:o});break;case"tezos":this.rpcProviders[r]=new jW({namespace:o});break;default:this.rpcProviders[il]?this.rpcProviders[il].updateNamespace(o):this.rpcProviders[il]=new qW({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:n}=e;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:n,topic:s}=e;if(s!==((r=this.session)==null?void 0:r.topic))return;const{event:i}=n;if(i.name==="accountsChanged"){const o=i.data;o&&Ia(o)&&this.events.emit("accountsChanged",o.map(bS))}else if(i.name==="chainChanged"){const o=n.chainId,a=n.event.data,c=Wd(o),u=P0(o)!==P0(a)?`${c}:${P0(a)}`:o;this.onChainChanged(u)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n,s;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:i}=r,o=(s=this.client)==null?void 0:s.session.get(e);this.session=k0(qg({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",k0(qg({},dt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Is.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[il]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:n,sessionProperties:s,scopedProperties:i}=e;r&&Object.keys(r).length&&(this.namespaces=r),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[r,n]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>Wd(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const s=Wd(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,r=!1){if(!this.namespaces)return;const[n,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(n,s),this.events.emit("chainChanged",s);const i=this.getProvider(n).getDefaultChain();r||this.getProvider(n).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:n,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:r,newChainId:n}){var s,i;try{if(r===n)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${n}:`)).map(bS);if(!Ia(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,r){if(!this.namespaces)return;const n=this.namespaces[e]?e:`${e}:${r}`,s={chains:[],methods:[],events:[],defaultChain:r};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=r):this.namespaces[n]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var n;const s=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${Hg}/${e}${s}`,r)}async getFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${Hg}/${e}${n}`)}async deleteFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${Hg}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(Hg)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn("Failed to cleanup storage",r)}}};var Sh={};const QW="https://secure.walletconnect.org/sdk",ZW=(typeof kr<"u"&&typeof Sh<"u"?Sh.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||QW,XW=(typeof kr<"u"&&typeof Sh<"u"?Sh.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",eV=(typeof kr<"u"&&typeof Sh<"u"?Sh.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ee={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},sr={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Xa=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),ar=Ht({...Xa}),xr={state:ar,subscribeKey(t,e){return In(ar,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Oe.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){ar.message=Xa.message,ar.variant=Xa.variant,ar.svg=Xa.svg,ar.open=Xa.open,ar.autoClose=Xa.autoClose},_showMessage({message:t,svg:e,variant:r="success",autoClose:n=Xa.autoClose}){ar.open?(ar.open=!1,setTimeout(()=>{ar.message=t,ar.variant=r,ar.svg=e,ar.open=!0,ar.autoClose=n},150)):(ar.message=t,ar.variant=r,ar.svg=e,ar.open=!0,ar.autoClose=n)}},ff={getSIWX(){return ie.state.siwx},async initializeIfEnabled(){var i;const t=ie.state.siwx,e=U.getActiveCaipAddress();if(!(t&&e))return;const[r,n,s]=e.split(":");if(U.checkIfSupportedNetwork(r))try{if((await t.getSessions(`${r}:${n}`,s)).length)return;await Qt.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),At.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=xt._getClient())==null?void 0:i.disconnect().catch(console.error)),ut.reset("Connect"),xr.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=ie.state.siwx,e=Oe.getPlainAddress(U.getActiveCaipAddress()),r=U.getActiveCaipNetwork(),n=xt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");if(!n)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:r.caipNetworkId,accountAddress:e}),i=s.toString();De.getConnectorId(r.chainNamespace)===oe.CONNECTOR_ID.AUTH&&ut.pushTransactionStack({view:null,goBack:!1,replace:!0});const a=await n.signMessage(i);await t.addSession({data:s,message:i,signature:a}),Qt.close(),At.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Qt.state.open||ut.state.view==="ApproveTransaction")&&await Qt.open({view:"SIWXSignMessage"}),i.isSmartAccount?xr.showError("This application might not support Smart Accounts"):xr.showError("Signature declined"),At.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await xt.disconnect():Qt.close(),ut.reset("Connect"),At.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=ie.state.siwx,e=Oe.getPlainAddress(U.getActiveCaipAddress()),r=U.getActiveCaipNetwork();return t&&e&&r?t.getSessions(r.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const r=ut.state.view==="ApproveTransaction",n=ut.state.view==="SIWXSignMessage";if(r||n)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:r}){var a,c,u;const n=ff.getSIWX(),s=new Set(e.map(l=>l.split(":")[0]));if(!n||s.size!==1||!s.has("eip155"))return!1;const i=await n.createMessage({chainId:((a=U.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:r,chains:[i.chainId,...e.filter(l=>l!==i.chainId)]});if(xr.showLoading("Authenticating...",{autoClose:!1}),we.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(u=o==null?void 0:o.auths)!=null&&u.length){const l=o.auths.map(h=>{const d=t.client.formatAuthMessage({request:h.p,iss:h.p.iss});return{data:{...h.p,accountAddress:h.p.iss.split(":").slice(-1).join(""),chainId:h.p.iss.split(":").slice(2,4).join(":"),uri:h.p.aud,version:h.p.version||i.version,expirationTime:h.p.exp,issuedAt:h.p.iat,notBefore:h.p.nbf},message:d,signature:h.s.s,cacao:h}});try{await n.setSessions(l),At.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:ff.getSIWXEventProperties()})}catch(h){throw console.error("SIWX:universalProviderAuth - failed to set sessions",h),At.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:ff.getSIWXEventProperties()}),await t.disconnect().catch(console.error),h}finally{xr.hide()}}return!0},getSIWXEventProperties(){var e,r;const t=U.state.activeChain;return{network:((e=U.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((r=we.state.preferredAccountTypes)==null?void 0:r[t])===sr.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Tt=Ht({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),tV={state:Tt,subscribe(t){return Gr(Tt,()=>t(Tt))},setLastNetworkInView(t){Tt.lastNetworkInView=t},async fetchTransactions(t,e){var r,n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Tt.loading=!0;try{const s=await Te.fetchTransactions({account:t,cursor:Tt.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(r=U.state.activeCaipNetwork)==null?void 0:r.caipNetworkId}),i=this.filterSpamTransactions(s.data),o=this.filterByConnectedChain(i),a=[...Tt.transactions,...o];Tt.loading=!1,e==="coinbase"?Tt.coinbaseTransactions=this.groupTransactionsByYearAndMonth(Tt.coinbaseTransactions,s.data):(Tt.transactions=a,Tt.transactionsByYear=this.groupTransactionsByYearAndMonth(Tt.transactionsByYear,o)),Tt.empty=a.length===0,Tt.next=s.next?s.next:void 0}catch{const i=U.state.activeChain;At.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ie.state.projectId,cursor:Tt.next,isSmartAccount:((n=we.state.preferredAccountTypes)==null?void 0:n[i])===sr.ACCOUNT_TYPES.SMART_ACCOUNT}}),xr.showError("Failed to fetch transactions"),Tt.loading=!1,Tt.empty=!0,Tt.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const r=t;return e.forEach(n=>{const s=new Date(n.metadata.minedAt).getFullYear(),i=new Date(n.metadata.minedAt).getMonth(),o=r[s]??{},c=(o[i]??[]).filter(u=>u.id!==n.id);r[s]={...o,[i]:[...c,n].sort((u,l)=>new Date(l.metadata.minedAt).getTime()-new Date(u.metadata.minedAt).getTime())}}),r},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(n=>{var s;return((s=n.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var n;const e=(n=U.state.activeCaipNetwork)==null?void 0:n.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Tt.next=void 0},resetTransactions(){Tt.transactions=[],Tt.transactionsByYear={},Tt.lastNetworkInView=void 0,Tt.loading=!1,Tt.empty=!1,Tt.next=void 0}},Ot=Ht({wcError:!1,buffering:!1,status:"disconnected"});let Zu;const xt={state:Ot,subscribeKey(t,e){return In(Ot,t,e)},_getClient(){return Ot._client},setClient(t){Ot._client=Xc(t)},async connectWalletConnect(){var t,e,r,n;if(Oe.isTelegram()||Oe.isSafari()&&Oe.isIos()){if(Zu){await Zu,Zu=void 0;return}if(!Oe.isPairingExpired(Ot==null?void 0:Ot.wcPairingExpiry)){const s=Ot.wcUri;Ot.wcUri=s;return}Zu=(e=(t=this._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),this.state.status="connecting",await Zu,Zu=void 0,Ot.wcPairingExpiry=void 0,this.state.status="connected"}else await((n=(r=this._getClient())==null?void 0:r.connectWalletConnect)==null?void 0:n.call(r))},async connectExternal(t,e,r=!0){var n,s;await((s=(n=this._getClient())==null?void 0:n.connectExternal)==null?void 0:s.call(n,t)),r&&U.setActiveNamespace(e)},async reconnectExternal(t){var r,n;await((n=(r=this._getClient())==null?void 0:r.reconnectExternal)==null?void 0:n.call(r,t));const e=t.chain||U.state.activeChain;e&&De.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var n;Qt.setLoading(!0,U.state.activeChain);const r=De.getAuthConnector();r&&(we.setPreferredAccountType(t,e),await r.provider.setPreferredAccount(t),ge.setPreferredAccountTypes(we.state.preferredAccountTypes??{[e]:t}),await this.reconnectExternal(r),Qt.setLoading(!1,U.state.activeChain),At.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((n=U.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=this._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var r;return(r=this._getClient())==null?void 0:r.parseUnits(t,e)},formatUnits(t,e){var r;return(r=this._getClient())==null?void 0:r.formatUnits(t,e)},async sendTransaction(t){var e;return(e=this._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=this._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=this._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=this._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=this._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=this._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=this._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=this._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,r;return((r=(e=this._getClient())==null?void 0:e.checkInstalled)==null?void 0:r.call(e,t))||!1},resetWcConnection(){Ot.wcUri=void 0,Ot.wcPairingExpiry=void 0,Ot.wcLinking=void 0,Ot.recentWallet=void 0,Ot.status="disconnected",tV.resetTransactions(),ge.deleteWalletConnectDeepLink()},resetUri(){Ot.wcUri=void 0,Ot.wcPairingExpiry=void 0},finalizeWcConnection(){var r,n;const{wcLinking:t,recentWallet:e}=xt.state;t&&ge.setWalletConnectDeepLink(t),e&&ge.setAppKitRecent(e),At.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((n=(r=ut.state.data)==null?void 0:r.wallet)==null?void 0:n.name)||"Unknown"}})},setWcBasic(t){Ot.wcBasic=t},setUri(t){Ot.wcUri=t,Ot.wcPairingExpiry=Oe.getPairingExpiry()},setWcLinking(t){Ot.wcLinking=t},setWcError(t){Ot.wcError=t,Ot.buffering=!1},setRecentWallet(t){Ot.recentWallet=t},setBuffering(t){Ot.buffering=t},setStatus(t){Ot.status=t},async disconnect(t){try{Qt.setLoading(!0,t),await ff.clearSessions(),await U.disconnect(t),Qt.setLoading(!1,t),De.setFilterByNamespace(void 0)}catch{throw new Error("Failed to disconnect")}}},Xu=Ht({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Ri={state:Xu,subscribe(t){return Gr(Xu,()=>t(Xu))},subscribeOpen(t){return In(Xu,"open",t)},set(t){Object.assign(Xu,{...Xu,...t})}};function rV(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function SS(t){return rV(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const Zx="2.27.0";let Ud={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${Zx}`};class Jn extends Error{constructor(e,r={}){var a;const n=(()=>{var c;return r.cause instanceof Jn?r.cause.details:(c=r.cause)!=null&&c.message?r.cause.message:r.details})(),s=r.cause instanceof Jn&&r.cause.docsPath||r.docsPath,i=(a=Ud.getDocsUrl)==null?void 0:a.call(Ud,{...r,docsPath:s}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...n?[`Details: ${n}`]:[],...Ud.version?[`Version: ${Ud.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=s,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=Zx}walk(e){return Xx(this,e)}}function Xx(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?Xx(t.cause,e):e?null:t}class eP extends Jn{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}function n_(t,{dir:e,size:r=32}={}){return typeof t=="string"?nV(t,{dir:e,size:r}):sV(t,{dir:e,size:r})}function nV(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new eP({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function sV(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new eP({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let s=0;s<r;s++){const i=e==="right";n[i?s:r-s-1]=t[i?s:t.length-s-1]}return n}class iV extends Jn{constructor({max:e,min:r,signed:n,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class oV extends Jn{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function tP(t,{size:e}){if(SS(t)>e)throw new oV({givenSize:SS(t),maxSize:e})}const aV=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function IS(t,e={}){return typeof t=="number"||typeof t=="bigint"?uV(t,e):typeof t=="string"?nP(t,e):typeof t=="boolean"?cV(t,e):rP(t,e)}function cV(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(tP(r,{size:e.size}),n_(r,{size:e.size})):r}function rP(t,e={}){let r="";for(let s=0;s<t.length;s++)r+=aV[t[s]];const n=`0x${r}`;return typeof e.size=="number"?(tP(n,{size:e.size}),n_(n,{dir:"right",size:e.size})):n}function uV(t,e={}){const{signed:r,size:n}=e,s=BigInt(t);let i;n?r?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&r?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new iV({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?n_(a,{size:n}):a}const lV=new TextEncoder;function nP(t,e={}){const r=lV.encode(t);return rP(r,e)}class hV extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const Wc=(t,e,r)=>JSON.stringify(t,(n,s)=>typeof s=="bigint"?s.toString():s,r);function dV(t,e){let r=t.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(e,"0");let[s,i]=[r.slice(0,r.length-e),r.slice(r.length-e)];return i=i.replace(/(0+)$/,""),`${n?"-":""}${s||"0"}${i?`.${i}`:""}`}const s_=t=>t;class pf extends Jn{constructor({body:e,cause:r,details:n,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:r,details:n,metaMessages:[i&&`Status: ${i}`,`URL: ${s_(o)}`,e&&`Request body: ${Wc(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class sP extends Jn{constructor({body:e,error:r,url:n}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${s_(n)}`,`Request body: ${Wc(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code,this.data=r.data}}class NS extends Jn{constructor({body:e,url:r}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${s_(r)}`,`Request body: ${Wc(e)}`],name:"TimeoutError"})}}const fV=-1;class Tn extends Jn{constructor(e,{code:r,docsPath:n,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof sP?e.code:r??fV}}class ts extends Tn{constructor(e,r){super(e,r),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r.data}}class kf extends Tn{constructor(e){super(e,{code:kf.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(kf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Df extends Tn{constructor(e){super(e,{code:Df.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Df,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Uf extends Tn{constructor(e,{method:r}={}){super(e,{code:Uf.code,name:"MethodNotFoundRpcError",shortMessage:`The method${r?` "${r}"`:""} does not exist / is not available.`})}}Object.defineProperty(Uf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Bf extends Tn{constructor(e){super(e,{code:Bf.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Bf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Ih extends Tn{constructor(e){super(e,{code:Ih.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Ih,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Lf extends Tn{constructor(e){super(e,{code:Lf.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Lf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class $f extends Tn{constructor(e){super(e,{code:$f.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty($f,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Mf extends Tn{constructor(e){super(e,{code:Mf.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Mf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Nh extends Tn{constructor(e){super(e,{code:Nh.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Nh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class pc extends Tn{constructor(e,{method:r}={}){super(e,{code:pc.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${r?` "${r}"`:""} is not supported.`})}}Object.defineProperty(pc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Th extends Tn{constructor(e){super(e,{code:Th.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Th,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Ff extends Tn{constructor(e){super(e,{code:Ff.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Ff,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Vc extends ts{constructor(e){super(e,{code:Vc.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Vc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class jf extends ts{constructor(e){super(e,{code:jf.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(jf,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Hf extends ts{constructor(e,{method:r}={}){super(e,{code:Hf.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${r?` " ${r}"`:""}.`})}}Object.defineProperty(Hf,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class zf extends ts{constructor(e){super(e,{code:zf.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(zf,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class qf extends ts{constructor(e){super(e,{code:qf.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(qf,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Wf extends ts{constructor(e){super(e,{code:Wf.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Wf,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Vf extends ts{constructor(e){super(e,{code:Vf.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Vf,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Gf extends ts{constructor(e){super(e,{code:Gf.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Gf,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Kf extends ts{constructor(e){super(e,{code:Kf.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Kf,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Jf extends ts{constructor(e){super(e,{code:Jf.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Jf,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Yf extends ts{constructor(e){super(e,{code:Yf.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Yf,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Qf extends ts{constructor(e){super(e,{code:Qf.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Qf,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Zf extends ts{constructor(e){super(e,{code:Zf.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Zf,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class pV extends Tn{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}class i_ extends Jn{constructor({cause:e,message:r}={}){var s;const n=(s=r==null?void 0:r.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(i_,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(i_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});function gV(){let t=()=>{},e=()=>{};return{promise:new Promise((n,s)=>{t=n,e=s}),resolve:t,reject:e}}const D0=new Map;function mV({fn:t,id:e,shouldSplitBatch:r,wait:n=0,sort:s}){const i=async()=>{const l=c();o();const h=l.map(({args:d})=>d);h.length!==0&&t(h).then(d=>{s&&Array.isArray(d)&&d.sort(s);for(let f=0;f<l.length;f++){const{resolve:p}=l[f];p==null||p([d[f],d])}}).catch(d=>{for(let f=0;f<l.length;f++){const{reject:p}=l[f];p==null||p(d)}})},o=()=>D0.delete(e),a=()=>c().map(({args:l})=>l),c=()=>D0.get(e)||[],u=l=>D0.set(e,[...c(),l]);return{flush:o,async schedule(l){const{promise:h,resolve:d,reject:f}=gV();return(r==null?void 0:r([...a(),l]))&&i(),c().length>0?(u({args:l,resolve:d,reject:f}),h):(u({args:l,resolve:d,reject:f}),setTimeout(i,n),h)}}}async function iP(t){return new Promise(e=>setTimeout(e,t))}const wE=256;let Wg=wE,Vg;function yV(t=11){if(!Vg||Wg+t>wE*2){Vg="",Wg=0;for(let e=0;e<wE;e++)Vg+=(256+Math.random()*256|0).toString(16).substring(1)}return Vg.substring(Wg,Wg+++t)}const Gg=new hV(8192);function wV(t,{enabled:e=!0,id:r}){if(!e||!r)return t();if(Gg.get(r))return Gg.get(r);const n=t().finally(()=>Gg.delete(r));return Gg.set(r,n),n}function bV(t,{delay:e=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:u})=>{const l=typeof e=="function"?e({count:a,error:u}):e;l&&await iP(l),o({count:a+1})};try{const u=await t();s(u)}catch(u){if(a<r&&await n({count:a,error:u}))return c({error:u});i(u)}};o()})}function EV(t,e={}){return async(r,n={})=>{var h;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...n},{method:u}=r;if((h=i==null?void 0:i.exclude)!=null&&h.includes(u))throw new pc(new Error("method not supported"),{method:u});if(i!=null&&i.include&&!i.include.includes(u))throw new pc(new Error("method not supported"),{method:u});const l=s?nP(`${c}.${Wc(r)}`):void 0;return wV(()=>bV(async()=>{try{return await t(r)}catch(d){const f=d;switch(f.code){case kf.code:throw new kf(f);case Df.code:throw new Df(f);case Uf.code:throw new Uf(f,{method:r.method});case Bf.code:throw new Bf(f);case Ih.code:throw new Ih(f);case Lf.code:throw new Lf(f);case $f.code:throw new $f(f);case Mf.code:throw new Mf(f);case Nh.code:throw new Nh(f);case pc.code:throw new pc(f,{method:r.method});case Th.code:throw new Th(f);case Ff.code:throw new Ff(f);case Vc.code:throw new Vc(f);case jf.code:throw new jf(f);case Hf.code:throw new Hf(f);case zf.code:throw new zf(f);case qf.code:throw new qf(f);case Wf.code:throw new Wf(f);case Vf.code:throw new Vf(f);case Gf.code:throw new Gf(f);case Kf.code:throw new Kf(f);case Jf.code:throw new Jf(f);case Yf.code:throw new Yf(f);case Qf.code:throw new Qf(f);case Zf.code:throw new Zf(f);case 5e3:throw new Vc(f);default:throw d instanceof Jn?d:new pV(f)}}},{delay:({count:d,error:f})=>{var p;if(f&&f instanceof pf){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<d)*o},retryCount:a,shouldRetry:({error:d})=>vV(d)}),{enabled:s,id:l})}}function vV(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Th.code||t.code===Ih.code:t instanceof pf&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function oP({key:t,methods:e,name:r,request:n,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const u=yV();return{config:{key:t,methods:e,name:r,request:n,retryCount:s,retryDelay:i,timeout:o,type:a},request:EV(n,{methods:e,retryCount:s,retryDelay:i,uid:u}),value:c}}function TS(t,e={}){const{key:r="fallback",name:n="Fallback",rank:s=!1,shouldThrow:i=_V,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:u=4e3,timeout:l,...h})=>{let d=t,f=()=>{};const p=oP({key:r,name:n,async request({method:g,params:y}){let b;const v=async(_=0)=>{const S=d[_]({...h,chain:c,retryCount:0,timeout:l});try{const N=await S.request({method:g,params:y});return f({method:g,params:y,response:N,transport:S,status:"success"}),N}catch(N){if(f({error:N,method:g,params:y,transport:S,status:"error"}),i(N)||_===d.length-1||(b??(b=d.slice(_+1).some(A=>{const{include:x,exclude:P}=A({chain:c}).config.methods||{};return x?x.includes(g):P?!P.includes(g):!0})),!b))throw N;return v(_+1)}};return v()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:d.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};AV({chain:c,interval:g.interval??u,onTransports:y=>d=y,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:d,weights:g.weights})}return p}}function _V(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Nh.code||t.code===Vc.code||i_.nodeMessage.test(t.message)||t.code===5e3))}function AV({chain:t,interval:e=4e3,onTransports:r,ping:n,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:u=.3}=a,l=[],h=async()=>{const d=await Promise.all(o.map(async g=>{const y=g({chain:t,retryCount:0,timeout:i}),b=Date.now();let v,_;try{await(n?n({transport:y}):y.request({method:"net_listening"})),_=1}catch{_=0}finally{v=Date.now()}return{latency:v-b,success:_}}));l.push(d),l.length>s&&l.shift();const f=Math.max(...l.map(g=>Math.max(...g.map(({latency:y})=>y)))),p=o.map((g,y)=>{const b=l.map(A=>A[y].latency),_=1-b.reduce((A,x)=>A+x,0)/b.length/f,S=l.map(A=>A[y].success),N=S.reduce((A,x)=>A+x,0)/S.length;return N===0?[0,y]:[u*_+c*N,y]}).sort((g,y)=>y[0]-g[0]);r(p.map(([,g])=>o[g])),await iP(e),h()};h()}class CV extends Jn{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function SV(t,{errorInstance:e=new Error("timed out"),timeout:r,signal:n}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;r>0&&(o=setTimeout(()=>{n&&a.abort()},r)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function IV(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const OS=IV();function NV(t,e={}){return{async request(r){var h;const{body:n,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=r,a={...e.fetchOptions??{},...r.fetchOptions??{}},{headers:c,method:u,signal:l}=a;try{const d=await SV(async({signal:p})=>{const g={...a,body:Array.isArray(n)?Wc(n.map(_=>({jsonrpc:"2.0",id:_.id??OS.take(),..._}))):Wc({jsonrpc:"2.0",id:n.id??OS.take(),...n}),headers:{"Content-Type":"application/json",...c},method:u||"POST",signal:l||(o>0?p:null)},y=new Request(t,g),b=await(s==null?void 0:s(y,g))??{...g,url:t};return await fetch(b.url??t,b)},{errorInstance:new NS({body:n,url:t}),timeout:o,signal:!0});i&&await i(d);let f;if((h=d.headers.get("Content-Type"))!=null&&h.startsWith("application/json"))f=await d.json();else{f=await d.text();try{f=JSON.parse(f||"{}")}catch(p){if(d.ok)throw p;f={error:f}}}if(!d.ok)throw new pf({body:n,details:Wc(f.error)||d.statusText,headers:d.headers,status:d.status,url:t});return f}catch(d){throw d instanceof pf||d instanceof NS?d:new pf({body:n,cause:d,url:t})}}}}function Kg(t,e={}){const{batch:r,fetchOptions:n,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:u,raw:l}=e;return({chain:h,retryCount:d,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof r=="object"?r:{},y=e.retryCount??d,b=f??e.timeout??1e4,v=t||(h==null?void 0:h.rpcUrls.default.http[0]);if(!v)throw new CV;const _=NV(v,{fetchOptions:n,onRequest:a,onResponse:c,timeout:b});return oP({key:s,methods:i,name:o,async request({method:S,params:N}){const A={method:S,params:N},{schedule:x}=mV({id:v,wait:g,shouldSplitBatch($){return $.length>p},fn:$=>_.request({body:$}),sort:($,K)=>$.id-K.id}),P=async $=>r?x($):[await _.request({body:$})],[{error:R,result:B}]=await P(A);if(l)return{error:R,result:B};if(R)throw new sP({body:A,error:R,url:v});return B},retryCount:y,retryDelay:u,timeout:b,type:"http"},{fetchOptions:n,url:v})}}function TV(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const U0={createBalance(t,e){const r={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return dV(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const r=e[1],n=parseInt(r,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(r=>this.isValidAsset(r)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},xS={async getMyTokensWithBalance(t){const e=we.state.address,r=U.state.activeCaipNetwork;if(!e||!r)return[];if(r.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,r);if(s)return this.filterLowQualityTokens(s)}const n=await Te.getBalance(e,r.caipNetworkId,t);return this.filterLowQualityTokens(n.balances)},async getEIP155Balances(t,e){var r,n;try{const s=U0.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await xt.getCapabilities(t);if(!((n=(r=i==null?void 0:i[s])==null?void 0:r.assetDiscovery)!=null&&n.supported))return null;const o=await xt.walletGetAssets({account:t,chainFilter:[s]});return U0.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>U0.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:U.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Ke=Ht({tokenBalances:[],loading:!1}),PS={state:Ke,subscribe(t){return Gr(Ke,()=>t(Ke))},subscribeKey(t,e){return In(Ke,t,e)},setToken(t){t&&(Ke.token=Xc(t))},setTokenAmount(t){Ke.sendTokenAmount=t},setReceiverAddress(t){Ke.receiverAddress=t},setReceiverProfileImageUrl(t){Ke.receiverProfileImageUrl=t},setReceiverProfileName(t){Ke.receiverProfileName=t},setGasPrice(t){Ke.gasPrice=t},setGasPriceInUsd(t){Ke.gasPriceInUSD=t},setNetworkBalanceInUsd(t){Ke.networkBalanceInUSD=t},setLoading(t){Ke.loading=t},sendToken(){var t;switch((t=U.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":this.sendEvmToken();return;case"solana":this.sendSolanaToken();return;default:throw new Error("Unsupported chain")}},sendEvmToken(){var r,n,s,i,o,a;const t=U.state.activeChain,e=(r=we.state.preferredAccountTypes)==null?void 0:r[t];(n=this.state.token)!=null&&n.address&&this.state.sendTokenAmount&&this.state.receiverAddress?(At.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===sr.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token.address,amount:this.state.sendTokenAmount,network:((s=U.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),this.sendERC20Token({receiverAddress:this.state.receiverAddress,tokenAddress:this.state.token.address,sendTokenAmount:this.state.sendTokenAmount,decimals:this.state.token.quantity.decimals})):this.state.receiverAddress&&this.state.sendTokenAmount&&this.state.gasPrice&&((i=this.state.token)!=null&&i.quantity.decimals)&&(At.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===sr.ACCOUNT_TYPES.SMART_ACCOUNT,token:(o=this.state.token)==null?void 0:o.symbol,amount:this.state.sendTokenAmount,network:((a=U.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),this.sendNativeToken({receiverAddress:this.state.receiverAddress,sendTokenAmount:this.state.sendTokenAmount,gasPrice:this.state.gasPrice,decimals:this.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Ke.loading=!0;const e=(i=U.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,r=(o=U.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=U.state.activeCaipAddress,s=n?Oe.getPlainAddress(n):void 0;if(Ke.lastRetry&&!Oe.isAllowedRetry(Ke.lastRetry,30*qr.ONE_SEC_MS))return Ke.loading=!1,[];try{if(s&&e&&r){const a=await xS.getMyTokensWithBalance();return Ke.tokenBalances=a,Ke.lastRetry=void 0,a}}catch(a){Ke.lastRetry=Date.now(),t==null||t(a),xr.showError("Token Balance Unavailable")}finally{Ke.loading=!1}return[]},fetchNetworkBalance(){if(Ke.tokenBalances.length===0)return;const t=xS.mapBalancesToSwapTokens(Ke.tokenBalances);if(!t)return;const e=t.find(r=>r.address===U.getActiveNetworkTokenAddress());e&&(Ke.networkBalanceInUSD=e?Ng.multiply(e.quantity.numeric,e.price).toString():"0")},isInsufficientNetworkTokenForGas(t,e){const r=e||"0";return Ng.bigNumber(t).eq(0)?!0:Ng.bigNumber(Ng.bigNumber(r)).gt(t)},hasInsufficientGasFunds(){var r;const t=U.state.activeChain;let e=!0;return((r=we.state.preferredAccountTypes)==null?void 0:r[t])===sr.ACCOUNT_TYPES.SMART_ACCOUNT?e=!1:Ke.networkBalanceInUSD&&(e=this.isInsufficientNetworkTokenForGas(Ke.networkBalanceInUSD,Ke.gasPriceInUSD)),e},async sendNativeToken(t){var o,a,c,u,l,h;const e=U.state.activeChain;ut.pushTransactionStack({view:"Account",goBack:!1});const r=t.receiverAddress,n=we.state.address,s=xt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),i="0x";try{await xt.sendTransaction({chainNamespace:"eip155",to:r,address:n,data:i,value:s??BigInt(0),gasPrice:t.gasPrice}),xr.showSuccess("Transaction started"),At.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((o=we.state.preferredAccountTypes)==null?void 0:o[e])===sr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((a=this.state.token)==null?void 0:a.symbol)||"",amount:t.sendTokenAmount,network:((c=U.state.activeCaipNetwork)==null?void 0:c.caipNetworkId)||""}}),this.resetSend()}catch(d){console.error("SendController:sendERC20Token - failed to send native token",d);const f=d instanceof Error?d.message:"Unknown error";At.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:f,isSmartAccount:((u=we.state.preferredAccountTypes)==null?void 0:u[e])===sr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((l=this.state.token)==null?void 0:l.symbol)||"",amount:t.sendTokenAmount,network:((h=U.state.activeCaipNetwork)==null?void 0:h.caipNetworkId)||""}}),xr.showError("Something went wrong")}},async sendERC20Token(t){var r,n,s;ut.pushTransactionStack({view:"Account",goBack:!1});const e=xt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));try{if(we.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const i=Oe.getPlainAddress(t.tokenAddress);await xt.writeContract({fromAddress:we.state.address,tokenAddress:i,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:I3.getERC20Abi(i),chainNamespace:"eip155"}),xr.showSuccess("Transaction started"),this.resetSend()}}catch(i){console.error("SendController:sendERC20Token - failed to send erc20 token",i);const o=i instanceof Error?i.message:"Unknown error";At.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:o,isSmartAccount:((r=we.state.preferredAccountTypes)==null?void 0:r.eip155)===sr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((n=this.state.token)==null?void 0:n.symbol)||"",amount:t.sendTokenAmount,network:((s=U.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),xr.showError("Something went wrong")}},sendSolanaToken(){if(!this.state.sendTokenAmount||!this.state.receiverAddress){xr.showError("Please enter a valid amount and receiver address");return}ut.pushTransactionStack({view:"Account",goBack:!1}),xt.sendTransaction({chainNamespace:"solana",to:this.state.receiverAddress,value:this.state.sendTokenAmount}).then(()=>{this.resetSend(),we.fetchTokenBalance()}).catch(t=>{xr.showError("Failed to send transaction. Please try again."),console.error("SendController:sendToken - failed to send solana transaction",t)})},resetSend(){Ke.token=void 0,Ke.sendTokenAmount=void 0,Ke.receiverAddress=void 0,Ke.receiverProfileImageUrl=void 0,Ke.receiverProfileName=void 0,Ke.loading=!1,Ke.tokenBalances=[]}},B0={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},Jg={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},ue=Ht({chains:f3(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),U={state:ue,subscribe(t){return Gr(ue,()=>{t(ue)})},subscribeKey(t,e){return In(ue,t,e)},subscribeChainProp(t,e,r){let n;return Gr(ue.chains,()=>{var i;const s=r||ue.activeChain;if(s){const o=(i=ue.chains.get(s))==null?void 0:i[t];n!==o&&(n=o,e(o))}})},initialize(t,e,r){const{chainId:n,namespace:s}=ge.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(n==null?void 0:n.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(ue.noAdapters=!0),ue.noAdapters||(ue.activeChain=a==null?void 0:a.namespace,ue.activeCaipNetwork=i,this.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),ue.activeChain&&Ri.set({activeChain:a==null?void 0:a.namespace})),c.forEach(u=>{const l=e==null?void 0:e.filter(h=>h.chainNamespace===u);U.state.chains.set(u,{namespace:u,networkState:Ht({...Jg,caipNetwork:l==null?void 0:l[0]}),accountState:Ht(B0),caipNetworks:l??[],...r}),this.setRequestedCaipNetworks(l??[],u)})},removeAdapter(t){var e,r;if(ue.activeChain===t){const n=Array.from(ue.chains.entries()).find(([s])=>s!==t);if(n){const s=(r=(e=n[1])==null?void 0:e.caipNetworks)==null?void 0:r[0];s&&this.setActiveCaipNetwork(s)}}ue.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:r},n){ue.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Jg,caipNetwork:n[0]},accountState:B0,caipNetworks:n,connectionControllerClient:r,networkControllerClient:e}),this.setRequestedCaipNetworks((n==null?void 0:n.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var r;const e=ue.chains.get(t.chainNamespace);if(e){const n=[...e.caipNetworks||[]];(r=e.caipNetworks)!=null&&r.find(s=>s.id===t.id)||n.push(t),ue.chains.set(t.chainNamespace,{...e,caipNetworks:n}),this.setRequestedCaipNetworks(n,t.chainNamespace)}},removeNetwork(t,e){var n,s,i;const r=ue.chains.get(t);if(r){const o=((n=ue.activeCaipNetwork)==null?void 0:n.id)===e,a=[...((s=r.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=r==null?void 0:r.caipNetworks)!=null&&i[0])&&this.setActiveCaipNetwork(r.caipNetworks[0]),ue.chains.set(t,{...r,caipNetworks:a}),this.setRequestedCaipNetworks(a||[],t)}},setAdapterNetworkState(t,e){const r=ue.chains.get(t);r&&(r.networkState={...r.networkState||Jg,...e},ue.chains.set(t,r))},setChainAccountData(t,e,r=!0){if(!t)throw new Error("Chain is required to update chain account data");const n=ue.chains.get(t);if(n){const s={...n.accountState||B0,...e};ue.chains.set(t,{...n,accountState:s}),(ue.chains.size===1||ue.activeChain===t)&&(e.caipAddress&&(ue.activeCaipAddress=e.caipAddress),we.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const r=ue.chains.get(t);if(r){const n={...r.networkState||Jg,...e};ue.chains.set(t,{...r,networkState:n})}},setAccountProp(t,e,r,n=!0){this.setChainAccountData(r,{[t]:e},n),t==="status"&&e==="disconnected"&&r&&De.removeConnectorId(r)},setActiveNamespace(t){var n,s;ue.activeChain=t;const e=t?ue.chains.get(t):void 0,r=(n=e==null?void 0:e.networkState)==null?void 0:n.caipNetwork;r!=null&&r.id&&t&&(ue.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,ue.activeCaipNetwork=r,this.setChainNetworkData(t,{caipNetwork:r}),ge.setActiveCaipNetworkId(r==null?void 0:r.caipNetworkId),Ri.set({activeChain:t,selectedNetworkId:r==null?void 0:r.caipNetworkId}))},setActiveCaipNetwork(t){var n,s,i;if(!t)return;ue.activeChain!==t.chainNamespace&&this.setIsSwitchingNamespace(!0);const e=ue.chains.get(t.chainNamespace);ue.activeChain=t.chainNamespace,ue.activeCaipNetwork=t,this.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(n=e==null?void 0:e.accountState)!=null&&n.address?ue.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:ue.activeCaipAddress=void 0,this.setAccountProp("caipAddress",ue.activeCaipAddress,t.chainNamespace),e&&we.replaceState(e.accountState),PS.resetSend(),Ri.set({activeChain:ue.activeChain,selectedNetworkId:(i=ue.activeCaipNetwork)==null?void 0:i.caipNetworkId}),ge.setActiveCaipNetworkId(t.caipNetworkId),!this.checkIfSupportedNetwork(t.chainNamespace)&&ie.state.enableNetworkSwitch&&!ie.state.allowUnsupportedChain&&!xt.state.wcBasic&&this.showUnsupportedChainUI()},addCaipNetwork(t){var r;if(!t)return;const e=ue.chains.get(t.chainNamespace);e&&((r=e==null?void 0:e.caipNetworks)==null||r.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==U.state.activeChain,r=(s=U.getNetworkData(t))==null?void 0:s.caipNetwork,n=U.getCaipNetworkByNamespace(t,r==null?void 0:r.id);e&&n&&await U.switchActiveNetwork(n)},async switchActiveNetwork(t){var s;const e=U.state.chains.get(U.state.activeChain);!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=ue.activeCaipNetwork)==null?void 0:o.id)}))&&ut.goBack();const n=this.getNetworkControllerClient(t.chainNamespace);n&&(await n.switchCaipNetwork(t),At.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}}))},getNetworkControllerClient(t){const e=t||ue.activeChain,r=ue.chains.get(e);if(!r)throw new Error("Chain adapter not found");if(!r.networkControllerClient)throw new Error("NetworkController client not set");return r.networkControllerClient},getConnectionControllerClient(t){const e=t||ue.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const r=ue.chains.get(e);if(!(r!=null&&r.connectionControllerClient))throw new Error("ConnectionController client not set");return r.connectionControllerClient},getAccountProp(t,e){var s;let r=ue.activeChain;if(e&&(r=e),!r)return;const n=(s=ue.chains.get(r))==null?void 0:s.accountState;if(n)return n[t]},getNetworkProp(t,e){var n;const r=(n=ue.chains.get(e))==null?void 0:n.networkState;if(r)return r[t]},getRequestedCaipNetworks(t){const e=ue.chains.get(t),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:n=[]}=(e==null?void 0:e.networkState)||{};return Oe.sortRequestedNetworks(r,n)},getAllRequestedCaipNetworks(){const t=[];return ue.chains.forEach(e=>{const r=this.getRequestedCaipNetworks(e.namespace);t.push(...r)}),t},setRequestedCaipNetworks(t,e){this.setAdapterNetworkState(e,{requestedCaipNetworks:t})},getAllApprovedCaipNetworkIds(){const t=[];return ue.chains.forEach(e=>{const r=this.getApprovedCaipNetworkIds(e.namespace);t.push(...r)}),t},getActiveCaipNetwork(){return ue.activeCaipNetwork},getActiveCaipAddress(){return ue.activeCaipAddress},getApprovedCaipNetworkIds(t){var n;const e=ue.chains.get(t);return((n=e==null?void 0:e.networkState)==null?void 0:n.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=this.getNetworkControllerClient(),r=await(e==null?void 0:e.getApprovedCaipNetworksData());this.setAdapterNetworkState(t,{approvedCaipNetworkIds:r==null?void 0:r.approvedCaipNetworkIds,supportsAllNetworks:r==null?void 0:r.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const r=e||ue.activeCaipNetwork,n=this.getRequestedCaipNetworks(t);return n.length?n==null?void 0:n.some(s=>s.id===(r==null?void 0:r.id)):!0},checkIfSupportedChainId(t){if(!ue.activeChain)return!0;const e=this.getRequestedCaipNetworks(ue.activeChain);return e==null?void 0:e.some(r=>r.id===t)},setSmartAccountEnabledNetworks(t,e){this.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var n;const t=AT.caipNetworkIdToNumber((n=ue.activeCaipNetwork)==null?void 0:n.caipNetworkId),e=ue.activeChain;if(!e||!t)return!1;const r=this.getNetworkProp("smartAccountEnabledNetworks",e);return!!(r!=null&&r.includes(Number(t)))},getActiveNetworkTokenAddress(){var n,s;const t=((n=ue.activeCaipNetwork)==null?void 0:n.chainNamespace)||"eip155",e=((s=ue.activeCaipNetwork)==null?void 0:s.id)||1,r=qr.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${r}`},showUnsupportedChainUI(){Qt.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=ue.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&qr.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){this.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");ue.activeCaipAddress=void 0,this.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),De.removeConnectorId(e)},async disconnect(t){const e=$3(t);try{PS.resetSend();const r=await Promise.allSettled(e.map(async([s,i])=>{var o;try{const{caipAddress:a}=this.getAccountData(s)||{};a&&((o=i.connectionControllerClient)!=null&&o.disconnect)&&await i.connectionControllerClient.disconnect(s),this.resetAccount(s),this.resetNetwork(s)}catch(a){throw new Error(`Failed to disconnect chain ${s}: ${a.message}`)}}));xt.resetWcConnection();const n=r.filter(s=>s.status==="rejected");if(n.length>0)throw new Error(n.map(s=>s.reason.message).join(", "));ge.deleteConnectedSocialProvider(),t?De.removeConnectorId(t):De.resetConnectorIds(),At.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:t||"all"}})}catch(r){console.error(r.message||"Failed to disconnect chains"),At.sendEvent({type:"track",event:"DISCONNECT_ERROR",properties:{message:r.message||"Failed to disconnect chains"}})}},setIsSwitchingNamespace(t){ue.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var r,n;const t=[];let e;if(ue.chains.forEach(s=>{oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(n=(r=ue.chains.get(s))==null?void 0:r.caipNetworks)==null?void 0:n[0]:void 0,e}},getAccountData(t){var e;return t?(e=U.state.chains.get(t))==null?void 0:e.accountState:we.state},getNetworkData(t){var r;const e=t||ue.activeChain;if(e)return(r=U.state.chains.get(e))==null?void 0:r.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const r=U.state.chains.get(t),n=(s=r==null?void 0:r.caipNetworks)==null?void 0:s.find(a=>a.id===e);return n||((i=r==null?void 0:r.networkState)==null?void 0:i.caipNetwork)||((o=r==null?void 0:r.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=De.state.filterByNamespace;return(t?[ue.chains.get(t)]:Array.from(ue.chains.values())).flatMap(r=>(r==null?void 0:r.caipNetworks)||[]).map(r=>r.caipNetworkId)},getCaipNetworks(t){return t?U.getRequestedCaipNetworks(t):U.getAllRequestedCaipNetworks()}},OV={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},aP=Oe.getBlockchainApiUrl(),Rn=Ht({clientId:null,api:new Fy({baseUrl:aP,clientId:null}),supportedChains:{http:[],ws:[]}}),Te={state:Rn,async get(t){const{st:e,sv:r}=Te.getSdkProperties(),n=ie.state.projectId,s={...t.params||{},st:e,sv:r,projectId:n};return Rn.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ie.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Rn.supportedChains.http.length||await Te.getSupportedNetworks()}catch{return!1}return Rn.supportedChains.http.includes(t)},async getSupportedNetworks(){const t=await Te.get({path:"v1/supported-chains"});return Rn.supportedChains=t,t},async fetchIdentity({address:t,caipNetworkId:e}){if(!await Te.isNetworkSupported(e))return{avatar:"",name:""};const n=ge.getIdentityFromCacheForAddress(t);if(n)return n;const s=await Te.get({path:`/v1/identity/${t}`,params:{sender:U.state.activeCaipAddress?Oe.getPlainAddress(U.state.activeCaipAddress):void 0}});return ge.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:r,signal:n,cache:s,chainId:i}){var a;return await Te.isNetworkSupported((a=U.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?Te.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:r,chainId:i},signal:n,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:r,to:n,gasPrice:s}){var o;return await Te.isNetworkSupported((o=U.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Te.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:r,to:n,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var r;return await Te.isNetworkSupported((r=U.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Te.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var r;return await Te.isNetworkSupported((r=U.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Rn.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ie.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var n;return await Te.isNetworkSupported((n=U.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Te.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:r}=Te.getSdkProperties();if(!await Te.isNetworkSupported((s=U.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return Te.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:r}})},async generateSwapCalldata({amount:t,from:e,to:r,userAddress:n,disableEstimate:s}){var o;if(!await Te.isNetworkSupported((o=U.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Rn.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:qr.CONVERT_SLIPPAGE_TOLERANCE},projectId:ie.state.projectId,from:e,to:r,userAddress:n,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:r}){var o;const{st:n,sv:s}=Te.getSdkProperties();if(!await Te.isNetworkSupported((o=U.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Te.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:t,to:e,st:n,sv:s}})},async getBalance(t,e,r){var u;const{st:n,sv:s}=Te.getSdkProperties();if(!await Te.isNetworkSupported((u=U.state.activeCaipNetwork)==null?void 0:u.caipNetworkId))return xr.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=ge.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Te.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:r,st:n,sv:s}});return ge.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var r;return await Te.isNetworkSupported((r=U.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Te.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var r;return await Te.isNetworkSupported((r=U.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Te.get({path:`/v1/profile/reverse/${t}`,params:{sender:we.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var r;return await Te.isNetworkSupported((r=U.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Te.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:r,signature:n}){var i;return await Te.isNetworkSupported((i=U.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Rn.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:r,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:r,purchaseAmount:n,paymentAmount:s}){var a;return await Te.isNetworkSupported((a=U.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Rn.api.post({path:"/v1/generators/onrampurl",params:{projectId:ie.state.projectId},body:{destinationWallets:t,defaultNetwork:r,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await Te.isNetworkSupported((e=U.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Te.get({path:"/v1/onramp/options"})}catch{return OV}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}){var s;try{return await Te.isNetworkSupported((s=U.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Rn.api.post({path:"/v1/onramp/quote",params:{projectId:ie.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}}):null}catch{return{coinbaseFee:{amount:r,currency:e.id},networkFee:{amount:r,currency:e.id},paymentSubtotal:{amount:r,currency:e.id},paymentTotal:{amount:r,currency:e.id},purchaseAmount:{amount:r,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var r;return await Te.isNetworkSupported((r=U.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Te.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,r){var s;return await Te.isNetworkSupported((s=U.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Rn.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ie.state.projectId},body:{pci:e,signature:r}}):{success:!1}},setClientId(t){Rn.clientId=t,Rn.api=new Fy({baseUrl:aP,clientId:t})}},os=Ht({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),we={state:os,replaceState(t){t&&Object.assign(os,Xc(t))},subscribe(t){return U.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,r){let n;return U.subscribeChainProp("accountState",s=>{if(s){const i=s[t];n!==i&&(n=i,e(i))}},r)},setStatus(t,e){U.setAccountProp("status",t,e)},getCaipAddress(t){return U.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const r=t?Oe.getPlainAddress(t):void 0;e===U.state.activeChain&&(U.state.activeCaipAddress=t),U.setAccountProp("caipAddress",t,e),U.setAccountProp("address",r,e)},setBalance(t,e,r){U.setAccountProp("balance",t,r),U.setAccountProp("balanceSymbol",e,r)},setProfileName(t,e){U.setAccountProp("profileName",t,e)},setProfileImage(t,e){U.setAccountProp("profileImage",t,e)},setUser(t,e){U.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){U.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){U.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){U.setAccountProp("currentTab",t,U.state.activeChain)},setTokenBalance(t,e){t&&U.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){U.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){U.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,r){const n=U.getAccountProp("addressLabels",r)||new Map;n.set(t,e),U.setAccountProp("addressLabels",n,r)},removeAddressLabel(t,e){const r=U.getAccountProp("addressLabels",e)||new Map;r.delete(t),U.setAccountProp("addressLabels",r,e)},setConnectedWalletInfo(t,e){U.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){U.setAccountProp("preferredAccountTypes",{...os.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){os.preferredAccountTypes=t},setSocialProvider(t,e){t&&U.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){U.setAccountProp("socialWindow",t?Xc(t):void 0,e)},setFarcasterUrl(t,e){U.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;os.balanceLoading=!0;const e=(i=U.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,r=(o=U.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=U.state.activeCaipAddress,s=n?Oe.getPlainAddress(n):void 0;if(os.lastRetry&&!Oe.isAllowedRetry(os.lastRetry,30*qr.ONE_SEC_MS))return os.balanceLoading=!1,[];try{if(s&&e&&r){const c=(await Te.getBalance(s,e)).balances.filter(u=>u.quantity.decimals!=="0");return this.setTokenBalance(c,r),os.lastRetry=void 0,os.balanceLoading=!1,c}}catch(a){os.lastRetry=Date.now(),t==null||t(a),xr.showError("Token Balance Unavailable")}finally{os.balanceLoading=!1}return[]},resetAccount(t){U.resetAccount(t)}},pn=Ht({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),Qt={state:pn,subscribe(t){return Gr(pn,()=>t(pn))},subscribeKey(t,e){return In(pn,t,e)},async open(t){var s;const e=we.state.status==="connected";xt.state.wcBasic?xe.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await xe.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),t!=null&&t.namespace?(await U.switchActiveNamespace(t.namespace),Qt.setLoading(!0,t.namespace)):Qt.setLoading(!0),De.setFilterByNamespace(t==null?void 0:t.namespace);const r=(s=U.getAccountData(t==null?void 0:t.namespace))==null?void 0:s.caipAddress;U.state.noAdapters&&!r?Oe.isMobile()?ut.reset("AllWallets"):ut.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?ut.reset(t.view,t.data):r?ut.reset("Account"):ut.reset("Connect"),pn.open=!0,Ri.set({open:!0}),At.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!r}})},close(){const t=ie.state.enableEmbedded,e=!!U.state.activeCaipAddress;pn.open&&At.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),pn.open=!1,Qt.clearLoading(),t?e?ut.replace("Account"):ut.push("Connect"):Ri.set({open:!1}),xt.resetUri()},setLoading(t,e){e&&pn.loadingNamespaceMap.set(e,t),pn.loading=t,Ri.set({loading:t})},clearLoading(){pn.loadingNamespaceMap.clear(),pn.loading=!1},shake(){pn.shake||(pn.shake=!0,setTimeout(()=>{pn.shake=!1},500))}},RS=2147483648,xV={convertEVMChainIdToCoinType(t){if(t>=RS)throw new Error("Invalid chainId");return(RS|t)>>>0}},as=Ht({suggestions:[],loading:!1}),cP={state:as,subscribe(t){return Gr(as,()=>t(as))},subscribeKey(t,e){return In(as,t,e)},async resolveName(t){var e,r;try{return await Te.lookupEnsName(t)}catch(n){const s=n;throw new Error(((r=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:r.description)||"Error resolving name")}},async isNameRegistered(t){try{return await Te.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{as.loading=!0,as.suggestions=[];const e=await Te.getEnsNameSuggestions(t);return as.suggestions=e.suggestions.map(r=>({...r,name:r.name}))||[],as.suggestions}catch(e){const r=this.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(r)}finally{as.loading=!1}},async getNamesForAddress(t){try{if(!U.state.activeCaipNetwork)return[];const r=ge.getEnsFromCacheForAddress(t);if(r)return r;const n=await Te.reverseLookupEnsName({address:t});return ge.updateEnsCache({address:t,ens:n,timestamp:Date.now()}),n}catch(e){const r=this.parseEnsApiError(e,"Error fetching names for address");throw new Error(r)}},async registerName(t){const e=U.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const r=we.state.address,n=De.getAuthConnector();if(!r||!n)throw new Error("Address or auth connector not found");as.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});ut.pushTransactionStack({view:"RegisterAccountNameSuccess",goBack:!1,replace:!0,onCancel(){as.loading=!1}});const i=await xt.signMessage(s),o=e.id;if(!o)throw new Error("Network not found");const a=xV.convertEVMChainIdToCoinType(Number(o));await Te.registerEnsName({coinType:a,address:r,signature:i,message:s}),we.setProfileName(t,e.chainNamespace),ut.replace("RegisterAccountNameSuccess")}catch(s){const i=this.parseEnsApiError(s,`Error registering name ${t}`);throw ut.replace("RegisterAccountName"),new Error(i)}finally{as.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var n,s;const r=t;return((s=(n=r==null?void 0:r.reasons)==null?void 0:n[0])==null?void 0:s.description)||e}};var L0={exports:{}},$0={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kS;function PV(){if(kS)return $0;kS=1;var t=rT();function e(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,s=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function a(h,d){var f=d(),p=n({inst:{value:f,getSnapshot:d}}),g=p[0].inst,y=p[1];return i(function(){g.value=f,g.getSnapshot=d,c(g)&&y({inst:g})},[h,f,d]),s(function(){return c(g)&&y({inst:g}),h(function(){c(g)&&y({inst:g})})},[h]),o(f),f}function c(h){var d=h.getSnapshot;h=h.value;try{var f=d();return!r(h,f)}catch{return!0}}function u(h,d){return d()}var l=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return $0.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:l,$0}var DS;function RV(){return DS||(DS=1,L0.exports=PV()),L0.exports}var kV=RV();const DV=By(kV),UV={},{use:US}=Lk,{useSyncExternalStore:BV}=DV,LV=(t,e)=>{const r=J.useRef();J.useEffect(()=>{r.current=l3(t,e)}),J.useDebugValue(r.current)},$V=new WeakMap;function uP(t,e){const n=J.useRef(),s=J.useRef();let i=!0;const o=BV(J.useCallback(u=>{const l=Gr(t,u);return u(),l},[t,void 0]),()=>{const u=Zc(t,US);try{if(!i&&n.current&&s.current&&!_T(n.current,u,s.current,new WeakMap))return n.current}catch{}return u},()=>Zc(t,US));i=!1;const a=new WeakMap;J.useEffect(()=>{n.current=o,s.current=a}),(UV?"production":void 0)!=="production"&&LV(o,a);const c=J.useMemo(()=>new WeakMap,[]);return vT(o,a,c,$V)}function MV(){const{activeCaipNetwork:t}=uP(U.state);return{caipNetwork:t,chainId:t==null?void 0:t.id,caipNetworkId:t==null?void 0:t.caipNetworkId}}function ese(t){var i,o;const e=uP(U.state),r=(t==null?void 0:t.namespace)||e.activeChain;if(!r)return{allAccounts:[],address:void 0,caipAddress:void 0,status:void 0,isConnected:!1,embeddedWalletInfo:void 0};const n=(i=e.chains.get(r))==null?void 0:i.accountState,s=De.getAuthConnector(r);return{allAccounts:(n==null?void 0:n.allAccounts)||[],caipAddress:n==null?void 0:n.caipAddress,address:Oe.getPlainAddress(n==null?void 0:n.caipAddress),isConnected:!!(n!=null&&n.caipAddress),status:n==null?void 0:n.status,embeddedWalletInfo:s?{user:n!=null&&n.user?{...n.user,username:ge.getConnectedSocialUsername()}:void 0,authProvider:(n==null?void 0:n.socialProvider)||"email",accountType:(o=n==null?void 0:n.preferredAccountTypes)==null?void 0:o[r],isSmartAccountDeployed:!!(n!=null&&n.smartAccountDeployed)}:void 0}}const Et={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},Ii={ConnectorExplorerIds:{[oe.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[oe.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[oe.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[oe.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[oe.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Et.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Et.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Et.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Et.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Et.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Et.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Et.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Et.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Et.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Et.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Et.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[oe.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[oe.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[oe.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[oe.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[oe.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[oe.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[oe.CONNECTOR_ID.INJECTED]:"Browser Wallet",[oe.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[oe.CONNECTOR_ID.COINBASE]:"Coinbase",[oe.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[oe.CONNECTOR_ID.LEDGER]:"Ledger",[oe.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[oe.CONNECTOR_ID.INJECTED]:"INJECTED",[oe.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[oe.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[oe.CONNECTOR_ID.AUTH]:"AUTH"}},sw={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([r,n])=>{e[`${Et.EIP155}:${r}`]=n}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},Gd={UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${FV()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},SOCIALS_TIMEOUT:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function FV(){return typeof window<"u"}const jV={createLogger(t,e="error"){const r=Xh({level:e}),{logger:n}=Dv({opts:r});return n.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},n}},HV="rpc.walletconnect.org";function BS(t,e){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",t),r.searchParams.set("projectId",e),r.toString()}const M0=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],ol={extendRpcUrlWithProjectId(t,e){let r=!1;try{r=new URL(t).host===HV}catch{r=!1}if(r){const n=new URL(t);return n.searchParams.has("projectId")||n.searchParams.set("projectId",e),n.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:oe.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${oe.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,r){var s,i,o;const n=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return M0.includes(e)?BS(e,r):n||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){var d,f,p,g,y;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(d=t.rpcUrls.default.http)==null?void 0:d[0],a=this.getDefaultRpcUrl(t,i,r),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,u=((y=n==null?void 0:n[i])==null?void 0:y.map(b=>b.url))||[],l=[...u,a],h=[...u];return c&&!h.includes(c)&&h.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Ii.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:l},chainDefault:{http:h}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){return t.map(s=>ol.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:n,projectId:r}))},getViemTransport(t,e,r){var s,i,o;const n=[];return r==null||r.forEach(a=>{n.push(Kg(a.url,a.config))}),M0.includes(t.caipNetworkId)&&n.push(Kg(BS(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{n.push(Kg(a))}),TS(n)},extendWagmiTransports(t,e,r){if(M0.includes(t.caipNetworkId)){const n=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return TS([r,Kg(n)])}return r},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:oe.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=ge.getActiveCaipNetworkId(),r=U.getAllRequestedCaipNetworks(),n=Array.from(((c=U.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?n.includes(s):!1,o=r==null?void 0:r.find(u=>u.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(r==null?void 0:r[0])}},Km={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},gn=Ht({providers:{...Km},providerIds:{...Km}}),tt={state:gn,subscribeKey(t,e){return In(gn,t,e)},subscribe(t){return Gr(gn,()=>{t(gn)})},subscribeProviders(t){return Gr(gn.providers,()=>t(gn.providers))},setProvider(t,e){e&&(gn.providers[t]=Xc(e))},getProvider(t){return gn.providers[t]},setProviderId(t,e){e&&(gn.providerIds[t]=e)},getProviderId(t){if(t)return gn.providerIds[t]},reset(){gn.providers={...Km},gn.providerIds={...Km}},resetChain(t){gn.providers[t]=void 0,gn.providerIds[t]=void 0}},LS={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Ir={set(t,e){Hn.isClient&&localStorage.setItem(`${Ee.STORAGE_KEY}${t}`,e)},get(t){return Hn.isClient?localStorage.getItem(`${Ee.STORAGE_KEY}${t}`):null},delete(t,e){Hn.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ee.STORAGE_KEY}${t}`))}},Yg=30*1e3,Hn={checkIfAllowedToTriggerEmail(){const t=Ir.get(Ee.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Yg){const r=Math.ceil((Yg-e)/1e3);throw new Error(`Please try again after ${r} seconds`)}}},getTimeToNextEmailLogin(){const t=Ir.get(Ee.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Yg)return Math.ceil((Yg-e)/1e3)}return 0},checkIfRequestExists(t){return sr.NOT_SAFE_RPC_METHODS.includes(t.method)||sr.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(LS.transactionHash))||(t==null?void 0:t.match(LS.signedMessage)))?Ee.RPC_RESPONSE_TYPE_TX:Ee.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return sr.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var rt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(rt||(rt={}));var bE;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(bE||(bE={}));const de=rt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ea=t=>{switch(typeof t){case"undefined":return de.undefined;case"string":return de.string;case"number":return isNaN(t)?de.nan:de.number;case"boolean":return de.boolean;case"function":return de.function;case"bigint":return de.bigint;case"symbol":return de.symbol;case"object":return Array.isArray(t)?de.array:t===null?de.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?de.promise:typeof Map<"u"&&t instanceof Map?de.map:typeof Set<"u"&&t instanceof Set?de.set:typeof Date<"u"&&t instanceof Date?de.date:de.object;default:return de.unknown}},se=rt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),zV=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Js extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,rt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Js.create=t=>new Js(t);const Xf=(t,e)=>{let r;switch(t.code){case se.invalid_type:t.received===de.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case se.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,rt.jsonStringifyReplacer)}`;break;case se.unrecognized_keys:r=`Unrecognized key(s) in object: ${rt.joinValues(t.keys,", ")}`;break;case se.invalid_union:r="Invalid input";break;case se.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${rt.joinValues(t.options)}`;break;case se.invalid_enum_value:r=`Invalid enum value. Expected ${rt.joinValues(t.options)}, received '${t.received}'`;break;case se.invalid_arguments:r="Invalid function arguments";break;case se.invalid_return_type:r="Invalid function return type";break;case se.invalid_date:r="Invalid date";break;case se.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:rt.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case se.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case se.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case se.custom:r="Invalid input";break;case se.invalid_intersection_types:r="Intersection results could not be merged";break;case se.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case se.not_finite:r="Number must be finite";break;default:r=e.defaultError,rt.assertNever(t)}return{message:r}};let lP=Xf;function qV(t){lP=t}function Jm(){return lP}const Ym=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],o={...s,path:i};let a="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},WV=[];function me(t,e){const r=Ym({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Jm(),Xf].filter(n=>!!n)});t.common.issues.push(r)}class Kr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return Pe;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r)n.push({key:await s.key,value:await s.value});return Kr.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Pe;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const Pe=Object.freeze({status:"aborted"}),hP=t=>({status:"dirty",value:t}),un=t=>({status:"valid",value:t}),EE=t=>t.status==="aborted",vE=t=>t.status==="dirty",ep=t=>t.status==="valid",Qm=t=>typeof Promise<"u"&&t instanceof Promise;var Ae;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ae||(Ae={}));class Li{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const $S=(t,e)=>{if(ep(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Js(t.common.issues);return this._error=r,this._error}}};function Ue(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:s}}class Fe{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ea(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:ea(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Kr,ctx:{common:e.parent.common,data:e.data,parsedType:ea(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Qm(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const s={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ea(e)},i=this._parseSync({data:e,path:s.path,parent:s});return $S(s,i)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ea(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(Qm(s)?s:Promise.resolve(s));return $S(n,i)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:se.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new Zs({schema:this,typeName:Ne.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return So.create(this,this._def)}nullable(){return au.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ys.create(this,this._def)}promise(){return xh.create(this,this._def)}or(e){return sp.create([this,e],this._def)}and(e){return ip.create(this,e,this._def)}transform(e){return new Zs({...Ue(this._def),schema:this,typeName:Ne.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new lp({...Ue(this._def),innerType:this,defaultValue:r,typeName:Ne.ZodDefault})}brand(){return new fP({typeName:Ne.ZodBranded,type:this,...Ue(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new ty({...Ue(this._def),innerType:this,catchValue:r,typeName:Ne.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return ug.create(this,e)}readonly(){return ny.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const VV=/^c[^\s-]{8,}$/i,GV=/^[a-z][a-z0-9]*$/,KV=/^[0-9A-HJKMNP-TV-Z]{26}$/,JV=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,YV=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,QV="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let F0;const ZV=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,XV=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,eG=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function tG(t,e){return!!((e==="v4"||!e)&&ZV.test(t)||(e==="v6"||!e)&&XV.test(t))}class Gs extends Fe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==de.string){const i=this._getOrReturnCtx(e);return me(i,{code:se.invalid_type,expected:de.string,received:i.parsedType}),Pe}const n=new Kr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),me(s,{code:se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),me(s,{code:se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?me(s,{code:se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&me(s,{code:se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")YV.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"email",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")F0||(F0=new RegExp(QV,"u")),F0.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"emoji",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")JV.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"uuid",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")VV.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"cuid",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")GV.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"cuid2",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")KV.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"ulid",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),me(s,{validation:"url",code:se.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"regex",code:se.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),me(s,{code:se.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),me(s,{code:se.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),me(s,{code:se.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?eG(i).test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{code:se.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="ip"?tG(e.data,i.version)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"ip",code:se.invalid_string,message:i.message}),n.dirty()):rt.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:se.invalid_string,...Ae.errToObj(n)})}_addCheck(e){return new Gs({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ae.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ae.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ae.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ae.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ae.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ae.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ae.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ae.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...Ae.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Ae.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...Ae.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Ae.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Ae.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Ae.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Ae.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Ae.errToObj(r)})}nonempty(e){return this.min(1,Ae.errToObj(e))}trim(){return new Gs({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Gs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Gs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Gs.create=t=>{var e;return new Gs({checks:[],typeName:Ne.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ue(t)})};function rG(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Ra extends Fe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==de.number){const i=this._getOrReturnCtx(e);return me(i,{code:se.invalid_type,expected:de.number,received:i.parsedType}),Pe}let n;const s=new Kr;for(const i of this._def.checks)i.kind==="int"?rt.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{code:se.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),me(n,{code:se.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),me(n,{code:se.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?rG(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),me(n,{code:se.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{code:se.not_finite,message:i.message}),s.dirty()):rt.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Ae.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ae.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ae.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ae.toString(r))}setLimit(e,r,n,s){return new Ra({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ae.toString(s)}]})}_addCheck(e){return new Ra({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ae.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ae.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ae.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Ae.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ae.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ae.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&rt.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Ra.create=t=>new Ra({checks:[],typeName:Ne.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ue(t)});class ka extends Fe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==de.bigint){const i=this._getOrReturnCtx(e);return me(i,{code:se.invalid_type,expected:de.bigint,received:i.parsedType}),Pe}let n;const s=new Kr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),me(n,{code:se.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),me(n,{code:se.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),me(n,{code:se.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):rt.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Ae.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ae.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ae.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ae.toString(r))}setLimit(e,r,n,s){return new ka({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ae.toString(s)}]})}_addCheck(e){return new ka({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ae.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ae.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}ka.create=t=>{var e;return new ka({checks:[],typeName:Ne.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ue(t)})};class tp extends Fe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==de.boolean){const n=this._getOrReturnCtx(e);return me(n,{code:se.invalid_type,expected:de.boolean,received:n.parsedType}),Pe}return un(e.data)}}tp.create=t=>new tp({typeName:Ne.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ue(t)});class iu extends Fe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==de.date){const i=this._getOrReturnCtx(e);return me(i,{code:se.invalid_type,expected:de.date,received:i.parsedType}),Pe}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return me(i,{code:se.invalid_date}),Pe}const n=new Kr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),me(s,{code:se.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),me(s,{code:se.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):rt.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new iu({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Ae.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Ae.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}iu.create=t=>new iu({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ne.ZodDate,...Ue(t)});class Zm extends Fe{_parse(e){if(this._getType(e)!==de.symbol){const n=this._getOrReturnCtx(e);return me(n,{code:se.invalid_type,expected:de.symbol,received:n.parsedType}),Pe}return un(e.data)}}Zm.create=t=>new Zm({typeName:Ne.ZodSymbol,...Ue(t)});class rp extends Fe{_parse(e){if(this._getType(e)!==de.undefined){const n=this._getOrReturnCtx(e);return me(n,{code:se.invalid_type,expected:de.undefined,received:n.parsedType}),Pe}return un(e.data)}}rp.create=t=>new rp({typeName:Ne.ZodUndefined,...Ue(t)});class np extends Fe{_parse(e){if(this._getType(e)!==de.null){const n=this._getOrReturnCtx(e);return me(n,{code:se.invalid_type,expected:de.null,received:n.parsedType}),Pe}return un(e.data)}}np.create=t=>new np({typeName:Ne.ZodNull,...Ue(t)});class Oh extends Fe{constructor(){super(...arguments),this._any=!0}_parse(e){return un(e.data)}}Oh.create=t=>new Oh({typeName:Ne.ZodAny,...Ue(t)});class Gc extends Fe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return un(e.data)}}Gc.create=t=>new Gc({typeName:Ne.ZodUnknown,...Ue(t)});class xo extends Fe{_parse(e){const r=this._getOrReturnCtx(e);return me(r,{code:se.invalid_type,expected:de.never,received:r.parsedType}),Pe}}xo.create=t=>new xo({typeName:Ne.ZodNever,...Ue(t)});class Xm extends Fe{_parse(e){if(this._getType(e)!==de.undefined){const n=this._getOrReturnCtx(e);return me(n,{code:se.invalid_type,expected:de.void,received:n.parsedType}),Pe}return un(e.data)}}Xm.create=t=>new Xm({typeName:Ne.ZodVoid,...Ue(t)});class Ys extends Fe{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==de.array)return me(r,{code:se.invalid_type,expected:de.array,received:r.parsedType}),Pe;if(s.exactLength!==null){const o=r.data.length>s.exactLength.value,a=r.data.length<s.exactLength.value;(o||a)&&(me(r,{code:o?se.too_big:se.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(me(r,{code:se.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(me(r,{code:se.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>s.type._parseAsync(new Li(r,o,r.path,a)))).then(o=>Kr.mergeArray(n,o));const i=[...r.data].map((o,a)=>s.type._parseSync(new Li(r,o,r.path,a)));return Kr.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new Ys({...this._def,minLength:{value:e,message:Ae.toString(r)}})}max(e,r){return new Ys({...this._def,maxLength:{value:e,message:Ae.toString(r)}})}length(e,r){return new Ys({...this._def,exactLength:{value:e,message:Ae.toString(r)}})}nonempty(e){return this.min(1,e)}}Ys.create=(t,e)=>new Ys({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ne.ZodArray,...Ue(e)});function al(t){if(t instanceof Mt){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=So.create(al(n))}return new Mt({...t._def,shape:()=>e})}else return t instanceof Ys?new Ys({...t._def,type:al(t.element)}):t instanceof So?So.create(al(t.unwrap())):t instanceof au?au.create(al(t.unwrap())):t instanceof $i?$i.create(t.items.map(e=>al(e))):t}class Mt extends Fe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=rt.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==de.object){const u=this._getOrReturnCtx(e);return me(u,{code:se.invalid_type,expected:de.object,received:u.parsedType}),Pe}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof xo&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const l=i[u],h=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Li(s,h,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof xo){const u=this._def.unknownKeys;if(u==="passthrough")for(const l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(u==="strict")a.length>0&&(me(s,{code:se.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const l of a){const h=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Li(s,h,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const l of c){const h=await l.key;u.push({key:h,value:await l.value,alwaysSet:l.alwaysSet})}return u}).then(u=>Kr.mergeObjectSync(n,u)):Kr.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return Ae.errToObj,new Mt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=Ae.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Mt({...this._def,unknownKeys:"strip"})}passthrough(){return new Mt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Mt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Mt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ne.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Mt({...this._def,catchall:e})}pick(e){const r={};return rt.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Mt({...this._def,shape:()=>r})}omit(e){const r={};return rt.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new Mt({...this._def,shape:()=>r})}deepPartial(){return al(this)}partial(e){const r={};return rt.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new Mt({...this._def,shape:()=>r})}required(e){const r={};return rt.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof So;)i=i._def.innerType;r[n]=i}}),new Mt({...this._def,shape:()=>r})}keyof(){return dP(rt.objectKeys(this.shape))}}Mt.create=(t,e)=>new Mt({shape:()=>t,unknownKeys:"strip",catchall:xo.create(),typeName:Ne.ZodObject,...Ue(e)});Mt.strictCreate=(t,e)=>new Mt({shape:()=>t,unknownKeys:"strict",catchall:xo.create(),typeName:Ne.ZodObject,...Ue(e)});Mt.lazycreate=(t,e)=>new Mt({shape:t,unknownKeys:"strip",catchall:xo.create(),typeName:Ne.ZodObject,...Ue(e)});class sp extends Fe{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Js(a.ctx.common.issues));return me(r,{code:se.invalid_union,unionErrors:o}),Pe}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},l=c._parseSync({data:r.data,path:r.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Js(c));return me(r,{code:se.invalid_union,unionErrors:a}),Pe}}get options(){return this._def.options}}sp.create=(t,e)=>new sp({options:t,typeName:Ne.ZodUnion,...Ue(e)});const _m=t=>t instanceof ap?_m(t.schema):t instanceof Zs?_m(t.innerType()):t instanceof cp?[t.value]:t instanceof Da?t.options:t instanceof up?Object.keys(t.enum):t instanceof lp?_m(t._def.innerType):t instanceof rp?[void 0]:t instanceof np?[null]:null;class iw extends Fe{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==de.object)return me(r,{code:se.invalid_type,expected:de.object,received:r.parsedType}),Pe;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(me(r,{code:se.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Pe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const i of r){const o=_m(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new iw({typeName:Ne.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...Ue(n)})}}function _E(t,e){const r=ea(t),n=ea(e);if(t===e)return{valid:!0,data:t};if(r===de.object&&n===de.object){const s=rt.objectKeys(e),i=rt.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=_E(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===de.array&&n===de.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=_E(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===de.date&&n===de.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ip extends Fe{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(EE(i)||EE(o))return Pe;const a=_E(i.value,o.value);return a.valid?((vE(i)||vE(o))&&r.dirty(),{status:r.value,value:a.data}):(me(n,{code:se.invalid_intersection_types}),Pe)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}ip.create=(t,e,r)=>new ip({left:t,right:e,typeName:Ne.ZodIntersection,...Ue(r)});class $i extends Fe{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==de.array)return me(n,{code:se.invalid_type,expected:de.array,received:n.parsedType}),Pe;if(n.data.length<this._def.items.length)return me(n,{code:se.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Pe;!this._def.rest&&n.data.length>this._def.items.length&&(me(n,{code:se.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Li(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>Kr.mergeArray(r,o)):Kr.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new $i({...this._def,rest:e})}}$i.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $i({items:t,typeName:Ne.ZodTuple,rest:null,...Ue(e)})};class op extends Fe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==de.object)return me(n,{code:se.invalid_type,expected:de.object,received:n.parsedType}),Pe;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in n.data)s.push({key:i._parse(new Li(n,a,n.path,a)),value:o._parse(new Li(n,n.data[a],n.path,a))});return n.common.async?Kr.mergeObjectAsync(r,s):Kr.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Fe?new op({keyType:e,valueType:r,typeName:Ne.ZodRecord,...Ue(n)}):new op({keyType:Gs.create(),valueType:e,typeName:Ne.ZodRecord,...Ue(r)})}}class ey extends Fe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==de.map)return me(n,{code:se.invalid_type,expected:de.map,received:n.parsedType}),Pe;const s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,c],u)=>({key:s._parse(new Li(n,a,n.path,[u,"key"])),value:i._parse(new Li(n,c,n.path,[u,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return Pe;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return Pe;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}}}}ey.create=(t,e,r)=>new ey({valueType:e,keyType:t,typeName:Ne.ZodMap,...Ue(r)});class ou extends Fe{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==de.set)return me(n,{code:se.invalid_type,expected:de.set,received:n.parsedType}),Pe;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(me(n,{code:se.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(me(n,{code:se.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const l of c){if(l.status==="aborted")return Pe;l.status==="dirty"&&r.dirty(),u.add(l.value)}return{status:r.value,value:u}}const a=[...n.data.values()].map((c,u)=>i._parse(new Li(n,c,n.path,u)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new ou({...this._def,minSize:{value:e,message:Ae.toString(r)}})}max(e,r){return new ou({...this._def,maxSize:{value:e,message:Ae.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}ou.create=(t,e)=>new ou({valueType:t,minSize:null,maxSize:null,typeName:Ne.ZodSet,...Ue(e)});class vl extends Fe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==de.function)return me(r,{code:se.invalid_type,expected:de.function,received:r.parsedType}),Pe;function n(a,c){return Ym({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Jm(),Xf].filter(u=>!!u),issueData:{code:se.invalid_arguments,argumentsError:c}})}function s(a,c){return Ym({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Jm(),Xf].filter(u=>!!u),issueData:{code:se.invalid_return_type,returnTypeError:c}})}const i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof xh){const a=this;return un(async function(...c){const u=new Js([]),l=await a._def.args.parseAsync(c,i).catch(f=>{throw u.addIssue(n(c,f)),u}),h=await Reflect.apply(o,this,l);return await a._def.returns._def.type.parseAsync(h,i).catch(f=>{throw u.addIssue(s(h,f)),u})})}else{const a=this;return un(function(...c){const u=a._def.args.safeParse(c,i);if(!u.success)throw new Js([n(c,u.error)]);const l=Reflect.apply(o,this,u.data),h=a._def.returns.safeParse(l,i);if(!h.success)throw new Js([s(l,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new vl({...this._def,args:$i.create(e).rest(Gc.create())})}returns(e){return new vl({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new vl({args:e||$i.create([]).rest(Gc.create()),returns:r||Gc.create(),typeName:Ne.ZodFunction,...Ue(n)})}}class ap extends Fe{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}ap.create=(t,e)=>new ap({getter:t,typeName:Ne.ZodLazy,...Ue(e)});class cp extends Fe{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return me(r,{received:r.data,code:se.invalid_literal,expected:this._def.value}),Pe}return{status:"valid",value:e.data}}get value(){return this._def.value}}cp.create=(t,e)=>new cp({value:t,typeName:Ne.ZodLiteral,...Ue(e)});function dP(t,e){return new Da({values:t,typeName:Ne.ZodEnum,...Ue(e)})}class Da extends Fe{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return me(r,{expected:rt.joinValues(n),received:r.parsedType,code:se.invalid_type}),Pe}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return me(r,{received:r.data,code:se.invalid_enum_value,options:n}),Pe}return un(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return Da.create(e)}exclude(e){return Da.create(this.options.filter(r=>!e.includes(r)))}}Da.create=dP;class up extends Fe{_parse(e){const r=rt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==de.string&&n.parsedType!==de.number){const s=rt.objectValues(r);return me(n,{expected:rt.joinValues(s),received:n.parsedType,code:se.invalid_type}),Pe}if(r.indexOf(e.data)===-1){const s=rt.objectValues(r);return me(n,{received:n.data,code:se.invalid_enum_value,options:s}),Pe}return un(e.data)}get enum(){return this._def.values}}up.create=(t,e)=>new up({values:t,typeName:Ne.ZodNativeEnum,...Ue(e)});class xh extends Fe{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==de.promise&&r.common.async===!1)return me(r,{code:se.invalid_type,expected:de.promise,received:r.parsedType}),Pe;const n=r.parsedType===de.promise?r.data:Promise.resolve(r.data);return un(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}xh.create=(t,e)=>new xh({type:t,typeName:Ne.ZodPromise,...Ue(e)});class Zs extends Fe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ne.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{me(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(n.data,i);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Pe:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Pe:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ep(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>ep(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:r.value,value:a})):o);rt.assertNever(s)}}Zs.create=(t,e,r)=>new Zs({schema:t,typeName:Ne.ZodEffects,effect:e,...Ue(r)});Zs.createWithPreprocess=(t,e,r)=>new Zs({schema:e,effect:{type:"preprocess",transform:t},typeName:Ne.ZodEffects,...Ue(r)});class So extends Fe{_parse(e){return this._getType(e)===de.undefined?un(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}So.create=(t,e)=>new So({innerType:t,typeName:Ne.ZodOptional,...Ue(e)});class au extends Fe{_parse(e){return this._getType(e)===de.null?un(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}au.create=(t,e)=>new au({innerType:t,typeName:Ne.ZodNullable,...Ue(e)});class lp extends Fe{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===de.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}lp.create=(t,e)=>new lp({innerType:t,typeName:Ne.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ue(e)});class ty extends Fe{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Qm(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Js(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Js(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}ty.create=(t,e)=>new ty({innerType:t,typeName:Ne.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ue(e)});class ry extends Fe{_parse(e){if(this._getType(e)!==de.nan){const n=this._getOrReturnCtx(e);return me(n,{code:se.invalid_type,expected:de.nan,received:n.parsedType}),Pe}return{status:"valid",value:e.data}}}ry.create=t=>new ry({typeName:Ne.ZodNaN,...Ue(t)});const nG=Symbol("zod_brand");class fP extends Fe{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class ug extends Fe{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Pe:i.status==="dirty"?(r.dirty(),hP(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Pe:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new ug({in:e,out:r,typeName:Ne.ZodPipeline})}}class ny extends Fe{_parse(e){const r=this._def.innerType._parse(e);return ep(r)&&(r.value=Object.freeze(r.value)),r}}ny.create=(t,e)=>new ny({innerType:t,typeName:Ne.ZodReadonly,...Ue(e)});const pP=(t,e={},r)=>t?Oh.create().superRefine((n,s)=>{var i,o;if(!t(n)){const a=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:r)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...u,fatal:c})}}):Oh.create(),sG={object:Mt.lazycreate};var Ne;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ne||(Ne={}));const iG=(t,e={message:`Input not instance of ${t.name}`})=>pP(r=>r instanceof t,e),gP=Gs.create,mP=Ra.create,oG=ry.create,aG=ka.create,yP=tp.create,cG=iu.create,uG=Zm.create,lG=rp.create,hG=np.create,dG=Oh.create,fG=Gc.create,pG=xo.create,gG=Xm.create,mG=Ys.create,yG=Mt.create,wG=Mt.strictCreate,bG=sp.create,EG=iw.create,vG=ip.create,_G=$i.create,AG=op.create,CG=ey.create,SG=ou.create,IG=vl.create,NG=ap.create,TG=cp.create,OG=Da.create,xG=up.create,PG=xh.create,MS=Zs.create,RG=So.create,kG=au.create,DG=Zs.createWithPreprocess,UG=ug.create,BG=()=>gP().optional(),LG=()=>mP().optional(),$G=()=>yP().optional(),MG={string:t=>Gs.create({...t,coerce:!0}),number:t=>Ra.create({...t,coerce:!0}),boolean:t=>tp.create({...t,coerce:!0}),bigint:t=>ka.create({...t,coerce:!0}),date:t=>iu.create({...t,coerce:!0})},FG=Pe;var O=Object.freeze({__proto__:null,defaultErrorMap:Xf,setErrorMap:qV,getErrorMap:Jm,makeIssue:Ym,EMPTY_PATH:WV,addIssueToContext:me,ParseStatus:Kr,INVALID:Pe,DIRTY:hP,OK:un,isAborted:EE,isDirty:vE,isValid:ep,isAsync:Qm,get util(){return rt},get objectUtil(){return bE},ZodParsedType:de,getParsedType:ea,ZodType:Fe,ZodString:Gs,ZodNumber:Ra,ZodBigInt:ka,ZodBoolean:tp,ZodDate:iu,ZodSymbol:Zm,ZodUndefined:rp,ZodNull:np,ZodAny:Oh,ZodUnknown:Gc,ZodNever:xo,ZodVoid:Xm,ZodArray:Ys,ZodObject:Mt,ZodUnion:sp,ZodDiscriminatedUnion:iw,ZodIntersection:ip,ZodTuple:$i,ZodRecord:op,ZodMap:ey,ZodSet:ou,ZodFunction:vl,ZodLazy:ap,ZodLiteral:cp,ZodEnum:Da,ZodNativeEnum:up,ZodPromise:xh,ZodEffects:Zs,ZodTransformer:Zs,ZodOptional:So,ZodNullable:au,ZodDefault:lp,ZodCatch:ty,ZodNaN:ry,BRAND:nG,ZodBranded:fP,ZodPipeline:ug,ZodReadonly:ny,custom:pP,Schema:Fe,ZodSchema:Fe,late:sG,get ZodFirstPartyTypeKind(){return Ne},coerce:MG,any:dG,array:mG,bigint:aG,boolean:yP,date:cG,discriminatedUnion:EG,effect:MS,enum:OG,function:IG,instanceof:iG,intersection:vG,lazy:NG,literal:TG,map:CG,nan:oG,nativeEnum:xG,never:pG,null:hG,nullable:kG,number:mP,object:yG,oboolean:$G,onumber:LG,optional:RG,ostring:BG,pipeline:UG,preprocess:DG,promise:PG,record:AG,set:SG,strictObject:wG,string:gP,symbol:uG,transformer:MS,tuple:_G,undefined:lG,union:bG,unknown:fG,void:gG,NEVER:FG,ZodIssueCode:se,quotelessJson:zV,ZodError:Js});const Wt=O.object({message:O.string()});function fe(t){return O.literal(Ee[t])}O.object({accessList:O.array(O.string()),blockHash:O.string().nullable(),blockNumber:O.string().nullable(),chainId:O.string().or(O.number()),from:O.string(),gas:O.string(),hash:O.string(),input:O.string().nullable(),maxFeePerGas:O.string(),maxPriorityFeePerGas:O.string(),nonce:O.string(),r:O.string(),s:O.string(),to:O.string(),transactionIndex:O.string().nullable(),type:O.string(),v:O.string(),value:O.string()});const jG=O.object({chainId:O.string().or(O.number())}),HG=O.object({email:O.string().email()}),zG=O.object({otp:O.string()}),qG=O.object({uri:O.string()}),WG=O.object({chainId:O.optional(O.string().or(O.number())),preferredAccountType:O.optional(O.string())}),VG=O.object({provider:O.enum(["google","github","apple","facebook","x","discord"])}),GG=O.object({email:O.string().email()}),KG=O.object({otp:O.string()}),JG=O.object({otp:O.string()}),YG=O.object({themeMode:O.optional(O.enum(["light","dark"])),themeVariables:O.optional(O.record(O.string(),O.string().or(O.number()))),w3mThemeVariables:O.optional(O.record(O.string(),O.string()))}),QG=O.object({metadata:O.object({name:O.string(),description:O.string(),url:O.string(),icons:O.array(O.string())}).optional(),sdkVersion:O.string().optional(),sdkType:O.string().optional(),projectId:O.string()}),ZG=O.object({type:O.string()}),XG=O.object({action:O.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),eK=O.object({url:O.string()}),tK=O.object({userName:O.string()}),rK=O.object({email:O.string().optional().nullable(),address:O.string(),chainId:O.string().or(O.number()),accounts:O.array(O.object({address:O.string(),type:O.enum([sr.ACCOUNT_TYPES.EOA,sr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:O.string().optional().nullable()}),nK=O.object({action:O.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),sK=O.object({email:O.string().email().optional().nullable(),address:O.string(),chainId:O.string().or(O.number()),smartAccountDeployed:O.optional(O.boolean()),accounts:O.array(O.object({address:O.string(),type:O.enum([sr.ACCOUNT_TYPES.EOA,sr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:O.optional(O.string())}),iK=O.object({uri:O.string()}),oK=O.object({isConnected:O.boolean()}),aK=O.object({chainId:O.string().or(O.number())}),cK=O.object({chainId:O.string().or(O.number())}),uK=O.object({newEmail:O.string().email()}),lK=O.object({smartAccountEnabledNetworks:O.array(O.number())});O.object({address:O.string(),isDeployed:O.boolean()});const hK=O.object({version:O.string().optional()}),dK=O.object({type:O.string(),address:O.string()}),fK=O.any(),pK=O.object({method:O.literal("eth_accounts")}),gK=O.object({method:O.literal("eth_blockNumber")}),mK=O.object({method:O.literal("eth_call"),params:O.array(O.any())}),yK=O.object({method:O.literal("eth_chainId")}),wK=O.object({method:O.literal("eth_estimateGas"),params:O.array(O.any())}),bK=O.object({method:O.literal("eth_feeHistory"),params:O.array(O.any())}),EK=O.object({method:O.literal("eth_gasPrice")}),vK=O.object({method:O.literal("eth_getAccount"),params:O.array(O.any())}),_K=O.object({method:O.literal("eth_getBalance"),params:O.array(O.any())}),AK=O.object({method:O.literal("eth_getBlockByHash"),params:O.array(O.any())}),CK=O.object({method:O.literal("eth_getBlockByNumber"),params:O.array(O.any())}),SK=O.object({method:O.literal("eth_getBlockReceipts"),params:O.array(O.any())}),IK=O.object({method:O.literal("eth_getBlockTransactionCountByHash"),params:O.array(O.any())}),NK=O.object({method:O.literal("eth_getBlockTransactionCountByNumber"),params:O.array(O.any())}),TK=O.object({method:O.literal("eth_getCode"),params:O.array(O.any())}),OK=O.object({method:O.literal("eth_getFilterChanges"),params:O.array(O.any())}),xK=O.object({method:O.literal("eth_getFilterLogs"),params:O.array(O.any())}),PK=O.object({method:O.literal("eth_getLogs"),params:O.array(O.any())}),RK=O.object({method:O.literal("eth_getProof"),params:O.array(O.any())}),kK=O.object({method:O.literal("eth_getStorageAt"),params:O.array(O.any())}),DK=O.object({method:O.literal("eth_getTransactionByBlockHashAndIndex"),params:O.array(O.any())}),UK=O.object({method:O.literal("eth_getTransactionByBlockNumberAndIndex"),params:O.array(O.any())}),BK=O.object({method:O.literal("eth_getTransactionByHash"),params:O.array(O.any())}),LK=O.object({method:O.literal("eth_getTransactionCount"),params:O.array(O.any())}),$K=O.object({method:O.literal("eth_getTransactionReceipt"),params:O.array(O.any())}),MK=O.object({method:O.literal("eth_getUncleCountByBlockHash"),params:O.array(O.any())}),FK=O.object({method:O.literal("eth_getUncleCountByBlockNumber"),params:O.array(O.any())}),jK=O.object({method:O.literal("eth_maxPriorityFeePerGas")}),HK=O.object({method:O.literal("eth_newBlockFilter")}),zK=O.object({method:O.literal("eth_newFilter"),params:O.array(O.any())}),qK=O.object({method:O.literal("eth_newPendingTransactionFilter")}),WK=O.object({method:O.literal("eth_sendRawTransaction"),params:O.array(O.any())}),VK=O.object({method:O.literal("eth_syncing"),params:O.array(O.any())}),GK=O.object({method:O.literal("eth_uninstallFilter"),params:O.array(O.any())}),FS=O.object({method:O.literal("personal_sign"),params:O.array(O.any())}),KK=O.object({method:O.literal("eth_signTypedData_v4"),params:O.array(O.any())}),JK=O.object({method:O.literal("eth_sendTransaction"),params:O.array(O.any())}),YK=O.object({method:O.literal("solana_signMessage"),params:O.object({message:O.string(),pubkey:O.string()})}),QK=O.object({method:O.literal("solana_signTransaction"),params:O.object({transaction:O.string()})}),ZK=O.object({method:O.literal("solana_signAllTransactions"),params:O.object({transactions:O.array(O.string())})}),XK=O.object({method:O.literal("solana_signAndSendTransaction"),params:O.object({transaction:O.string(),options:O.object({skipPreflight:O.boolean().optional(),preflightCommitment:O.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:O.number().optional(),minContextSlot:O.number().optional()}).optional()})}),eJ=O.object({method:O.literal("wallet_sendCalls"),params:O.array(O.object({chainId:O.string().or(O.number()).optional(),from:O.string().optional(),version:O.string().optional(),capabilities:O.any().optional(),calls:O.array(O.object({to:O.string().startsWith("0x"),data:O.string().startsWith("0x").optional(),value:O.string().optional()}))}))}),tJ=O.object({method:O.literal("wallet_getCallsStatus"),params:O.array(O.string())}),rJ=O.object({method:O.literal("wallet_getCapabilities")}),nJ=O.object({method:O.literal("wallet_grantPermissions"),params:O.array(O.any())}),sJ=O.object({method:O.literal("wallet_revokePermissions"),params:O.any()}),iJ=O.object({method:O.literal("wallet_getAssets"),params:O.any()}),jS=O.object({token:O.string()}),pe=O.object({id:O.string().optional()}),Bd={appEvent:pe.extend({type:fe("APP_SWITCH_NETWORK"),payload:jG}).or(pe.extend({type:fe("APP_CONNECT_EMAIL"),payload:HG})).or(pe.extend({type:fe("APP_CONNECT_DEVICE")})).or(pe.extend({type:fe("APP_CONNECT_OTP"),payload:zG})).or(pe.extend({type:fe("APP_CONNECT_SOCIAL"),payload:qG})).or(pe.extend({type:fe("APP_GET_FARCASTER_URI")})).or(pe.extend({type:fe("APP_CONNECT_FARCASTER")})).or(pe.extend({type:fe("APP_GET_USER"),payload:O.optional(WG)})).or(pe.extend({type:fe("APP_GET_SOCIAL_REDIRECT_URI"),payload:VG})).or(pe.extend({type:fe("APP_SIGN_OUT")})).or(pe.extend({type:fe("APP_IS_CONNECTED"),payload:O.optional(jS)})).or(pe.extend({type:fe("APP_GET_CHAIN_ID")})).or(pe.extend({type:fe("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(pe.extend({type:fe("APP_INIT_SMART_ACCOUNT")})).or(pe.extend({type:fe("APP_SET_PREFERRED_ACCOUNT"),payload:ZG})).or(pe.extend({type:fe("APP_RPC_REQUEST"),payload:FS.or(iJ).or(pK).or(gK).or(mK).or(yK).or(wK).or(bK).or(EK).or(vK).or(_K).or(AK).or(CK).or(SK).or(IK).or(NK).or(TK).or(OK).or(xK).or(PK).or(RK).or(kK).or(DK).or(UK).or(BK).or(LK).or($K).or(MK).or(FK).or(jK).or(HK).or(zK).or(qK).or(WK).or(VK).or(GK).or(FS).or(KK).or(JK).or(YK).or(QK).or(ZK).or(XK).or(tJ).or(eJ).or(rJ).or(nJ).or(sJ)})).or(pe.extend({type:fe("APP_UPDATE_EMAIL"),payload:GG})).or(pe.extend({type:fe("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:KG})).or(pe.extend({type:fe("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:JG})).or(pe.extend({type:fe("APP_SYNC_THEME"),payload:YG})).or(pe.extend({type:fe("APP_SYNC_DAPP_DATA"),payload:QG})).or(pe.extend({type:fe("APP_RELOAD")})),frameEvent:pe.extend({type:fe("FRAME_SWITCH_NETWORK_ERROR"),payload:Wt}).or(pe.extend({type:fe("FRAME_SWITCH_NETWORK_SUCCESS"),payload:cK})).or(pe.extend({type:fe("FRAME_CONNECT_EMAIL_SUCCESS"),payload:XG})).or(pe.extend({type:fe("FRAME_CONNECT_EMAIL_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:eK})).or(pe.extend({type:fe("FRAME_GET_FARCASTER_URI_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:tK})).or(pe.extend({type:fe("FRAME_CONNECT_FARCASTER_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_CONNECT_OTP_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_CONNECT_OTP_SUCCESS")})).or(pe.extend({type:fe("FRAME_CONNECT_DEVICE_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_CONNECT_DEVICE_SUCCESS")})).or(pe.extend({type:fe("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:rK})).or(pe.extend({type:fe("FRAME_CONNECT_SOCIAL_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_GET_USER_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_GET_USER_SUCCESS"),payload:sK})).or(pe.extend({type:fe("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:iK})).or(pe.extend({type:fe("FRAME_SIGN_OUT_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_SIGN_OUT_SUCCESS")})).or(pe.extend({type:fe("FRAME_IS_CONNECTED_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_IS_CONNECTED_SUCCESS"),payload:oK})).or(pe.extend({type:fe("FRAME_GET_CHAIN_ID_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_GET_CHAIN_ID_SUCCESS"),payload:aK})).or(pe.extend({type:fe("FRAME_RPC_REQUEST_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_RPC_REQUEST_SUCCESS"),payload:fK})).or(pe.extend({type:fe("FRAME_SESSION_UPDATE"),payload:jS})).or(pe.extend({type:fe("FRAME_UPDATE_EMAIL_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_UPDATE_EMAIL_SUCCESS"),payload:nK})).or(pe.extend({type:fe("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(pe.extend({type:fe("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:uK})).or(pe.extend({type:fe("FRAME_SYNC_THEME_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_SYNC_THEME_SUCCESS")})).or(pe.extend({type:fe("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(pe.extend({type:fe("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:lK})).or(pe.extend({type:fe("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:dK})).or(pe.extend({type:fe("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_READY"),payload:hK})).or(pe.extend({type:fe("FRAME_RELOAD_ERROR"),payload:Wt})).or(pe.extend({type:fe("FRAME_RELOAD_SUCCESS")}))};function j0(t,e={}){var r;return typeof(e==null?void 0:e.type)=="string"&&((r=e==null?void 0:e.type)==null?void 0:r.includes(t))}class oJ{constructor({projectId:e,isAppClient:r=!1,chainId:n="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.rpcUrl=oe.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:u}){if(!j0(Ee.FRAME_EVENT_KEY,u))return;const l=Bd.frameEvent.parse(u);l.id===i&&(o(l),window.removeEventListener("message",c))}Hn.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{Hn.isClient&&window.addEventListener("message",({data:o})=>{if(!j0(Ee.FRAME_EVENT_KEY,o))return;const a=Bd.frameEvent.parse(o);i(a)})},onAppEvent:i=>{Hn.isClient&&window.addEventListener("message",({data:o})=>{if(!j0(Ee.APP_EVENT_KEY,o))return;const a=Bd.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(Hn.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");Bd.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(Hn.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Bd.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),r&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),Hn.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${ZW}?projectId=${e}&chainId=${n}&version=${eV}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&((a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(r=>({[r]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${r}&projectId=${this.projectId}`,chainId:r}}));return Object.assign({},...e)}}class aJ{constructor(e){var i;const r=Xh({level:XW}),{logger:n,chunkLoggerController:s}=Dv({opts:r});this.logger=Yr(n,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class cJ{constructor({projectId:e,chainId:r,enableLogger:n=!0,onTimeout:s}){this.openRpcRequests=[],n&&(this.w3mLogger=new aJ(e)),this.w3mFrame=new oJ({projectId:e,isAppClient:!0,chainId:r,enableLogger:n}),this.onTimeout=s,this.getLoginEmailUsed()&&this.w3mFrame.initFrame(),this.initPromise=new Promise(i=>{this.w3mFrame.events.onFrameEvent(async o=>{o.type===Ee.FRAME_READY&&(this.initPromise=void 0,await new Promise(a=>{setTimeout(a,500)}),i())})})}async init(){this.w3mFrame.initFrame(),this.initPromise&&await this.initPromise}getLoginEmailUsed(){return!!Ir.get(Ee.EMAIL_LOGIN_USED_KEY)}getEmail(){return Ir.get(Ee.EMAIL)}getUsername(){return Ir.get(Ee.SOCIAL_USERNAME)}async reload(){var e;try{this.w3mFrame.initFrame(),await this.appEvent({type:Ee.APP_RELOAD})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error reloading iframe"),r}}async connectEmail(e){var r;try{Hn.checkIfAllowedToTriggerEmail(),this.w3mFrame.initFrame();const n=await this.appEvent({type:Ee.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting email"),n}}async connectDevice(){var e;try{return this.appEvent({type:Ee.APP_CONNECT_DEVICE})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error connecting device"),r}}async connectOtp(e){var r;try{return this.appEvent({type:Ee.APP_CONNECT_OTP,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting otp"),n}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const r=await this.appEvent({type:Ee.APP_IS_CONNECTED});return r!=null&&r.isConnected||this.deleteAuthLoginCache(),r}catch(r){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:r},"Error checking connection"),r}}async getChainId(){var e;try{const r=await this.appEvent({type:Ee.APP_GET_CHAIN_ID});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error getting chain id"),r}}async getSocialRedirectUri(e){var r;try{return this.w3mFrame.initFrame(),this.appEvent({type:Ee.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error getting social redirect uri"),n}}async updateEmail(e){var r;try{const n=await this.appEvent({type:Ee.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error updating email"),n}}async updateEmailPrimaryOtp(e){var r;try{return this.appEvent({type:Ee.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error updating email primary otp"),n}}async updateEmailSecondaryOtp(e){var r;try{const n=await this.appEvent({type:Ee.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(n.newEmail),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error updating email secondary otp"),n}}async syncTheme(e){var r;try{return this.appEvent({type:Ee.APP_SYNC_THEME,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error syncing theme"),n}}async syncDappData(e){var r;try{return this.appEvent({type:Ee.APP_SYNC_DAPP_DATA,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error syncing dapp data"),n}}async getSmartAccountEnabledNetworks(){var e;try{const r=await this.appEvent({type:Ee.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(r.smartAccountEnabledNetworks),r}catch(r){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:r},"Error getting smart account enabled networks"),r}}async setPreferredAccount(e){var r;try{return this.appEvent({type:Ee.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error setting preferred account"),n}}async connect(e){var r;try{const n=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.getUser({chainId:n,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting"),n}}async getUser(e){var r;try{const n=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ee.APP_GET_USER,payload:{...e,chainId:n}});return this.user=s,s}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting"),n}}async connectSocial(e){var r;try{this.w3mFrame.initFrame();const n=await this.appEvent({type:Ee.APP_CONNECT_SOCIAL,payload:{uri:e}});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting social"),n}}async getFarcasterUri(){var e;try{return this.w3mFrame.initFrame(),await this.appEvent({type:Ee.APP_GET_FARCASTER_URI})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error getting farcaster uri"),r}}async connectFarcaster(){var e;try{const r=await this.appEvent({type:Ee.APP_CONNECT_FARCASTER});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error connecting farcaster"),r}}async switchNetwork(e){var r;try{const n=await this.appEvent({type:Ee.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error switching network"),n}}async disconnect(){var e;try{const r=await this.appEvent({type:Ee.APP_SIGN_OUT});return this.deleteAuthLoginCache(),r}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error disconnecting"),r}}async request(e){var r,n,s,i;try{if(sr.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(r=this.rpcRequestHandler)==null||r.call(this,e);const o=await this.appEvent({type:Ee.APP_RPC_REQUEST,payload:e});return(n=this.rpcSuccessHandler)==null||n.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Ee.FRAME_IS_CONNECTED_SUCCESS&&r.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Ee.FRAME_IS_CONNECTED_ERROR&&e(),r.type===Ee.FRAME_IS_CONNECTED_SUCCESS&&!r.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Ee.FRAME_GET_USER_SUCCESS&&e(r.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Ee.FRAME_CONNECT_SOCIAL_SUCCESS&&e(r.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Ee.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(r.payload):r.type===Ee.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:sr.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Ee.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(r.payload.smartAccountEnabledNetworks):r.type===Ee.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:r,method:n})=>{sr.SAFE_RPC_METHODS.includes(n)||r.abort()}),this.openRpcRequests=[]}catch(r){(e=this.w3mLogger)==null||e.logger.error({error:r},"Error aborting RPC request")}}async appEvent(e){await this.w3mFrame.frameLoadPromise;let r;function n(a){return a.replace("@w3m-app/","")}const s=new AbortController,i=n(e.type);return[Ee.APP_CONNECT_EMAIL,Ee.APP_CONNECT_DEVICE,Ee.APP_CONNECT_OTP,Ee.APP_CONNECT_SOCIAL,Ee.APP_GET_SOCIAL_REDIRECT_URI].map(n).includes(i)&&(r=setTimeout(()=>{var a;(a=this.onTimeout)==null||a.call(this),s.abort()},3e4)),new Promise((a,c)=>{var h,d,f;const u=Math.random().toString(36).substring(7);if((f=(h=this.w3mLogger)==null?void 0:(d=h.logger).info)==null||f.call(d,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u}),i==="RPC_REQUEST"){const p=e;this.openRpcRequests=[...this.openRpcRequests,{...p.payload,abortController:s}]}s.signal.addEventListener("abort",()=>{i==="RPC_REQUEST"?c(new Error("Request was aborted")):i!=="GET_FARCASTER_URI"&&c(new Error("Something went wrong"))});function l(p,g){var y,b,v;p.id===u&&((b=g==null?void 0:(y=g.logger).info)==null||b.call(y,{framEvent:p,id:u},"Received frame response"),p.type===`@w3m-frame/${i}_SUCCESS`?(r&&clearTimeout(r),"payload"in p&&a(p.payload),a(void 0)):p.type===`@w3m-frame/${i}_ERROR`&&(r&&clearTimeout(r),"payload"in p&&c(new Error(((v=p.payload)==null?void 0:v.message)||"An error occurred")),c(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,p=>l(p,this.w3mLogger),s.signal)})}setNewLastEmailLoginTime(){Ir.set(Ee.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Ir.set(Ee.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Ir.set(Ee.EMAIL,e),Ir.set(Ee.EMAIL_LOGIN_USED_KEY,"true"),Ir.delete(Ee.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Ir.delete(Ee.EMAIL_LOGIN_USED_KEY),Ir.delete(Ee.EMAIL),Ir.delete(Ee.LAST_USED_CHAIN_KEY),Ir.delete(Ee.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Ir.set(Ee.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Ir.get(Ee.LAST_USED_CHAIN_KEY)??void 0,r=Number(e);return isNaN(r)?e:r}persistSmartAccountEnabledNetworks(e){Ir.set(Ee.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class gf{constructor(){}static getInstance({projectId:e,chainId:r,enableLogger:n,onTimeout:s}){return gf.instance||(gf.instance=new cJ({projectId:e,chainId:r,enableLogger:n,onTimeout:s})),gf.instance}}var HS={};const uJ={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof kr<"u"&&typeof HS<"u"?HS.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},AE={filterOutDuplicatesByRDNS(t){const e=ie.state.enableEIP6963?De.state.connectors:[],r=ge.getRecentWallets(),n=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=r.map(a=>a.rdns).filter(Boolean),i=n.concat(s);if(i.includes("io.metamask.mobile")&&Oe.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=De.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),r=ge.getRecentWallets(),n=e.map(a=>a.explorerId),s=r.map(a=>a.id),i=n.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=De.state,r=e.filter(i=>i.type==="ANNOUNCED").reduce((i,o)=>{var a;return(a=o.info)!=null&&a.rdns&&(i[o.info.rdns]=!0),i},{});return t.map(i=>({...i,installed:!!i.rdns&&!!r[i.rdns??""]})).sort((i,o)=>Number(o.installed)-Number(i.installed))},getConnectOrderMethod(t,e){var c;const r=(t==null?void 0:t.connectMethodsOrder)||((c=ie.state.features)==null?void 0:c.connectMethodsOrder),n=e||De.state.connectors;if(r)return r;const{injected:s,announced:i}=Am.getConnectorsByType(n,xe.state.recommended,xe.state.featured),o=s.filter(Am.showConnector),a=i.filter(Am.showConnector);return o.length||a.length?["wallet","email","social"]:uJ.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&xe.state.excludedWallets.some(n=>n.rdns===t.rdns),r=!!t.name&&xe.state.excludedWallets.some(n=>sw.isLowerCaseMatch(n.name,t.name));return e||r}},Am={getConnectorsByType(t,e,r){const{customWallets:n}=ie.state,s=ge.getRecentWallets(),i=AE.filterOutDuplicateWallets(e),o=AE.filterOutDuplicateWallets(r),a=t.filter(h=>h.type==="MULTI_CHAIN"),c=t.filter(h=>h.type==="ANNOUNCED"),u=t.filter(h=>h.type==="INJECTED"),l=t.filter(h=>h.type==="EXTERNAL");return{custom:n,recent:s,external:l,multiChain:a,announced:c,injected:u,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,r=!!e&&xe.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),n=!!t.name&&xe.state.excludedWallets.some(i=>sw.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(!Oe.isMobile()&&t.name==="Browser Wallet"||!e&&!xt.checkInstalled()||r||n)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(r||n))},getIsConnectedWithWC(){return Array.from(U.state.chains.values()).some(r=>De.getConnectorId(r.namespace)===oe.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:r,recent:n,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(u=>(u=ie.state.features)==null?void 0:u.connectorTypeOrder)()??[]}){const l=Am.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:ie.state.enableWalletConnect&&!l},{type:"recent",isEnabled:n.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(b=>b.isEnabled),p=new Set(f.map(b=>b.type)),g=c.filter(b=>p.has(b)).map(b=>({type:b,isEnabled:!0})),y=f.filter(({type:b})=>!g.some(({type:_})=>_===b));return Array.from(new Set([...g,...y].map(({type:b})=>b)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Cm=globalThis,o_=Cm.ShadowRoot&&(Cm.ShadyCSS===void 0||Cm.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,a_=Symbol(),zS=new WeakMap;let wP=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==a_)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(o_&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=zS.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&zS.set(r,e))}return e}toString(){return this.cssText}};const us=t=>new wP(typeof t=="string"?t:t+"",void 0,a_),_l=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,s,i)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new wP(r,t,a_)},lJ=(t,e)=>{if(o_)t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of e){const n=document.createElement("style"),s=Cm.litNonce;s!==void 0&&n.setAttribute("nonce",s),n.textContent=r.cssText,t.appendChild(n)}},qS=o_?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return us(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:hJ,defineProperty:dJ,getOwnPropertyDescriptor:fJ,getOwnPropertyNames:pJ,getOwnPropertySymbols:gJ,getPrototypeOf:mJ}=Object,Na=globalThis,WS=Na.trustedTypes,yJ=WS?WS.emptyScript:"",H0=Na.reactiveElementPolyfillSupport,mf=(t,e)=>t,CE={toAttribute(t,e){switch(e){case Boolean:t=t?yJ:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},bP=(t,e)=>!hJ(t,e),VS={attribute:!0,type:String,converter:CE,reflect:!1,useDefault:!1,hasChanged:bP};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Na.litPropertyMetadata??(Na.litPropertyMetadata=new WeakMap);let cl=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=VS){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(e,r),!r.noAccessor){const n=Symbol(),s=this.getPropertyDescriptor(e,n,r);s!==void 0&&dJ(this.prototype,e,s)}}static getPropertyDescriptor(e,r,n){const{get:s,set:i}=fJ(this.prototype,e)??{get(){return this[r]},set(o){this[r]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??VS}static _$Ei(){if(this.hasOwnProperty(mf("elementProperties")))return;const e=mJ(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(mf("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(mf("properties"))){const r=this.properties,n=[...pJ(r),...gJ(r)];for(const s of n)this.createProperty(s,r[s])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[n,s]of r)this.elementProperties.set(n,s)}this._$Eh=new Map;for(const[r,n]of this.elementProperties){const s=this._$Eu(r,n);s!==void 0&&this._$Eh.set(s,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const s of n)r.unshift(qS(s))}else e!==void 0&&r.push(qS(e));return r}static _$Eu(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(r=>r(this))}addController(e){var r;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)==null||r.call(e))}removeController(e){var r;(r=this._$EO)==null||r.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return lJ(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostConnected)==null?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostDisconnected)==null?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$ET(e,r){var i;const n=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,n);if(s!==void 0&&n.reflect===!0){const o=(((i=n.converter)==null?void 0:i.toAttribute)!==void 0?n.converter:CE).toAttribute(r,n.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,r){var i,o;const n=this.constructor,s=n._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=n.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:CE;this._$Em=s,this[s]=c.fromAttribute(r,a.type)??((o=this._$Ej)==null?void 0:o.get(s))??null,this._$Em=null}}requestUpdate(e,r,n){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(n??(n=i.getPropertyOptions(e)),!((n.hasChanged??bP)(o,r)||n.useDefault&&n.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,n))))return;this.C(e,r,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,r,{useDefault:n,reflect:s,wrapped:i},o){n&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??r??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(r=void 0),this._$AL.set(e,r)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var n;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),(n=this._$EO)==null||n.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(r)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(r)}willUpdate(e){}_$AE(e){var r;(r=this._$EO)==null||r.forEach(n=>{var s;return(s=n.hostUpdated)==null?void 0:s.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(r=>this._$ET(r,this[r]))),this._$EM()}updated(e){}firstUpdated(e){}};cl.elementStyles=[],cl.shadowRootOptions={mode:"open"},cl[mf("elementProperties")]=new Map,cl[mf("finalized")]=new Map,H0==null||H0({ReactiveElement:cl}),(Na.reactiveElementVersions??(Na.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const yf=globalThis,sy=yf.trustedTypes,GS=sy?sy.createPolicy("lit-html",{createHTML:t=>t}):void 0,EP="$lit$",ta=`lit$${Math.random().toFixed(9).slice(2)}$`,vP="?"+ta,wJ=`<${vP}>`,cu=document,hp=()=>cu.createComment(""),dp=t=>t===null||typeof t!="object"&&typeof t!="function",c_=Array.isArray,bJ=t=>c_(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",z0=`[ 	
\f\r]`,Ld=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,KS=/-->/g,JS=/>/g,Ya=RegExp(`>|${z0}(?:([^\\s"'>=/]+)(${z0}*=${z0}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),YS=/'/g,QS=/"/g,_P=/^(?:script|style|textarea|title)$/i,AP=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),nse=AP(1),sse=AP(2),Ph=Symbol.for("lit-noChange"),yr=Symbol.for("lit-nothing"),ZS=new WeakMap,gc=cu.createTreeWalker(cu,129);function CP(t,e){if(!c_(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return GS!==void 0?GS.createHTML(e):e}const EJ=(t,e)=>{const r=t.length-1,n=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Ld;for(let a=0;a<r;a++){const c=t[a];let u,l,h=-1,d=0;for(;d<c.length&&(o.lastIndex=d,l=o.exec(c),l!==null);)d=o.lastIndex,o===Ld?l[1]==="!--"?o=KS:l[1]!==void 0?o=JS:l[2]!==void 0?(_P.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=Ya):l[3]!==void 0&&(o=Ya):o===Ya?l[0]===">"?(o=s??Ld,h=-1):l[1]===void 0?h=-2:(h=o.lastIndex-l[2].length,u=l[1],o=l[3]===void 0?Ya:l[3]==='"'?QS:YS):o===QS||o===YS?o=Ya:o===KS||o===JS?o=Ld:(o=Ya,s=void 0);const f=o===Ya&&t[a+1].startsWith("/>")?" ":"";i+=o===Ld?c+wJ:h>=0?(n.push(u),c.slice(0,h)+EP+c.slice(h)+ta+f):c+ta+(h===-2?a:f)}return[CP(t,i+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};class fp{constructor({strings:e,_$litType$:r},n){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[u,l]=EJ(e,r);if(this.el=fp.createElement(u,n),gc.currentNode=this.el.content,r===2||r===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(s=gc.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const h of s.getAttributeNames())if(h.endsWith(EP)){const d=l[o++],f=s.getAttribute(h).split(ta),p=/([.?@])?(.*)/.exec(d);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?_J:p[1]==="?"?AJ:p[1]==="@"?CJ:ow}),s.removeAttribute(h)}else h.startsWith(ta)&&(c.push({type:6,index:i}),s.removeAttribute(h));if(_P.test(s.tagName)){const h=s.textContent.split(ta),d=h.length-1;if(d>0){s.textContent=sy?sy.emptyScript:"";for(let f=0;f<d;f++)s.append(h[f],hp()),gc.nextNode(),c.push({type:2,index:++i});s.append(h[d],hp())}}}else if(s.nodeType===8)if(s.data===vP)c.push({type:2,index:i});else{let h=-1;for(;(h=s.data.indexOf(ta,h+1))!==-1;)c.push({type:7,index:i}),h+=ta.length-1}i++}}static createElement(e,r){const n=cu.createElement("template");return n.innerHTML=e,n}}function Rh(t,e,r=t,n){var o,a;if(e===Ph)return e;let s=n!==void 0?(o=r._$Co)==null?void 0:o[n]:r._$Cl;const i=dp(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,r,n)),n!==void 0?(r._$Co??(r._$Co=[]))[n]=s:r._$Cl=s),s!==void 0&&(e=Rh(t,s._$AS(t,e.values),s,n)),e}class vJ{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:n}=this._$AD,s=((e==null?void 0:e.creationScope)??cu).importNode(r,!0);gc.currentNode=s;let i=gc.nextNode(),o=0,a=0,c=n[0];for(;c!==void 0;){if(o===c.index){let u;c.type===2?u=new lg(i,i.nextSibling,this,e):c.type===1?u=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(u=new SJ(i,this,e)),this._$AV.push(u),c=n[++a]}o!==(c==null?void 0:c.index)&&(i=gc.nextNode(),o++)}return gc.currentNode=cu,s}p(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class lg{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,r,n,s){this.type=2,this._$AH=yr,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Rh(this,e,r),dp(e)?e===yr||e==null||e===""?(this._$AH!==yr&&this._$AR(),this._$AH=yr):e!==this._$AH&&e!==Ph&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):bJ(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==yr&&dp(this._$AH)?this._$AA.nextSibling.data=e:this.T(cu.createTextNode(e)),this._$AH=e}$(e){var i;const{values:r,_$litType$:n}=e,s=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=fp.createElement(CP(n.h,n.h[0]),this.options)),n);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(r);else{const o=new vJ(s,this),a=o.u(this.options);o.p(r),this.T(a),this._$AH=o}}_$AC(e){let r=ZS.get(e.strings);return r===void 0&&ZS.set(e.strings,r=new fp(e)),r}k(e){c_(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,s=0;for(const i of e)s===r.length?r.push(n=new lg(this.O(hp()),this.O(hp()),this,this.options)):n=r[s],n._$AI(i),s++;s<r.length&&(this._$AR(n&&n._$AB.nextSibling,s),r.length=s)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)==null?void 0:n.call(this,!1,!0,r);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var r;this._$AM===void 0&&(this._$Cv=e,(r=this._$AP)==null||r.call(this,e))}}class ow{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,s,i){this.type=1,this._$AH=yr,this._$AN=void 0,this.element=e,this.name=r,this._$AM=s,this.options=i,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=yr}_$AI(e,r=this,n,s){const i=this.strings;let o=!1;if(i===void 0)e=Rh(this,e,r,0),o=!dp(e)||e!==this._$AH&&e!==Ph,o&&(this._$AH=e);else{const a=e;let c,u;for(e=i[0],c=0;c<i.length-1;c++)u=Rh(this,a[n+c],r,c),u===Ph&&(u=this._$AH[c]),o||(o=!dp(u)||u!==this._$AH[c]),u===yr?e=yr:e!==yr&&(e+=(u??"")+i[c+1]),this._$AH[c]=u}o&&!s&&this.j(e)}j(e){e===yr?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class _J extends ow{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===yr?void 0:e}}class AJ extends ow{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==yr)}}class CJ extends ow{constructor(e,r,n,s,i){super(e,r,n,s,i),this.type=5}_$AI(e,r=this){if((e=Rh(this,e,r,0)??yr)===Ph)return;const n=this._$AH,s=e===yr&&n!==yr||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,i=e!==yr&&(n===yr||s);s&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r;typeof this._$AH=="function"?this._$AH.call(((r=this.options)==null?void 0:r.host)??this.element,e):this._$AH.handleEvent(e)}}class SJ{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Rh(this,e)}}const q0=yf.litHtmlPolyfillSupport;q0==null||q0(fp,lg),(yf.litHtmlVersions??(yf.litHtmlVersions=[])).push("3.3.0");const IJ=(t,e,r)=>{const n=(r==null?void 0:r.renderBefore)??e;let s=n._$litPart$;if(s===void 0){const i=(r==null?void 0:r.renderBefore)??null;n._$litPart$=s=new lg(e.insertBefore(hp(),i),i,void 0,r??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Kc=globalThis;class Sm extends cl{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;const e=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=e.firstChild),e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=IJ(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Ph}}var XN;Sm._$litElement$=!0,Sm.finalized=!0,(XN=Kc.litElementHydrateSupport)==null||XN.call(Kc,{LitElement:Sm});const W0=Kc.litElementPolyfillSupport;W0==null||W0({LitElement:Sm});(Kc.litElementVersions??(Kc.litElementVersions=[])).push("4.2.0");let wf,Ta,Oa;function ise(t,e){wf=document.createElement("style"),Ta=document.createElement("style"),Oa=document.createElement("style"),wf.textContent=Al(t).core.cssText,Ta.textContent=Al(t).dark.cssText,Oa.textContent=Al(t).light.cssText,document.head.appendChild(wf),document.head.appendChild(Ta),document.head.appendChild(Oa),SP(e)}function SP(t){Ta&&Oa&&(t==="light"?(Ta.removeAttribute("media"),Oa.media="enabled"):(Oa.removeAttribute("media"),Ta.media="enabled"))}function NJ(t){wf&&Ta&&Oa&&(wf.textContent=Al(t).core.cssText,Ta.textContent=Al(t).dark.cssText,Oa.textContent=Al(t).light.cssText)}function Al(t){return{core:_l`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${us(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${us((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${us((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${us((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${us((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:_l`
      :root {
        --w3m-color-mix: ${us((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${us(Eo(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${us(Eo(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:_l`
      :root {
        --w3m-color-mix: ${us((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${us(Eo(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${us(Eo(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const ose=_l`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,ase=_l`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,cse=_l`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Ca={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603},TJ=TV({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0});function hg(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const XS=hg({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),eI=hg({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});hg({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});hg({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});hg({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const OJ={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},u_={getMethodsByChainNamespace(t){return OJ[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const r={...t},n=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>n.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>n.add(s)),e.events&&Object.keys(e.events).forEach(s=>n.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&n.add(i)}),n.forEach(s=>{r[s]||(r[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{r[s]&&(r[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{r[s]&&(r[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{r[s]&&(r[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!r[a]||(r[a].rpcMap||(r[a].rpcMap={}),s.has(a)||(r[a].rpcMap={},s.add(a)),r[a].rpcMap[c]=o)})}return r},createNamespaces(t,e){const r=t.reduce((n,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];n[o]||(n[o]=this.createDefaultNamespace(o));const u=`${o}:${i}`,l=n[o];switch(l.chains.push(u),u){case XS.caipNetworkId:l.chains.push(XS.deprecatedCaipNetworkId);break;case eI.caipNetworkId:l.chains.push(eI.deprecatedCaipNetworkId);break}return l!=null&&l.rpcMap&&c&&(l.rpcMap[i]=c),n},{});return this.applyNamespaceOverrides(r,e)},resolveReownName:async t=>{var n;const e=await cP.resolveName(t);return((n=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:n.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const r=e.chains||[],n=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...r,...n]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null}};class l_{constructor({provider:e,namespace:r}){this.id=oe.CONNECTOR_ID.WALLET_CONNECT,this.name=Ii.ConnectorNamesMap[oe.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Ii.ConnectorImageIds[oe.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=U.getCaipNetworks.bind(U),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=r}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const r=this.getCaipNetworks(),n=ie.state.universalProviderConfigOverride,s=u_.createNamespaces(r,n);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(r=>r.caipNetworkId);return ff.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:xJ})}}const xJ=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class IP{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=r=>U.getCaipNetworks(r),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:oe.CONNECTOR_ID.AUTH,type:"AUTH",name:oe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Ii.ConnectorImageIds[oe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const r=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(n=>r.has(n.id)?!1:(r.add(n.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,r){we.setStatus(e,r)}on(e,r){var n;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(n=this.eventListeners.get(e))==null||n.add(r)}off(e,r){const n=this.eventListeners.get(e);n&&n.delete(r)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,r){const n=this.eventListeners.get(e);n&&n.forEach(s=>s(r))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:r,providerType:n}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(n==="WALLET_CONNECT"){s.setDefaultChain(r.caipNetworkId);return}if(s&&n==="AUTH"){const o=s,a=(i=we.state.preferredAccountTypes)==null?void 0:i[r.chainNamespace];await o.switchNetwork(r.caipNetworkId);const c=await o.getUser({chainId:r.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(r=>r instanceof l_);if(!e)throw new Error("WalletConnectConnector not found");return e}}class PJ extends IP{setUniversalProvider(e){this.addConnector(new l_({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const r=this.provider,n=((a=(o=(i=(s=r==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,u]=c.split(":");return u}).filter((c,u,l)=>l.indexOf(c)===u))||[];return Promise.resolve({accounts:n.map(c=>Oe.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,u;if(!(e.caipNetwork&&qr.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(we.state.balanceLoading&&e.chainId===((c=U.state.activeCaipNetwork)==null?void 0:c.id))return{balance:we.state.balance||"0.00",symbol:we.state.balanceSymbol||""};const s=(await we.fetchTokenBalance()).find(l=>{var h,d;return l.chainId===`${(h=e.caipNetwork)==null?void 0:h.chainNamespace}:${e.chainId}`&&l.symbol===((d=e.caipNetwork)==null?void 0:d.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((u=e.caipNetwork)==null?void 0:u.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:r,message:n,address:s}=e;if(!r)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=U.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===oe.CHAIN.SOLANA?i=(await r.request({method:"solana_signMessage",params:{message:CO.encode(new TextEncoder().encode(n)),pubkey:s}},(a=U.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await r.request({method:"personal_sign",params:[n,s]},(c=U.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async getProfile(){return Promise.resolve({profileImage:"",profileName:""})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}async getEnsAddress(){return Promise.resolve({address:!1})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,u;const{caipNetwork:r}=e,n=this.getWalletConnectConnector();if(r.chainNamespace===oe.CHAIN.EVM)try{await((s=n.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:IS(r.id)}]}))}catch(l){if(l.code===Ca.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||l.code===Ca.ERROR_INVALID_CHAIN_ID||l.code===Ca.ERROR_CODE_DEFAULT||((o=(i=l==null?void 0:l.data)==null?void 0:i.originalError)==null?void 0:o.code)===Ca.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((u=n.provider)==null?void 0:u.request({method:"wallet_addEthereumChain",params:[{chainId:IS(r.id),rpcUrls:[(a=r==null?void 0:r.rpcUrls.chainDefault)==null?void 0:a.http],chainName:r.name,nativeCurrency:r.nativeCurrency,blockExplorerUrls:[(c=r.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}n.provider.setDefaultChain(r.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(n=>n.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}class RJ{constructor(e){this.chainNamespaces=[],this.reportedAlertErrors={},this.getCaipNetwork=(r,n)=>{var s,i,o,a;if(r){const c=(i=(s=U.getNetworkData(r))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(l=>l.id===n);if(c)return c;const u=(o=U.getNetworkData(r))==null?void 0:o.caipNetwork;return u||((a=U.getRequestedCaipNetworks(r).filter(l=>l.chainNamespace===r))==null?void 0:a[0])}return U.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const r=this.getCaipNetwork();if(r)return r.id},this.getCaipNetworks=r=>U.getCaipNetworks(r),this.getActiveChainNamespace=()=>U.state.activeChain,this.setRequestedCaipNetworks=(r,n)=>{U.setRequestedCaipNetworks(r,n)},this.getApprovedCaipNetworkIds=()=>U.getAllApprovedCaipNetworkIds(),this.getCaipAddress=r=>U.state.activeChain===r||!r?U.state.activeCaipAddress:U.getAccountProp("caipAddress",r),this.setClientId=r=>{Te.setClientId(r)},this.getProvider=r=>tt.getProvider(r),this.getProviderType=r=>tt.getProviderId(r),this.getPreferredAccountType=r=>{var n;return(n=we.state.preferredAccountTypes)==null?void 0:n[r]},this.setCaipAddress=(r,n)=>{we.setCaipAddress(r,n)},this.setBalance=(r,n,s)=>{we.setBalance(r,n,s)},this.setProfileName=(r,n)=>{we.setProfileName(r,n)},this.setProfileImage=(r,n)=>{we.setProfileImage(r,n)},this.setUser=(r,n)=>{we.setUser(r,n),ie.state.enableEmbedded&&Qt.close()},this.resetAccount=r=>{we.resetAccount(r)},this.setCaipNetwork=r=>{U.setActiveCaipNetwork(r)},this.setCaipNetworkOfNamespace=(r,n)=>{U.setChainNetworkData(n,{caipNetwork:r})},this.setAllAccounts=(r,n)=>{we.setAllAccounts(r,n),ie.setHasMultipleAddresses((r==null?void 0:r.length)>1)},this.setStatus=(r,n)=>{we.setStatus(r,n),De.isConnected()?ge.setConnectionStatus("connected"):ge.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=r=>U.getAccountProp("address",r),this.setConnectors=r=>{const n=[...De.state.allConnectors,...r];De.setConnectors(n)},this.fetchIdentity=r=>Te.fetchIdentity(r),this.getReownName=r=>cP.getNamesForAddress(r),this.getConnectors=()=>De.getConnectors(),this.getConnectorImage=r=>IT.getConnectorImage(r),this.setConnectedWalletInfo=(r,n)=>{const s=tt.getProviderId(n),i=r?{...r,type:s}:void 0;we.setConnectedWalletInfo(i,n)},this.getIsConnectedState=()=>!!U.state.activeCaipAddress,this.addAddressLabel=(r,n,s)=>{we.addAddressLabel(r,n,s)},this.removeAddressLabel=(r,n)=>{we.removeAddressLabel(r,n)},this.getAddress=r=>U.state.activeChain===r||!r?we.state.address:U.getAccountProp("address",r),this.setApprovedCaipNetworksData=r=>U.setApprovedCaipNetworksData(r),this.resetNetwork=r=>{U.resetNetwork(r)},this.addConnector=r=>{De.addConnector(r)},this.resetWcConnection=()=>{xt.resetWcConnection()},this.setAddressExplorerUrl=(r,n)=>{we.setAddressExplorerUrl(r,n)},this.setSmartAccountDeployed=(r,n)=>{we.setSmartAccountDeployed(r,n)},this.setSmartAccountEnabledNetworks=(r,n)=>{U.setSmartAccountEnabledNetworks(r,n)},this.setPreferredAccountType=(r,n)=>{we.setPreferredAccountType(r,n)},this.setEIP6963Enabled=r=>{ie.setEIP6963Enabled(r)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.initialize(e)}getChainNamespacesSet(e,r){const n=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(n!=null&&n.length)return[...new Set(n)];const s=r==null?void 0:r.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){this.initControllers(e),await this.initChainAdapters(),await this.injectModalUi(),this.sendInitializeEvent(e),Ri.set({initialized:!0}),await this.syncExistingConnection()}sendInitializeEvent(e){var n;const{...r}=e;delete r.adapters,delete r.universalProvider,At.sendEvent({type:"track",event:"INITIALIZE",properties:{...r,networks:e.networks.map(s=>s.id),siweConfig:{options:((n=e.siweConfig)==null?void 0:n.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&zr.setThemeMode(e.themeMode),e.themeVariables&&zr.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");U.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const r=this.getDefaultNetwork();r&&U.setActiveCaipNetwork(r)}initializeConnectionController(e){xt.setWcBasic(e.basic??!1)}initializeConnectorController(){De.initialize(this.chainNamespaces)}initializeOptionsController(e){var o;ie.setDebug(e.debug!==!1),ie.setEnableWalletConnect(e.enableWalletConnect!==!1),ie.setEnableWalletGuide(e.enableWalletGuide!==!1),ie.setEnableWallets(e.enableWallets!==!1),ie.setEIP6963Enabled(e.enableEIP6963!==!1),ie.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ie.setEnableAuthLogger(e.enableAuthLogger!==!1),ie.setCustomRpcUrls(e.customRpcUrls),ie.setSdkVersion(e.sdkVersion),ie.setProjectId(e.projectId),ie.setEnableEmbedded(e.enableEmbedded),ie.setAllWallets(e.allWallets),ie.setIncludeWalletIds(e.includeWalletIds),ie.setExcludeWalletIds(e.excludeWalletIds),ie.setFeaturedWalletIds(e.featuredWalletIds),ie.setTokens(e.tokens),ie.setTermsConditionsUrl(e.termsConditionsUrl),ie.setPrivacyPolicyUrl(e.privacyPolicyUrl),ie.setCustomWallets(e.customWallets),ie.setFeatures(e.features),ie.setAllowUnsupportedChain(e.allowUnsupportedChain),ie.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),ie.setDefaultAccountTypes(e.defaultAccountTypes);const r=ge.getPreferredAccountTypes(),n={...ie.state.defaultAccountTypes,...r};we.setPreferredAccountTypes(n);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),ie.setMetadata(e.metadata),ie.setDisableAppend(e.disableAppend),ie.setEnableEmbedded(e.enableEmbedded),ie.setSIWX(e.siwx),!e.projectId){af.open(Gd.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===oe.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ie.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,r,n,s;return typeof window<"u"&&typeof document<"u"?{name:((r=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:r.textContent)||"",description:((n=document.querySelector('meta[property="og:description"]'))==null?void 0:n.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const r=this.getActiveChainNamespace();if(r){const n=ol.getUnsupportedNetwork(`${r}:${e}`);U.setActiveCaipNetwork(n)}}getDefaultNetwork(){return ol.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,r){return ol.extendCaipNetwork(e,{customNetworkImageUrls:r.chainImages,projectId:r.projectId})}extendCaipNetworks(e){return ol.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const r=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return r?ol.extendCaipNetwork(r,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=U.state.activeChain,r=this.getAdapter(e),n=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!r)throw new Error("Adapter not found");const s=await r.connectWalletConnect(n);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),ge.setConnectedNamespaces([...U.state.chains.keys()]),this.chainNamespaces.forEach(o=>{De.setConnectorId(Et.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:r,type:n,provider:s,chain:i,caipNetwork:o})=>{var f,p,g,y,b,v;const a=U.state.activeChain,c=i||a,u=this.getAdapter(c);if(i&&i!==a&&!o){const _=this.getCaipNetworks().find(S=>S.chainNamespace===i);_&&this.setCaipNetwork(_)}if(!u)throw new Error("Adapter not found");const l=this.getCaipNetwork(c),h=await u.connect({id:e,info:r,type:n,provider:s,chainId:(o==null?void 0:o.id)||(l==null?void 0:l.id),rpcUrl:((g=(p=(f=o==null?void 0:o.rpcUrls)==null?void 0:f.default)==null?void 0:p.http)==null?void 0:g[0])||((v=(b=(y=l==null?void 0:l.rpcUrls)==null?void 0:y.default)==null?void 0:b.http)==null?void 0:v[0])});if(!h)return;ge.addConnectedNamespace(c),this.syncProvider({...h,chainNamespace:c});const{accounts:d}=await u.getAccounts({namespace:c,id:e});this.setAllAccounts(d,c),this.setStatus("connected",c)},reconnectExternal:async({id:e,info:r,type:n,provider:s})=>{var a;const i=U.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:r,type:n,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),ge.addConnectedNamespace(i))},disconnect:async e=>{const r=e||U.state.activeChain,n=this.getAdapter(r),s=tt.getProvider(r),i=tt.getProviderId(r);await(n==null?void 0:n.disconnect({provider:s,providerType:i})),ge.removeConnectedNamespace(r),tt.resetChain(r),this.setUser(void 0,r),this.setStatus("disconnected",r)},checkInstalled:e=>e?e.some(r=>{var n;return!!((n=window.ethereum)!=null&&n[String(r)])}):!!window.ethereum,signMessage:async e=>{const r=this.getAdapter(U.state.activeChain),n=await(r==null?void 0:r.signMessage({message:e,address:we.state.address,provider:tt.getProvider(U.state.activeChain)}));return(n==null?void 0:n.signature)||""},sendTransaction:async e=>{if(e.chainNamespace===oe.CHAIN.EVM){const r=this.getAdapter(U.state.activeChain),n=tt.getProvider(U.state.activeChain),s=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:n}));return(s==null?void 0:s.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===oe.CHAIN.EVM){const r=this.getAdapter(U.state.activeChain),n=tt.getProvider(U.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(r==null?void 0:r.estimateGas({...e,provider:n,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var n;const e=this.getAdapter(U.state.activeChain),r=await(e==null?void 0:e.getProfile({address:we.state.address,chainId:Number((n=this.getCaipNetwork())==null?void 0:n.id)}));return(r==null?void 0:r.profileImage)||!1},getEnsAddress:async e=>{const r=this.getAdapter(U.state.activeChain),n=this.getCaipNetwork();if(!n)return!1;const s=await(r==null?void 0:r.getEnsAddress({name:e,caipNetwork:n}));return(s==null?void 0:s.address)||!1},writeContract:async e=>{const r=this.getAdapter(U.state.activeChain),n=this.getCaipNetwork(),s=this.getCaipAddress(),i=tt.getProvider(U.state.activeChain);if(!n||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(r==null?void 0:r.writeContract({...e,caipNetwork:n,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,r)=>{const n=this.getAdapter(U.state.activeChain);return(n==null?void 0:n.parseUnits({value:e,decimals:r}))??0n},formatUnits:(e,r)=>{const n=this.getAdapter(U.state.activeChain);return(n==null?void 0:n.formatUnits({value:e,decimals:r}))??"0"},getCapabilities:async e=>{const r=this.getAdapter(U.state.activeChain);return await(r==null?void 0:r.getCapabilities(e))},grantPermissions:async e=>{const r=this.getAdapter(U.state.activeChain);return await(r==null?void 0:r.grantPermissions(e))},revokePermissions:async e=>{const r=this.getAdapter(U.state.activeChain);return r!=null&&r.revokePermissions?await r.revokePermissions(e):"0x"},walletGetAssets:async e=>{const r=this.getAdapter(U.state.activeChain);return await(r==null?void 0:r.walletGetAssets(e))??{}}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},xt.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var r,n,s,i,o;if(tt.getProviderId(U.state.activeChain)===Et.CONNECTOR_TYPE_WALLET_CONNECT){const a=(n=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:n.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const r=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=tt.getProvider(r),i=tt.getProviderId(r);if(e.chainNamespace===U.state.activeChain){const o=this.getAdapter(r);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Et.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(r);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:r})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(r=>{const n=r.chains||[],s=r.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Qi.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...n,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((r,n)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===n);return s?(s.construct({namespace:n,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),r[n]=s):r[n]=new PJ({namespace:n,networks:this.getCaipNetworks()}),r},{})}async initChainAdapter(e){var r;this.onConnectors(e),this.listenAdapter(e),(r=this.chainAdapters)==null||r[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const r=this.getAdapter(e);r==null||r.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const r=this.getAdapter(e);if(!r)return;const n=ge.getConnectionStatus();n==="connected"?this.setStatus("connecting",e):n==="disconnected"?(ge.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),r.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(u=>u.id===i||u.caipNetworkId===i),a=U.state.activeChain===e,c=U.getAccountProp("address",e);if(o){const u=a&&s?s:c;u&&this.syncAccount({address:u,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),r.on("disconnect",this.disconnect.bind(this,e)),r.on("pendingTransactions",()=>{const s=we.state.address,i=U.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),r.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=U.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=U.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=U.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e)})}async createUniversalProviderForAdapter(e){var r,n,s;await this.getUniversalProvider(),this.universalProvider&&((s=(n=(r=this.chainAdapters)==null?void 0:r[e])==null?void 0:n.setUniversalProvider)==null||s.call(n,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{const r=De.getConnectorId(e);switch(this.setStatus("connecting",e),r){case oe.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case oe.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(r){console.warn("AppKit couldn't sync existing connection",r),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var o,a,c;const r=this.getAdapter(e),n=De.getConnectorId(e),s=this.getCaipNetwork(e),i=De.getConnectors(e).find(u=>u.id===n);try{if(!r||!i)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(r==null?void 0:r.syncConnection({namespace:e,id:i.id,chainId:s.id,rpcUrl:(c=(a=(o=s==null?void 0:s.rpcUrls)==null?void 0:o.default)==null?void 0:a.http)==null?void 0:c[0]}));if(u){const l=await(r==null?void 0:r.getAccounts({namespace:e,id:i.id}));l&&l.accounts.length>0?this.setAllAccounts(l.accounts,e):this.setAllAccounts([Oe.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async r=>{var a,c,u,l,h;const n=this.getAdapter(r),s=((l=(u=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:u[r])==null?void 0:l.accounts)||[],i=(h=U.state.activeCaipNetwork)==null?void 0:h.id,o=s.find(d=>{const{chainId:f}=Qi.parseCaipAddress(d);return f===(i==null?void 0:i.toString())})||s[0];if(o){const d=Qi.validateCaipAddress(o),{chainId:f,address:p}=Qi.parseCaipAddress(d);if(tt.setProviderId(r,Et.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&U.state.activeCaipNetwork&&(n==null?void 0:n.namespace)!==oe.CHAIN.EVM){const g=n==null?void 0:n.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:U.state.activeCaipNetwork});tt.setProvider(r,g)}else tt.setProvider(r,this.universalProvider);De.setConnectorId(oe.CONNECTOR_ID.WALLET_CONNECT,r),ge.addConnectedNamespace(r),this.syncWalletConnectAccounts(r),await this.syncAccount({address:p,chainId:f,chainNamespace:r})}else this.setStatus("disconnected",r);await U.setApprovedCaipNetworksData(r)});await Promise.all(e)}syncWalletConnectAccounts(e){var n,s,i,o,a;const r=(a=(o=(i=(s=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:u}=Qi.parseCaipAddress(c);return u}).filter((c,u,l)=>l.indexOf(c)===u);r&&this.setAllAccounts(r.map(c=>Oe.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:r,id:n,chainNamespace:s}){tt.setProviderId(s,e),tt.setProvider(s,r),De.setConnectorId(n,s)}async syncAccount(e){var h,d;const r=e.chainNamespace===U.state.activeChain,n=U.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=ge.getActiveNetworkProps(),c=i||a,u=((h=U.state.activeCaipNetwork)==null?void 0:h.name)===oe.UNSUPPORTED_NETWORK_NAME,l=U.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(u&&!l)&&c){let f=this.getCaipNetworks().find(y=>y.id.toString()===c.toString()),p=this.getCaipNetworks().find(y=>y.chainNamespace===o);if(!l&&!f&&!p){const y=this.getApprovedCaipNetworkIds()||[],b=y.find(_=>{var S;return((S=Qi.parseCaipNetworkId(_))==null?void 0:S.chainId)===c.toString()}),v=y.find(_=>{var S;return((S=Qi.parseCaipNetworkId(_))==null?void 0:S.chainNamespace)===o});f=this.getCaipNetworks().find(_=>_.caipNetworkId===b),p=this.getCaipNetworks().find(_=>_.caipNetworkId===v||"deprecatedCaipNetworkId"in _&&_.deprecatedCaipNetworkId===v)}const g=f||p;(g==null?void 0:g.chainNamespace)===U.state.activeChain?ie.state.enableNetworkSwitch&&!ie.state.allowUnsupportedChain&&((d=U.state.activeCaipNetwork)==null?void 0:d.name)===oe.UNSUPPORTED_NETWORK_NAME?U.showUnsupportedChainUI():this.setCaipNetwork(g):r||n&&this.setCaipNetworkOfNamespace(n,o),this.syncConnectedWalletInfo(o),sw.isLowerCaseMatch(s,we.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),r?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:n==null?void 0:n.id,chainNamespace:o})}}async syncAccountInfo(e,r,n){const s=this.getCaipAddress(n),i=r||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${n}:${i}:${e}`;this.setCaipAddress(o,n),await this.syncIdentity({address:e,chainId:i,chainNamespace:n})}async syncReownName(e,r){try{const n=await this.getReownName(e);if(n[0]){const s=n[0];this.setProfileName(s.name,r)}else this.setProfileName(null,r)}catch{this.setProfileName(null,r)}}syncConnectedWalletInfo(e){var s;const r=De.getConnectorId(e),n=tt.getProviderId(e);if(n===Et.CONNECTOR_TYPE_ANNOUNCED||n===Et.CONNECTOR_TYPE_INJECTED){if(r){const i=this.getConnectors().find(o=>o.id===r);if(i){const{info:o,name:a,imageUrl:c}=i,u=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:u,...o},e)}}}else if(n===Et.CONNECTOR_TYPE_WALLET_CONNECT){const i=tt.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(r)if(r===oe.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===oe.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}else this.setConnectedWalletInfo({name:r},e)}async syncBalance(e){!AT.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(n=>{var s;return n.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async updateNativeBalance(e,r,n){const s=this.getAdapter(n),i=U.getCaipNetworkByNamespace(n,r);if(s){const o=await s.getBalance({address:e,chainId:r,caipNetwork:i,tokens:this.options.tokens});this.setBalance(o.balance,o.symbol,n)}}async initializeUniversalAdapter(){var n,s,i,o,a,c,u,l,h,d;const e=jV.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),r={projectId:(n=this.options)==null?void 0:n.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(u=this.options)==null?void 0:u.metadata.url:"",icons:(l=this.options)!=null&&l.metadata?(h=this.options)==null?void 0:h.metadata.icons:[""]},logger:e};ie.setManualWCControl(!!((d=this.options)!=null&&d.manualWCControl)),this.universalProvider=this.options.universalProvider??await YW.init(r),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{xt.setUri(e)}),this.universalProvider.on("connect",xt.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),xt.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const r=this.getCaipNetworks().find(s=>s.id==e),n=this.getCaipNetwork();if(!r){this.setUnsupportedNetwork(e);return}(n==null?void 0:n.id)!==(r==null?void 0:r.id)&&this.setCaipNetwork(r)}),this.universalProvider.on("session_event",e=>{if(u_.isSessionEventData(e)){const{name:r,data:n}=e.params.event;r==="accountsChanged"&&Array.isArray(n)&&Oe.isCaipAddress(n[0])&&this.syncAccount(Qi.parseCaipAddress(n[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Oe.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){At.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const r=Object.entries(Gd.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[n,s]=r??[],{message:i,alertErrorKey:o}=s??{};if(n&&i&&!this.reportedAlertErrors[n]){const a=Gd.ALERT_ERRORS[o];a&&(af.open(a,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){var r;if(e)return(r=this.chainAdapters)==null?void 0:r[e]}createAdapter(e){var s;if(!e)return;const r=e.namespace;if(!r)return;this.createClients();const n=e;n.namespace=r,n.construct({namespace:r,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(r)||this.chainNamespaces.push(r),this.chainAdapters&&(this.chainAdapters[r]=n)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&xt.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Qt.open({...e,data:{swap:e.arguments}})}return Qt.open(e)}async close(){await this.injectModalUi(),Qt.close()}setLoading(e,r){Qt.setLoading(e,r)}async disconnect(e){await xt.disconnect(e)}getError(){return""}getChainId(){var e;return(e=U.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const r=this.getCaipNetworks().find(n=>n.id===e.id);if(!r){af.open(Gd.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await U.switchActiveNetwork(r)}getWalletProvider(){return U.state.activeChain?tt.state.providers[U.state.activeChain]:null}getWalletProviderType(){return tt.getProviderId(U.state.activeChain)}subscribeProviders(e){return tt.subscribeProviders(e)}getThemeMode(){return zr.state.themeMode}getThemeVariables(){return zr.state.themeVariables}setThemeMode(e){zr.setThemeMode(e),SP(zr.state.themeMode)}setTermsConditionsUrl(e){ie.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ie.setPrivacyPolicyUrl(e)}setThemeVariables(e){zr.setThemeVariables(e),NJ(zr.state.themeVariables)}subscribeTheme(e){return zr.subscribe(e)}getWalletInfo(){return we.state.connectedWalletInfo}getAccount(e){var i;const r=De.getAuthConnector(e),n=U.getAccountData(e),s=U.state.activeChain;if(n)return{allAccounts:n.allAccounts,caipAddress:n.caipAddress,address:Oe.getPlainAddress(n.caipAddress),isConnected:!!n.caipAddress,status:n.status,embeddedWalletInfo:r?{user:n.user?{...n.user,username:ge.getConnectedSocialUsername()}:void 0,authProvider:n.socialProvider||"email",accountType:(i=n.preferredAccountTypes)==null?void 0:i[e||s],isSmartAccountDeployed:!!n.smartAccountDeployed}:void 0}}subscribeAccount(e,r){const n=()=>{const s=this.getAccount(r);s&&e(s)};r?U.subscribeChainProp("accountState",n,r):U.subscribe(n),De.subscribe(n)}subscribeNetwork(e){return U.subscribe(({activeCaipNetwork:r})=>{e({caipNetwork:r,chainId:r==null?void 0:r.id,caipNetworkId:r==null?void 0:r.caipNetworkId})})}subscribeWalletInfo(e){return we.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){we.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){U.subscribeKey("activeCaipNetwork",e)}getState(){return Ri.state}subscribeState(e){return Ri.subscribe(e)}showErrorMessage(e){xr.showError(e)}showSuccessMessage(e){xr.showSuccess(e)}getEvent(){return{...At.state}}subscribeEvents(e){return At.subscribe(e)}replace(e){ut.replace(e)}redirect(e){ut.push(e)}popTransactionStack(e){ut.popTransactionStack(e)}isOpen(){return Qt.state.open}isTransactionStackEmpty(){return ut.state.transactionStack.length===0}isTransactionShouldReplaceView(){var e;return(e=ut.state.transactionStack[ut.state.transactionStack.length-1])==null?void 0:e.replace}static getInstance(){return this.instance}updateFeatures(e){ie.setFeatures(e)}updateOptions(e){const n={...ie.state||{},...e};ie.setOptions(n)}setConnectMethodsOrder(e){ie.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ie.setWalletFeaturesOrder(e)}setCollapseWallets(e){ie.setCollapseWallets(e)}setSocialsOrder(e){ie.setSocialsOrder(e)}getConnectMethodsOrder(){return AE.getConnectOrderMethod(ie.state.features,De.getConnectors())}addNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const n=this.extendCaipNetwork(r,this.options);this.getCaipNetworks().find(s=>s.id===n.id)||U.addNetwork(n)}removeNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===r)&&U.removeNetwork(e,r)}}let tI=!1;class kJ extends RJ{setupAuthConnectorListeners(e){e.onRpcRequest(r=>{Hn.checkIfRequestExists(r)?Hn.checkIfRequestIsSafe(r)||this.handleUnsafeRPCRequest():(this.open(),console.error(sr.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:r.method}),setTimeout(()=>{this.showErrorMessage(sr.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack(!0))}),e.onRpcSuccess((r,n)=>{const s=Hn.checkIfRequestIsSafe(n),i=we.state.address,o=U.state.activeCaipNetwork;s||(this.isTransactionStackEmpty()?(this.close(),i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace)):(this.popTransactionStack(),i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace)))}),e.onNotConnected(()=>{const r=U.state.activeChain;De.getConnectorId(r)===oe.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,r),this.setLoading(!1,r))}),e.onConnect(async r=>{var a,c;const n=U.state.activeChain,s=n===oe.CHAIN.EVM?`eip155:${r.chainId}:${r.address}`:`${r.chainId}:${r.address}`,i=r.preferredAccountType||((a=we.state.preferredAccountTypes)==null?void 0:a[n])||ie.state.defaultAccountTypes[n];sw.isLowerCaseMatch(r.address,we.state.address)||this.syncIdentity({address:r.address,chainId:r.chainId,chainNamespace:n}),this.setCaipAddress(s,n),this.setUser({...we.state.user||{},...r},n),this.setSmartAccountDeployed(!!r.smartAccountDeployed,n),this.setPreferredAccountType(i,n);const o=(c=r.accounts)==null?void 0:c.map(u=>{var l;return Oe.createAccount(n,u.address,u.type||((l=we.state.preferredAccountTypes)==null?void 0:l[n])||ie.state.defaultAccountTypes[n])});this.setAllAccounts(o||[Oe.createAccount(n,r.address,r.preferredAccountType||i)],n),await e.getSmartAccountEnabledNetworks(),this.setLoading(!1,n)}),e.onSocialConnected(({userName:r})=>{this.setUser({...we.state.user||{},username:r},U.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(r=>{this.setSmartAccountEnabledNetworks(r,U.state.activeChain)}),e.onSetPreferredAccount(({address:r,type:n})=>{r&&this.setPreferredAccountType(n,U.state.activeChain)})}async syncAuthConnector(e,r){var l,h,d,f;const n=oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if(!n)return;this.setLoading(!0,r);const s=e.getLoginEmailUsed();this.setLoading(s,r),s&&this.setStatus("connecting",r);const i=e.getEmail(),o=e.getUsername();this.setUser({...((l=we.state)==null?void 0:l.user)||{},username:o,email:i},U.state.activeChain),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=zr.getSnapshot(),u=ie.getSnapshot();e.syncDappData({metadata:u.metadata,sdkVersion:u.sdkVersion,projectId:u.projectId,sdkType:u.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:Eo(c.themeVariables,c.themeMode)}),r&&n&&(a&&((h=this.connectionControllerClient)!=null&&h.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:oe.CONNECTOR_ID.AUTH,info:{name:oe.CONNECTOR_ID.AUTH},type:Et.CONNECTOR_TYPE_AUTH,provider:e,chainId:(d=U.state.activeCaipNetwork)==null?void 0:d.id,chain:r})),this.setStatus("connected",r)):De.getConnectorId(r)===oe.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",r),ge.removeConnectedNamespace(r))),this.setLoading(!1,r)}async checkExistingTelegramSocialConnection(e){var r;try{if(!Oe.isTelegram())return;const n=ge.getTelegramSocialProvider();if(!n||typeof window>"u"||typeof document>"u")return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;we.setSocialProvider(n,e),await((r=this.authProvider)==null?void 0:r.init());const o=De.getAuthConnector();n&&o&&(this.setLoading(!0,e),await o.provider.connectSocial(i),await xt.connectExternal(o,o.chain),ge.setConnectedSocialProvider(n),ge.removeTelegramSocialProvider(),At.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:n}}))}catch(n){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",n)}try{const n=new URL(window.location.href);n.searchParams.delete("result_uri"),window.history.replaceState({},document.title,n.toString())}catch(n){console.error("tma social login failed",n)}}createAuthProvider(e){var o,a,c,u,l,h,d,f,p,g,y,b,v;if(!oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const n=((a=(o=this.options)==null?void 0:o.features)==null?void 0:a.email)===void 0?qr.DEFAULT_FEATURES.email:(u=(c=this.options)==null?void 0:c.features)==null?void 0:u.email,s=(h=(l=this.options)==null?void 0:l.features)!=null&&h.socials?((p=(f=(d=this.options)==null?void 0:d.features)==null?void 0:f.socials)==null?void 0:p.length)>0:qr.DEFAULT_FEATURES.socials,i=n||s;!this.authProvider&&((g=this.options)!=null&&g.projectId)&&i&&(this.authProvider=gf.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(y=this.getCaipNetwork(e))==null?void 0:y.caipNetworkId,onTimeout:()=>{af.open(Gd.ALERT_ERRORS.SOCIALS_TIMEOUT,"error")}}),Ri.subscribeOpen(_=>{var S;!_&&this.isTransactionStackEmpty()&&((S=this.authProvider)==null||S.rejectRpcRequests())}),e===oe.CHAIN.EVM&&((b=we.state.preferredAccountTypes)!=null&&b.eip155)&&this.authProvider.setPreferredAccount((v=we.state.preferredAccountTypes)==null?void 0:v.eip155),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var r,n,s;this.createAuthProvider(e),this.authProvider&&((s=(n=(r=this.chainAdapters)==null?void 0:r[e])==null?void 0:n.setAuthProvider)==null||s.call(n,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&xe.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var i,o;if(!e)return;const r=U.state.activeChain,n=e.chainNamespace,s=this.getAddressByChainNamespace(e.chainNamespace);if(e.chainNamespace===U.state.activeChain&&s){const a=this.getAdapter(n),c=tt.getProvider(n),u=tt.getProviderId(n);await(a==null?void 0:a.switchNetwork({caipNetwork:e,provider:c,providerType:u})),this.setCaipNetwork(e)}else{const c=tt.getProviderId(r)===Et.CONNECTOR_TYPE_AUTH,u=tt.getProviderId(n),l=u===Et.CONNECTOR_TYPE_AUTH,h=oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if((c||l)&&h)try{U.state.activeChain=e.chainNamespace,await((o=(i=this.connectionControllerClient)==null?void 0:i.connectExternal)==null?void 0:o.call(i,{id:oe.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:n,chainId:e.id,type:Et.CONNECTOR_TYPE_AUTH,caipNetwork:e})),this.setCaipNetwork(e)}catch{const f=this.getAdapter(n);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Et.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:n}))}}async initChainAdapter(e){await super.initChainAdapter(e),this.createAuthProviderForAdapter(e)}async syncIdentity({address:e,chainId:r,chainNamespace:n}){var o;const s=`${n}:${r}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(n!==oe.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,n),this.setProfileImage(null,n);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});if(this.setProfileName(a,n),this.setProfileImage(c,n),!a){const u=this.getAdapter(n),l=await(u==null?void 0:u.getProfile({address:e,chainId:Number(r)}));l!=null&&l.profileName?(this.setProfileName(l.profileName,n),l.profileImage&&this.setProfileImage(l.profileImage,n)):(await this.syncReownName(e,n),this.setProfileImage(null,n))}}catch{await this.syncReownName(e,n),r!==1&&this.setProfileImage(null,n)}}syncConnectedWalletInfo(e){const r=tt.getProviderId(e);if(r===Et.CONNECTOR_TYPE_AUTH){const n=this.authProvider;if(n){const s=ge.getConnectedSocialProvider()??"email",i=n.getEmail()??n.getUsername();this.setConnectedWalletInfo({name:r,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(!tI&&Oe.isClient()){const e={...qr.DEFAULT_FEATURES,...this.options.features},r=[];if(e&&((e.email||e.socials&&e.socials.length)&&r.push(ls(()=>import("./embedded-wallet-BznT4L_d.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),e.email&&r.push(ls(()=>import("./email-DyrkZVxH.js"),__vite__mapDeps([12,1,2,3,11,7,10,6,13,8]))),e.socials&&r.push(ls(()=>import("./socials-DlWwHXMr.js"),__vite__mapDeps([14,1,2,3,15,6,7,16,10,11,17,5,18]))),e.swaps&&r.push(ls(()=>import("./swaps-DHzS7S5j.js"),__vite__mapDeps([19,1,2,3,6,7,20,21,22,5,10,18,8]))),e.send&&r.push(ls(()=>import("./send-CFDiLVdj.js"),__vite__mapDeps([23,1,2,3,6,7,10,11,22,5,8,24]))),e.receive&&r.push(ls(()=>import("./receive-CVxqoyvo.js"),__vite__mapDeps([25,1,2,3,26,5,17]))),e.onramp&&r.push(ls(()=>import("./onramp-B8PhpJhH.js"),__vite__mapDeps([27,1,2,3,28,18,10,5,7,29,15,6,11,8]))),e.history&&r.push(ls(()=>import("./transactions-DFj4R89w.js"),__vite__mapDeps([30,1,2,3,31,28,18,10,11,5])))),await Promise.all([...r,ls(()=>import("./index-BoGeYc0t.js"),__vite__mapDeps([32,1,2,3,5,7,24,10,33,21,9,29,6,31,28,18,11,20,8,13,15,16,4,26,17])),ls(()=>import("./w3m-modal-BM3Wb9sv.js"),__vite__mapDeps([34,1,2,3,9,5,10,7,21,33]))]),!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!ie.state.disableAppend&&!ie.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}tI=!0}}}let rr;function DJ(t){t&&(rr=t)}function use(){if(!rr)throw new Error('Please call "createAppKit" before using "useAppKitTheme" hook');function t(o){o&&(rr==null||rr.setThemeMode(o))}function e(o){o&&(rr==null||rr.setThemeVariables(o))}const[r,n]=J.useState(rr.getThemeMode()),[s,i]=J.useState(rr.getThemeVariables());return J.useEffect(()=>{const o=rr==null?void 0:rr.subscribeTheme(a=>{n(a.themeMode),i(a.themeVariables)});return()=>{o==null||o()}},[]),{themeMode:r,themeVariables:s,setThemeMode:t,setThemeVariables:e}}function lse(){if(!rr)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(r){await(rr==null?void 0:rr.open(r))}async function e(){await(rr==null?void 0:rr.close())}return{open:t,close:e}}const UJ="1.7.3";let mc;function BJ(t){return mc||(mc=new kJ({...t,sdkVersion:Oe.generateSdkVersion(t.adapters??[],"react",UJ)}),DJ(mc)),mc}function hse(){const{caipNetwork:t,caipNetworkId:e,chainId:r}=MV();function n(s){mc==null||mc.switchNetwork(s)}return{caipNetwork:t,caipNetworkId:e,chainId:r,switchNetwork:n}}const LJ="6.13.5";function $J(t,e,r){const n=e.split("|").map(i=>i.trim());for(let i=0;i<n.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${r}`,s.value=t,s}async function en(t){const e=Object.keys(t);return(await Promise.all(e.map(n=>Promise.resolve(t[n])))).reduce((n,s,i)=>(n[e[i]]=s,n),{})}function Ce(t,e,r){for(let n in e){let s=e[n];const i=r?r[n]:null;i&&$J(s,i,n),Object.defineProperty(t,n,{enumerable:!0,value:s,writable:!1})}}function pl(t){if(t==null)return"null";if(Array.isArray(t))return"[ "+t.map(pl).join(", ")+" ]";if(t instanceof Uint8Array){const e="0123456789abcdef";let r="0x";for(let n=0;n<t.length;n++)r+=e[t[n]>>4],r+=e[t[n]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return pl(t.toJSON());switch(typeof t){case"boolean":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"number":return t.toString();case"string":return JSON.stringify(t);case"object":{const e=Object.keys(t);return e.sort(),"{ "+e.map(r=>`${pl(r)}: ${pl(t[r])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Rr(t,e){return t&&t.code===e}function h_(t){return Rr(t,"CALL_EXCEPTION")}function Bt(t,e,r){let n=t;{const i=[];if(r){if("message"in r||"code"in r||"name"in r)throw new Error(`value will overwrite populated values: ${pl(r)}`);for(const o in r){if(o==="shortMessage")continue;const a=r[o];i.push(o+"="+pl(a))}}i.push(`code=${e}`),i.push(`version=${LJ}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return Ce(s,{code:e}),r&&Object.assign(s,r),s.shortMessage==null&&Ce(s,{shortMessage:n}),s}function Q(t,e,r,n){if(!t)throw Bt(e,r,n)}function M(t,e,r,n){Q(t,e,"INVALID_ARGUMENT",{argument:r,value:n})}function NP(t,e,r){r==null&&(r=""),r&&(r=": "+r),Q(t>=e,"missing argument"+r,"MISSING_ARGUMENT",{count:t,expectedCount:e}),Q(t<=e,"too many arguments"+r,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"Ã©".normalize("NFD")!=="eÌ")throw new Error("broken");t.push(e)}catch{}return t},[]);function dg(t,e,r){if(r==null&&(r=""),t!==e){let n=r,s="new";r&&(n+=".",s+=" "+r),Q(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function TP(t,e,r){if(t instanceof Uint8Array)return r?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<n.length;i++)n[i]=parseInt(t.substring(s,s+2),16),s+=2;return n}M(!1,"invalid BytesLike value",e||"value",t)}function Ye(t,e){return TP(t,e,!1)}function tn(t,e){return TP(t,e,!0)}function Ct(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function d_(t){return Ct(t,!0)||t instanceof Uint8Array}const rI="0123456789abcdef";function be(t){const e=Ye(t);let r="0x";for(let n=0;n<e.length;n++){const s=e[n];r+=rI[(s&240)>>4]+rI[s&15]}return r}function er(t){return"0x"+t.map(e=>be(e).substring(2)).join("")}function Cl(t){return Ct(t,!0)?(t.length-2)/2:Ye(t).length}function Vt(t,e,r){const n=Ye(t);return r!=null&&r>n.length&&Q(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r}),be(n.slice(e??0,r??n.length))}function OP(t,e,r){const n=Ye(t);Q(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),r?s.set(n,e-n.length):s.set(n,0),be(s)}function uu(t,e){return OP(t,e,!0)}function MJ(t,e){return OP(t,e,!1)}const aw=BigInt(0),qs=BigInt(1),SE=9007199254740991;function iy(t,e){const r=cw(t,"value"),n=BigInt(Be(e,"width"));if(Q(r>>n===aw,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),r>>n-qs){const s=(qs<<n)-qs;return-((~r&s)+qs)}return r}function xP(t,e){let r=ve(t,"value");const n=BigInt(Be(e,"width")),s=qs<<n-qs;if(r<aw){r=-r,Q(r<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(qs<<n)-qs;return(~r&i)+qs}else Q(r<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return r}function yc(t,e){const r=cw(t,"value"),n=BigInt(Be(e,"bits"));return r&(qs<<n)-qs}function ve(t,e){switch(typeof t){case"bigint":return t;case"number":return M(Number.isInteger(t),"underflow",e||"value",t),M(t>=-9007199254740991&&t<=SE,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(r){M(!1,`invalid BigNumberish string: ${r.message}`,e||"value",t)}}M(!1,"invalid BigNumberish value",e||"value",t)}function cw(t,e){const r=ve(t,e);return Q(r>=aw,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),r}const nI="0123456789abcdef";function uw(t){if(t instanceof Uint8Array){let e="0x0";for(const r of t)e+=nI[r>>4],e+=nI[r&15];return BigInt(e)}return ve(t)}function Be(t,e){switch(typeof t){case"bigint":return M(t>=-9007199254740991&&t<=SE,"overflow",e||"value",t),Number(t);case"number":return M(Number.isInteger(t),"underflow",e||"value",t),M(t>=-9007199254740991&&t<=SE,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Be(BigInt(t),e)}catch(r){M(!1,`invalid numeric string: ${r.message}`,e||"value",t)}}M(!1,"invalid numeric value",e||"value",t)}function FJ(t){return Be(uw(t))}function Ua(t,e){let n=cw(t,"value").toString(16);if(e==null)n.length%2&&(n="0"+n);else{const s=Be(e,"width");for(Q(s*2>=n.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});n.length<s*2;)n="0"+n}return"0x"+n}function rn(t){const e=cw(t,"value");if(e===aw)return new Uint8Array([]);let r=e.toString(16);r.length%2&&(r="0"+r);const n=new Uint8Array(r.length/2);for(let s=0;s<n.length;s++){const i=s*2;n[s]=parseInt(r.substring(i,i+2),16)}return n}function gl(t){let e=be(d_(t)?t:rn(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const sI="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const iI=BigInt(58);function jJ(t){const e=Ye(t);let r=uw(e),n="";for(;r;)n=sI[Number(r%iI)]+n,r/=iI;for(let s=0;s<e.length&&!e[s];s++)n=sI[0]+n;return n}function HJ(t){t=atob(t);const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return Ye(e)}function zJ(t){const e=Ye(t);let r="";for(let n=0;n<e.length;n++)r+=String.fromCharCode(e[n]);return btoa(r)}var Pl;class PP{constructor(e,r,n){q(this,"filter");q(this,"emitter");V(this,Pl);k(this,Pl,r),Ce(this,{emitter:e,filter:n})}async removeListener(){E(this,Pl)!=null&&await this.emitter.off(this.filter,E(this,Pl))}}Pl=new WeakMap;function qJ(t,e,r,n,s){M(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function RP(t,e,r,n,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<r.length&&r[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?r.length-e-1:0}function WJ(t,e,r,n,s){return t==="OVERLONG"?(M(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),n.push(s),0):(n.push(65533),RP(t,e,r))}const VJ=Object.freeze({error:qJ,ignore:RP,replace:WJ});function GJ(t,e){e==null&&(e=VJ.error);const r=Ye(t,"bytes"),n=[];let s=0;for(;s<r.length;){const i=r[s++];if(i>>7===0){n.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,r,n):s+=e("BAD_PREFIX",s-1,r,n);continue}if(s-1+o>=r.length){s+=e("OVERRUN",s-1,r,n);continue}let c=i&(1<<8-o-1)-1;for(let u=0;u<o;u++){let l=r[s];if((l&192)!=128){s+=e("MISSING_CONTINUE",s,r,n),c=null;break}c=c<<6|l&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,r,n,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,r,n,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,r,n,c);continue}n.push(c)}}return n}function ki(t,e){M(typeof t=="string","invalid string value","str",t);let r=[];for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);if(s<128)r.push(s);else if(s<2048)r.push(s>>6|192),r.push(s&63|128);else if((s&64512)==55296){n++;const i=t.charCodeAt(n);M(n<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128)}else r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128)}return new Uint8Array(r)}function KJ(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function oy(t,e){return KJ(GJ(t,e))}function kP(t){async function e(r,n){Q(n==null||!n.cancelled,"request cancelled before sending","CANCELLED");const s=r.url.split(":")[0].toLowerCase();Q(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),Q(s==="https"||!r.credentials||r.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=Bt("request timeout","TIMEOUT"),o.abort()},r.timeout);n&&n.addListener(()=>{i=Bt("request cancelled","CANCELLED"),o.abort()});const c={method:r.method,headers:new Headers(Array.from(r)),body:r.body||void 0,signal:o.signal};let u;try{u=await fetch(r.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const l={};u.headers.forEach((f,p)=>{l[p.toLowerCase()]=f});const h=await u.arrayBuffer(),d=h==null?null:new Uint8Array(h);return{statusCode:u.status,statusMessage:u.statusText,headers:l,body:d}}return e}const JJ=12,YJ=250;let oI=kP();const QJ=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),ZJ=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let V0=!1;async function DP(t,e){try{const r=t.match(QJ);if(!r)throw new Error("invalid data");return new xa(200,"OK",{"content-type":r[1]||"text/plain"},r[2]?HJ(r[3]):eY(r[3]))}catch{return new xa(599,"BAD REQUEST (invalid data: URI)",{},null,new Mi(t))}}function UP(t){async function e(r,n){try{const s=r.match(ZJ);if(!s)throw new Error("invalid link");return new Mi(`${t}${s[2]}`)}catch{return new xa(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Mi(r))}}return e}const Qg={data:DP,ipfs:UP("https://gateway.ipfs.io/ipfs/")},BP=new WeakMap;var vc,ra;class XJ{constructor(e){V(this,vc);V(this,ra);k(this,vc,[]),k(this,ra,!1),BP.set(e,()=>{if(!E(this,ra)){k(this,ra,!0);for(const r of E(this,vc))setTimeout(()=>{r()},0);k(this,vc,[])}})}addListener(e){Q(!E(this,ra),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),E(this,vc).push(e)}get cancelled(){return E(this,ra)}checkSignal(){Q(!this.cancelled,"cancelled","CANCELLED",{})}}vc=new WeakMap,ra=new WeakMap;function Zg(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var Rl,kl,Ls,io,Dl,Ul,fr,Bn,oo,_c,Ac,Cc,pi,$s,na,Sc,Kd;const Oy=class Oy{constructor(e){V(this,Sc);V(this,Rl);V(this,kl);V(this,Ls);V(this,io);V(this,Dl);V(this,Ul);V(this,fr);V(this,Bn);V(this,oo);V(this,_c);V(this,Ac);V(this,Cc);V(this,pi);V(this,$s);V(this,na);k(this,Ul,String(e)),k(this,Rl,!1),k(this,kl,!0),k(this,Ls,{}),k(this,io,""),k(this,Dl,3e5),k(this,$s,{slotInterval:YJ,maxAttempts:JJ}),k(this,na,null)}get url(){return E(this,Ul)}set url(e){k(this,Ul,String(e))}get body(){return E(this,fr)==null?null:new Uint8Array(E(this,fr))}set body(e){if(e==null)k(this,fr,void 0),k(this,Bn,void 0);else if(typeof e=="string")k(this,fr,ki(e)),k(this,Bn,"text/plain");else if(e instanceof Uint8Array)k(this,fr,e),k(this,Bn,"application/octet-stream");else if(typeof e=="object")k(this,fr,ki(JSON.stringify(e))),k(this,Bn,"application/json");else throw new Error("invalid body")}hasBody(){return E(this,fr)!=null}get method(){return E(this,io)?E(this,io):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),k(this,io,String(e).toUpperCase())}get headers(){const e=Object.assign({},E(this,Ls));return E(this,oo)&&(e.authorization=`Basic ${zJ(ki(E(this,oo)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&E(this,Bn)&&(e["content-type"]=E(this,Bn)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,r){E(this,Ls)[String(e).toLowerCase()]=String(r)}clearHeaders(){k(this,Ls,{})}[Symbol.iterator](){const e=this.headers,r=Object.keys(e);let n=0;return{next:()=>{if(n<r.length){const s=r[n++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return E(this,oo)||null}setCredentials(e,r){M(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),k(this,oo,`${e}:${r}`)}get allowGzip(){return E(this,kl)}set allowGzip(e){k(this,kl,!!e)}get allowInsecureAuthentication(){return!!E(this,Rl)}set allowInsecureAuthentication(e){k(this,Rl,!!e)}get timeout(){return E(this,Dl)}set timeout(e){M(e>=0,"timeout must be non-zero","timeout",e),k(this,Dl,e)}get preflightFunc(){return E(this,_c)||null}set preflightFunc(e){k(this,_c,e)}get processFunc(){return E(this,Ac)||null}set processFunc(e){k(this,Ac,e)}get retryFunc(){return E(this,Cc)||null}set retryFunc(e){k(this,Cc,e)}get getUrlFunc(){return E(this,na)||oI}set getUrlFunc(e){k(this,na,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${E(this,fr)?be(E(this,fr)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(E(this,$s).slotInterval=e.slotInterval),e.maxAttempts!=null&&(E(this,$s).maxAttempts=e.maxAttempts)}send(){return Q(E(this,pi)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),k(this,pi,new XJ(this)),ee(this,Sc,Kd).call(this,0,aI()+this.timeout,0,this,new xa(0,"",{},null,this))}cancel(){Q(E(this,pi)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=BP.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const r=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();Q(this.method==="GET"&&(r!=="https"||n!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new Oy(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,k(s,Ls,Object.assign({},E(this,Ls))),E(this,fr)&&k(s,fr,new Uint8Array(E(this,fr))),k(s,Bn,E(this,Bn)),s}clone(){const e=new Oy(this.url);return k(e,io,E(this,io)),E(this,fr)&&k(e,fr,E(this,fr)),k(e,Bn,E(this,Bn)),k(e,Ls,Object.assign({},E(this,Ls))),k(e,oo,E(this,oo)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),k(e,_c,E(this,_c)),k(e,Ac,E(this,Ac)),k(e,Cc,E(this,Cc)),k(e,$s,Object.assign({},E(this,$s))),k(e,na,E(this,na)),e}static lockConfig(){V0=!0}static getGateway(e){return Qg[e.toLowerCase()]||null}static registerGateway(e,r){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(V0)throw new Error("gateways locked");Qg[e]=r}static registerGetUrl(e){if(V0)throw new Error("gateways locked");oI=e}static createGetUrlFunc(e){return kP()}static createDataGateway(){return DP}static createIpfsGatewayFunc(e){return UP(e)}};Rl=new WeakMap,kl=new WeakMap,Ls=new WeakMap,io=new WeakMap,Dl=new WeakMap,Ul=new WeakMap,fr=new WeakMap,Bn=new WeakMap,oo=new WeakMap,_c=new WeakMap,Ac=new WeakMap,Cc=new WeakMap,pi=new WeakMap,$s=new WeakMap,na=new WeakMap,Sc=new WeakSet,Kd=async function(e,r,n,s,i){var l,h,d;if(e>=E(this,$s).maxAttempts)return i.makeServerError("exceeded maximum retry limit");Q(aI()<=r,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),n>0&&await tY(n);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in Qg){const f=await Qg[a](o.url,Zg(E(s,pi)));if(f instanceof xa){let p=f;if(this.processFunc){Zg(E(s,pi));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,Zg(E(s,pi)));let u=new xa(c.statusCode,c.statusMessage,c.headers,c.body,s);if(u.statusCode===301||u.statusCode===302){try{const f=u.headers.location||"";return ee(l=o.redirect(f),Sc,Kd).call(l,e+1,r,0,s,u)}catch{}return u}else if(u.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,u,e))){const f=u.headers["retry-after"];let p=E(this,$s).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),ee(h=o.clone(),Sc,Kd).call(h,e+1,r,p,s,u)}if(this.processFunc){Zg(E(s,pi));try{u=await this.processFunc(o,u)}catch(f){(f.throttle==null||typeof f.stall!="number")&&u.makeServerError("error in post-processing function",f).assertOk();let p=E(this,$s).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),ee(d=o.clone(),Sc,Kd).call(d,e+1,r,p,s,u)}}return u};let Mi=Oy;var Rp,kp,Dp,Ln,Bl,Ic;const gA=class gA{constructor(e,r,n,s,i){V(this,Rp);V(this,kp);V(this,Dp);V(this,Ln);V(this,Bl);V(this,Ic);k(this,Rp,e),k(this,kp,r),k(this,Dp,Object.keys(n).reduce((o,a)=>(o[a.toLowerCase()]=String(n[a]),o),{})),k(this,Ln,s==null?null:new Uint8Array(s)),k(this,Bl,i||null),k(this,Ic,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${E(this,Ln)?be(E(this,Ln)):"null"}>`}get statusCode(){return E(this,Rp)}get statusMessage(){return E(this,kp)}get headers(){return Object.assign({},E(this,Dp))}get body(){return E(this,Ln)==null?null:new Uint8Array(E(this,Ln))}get bodyText(){try{return E(this,Ln)==null?"":oy(E(this,Ln))}catch{Q(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{Q(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,r=Object.keys(e);let n=0;return{next:()=>{if(n<r.length){const s=r[n++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,r){let n;e?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new gA(599,n,this.headers,this.body,E(this,Bl)||void 0);return k(s,Ic,{message:e,error:r}),s}throwThrottleError(e,r){r==null?r=-1:M(Number.isInteger(r)&&r>=0,"invalid stall timeout","stall",r);const n=new Error(e||"throttling requests");throw Ce(n,{stall:r,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return E(this,Ln)!=null}get request(){return E(this,Bl)}ok(){return E(this,Ic).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:r}=E(this,Ic);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let s=null;try{E(this,Ln)&&(s=oy(E(this,Ln)))}catch{}Q(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:r,info:{requestUrl:n,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};Rp=new WeakMap,kp=new WeakMap,Dp=new WeakMap,Ln=new WeakMap,Bl=new WeakMap,Ic=new WeakMap;let xa=gA;function aI(){return new Date().getTime()}function eY(t){return ki(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,r)=>String.fromCharCode(parseInt(r,16))))}function tY(t){return new Promise(e=>setTimeout(e,t))}const rY=BigInt(-1),Ds=BigInt(0),ml=BigInt(1),nY=BigInt(5),el={};let Sl="0000";for(;Sl.length<80;)Sl+=Sl;function Qa(t){let e=Sl;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function $d(t,e,r){const n=BigInt(e.width);if(e.signed){const s=ml<<n-ml;Q(r==null||t>=-s&&t<s,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:t}),t>Ds?t=iy(yc(t,n),n):t=-iy(yc(-t,n),n)}else{const s=ml<<n;Q(r==null||t>=0&&t<s,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:t}),t=(t%s+s)%s&s-ml}return t}function G0(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,r=128,n=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const i=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);M(i,"invalid fixed format","format",t),e=i[1]!=="u",r=parseInt(i[2]),n=parseInt(i[3])}}else if(t){const i=t,o=(a,c,u)=>i[a]==null?u:(M(typeof i[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,i[a]),i[a]);e=o("signed","boolean",e),r=o("width","number",r),n=o("decimals","number",n)}M(r%8===0,"invalid FixedNumber width (not byte aligned)","format.width",r),M(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const s=(e?"":"u")+"fixed"+String(r)+"x"+String(n);return{signed:e,width:r,decimals:n,name:s}}function sY(t,e){let r="";t<Ds&&(r="-",t*=rY);let n=t.toString();if(e===0)return r+n;for(;n.length<=e;)n=Sl+n;const s=n.length-e;for(n=n.substring(0,s)+"."+n.substring(s);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return r+n}var Ms,ht,Zr,ot,ec,Xi,IE,NE,TE,OE;const Zo=class Zo{constructor(e,r,n){V(this,ot);q(this,"format");V(this,Ms);V(this,ht);V(this,Zr);q(this,"_value");dg(e,el,"FixedNumber"),k(this,ht,r),k(this,Ms,n);const s=sY(r,n.decimals);Ce(this,{format:n.name,_value:s}),k(this,Zr,Qa(n.decimals))}get signed(){return E(this,Ms).signed}get width(){return E(this,Ms).width}get decimals(){return E(this,Ms).decimals}get value(){return E(this,ht)}addUnsafe(e){return ee(this,ot,IE).call(this,e)}add(e){return ee(this,ot,IE).call(this,e,"add")}subUnsafe(e){return ee(this,ot,NE).call(this,e)}sub(e){return ee(this,ot,NE).call(this,e,"sub")}mulUnsafe(e){return ee(this,ot,TE).call(this,e)}mul(e){return ee(this,ot,TE).call(this,e,"mul")}mulSignal(e){ee(this,ot,ec).call(this,e);const r=E(this,ht)*E(e,ht);return Q(r%E(this,Zr)===Ds,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),ee(this,ot,Xi).call(this,r/E(this,Zr),"mulSignal")}divUnsafe(e){return ee(this,ot,OE).call(this,e)}div(e){return ee(this,ot,OE).call(this,e,"div")}divSignal(e){Q(E(e,ht)!==Ds,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ee(this,ot,ec).call(this,e);const r=E(this,ht)*E(this,Zr);return Q(r%E(e,ht)===Ds,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),ee(this,ot,Xi).call(this,r/E(e,ht),"divSignal")}cmp(e){let r=this.value,n=e.value;const s=this.decimals-e.decimals;return s>0?n*=Qa(s):s<0&&(r*=Qa(-s)),r<n?-1:r>n?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=E(this,ht);return E(this,ht)<Ds&&(e-=E(this,Zr)-ml),e=E(this,ht)/E(this,Zr)*E(this,Zr),ee(this,ot,Xi).call(this,e,"floor")}ceiling(){let e=E(this,ht);return E(this,ht)>Ds&&(e+=E(this,Zr)-ml),e=E(this,ht)/E(this,Zr)*E(this,Zr),ee(this,ot,Xi).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const r=this.decimals-e,n=nY*Qa(r-1);let s=this.value+n;const i=Qa(r);return s=s/i*i,$d(s,E(this,Ms),"round"),new Zo(el,s,E(this,Ms))}isZero(){return E(this,ht)===Ds}isNegative(){return E(this,ht)<Ds}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Zo.fromString(this.toString(),e)}static fromValue(e,r,n){const s=r==null?0:Be(r),i=G0(n);let o=ve(e,"value");const a=s-i.decimals;if(a>0){const c=Qa(a);Q(o%c===Ds,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=c}else a<0&&(o*=Qa(-a));return $d(o,i,"fromValue"),new Zo(el,o,i)}static fromString(e,r){const n=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);M(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",e);const s=G0(r);let i=n[2]||"0",o=n[3]||"";for(;o.length<s.decimals;)o+=Sl;Q(o.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,s.decimals);const a=BigInt(n[1]+i+o);return $d(a,s,"fromString"),new Zo(el,a,s)}static fromBytes(e,r){let n=uw(Ye(e,"value"));const s=G0(r);return s.signed&&(n=iy(n,s.width)),$d(n,s,"fromBytes"),new Zo(el,n,s)}};Ms=new WeakMap,ht=new WeakMap,Zr=new WeakMap,ot=new WeakSet,ec=function(e){M(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},Xi=function(e,r){return e=$d(e,E(this,Ms),r),new Zo(el,e,E(this,Ms))},IE=function(e,r){return ee(this,ot,ec).call(this,e),ee(this,ot,Xi).call(this,E(this,ht)+E(e,ht),r)},NE=function(e,r){return ee(this,ot,ec).call(this,e),ee(this,ot,Xi).call(this,E(this,ht)-E(e,ht),r)},TE=function(e,r){return ee(this,ot,ec).call(this,e),ee(this,ot,Xi).call(this,E(this,ht)*E(e,ht)/E(this,Zr),r)},OE=function(e,r){return Q(E(e,ht)!==Ds,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ee(this,ot,ec).call(this,e),ee(this,ot,Xi).call(this,E(this,ht)*E(this,Zr)/E(e,ht),r)};let ay=Zo;function iY(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function cI(t,e,r){let n=0;for(let s=0;s<r;s++)n=n*256+t[e+s];return n}function uI(t,e,r,n){const s=[];for(;r<e+1+n;){const i=LP(t,r);s.push(i.result),r+=i.consumed,Q(r<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:t,length:n,offset:e})}return{consumed:1+n,result:s}}function LP(t,e){Q(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const r=n=>{Q(n<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:n})};if(t[e]>=248){const n=t[e]-247;r(e+1+n);const s=cI(t,e+1,n);return r(e+1+n+s),uI(t,e,e+1+n,n+s)}else if(t[e]>=192){const n=t[e]-192;return r(e+1+n),uI(t,e,e+1,n)}else if(t[e]>=184){const n=t[e]-183;r(e+1+n);const s=cI(t,e+1,n);r(e+1+n+s);const i=be(t.slice(e+1+n,e+1+n+s));return{consumed:1+n+s,result:i}}else if(t[e]>=128){const n=t[e]-128;r(e+1+n);const s=be(t.slice(e+1,e+1+n));return{consumed:1+n,result:s}}return{consumed:1,result:iY(t[e])}}function lw(t){const e=Ye(t,"data"),r=LP(e,0);return M(r.consumed===e.length,"unexpected junk after rlp payload","data",t),r.result}function lI(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function $P(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(i){n=n.concat($P(i))}),n.length<=55)return n.unshift(192+n.length),n;const s=lI(n.length);return s.unshift(247+s.length),s.concat(n)}const e=Array.prototype.slice.call(Ye(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=lI(e.length);return r.unshift(183+r.length),r.concat(e)}const hI="0123456789abcdef";function lu(t){let e="0x";for(const r of $P(t))e+=hI[r>>4],e+=hI[r&15];return e}const MP=["wei","kwei","mwei","gwei","szabo","finney","ether"];function FP(t,e){let r=18;if(typeof e=="string"){const n=MP.indexOf(e);M(n>=0,"invalid unit","unit",e),r=3*n}else e!=null&&(r=Be(e,"unit"));return ay.fromValue(t,r,{decimals:r,width:512}).toString()}function oY(t,e){M(typeof t=="string","value must be a string","value",t);let r=18;if(typeof e=="string"){const n=MP.indexOf(e);M(n>=0,"invalid unit","unit",e),r=3*n}else e!=null&&(r=Be(e,"unit"));return ay.fromString(t,{decimals:r,width:512}).value}function aY(t){return FP(t,18)}const nn=32,xE=new Uint8Array(nn),cY=["then"],Xg={},jP=new WeakMap;function ac(t){return jP.get(t)}function dI(t,e){jP.set(t,e)}function Md(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw r.error=e,r}function PE(t,e,r){return t.indexOf(null)>=0?e.map((n,s)=>n instanceof kh?PE(ac(n),n,r):n):t.reduce((n,s,i)=>{let o=e.getValue(s);return s in n||(r&&o instanceof kh&&(o=PE(ac(o),o,r)),n[s]=o),n},{})}var Ll;const yl=class yl extends Array{constructor(...r){const n=r[0];let s=r[1],i=(r[2]||[]).slice(),o=!0;n!==Xg&&(s=r,i=[],o=!1);super(s.length);V(this,Ll);s.forEach((u,l)=>{this[l]=u});const a=i.reduce((u,l)=>(typeof l=="string"&&u.set(l,(u.get(l)||0)+1),u),new Map);if(dI(this,Object.freeze(s.map((u,l)=>{const h=i[l];return h!=null&&a.get(h)===1?h:null}))),k(this,Ll,[]),E(this,Ll)==null&&E(this,Ll),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(u,l,h)=>{if(typeof l=="string"){if(l.match(/^[0-9]+$/)){const f=Be(l,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=u[f];return p instanceof Error&&Md(`index ${f}`,p),p}if(cY.indexOf(l)>=0)return Reflect.get(u,l,h);const d=u[l];if(d instanceof Function)return function(...f){return d.apply(this===h?u:this,f)};if(!(l in u))return u.getValue.apply(this===h?u:this,[l])}return Reflect.get(u,l,h)}});return dI(c,ac(this)),c}toArray(r){const n=[];return this.forEach((s,i)=>{s instanceof Error&&Md(`index ${i}`,s),r&&s instanceof yl&&(s=s.toArray(r)),n.push(s)}),n}toObject(r){const n=ac(this);return n.reduce((s,i,o)=>(Q(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),PE(n,this,r)),{})}slice(r,n){r==null&&(r=0),r<0&&(r+=this.length,r<0&&(r=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const s=ac(this),i=[],o=[];for(let a=r;a<n;a++)i.push(this[a]),o.push(s[a]);return new yl(Xg,i,o)}filter(r,n){const s=ac(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&Md(`index ${a}`,c),r.call(n,c,a,this)&&(i.push(c),o.push(s[a]))}return new yl(Xg,i,o)}map(r,n){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&Md(`index ${i}`,o),s.push(r.call(n,o,i,this))}return s}getValue(r){const n=ac(this).indexOf(r);if(n===-1)return;const s=this[n];return s instanceof Error&&Md(`property ${JSON.stringify(r)}`,s.error),s}static fromItems(r,n){return new yl(Xg,r,n)}};Ll=new WeakMap;let kh=yl;function fI(t){let e=rn(t);return Q(e.length<=nn,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:nn,offset:e.length}),e.length!==nn&&(e=tn(er([xE.slice(e.length%nn),e]))),e}class Lo{constructor(e,r,n,s){q(this,"name");q(this,"type");q(this,"localName");q(this,"dynamic");Ce(this,{name:e,type:r,localName:n,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,r){M(!1,e,this.localName,r)}}var ao,Nc,$l,Im;class RE{constructor(){V(this,$l);V(this,ao);V(this,Nc);k(this,ao,[]),k(this,Nc,0)}get data(){return er(E(this,ao))}get length(){return E(this,Nc)}appendWriter(e){return ee(this,$l,Im).call(this,tn(e.data))}writeBytes(e){let r=tn(e);const n=r.length%nn;return n&&(r=tn(er([r,xE.slice(n)]))),ee(this,$l,Im).call(this,r)}writeValue(e){return ee(this,$l,Im).call(this,fI(e))}writeUpdatableValue(){const e=E(this,ao).length;return E(this,ao).push(xE),k(this,Nc,E(this,Nc)+nn),r=>{E(this,ao)[e]=fI(r)}}}ao=new WeakMap,Nc=new WeakMap,$l=new WeakSet,Im=function(e){return E(this,ao).push(e),k(this,Nc,E(this,Nc)+e.length),e.length};var wn,$n,Tc,Oc,sa,wu,DE,HP;const mA=class mA{constructor(e,r,n){V(this,wu);q(this,"allowLoose");V(this,wn);V(this,$n);V(this,Tc);V(this,Oc);V(this,sa);Ce(this,{allowLoose:!!r}),k(this,wn,tn(e)),k(this,Tc,0),k(this,Oc,null),k(this,sa,n??1024),k(this,$n,0)}get data(){return be(E(this,wn))}get dataLength(){return E(this,wn).length}get consumed(){return E(this,$n)}get bytes(){return new Uint8Array(E(this,wn))}subReader(e){const r=new mA(E(this,wn).slice(E(this,$n)+e),this.allowLoose,E(this,sa));return k(r,Oc,this),r}readBytes(e,r){let n=ee(this,wu,HP).call(this,0,e,!!r);return ee(this,wu,DE).call(this,e),k(this,$n,E(this,$n)+n.length),n.slice(0,e)}readValue(){return uw(this.readBytes(nn))}readIndex(){return FJ(this.readBytes(nn))}};wn=new WeakMap,$n=new WeakMap,Tc=new WeakMap,Oc=new WeakMap,sa=new WeakMap,wu=new WeakSet,DE=function(e){var r;if(E(this,Oc))return ee(r=E(this,Oc),wu,DE).call(r,e);k(this,Tc,E(this,Tc)+e),Q(E(this,sa)<1||E(this,Tc)<=E(this,sa)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${E(this,sa)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:tn(E(this,wn)),offset:E(this,$n),length:e,info:{bytesRead:E(this,Tc),dataLength:this.dataLength}})},HP=function(e,r,n){let s=Math.ceil(r/nn)*nn;return E(this,$n)+s>E(this,wn).length&&(this.allowLoose&&n&&E(this,$n)+r<=E(this,wn).length?s=r:Q(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:tn(E(this,wn)),length:E(this,wn).length,offset:E(this,$n)+s})),E(this,wn).slice(E(this,$n),E(this,$n)+s)};let kE=mA;function cy(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function f_(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function uY(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");cy(t.outputLen),cy(t.blockLen)}function Dh(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function zP(t,e){f_(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const K0=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qP=t=>t instanceof Uint8Array,lY=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),J0=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),li=(t,e)=>t<<32-e|t>>>e,hY=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!hY)throw new Error("Non little-endian hardware is not supported");function dY(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function hw(t){if(typeof t=="string"&&(t=dY(t)),!qP(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function fY(...t){const e=new Uint8Array(t.reduce((n,s)=>n+s.length,0));let r=0;return t.forEach(n=>{if(!qP(n))throw new Error("Uint8Array expected");e.set(n,r),r+=n.length}),e}class p_{clone(){return this._cloneInto()}}function g_(t){const e=n=>t().update(hw(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function pY(t=32){if(K0&&typeof K0.getRandomValues=="function")return K0.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class WP extends p_{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,uY(e);const n=hw(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Dh(this),this.iHash.update(e),this}digestInto(e){Dh(this),f_(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const VP=(t,e,r)=>new WP(t,e).update(r).digest();VP.create=(t,e)=>new WP(t,e);function gY(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}class GP extends p_{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=J0(this.buffer)}update(e){Dh(this);const{view:r,buffer:n,blockLen:s}=this;e=hw(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=J0(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Dh(this),zP(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let h=o;h<s;h++)r[h]=0;gY(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=J0(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,l[h],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}}const mY=(t,e,r)=>t&e^~t&r,yY=(t,e,r)=>t&e^t&r^e&r,wY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),zo=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),qo=new Uint32Array(64);class bY extends GP{constructor(){super(64,32,8,!1),this.A=zo[0]|0,this.B=zo[1]|0,this.C=zo[2]|0,this.D=zo[3]|0,this.E=zo[4]|0,this.F=zo[5]|0,this.G=zo[6]|0,this.H=zo[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)qo[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const d=qo[h-15],f=qo[h-2],p=li(d,7)^li(d,18)^d>>>3,g=li(f,17)^li(f,19)^f>>>10;qo[h]=g+qo[h-7]+p+qo[h-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let h=0;h<64;h++){const d=li(a,6)^li(a,11)^li(a,25),f=l+d+mY(a,c,u)+wY[h]+qo[h]|0,g=(li(n,2)^li(n,13)^li(n,22))+yY(n,s,i)|0;l=u,u=c,c=a,a=o+f|0,o=i,i=s,s=n,n=f+g|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){qo.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const KP=g_(()=>new bY),em=BigInt(2**32-1),UE=BigInt(32);function JP(t,e=!1){return e?{h:Number(t&em),l:Number(t>>UE&em)}:{h:Number(t>>UE&em)|0,l:Number(t&em)|0}}function YP(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=JP(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const EY=(t,e)=>BigInt(t>>>0)<<UE|BigInt(e>>>0),vY=(t,e,r)=>t>>>r,_Y=(t,e,r)=>t<<32-r|e>>>r,AY=(t,e,r)=>t>>>r|e<<32-r,CY=(t,e,r)=>t<<32-r|e>>>r,SY=(t,e,r)=>t<<64-r|e>>>r-32,IY=(t,e,r)=>t>>>r-32|e<<64-r,NY=(t,e)=>e,TY=(t,e)=>t,QP=(t,e,r)=>t<<r|e>>>32-r,ZP=(t,e,r)=>e<<r|t>>>32-r,XP=(t,e,r)=>e<<r-32|t>>>64-r,eR=(t,e,r)=>t<<r-32|e>>>64-r;function OY(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const xY=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),PY=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,RY=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),kY=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,DY=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),UY=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,Me={fromBig:JP,split:YP,toBig:EY,shrSH:vY,shrSL:_Y,rotrSH:AY,rotrSL:CY,rotrBH:SY,rotrBL:IY,rotr32H:NY,rotr32L:TY,rotlSH:QP,rotlSL:ZP,rotlBH:XP,rotlBL:eR,add:OY,add3L:xY,add3H:PY,add4L:RY,add4H:kY,add5H:UY,add5L:DY},[BY,LY]=Me.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Wo=new Uint32Array(80),Vo=new Uint32Array(80);class $Y extends GP{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:h,Fl:d,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,r,n,s,i,o,a,c,u,l,h,d,f,p,g,y]}set(e,r,n,s,i,o,a,c,u,l,h,d,f,p,g,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=h|0,this.Fl=d|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,r){for(let _=0;_<16;_++,r+=4)Wo[_]=e.getUint32(r),Vo[_]=e.getUint32(r+=4);for(let _=16;_<80;_++){const S=Wo[_-15]|0,N=Vo[_-15]|0,A=Me.rotrSH(S,N,1)^Me.rotrSH(S,N,8)^Me.shrSH(S,N,7),x=Me.rotrSL(S,N,1)^Me.rotrSL(S,N,8)^Me.shrSL(S,N,7),P=Wo[_-2]|0,R=Vo[_-2]|0,B=Me.rotrSH(P,R,19)^Me.rotrBH(P,R,61)^Me.shrSH(P,R,6),$=Me.rotrSL(P,R,19)^Me.rotrBL(P,R,61)^Me.shrSL(P,R,6),K=Me.add4L(x,$,Vo[_-7],Vo[_-16]),te=Me.add4H(K,A,B,Wo[_-7],Wo[_-16]);Wo[_]=te|0,Vo[_]=K|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:h,El:d,Fh:f,Fl:p,Gh:g,Gl:y,Hh:b,Hl:v}=this;for(let _=0;_<80;_++){const S=Me.rotrSH(h,d,14)^Me.rotrSH(h,d,18)^Me.rotrBH(h,d,41),N=Me.rotrSL(h,d,14)^Me.rotrSL(h,d,18)^Me.rotrBL(h,d,41),A=h&f^~h&g,x=d&p^~d&y,P=Me.add5L(v,N,x,LY[_],Vo[_]),R=Me.add5H(P,b,S,A,BY[_],Wo[_]),B=P|0,$=Me.rotrSH(n,s,28)^Me.rotrBH(n,s,34)^Me.rotrBH(n,s,39),K=Me.rotrSL(n,s,28)^Me.rotrBL(n,s,34)^Me.rotrBL(n,s,39),te=n&i^n&a^i&a,H=s&o^s&c^o&c;b=g|0,v=y|0,g=f|0,y=p|0,f=h|0,p=d|0,{h,l:d}=Me.add(u|0,l|0,R|0,B|0),u=a|0,l=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const C=Me.add3L(B,K,H);n=Me.add3H(C,R,$,te),s=C|0}({h:n,l:s}=Me.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Me.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Me.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=Me.add(this.Dh|0,this.Dl|0,u|0,l|0),{h,l:d}=Me.add(this.Eh|0,this.El|0,h|0,d|0),{h:f,l:p}=Me.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=Me.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:b,l:v}=Me.add(this.Hh|0,this.Hl|0,b|0,v|0),this.set(n,s,i,o,a,c,u,l,h,d,f,p,g,y,b,v)}roundClean(){Wo.fill(0),Vo.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const MY=g_(()=>new $Y);function FY(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof _e<"u")return _e;throw new Error("unable to locate global object")}const pI=FY();pI.crypto||pI.msCrypto;function jY(t){switch(t){case"sha256":return KP.create();case"sha512":return MY.create()}M(!1,"invalid hashing algorithm name","algorithm",t)}const[tR,rR,nR]=[[],[],[]],HY=BigInt(0),Fd=BigInt(1),zY=BigInt(2),qY=BigInt(7),WY=BigInt(256),VY=BigInt(113);for(let t=0,e=Fd,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],tR.push(2*(5*n+r)),rR.push((t+1)*(t+2)/2%64);let s=HY;for(let i=0;i<7;i++)e=(e<<Fd^(e>>qY)*VY)%WY,e&zY&&(s^=Fd<<(Fd<<BigInt(i))-Fd);nR.push(s)}const[GY,KY]=YP(nR,!0),gI=(t,e,r)=>r>32?XP(t,e,r):QP(t,e,r),mI=(t,e,r)=>r>32?eR(t,e,r):ZP(t,e,r);function JY(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],h=gI(u,l,1)^r[a],d=mI(u,l,1)^r[a+1];for(let f=0;f<50;f+=10)t[o+f]^=h,t[o+f+1]^=d}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=rR[o],c=gI(s,i,a),u=mI(s,i,a),l=tR[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=GY[n],t[1]^=KY[n]}r.fill(0)}class m_ extends p_{constructor(e,r,n,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,cy(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=lY(this.state)}keccak(){JY(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Dh(this);const{blockLen:r,state:n}=this;e=hw(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Dh(this,!1),f_(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return cy(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(zP(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new m_(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const YY=(t,e,r)=>g_(()=>new m_(e,t,r)),QY=YY(1,136,256/8);let sR=!1;const iR=function(t){return QY(t)};let oR=iR;function ir(t){const e=Ye(t,"data");return be(oR(e))}ir._=iR;ir.lock=function(){sR=!0};ir.register=function(t){if(sR)throw new TypeError("keccak256 is locked");oR=t};Object.freeze(ir);const aR=function(t){return jY("sha256").update(t).digest()};let cR=aR,uR=!1;function od(t){const e=Ye(t,"data");return be(cR(e))}od._=aR;od.lock=function(){uR=!0};od.register=function(t){if(uR)throw new Error("sha256 is locked");cR=t};Object.freeze(od);Object.freeze(od);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lR=BigInt(0),dw=BigInt(1),ZY=BigInt(2),fw=t=>t instanceof Uint8Array,XY=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Uh(t){if(!fw(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=XY[t[r]];return e}function hR(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function y_(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Bh(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(e/2);for(let n=0;n<r.length;n++){const s=n*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");r[n]=o}return r}function Jc(t){return y_(Uh(t))}function w_(t){if(!fw(t))throw new Error("Uint8Array expected");return y_(Uh(Uint8Array.from(t).reverse()))}function Lh(t,e){return Bh(t.toString(16).padStart(e*2,"0"))}function b_(t,e){return Lh(t,e).reverse()}function eQ(t){return Bh(hR(t))}function Bs(t,e,r){let n;if(typeof e=="string")try{n=Bh(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(fw(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(`${t} expected ${r} bytes, got ${s}`);return n}function pp(...t){const e=new Uint8Array(t.reduce((n,s)=>n+s.length,0));let r=0;return t.forEach(n=>{if(!fw(n))throw new Error("Uint8Array expected");e.set(n,r),r+=n.length}),e}function tQ(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function rQ(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function nQ(t){let e;for(e=0;t>lR;t>>=dw,e+=1);return e}function sQ(t,e){return t>>BigInt(e)&dw}const iQ=(t,e,r)=>t|(r?dw:lR)<<BigInt(e),E_=t=>(ZY<<BigInt(t-1))-dw,Y0=t=>new Uint8Array(t),yI=t=>Uint8Array.from(t);function dR(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Y0(t),s=Y0(t),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...h)=>r(s,n,...h),c=(h=Y0())=>{s=a(yI([0]),h),n=a(),h.length!==0&&(s=a(yI([1]),h),n=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const d=[];for(;h<e;){n=a();const f=n.slice();d.push(f),h+=n.length}return pp(...d)};return(h,d)=>{o(),c(h);let f;for(;!(f=d(u()));)c();return o(),f}}const oQ={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function fg(t,e,r={}){const n=(s,i,o)=>{const a=oQ[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}const aQ=Object.freeze(Object.defineProperty({__proto__:null,bitGet:sQ,bitLen:nQ,bitMask:E_,bitSet:iQ,bytesToHex:Uh,bytesToNumberBE:Jc,bytesToNumberLE:w_,concatBytes:pp,createHmacDrbg:dR,ensureBytes:Bs,equalBytes:tQ,hexToBytes:Bh,hexToNumber:y_,numberToBytesBE:Lh,numberToBytesLE:b_,numberToHexUnpadded:hR,numberToVarBytesBE:eQ,utf8ToBytes:rQ,validateObject:fg},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Er=BigInt(0),Zt=BigInt(1),cc=BigInt(2),cQ=BigInt(3),BE=BigInt(4),wI=BigInt(5),bI=BigInt(8);BigInt(9);BigInt(16);function vn(t,e){const r=t%e;return r>=Er?r:e+r}function uQ(t,e,r){if(r<=Er||e<Er)throw new Error("Expected power/modulo > 0");if(r===Zt)return Er;let n=Zt;for(;e>Er;)e&Zt&&(n=n*t%r),t=t*t%r,e>>=Zt;return n}function cs(t,e,r){let n=t;for(;e-- >Er;)n*=n,n%=r;return n}function LE(t,e){if(t===Er||e<=Er)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=vn(t,e),n=e,s=Er,i=Zt;for(;r!==Er;){const a=n/r,c=n%r,u=s-i*a;n=r,r=c,s=i,i=u}if(n!==Zt)throw new Error("invert: does not exist");return vn(s,e)}function lQ(t){const e=(t-Zt)/cc;let r,n,s;for(r=t-Zt,n=0;r%cc===Er;r/=cc,n++);for(s=cc;s<t&&uQ(s,e,t)!==t-Zt;s++);if(n===1){const o=(t+Zt)/BE;return function(c,u){const l=c.pow(u,o);if(!c.eql(c.sqr(l),u))throw new Error("Cannot find square root");return l}}const i=(r+Zt)/cc;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,l=a.pow(a.mul(a.ONE,s),r),h=a.pow(c,i),d=a.pow(c,r);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(d);f<u&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(l,Zt<<BigInt(u-f-1));l=a.sqr(p),h=a.mul(h,p),d=a.mul(d,l),u=f}return h}}function hQ(t){if(t%BE===cQ){const e=(t+Zt)/BE;return function(n,s){const i=n.pow(s,e);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%bI===wI){const e=(t-wI)/bI;return function(n,s){const i=n.mul(s,cc),o=n.pow(i,e),a=n.mul(s,o),c=n.mul(n.mul(a,cc),o),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),s))throw new Error("Cannot find square root");return u}}return lQ(t)}const dQ=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function fQ(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=dQ.reduce((n,s)=>(n[s]="function",n),e);return fg(t,r)}function pQ(t,e,r){if(r<Er)throw new Error("Expected power > 0");if(r===Er)return t.ONE;if(r===Zt)return e;let n=t.ONE,s=e;for(;r>Er;)r&Zt&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Zt;return n}function gQ(t,e){const r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function fR(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function mQ(t,e,r=!1,n={}){if(t<=Er)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=fR(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=hQ(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:E_(s),ZERO:Er,ONE:Zt,create:c=>vn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Er<=c&&c<t},is0:c=>c===Er,isOdd:c=>(c&Zt)===Zt,neg:c=>vn(-c,t),eql:(c,u)=>c===u,sqr:c=>vn(c*c,t),add:(c,u)=>vn(c+u,t),sub:(c,u)=>vn(c-u,t),mul:(c,u)=>vn(c*u,t),pow:(c,u)=>pQ(a,c,u),div:(c,u)=>vn(c*LE(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>LE(c,t),sqrt:n.sqrt||(c=>o(a,c)),invertBatch:c=>gQ(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>r?b_(c,i):Lh(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return r?w_(c):Jc(c)}});return Object.freeze(a)}function pR(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function gR(t){const e=pR(t);return e+Math.ceil(e/2)}function yQ(t,e,r=!1){const n=t.length,s=pR(e),i=gR(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const o=r?Jc(t):w_(t),a=vn(o,e-Zt)+Zt;return r?b_(a,s):Lh(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wQ=BigInt(0),Q0=BigInt(1);function bQ(t,e){const r=(s,i)=>{const o=i.negate();return s?o:i},n=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:r,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>wQ;)i&Q0&&(o=o.add(a)),a=a.double(),i>>=Q0;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=n(i),c=[];let u=s,l=u;for(let h=0;h<o;h++){l=u,c.push(l);for(let d=1;d<a;d++)l=l.add(u),c.push(l);u=l.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=n(s);let u=t.ZERO,l=t.BASE;const h=BigInt(2**s-1),d=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let y=Number(o&h);o>>=f,y>c&&(y-=d,o+=Q0);const b=g,v=g+Math.abs(y)-1,_=p%2!==0,S=y<0;y===0?l=l.add(r(_,i[b])):u=u.add(r(S,i[v]))}return{p:u,f:l}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let u=i.get(s);return u||(u=this.precomputeWindow(s,c),c!==1&&i.set(s,a(u))),this.wNAF(c,u,o)}}}function mR(t){return fQ(t.Fp),fg(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...fR(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function EQ(t){const e=mR(t);fg(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:vQ,hexToBytes:_Q}=aQ,wc={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=wc;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:vQ(n),l:t.subarray(r+2)}},toSig(t){const{Err:e}=wc,r=typeof t=="string"?_Q(t):t;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=wc._parseInt(r.subarray(2)),{d:o,l:a}=wc._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,r=u=>{const l=u.toString(16);return l.length&1?`0${l}`:l},n=e(r(t.s)),s=e(r(t.r)),i=n.length/2,o=s.length/2,a=r(i),c=r(o);return`30${r(o+i+4)}02${c}${s}02${a}${n}`}},bo=BigInt(0),Es=BigInt(1);BigInt(2);const EI=BigInt(3);BigInt(4);function AQ(t){const e=EQ(t),{Fp:r}=e,n=e.toBytes||((p,g,y)=>{const b=g.toAffine();return pp(Uint8Array.from([4]),r.toBytes(b.x),r.toBytes(b.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),y=r.fromBytes(g.subarray(0,r.BYTES)),b=r.fromBytes(g.subarray(r.BYTES,2*r.BYTES));return{x:y,y:b}});function i(p){const{a:g,b:y}=e,b=r.sqr(p),v=r.mul(b,p);return r.add(r.add(v,r.mul(p,g)),y)}if(!r.eql(r.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&bo<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:y,wrapPrivateKey:b,n:v}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=Uh(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(y*2,"0")}let _;try{_=typeof p=="bigint"?p:Jc(Bs("private key",p,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof p}`)}return b&&(_=vn(_,v)),a(_),_}const u=new Map;function l(p){if(!(p instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(g,y,b){if(this.px=g,this.py=y,this.pz=b,g==null||!r.isValid(g))throw new Error("x required");if(y==null||!r.isValid(y))throw new Error("y required");if(b==null||!r.isValid(b))throw new Error("z required")}static fromAffine(g){const{x:y,y:b}=g||{};if(!g||!r.isValid(y)||!r.isValid(b))throw new Error("invalid affine point");if(g instanceof h)throw new Error("projective point not allowed");const v=_=>r.eql(_,r.ZERO);return v(y)&&v(b)?h.ZERO:new h(y,b,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const y=r.invertBatch(g.map(b=>b.pz));return g.map((b,v)=>b.toAffine(y[v])).map(h.fromAffine)}static fromHex(g){const y=h.fromAffine(s(Bs("pointHex",g)));return y.assertValidity(),y}static fromPrivateKey(g){return h.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y}=this.toAffine();if(!r.isValid(g)||!r.isValid(y))throw new Error("bad point: x or y not FE");const b=r.sqr(y),v=i(g);if(!r.eql(b,v))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(r.isOdd)return!r.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){l(g);const{px:y,py:b,pz:v}=this,{px:_,py:S,pz:N}=g,A=r.eql(r.mul(y,N),r.mul(_,v)),x=r.eql(r.mul(b,N),r.mul(S,v));return A&&x}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:g,b:y}=e,b=r.mul(y,EI),{px:v,py:_,pz:S}=this;let N=r.ZERO,A=r.ZERO,x=r.ZERO,P=r.mul(v,v),R=r.mul(_,_),B=r.mul(S,S),$=r.mul(v,_);return $=r.add($,$),x=r.mul(v,S),x=r.add(x,x),N=r.mul(g,x),A=r.mul(b,B),A=r.add(N,A),N=r.sub(R,A),A=r.add(R,A),A=r.mul(N,A),N=r.mul($,N),x=r.mul(b,x),B=r.mul(g,B),$=r.sub(P,B),$=r.mul(g,$),$=r.add($,x),x=r.add(P,P),P=r.add(x,P),P=r.add(P,B),P=r.mul(P,$),A=r.add(A,P),B=r.mul(_,S),B=r.add(B,B),P=r.mul(B,$),N=r.sub(N,P),x=r.mul(B,R),x=r.add(x,x),x=r.add(x,x),new h(N,A,x)}add(g){l(g);const{px:y,py:b,pz:v}=this,{px:_,py:S,pz:N}=g;let A=r.ZERO,x=r.ZERO,P=r.ZERO;const R=e.a,B=r.mul(e.b,EI);let $=r.mul(y,_),K=r.mul(b,S),te=r.mul(v,N),H=r.add(y,b),C=r.add(_,S);H=r.mul(H,C),C=r.add($,K),H=r.sub(H,C),C=r.add(y,v);let T=r.add(_,N);return C=r.mul(C,T),T=r.add($,te),C=r.sub(C,T),T=r.add(b,v),A=r.add(S,N),T=r.mul(T,A),A=r.add(K,te),T=r.sub(T,A),P=r.mul(R,C),A=r.mul(B,te),P=r.add(A,P),A=r.sub(K,P),P=r.add(K,P),x=r.mul(A,P),K=r.add($,$),K=r.add(K,$),te=r.mul(R,te),C=r.mul(B,C),K=r.add(K,te),te=r.sub($,te),te=r.mul(R,te),C=r.add(C,te),$=r.mul(K,C),x=r.add(x,$),$=r.mul(T,C),A=r.mul(H,A),A=r.sub(A,$),$=r.mul(H,K),P=r.mul(T,P),P=r.add(P,$),new h(A,x,P)}subtract(g){return this.add(g.negate())}is0(){return this.equals(h.ZERO)}wNAF(g){return f.wNAFCached(this,u,g,y=>{const b=r.invertBatch(y.map(v=>v.pz));return y.map((v,_)=>v.toAffine(b[_])).map(h.fromAffine)})}multiplyUnsafe(g){const y=h.ZERO;if(g===bo)return y;if(a(g),g===Es)return this;const{endo:b}=e;if(!b)return f.unsafeLadder(this,g);let{k1neg:v,k1:_,k2neg:S,k2:N}=b.splitScalar(g),A=y,x=y,P=this;for(;_>bo||N>bo;)_&Es&&(A=A.add(P)),N&Es&&(x=x.add(P)),P=P.double(),_>>=Es,N>>=Es;return v&&(A=A.negate()),S&&(x=x.negate()),x=new h(r.mul(x.px,b.beta),x.py,x.pz),A.add(x)}multiply(g){a(g);let y=g,b,v;const{endo:_}=e;if(_){const{k1neg:S,k1:N,k2neg:A,k2:x}=_.splitScalar(y);let{p:P,f:R}=this.wNAF(N),{p:B,f:$}=this.wNAF(x);P=f.constTimeNegate(S,P),B=f.constTimeNegate(A,B),B=new h(r.mul(B.px,_.beta),B.py,B.pz),b=P.add(B),v=R.add($)}else{const{p:S,f:N}=this.wNAF(y);b=S,v=N}return h.normalizeZ([b,v])[0]}multiplyAndAddUnsafe(g,y,b){const v=h.BASE,_=(N,A)=>A===bo||A===Es||!N.equals(v)?N.multiplyUnsafe(A):N.multiply(A),S=_(this,y).add(_(g,b));return S.is0()?void 0:S}toAffine(g){const{px:y,py:b,pz:v}=this,_=this.is0();g==null&&(g=_?r.ONE:r.inv(v));const S=r.mul(y,g),N=r.mul(b,g),A=r.mul(v,g);if(_)return{x:r.ZERO,y:r.ZERO};if(!r.eql(A,r.ONE))throw new Error("invZ was invalid");return{x:S,y:N}}isTorsionFree(){const{h:g,isTorsionFree:y}=e;if(g===Es)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:y}=e;return g===Es?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),n(h,this,g)}toHex(g=!0){return Uh(this.toRawBytes(g))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const d=e.nBitLength,f=bQ(h,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function CQ(t){const e=mR(t);return fg(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function SQ(t){const e=CQ(t),{Fp:r,n}=e,s=r.BYTES+1,i=2*r.BYTES+1;function o(C){return bo<C&&C<r.ORDER}function a(C){return vn(C,n)}function c(C){return LE(C,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:l,weierstrassEquation:h,isWithinCurveOrder:d}=AQ({...e,toBytes(C,T,L){const z=T.toAffine(),j=r.toBytes(z.x),W=pp;return L?W(Uint8Array.from([T.hasEvenY()?2:3]),j):W(Uint8Array.from([4]),j,r.toBytes(z.y))},fromBytes(C){const T=C.length,L=C[0],z=C.subarray(1);if(T===s&&(L===2||L===3)){const j=Jc(z);if(!o(j))throw new Error("Point is not on curve");const W=h(j);let re=r.sqrt(W);const ne=(re&Es)===Es;return(L&1)===1!==ne&&(re=r.neg(re)),{x:j,y:re}}else if(T===i&&L===4){const j=r.fromBytes(z.subarray(0,r.BYTES)),W=r.fromBytes(z.subarray(r.BYTES,2*r.BYTES));return{x:j,y:W}}else throw new Error(`Point of length ${T} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=C=>Uh(Lh(C,e.nByteLength));function p(C){const T=n>>Es;return C>T}function g(C){return p(C)?a(-C):C}const y=(C,T,L)=>Jc(C.slice(T,L));class b{constructor(T,L,z){this.r=T,this.s=L,this.recovery=z,this.assertValidity()}static fromCompact(T){const L=e.nByteLength;return T=Bs("compactSignature",T,L*2),new b(y(T,0,L),y(T,L,2*L))}static fromDER(T){const{r:L,s:z}=wc.toSig(Bs("DER",T));return new b(L,z)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(T){return new b(this.r,this.s,T)}recoverPublicKey(T){const{r:L,s:z,recovery:j}=this,W=x(Bs("msgHash",T));if(j==null||![0,1,2,3].includes(j))throw new Error("recovery id invalid");const re=j===2||j===3?L+e.n:L;if(re>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const ne=(j&1)===0?"02":"03",le=u.fromHex(ne+f(re)),Z=c(re),he=a(-W*Z),Se=a(z*Z),je=u.BASE.multiplyAndAddUnsafe(le,he,Se);if(!je)throw new Error("point at infinify");return je.assertValidity(),je}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Bh(this.toDERHex())}toDERHex(){return wc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Bh(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const v={isValidPrivateKey(C){try{return l(C),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const C=gR(e.n);return yQ(e.randomBytes(C),e.n)},precompute(C=8,T=u.BASE){return T._setWindowSize(C),T.multiply(BigInt(3)),T}};function _(C,T=!0){return u.fromPrivateKey(C).toRawBytes(T)}function S(C){const T=C instanceof Uint8Array,L=typeof C=="string",z=(T||L)&&C.length;return T?z===s||z===i:L?z===2*s||z===2*i:C instanceof u}function N(C,T,L=!0){if(S(C))throw new Error("first arg must be private key");if(!S(T))throw new Error("second arg must be public key");return u.fromHex(T).multiply(l(C)).toRawBytes(L)}const A=e.bits2int||function(C){const T=Jc(C),L=C.length*8-e.nBitLength;return L>0?T>>BigInt(L):T},x=e.bits2int_modN||function(C){return a(A(C))},P=E_(e.nBitLength);function R(C){if(typeof C!="bigint")throw new Error("bigint expected");if(!(bo<=C&&C<P))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Lh(C,e.nByteLength)}function B(C,T,L=$){if(["recovered","canonical"].some(Re=>Re in L))throw new Error("sign() legacy options not supported");const{hash:z,randomBytes:j}=e;let{lowS:W,prehash:re,extraEntropy:ne}=L;W==null&&(W=!0),C=Bs("msgHash",C),re&&(C=Bs("prehashed msgHash",z(C)));const le=x(C),Z=l(T),he=[R(Z),R(le)];if(ne!=null){const Re=ne===!0?j(r.BYTES):ne;he.push(Bs("extraEntropy",Re))}const Se=pp(...he),je=le;function qe(Re){const St=A(Re);if(!d(St))return;const pt=c(St),It=u.BASE.multiply(St).toAffine(),gt=a(It.x);if(gt===bo)return;const Gt=a(pt*a(je+gt*Z));if(Gt===bo)return;let rs=(It.x===gt?0:2)|Number(It.y&Es),Ts=Gt;return W&&p(Gt)&&(Ts=g(Gt),rs^=1),new b(gt,Ts,rs)}return{seed:Se,k2sig:qe}}const $={lowS:e.lowS,prehash:!1},K={lowS:e.lowS,prehash:!1};function te(C,T,L=$){const{seed:z,k2sig:j}=B(C,T,L),W=e;return dR(W.hash.outputLen,W.nByteLength,W.hmac)(z,j)}u.BASE._setWindowSize(8);function H(C,T,L,z=K){var It;const j=C;if(T=Bs("msgHash",T),L=Bs("publicKey",L),"strict"in z)throw new Error("options.strict was renamed to lowS");const{lowS:W,prehash:re}=z;let ne,le;try{if(typeof j=="string"||j instanceof Uint8Array)try{ne=b.fromDER(j)}catch(gt){if(!(gt instanceof wc.Err))throw gt;ne=b.fromCompact(j)}else if(typeof j=="object"&&typeof j.r=="bigint"&&typeof j.s=="bigint"){const{r:gt,s:Gt}=j;ne=new b(gt,Gt)}else throw new Error("PARSE");le=u.fromHex(L)}catch(gt){if(gt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(W&&ne.hasHighS())return!1;re&&(T=e.hash(T));const{r:Z,s:he}=ne,Se=x(T),je=c(he),qe=a(Se*je),Re=a(Z*je),St=(It=u.BASE.multiplyAndAddUnsafe(le,qe,Re))==null?void 0:It.toAffine();return St?a(St.x)===Z:!1}return{CURVE:e,getPublicKey:_,getSharedSecret:N,sign:te,verify:H,ProjectivePoint:u,Signature:b,utils:v}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function IQ(t){return{hash:t,hmac:(e,...r)=>VP(t,e,fY(...r)),randomBytes:pY}}function NQ(t,e){const r=n=>SQ({...t,...IQ(n)});return Object.freeze({...r(e),create:r})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yR=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),vI=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),TQ=BigInt(1),$E=BigInt(2),_I=(t,e)=>(t+e/$E)/e;function OQ(t){const e=yR,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,h=cs(l,r,e)*l%e,d=cs(h,r,e)*l%e,f=cs(d,$E,e)*u%e,p=cs(f,s,e)*f%e,g=cs(p,i,e)*p%e,y=cs(g,a,e)*g%e,b=cs(y,c,e)*y%e,v=cs(b,a,e)*g%e,_=cs(v,r,e)*l%e,S=cs(_,o,e)*p%e,N=cs(S,n,e)*u%e,A=cs(N,$E,e);if(!ME.eql(ME.sqr(A),t))throw new Error("Cannot find square root");return A}const ME=mQ(yR,void 0,void 0,{sqrt:OQ}),Ko=NQ({a:BigInt(0),b:BigInt(7),Fp:ME,n:vI,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=vI,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-TQ*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=_I(i*t,e),c=_I(-n*t,e);let u=vn(t-a*r-c*s,e),l=vn(-a*n-c*i,e);const h=u>o,d=l>o;if(h&&(u=e-u),d&&(l=e-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:u,k2neg:d,k2:l}}}},KP);BigInt(0);Ko.ProjectivePoint;const gp="0x0000000000000000000000000000000000000000",AI="0x0000000000000000000000000000000000000000000000000000000000000000",CI=BigInt(0),SI=BigInt(1),II=BigInt(2),NI=BigInt(27),TI=BigInt(28),tm=BigInt(35),tl={};function OI(t){return uu(rn(t),32)}var Ml,Fl,jl,xc;const Us=class Us{constructor(e,r,n,s){V(this,Ml);V(this,Fl);V(this,jl);V(this,xc);dg(e,tl,"Signature"),k(this,Ml,r),k(this,Fl,n),k(this,jl,s),k(this,xc,null)}get r(){return E(this,Ml)}set r(e){M(Cl(e)===32,"invalid r","value",e),k(this,Ml,be(e))}get s(){return E(this,Fl)}set s(e){M(Cl(e)===32,"invalid s","value",e);const r=be(e);M(parseInt(r.substring(0,3))<8,"non-canonical s","value",r),k(this,Fl,r)}get v(){return E(this,jl)}set v(e){const r=Be(e,"value");M(r===27||r===28,"invalid v","v",e),k(this,jl,r)}get networkV(){return E(this,xc)}get legacyChainId(){const e=this.networkV;return e==null?null:Us.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Ye(this.s);return this.yParity&&(e[0]|=128),be(e)}get compactSerialized(){return er([this.r,this.yParityAndS])}get serialized(){return er([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Us(tl,this.r,this.s,this.v);return this.networkV&&k(e,xc,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const r=ve(e,"v");return r==NI||r==TI?CI:(M(r>=tm,"invalid EIP-155 v","v",e),(r-tm)/II)}static getChainIdV(e,r){return ve(e)*II+BigInt(35+r-27)}static getNormalizedV(e){const r=ve(e);return r===CI||r===NI?27:r===SI||r===TI?28:(M(r>=tm,"invalid v","v",e),r&SI?27:28)}static from(e){function r(u,l){M(u,l,"signature",e)}if(e==null)return new Us(tl,AI,AI,27);if(typeof e=="string"){const u=Ye(e,"signature");if(u.length===64){const l=be(u.slice(0,32)),h=u.slice(32,64),d=h[0]&128?28:27;return h[0]&=127,new Us(tl,l,be(h),d)}if(u.length===65){const l=be(u.slice(0,32)),h=u.slice(32,64);r((h[0]&128)===0,"non-canonical s");const d=Us.getNormalizedV(u[64]);return new Us(tl,l,be(h),d)}r(!1,"invalid raw signature length")}if(e instanceof Us)return e.clone();const n=e.r;r(n!=null,"missing r");const s=OI(n),i=function(u,l){if(u!=null)return OI(u);if(l!=null){r(Ct(l,32),"invalid yParityAndS");const h=Ye(l);return h[0]&=127,be(h)}r(!1,"missing s")}(e.s,e.yParityAndS);r((Ye(i)[0]&128)==0,"non-canonical s");const{networkV:o,v:a}=function(u,l,h){if(u!=null){const d=ve(u);return{networkV:d>=tm?d:void 0,v:Us.getNormalizedV(d)}}if(l!=null)return r(Ct(l,32),"invalid yParityAndS"),{v:Ye(l)[0]&128?28:27};if(h!=null){switch(Be(h,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}r(!1,"invalid yParity")}r(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new Us(tl,s,i,a);return o&&k(c,xc,o),r(e.yParity==null||Be(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),r(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};Ml=new WeakMap,Fl=new WeakMap,jl=new WeakMap,xc=new WeakMap;let Xs=Us;var co;const lc=class lc{constructor(e){V(this,co);M(Cl(e)===32,"invalid private key","privateKey","[REDACTED]"),k(this,co,be(e))}get privateKey(){return E(this,co)}get publicKey(){return lc.computePublicKey(E(this,co))}get compressedPublicKey(){return lc.computePublicKey(E(this,co),!0)}sign(e){M(Cl(e)===32,"invalid digest length","digest",e);const r=Ko.sign(tn(e),tn(E(this,co)),{lowS:!0});return Xs.from({r:Ua(r.r,32),s:Ua(r.s,32),v:r.recovery?28:27})}computeSharedSecret(e){const r=lc.computePublicKey(e);return be(Ko.getSharedSecret(tn(E(this,co)),Ye(r),!1))}static computePublicKey(e,r){let n=Ye(e,"key");if(n.length===32){const i=Ko.getPublicKey(n,!!r);return be(i)}if(n.length===64){const i=new Uint8Array(65);i[0]=4,i.set(n,1),n=i}const s=Ko.ProjectivePoint.fromHex(n);return be(s.toRawBytes(r))}static recoverPublicKey(e,r){M(Cl(e)===32,"invalid digest length","digest",e);const n=Xs.from(r);let s=Ko.Signature.fromCompact(tn(er([n.r,n.s])));s=s.addRecoveryBit(n.yParity);const i=s.recoverPublicKey(tn(e));return M(i!=null,"invalid signautre for digest","signature",r),"0x"+i.toHex(!1)}static addPoints(e,r,n){const s=Ko.ProjectivePoint.fromHex(lc.computePublicKey(e).substring(2)),i=Ko.ProjectivePoint.fromHex(lc.computePublicKey(r).substring(2));return"0x"+s.add(i).toHex(!!n)}};co=new WeakMap;let mp=lc;const xQ=BigInt(0),PQ=BigInt(36);function xI(t){t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let s=0;s<40;s++)r[s]=e[s].charCodeAt(0);const n=Ye(ir(r));for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(n[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const v_={};for(let t=0;t<10;t++)v_[String(t)]=String(t);for(let t=0;t<26;t++)v_[String.fromCharCode(65+t)]=String(10+t);const PI=15;function RQ(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>v_[n]).join("");for(;e.length>=PI;){let n=e.substring(0,PI);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}const kQ=function(){const t={};for(let e=0;e<36;e++){const r="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[r]=BigInt(e)}return t}();function DQ(t){t=t.toLowerCase();let e=xQ;for(let r=0;r<t.length;r++)e=e*PQ+kQ[t[r]];return e}function ft(t){if(M(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=xI(t);return M(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){M(t.substring(2,4)===RQ(t),"bad icap checksum","address",t);let e=DQ(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return xI("0x"+e)}M(!1,"invalid address","address",t)}function UQ(t){const e=ft(t.from);let n=ve(t.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,ft(Vt(ir(lu([e,n])),12))}function wR(t){return t&&typeof t.getAddress=="function"}async function Z0(t,e){const r=await e;return(r==null||r==="0x0000000000000000000000000000000000000000")&&(Q(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),M(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),ft(r)}function sn(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?ft(t):(Q(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Z0(t,e.resolveName(t)));if(wR(t))return Z0(t,t.getAddress());if(t&&typeof t.then=="function")return Z0(t,t);M(!1,"unsupported addressable value","target",t)}const eo={};function ye(t,e){let r=!1;return e<0&&(r=!0,e*=-1),new Wr(eo,`${r?"":"u"}int${e}`,t,{signed:r,width:e})}function et(t,e){return new Wr(eo,`bytes${e||""}`,t,{size:e})}const RI=Symbol.for("_ethers_typed");var Pc;const to=class to{constructor(e,r,n,s){q(this,"type");q(this,"value");V(this,Pc);q(this,"_typedSymbol");s==null&&(s=null),dg(eo,e,"Typed"),Ce(this,{_typedSymbol:RI,type:r,value:n}),k(this,Pc,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return E(this,Pc)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return E(this,Pc)===!0?-1:E(this,Pc)===!1?this.value.length:null}static from(e,r){return new to(eo,e,r)}static uint8(e){return ye(e,8)}static uint16(e){return ye(e,16)}static uint24(e){return ye(e,24)}static uint32(e){return ye(e,32)}static uint40(e){return ye(e,40)}static uint48(e){return ye(e,48)}static uint56(e){return ye(e,56)}static uint64(e){return ye(e,64)}static uint72(e){return ye(e,72)}static uint80(e){return ye(e,80)}static uint88(e){return ye(e,88)}static uint96(e){return ye(e,96)}static uint104(e){return ye(e,104)}static uint112(e){return ye(e,112)}static uint120(e){return ye(e,120)}static uint128(e){return ye(e,128)}static uint136(e){return ye(e,136)}static uint144(e){return ye(e,144)}static uint152(e){return ye(e,152)}static uint160(e){return ye(e,160)}static uint168(e){return ye(e,168)}static uint176(e){return ye(e,176)}static uint184(e){return ye(e,184)}static uint192(e){return ye(e,192)}static uint200(e){return ye(e,200)}static uint208(e){return ye(e,208)}static uint216(e){return ye(e,216)}static uint224(e){return ye(e,224)}static uint232(e){return ye(e,232)}static uint240(e){return ye(e,240)}static uint248(e){return ye(e,248)}static uint256(e){return ye(e,256)}static uint(e){return ye(e,256)}static int8(e){return ye(e,-8)}static int16(e){return ye(e,-16)}static int24(e){return ye(e,-24)}static int32(e){return ye(e,-32)}static int40(e){return ye(e,-40)}static int48(e){return ye(e,-48)}static int56(e){return ye(e,-56)}static int64(e){return ye(e,-64)}static int72(e){return ye(e,-72)}static int80(e){return ye(e,-80)}static int88(e){return ye(e,-88)}static int96(e){return ye(e,-96)}static int104(e){return ye(e,-104)}static int112(e){return ye(e,-112)}static int120(e){return ye(e,-120)}static int128(e){return ye(e,-128)}static int136(e){return ye(e,-136)}static int144(e){return ye(e,-144)}static int152(e){return ye(e,-152)}static int160(e){return ye(e,-160)}static int168(e){return ye(e,-168)}static int176(e){return ye(e,-176)}static int184(e){return ye(e,-184)}static int192(e){return ye(e,-192)}static int200(e){return ye(e,-200)}static int208(e){return ye(e,-208)}static int216(e){return ye(e,-216)}static int224(e){return ye(e,-224)}static int232(e){return ye(e,-232)}static int240(e){return ye(e,-240)}static int248(e){return ye(e,-248)}static int256(e){return ye(e,-256)}static int(e){return ye(e,-256)}static bytes1(e){return et(e,1)}static bytes2(e){return et(e,2)}static bytes3(e){return et(e,3)}static bytes4(e){return et(e,4)}static bytes5(e){return et(e,5)}static bytes6(e){return et(e,6)}static bytes7(e){return et(e,7)}static bytes8(e){return et(e,8)}static bytes9(e){return et(e,9)}static bytes10(e){return et(e,10)}static bytes11(e){return et(e,11)}static bytes12(e){return et(e,12)}static bytes13(e){return et(e,13)}static bytes14(e){return et(e,14)}static bytes15(e){return et(e,15)}static bytes16(e){return et(e,16)}static bytes17(e){return et(e,17)}static bytes18(e){return et(e,18)}static bytes19(e){return et(e,19)}static bytes20(e){return et(e,20)}static bytes21(e){return et(e,21)}static bytes22(e){return et(e,22)}static bytes23(e){return et(e,23)}static bytes24(e){return et(e,24)}static bytes25(e){return et(e,25)}static bytes26(e){return et(e,26)}static bytes27(e){return et(e,27)}static bytes28(e){return et(e,28)}static bytes29(e){return et(e,29)}static bytes30(e){return et(e,30)}static bytes31(e){return et(e,31)}static bytes32(e){return et(e,32)}static address(e){return new to(eo,"address",e)}static bool(e){return new to(eo,"bool",!!e)}static bytes(e){return new to(eo,"bytes",e)}static string(e){return new to(eo,"string",e)}static array(e,r){throw new Error("not implemented yet")}static tuple(e,r){throw new Error("not implemented yet")}static overrides(e){return new to(eo,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===RI}static dereference(e,r){if(to.isTyped(e)){if(e.type!==r)throw new Error(`invalid type: expecetd ${r}, got ${e.type}`);return e.value}return e}};Pc=new WeakMap;let Wr=to;class BQ extends Lo{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,r){let n=Wr.dereference(r,"string");try{n=ft(n)}catch(s){return this._throwError(s.message,r)}return e.writeValue(n)}decode(e){return ft(Ua(e.readValue(),20))}}class LQ extends Lo{constructor(r){super(r.name,r.type,"_",r.dynamic);q(this,"coder");this.coder=r}defaultValue(){return this.coder.defaultValue()}encode(r,n){return this.coder.encode(r,n)}decode(r){return this.coder.decode(r)}}function bR(t,e,r){let n=[];if(Array.isArray(r))n=r;else if(r&&typeof r=="object"){let c={};n=e.map(u=>{const l=u.localName;return Q(l,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:r}),Q(!c[l],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:r}),c[l]=!0,r[l]})}else M(!1,"invalid tuple value","tuple",r);M(e.length===n.length,"types/value length mismatch","tuple",r);let s=new RE,i=new RE,o=[];e.forEach((c,u)=>{let l=n[u];if(c.dynamic){let h=i.length;c.encode(i,l);let d=s.writeUpdatableValue();o.push(f=>{d(f+h)})}else c.encode(s,l)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function ER(t,e){let r=[],n=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(u){if(Rr(u,"BUFFER_OVERRUN"))throw u;o=u,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(Rr(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");r.push(o),n.push(i.localName||null)}),kh.fromItems(r,n)}class $Q extends Lo{constructor(r,n,s){const i=r.type+"["+(n>=0?n:"")+"]",o=n===-1||r.dynamic;super("array",i,s,o);q(this,"coder");q(this,"length");Ce(this,{coder:r,length:n})}defaultValue(){const r=this.coder.defaultValue(),n=[];for(let s=0;s<this.length;s++)n.push(r);return n}encode(r,n){const s=Wr.dereference(n,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,r.writeValue(s.length)),NP(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return bR(r,o,s)}decode(r){let n=this.length;n===-1&&(n=r.readIndex(),Q(n*nn<=r.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:r.bytes,offset:n*nn,length:r.dataLength}));let s=[];for(let i=0;i<n;i++)s.push(new LQ(this.coder));return ER(r,s)}}class MQ extends Lo{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,r){const n=Wr.dereference(r,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class vR extends Lo{constructor(e,r){super(e,e,r,!0)}defaultValue(){return"0x"}encode(e,r){r=tn(r);let n=e.writeValue(r.length);return n+=e.writeBytes(r),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class FQ extends vR{constructor(e){super("bytes",e)}decode(e){return be(super.decode(e))}}class jQ extends Lo{constructor(r,n){let s="bytes"+String(r);super(s,s,n,!1);q(this,"size");Ce(this,{size:r},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(r,n){let s=tn(Wr.dereference(n,this.type));return s.length!==this.size&&this._throwError("incorrect data length",n),r.writeBytes(s)}decode(r){return be(r.readBytes(this.size))}}const HQ=new Uint8Array([]);class zQ extends Lo{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,r){return r!=null&&this._throwError("not null",r),e.writeBytes(HQ)}decode(e){return e.readBytes(0),null}}const qQ=BigInt(0),WQ=BigInt(1),VQ=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class GQ extends Lo{constructor(r,n,s){const i=(n?"int":"uint")+r*8;super(i,i,s,!1);q(this,"size");q(this,"signed");Ce(this,{size:r,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(r,n){let s=ve(Wr.dereference(n,this.type)),i=yc(VQ,nn*8);if(this.signed){let o=yc(i,this.size*8-1);(s>o||s<-(o+WQ))&&this._throwError("value out-of-bounds",n),s=xP(s,8*nn)}else(s<qQ||s>yc(i,this.size*8))&&this._throwError("value out-of-bounds",n);return r.writeValue(s)}decode(r){let n=yc(r.readValue(),this.size*8);return this.signed&&(n=iy(n,this.size*8)),n}}class KQ extends vR{constructor(e){super("string",e)}defaultValue(){return""}encode(e,r){return super.encode(e,ki(Wr.dereference(r,"string")))}decode(e){return oy(super.decode(e))}}class rm extends Lo{constructor(r,n){let s=!1;const i=[];r.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,n,s);q(this,"coders");Ce(this,{coders:Object.freeze(r.slice())})}defaultValue(){const r=[];this.coders.forEach(s=>{r.push(s.defaultValue())});const n=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||n[o]!==1||(o==="length"&&(o="_length"),r[o]==null&&(r[o]=r[i]))}),Object.freeze(r)}encode(r,n){const s=Wr.dereference(n,"tuple");return bR(r,this.coders,s)}decode(r){return ER(r,this.coders)}}function hu(t){return ir(ki(t))}var JQ="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const kI=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),DI=4;function YQ(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),s=1,i=[0,1];for(let N=1;N<n;N++)i.push(s+=r());let o=r(),a=e;e+=o;let c=0,u=0;function l(){return c==0&&(u=u<<8|t[e++],c=8),u>>--c&1}const h=31,d=2**h,f=d>>>1,p=f>>1,g=d-1;let y=0;for(let N=0;N<h;N++)y=y<<1|l();let b=[],v=0,_=d;for(;;){let N=Math.floor(((y-v+1)*s-1)/_),A=0,x=n;for(;x-A>1;){let B=A+x>>>1;N<i[B]?x=B:A=B}if(A==0)break;b.push(A);let P=v+Math.floor(_*i[A]/s),R=v+Math.floor(_*i[A+1]/s)-1;for(;((P^R)&f)==0;)y=y<<1&g|l(),P=P<<1&g,R=R<<1&g|1;for(;P&~R&p;)y=y&f|y<<1&g>>>1|l(),P=P<<1^f,R=(R^f)<<1|f|1;v=P,_=1+R-P}let S=n-4;return b.map(N=>{switch(N-S){case 3:return S+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return S+256+(t[a++]<<8|t[a++]);case 1:return S+t[a++];default:return N-1}})}function QQ(t){let e=0;return()=>t[e++]}function _R(t){return QQ(YQ(ZQ(t)))}function ZQ(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let r=t.length,n=new Uint8Array(6*r>>3);for(let s=0,i=0,o=0,a=0;s<r;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(n[i++]=a>>(o-=8));return n}function XQ(t){return t&1?~t>>1:t>>1}function eZ(t,e){let r=Array(t);for(let n=0,s=0;n<t;n++)r[n]=s+=XQ(e());return r}function yp(t,e=0){let r=[];for(;;){let n=t(),s=t();if(!s)break;e+=n;for(let i=0;i<s;i++)r.push(e+i);e+=s+1}return r}function AR(t){return wp(()=>{let e=yp(t);if(e.length)return e})}function CR(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(tZ(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(rZ(r,t))}return e.flat()}function wp(t){let e=[];for(;;){let r=t(e.length);if(!r)break;e.push(r)}return e}function SR(t,e,r){let n=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)eZ(t,r).forEach((i,o)=>n[o].push(i));return n}function tZ(t,e){let r=1+e(),n=e(),s=wp(e);return SR(s.length,1+t,e).flatMap((o,a)=>{let[c,...u]=o;return Array(s[a]).fill().map((l,h)=>{let d=h*n;return[c+h*r,u.map(f=>f+d)]})})}function rZ(t,e){let r=1+e();return SR(r,1+t,e).map(s=>[s[0],s.slice(1)])}function nZ(t){let e=[],r=yp(t);return s(n([]),[]),e;function n(i){let o=t(),a=wp(()=>{let c=yp(t).map(u=>r[u]);if(c.length)return n(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let u of o)for(let l of u.Q)s(u,[...a,l],c)}}}function sZ(t){return t.toString(16).toUpperCase().padStart(2,"0")}function IR(t){return`{${sZ(t)}}`}function iZ(t){let e=[];for(let r=0,n=t.length;r<n;){let s=t.codePointAt(r);r+=s<65536?1:2,e.push(s)}return e}function $h(t){let r=t.length;if(r<4096)return String.fromCodePoint(...t);let n=[];for(let s=0;s<r;)n.push(String.fromCodePoint(...t.slice(s,s+=4096)));return n.join("")}function oZ(t,e){let r=t.length,n=r-e.length;for(let s=0;n==0&&s<r;s++)n=t[s]-e[s];return n}var aZ="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const bp=44032,uy=4352,ly=4449,hy=4519,NR=19,TR=21,Mh=28,dy=TR*Mh,cZ=NR*dy,uZ=bp+cZ,lZ=uy+NR,hZ=ly+TR,dZ=hy+Mh;function Jd(t){return t>>24&255}function OR(t){return t&16777215}let FE,UI,jE,Nm;function fZ(){let t=_R(aZ);FE=new Map(AR(t).flatMap((e,r)=>e.map(n=>[n,r+1<<24]))),UI=new Set(yp(t)),jE=new Map,Nm=new Map;for(let[e,r]of CR(t)){if(!UI.has(e)&&r.length==2){let[n,s]=r,i=Nm.get(n);i||(i=new Map,Nm.set(n,i)),i.set(s,e)}jE.set(e,r.reverse())}}function xR(t){return t>=bp&&t<uZ}function pZ(t,e){if(t>=uy&&t<lZ&&e>=ly&&e<hZ)return bp+(t-uy)*dy+(e-ly)*Mh;if(xR(t)&&e>hy&&e<dZ&&(t-bp)%Mh==0)return t+(e-hy);{let r=Nm.get(t);return r&&(r=r.get(e),r)?r:-1}}function PR(t){FE||fZ();let e=[],r=[],n=!1;function s(i){let o=FE.get(i);o&&(n=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(xR(i)){let o=i-bp,a=o/dy|0,c=o%dy/Mh|0,u=o%Mh;s(uy+a),s(ly+c),u>0&&s(hy+u)}else{let o=jE.get(i);o?r.push(...o):s(i)}if(!r.length)break;i=r.pop()}if(n&&e.length>1){let i=Jd(e[0]);for(let o=1;o<e.length;o++){let a=Jd(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let u=e[c+1];if(e[c+1]=e[c],e[c]=u,!c||(i=Jd(e[--c]),i<=a))break}i=Jd(e[o])}}return e}function gZ(t){let e=[],r=[],n=-1,s=0;for(let i of t){let o=Jd(i),a=OR(i);if(n==-1)o==0?n=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(n,...r),r.length=0,n=a):r.push(a),s=o;else{let c=pZ(n,a);c>=0?n=c:s==0&&o==0?(e.push(n),n=a):(r.push(a),s=o)}}return n>=0&&e.push(n,...r),e}function RR(t){return PR(t).map(OR)}function mZ(t){return gZ(PR(t))}const BI=45,kR=".",DR=65039,UR=1,fy=t=>Array.from(t);function Ep(t,e){return t.P.has(e)||t.Q.has(e)}class yZ extends Array{get is_emoji(){return!0}}let HE,BR,bc,zE,LR,Il,X0,ul,tc,LI,qE;function __(){if(HE)return;let t=_R(JQ);const e=()=>yp(t),r=()=>new Set(e()),n=(l,h)=>h.forEach(d=>l.add(d));HE=new Map(CR(t)),BR=r(),bc=e(),zE=new Set(e().map(l=>bc[l])),bc=new Set(bc),LR=r(),r();let s=AR(t),i=t();const o=()=>{let l=new Set;return e().forEach(h=>n(l,s[h])),n(l,e()),l};Il=wp(l=>{let h=wp(t).map(d=>d+96);if(h.length){let d=l>=i;h[0]-=32,h=$h(h),d&&(h=`Restricted[${h}]`);let f=o(),p=o(),g=!t();return{N:h,P:f,Q:p,M:g,R:d}}}),X0=r(),ul=new Map;let a=e().concat(fy(X0)).sort((l,h)=>l-h);a.forEach((l,h)=>{let d=t(),f=a[h]=d?a[h-d]:{V:[],M:new Map};f.V.push(l),X0.has(l)||ul.set(l,f)});for(let{V:l,M:h}of new Set(ul.values())){let d=[];for(let p of l){let g=Il.filter(b=>Ep(b,p)),y=d.find(({G:b})=>g.some(v=>b.has(v)));y||(y={G:new Set,V:[]},d.push(y)),y.V.push(p),n(y.G,g)}let f=d.flatMap(p=>fy(p.G));for(let{G:p,V:g}of d){let y=new Set(f.filter(b=>!p.has(b)));for(let b of g)h.set(b,y)}}tc=new Set;let c=new Set;const u=l=>tc.has(l)?c.add(l):tc.add(l);for(let l of Il){for(let h of l.P)u(h);for(let h of l.Q)u(h)}for(let l of tc)!ul.has(l)&&!c.has(l)&&ul.set(l,UR);n(tc,RR(tc)),LI=nZ(t).map(l=>yZ.from(l)).sort(oZ),qE=new Map;for(let l of LI){let h=[qE];for(let d of l){let f=h.map(p=>{let g=p.get(d);return g||(g=new Map,p.set(d,g)),g});d===DR?h.push(...f):h=f}for(let d of h)d.V=l}}function A_(t){return($R(t)?"":`${C_(pw([t]))} `)+IR(t)}function C_(t){return`"${t}"â€Ž`}function wZ(t){if(t.length>=4&&t[2]==BI&&t[3]==BI)throw new Error(`invalid label extension: "${$h(t.slice(0,4))}"`)}function bZ(t){for(let r=t.lastIndexOf(95);r>0;)if(t[--r]!==95)throw new Error("underscore allowed only at start")}function EZ(t){let e=t[0],r=kI.get(e);if(r)throw bf(`leading ${r}`);let n=t.length,s=-1;for(let i=1;i<n;i++){e=t[i];let o=kI.get(e);if(o){if(s==i)throw bf(`${r} + ${o}`);s=i+1,r=o}}if(s==n)throw bf(`trailing ${r}`)}function pw(t,e=1/0,r=IR){let n=[];vZ(t[0])&&n.push("â—Œ"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];$R(a)&&(n.push($h(t.slice(s,o))),n.push(r(a)),s=o+1)}return n.push($h(t.slice(s,i))),n.join("")}function vZ(t){return __(),bc.has(t)}function $R(t){return __(),LR.has(t)}function _Z(t){return IZ(AZ(t,mZ,OZ))}function AZ(t,e,r){if(!t)return[];__();let n=0;return t.split(kR).map(s=>{let i=iZ(s),o={input:i,offset:n};n+=i.length+1;try{let a=o.tokens=TZ(i,e,r),c=a.length,u;if(!c)throw new Error("empty label");let l=o.output=a.flat();if(bZ(l),!(o.emoji=c>1||a[0].is_emoji)&&l.every(d=>d<128))wZ(l),u="ASCII";else{let d=a.flatMap(f=>f.is_emoji?[]:f);if(!d.length)u="Emoji";else{if(bc.has(l[0]))throw bf("leading combining mark");for(let g=1;g<c;g++){let y=a[g];if(!y.is_emoji&&bc.has(y[0]))throw bf(`emoji + combining mark: "${$h(a[g-1])} + ${pw([y[0]])}"`)}EZ(l);let f=fy(new Set(d)),[p]=SZ(f);NZ(p,d),CZ(p,f),u=p.N}}o.type=u}catch(a){o.error=a}return o})}function CZ(t,e){let r,n=[];for(let s of e){let i=ul.get(s);if(i===UR)return;if(i){let o=i.M.get(s);if(r=r?r.filter(a=>o.has(a)):fy(o),!r.length)return}else n.push(s)}if(r){for(let s of r)if(n.every(i=>Ep(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function SZ(t){let e=Il;for(let r of t){let n=e.filter(s=>Ep(s,r));if(!n.length)throw Il.some(s=>Ep(s,r))?FR(e[0],r):MR(r);if(e=n,n.length==1)break}return e}function IZ(t){return t.map(({input:e,error:r,output:n})=>{if(r){let s=r.message;throw new Error(t.length==1?s:`Invalid label ${C_(pw(e,63))}: ${s}`)}return $h(n)}).join(kR)}function MR(t){return new Error(`disallowed character: ${A_(t)}`)}function FR(t,e){let r=A_(e),n=Il.find(s=>s.P.has(e));return n&&(r=`${n.N} ${r}`),new Error(`illegal mixture: ${t.N} + ${r}`)}function bf(t){return new Error(`illegal placement: ${t}`)}function NZ(t,e){for(let r of e)if(!Ep(t,r))throw FR(t,r);if(t.M){let r=RR(e);for(let n=1,s=r.length;n<s;n++)if(zE.has(r[n])){let i=n+1;for(let o;i<s&&zE.has(o=r[i]);i++)for(let a=n;a<i;a++)if(r[a]==o)throw new Error(`duplicate non-spacing marks: ${A_(o)}`);if(i-n>DI)throw new Error(`excessive non-spacing marks: ${C_(pw(r.slice(n-1,i)))} (${i-n}/${DI})`);n=i}}}function TZ(t,e,r){let n=[],s=[];for(t=t.slice().reverse();t.length;){let i=xZ(t);if(i)s.length&&(n.push(e(s)),s=[]),n.push(r(i));else{let o=t.pop();if(tc.has(o))s.push(o);else{let a=HE.get(o);if(a)s.push(...a);else if(!BR.has(o))throw MR(o)}}}return s.length&&n.push(e(s)),n}function OZ(t){return t.filter(e=>e!=DR)}function xZ(t,e){let r=qE,n,s=t.length;for(;s&&(r=r.get(t[--s]),!!r);){let{V:i}=r;i&&(n=i,t.length=s)}return n}const jR=new Uint8Array(32);jR.fill(0);function $I(t){return M(t.length!==0,"invalid ENS name; empty component","comp",t),t}function HR(t){const e=ki(PZ(t)),r=[];if(t.length===0)return r;let n=0;for(let s=0;s<e.length;s++)e[s]===46&&(r.push($I(e.slice(n,s))),n=s+1);return M(n<e.length,"invalid ENS name; empty component","name",t),r.push($I(e.slice(n))),r}function PZ(t){try{if(t.length===0)throw new Error("empty label");return _Z(t)}catch(e){M(!1,`invalid ENS name (${e.message})`,"name",t)}}function WE(t){M(typeof t=="string","invalid ENS name; not a string","name",t),M(t.length,"invalid ENS name (empty label)","name",t);let e=jR;const r=HR(t);for(;r.length;)e=ir(er([e,ir(r.pop())]));return be(e)}function RZ(t,e){const r=e;return M(r<=255,"DNS encoded label cannot exceed 255","length",r),be(er(HR(t).map(n=>{M(n.length<=r,`label ${JSON.stringify(t)} exceeds ${r} bytes`,"name",t);const s=new Uint8Array(n.length+1);return s.set(n,1),s[0]=s.length-1,s})))+"00"}function eb(t,e){return{address:ft(t),storageKeys:e.map((r,n)=>(M(Ct(r,32),"invalid slot",`storageKeys[${n}]`,r),r.toLowerCase()))}}function Tu(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(M(r.length===2,"invalid slot set",`value[${n}]`,r),eb(r[0],r[1])):(M(r!=null&&typeof r=="object","invalid address-slot set","value",t),eb(r.address,r.storageKeys)));M(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(r=>{const n=t[r].reduce((s,i)=>(s[i]=!0,s),{});return eb(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function kZ(t){let e;return typeof t=="string"?e=mp.computePublicKey(t,!1):e=t.publicKey,ft(ir("0x"+e.substring(4)).substring(26))}function DZ(t,e){return kZ(mp.recoverPublicKey(t,e))}const gr=BigInt(0),UZ=BigInt(2),BZ=BigInt(27),LZ=BigInt(28),$Z=BigInt(35),MZ=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),tb=4096*32;function MI(t,e){let r=t.toString(16);for(;r.length<2;)r="0"+r;return r+=od(e).substring(4),"0x"+r}function gw(t){return t==="0x"?null:ft(t)}function S_(t,e){try{return Tu(t)}catch(r){M(!1,r.message,e,t)}}function pg(t,e){return t==="0x"?0:Be(t,e)}function Xt(t,e){if(t==="0x")return gr;const r=ve(t,e);return M(r<=MZ,"value exceeds uint size",e,r),r}function kt(t,e){const r=ve(t,"value"),n=rn(r);return M(n.length<=32,"value too large",`tx.${e}`,r),n}function I_(t){return Tu(t).map(e=>[e.address,e.storageKeys])}function FZ(t,e){M(Array.isArray(t),`invalid ${e}`,"value",t);for(let r=0;r<t.length;r++)M(Ct(t[r],32),"invalid ${ param } hash",`value[${r}]`,t[r]);return t}function jZ(t){const e=lw(t);M(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const r={type:0,nonce:pg(e[0],"nonce"),gasPrice:Xt(e[1],"gasPrice"),gasLimit:Xt(e[2],"gasLimit"),to:gw(e[3]),value:Xt(e[4],"value"),data:be(e[5]),chainId:gr};if(e.length===6)return r;const n=Xt(e[6],"v"),s=Xt(e[7],"r"),i=Xt(e[8],"s");if(s===gr&&i===gr)r.chainId=n;else{let o=(n-$Z)/UZ;o<gr&&(o=gr),r.chainId=o,M(o!==gr||n===BZ||n===LZ,"non-canonical legacy v","v",e[6]),r.signature=Xs.from({r:uu(e[7],32),s:uu(e[8],32),v:n})}return r}function HZ(t,e){const r=[kt(t.nonce,"nonce"),kt(t.gasPrice||0,"gasPrice"),kt(t.gasLimit,"gasLimit"),t.to||"0x",kt(t.value,"value"),t.data];let n=gr;if(t.chainId!=gr)n=ve(t.chainId,"tx.chainId"),M(!e||e.networkV==null||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(n=i)}if(!e)return n!==gr&&(r.push(rn(n)),r.push("0x"),r.push("0x")),lu(r);let s=BigInt(27+e.yParity);return n!==gr?s=Xs.getChainIdV(n,e.v):BigInt(e.v)!==s&&M(!1,"tx.chainId/sig.v mismatch","sig",e),r.push(rn(s)),r.push(rn(e.r)),r.push(rn(e.s)),lu(r)}function N_(t,e){let r;try{if(r=pg(e[0],"yParity"),r!==0&&r!==1)throw new Error("bad yParity")}catch{M(!1,"invalid yParity","yParity",e[0])}const n=uu(e[1],32),s=uu(e[2],32),i=Xs.from({r:n,s,yParity:r});t.signature=i}function zZ(t){const e=lw(Ye(t).slice(1));M(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",be(t));const r={type:2,chainId:Xt(e[0],"chainId"),nonce:pg(e[1],"nonce"),maxPriorityFeePerGas:Xt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Xt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Xt(e[4],"gasLimit"),to:gw(e[5]),value:Xt(e[6],"value"),data:be(e[7]),accessList:S_(e[8],"accessList")};return e.length===9||N_(r,e.slice(9)),r}function qZ(t,e){const r=[kt(t.chainId,"chainId"),kt(t.nonce,"nonce"),kt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),kt(t.maxFeePerGas||0,"maxFeePerGas"),kt(t.gasLimit,"gasLimit"),t.to||"0x",kt(t.value,"value"),t.data,I_(t.accessList||[])];return e&&(r.push(kt(e.yParity,"yParity")),r.push(rn(e.r)),r.push(rn(e.s))),er(["0x02",lu(r)])}function WZ(t){const e=lw(Ye(t).slice(1));M(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",be(t));const r={type:1,chainId:Xt(e[0],"chainId"),nonce:pg(e[1],"nonce"),gasPrice:Xt(e[2],"gasPrice"),gasLimit:Xt(e[3],"gasLimit"),to:gw(e[4]),value:Xt(e[5],"value"),data:be(e[6]),accessList:S_(e[7],"accessList")};return e.length===8||N_(r,e.slice(8)),r}function VZ(t,e){const r=[kt(t.chainId,"chainId"),kt(t.nonce,"nonce"),kt(t.gasPrice||0,"gasPrice"),kt(t.gasLimit,"gasLimit"),t.to||"0x",kt(t.value,"value"),t.data,I_(t.accessList||[])];return e&&(r.push(kt(e.yParity,"recoveryParam")),r.push(rn(e.r)),r.push(rn(e.s))),er(["0x01",lu(r)])}function GZ(t){let e=lw(Ye(t).slice(1)),r="3",n=null;if(e.length===4&&Array.isArray(e[0])){r="3 (network format)";const i=e[1],o=e[2],a=e[3];M(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),M(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),M(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),M(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),M(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),n=[];for(let c=0;c<e[1].length;c++)n.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}M(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${r}`,"data",be(t));const s={type:3,chainId:Xt(e[0],"chainId"),nonce:pg(e[1],"nonce"),maxPriorityFeePerGas:Xt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Xt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Xt(e[4],"gasLimit"),to:gw(e[5]),value:Xt(e[6],"value"),data:be(e[7]),accessList:S_(e[8],"accessList"),maxFeePerBlobGas:Xt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};n&&(s.blobs=n),M(s.to!=null,`invalid address for transaction type: ${r}`,"data",t),M(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)M(Ct(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||N_(s,e.slice(11)),s}function KZ(t,e,r){const n=[kt(t.chainId,"chainId"),kt(t.nonce,"nonce"),kt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),kt(t.maxFeePerGas||0,"maxFeePerGas"),kt(t.gasLimit,"gasLimit"),t.to||gp,kt(t.value,"value"),t.data,I_(t.accessList||[]),kt(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),FZ(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(n.push(kt(e.yParity,"yParity")),n.push(rn(e.r)),n.push(rn(e.s)),r)?er(["0x03",lu([n,r.map(s=>s.data),r.map(s=>s.commitment),r.map(s=>s.proof)])]):er(["0x03",lu(n)])}var gi,Hl,zl,ql,Wl,Vl,Gl,Kl,Jl,Yl,Ql,Zl,Rc,ia,uo,oa,Xl,Tm;const ro=class ro{constructor(){V(this,Xl);V(this,gi);V(this,Hl);V(this,zl);V(this,ql);V(this,Wl);V(this,Vl);V(this,Gl);V(this,Kl);V(this,Jl);V(this,Yl);V(this,Ql);V(this,Zl);V(this,Rc);V(this,ia);V(this,uo);V(this,oa);k(this,gi,null),k(this,Hl,null),k(this,ql,0),k(this,Wl,gr),k(this,Vl,null),k(this,Gl,null),k(this,Kl,null),k(this,zl,"0x"),k(this,Jl,gr),k(this,Yl,gr),k(this,Ql,null),k(this,Zl,null),k(this,Rc,null),k(this,ia,null),k(this,oa,null),k(this,uo,null)}get type(){return E(this,gi)}set type(e){switch(e){case null:k(this,gi,null);break;case 0:case"legacy":k(this,gi,0);break;case 1:case"berlin":case"eip-2930":k(this,gi,1);break;case 2:case"london":case"eip-1559":k(this,gi,2);break;case 3:case"cancun":case"eip-4844":k(this,gi,3);break;default:M(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const e=E(this,Hl);return e==null&&this.type===3?gp:e}set to(e){k(this,Hl,e==null?null:ft(e))}get nonce(){return E(this,ql)}set nonce(e){k(this,ql,Be(e,"value"))}get gasLimit(){return E(this,Wl)}set gasLimit(e){k(this,Wl,ve(e))}get gasPrice(){const e=E(this,Vl);return e==null&&(this.type===0||this.type===1)?gr:e}set gasPrice(e){k(this,Vl,e==null?null:ve(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=E(this,Gl);return e??(this.type===2||this.type===3?gr:null)}set maxPriorityFeePerGas(e){k(this,Gl,e==null?null:ve(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=E(this,Kl);return e??(this.type===2||this.type===3?gr:null)}set maxFeePerGas(e){k(this,Kl,e==null?null:ve(e,"maxFeePerGas"))}get data(){return E(this,zl)}set data(e){k(this,zl,be(e))}get value(){return E(this,Jl)}set value(e){k(this,Jl,ve(e,"value"))}get chainId(){return E(this,Yl)}set chainId(e){k(this,Yl,ve(e))}get signature(){return E(this,Ql)||null}set signature(e){k(this,Ql,e==null?null:Xs.from(e))}get accessList(){const e=E(this,Zl)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){k(this,Zl,e==null?null:Tu(e))}get maxFeePerBlobGas(){const e=E(this,Rc);return e==null&&this.type===3?gr:e}set maxFeePerBlobGas(e){k(this,Rc,e==null?null:ve(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=E(this,ia);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){M(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let r=0;r<e.length;r++)M(Ct(e[r],32),"invalid blobVersionedHash",`value[${r}]`,e[r])}k(this,ia,e)}get blobs(){return E(this,oa)==null?null:E(this,oa).map(e=>Object.assign({},e))}set blobs(e){if(e==null){k(this,oa,null);return}const r=[],n=[];for(let s=0;s<e.length;s++){const i=e[s];if(d_(i)){Q(E(this,uo),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Ye(i);if(M(o.length<=tb,"blob is too large",`blobs[${s}]`,i),o.length!==tb){const u=new Uint8Array(tb);u.set(o),o=u}const a=E(this,uo).blobToKzgCommitment(o),c=be(E(this,uo).computeBlobKzgProof(o,a));r.push({data:be(o),commitment:be(a),proof:c}),n.push(MI(1,a))}else{const o=be(i.commitment);r.push({data:be(i.data),commitment:o,proof:be(i.proof)}),n.push(MI(1,o))}}k(this,oa,r),k(this,ia,n)}get kzg(){return E(this,uo)}set kzg(e){k(this,uo,e)}get hash(){return this.signature==null?null:ir(ee(this,Xl,Tm).call(this,!0,!1))}get unsignedHash(){return ir(this.unsignedSerialized)}get from(){return this.signature==null?null:DZ(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:mp.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return ee(this,Xl,Tm).call(this,!0,!0)}get unsignedSerialized(){return ee(this,Xl,Tm).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,r=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,s=E(this,Rc)!=null||E(this,ia);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&Q(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Q(!r||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Q(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):r?i.push(2):e?(i.push(1),n||i.push(0)):n?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return ro.from(this)}toJSON(){const e=r=>r==null?null:r.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new ro;if(typeof e=="string"){const n=Ye(e);if(n[0]>=127)return ro.from(jZ(n));switch(n[0]){case 1:return ro.from(WZ(n));case 2:return ro.from(zZ(n));case 3:return ro.from(GZ(n))}Q(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const r=new ro;return e.type!=null&&(r.type=e.type),e.to!=null&&(r.to=e.to),e.nonce!=null&&(r.nonce=e.nonce),e.gasLimit!=null&&(r.gasLimit=e.gasLimit),e.gasPrice!=null&&(r.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(r.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(r.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(r.data=e.data),e.value!=null&&(r.value=e.value),e.chainId!=null&&(r.chainId=e.chainId),e.signature!=null&&(r.signature=Xs.from(e.signature)),e.accessList!=null&&(r.accessList=e.accessList),e.blobVersionedHashes!=null&&(r.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(r.kzg=e.kzg),e.blobs!=null&&(r.blobs=e.blobs),e.hash!=null&&(M(r.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),M(r.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(M(r.isSigned(),"unsigned transaction cannot define '.from'","tx",e),M(r.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),r}};gi=new WeakMap,Hl=new WeakMap,zl=new WeakMap,ql=new WeakMap,Wl=new WeakMap,Vl=new WeakMap,Gl=new WeakMap,Kl=new WeakMap,Jl=new WeakMap,Yl=new WeakMap,Ql=new WeakMap,Zl=new WeakMap,Rc=new WeakMap,ia=new WeakMap,uo=new WeakMap,oa=new WeakMap,Xl=new WeakSet,Tm=function(e,r){Q(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=e?this.signature:null;switch(this.inferType()){case 0:return HZ(this,n);case 1:return VZ(this,n);case 2:return qZ(this,n);case 3:return KZ(this,n,r?this.blobs:null)}Q(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let py=ro;const zR=new Uint8Array(32);zR.fill(0);const JZ=BigInt(-1),qR=BigInt(0),WR=BigInt(1),YZ=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function QZ(t){const e=Ye(t),r=e.length%32;return r?er([e,zR.slice(r)]):be(e)}const ZZ=Ua(WR,32),XZ=Ua(qR,32),FI={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},rb=["name","version","chainId","verifyingContract","salt"];function jI(t){return function(e){return M(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const eX={name:jI("name"),version:jI("version"),chainId:function(t){const e=ve(t,"domain.chainId");return M(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):gl(e)},verifyingContract:function(t){try{return ft(t).toLowerCase()}catch{}M(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Ye(t,"domain.salt");return M(e.length===32,'invalid domain value "salt"',"domain.salt",t),be(e)}};function nb(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const r=e[1]==="",n=parseInt(e[2]);M(n%8===0&&n!==0&&n<=256&&e[2]===String(n),"invalid numeric width","type",t);const s=yc(YZ,r?n-1:n),i=r?(s+WR)*JZ:qR;return function(o){const a=ve(o,"value");return M(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),Ua(r?xP(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return M(r!==0&&r<=32&&e[1]===String(r),"invalid bytes width","type",t),function(n){const s=Ye(n);return M(s.length===r,`invalid length for ${t}`,"value",n),QZ(n)}}}switch(t){case"address":return function(e){return uu(ft(e),32)};case"bool":return function(e){return e?ZZ:XZ};case"bytes":return function(e){return ir(e)};case"string":return function(e){return hu(e)}}return null}function HI(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}function nm(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var Up,lo,eh,xy,VR;const ds=class ds{constructor(e){V(this,xy);q(this,"primaryType");V(this,Up);V(this,lo);V(this,eh);k(this,lo,new Map),k(this,eh,new Map);const r=new Map,n=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:u,type:l})=>{let{base:h,index:d}=nm(l);return h==="int"&&!e.int&&(h="int256"),h==="uint"&&!e.uint&&(h="uint256"),{name:u,type:h+(d||"")}}),r.set(c,new Set),n.set(c,[]),s.set(c,new Set)}),k(this,Up,JSON.stringify(i));for(const c in i){const u=new Set;for(const l of i[c]){M(!u.has(l.name),`duplicate variable name ${JSON.stringify(l.name)} in ${JSON.stringify(c)}`,"types",e),u.add(l.name);const h=nm(l.type).base;M(h!==c,`circular type reference to ${JSON.stringify(h)}`,"types",e),!nb(h)&&(M(n.has(h),`unknown type ${JSON.stringify(h)}`,"types",e),n.get(h).push(c),r.get(c).add(h))}}const o=Array.from(n.keys()).filter(c=>n.get(c).length===0);M(o.length!==0,"missing primary type","types",e),M(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),Ce(this,{primaryType:o[0]});function a(c,u){M(!u.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),u.add(c);for(const l of r.get(c))if(n.has(l)){a(l,u);for(const h of u)s.get(h).add(l)}u.delete(c)}a(this.primaryType,new Set);for(const[c,u]of s){const l=Array.from(u);l.sort(),E(this,lo).set(c,HI(c,i[c])+l.map(h=>HI(h,i[h])).join(""))}}get types(){return JSON.parse(E(this,Up))}getEncoder(e){let r=E(this,eh).get(e);return r||(r=ee(this,xy,VR).call(this,e),E(this,eh).set(e,r)),r}encodeType(e){const r=E(this,lo).get(e);return M(r,`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return ir(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(nb(e))return n(e,r);const s=nm(e).array;if(s)return M(s.count===-1||s.count===r.length,`array length mismatch; expected length ${s.count}`,"value",r),r.map(o=>this._visit(s.prefix,o,n));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,r[a],n),o),{});M(!1,`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new ds(e)}static getPrimaryType(e){return ds.from(e).primaryType}static hashStruct(e,r,n){return ds.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){if(e[n]==null)continue;const s=FI[n];M(s,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:s})}return r.sort((n,s)=>rb.indexOf(n.name)-rb.indexOf(s.name)),ds.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return er(["0x1901",ds.hashDomain(e),ds.from(r).hash(n)])}static hash(e,r,n){return ir(ds.encode(e,r,n))}static async resolveNames(e,r,n,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!Ct(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=ds.from(r);o.visit(n,(a,c)=>(a==="address"&&!Ct(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:n}}static getPayload(e,r,n){ds.hashDomain(e);const s={},i=[];rb.forEach(c=>{const u=e[c];u!=null&&(s[c]=eX[c](u),i.push({name:c,type:FI[c]}))});const o=ds.from(r);r=o.types;const a=Object.assign({},r);return M(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",r),a.EIP712Domain=i,o.encode(n),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(n,(c,u)=>{if(c.match(/^bytes(\d*)/))return be(Ye(u));if(c.match(/^u?int/))return ve(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return M(typeof u=="string","invalid string","value",u),u}M(!1,"unsupported type","type",c)})}}};Up=new WeakMap,lo=new WeakMap,eh=new WeakMap,xy=new WeakSet,VR=function(e){{const s=nb(e);if(s)return s}const r=nm(e).array;if(r){const s=r.prefix,i=this.getEncoder(s);return o=>{M(r.count===-1||r.count===o.length,`array length mismatch; expected length ${r.count}`,"value",o);let a=o.map(i);return E(this,lo).has(s)&&(a=a.map(ir)),ir(er(a))}}const n=this.types[e];if(n){const s=hu(E(this,lo).get(e));return i=>{const o=n.map(({name:a,type:c})=>{const u=this.getEncoder(c)(i[a]);return E(this,lo).has(c)?ir(u):u});return o.unshift(s),er(o)}}M(!1,`unknown type: ${e}`,"type",e)};let gy=ds;function on(t){const e=new Set;return t.forEach(r=>e.add(r)),Object.freeze(e)}const tX="external public payable override",rX=on(tX.split(" ")),GR="constant external internal payable private public pure view override",nX=on(GR.split(" ")),KR="constructor error event fallback function receive struct",JR=on(KR.split(" ")),YR="calldata memory storage payable indexed",sX=on(YR.split(" ")),iX="tuple returns",oX=[KR,YR,iX,GR].join(" "),aX=on(oX.split(" ")),cX={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},uX=new RegExp("^(\\s*)"),lX=new RegExp("^([0-9]+)"),hX=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),QR=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),ZR=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Nr,Fs,Bp,VE;const Py=class Py{constructor(e){V(this,Bp);V(this,Nr);V(this,Fs);k(this,Nr,0),k(this,Fs,e.slice())}get offset(){return E(this,Nr)}get length(){return E(this,Fs).length-E(this,Nr)}clone(){return new Py(E(this,Fs))}reset(){k(this,Nr,0)}popKeyword(e){const r=this.peek();if(r.type!=="KEYWORD"||!e.has(r.text))throw new Error(`expected keyword ${r.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const r=this.peek();throw new Error(`expected ${e}; got ${r.type} ${JSON.stringify(r.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const r=ee(this,Bp,VE).call(this,E(this,Nr)+1,e.match+1);return k(this,Nr,e.match+1),r}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const r=[];for(;E(this,Nr)<e.match-1;){const n=this.peek().linkNext;r.push(ee(this,Bp,VE).call(this,E(this,Nr)+1,n)),k(this,Nr,n)}return k(this,Nr,e.match+1),r}peek(){if(E(this,Nr)>=E(this,Fs).length)throw new Error("out-of-bounds");return E(this,Fs)[E(this,Nr)]}peekKeyword(e){const r=this.peekType("KEYWORD");return r!=null&&e.has(r)?r:null}peekType(e){if(this.length===0)return null;const r=this.peek();return r.type===e?r.text:null}pop(){const e=this.peek();return yd(this,Nr)._++,e}toString(){const e=[];for(let r=E(this,Nr);r<E(this,Fs).length;r++){const n=E(this,Fs)[r];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}};Nr=new WeakMap,Fs=new WeakMap,Bp=new WeakSet,VE=function(e=0,r=0){return new Py(E(this,Fs).slice(e,r).map(n=>Object.freeze(Object.assign({},n,{match:n.match-e,linkBack:n.linkBack-e,linkNext:n.linkNext-e}))))};let ei=Py;function Ha(t){const e=[],r=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let n=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(uX);a&&(i+=a[1].length,o=t.substring(i));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let u=cX[o[0]]||"";if(u){if(c.type=u,c.text=o[0],i++,u==="OPEN_PAREN")n.push(e.length-1),s.push(e.length-1);else if(u=="CLOSE_PAREN")n.length===0&&r("no matching open bracket"),c.match=n.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(u==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(u==="OPEN_BRACKET")c.type="BRACKET";else if(u==="CLOSE_BRACKET"){let l=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const h=e.pop().text;l=h+l,e[e.length-1].value=Be(h)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=l}continue}if(a=o.match(hX),a){if(c.text=a[1],i+=c.text.length,aX.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(ZR)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(lX),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new ei(e.map(o=>Object.freeze(o)))}function zI(t,e){let r=[];for(const n in e.keys())t.has(n)&&r.push(n);if(r.length>1)throw new Error(`conflicting types: ${r.join(", ")}`)}function mw(t,e){if(e.peekKeyword(JR)){const r=e.pop().text;if(r!==t)throw new Error(`expected ${t}, got ${r}`)}return e.popType("ID")}function Po(t,e){const r=new Set;for(;;){const n=t.peekType("KEYWORD");if(n==null||e&&!e.has(n))break;if(t.pop(),r.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);r.add(n)}return Object.freeze(r)}function XR(t){let e=Po(t,nX);return zI(e,on("constant payable nonpayable".split(" "))),zI(e,on("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Io(t,e){return t.popParams().map(r=>Dr.from(r,e))}function e2(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return ve(t.pop().text);throw new Error("invalid gas")}return null}function du(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const dX=new RegExp(/^(.*)\[([0-9]*)\]$/);function qI(t){const e=t.match(ZR);if(M(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const r=parseInt(e[2]);M(r!==0&&r<=32,"invalid bytes length","type",t)}else if(e[3]){const r=parseInt(e[3]);M(r!==0&&r<=256&&r%8===0,"invalid numeric width","type",t)}return t}const Ft={},Cn=Symbol.for("_ethers_internal"),WI="_ParamTypeInternal",VI="_ErrorInternal",GI="_EventInternal",KI="_ConstructorInternal",JI="_FallbackInternal",YI="_FunctionInternal",QI="_StructInternal";var th,Om;const fs=class fs{constructor(e,r,n,s,i,o,a,c){V(this,th);q(this,"name");q(this,"type");q(this,"baseType");q(this,"indexed");q(this,"components");q(this,"arrayLength");q(this,"arrayChildren");if(dg(e,Ft,"ParamType"),Object.defineProperty(this,Cn,{value:WI}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Ce(this,{name:r,type:n,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const n=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=n,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let r="";return this.isArray()?(r+=this.arrayChildren.format(e),r+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?r+="("+this.components.map(n=>n.format(e)).join(e==="full"?", ":",")+")":r+=this.type,e!=="sighash"&&(this.indexed===!0&&(r+=" indexed"),e==="full"&&this.name&&(r+=" "+this.name)),r}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,r){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map(s=>n.arrayChildren.walk(s,r))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map((s,i)=>n.components[i].walk(s,r))}return r(this.type,e)}async walkAsync(e,r){const n=[],s=[e];return ee(this,th,Om).call(this,n,e,r,i=>{s[0]=i}),n.length&&await Promise.all(n),s[0]}static from(e,r){if(fs.isParamType(e))return e;if(typeof e=="string")try{return fs.from(Ha(e),r)}catch{M(!1,"invalid param type","obj",e)}else if(e instanceof ei){let a="",c="",u=null;Po(e,on(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",u=e.popParams().map(g=>fs.from(g)),a=`tuple(${u.map(g=>g.format()).join(",")})`):(a=qI(e.popType("TYPE")),c=a);let l=null,h=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();l=new fs(Ft,"",a,c,null,u,h,l),h=g.value,a+=g.text,c="array",u=null}let d=null;if(Po(e,sX).has("indexed")){if(!r)throw new Error("");d=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new fs(Ft,p,a,c,d,u,h,l)}const n=e.name;M(!n||typeof n=="string"&&n.match(QR),"invalid name","obj.name",n);let s=e.indexed;s!=null&&(M(r,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(dX);if(o){const a=parseInt(o[2]||"-1"),c=fs.from({type:o[1],components:e.components});return new fs(Ft,n||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(u=>fs.from(u)):null;return new fs(Ft,n||"",i,"tuple",s,a,null,null)}return i=qI(e.type),new fs(Ft,n||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[Cn]===WI}};th=new WeakSet,Om=function(e,r,n,s){if(this.isArray()){if(!Array.isArray(r))throw new Error("invalid array value");if(this.arrayLength!==-1&&r.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=r.slice();a.forEach((c,u)=>{var l;ee(l=o,th,Om).call(l,e,c,n,h=>{a[u]=h})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(r))a=r.slice();else{if(r==null||typeof r!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in r))throw new Error(`missing value for component ${c.name}`);return r[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,u)=>{var l;ee(l=o[u],th,Om).call(l,e,c,n,h=>{a[u]=h})}),s(a);return}const i=n(this.type,r);i.then?e.push(async function(){s(await i)}()):s(i)};let Dr=fs;class fu{constructor(e,r,n){q(this,"type");q(this,"inputs");dg(e,Ft,"Fragment"),n=Object.freeze(n.slice()),Ce(this,{type:r,inputs:n})}static from(e){if(typeof e=="string"){try{fu.from(JSON.parse(e))}catch{}return fu.from(Ha(e))}if(e instanceof ei)switch(e.peekKeyword(JR)){case"constructor":return vo.from(e);case"error":return _n.from(e);case"event":return Ni.from(e);case"fallback":case"receive":return so.from(e);case"function":return Ti.from(e);case"struct":return Yc.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return vo.from(e);case"error":return _n.from(e);case"event":return Ni.from(e);case"fallback":case"receive":return so.from(e);case"function":return Ti.from(e);case"struct":return Yc.from(e)}Q(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}M(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return vo.isFragment(e)}static isError(e){return _n.isFragment(e)}static isEvent(e){return Ni.isFragment(e)}static isFunction(e){return Ti.isFragment(e)}static isStruct(e){return Yc.isFragment(e)}}class yw extends fu{constructor(r,n,s,i){super(r,n,i);q(this,"name");M(typeof s=="string"&&s.match(QR),"invalid identifier","name",s),i=Object.freeze(i.slice()),Ce(this,{name:s})}}function vp(t,e){return"("+e.map(r=>r.format(t)).join(t==="full"?", ":",")+")"}class _n extends yw{constructor(e,r,n){super(e,"error",r,n),Object.defineProperty(this,Cn,{value:VI})}get selector(){return hu(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const r=[];return e!=="sighash"&&r.push("error"),r.push(this.name+vp(e,this.inputs)),r.join(" ")}static from(e){if(_n.isFragment(e))return e;if(typeof e=="string")return _n.from(Ha(e));if(e instanceof ei){const r=mw("error",e),n=Io(e);return du(e),new _n(Ft,r,n)}return new _n(Ft,e.name,e.inputs?e.inputs.map(Dr.from):[])}static isFragment(e){return e&&e[Cn]===VI}}class Ni extends yw{constructor(r,n,s,i){super(r,"event",n,s);q(this,"anonymous");Object.defineProperty(this,Cn,{value:GI}),Ce(this,{anonymous:i})}get topicHash(){return hu(this.format("sighash"))}format(r){if(r==null&&(r="sighash"),r==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(r)))});const n=[];return r!=="sighash"&&n.push("event"),n.push(this.name+vp(r,this.inputs)),r!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(r,n){return n=(n||[]).map(i=>Dr.from(i)),new Ni(Ft,r,n,!1).topicHash}static from(r){if(Ni.isFragment(r))return r;if(typeof r=="string")try{return Ni.from(Ha(r))}catch{M(!1,"invalid event fragment","obj",r)}else if(r instanceof ei){const n=mw("event",r),s=Io(r,!0),i=!!Po(r,on(["anonymous"])).has("anonymous");return du(r),new Ni(Ft,n,s,i)}return new Ni(Ft,r.name,r.inputs?r.inputs.map(n=>Dr.from(n,!0)):[],!!r.anonymous)}static isFragment(r){return r&&r[Cn]===GI}}class vo extends fu{constructor(r,n,s,i,o){super(r,n,s);q(this,"payable");q(this,"gas");Object.defineProperty(this,Cn,{value:KI}),Ce(this,{payable:i,gas:o})}format(r){if(Q(r!=null&&r!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),r==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(r)))});const n=[`constructor${vp(r,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(r){if(vo.isFragment(r))return r;if(typeof r=="string")try{return vo.from(Ha(r))}catch{M(!1,"invalid constuctor fragment","obj",r)}else if(r instanceof ei){Po(r,on(["constructor"]));const n=Io(r),s=!!Po(r,rX).has("payable"),i=e2(r);return du(r),new vo(Ft,"constructor",n,s,i)}return new vo(Ft,"constructor",r.inputs?r.inputs.map(Dr.from):[],!!r.payable,r.gas!=null?r.gas:null)}static isFragment(r){return r&&r[Cn]===KI}}class so extends fu{constructor(r,n,s){super(r,"fallback",n);q(this,"payable");Object.defineProperty(this,Cn,{value:JI}),Ce(this,{payable:s})}format(r){const n=this.inputs.length===0?"receive":"fallback";if(r==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:s})}return`${n}()${this.payable?" payable":""}`}static from(r){if(so.isFragment(r))return r;if(typeof r=="string")try{return so.from(Ha(r))}catch{M(!1,"invalid fallback fragment","obj",r)}else if(r instanceof ei){const n=r.toString(),s=r.peekKeyword(on(["fallback","receive"]));if(M(s,"type must be fallback or receive","obj",n),r.popKeyword(on(["fallback","receive"]))==="receive"){const c=Io(r);return M(c.length===0,"receive cannot have arguments","obj.inputs",c),Po(r,on(["payable"])),du(r),new so(Ft,[],!0)}let o=Io(r);o.length?M(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[Dr.from("bytes")];const a=XR(r);if(M(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),Po(r,on(["returns"])).has("returns")){const c=Io(r);M(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(u=>u.format("minimal")).join(", "))}return du(r),new so(Ft,o,a==="payable")}if(r.type==="receive")return new so(Ft,[],!0);if(r.type==="fallback"){const n=[Dr.from("bytes")],s=r.stateMutability==="payable";return new so(Ft,n,s)}M(!1,"invalid fallback description","obj",r)}static isFragment(r){return r&&r[Cn]===JI}}class Ti extends yw{constructor(r,n,s,i,o,a){super(r,"function",n,i);q(this,"constant");q(this,"outputs");q(this,"stateMutability");q(this,"payable");q(this,"gas");Object.defineProperty(this,Cn,{value:YI}),o=Object.freeze(o.slice()),Ce(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return hu(this.format("sighash")).substring(0,10)}format(r){if(r==null&&(r="sighash"),r==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(r))),outputs:this.outputs.map(s=>JSON.parse(s.format(r)))});const n=[];return r!=="sighash"&&n.push("function"),n.push(this.name+vp(r,this.inputs)),r!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(vp(r,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(r,n){return n=(n||[]).map(i=>Dr.from(i)),new Ti(Ft,r,"view",n,[],null).selector}static from(r){if(Ti.isFragment(r))return r;if(typeof r=="string")try{return Ti.from(Ha(r))}catch{M(!1,"invalid function fragment","obj",r)}else if(r instanceof ei){const s=mw("function",r),i=Io(r),o=XR(r);let a=[];Po(r,on(["returns"])).has("returns")&&(a=Io(r));const c=e2(r);return du(r),new Ti(Ft,s,o,i,a,c)}let n=r.stateMutability;return n==null&&(n="payable",typeof r.constant=="boolean"?(n="view",r.constant||(n="payable",typeof r.payable=="boolean"&&!r.payable&&(n="nonpayable"))):typeof r.payable=="boolean"&&!r.payable&&(n="nonpayable")),new Ti(Ft,r.name,n,r.inputs?r.inputs.map(Dr.from):[],r.outputs?r.outputs.map(Dr.from):[],r.gas!=null?r.gas:null)}static isFragment(r){return r&&r[Cn]===YI}}class Yc extends yw{constructor(e,r,n){super(e,"struct",r,n),Object.defineProperty(this,Cn,{value:QI})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return Yc.from(Ha(e))}catch{M(!1,"invalid struct fragment","obj",e)}else if(e instanceof ei){const r=mw("struct",e),n=Io(e);return du(e),new Yc(Ft,r,n)}return new Yc(Ft,e.name,e.inputs?e.inputs.map(Dr.from):[])}static isFragment(e){return e&&e[Cn]===QI}}const ri=new Map;ri.set(0,"GENERIC_PANIC");ri.set(1,"ASSERT_FALSE");ri.set(17,"OVERFLOW");ri.set(18,"DIVIDE_BY_ZERO");ri.set(33,"ENUM_RANGE_ERROR");ri.set(34,"BAD_STORAGE_DATA");ri.set(49,"STACK_UNDERFLOW");ri.set(50,"ARRAY_RANGE_ERROR");ri.set(65,"OUT_OF_MEMORY");ri.set(81,"UNINITIALIZED_FUNCTION_CALL");const fX=new RegExp(/^bytes([0-9]*)$/),pX=new RegExp(/^(u?int)([0-9]*)$/);let sb=null,ZI=1024;function gX(t,e,r,n){let s="missing revert data",i=null;const o=null;let a=null;if(r){s="execution reverted";const u=Ye(r);if(r=be(r),u.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(u.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(be(u.slice(0,4))==="0x08c379a0")try{i=n.decode(["string"],u.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(be(u.slice(0,4))==="0x4e487b71")try{const l=Number(n.decode(["uint256"],u.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[l]},i=`Panic due to ${ri.get(l)||"UNKNOWN"}(${l})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?ft(e.to):null,data:e.data||"0x"};return e.from&&(c.from=ft(e.from)),Bt(s,"CALL_EXCEPTION",{action:t,data:r,reason:i,transaction:c,invocation:o,revert:a})}var aa,ll;const Ry=class Ry{constructor(){V(this,aa)}getDefaultValue(e){const r=e.map(s=>ee(this,aa,ll).call(this,Dr.from(s)));return new rm(r,"_").defaultValue()}encode(e,r){NP(r.length,e.length,"types/values length mismatch");const n=e.map(o=>ee(this,aa,ll).call(this,Dr.from(o))),s=new rm(n,"_"),i=new RE;return s.encode(i,r),i.data}decode(e,r,n){const s=e.map(o=>ee(this,aa,ll).call(this,Dr.from(o)));return new rm(s,"_").decode(new kE(r,n,ZI))}static _setDefaultMaxInflation(e){M(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),ZI=e}static defaultAbiCoder(){return sb==null&&(sb=new Ry),sb}static getBuiltinCallException(e,r,n){return gX(e,r,n,Ry.defaultAbiCoder())}};aa=new WeakSet,ll=function(e){if(e.isArray())return new $Q(ee(this,aa,ll).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new rm(e.components.map(n=>ee(this,aa,ll).call(this,n)),e.name);switch(e.baseType){case"address":return new BQ(e.name);case"bool":return new MQ(e.name);case"string":return new KQ(e.name);case"bytes":return new FQ(e.name);case"":return new zQ(e.name)}let r=e.type.match(pX);if(r){let n=parseInt(r[2]||"256");return M(n!==0&&n<=256&&n%8===0,"invalid "+r[1]+" bit length","param",e),new GQ(n/8,r[1]==="int",e.name)}if(r=e.type.match(fX),r){let n=parseInt(r[1]);return M(n!==0&&n<=32,"invalid bytes length","param",e),new jQ(n,e.name)}M(!1,"invalid type","type",e.type)};let _p=Ry;class mX{constructor(e,r,n){q(this,"fragment");q(this,"name");q(this,"signature");q(this,"topic");q(this,"args");const s=e.name,i=e.format();Ce(this,{fragment:e,name:s,signature:i,topic:r,args:n})}}class yX{constructor(e,r,n,s){q(this,"fragment");q(this,"name");q(this,"args");q(this,"signature");q(this,"selector");q(this,"value");const i=e.name,o=e.format();Ce(this,{fragment:e,name:i,args:n,signature:o,selector:r,value:s})}}class wX{constructor(e,r,n){q(this,"fragment");q(this,"name");q(this,"args");q(this,"signature");q(this,"selector");const s=e.name,i=e.format();Ce(this,{fragment:e,name:s,args:n,signature:i,selector:r})}}class XI{constructor(e){q(this,"hash");q(this,"_isIndexed");Ce(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const eN={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},tN={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&eN[t.toString()]&&(e=eN[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var mi,yi,wi,Fr,Ui,xm,Pm;const hc=class hc{constructor(e){V(this,Ui);q(this,"fragments");q(this,"deploy");q(this,"fallback");q(this,"receive");V(this,mi);V(this,yi);V(this,wi);V(this,Fr);let r=[];typeof e=="string"?r=JSON.parse(e):r=e,k(this,wi,new Map),k(this,mi,new Map),k(this,yi,new Map);const n=[];for(const o of r)try{n.push(fu.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Ce(this,{fragments:Object.freeze(n)});let s=null,i=!1;k(this,Fr,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Ce(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(M(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=E(this,wi);break;case"event":c=E(this,yi);break;case"error":c=E(this,mi);break;default:return}const u=o.format();c.has(u)||c.set(u,o)}),this.deploy||Ce(this,{deploy:vo.from("constructor()")}),Ce(this,{fallback:s,receive:i})}format(e){const r=e?"minimal":"full";return this.fragments.map(s=>s.format(r))}formatJson(){const e=this.fragments.map(r=>r.format("json"));return JSON.stringify(e.map(r=>JSON.parse(r)))}getAbiCoder(){return _p.defaultAbiCoder()}getFunctionName(e){const r=ee(this,Ui,xm).call(this,e,null,!1);return M(r,"no matching function","key",e),r.name}hasFunction(e){return!!ee(this,Ui,xm).call(this,e,null,!1)}getFunction(e,r){return ee(this,Ui,xm).call(this,e,r||null,!0)}forEachFunction(e){const r=Array.from(E(this,wi).keys());r.sort((n,s)=>n.localeCompare(s));for(let n=0;n<r.length;n++){const s=r[n];e(E(this,wi).get(s),n)}}getEventName(e){const r=ee(this,Ui,Pm).call(this,e,null,!1);return M(r,"no matching event","key",e),r.name}hasEvent(e){return!!ee(this,Ui,Pm).call(this,e,null,!1)}getEvent(e,r){return ee(this,Ui,Pm).call(this,e,r||null,!0)}forEachEvent(e){const r=Array.from(E(this,yi).keys());r.sort((n,s)=>n.localeCompare(s));for(let n=0;n<r.length;n++){const s=r[n];e(E(this,yi).get(s),n)}}getError(e,r){if(Ct(e)){const s=e.toLowerCase();if(tN[s])return _n.from(tN[s].signature);for(const i of E(this,mi).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of E(this,mi))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?_n.from("error Error(string)"):e==="Panic"?_n.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");M(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=_n.from(e).format(),e==="Error(string)")return _n.from("error Error(string)");if(e==="Panic(uint256)")return _n.from("error Panic(uint256)");const n=E(this,mi).get(e);return n||null}forEachError(e){const r=Array.from(E(this,mi).keys());r.sort((n,s)=>n.localeCompare(s));for(let n=0;n<r.length;n++){const s=r[n];e(E(this,mi).get(s),n)}}_decodeParams(e,r){return E(this,Fr).decode(e,r)}_encodeParams(e,r){return E(this,Fr).encode(e,r)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,r){if(typeof e=="string"){const n=this.getError(e);M(n,"unknown error","fragment",e),e=n}return M(Vt(r,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",r),this._decodeParams(e.inputs,Vt(r,4))}encodeErrorResult(e,r){if(typeof e=="string"){const n=this.getError(e);M(n,"unknown error","fragment",e),e=n}return er([e.selector,this._encodeParams(e.inputs,r||[])])}decodeFunctionData(e,r){if(typeof e=="string"){const n=this.getFunction(e);M(n,"unknown function","fragment",e),e=n}return M(Vt(r,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",r),this._decodeParams(e.inputs,Vt(r,4))}encodeFunctionData(e,r){if(typeof e=="string"){const n=this.getFunction(e);M(n,"unknown function","fragment",e),e=n}return er([e.selector,this._encodeParams(e.inputs,r||[])])}decodeFunctionResult(e,r){if(typeof e=="string"){const i=this.getFunction(e);M(i,"unknown function","fragment",e),e=i}let n="invalid length for result data";const s=tn(r);if(s.length%32===0)try{return E(this,Fr).decode(e.outputs,s)}catch{n="could not decode result data"}Q(!1,n,"BAD_DATA",{value:be(s),info:{method:e.name,signature:e.format()}})}makeError(e,r){const n=Ye(e,"data"),s=_p.getBuiltinCallException("call",r,n);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=be(n.slice(0,4)),c=this.getError(a);if(c)try{const u=E(this,Fr).decode(c.inputs,n.slice(4));s.revert={name:c.name,signature:c.format(),args:u},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(r);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,r){if(typeof e=="string"){const n=this.getFunction(e);M(n,"unknown function","fragment",e),e=n}return be(E(this,Fr).encode(e.outputs,r||[]))}encodeFilterTopics(e,r){if(typeof e=="string"){const i=this.getEvent(e);M(i,"unknown event","eventFragment",e),e=i}Q(r.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:r.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const s=(i,o)=>i.type==="string"?hu(o):i.type==="bytes"?ir(be(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=Ua(o):i.type.match(/^bytes/)?o=MJ(o,32):i.type==="address"&&E(this,Fr).encode(["address"],[o]),uu(be(o),32));for(r.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){M(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?M(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?n.push(i.map(c=>s(a,c))):n.push(s(a,i))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,r){if(typeof e=="string"){const o=this.getEvent(e);M(o,"unknown event","eventFragment",e),e=o}const n=[],s=[],i=[];return e.anonymous||n.push(e.topicHash),M(r.length===e.inputs.length,"event arguments/values mismatch","values",r),e.inputs.forEach((o,a)=>{const c=r[a];if(o.indexed)if(o.type==="string")n.push(hu(c));else if(o.type==="bytes")n.push(ir(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(E(this,Fr).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:E(this,Fr).encode(s,i),topics:n}}decodeEventLog(e,r,n){if(typeof e=="string"){const f=this.getEvent(e);M(f,"unknown event","eventFragment",e),e=f}if(n!=null&&!e.anonymous){const f=e.topicHash;M(Ct(n[0],32)&&n[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(Dr.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=n!=null?E(this,Fr).decode(s,er(n)):null,c=E(this,Fr).decode(i,r,!0),u=[],l=[];let h=0,d=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new XI(null);else if(o[p])g=new XI(a[d++]);else try{g=a[d++]}catch(y){g=y}else try{g=c[h++]}catch(y){g=y}u.push(g),l.push(f.name||null)}),kh.fromItems(u,l)}parseTransaction(e){const r=Ye(e.data,"tx.data"),n=ve(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(be(r.slice(0,4)));if(!s)return null;const i=E(this,Fr).decode(s.inputs,r.slice(4));return new yX(s,s.selector,i,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const r=this.getEvent(e.topics[0]);return!r||r.anonymous?null:new mX(r,r.topicHash,this.decodeEventLog(r,e.data,e.topics))}parseError(e){const r=be(e),n=this.getError(Vt(r,0,4));if(!n)return null;const s=E(this,Fr).decode(n.inputs,Vt(r,4));return new wX(n,n.selector,s)}static from(e){return e instanceof hc?e:typeof e=="string"?new hc(JSON.parse(e)):typeof e.formatJson=="function"?new hc(e.formatJson()):typeof e.format=="function"?new hc(e.format("json")):new hc(e)}};mi=new WeakMap,yi=new WeakMap,wi=new WeakMap,Fr=new WeakMap,Ui=new WeakSet,xm=function(e,r,n){if(Ct(e)){const i=e.toLowerCase();for(const o of E(this,wi).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of E(this,wi))o.split("(")[0]===e&&i.push(a);if(r){const o=r.length>0?r[r.length-1]:null;let a=r.length,c=!0;Wr.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let u=i.length-1;u>=0;u--){const l=i[u].inputs.length;l!==a&&(!c||l!==a-1)&&i.splice(u,1)}for(let u=i.length-1;u>=0;u--){const l=i[u].inputs;for(let h=0;h<r.length;h++)if(Wr.isTyped(r[h])){if(h>=l.length){if(r[h].type==="overrides")continue;i.splice(u,1);break}if(r[h].type!==l[h].baseType){i.splice(u,1);break}}}}if(i.length===1&&r&&r.length!==i[0].inputs.length){const o=r[r.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");M(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=E(this,wi).get(Ti.from(e).format());return s||null},Pm=function(e,r,n){if(Ct(e)){const i=e.toLowerCase();for(const o of E(this,yi).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of E(this,yi))o.split("(")[0]===e&&i.push(a);if(r){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<r.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<r.length;c++)if(Wr.isTyped(r[c])&&r[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");M(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=E(this,yi).get(Ni.from(e).format());return s||null};let GE=hc;const t2=BigInt(0);function Nl(t){return t??null}function Kt(t){return t==null?null:t.toString()}class rN{constructor(e,r,n){q(this,"gasPrice");q(this,"maxFeePerGas");q(this,"maxPriorityFeePerGas");Ce(this,{gasPrice:Nl(e),maxFeePerGas:Nl(r),maxPriorityFeePerGas:Nl(n)})}toJSON(){const{gasPrice:e,maxFeePerGas:r,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:Kt(e),maxFeePerGas:Kt(r),maxPriorityFeePerGas:Kt(n)}}}function my(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=be(t.data));const r="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=ve(t[s],`request.${s}`));const n="type,nonce".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Be(t[s],`request.${s}`));return t.accessList&&(e.accessList=Tu(t.accessList)),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>d_(s)?be(s):Object.assign({},s))),e}var ho;class bX{constructor(e,r){q(this,"provider");q(this,"number");q(this,"hash");q(this,"timestamp");q(this,"parentHash");q(this,"parentBeaconBlockRoot");q(this,"nonce");q(this,"difficulty");q(this,"gasLimit");q(this,"gasUsed");q(this,"stateRoot");q(this,"receiptsRoot");q(this,"blobGasUsed");q(this,"excessBlobGas");q(this,"miner");q(this,"prevRandao");q(this,"extraData");q(this,"baseFeePerGas");V(this,ho);k(this,ho,e.transactions.map(n=>typeof n!="string"?new Ap(n,r):n)),Ce(this,{provider:r,hash:Nl(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Nl(e.prevRandao),extraData:e.extraData,baseFeePerGas:Nl(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return E(this,ho).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=E(this,ho).slice();return e.length===0?[]:(Q(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:r,extraData:n,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:u,number:l,parentHash:h,parentBeaconBlockRoot:d,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:y}=this;return{_type:"Block",baseFeePerGas:Kt(e),difficulty:Kt(r),extraData:n,gasLimit:Kt(s),gasUsed:Kt(i),blobGasUsed:Kt(this.blobGasUsed),excessBlobGas:Kt(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:u,number:l,parentHash:h,timestamp:g,parentBeaconBlockRoot:d,stateRoot:f,receiptsRoot:p,transactions:y}}[Symbol.iterator](){let e=0;const r=this.transactions;return{next:()=>e<this.length?{value:r[e++],done:!1}:{value:void 0,done:!0}}}get length(){return E(this,ho).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let r;if(typeof e=="number")r=E(this,ho)[e];else{const n=e.toLowerCase();for(const s of E(this,ho))if(typeof s=="string"){if(s!==n)continue;r=s;break}else{if(s.hash!==n)continue;r=s;break}}if(r==null)throw new Error("no such tx");return typeof r=="string"?await this.provider.getTransaction(r):r}getPrefetchedTransaction(e){const r=this.prefetchedTransactions;if(typeof e=="number")return r[e];e=e.toLowerCase();for(const n of r)if(n.hash===e)return n;M(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return EX(this)}}ho=new WeakMap;class gg{constructor(e,r){q(this,"provider");q(this,"transactionHash");q(this,"blockHash");q(this,"blockNumber");q(this,"removed");q(this,"address");q(this,"data");q(this,"topics");q(this,"index");q(this,"transactionIndex");this.provider=r;const n=Object.freeze(e.topics.slice());Ce(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:r,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:u}=this;return{_type:"log",address:e,blockHash:r,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:u}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return Q(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return Q(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return Q(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return vX(this)}}var Lp;class r2{constructor(e,r){q(this,"provider");q(this,"to");q(this,"from");q(this,"contractAddress");q(this,"hash");q(this,"index");q(this,"blockHash");q(this,"blockNumber");q(this,"logsBloom");q(this,"gasUsed");q(this,"blobGasUsed");q(this,"cumulativeGasUsed");q(this,"gasPrice");q(this,"blobGasPrice");q(this,"type");q(this,"status");q(this,"root");V(this,Lp);k(this,Lp,Object.freeze(e.logs.map(s=>new gg(s,r))));let n=t2;e.effectiveGasPrice!=null?n=e.effectiveGasPrice:e.gasPrice!=null&&(n=e.gasPrice),Ce(this,{provider:r,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:n,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return E(this,Lp)}toJSON(){const{to:e,from:r,contractAddress:n,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:u,status:l,root:h}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:n,cumulativeGasUsed:Kt(this.cumulativeGasUsed),from:r,gasPrice:Kt(this.gasPrice),blobGasUsed:Kt(this.blobGasUsed),blobGasPrice:Kt(this.blobGasPrice),gasUsed:Kt(this.gasUsed),hash:s,index:i,logs:u,logsBloom:c,root:h,status:l,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return s2(this)}reorderedEvent(e){return Q(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),n2(this,e)}}Lp=new WeakMap;var ca;const yA=class yA{constructor(e,r){q(this,"provider");q(this,"blockNumber");q(this,"blockHash");q(this,"index");q(this,"hash");q(this,"type");q(this,"to");q(this,"from");q(this,"nonce");q(this,"gasLimit");q(this,"gasPrice");q(this,"maxPriorityFeePerGas");q(this,"maxFeePerGas");q(this,"maxFeePerBlobGas");q(this,"data");q(this,"value");q(this,"chainId");q(this,"signature");q(this,"accessList");q(this,"blobVersionedHashes");V(this,ca);this.provider=r,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,k(this,ca,-1)}toJSON(){const{blockNumber:e,blockHash:r,index:n,hash:s,type:i,to:o,from:a,nonce:c,data:u,signature:l,accessList:h,blobVersionedHashes:d}=this;return{_type:"TransactionResponse",accessList:h,blockNumber:e,blockHash:r,blobVersionedHashes:d,chainId:Kt(this.chainId),data:u,from:a,gasLimit:Kt(this.gasLimit),gasPrice:Kt(this.gasPrice),hash:s,maxFeePerGas:Kt(this.maxFeePerGas),maxPriorityFeePerGas:Kt(this.maxPriorityFeePerGas),maxFeePerBlobGas:Kt(this.maxFeePerBlobGas),nonce:c,signature:l,to:o,index:n,type:i,value:Kt(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const n=await this.getTransaction();n&&(e=n.blockNumber)}if(e==null)return null;const r=this.provider.getBlock(e);if(r==null)throw new Error("TODO");return r}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:r,blockNumber:n}=await en({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return r==null||r.blockNumber==null?0:n-r.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,r){const n=e??1,s=r??0;let i=E(this,ca),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:d,nonce:f}=await en({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=d;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<E(this,ca)&&(o=E(this,ca)));o<=d;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const y of g)if(y===this.hash)return;for(let y=0;y<g.length;y++){const b=await g.getTransaction(y);if(b.from===this.from&&b.nonce===this.nonce){if(a)return null;const v=await this.provider.getTransactionReceipt(b.hash);if(v==null||d-v.blockNumber+1<n)return;let _="replaced";b.data===this.data&&b.to===this.to&&b.value===this.value?_="repriced":b.data==="0x"&&b.from===b.to&&b.value===t2&&(_="cancelled"),Q(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:_==="replaced"||_==="cancelled",reason:_,replacement:b.replaceableTransaction(i),hash:b.hash,receipt:v})}}o++}},u=d=>{if(d==null||d.status!==0)return d;Q(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:d.to,from:d.from,data:""},receipt:d})},l=await this.provider.getTransactionReceipt(this.hash);if(n===0)return u(l);if(l){if(await l.confirmations()>=n)return u(l)}else if(await c(),n===0)return null;return await new Promise((d,f)=>{const p=[],g=()=>{p.forEach(b=>b())};if(p.push(()=>{a=!0}),s>0){const b=setTimeout(()=>{g(),f(Bt("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(b)})}const y=async b=>{if(await b.confirmations()>=n){g();try{d(u(b))}catch(v){f(v)}}};if(p.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),i>=0){const b=async()=>{try{await c()}catch(v){if(Rr(v,"TRANSACTION_REPLACED")){g(),f(v);return}}a||this.provider.once("block",b)};p.push(()=>{this.provider.off("block",b)}),this.provider.once("block",b)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return Q(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),s2(this)}reorderedEvent(e){return Q(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Q(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),n2(this,e)}replaceableTransaction(e){M(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const r=new yA(this,this.provider);return k(r,ca,e),r}};ca=new WeakMap;let Ap=yA;function EX(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function n2(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function s2(t){return{orphan:"drop-transaction",tx:t}}function vX(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class T_ extends gg{constructor(r,n,s){super(r,r.provider);q(this,"interface");q(this,"fragment");q(this,"args");const i=n.decodeEventLog(s,r.data,r.topics);Ce(this,{args:i,fragment:s,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class i2 extends gg{constructor(r,n){super(r,r.provider);q(this,"error");Ce(this,{error:n})}}var rh;class _X extends r2{constructor(r,n,s){super(s,n);V(this,rh);k(this,rh,r)}get logs(){return super.logs.map(r=>{const n=r.topics.length?E(this,rh).getEvent(r.topics[0]):null;if(n)try{return new T_(r,E(this,rh),n)}catch(s){return new i2(r,s)}return r})}}rh=new WeakMap;var $p;class O_ extends Ap{constructor(r,n,s){super(s,n);V(this,$p);k(this,$p,r)}async wait(r,n){const s=await super.wait(r,n);return s==null?null:new _X(E(this,$p),this.provider,s)}}$p=new WeakMap;class o2 extends PP{constructor(r,n,s,i){super(r,n,s);q(this,"log");Ce(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class AX extends o2{constructor(e,r,n,s,i){super(e,r,n,new T_(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);Ce(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const nN=BigInt(0);function a2(t){return t&&typeof t.call=="function"}function c2(t){return t&&typeof t.estimateGas=="function"}function ww(t){return t&&typeof t.resolveName=="function"}function u2(t){return t&&typeof t.sendTransaction=="function"}function l2(t){if(t!=null){if(ww(t))return t;if(t.provider)return t.provider}}var Mp;class CX{constructor(e,r,n){V(this,Mp);q(this,"fragment");if(Ce(this,{fragment:r}),r.inputs.length<n.length)throw new Error("too many arguments");const s=pu(e.runner,"resolveName"),i=ww(s)?s:null;k(this,Mp,async function(){const o=await Promise.all(r.inputs.map((a,c)=>n[c]==null?null:a.walkAsync(n[c],(l,h)=>l==="address"?Array.isArray(h)?Promise.all(h.map(d=>sn(d,i))):sn(h,i):h)));return e.interface.encodeFilterTopics(r,o)}())}getTopicFilter(){return E(this,Mp)}}Mp=new WeakMap;function pu(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Ec(t){return t==null?null:t.provider||null}async function h2(t,e){const r=Wr.dereference(t,"overrides");M(typeof r=="object","invalid overrides parameter","overrides",t);const n=my(r);return M(n.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),M(n.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function SX(t,e,r){const n=pu(t,"resolveName"),s=ww(n)?n:null;return await Promise.all(e.map((i,o)=>i.walkAsync(r[o],(a,c)=>(c=Wr.dereference(c,a),a==="address"?sn(c,s):c))))}function IX(t){const e=async function(o){const a=await h2(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await sn(a.from,l2(t.runner)));const c=t.interface,u=ve(a.value||nN,"overrides.value")===nN,l=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!l&&!u&&M(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),M(c.fallback||l,"cannot send data to receive-only contract","overrides.data",a.data);const h=c.receive||c.fallback&&c.fallback.payable;return M(h||u,"cannot send value to non-payable fallback","overrides.value",a.value),M(c.fallback||l,"cannot send data to receive-only contract","overrides.data",a.data),a},r=async function(o){const a=pu(t.runner,"call");Q(a2(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(u){throw h_(u)&&u.data?t.interface.makeError(u.data,c):u}},n=async function(o){const a=t.runner;Q(u2(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),u=Ec(t.runner);return new O_(t.interface,u,c)},s=async function(o){const a=pu(t.runner,"estimateGas");return Q(c2(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await n(o);return Ce(i,{_contract:t,estimateGas:s,populateTransaction:e,send:n,staticCall:r}),i}function NX(t,e){const r=function(...u){const l=t.interface.getFunction(e,u);return Q(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:u}}),l},n=async function(...u){const l=r(...u);let h={};if(l.inputs.length+1===u.length&&(h=await h2(u.pop()),h.from&&(h.from=await sn(h.from,l2(t.runner)))),l.inputs.length!==u.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const d=await SX(t.runner,l.inputs,u);return Object.assign({},h,await en({to:t.getAddress(),data:t.interface.encodeFunctionData(l,d)}))},s=async function(...u){const l=await a(...u);return l.length===1?l[0]:l},i=async function(...u){const l=t.runner;Q(u2(l),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const h=await l.sendTransaction(await n(...u)),d=Ec(t.runner);return new O_(t.interface,d,h)},o=async function(...u){const l=pu(t.runner,"estimateGas");return Q(c2(l),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await l.estimateGas(await n(...u))},a=async function(...u){const l=pu(t.runner,"call");Q(a2(l),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const h=await n(...u);let d="0x";try{d=await l.call(h)}catch(p){throw h_(p)&&p.data?t.interface.makeError(p.data,h):p}const f=r(...u);return t.interface.decodeFunctionResult(f,d)},c=async(...u)=>r(...u).constant?await s(...u):await i(...u);return Ce(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:r,estimateGas:o,populateTransaction:n,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const u=t.interface.getFunction(e);return Q(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),u}}),c}function TX(t,e){const r=function(...s){const i=t.interface.getEvent(e,s);return Q(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},n=function(...s){return new CX(t,r(...s),s)};return Ce(n,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:r}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return Q(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),n}const yy=Symbol.for("_ethersInternal_contract"),d2=new WeakMap;function OX(t,e){d2.set(t[yy],e)}function Un(t){return d2.get(t[yy])}function xX(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function x_(t,e){let r,n=null;if(Array.isArray(e)){const i=function(o){if(Ct(o,32))return o;const a=t.interface.getEvent(o);return M(a,"unknown fragment","name",o),a.topicHash};r=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?r=[null]:typeof e=="string"?Ct(e,32)?r=[e]:(n=t.interface.getEvent(e),M(n,"unknown fragment","event",e),r=[n.topicHash]):xX(e)?r=await e.getTopicFilter():"fragment"in e?(n=e.fragment,r=[n.topicHash]):M(!1,"unknown event name","event",e);r=r.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=r.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:n,tag:s,topics:r}}async function Yd(t,e){const{subs:r}=Un(t);return r.get((await x_(t,e)).tag)||null}async function sN(t,e,r){const n=Ec(t.runner);Q(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await x_(t,r),{addr:a,subs:c}=Un(t);let u=c.get(i);if(!u){const h={address:a||t,topics:o},d=y=>{let b=s;if(b==null)try{b=t.interface.getEvent(y.topics[0])}catch{}if(b){const v=b,_=s?t.interface.decodeEventLog(s,y.data,y.topics):[];JE(t,r,_,S=>new AX(t,S,r,v,y))}else JE(t,r,[],v=>new o2(t,v,r,y))};let f=[];u={tag:i,listeners:[],start:()=>{f.length||f.push(n.on(h,d))},stop:async()=>{if(f.length==0)return;let y=f;f=[],await Promise.all(y),n.off(h,d)}},c.set(i,u)}return u}let KE=Promise.resolve();async function PX(t,e,r,n){await KE;const s=await Yd(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(r);n&&c.push(n(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),Un(t).subs.delete(s.tag)),i>0}async function JE(t,e,r,n){try{await KE}catch{}const s=PX(t,e,r,n);return KE=s,await s}const sm=["then"];var eT;eT=yy;const _f=class _f{constructor(e,r,n,s){q(this,"target");q(this,"interface");q(this,"runner");q(this,"filters");q(this,eT);q(this,"fallback");M(typeof e=="string"||wR(e),"invalid value for Contract target","target",e),n==null&&(n=null);const i=GE.from(r);Ce(this,{target:e,runner:n,interface:i}),Object.defineProperty(this,yy,{value:{}});let o,a=null,c=null;if(s){const h=Ec(n);c=new O_(this.interface,h,s)}let u=new Map;if(typeof e=="string")if(Ct(e))a=e,o=Promise.resolve(e);else{const h=pu(n,"resolveName");if(!ww(h))throw Bt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=h.resolveName(e).then(d=>{if(d==null)throw Bt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Un(this).addr=d,d})}else o=e.getAddress().then(h=>{if(h==null)throw new Error("TODO");return Un(this).addr=h,h});OX(this,{addrPromise:o,addr:a,deployTx:c,subs:u});const l=new Proxy({},{get:(h,d,f)=>{if(typeof d=="symbol"||sm.indexOf(d)>=0)return Reflect.get(h,d,f);try{return this.getEvent(d)}catch(p){if(!Rr(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(h,d)=>sm.indexOf(d)>=0?Reflect.has(h,d):Reflect.has(h,d)||this.interface.hasEvent(String(d))});return Ce(this,{filters:l}),Ce(this,{fallback:i.receive||i.fallback?IX(this):null}),new Proxy(this,{get:(h,d,f)=>{if(typeof d=="symbol"||d in h||sm.indexOf(d)>=0)return Reflect.get(h,d,f);try{return h.getFunction(d)}catch(p){if(!Rr(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(h,d)=>typeof d=="symbol"||d in h||sm.indexOf(d)>=0?Reflect.has(h,d):h.interface.hasFunction(d)})}connect(e){return new _f(this.target,this.interface,e)}attach(e){return new _f(e,this.interface,this.runner)}async getAddress(){return await Un(this).addrPromise}async getDeployedCode(){const e=Ec(this.runner);Q(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const r=await e.getCode(await this.getAddress());return r==="0x"?null:r}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=Ec(this.runner);return Q(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);n.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Un(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),NX(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),TX(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,r,n){r==null&&(r=0),n==null&&(n="latest");const{addr:s,addrPromise:i}=Un(this),o=s||await i,{fragment:a,topics:c}=await x_(this,e),u={address:o,topics:c,fromBlock:r,toBlock:n},l=Ec(this.runner);return Q(l,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await l.getLogs(u)).map(h=>{let d=a;if(d==null)try{d=this.interface.getEvent(h.topics[0])}catch{}if(d)try{return new T_(h,this.interface,d)}catch(f){return new i2(h,f)}return new gg(h,l)})}async on(e,r){const n=await sN(this,"on",e);return n.listeners.push({listener:r,once:!1}),n.start(),this}async once(e,r){const n=await sN(this,"once",e);return n.listeners.push({listener:r,once:!0}),n.start(),this}async emit(e,...r){return await JE(this,e,r,null)}async listenerCount(e){if(e){const s=await Yd(this,e);return s?s.listeners.length:0}const{subs:r}=Un(this);let n=0;for(const{listeners:s}of r.values())n+=s.length;return n}async listeners(e){if(e){const s=await Yd(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:r}=Un(this);let n=[];for(const{listeners:s}of r.values())n=n.concat(s.map(({listener:i})=>i));return n}async off(e,r){const n=await Yd(this,e);if(!n)return this;if(r){const s=n.listeners.map(({listener:i})=>i).indexOf(r);s>=0&&n.listeners.splice(s,1)}return(r==null||n.listeners.length===0)&&(n.stop(),Un(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){const r=await Yd(this,e);if(!r)return this;r.stop(),Un(this).subs.delete(r.tag)}else{const{subs:r}=Un(this);for(const{tag:n,stop:s}of r.values())s(),r.delete(n)}return this}async addListener(e,r){return await this.on(e,r)}async removeListener(e,r){return await this.off(e,r)}static buildClass(e){class r extends _f{constructor(s,i=null){super(s,e,i)}}return r}static from(e,r,n){return n==null&&(n=null),new this(e,r,n)}};let YE=_f;function RX(){return YE}class Tl extends RX(){}function ib(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):M(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class kX{constructor(e){q(this,"name");Ce(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,r){throw new Error("unsupported coin")}async decodeAddress(e,r){throw new Error("unsupported coin")}}const f2=new RegExp("^(ipfs)://(.*)$","i"),iN=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),f2,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var ua,kc,la,hl,ky,p2;const wl=class wl{constructor(e,r,n){V(this,la);q(this,"provider");q(this,"address");q(this,"name");V(this,ua);V(this,kc);Ce(this,{provider:e,address:r,name:n}),k(this,ua,null),k(this,kc,new Tl(r,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return E(this,ua)==null&&k(this,ua,(async()=>{try{return await E(this,kc).supportsInterface("0x9061b923")}catch(e){if(Rr(e,"CALL_EXCEPTION"))return!1;throw k(this,ua,null),e}})()),await E(this,ua)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await ee(this,la,hl).call(this,"addr(bytes32)");return i==null||i===gp?null:i}catch(i){if(Rr(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await ee(this,la,hl).call(this,"addr(bytes32,uint)",[i]);if(Ct(o,20))return ft(o)}let r=null;for(const i of this.provider.plugins)if(i instanceof kX&&i.supportsCoinType(e)){r=i;break}if(r==null)return null;const n=await ee(this,la,hl).call(this,"addr(bytes32,uint)",[e]);if(n==null||n==="0x")return null;const s=await r.decodeAddress(e,n);if(s!=null)return s;Q(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:n}})}async getText(e){const r=await ee(this,la,hl).call(this,"text(bytes32,string)",[e]);return r==null||r==="0x"?null:r}async getContentHash(){const e=await ee(this,la,hl).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const r=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const s=r[1]==="e3010170"?"ipfs":"ipns",i=parseInt(r[4],16);if(r[5].length===i*2)return`${s}://${jJ("0x"+r[2])}`}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;Q(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const r=await this.getText("avatar");if(r==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:r});for(let n=0;n<iN.length;n++){const s=r.match(iN[n]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:r}),{linkage:e,url:r};case"ipfs":{const o=ib(r);return e.push({type:"ipfs",value:r}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:r});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const u=c[1],l=new Tl(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await l.ownerOf(u);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await l.balanceOf(a,u);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let h=await l[o](u);if(h==null||h==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:h}),i==="erc1155"&&(h=h.replace("{id}",Ua(u,32).substring(2)),e.push({type:"metadata-url-expanded",value:h})),h.match(/^ipfs:/i)&&(h=ib(h)),e.push({type:"metadata-url",value:h});let d={};const f=await new Mi(h).send();f.assertOk();try{d=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const b=f.body;return b&&e.push({type:"!metadata",value:be(b)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!d)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(d)});let p=d.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(f2)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=ib(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const r=await e.getNetwork(),n=r.getPlugin("org.ethers.plugins.network.Ens");return Q(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:r}}),n.address}static async fromName(e,r){var s;let n=r;for(;;){if(n===""||n==="."||r!=="eth"&&n==="eth")return null;const i=await ee(s=wl,ky,p2).call(s,e,n);if(i!=null){const o=new wl(e,i,r);return n!==r&&!await o.supportsWildcard()?null:o}n=n.split(".").slice(1).join(".")}}};ua=new WeakMap,kc=new WeakMap,la=new WeakSet,hl=async function(e,r){r=(r||[]).slice();const n=E(this,kc).interface;r.unshift(WE(this.name));let s=null;await this.supportsWildcard()&&(s=n.getFunction(e),Q(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),r=[RZ(this.name,255),n.encodeFunctionData(s,r)],e="resolve(bytes,bytes)"),r.push({enableCcipRead:!0});try{const i=await E(this,kc)[e](...r);return s?n.decodeFunctionResult(s,i)[0]:i}catch(i){if(!Rr(i,"CALL_EXCEPTION"))throw i}return null},ky=new WeakSet,p2=async function(e,r){const n=await wl.getEnsAddress(e);try{const i=await new Tl(n,["function resolver(bytes32) view returns (address)"],e).resolver(WE(r),{enableCcipRead:!0});return i===gp?null:i}catch(s){throw s}return null},V(wl,ky);let wy=wl;const oN=BigInt(0);function Je(t,e){return function(r){return r==null?e:t(r)}}function bw(t,e){return r=>{if(e&&r==null)return null;if(!Array.isArray(r))throw new Error("not an array");return r.map(n=>t(n))}}function mg(t,e){return r=>{const n={};for(const s in t){let i=s;if(e&&s in e&&!(i in r)){for(const o of e[s])if(o in r){i=o;break}}try{const o=t[s](r[i]);o!==void 0&&(n[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";Q(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:r})}}return n}}function DX(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}M(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function Fh(t){return M(Ct(t,!0),"invalid data","value",t),t}function Pr(t){return M(Ct(t,32),"invalid hash","value",t),t}const UX=mg({address:ft,blockHash:Pr,blockNumber:Be,data:Fh,index:Be,removed:Je(DX,!1),topics:bw(Pr),transactionHash:Pr,transactionIndex:Be},{index:["logIndex"]});function BX(t){return UX(t)}const LX=mg({hash:Je(Pr),parentHash:Pr,parentBeaconBlockRoot:Je(Pr,null),number:Be,timestamp:Be,nonce:Je(Fh),difficulty:ve,gasLimit:ve,gasUsed:ve,stateRoot:Je(Pr,null),receiptsRoot:Je(Pr,null),blobGasUsed:Je(ve,null),excessBlobGas:Je(ve,null),miner:Je(ft),prevRandao:Je(Pr,null),extraData:Fh,baseFeePerGas:Je(ve)},{prevRandao:["mixHash"]});function $X(t){const e=LX(t);return e.transactions=t.transactions.map(r=>typeof r=="string"?r:g2(r)),e}const MX=mg({transactionIndex:Be,blockNumber:Be,transactionHash:Pr,address:ft,topics:bw(Pr),data:Fh,index:Be,blockHash:Pr},{index:["logIndex"]});function FX(t){return MX(t)}const jX=mg({to:Je(ft,null),from:Je(ft,null),contractAddress:Je(ft,null),index:Be,root:Je(be),gasUsed:ve,blobGasUsed:Je(ve,null),logsBloom:Je(Fh),blockHash:Pr,hash:Pr,logs:bw(FX),blockNumber:Be,cumulativeGasUsed:ve,effectiveGasPrice:Je(ve),blobGasPrice:Je(ve,null),status:Je(Be),type:Je(Be,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function HX(t){return jX(t)}function g2(t){t.to&&ve(t.to)===oN&&(t.to="0x0000000000000000000000000000000000000000");const e=mg({hash:Pr,index:Je(Be,void 0),type:r=>r==="0x"||r==null?0:Be(r),accessList:Je(Tu,null),blobVersionedHashes:Je(bw(Pr,!0),null),blockHash:Je(Pr,null),blockNumber:Je(Be,null),transactionIndex:Je(Be,null),from:ft,gasPrice:Je(ve),maxPriorityFeePerGas:Je(ve),maxFeePerGas:Je(ve),maxFeePerBlobGas:Je(ve,null),gasLimit:ve,to:Je(ft,null),value:ve,nonce:Be,data:Fh,creates:Je(ft,null),chainId:Je(ve,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=UQ(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=Xs.from(t.signature):e.signature=Xs.from(t),e.chainId==null){const r=e.signature.legacyChainId;r!=null&&(e.chainId=r)}return e.blockHash&&ve(e.blockHash)===oN&&(e.blockHash=null),e}const zX="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class yg{constructor(e){q(this,"name");Ce(this,{name:e})}clone(){return new yg(this.name)}}class Ew extends yg{constructor(r,n){r==null&&(r=0);super(`org.ethers.network.plugins.GasCost#${r||0}`);q(this,"effectiveBlock");q(this,"txBase");q(this,"txCreate");q(this,"txDataZero");q(this,"txDataNonzero");q(this,"txAccessListStorageKey");q(this,"txAccessListAddress");const s={effectiveBlock:r};function i(o,a){let c=(n||{})[o];c==null&&(c=a),M(typeof c=="number",`invalud value for ${o}`,"costs",n),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),Ce(this,s)}clone(){return new Ew(this.effectiveBlock,this)}}class vw extends yg{constructor(r,n){super("org.ethers.plugins.network.Ens");q(this,"address");q(this,"targetNetwork");Ce(this,{address:r||zX,targetNetwork:n??1})}clone(){return new vw(this.address,this.targetNetwork)}}var Fp,jp;class qX extends yg{constructor(r,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");V(this,Fp);V(this,jp);k(this,Fp,r),k(this,jp,n)}get url(){return E(this,Fp)}get processFunc(){return E(this,jp)}clone(){return this}}Fp=new WeakMap,jp=new WeakMap;const ob=new Map;var nh,sh,ha;const bl=class bl{constructor(e,r){V(this,nh);V(this,sh);V(this,ha);k(this,nh,e),k(this,sh,ve(r)),k(this,ha,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return E(this,nh)}set name(e){k(this,nh,e)}get chainId(){return E(this,sh)}set chainId(e){k(this,sh,ve(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===ve(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===ve(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===ve(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(E(this,ha).values())}attachPlugin(e){if(E(this,ha).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return E(this,ha).set(e.name,e.clone()),this}getPlugin(e){return E(this,ha).get(e)||null}getPlugins(e){return this.plugins.filter(r=>r.name.split("#")[0]===e)}clone(){const e=new bl(this.name,this.chainId);return this.plugins.forEach(r=>{e.attachPlugin(r.clone())}),e}computeIntrinsicGas(e){const r=this.getPlugin("org.ethers.plugins.network.GasCost")||new Ew;let n=r.txBase;if(e.to==null&&(n+=r.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?n+=r.txDataZero:n+=r.txDataNonzero;if(e.accessList){const s=Tu(e.accessList);for(const i in s)n+=r.txAccessListAddress+r.txAccessListStorageKey*s[i].storageKeys.length}return n}static from(e){if(WX(),e==null)return bl.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const r=ob.get(e);if(r)return r();if(typeof e=="bigint")return new bl("unknown",e);M(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){M(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const r=new bl(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&r.attachPlugin(new vw(e.ensAddress,e.ensNetwork)),r}M(!1,"invalid network","network",e)}static register(e,r){typeof e=="number"&&(e=BigInt(e));const n=ob.get(e);n&&M(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",e),ob.set(e,r)}};nh=new WeakMap,sh=new WeakMap,ha=new WeakMap;let Ks=bl;function aN(t,e){const r=String(t);if(!r.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const n=r.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;n[1].length<e;)n[1]+="0";if(n[1].length>9){let s=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||s++,n[1]=s.toString()}return BigInt(n[0]+n[1])}function cN(t){return new qX(t,async(e,r,n)=>{n.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([n.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:aN(a.maxFee,9),maxPriorityFeePerGas:aN(a.maxPriorityFee,9)}}catch(i){Q(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:s,error:i})}})}let uN=!1;function WX(){if(uN)return;uN=!0;function t(e,r,n){const s=function(){const i=new Ks(e,r);return n.ensNetwork!=null&&i.attachPlugin(new vw(null,n.ensNetwork)),i.attachPlugin(new Ew),(n.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Ks.register(e,s),Ks.register(r,s),n.altNames&&n.altNames.forEach(i=>{Ks.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[cN("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[cN("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function QE(t){return JSON.parse(JSON.stringify(t))}var fo,gs,da,bi,ih,Rm;class VX{constructor(e){V(this,ih);V(this,fo);V(this,gs);V(this,da);V(this,bi);k(this,fo,e),k(this,gs,null),k(this,da,4e3),k(this,bi,-2)}get pollingInterval(){return E(this,da)}set pollingInterval(e){k(this,da,e)}start(){E(this,gs)||(k(this,gs,E(this,fo)._setTimeout(ee(this,ih,Rm).bind(this),E(this,da))),ee(this,ih,Rm).call(this))}stop(){E(this,gs)&&(E(this,fo)._clearTimeout(E(this,gs)),k(this,gs,null))}pause(e){this.stop(),e&&k(this,bi,-2)}resume(){this.start()}}fo=new WeakMap,gs=new WeakMap,da=new WeakMap,bi=new WeakMap,ih=new WeakSet,Rm=async function(){try{const e=await E(this,fo).getBlockNumber();if(E(this,bi)===-2){k(this,bi,e);return}if(e!==E(this,bi)){for(let r=E(this,bi)+1;r<=e;r++){if(E(this,gs)==null)return;await E(this,fo).emit("block",r)}k(this,bi,e)}}catch{}E(this,gs)!=null&&k(this,gs,E(this,fo)._setTimeout(ee(this,ih,Rm).bind(this),E(this,da)))};var Dc,Uc,fa;class P_{constructor(e){V(this,Dc);V(this,Uc);V(this,fa);k(this,Dc,e),k(this,fa,!1),k(this,Uc,r=>{this._poll(r,E(this,Dc))})}async _poll(e,r){throw new Error("sub-classes must override this")}start(){E(this,fa)||(k(this,fa,!0),E(this,Uc).call(this,-2),E(this,Dc).on("block",E(this,Uc)))}stop(){E(this,fa)&&(k(this,fa,!1),E(this,Dc).off("block",E(this,Uc)))}pause(e){this.stop()}resume(){this.start()}}Dc=new WeakMap,Uc=new WeakMap,fa=new WeakMap;var oh,po;class GX extends P_{constructor(r,n){super(r);V(this,oh);V(this,po);k(this,oh,n),k(this,po,-2)}pause(r){r&&k(this,po,-2),super.pause(r)}async _poll(r,n){const s=await n.getBlock(E(this,oh));s!=null&&(E(this,po)===-2?k(this,po,s.number):s.number>E(this,po)&&(n.emit(E(this,oh),s.number),k(this,po,s.number)))}}oh=new WeakMap,po=new WeakMap;var Dy;class KX extends P_{constructor(r,n){super(r);V(this,Dy);k(this,Dy,QE(n))}async _poll(r,n){throw new Error("@TODO")}}Dy=new WeakMap;var ah;class JX extends P_{constructor(r,n){super(r);V(this,ah);k(this,ah,n)}async _poll(r,n){const s=await n.getTransactionReceipt(E(this,ah));s&&n.emit(E(this,ah),s)}}ah=new WeakMap;var go,ch,uh,pa,ms,Uy,m2;class R_{constructor(e,r){V(this,Uy);V(this,go);V(this,ch);V(this,uh);V(this,pa);V(this,ms);k(this,go,e),k(this,ch,QE(r)),k(this,uh,ee(this,Uy,m2).bind(this)),k(this,pa,!1),k(this,ms,-2)}start(){E(this,pa)||(k(this,pa,!0),E(this,ms)===-2&&E(this,go).getBlockNumber().then(e=>{k(this,ms,e)}),E(this,go).on("block",E(this,uh)))}stop(){E(this,pa)&&(k(this,pa,!1),E(this,go).off("block",E(this,uh)))}pause(e){this.stop(),e&&k(this,ms,-2)}resume(){this.start()}}go=new WeakMap,ch=new WeakMap,uh=new WeakMap,pa=new WeakMap,ms=new WeakMap,Uy=new WeakSet,m2=async function(e){if(E(this,ms)===-2)return;const r=QE(E(this,ch));r.fromBlock=E(this,ms)+1,r.toBlock=e;const n=await E(this,go).getLogs(r);if(n.length===0){E(this,ms)<e-60&&k(this,ms,e-60);return}for(const s of n)E(this,go).emit(E(this,ch),s),k(this,ms,s.blockNumber)};const YX=BigInt(2),QX=10;function im(t){return t&&typeof t.then=="function"}function km(t,e){return t+":"+JSON.stringify(e,(r,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n);return s.sort(),s.reduce((i,o)=>(i[o]=n[o],i),{})}return n})}class by{constructor(e){q(this,"name");Ce(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function ZX(t){return JSON.parse(JSON.stringify(t))}function ZE(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function ab(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(Ct(t,32)){const r=t.toLowerCase();return{type:"transaction",tag:km("tx",{hash:r}),hash:r}}if(t.orphan){const r=t;return{type:"orphan",tag:km("orphan",r),filter:ZX(r)}}if(t.address||t.topics){const r=t,n={topics:(r.topics||[]).map(s=>s==null?null:Array.isArray(s)?ZE(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(r.address){const s=[],i=[],o=a=>{Ct(a)?s.push(a):i.push((async()=>{s.push(await sn(a,e))})())};Array.isArray(r.address)?r.address.forEach(o):o(r.address),i.length&&await Promise.all(i),n.address=ZE(s.map(a=>a.toLowerCase()))}return{filter:n,tag:km("event",n),type:"event"}}M(!1,"unknown ProviderEvent","event",t)}function cb(){return new Date().getTime()}const XX={cacheTimeout:250,pollingInterval:4e3};var jr,ga,Hr,lh,Mn,Bc,ma,mo,Hp,ys,hh,dh,He,kn,XE,ev,Qd,tv,Zd,Dm;class eee{constructor(e,r){V(this,He);V(this,jr);V(this,ga);V(this,Hr);V(this,lh);V(this,Mn);V(this,Bc);V(this,ma);V(this,mo);V(this,Hp);V(this,ys);V(this,hh);V(this,dh);if(k(this,dh,Object.assign({},XX,r||{})),e==="any")k(this,Bc,!0),k(this,Mn,null);else if(e){const n=Ks.from(e);k(this,Bc,!1),k(this,Mn,Promise.resolve(n)),setTimeout(()=>{this.emit("network",n,null)},0)}else k(this,Bc,!1),k(this,Mn,null);k(this,mo,-1),k(this,ma,new Map),k(this,jr,new Map),k(this,ga,new Map),k(this,Hr,null),k(this,lh,!1),k(this,Hp,1),k(this,ys,new Map),k(this,hh,!1)}get pollingInterval(){return E(this,dh).pollingInterval}get provider(){return this}get plugins(){return Array.from(E(this,ga).values())}attachPlugin(e){if(E(this,ga).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return E(this,ga).set(e.name,e.connect(this)),this}getPlugin(e){return E(this,ga).get(e)||null}get disableCcipRead(){return E(this,hh)}set disableCcipRead(e){k(this,hh,!!e)}async ccipReadFetch(e,r,n){if(this.disableCcipRead||n.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=r.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],u=c.replace("{sender}",s).replace("{data}",i),l=new Mi(u);c.indexOf("{data}")===-1&&(l.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:l,index:a,urls:n});let h="unknown error",d;try{d=await l.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:{error:f}});continue}try{const f=d.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:l,result:f}),f.data;f.message&&(h=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:f})}catch{}Q(d.statusCode<400||d.statusCode>=500,`response not found during CCIP fetch: ${h}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:h}}),o.push(h)}Q(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:o}})}_wrapBlock(e,r){return new bX($X(e),this)}_wrapLog(e,r){return new gg(BX(e),this)}_wrapTransactionReceipt(e,r){return new r2(HX(e),this)}_wrapTransactionResponse(e,r){return new Ap(g2(e),this)}_detectNetwork(){Q(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){Q(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Be(await ee(this,He,kn).call(this,{method:"getBlockNumber"}),"%response");return E(this,mo)>=0&&k(this,mo,e),e}_getAddress(e){return sn(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Ct(e))return Ct(e,32)?e:gl(e);if(typeof e=="bigint"&&(e=Be(e,"blockTag")),typeof e=="number")return e>=0?gl(e):E(this,mo)>=0?gl(E(this,mo)+e):this.getBlockNumber().then(r=>gl(r+e));M(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const r=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?ZE(c.map(u=>u.toLowerCase())):c.toLowerCase()),n="blockHash"in e?e.blockHash:void 0,s=(c,u,l)=>{let h;switch(c.length){case 0:break;case 1:h=c[0];break;default:c.sort(),h=c}if(n&&(u!=null||l!=null))throw new Error("invalid filter");const d={};return h&&(d.address=h),r.length&&(d.topics=r),u&&(d.fromBlock=u),l&&(d.toBlock=l),n&&(d.blockHash=n),d};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const r=my(e),n=[];if(["to","from"].forEach(s=>{if(r[s]==null)return;const i=sn(r[s],this);im(i)?n.push(async function(){r[s]=await i}()):r[s]=i}),r.blockTag!=null){const s=this._getBlockTag(r.blockTag);im(s)?n.push(async function(){r.blockTag=await s}()):r.blockTag=s}return n.length?async function(){return await Promise.all(n),r}():r}async getNetwork(){if(E(this,Mn)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw E(this,Mn)===s&&k(this,Mn,null),i}})();return k(this,Mn,s),(await s).clone()}const e=E(this,Mn),[r,n]=await Promise.all([e,this._detectNetwork()]);return r.chainId!==n.chainId&&(E(this,Bc)?(this.emit("network",n,r),E(this,Mn)===e&&k(this,Mn,Promise.resolve(n))):Q(!1,`network changed: ${r.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),r.clone()}async getFeeData(){const e=await this.getNetwork(),r=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await en({_block:ee(this,He,tv).call(this,"latest",!1),gasPrice:(async()=>{try{const l=await ee(this,He,kn).call(this,{method:"getGasPrice"});return ve(l,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const l=await ee(this,He,kn).call(this,{method:"getPriorityFee"});return ve(l,"%response")}catch{}return null})()});let a=null,c=null;const u=this._wrapBlock(s,e);return u&&u.baseFeePerGas&&(c=o??BigInt("1000000000"),a=u.baseFeePerGas*YX+c),new rN(i,a,c)},n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const s=new Mi(n.url),i=await n.processFunc(r,this,s);return new rN(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await r()}async estimateGas(e){let r=this._getTransactionRequest(e);return im(r)&&(r=await r),ve(await ee(this,He,kn).call(this,{method:"estimateGas",transaction:r}),"%response")}async call(e){const{tx:r,blockTag:n}=await en({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await ee(this,He,ev).call(this,ee(this,He,XE).call(this,r,n,e.enableCcipRead?0:-1))}async getBalance(e,r){return ve(await ee(this,He,Qd).call(this,{method:"getBalance"},e,r),"%response")}async getTransactionCount(e,r){return Be(await ee(this,He,Qd).call(this,{method:"getTransactionCount"},e,r),"%response")}async getCode(e,r){return be(await ee(this,He,Qd).call(this,{method:"getCode"},e,r))}async getStorage(e,r,n){const s=ve(r,"position");return be(await ee(this,He,Qd).call(this,{method:"getStorage",position:s},e,n))}async broadcastTransaction(e){const{blockNumber:r,hash:n,network:s}=await en({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=py.from(e);if(i.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(r)}async getBlock(e,r){const{network:n,params:s}=await en({network:this.getNetwork(),params:ee(this,He,tv).call(this,e,!!r)});return s==null?null:this._wrapBlock(s,n)}async getTransaction(e){const{network:r,params:n}=await en({network:this.getNetwork(),params:ee(this,He,kn).call(this,{method:"getTransaction",hash:e})});return n==null?null:this._wrapTransactionResponse(n,r)}async getTransactionReceipt(e){const{network:r,params:n}=await en({network:this.getNetwork(),params:ee(this,He,kn).call(this,{method:"getTransactionReceipt",hash:e})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const s=await ee(this,He,kn).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(n,r)}async getTransactionResult(e){const{result:r}=await en({network:this.getNetwork(),result:ee(this,He,kn).call(this,{method:"getTransactionResult",hash:e})});return r==null?null:be(r)}async getLogs(e){let r=this._getFilter(e);im(r)&&(r=await r);const{network:n,params:s}=await en({network:this.getNetwork(),params:ee(this,He,kn).call(this,{method:"getLogs",filter:r})});return s.map(i=>this._wrapLog(i,n))}_getProvider(e){Q(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await wy.fromName(this,e)}async getAvatar(e){const r=await this.getResolver(e);return r?await r.getAvatar():null}async resolveName(e){const r=await this.getResolver(e);return r?await r.getAddress():null}async lookupAddress(e){e=ft(e);const r=WE(e.substring(2).toLowerCase()+".addr.reverse");try{const n=await wy.getEnsAddress(this),i=await new Tl(n,["function resolver(bytes32) view returns (address)"],this).resolver(r);if(i==null||i===gp)return null;const a=await new Tl(i,["function name(bytes32) view returns (string)"],this).name(r);return await this.resolveName(a)!==e?null:a}catch(n){if(Rr(n,"BAD_DATA")&&n.value==="0x"||Rr(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(e,r,n){const s=r??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async u=>{try{const l=await this.getTransactionReceipt(e);if(l!=null&&u-l.blockNumber+1>=s){i(l),a&&(clearTimeout(a),a=null);return}}catch(l){console.log("EEE",l)}this.once("block",c)};n!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(Bt("timeout","TIMEOUT",{reason:"timeout"})))},n)),c(await this.getBlockNumber())})}async waitForBlock(e){Q(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const r=E(this,ys).get(e);r&&(r.timer&&clearTimeout(r.timer),E(this,ys).delete(e))}_setTimeout(e,r){r==null&&(r=0);const n=yd(this,Hp)._++,s=()=>{E(this,ys).delete(n),e()};if(this.paused)E(this,ys).set(n,{timer:null,func:s,time:r});else{const i=setTimeout(s,r);E(this,ys).set(n,{timer:i,func:s,time:cb()})}return n}_forEachSubscriber(e){for(const r of E(this,jr).values())e(r.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new by(e.type);case"block":{const r=new VX(this);return r.pollingInterval=this.pollingInterval,r}case"safe":case"finalized":return new GX(this,e.type);case"event":return new R_(this,e.filter);case"transaction":return new JX(this,e.hash);case"orphan":return new KX(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,r){for(const n of E(this,jr).values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=r,n.started&&r.start(),E(this,Hr)!=null&&r.pause(E(this,Hr));break}}async on(e,r){const n=await ee(this,He,Dm).call(this,e);return n.listeners.push({listener:r,once:!1}),n.started||(n.subscriber.start(),n.started=!0,E(this,Hr)!=null&&n.subscriber.pause(E(this,Hr))),this}async once(e,r){const n=await ee(this,He,Dm).call(this,e);return n.listeners.push({listener:r,once:!0}),n.started||(n.subscriber.start(),n.started=!0,E(this,Hr)!=null&&n.subscriber.pause(E(this,Hr))),this}async emit(e,...r){const n=await ee(this,He,Zd).call(this,e,r);if(!n||n.listeners.length===0)return!1;const s=n.listeners.length;return n.listeners=n.listeners.filter(({listener:i,once:o})=>{const a=new PP(this,o?null:i,e);try{i.call(this,...r,a)}catch{}return!o}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),E(this,jr).delete(n.tag)),s>0}async listenerCount(e){if(e){const n=await ee(this,He,Zd).call(this,e);return n?n.listeners.length:0}let r=0;for(const{listeners:n}of E(this,jr).values())r+=n.length;return r}async listeners(e){if(e){const n=await ee(this,He,Zd).call(this,e);return n?n.listeners.map(({listener:s})=>s):[]}let r=[];for(const{listeners:n}of E(this,jr).values())r=r.concat(n.map(({listener:s})=>s));return r}async off(e,r){const n=await ee(this,He,Zd).call(this,e);if(!n)return this;if(r){const s=n.listeners.map(({listener:i})=>i).indexOf(r);s>=0&&n.listeners.splice(s,1)}return(!r||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),E(this,jr).delete(n.tag)),this}async removeAllListeners(e){if(e){const{tag:r,started:n,subscriber:s}=await ee(this,He,Dm).call(this,e);n&&s.stop(),E(this,jr).delete(r)}else for(const[r,{started:n,subscriber:s}]of E(this,jr))n&&s.stop(),E(this,jr).delete(r);return this}async addListener(e,r){return await this.on(e,r)}async removeListener(e,r){return this.off(e,r)}get destroyed(){return E(this,lh)}destroy(){this.removeAllListeners();for(const e of E(this,ys).keys())this._clearTimeout(e);k(this,lh,!0)}get paused(){return E(this,Hr)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(k(this,mo,-1),E(this,Hr)!=null){if(E(this,Hr)==!!e)return;Q(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(r=>r.pause(e)),k(this,Hr,!!e);for(const r of E(this,ys).values())r.timer&&clearTimeout(r.timer),r.time=cb()-r.time}resume(){if(E(this,Hr)!=null){this._forEachSubscriber(e=>e.resume()),k(this,Hr,null);for(const e of E(this,ys).values()){let r=e.time;r<0&&(r=0),e.time=cb(),setTimeout(e.func,r)}}}}jr=new WeakMap,ga=new WeakMap,Hr=new WeakMap,lh=new WeakMap,Mn=new WeakMap,Bc=new WeakMap,ma=new WeakMap,mo=new WeakMap,Hp=new WeakMap,ys=new WeakMap,hh=new WeakMap,dh=new WeakMap,He=new WeakSet,kn=async function(e){const r=E(this,dh).cacheTimeout;if(r<0)return await this._perform(e);const n=km(e.method,e);let s=E(this,ma).get(n);return s||(s=this._perform(e),E(this,ma).set(n,s),setTimeout(()=>{E(this,ma).get(n)===s&&E(this,ma).delete(n)},r)),await s},XE=async function(e,r,n){Q(n<QX,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:r,enableCcipRead:!0})});const s=my(e);try{return be(await this._perform({method:"call",transaction:s,blockTag:r}))}catch(i){if(!this.disableCcipRead&&h_(i)&&i.data&&n>=0&&r==="latest"&&s.to!=null&&Vt(i.data,0,4)==="0x556f1830"){const o=i.data,a=await sn(s.to,this);let c;try{c=iee(Vt(i.data,4))}catch(h){Q(!1,h.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}Q(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const u=await this.ccipReadFetch(s,c.calldata,c.urls);Q(u!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const l={to:a,data:er([c.selector,see([u,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:l});try{const h=await ee(this,He,XE).call(this,l,r,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},l),result:h}),h}catch(h){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},l),error:h}),h}}throw i}},ev=async function(e){const{value:r}=await en({network:this.getNetwork(),value:e});return r},Qd=async function(e,r,n){let s=this._getAddress(r),i=this._getBlockTag(n);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await ee(this,He,ev).call(this,ee(this,He,kn).call(this,Object.assign(e,{address:s,blockTag:i})))},tv=async function(e,r){if(Ct(e,32))return await ee(this,He,kn).call(this,{method:"getBlock",blockHash:e,includeTransactions:r});let n=this._getBlockTag(e);return typeof n!="string"&&(n=await n),await ee(this,He,kn).call(this,{method:"getBlock",blockTag:n,includeTransactions:r})},Zd=async function(e,r){let n=await ab(e,this);return n.type==="event"&&r&&r.length>0&&r[0].removed===!0&&(n=await ab({orphan:"drop-log",log:r[0]},this)),E(this,jr).get(n.tag)||null},Dm=async function(e){const r=await ab(e,this),n=r.tag;let s=E(this,jr).get(n);return s||(s={subscriber:this._getSubscriber(r),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},E(this,jr).set(n,s)),s};function tee(t,e){try{const r=rv(t,e);if(r)return oy(r)}catch{}return null}function rv(t,e){if(t==="0x")return null;try{const r=Be(Vt(t,e,e+32)),n=Be(Vt(t,r,r+32));return Vt(t,r+32,r+32+n)}catch{}return null}function lN(t){const e=rn(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function ree(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const nee=new Uint8Array([]);function see(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(nee),r+=32;for(let n=0;n<t.length;n++){const s=Ye(t[n]);e[n]=lN(r),e.push(lN(s.length)),e.push(ree(s)),r+=32+Math.ceil(s.length/32)*32}return er(e)}const hN="0x0000000000000000000000000000000000000000000000000000000000000000";function iee(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};Q(Cl(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const r=Vt(t,0,32);Q(Vt(r,0,12)===Vt(hN,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Vt(r,12);try{const n=[],s=Be(Vt(t,32,64)),i=Be(Vt(t,s,s+32)),o=Vt(t,s+32);for(let a=0;a<i;a++){const c=tee(o,a*32);if(c==null)throw new Error("abort");n.push(c)}e.urls=n}catch{Q(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=rv(t,64);if(n==null)throw new Error("abort");e.calldata=n}catch{Q(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}Q(Vt(t,100,128)===Vt(hN,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Vt(t,96,100);try{const n=rv(t,128);if(n==null)throw new Error("abort");e.extraData=n}catch{Q(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>e[n]),e}function rl(t,e){if(t.provider)return t.provider;Q(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function dN(t,e){let r=my(e);if(r.to!=null&&(r.to=sn(r.to,t)),r.from!=null){const n=r.from;r.from=Promise.all([t.getAddress(),sn(n,t)]).then(([s,i])=>(M(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else r.from=t.getAddress();return await en(r)}class oee{constructor(e){q(this,"provider");Ce(this,{provider:e||null})}async getNonce(e){return rl(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await dN(this,e)}async populateTransaction(e){const r=rl(this,"populateTransaction"),n=await dN(this,e);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const s=await this.provider.getNetwork();if(n.chainId!=null){const o=ve(n.chainId);M(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else n.chainId=s.chainId;const i=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||i)?M(!1,"eip-1559 transaction do not support gasPrice","tx",e):(n.type===0||n.type===1)&&i&&M(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const o=await r.getFeeData();Q(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice)}else{const o=await r.getFeeData();if(n.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(n.type=2,n.gasPrice!=null){const a=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=a,n.maxPriorityFeePerGas=a}else n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(Q(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice),n.type=0):Q(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(n.type===2||n.type===3)&&(n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await en(n)}async estimateGas(e){return rl(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return rl(this,"call").call(await this.populateCall(e))}async resolveName(e){return await rl(this,"resolveName").resolveName(e)}async sendTransaction(e){const r=rl(this,"sendTransaction"),n=await this.populateTransaction(e);delete n.from;const s=py.from(n);return await r.broadcastTransaction(await this.signTransaction(s))}}const fN=new Set;function aee(t){fN.has(t)||(fN.add(t),console.log("========= NOTICE ========="),console.log(`Request-Rate Exceeded for ${t} (this message will not be repeated)`),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.org/api-keys/"),console.log("=========================="))}function cee(t){return JSON.parse(JSON.stringify(t))}var Xr,Ei,Lc,ya,$c,fh,Fa,nv,sv;class y2{constructor(e){V(this,Fa);V(this,Xr);V(this,Ei);V(this,Lc);V(this,ya);V(this,$c);V(this,fh);k(this,Xr,e),k(this,Ei,null),k(this,Lc,ee(this,Fa,nv).bind(this)),k(this,ya,!1),k(this,$c,null),k(this,fh,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,r){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){E(this,ya)||(k(this,ya,!0),ee(this,Fa,nv).call(this,-2))}stop(){E(this,ya)&&(k(this,ya,!1),k(this,fh,!0),ee(this,Fa,sv).call(this),E(this,Xr).off("block",E(this,Lc)))}pause(e){e&&ee(this,Fa,sv).call(this),E(this,Xr).off("block",E(this,Lc))}resume(){this.start()}}Xr=new WeakMap,Ei=new WeakMap,Lc=new WeakMap,ya=new WeakMap,$c=new WeakMap,fh=new WeakMap,Fa=new WeakSet,nv=async function(e){try{E(this,Ei)==null&&k(this,Ei,this._subscribe(E(this,Xr)));let r=null;try{r=await E(this,Ei)}catch(i){if(!Rr(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(r==null){k(this,Ei,null),E(this,Xr)._recoverSubscriber(this,this._recover(E(this,Xr)));return}const n=await E(this,Xr).getNetwork();if(E(this,$c)||k(this,$c,n),E(this,$c).chainId!==n.chainId)throw new Error("chaid changed");if(E(this,fh))return;const s=await E(this,Xr).send("eth_getFilterChanges",[r]);await this._emitResults(E(this,Xr),s)}catch(r){console.log("@TODO",r)}E(this,Xr).once("block",E(this,Lc))},sv=function(){const e=E(this,Ei);e&&(k(this,Ei,null),e.then(r=>{E(this,Xr).destroyed||E(this,Xr).send("eth_uninstallFilter",[r])}))};var Mc;class uee extends y2{constructor(r,n){super(r);V(this,Mc);k(this,Mc,cee(n))}_recover(r){return new R_(r,E(this,Mc))}async _subscribe(r){return await r.send("eth_newFilter",[E(this,Mc)])}async _emitResults(r,n){for(const s of n)r.emit(E(this,Mc),r._wrapLog(s,r._network))}}Mc=new WeakMap;class lee extends y2{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,r){for(const n of r)e.emit("pending",n)}}const hee="bigint,boolean,function,number,string,symbol".split(/,/g);function Um(t){if(t==null||hee.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(Um);if(typeof t=="object")return Object.keys(t).reduce((e,r)=>(e[r]=t[r],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function dee(t){return new Promise(e=>{setTimeout(e,t)})}function nl(t){return t&&t.toLowerCase()}function pN(t){return t&&typeof t.pollingInterval=="number"}const w2={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Ol extends oee{constructor(r,n){super(r);q(this,"address");n=ft(n),Ce(this,{address:n})}connect(r){Q(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(r){return await this.populateCall(r)}async sendUncheckedTransaction(r){const n=Um(r),s=[];if(n.from){const o=n.from;s.push((async()=>{const a=await sn(o,this.provider);M(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",r),n.from=a})())}else n.from=this.address;if(n.gasLimit==null&&s.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const o=n.to;s.push((async()=>{n.to=await sn(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(r){const n=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(r);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const u=async()=>{try{const l=await this.provider.getTransaction(s);if(l!=null){i(l.replaceableTransaction(n));return}}catch(l){if(Rr(l,"CANCELLED")||Rr(l,"BAD_DATA")||Rr(l,"NETWORK_ERROR")||Rr(l,"UNSUPPORTED_OPERATION")){l.info==null&&(l.info={}),l.info.sendTransactionHash=s,o(l);return}if(Rr(l,"INVALID_ARGUMENT")&&(c++,l.info==null&&(l.info={}),l.info.sendTransactionHash=s,c>10)){o(l);return}this.provider.emit("error",Bt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:l}))}this.provider._setTimeout(()=>{u()},a.pop()||4e3)};u()})}async signTransaction(r){const n=Um(r);if(n.from){const i=await sn(n.from,this.provider);M(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",r),n.from=i}else n.from=this.address;const s=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[s])}async signMessage(r){const n=typeof r=="string"?ki(r):r;return await this.provider.send("personal_sign",[be(n),this.address.toLowerCase()])}async signTypedData(r,n,s){const i=Um(s),o=await gy.resolveNames(r,n,i,async a=>{const c=await sn(a);return M(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(gy.getPayload(o.domain,n,o.value))])}async unlock(r){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),r,null])}async _legacySignMessage(r){const n=typeof r=="string"?ki(r):r;return await this.provider.send("eth_sign",[this.address.toLowerCase(),be(n)])}}var Fc,ph,yo,vi,js,ws,bn,zp,iv;class b2 extends eee{constructor(r,n){super(r,n);V(this,zp);V(this,Fc);V(this,ph);V(this,yo);V(this,vi);V(this,js);V(this,ws);V(this,bn);k(this,ph,1),k(this,Fc,Object.assign({},w2,n||{})),k(this,yo,[]),k(this,vi,null),k(this,ws,null),k(this,bn,null);{let i=null;const o=new Promise(a=>{i=a});k(this,js,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(M(!s||r!=="any","staticNetwork cannot be used on special network 'any'","options",n),s&&r!=null&&k(this,ws,Ks.from(r))):s&&(M(r==null||s.matches(r),"staticNetwork MUST match network object","options",n),k(this,ws,s))}_getOption(r){return E(this,Fc)[r]}get _network(){return Q(E(this,ws),"network is not available yet","NETWORK_ERROR"),E(this,ws)}async _perform(r){if(r.method==="call"||r.method==="estimateGas"){let s=r.transaction;if(s&&s.type!=null&&ve(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(r=Object.assign({},r,{transaction:Object.assign({},s,{type:void 0})}))}}const n=this.getRpcRequest(r);return n!=null?await this.send(n.method,n.args):super._perform(r)}async _detectNetwork(){const r=this._getOption("staticNetwork");if(r)if(r===!0){if(E(this,ws))return E(this,ws)}else return r;return E(this,bn)?await E(this,bn):this.ready?(k(this,bn,(async()=>{try{const n=Ks.from(ve(await this.send("eth_chainId",[])));return k(this,bn,null),n}catch(n){throw k(this,bn,null),n}})()),await E(this,bn)):(k(this,bn,(async()=>{const n={id:yd(this,ph)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let s;try{s=(await this._send(n))[0],k(this,bn,null)}catch(i){throw k(this,bn,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Ks.from(ve(s.result));throw this.getRpcError(n,s)})()),await E(this,bn))}_start(){E(this,js)==null||E(this,js).resolve==null||(E(this,js).resolve(),k(this,js,null),(async()=>{for(;E(this,ws)==null&&!this.destroyed;)try{k(this,ws,await this._detectNetwork())}catch(r){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Bt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:r}})),await dee(1e3)}ee(this,zp,iv).call(this)})())}async _waitUntilReady(){if(E(this,js)!=null)return await E(this,js).promise}_getSubscriber(r){return r.type==="pending"?new lee(this):r.type==="event"?this._getOption("polling")?new R_(this,r.filter):new uee(this,r.filter):r.type==="orphan"&&r.filter.orphan==="drop-log"?new by("orphan"):super._getSubscriber(r)}get ready(){return E(this,js)==null}getRpcTransaction(r){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(r[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),n[i]=gl(ve(r[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{r[s]!=null&&(n[s]=be(r[s]))}),r.accessList&&(n.accessList=Tu(r.accessList)),r.blobVersionedHashes&&(n.blobVersionedHashes=r.blobVersionedHashes.map(s=>s.toLowerCase())),n}getRpcRequest(r){switch(r.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[nl(r.address),r.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[nl(r.address),r.blockTag]};case"getCode":return{method:"eth_getCode",args:[nl(r.address),r.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[nl(r.address),"0x"+r.position.toString(16),r.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[r.signedTransaction]};case"getBlock":if("blockTag"in r)return{method:"eth_getBlockByNumber",args:[r.blockTag,!!r.includeTransactions]};if("blockHash"in r)return{method:"eth_getBlockByHash",args:[r.blockHash,!!r.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[r.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[r.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(r.transaction),r.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(r.transaction)]};case"getLogs":return r.filter&&r.filter.address!=null&&(Array.isArray(r.filter.address)?r.filter.address=r.filter.address.map(nl):r.filter.address=nl(r.filter.address)),{method:"eth_getLogs",args:[r.filter]}}return null}getRpcError(r,n){const{method:s}=r,{error:i}=n;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return Bt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:r.params[0],info:{payload:r,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=ov(i),u=_p.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",r.params[0],c?c.data:null);return u.info={error:i,payload:r},u}const o=JSON.stringify(fee(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return Bt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:r,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=r.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Bt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return Bt("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Bt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return Bt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?Bt("unsupported operation","UNSUPPORTED_OPERATION",{operation:r.method,info:{error:i,payload:r}}):Bt("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:r})}send(r,n){if(this.destroyed)return Promise.reject(Bt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:r}));const s=yd(this,ph)._++,i=new Promise((o,a)=>{E(this,yo).push({resolve:o,reject:a,payload:{method:r,params:n,id:s,jsonrpc:"2.0"}})});return ee(this,zp,iv).call(this),i}async getSigner(r){r==null&&(r=0);const n=this.send("eth_accounts",[]);if(typeof r=="number"){const i=await n;if(r>=i.length)throw new Error("no such account");return new Ol(this,i[r])}const{accounts:s}=await en({network:this.getNetwork(),accounts:n});r=ft(r);for(const i of s)if(ft(i)===r)return new Ol(this,r);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new Ol(this,n))}destroy(){E(this,vi)&&(clearTimeout(E(this,vi)),k(this,vi,null));for(const{payload:r,reject:n}of E(this,yo))n(Bt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:r.method}));k(this,yo,[]),super.destroy()}}Fc=new WeakMap,ph=new WeakMap,yo=new WeakMap,vi=new WeakMap,js=new WeakMap,ws=new WeakMap,bn=new WeakMap,zp=new WeakSet,iv=function(){if(E(this,vi))return;const r=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");k(this,vi,setTimeout(()=>{k(this,vi,null);const n=E(this,yo);for(k(this,yo,[]);n.length;){const s=[n.shift()];for(;n.length&&s.length!==E(this,Fc).batchMaxCount;)if(s.push(n.shift()),JSON.stringify(s.map(o=>o.payload)).length>E(this,Fc).batchMaxSize){n.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:u}of s){if(this.destroyed){c(Bt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:u.method}));continue}const l=o.filter(h=>h.id===u.id)[0];if(l==null){const h=Bt("missing response for request","BAD_DATA",{value:o,info:{payload:u}});this.emit("error",h),c(h);continue}if("error"in l){c(this.getRpcError(u,l));continue}a(l.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},r))};var wa;class E2 extends b2{constructor(r,n){super(r,n);V(this,wa);let s=this._getOption("pollingInterval");s==null&&(s=w2.pollingInterval),k(this,wa,s)}_getSubscriber(r){const n=super._getSubscriber(r);return pN(n)&&(n.pollingInterval=E(this,wa)),n}get pollingInterval(){return E(this,wa)}set pollingInterval(r){if(!Number.isInteger(r)||r<0)throw new Error("invalid interval");k(this,wa,r),this._forEachSubscriber(n=>{pN(n)&&(n.pollingInterval=E(this,wa))})}}wa=new WeakMap;var gh;class v2 extends E2{constructor(r,n,s){r==null&&(r="http://localhost:8545");super(n,s);V(this,gh);typeof r=="string"?k(this,gh,new Mi(r)):k(this,gh,r.clone())}_getConnection(){return E(this,gh).clone()}async send(r,n){return await this._start(),await super.send(r,n)}async _send(r){const n=this._getConnection();n.body=JSON.stringify(r),n.setHeader("content-type","application/json");const s=await n.send();s.assertOk();let i=s.bodyJson;return Array.isArray(i)||(i=[i]),i}}gh=new WeakMap;function ov(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&Ct(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const r=ov(t[e]);if(r)return r}return null}if(typeof t=="string")try{return ov(JSON.parse(t))}catch{}return null}function av(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const r in t)av(t[r],e);if(typeof t=="string")try{return av(JSON.parse(t),e)}catch{}}}function fee(t){const e=[];return av(t,e),e}function pee(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof _e<"u")return _e;throw new Error("unable to locate global object")}const gee=pee().WebSocket;var _i,qp,ba,jc,Ea;class k_{constructor(e,r){V(this,_i);V(this,qp);V(this,ba);V(this,jc);V(this,Ea);k(this,_i,e),k(this,qp,JSON.stringify(r)),k(this,ba,null),k(this,jc,null),k(this,Ea,null)}get filter(){return JSON.parse(E(this,qp))}start(){k(this,ba,E(this,_i).send("eth_subscribe",this.filter).then(e=>(E(this,_i)._register(e,this),e)))}stop(){E(this,ba).then(e=>{E(this,_i).destroyed||E(this,_i).send("eth_unsubscribe",[e])}),k(this,ba,null)}pause(e){Q(e,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"}),k(this,jc,!!e)}resume(){k(this,jc,null)}_handleMessage(e){if(E(this,ba)!=null&&E(this,jc)===null){let r=E(this,Ea);r==null?r=this._emit(E(this,_i),e):r=r.then(async()=>{await this._emit(E(this,_i),e)}),k(this,Ea,r.then(()=>{E(this,Ea)===r&&k(this,Ea,null)}))}}async _emit(e,r){throw new Error("sub-classes must implemente this; _emit")}}_i=new WeakMap,qp=new WeakMap,ba=new WeakMap,jc=new WeakMap,Ea=new WeakMap;class mee extends k_{constructor(e){super(e,["newHeads"])}async _emit(e,r){e.emit("block",parseInt(r.number))}}class yee extends k_{constructor(e){super(e,["newPendingTransactions"])}async _emit(e,r){e.emit("pending",r)}}var Wp;class wee extends k_{constructor(r,n){super(r,["logs",n]);V(this,Wp);k(this,Wp,JSON.stringify(n))}get logFilter(){return JSON.parse(E(this,Wp))}async _emit(r,n){r.emit(this.logFilter,r._wrapLog(n,r._network))}}Wp=new WeakMap;var Hc,mh,va;class bee extends b2{constructor(r,n){const s=Object.assign({},n??{});M(s.batchMaxCount==null||s.batchMaxCount===1,"sockets-based providers do not support batches","options.batchMaxCount",n),s.batchMaxCount=1,s.staticNetwork==null&&(s.staticNetwork=!0);super(r,s);V(this,Hc);V(this,mh);V(this,va);k(this,Hc,new Map),k(this,mh,new Map),k(this,va,new Map)}_getSubscriber(r){switch(r.type){case"close":return new by("close");case"block":return new mee(this);case"pending":return new yee(this);case"event":return new wee(this,r.filter);case"orphan":if(r.filter.orphan==="drop-log")return new by("drop-log")}return super._getSubscriber(r)}_register(r,n){E(this,mh).set(r,n);const s=E(this,va).get(r);if(s){for(const i of s)n._handleMessage(i);E(this,va).delete(r)}}async _send(r){M(!Array.isArray(r),"WebSocket does not support batch send","payload",r);const n=new Promise((s,i)=>{E(this,Hc).set(r.id,{payload:r,resolve:s,reject:i})});return await this._waitUntilReady(),await this._write(JSON.stringify(r)),[await n]}async _processMessage(r){const n=JSON.parse(r);if(n&&typeof n=="object"&&"id"in n){const s=E(this,Hc).get(n.id);if(s==null){this.emit("error",Bt("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:n}));return}E(this,Hc).delete(n.id),s.resolve(n)}else if(n&&n.method==="eth_subscription"){const s=n.params.subscription,i=E(this,mh).get(s);if(i)i._handleMessage(n.params.result);else{let o=E(this,va).get(s);o==null&&(o=[],E(this,va).set(s,o)),o.push(n.params.result)}}else{this.emit("error",Bt("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:n}));return}}async _write(r){throw new Error("sub-classes must override this")}}Hc=new WeakMap,mh=new WeakMap,va=new WeakMap;var zc,Hs;class Eee extends bee{constructor(r,n,s){super(n,s);V(this,zc);V(this,Hs);typeof r=="string"?(k(this,zc,()=>new gee(r)),k(this,Hs,E(this,zc).call(this))):typeof r=="function"?(k(this,zc,r),k(this,Hs,r())):(k(this,zc,null),k(this,Hs,r)),this.websocket.onopen=async()=>{try{await this._start(),this.resume()}catch(i){console.log("failed to start WebsocketProvider",i)}},this.websocket.onmessage=i=>{this._processMessage(i.data)}}get websocket(){if(E(this,Hs)==null)throw new Error("websocket closed");return E(this,Hs)}async _write(r){this.websocket.send(r)}async destroy(){E(this,Hs)!=null&&(E(this,Hs).close(),k(this,Hs,null)),super.destroy()}}zc=new WeakMap,Hs=new WeakMap;const Xd="84842078b09946638c03157f83405213";function vee(t){switch(t){case"mainnet":return"mainnet.infura.io";case"goerli":return"goerli.infura.io";case"sepolia":return"sepolia.infura.io";case"arbitrum":return"arbitrum-mainnet.infura.io";case"arbitrum-goerli":return"arbitrum-goerli.infura.io";case"arbitrum-sepolia":return"arbitrum-sepolia.infura.io";case"base":return"base-mainnet.infura.io";case"base-goerlia":return"base-goerli.infura.io";case"base-sepolia":return"base-sepolia.infura.io";case"bnb":return"bnbsmartchain-mainnet.infura.io";case"bnbt":return"bnbsmartchain-testnet.infura.io";case"linea":return"linea-mainnet.infura.io";case"linea-goerli":return"linea-goerli.infura.io";case"linea-sepolia":return"linea-sepolia.infura.io";case"matic":return"polygon-mainnet.infura.io";case"matic-amoy":return"polygon-amoy.infura.io";case"matic-mumbai":return"polygon-mumbai.infura.io";case"optimism":return"optimism-mainnet.infura.io";case"optimism-goerli":return"optimism-goerli.infura.io";case"optimism-sepolia":return"optimism-sepolia.infura.io"}M(!1,"unsupported network","network",t)}class _ee extends Eee{constructor(r,n){const s=new gu(r,n),i=s._getConnection();Q(!i.credentials,"INFURA WebSocket project secrets unsupported","UNSUPPORTED_OPERATION",{operation:"InfuraProvider.getWebSocketProvider()"});const o=i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(o,s._network);q(this,"projectId");q(this,"projectSecret");Ce(this,{projectId:s.projectId,projectSecret:s.projectSecret})}isCommunityResource(){return this.projectId===Xd}}class gu extends v2{constructor(r,n,s){r==null&&(r="mainnet");const i=Ks.from(r);n==null&&(n=Xd),s==null&&(s=null);const o=gu.getRequest(i,n,s);super(o,i,{staticNetwork:i});q(this,"projectId");q(this,"projectSecret");Ce(this,{projectId:n,projectSecret:s})}_getProvider(r){try{return new gu(r,this.projectId,this.projectSecret)}catch{}return super._getProvider(r)}isCommunityResource(){return this.projectId===Xd}static getWebSocketProvider(r,n){return new _ee(r,n)}static getRequest(r,n,s){n==null&&(n=Xd),s==null&&(s=null);const i=new Mi(`https://${vee(r.name)}/v3/${n}`);return i.allowGzip=!0,s&&i.setCredentials("",s),n===Xd&&(i.retryFunc=async(o,a,c)=>(aee("InfuraProvider"),!0)),i}}var yh;class ub extends E2{constructor(r,n,s){const i=Object.assign({},s??{},{batchMaxCount:1});M(r&&r.request,"invalid EIP-1193 provider","ethereum",r);super(n,i);V(this,yh);k(this,yh,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const u=await r.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:u}),u}catch(u){const l=new Error(u.message);throw l.code=u.code,l.data=u.data,l.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:l}),l}})}async send(r,n){return await this._start(),await super.send(r,n)}async _send(r){M(!Array.isArray(r),"EIP-1193 does not support batch request","payload",r);try{const n=await E(this,yh).call(this,r.method,r.params||[]);return[{id:r.id,result:n}]}catch(n){return[{id:r.id,error:{code:n.code,data:n.data,message:n.message}}]}}getRpcError(r,n){switch(n=JSON.parse(JSON.stringify(n)),n.error.code||-1){case 4001:n.error.message=`ethers-user-denied: ${n.error.message}`;break;case 4200:n.error.message=`ethers-unsupported: ${n.error.message}`;break}return super.getRpcError(r,n)}async hasSigner(r){r==null&&(r=0);const n=await this.send("eth_accounts",[]);return typeof r=="number"?n.length>r:(r=r.toLowerCase(),n.filter(s=>s.toLowerCase()===r).length!==0)}async getSigner(r){if(r==null&&(r=0),!await this.hasSigner(r))try{await E(this,yh).call(this,"eth_requestAccounts",[])}catch(n){const s=n.payload;throw this.getRpcError(s,{id:s.id,error:n})}return await super.getSigner(r)}}yh=new WeakMap;const xl={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,r]=await Promise.all([xl.getAddresses(t),xl.getChainId(t)]);return{chainId:r,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var n,s;const r=((n=e.rpcUrls.chainDefault)==null?void 0:n.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:xl.numberToHexString(e.id),rpcUrls:[...r],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Ii.NetworkImageIds[e.id]]}]})}},Go={signMessage:async(t,e,r)=>{if(!e)throw new Error("signMessage - provider is undefined");const n=Ct(t)?t:be(ki(t));return await e.request({method:"personal_sign",params:[n,r]})},estimateGas:async(t,e,r,n)=>{if(!e)throw new Error("estimateGas - provider is undefined");if(!r)throw new Error("estimateGas - address is undefined");if(t.chainNamespace&&t.chainNamespace!=="eip155")throw new Error("estimateGas - chainNamespace is not eip155");const s={from:t.address,to:t.to,data:t.data,type:0},i=new ub(e,n);return await new Ol(i,r).estimateGas(s)},sendTransaction:async(t,e,r,n)=>{if(!e)throw new Error("sendTransaction - provider is undefined");if(!r)throw new Error("sendTransaction - address is undefined");if(t.chainNamespace&&t.chainNamespace!=="eip155")throw new Error("sendTransaction - chainNamespace is not eip155");const s={to:t.to,value:t.value,gasLimit:t.gas,gasPrice:t.gasPrice,data:t.data,type:0},i=new ub(e,n),c=await(await new Ol(i,r).sendTransaction(s)).wait();return(c==null?void 0:c.hash)||null},writeContract:async(t,e,r,n)=>{if(!e)throw new Error("writeContract - provider is undefined");if(!r)throw new Error("writeContract - address is undefined");const s=new ub(e,n),i=new Ol(s,r),o=new Tl(t.tokenAddress,t.abi,i);if(!o||!t.method)throw new Error("Contract method is undefined");const a=o[t.method];if(a)return await a(...t.args);throw new Error("Contract method is undefined")},getEnsAddress:async(t,e)=>{try{const r=Number(e.id);let n=null,s=!1;return N3(t)&&(s=await u_.resolveReownName(t)||!1),r===1&&(n=await new gu("mainnet").resolveName(t)),n||s||!1}catch{return!1}},getEnsAvatar:async(t,e)=>e===1&&await new gu("mainnet").getAvatar(t)||!1,parseWalletCapabilities:t=>{try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}},parseUnits:oY,formatUnits:FP};class Aee extends IP{constructor(){super({adapterType:oe.ADAPTER_TYPES.ETHERS,namespace:oe.CHAIN.EVM}),this.balancePromises={},this.providerHandlers=null}async createEthersConfig(e){if(!e.metadata)return;let r;function n(){if(r)return r;if(!(typeof window>"u")&&window.ethereum)return r=window.ethereum,r}async function s(){var o,a,c;try{const{createCoinbaseWalletSDK:u}=await ls(async()=>{const{createCoinbaseWalletSDK:h}=await import("./index-D2y6MeIM.js");return{createCoinbaseWalletSDK:h}},__vite__mapDeps([35,2,3]));return typeof window>"u"?void 0:u({appName:(o=e==null?void 0:e.metadata)==null?void 0:o.name,appLogoUrl:(a=e==null?void 0:e.metadata)==null?void 0:a.icons[0],appChainIds:((c=e.networks)==null?void 0:c.map(h=>h.id))||[1,84532],preference:{options:e.coinbasePreference??"all"}}).getProvider()}catch(u){console.error("Failed to import Coinbase Wallet SDK:",u);return}}const i={metadata:e.metadata};if(e.enableInjected!==!1&&(i.injected=n()),e.enableCoinbase!==!1){const o=await s();o&&(i.coinbase=o)}return i.EIP6963=e.enableEIP6963!==!1,i}async signMessage(e){const{message:r,address:n,provider:s}=e;if(!s)throw new Error("Provider is undefined");try{return{signature:await Go.signMessage(r,s,n)}}catch{throw new Error("EthersAdapter:signMessage - Sign message failed")}}async sendTransaction(e){var n;if(!e.provider)throw new Error("Provider is undefined");return{hash:await Go.sendTransaction({value:e.value,to:e.to,data:e.data,gas:e.gas,gasPrice:e.gasPrice,address:e.address},e.provider,e.address,Number((n=e.caipNetwork)==null?void 0:n.id))}}async writeContract(e){var s;if(!e.provider)throw new Error("Provider is undefined");const{address:r}=Qi.parseCaipAddress(e.caipAddress);return{hash:await Go.writeContract(e,e.provider,r,Number((s=e.caipNetwork)==null?void 0:s.id))}}async estimateGas(e){const{provider:r,caipNetwork:n,address:s}=e;if(!r)throw new Error("Provider is undefined");try{return{gas:await Go.estimateGas({data:e.data,to:e.to,address:s},r,s,Number(n==null?void 0:n.id))}}catch{throw new Error("EthersAdapter:estimateGas - Estimate gas failed")}}async getEnsAddress(e){const{name:r,caipNetwork:n}=e;return n?{address:await Go.getEnsAddress(r,n)}:{address:""}}parseUnits(e){return Go.parseUnits(e.value,e.decimals)}formatUnits(e){return Go.formatUnits(e.value,e.decimals)}async syncConnection(e){const{id:r,chainId:n}=e,s=this.connectors.find(c=>c.id===r),i=s==null?void 0:s.provider;if(!i)throw new Error("Provider not found");const o=await i.request({method:"eth_requestAccounts"}),a=await i.request({method:"eth_chainId"});if(this.listenProviderEvents(i),!o[0])throw new Error("No accounts found");if(!(s!=null&&s.type))throw new Error("Connector type not found");return{address:o[0],chainId:Number(a)||Number(n),provider:i,type:s.type,id:r}}async syncConnectors(e){var n;this.ethersConfig=await this.createEthersConfig(e),(n=this.ethersConfig)!=null&&n.EIP6963&&this.listenInjectedConnector(!0),Object.keys(this.ethersConfig||{}).filter(s=>s!=="metadata"&&s!=="EIP6963").forEach(s=>{var a,c;const i=s==="coinbase"?"coinbaseWalletSDK":s,o=s===oe.CONNECTOR_ID.INJECTED;this.namespace&&this.addConnector({id:i,explorerId:Ii.ConnectorExplorerIds[i],imageUrl:(a=e==null?void 0:e.connectorImages)==null?void 0:a[i],name:Ii.ConnectorNamesMap[i]||"Unknown",imageId:Ii.ConnectorImageIds[i],type:Ii.ConnectorTypesMap[i]??"EXTERNAL",info:o?void 0:{rdns:i},chain:this.namespace,chains:[],provider:(c=this.ethersConfig)==null?void 0:c[s]})})}setUniversalProvider(e){this.addConnector(new l_({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}eip6963EventHandler(e){var r;if(e.detail){const{info:n,provider:s}=e.detail;if(!((r=this.connectors)==null?void 0:r.find(o=>o.name===(n==null?void 0:n.name)))){const o=Ii.ConnectorTypesMap[oe.CONNECTOR_ID.EIP6963],a=(n==null?void 0:n.rdns)||(n==null?void 0:n.name)||(n==null?void 0:n.uuid);this.namespace&&a&&this.addConnector({id:a,type:o,imageUrl:n==null?void 0:n.icon,name:(n==null?void 0:n.name)||"Unknown",provider:s,info:n,chain:this.namespace,chains:[]})}}}listenInjectedConnector(e){if(typeof window<"u"&&e){const r=this.eip6963EventHandler.bind(this);window.addEventListener(Et.EIP6963_ANNOUNCE_EVENT,r),window.dispatchEvent(new Event(Et.EIP6963_REQUEST_EVENT))}}async connect({id:e,type:r,chainId:n}){var c;const s=this.connectors.find(u=>u.id===e),i=s==null?void 0:s.provider;if(!i)throw new Error("Provider not found");let o=[],a;if(r==="AUTH"){const{address:u}=await i.connect({chainId:n,preferredAccountType:(c=we.state.preferredAccountTypes)==null?void 0:c.eip155});o=[u],this.emit("accountChanged",{address:o[0],chainId:Number(n)})}else{if(o=await i.request({method:"eth_requestAccounts"}),a=await i.request({method:"eth_chainId"}),a!==n){const u=this.getCaipNetworks().find(l=>l.id===n);if(!u)throw new Error("EthersAdapter:connect - could not find the caipNetwork to switch");try{await this.switchNetwork({caipNetwork:u,provider:i,providerType:r})}catch{throw new Error("EthersAdapter:connect - Switch network failed")}}this.emit("accountChanged",{address:o[0],chainId:Number(n)}),this.listenProviderEvents(i)}return{address:o[0],chainId:Number(n),provider:i,type:r,id:e}}async reconnect(e){var i;const{id:r,chainId:n}=e,s=this.connectors.find(o=>o.id===r);s&&s.type==="AUTH"&&n&&await s.provider.connect({chainId:n,preferredAccountType:(i=we.state.preferredAccountTypes)==null?void 0:i.eip155})}async getAccounts(e){const r=this.connectors.find(i=>i.id===e.id),n=r==null?void 0:r.provider;if(!n||!r)throw new Error("Provider not found");if(e.id===oe.CONNECTOR_ID.AUTH){const i=r.provider;if(!i.user)return{accounts:[]};const{accounts:o,address:a}=i.user;return Promise.resolve({accounts:(o||[{address:a,type:"eoa"}]).map(c=>Oe.createAccount("eip155",c.address,c.type))})}return{accounts:(await n.request({method:"eth_requestAccounts"})).map(i=>Oe.createAccount("eip155",i,"eoa"))}}async disconnect(e){if(!e.provider||!e.providerType)throw new Error("Provider or providerType not provided");switch(e.providerType){case"WALLET_CONNECT":e.provider.session&&e.provider.disconnect();break;case"AUTH":await e.provider.disconnect();break;case"ANNOUNCED":case"EXTERNAL":await this.revokeProviderPermissions(e.provider);break;default:throw new Error("Unsupported provider type")}}async getBalance(e){const r=e.address,n=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!r)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(n&&n.chainNamespace==="eip155"){const s=`${n.caipNetworkId}:${r}`,i=this.balancePromises[s];if(i)return i;const o=ge.getNativeBalanceCacheForCaipAddress(s);if(o)return{balance:o.balance,symbol:o.symbol};const a=new v2(n.rpcUrls.default.http[0],{chainId:n.id,name:n.name});if(a)try{return this.balancePromises[s]=new Promise(async c=>{const u=await a.getBalance(r),l=aY(u);ge.updateNativeBalanceCache({caipAddress:s,balance:l,symbol:n.nativeCurrency.symbol,timestamp:Date.now()}),c({balance:l,symbol:n.nativeCurrency.symbol})}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"}}catch{return{balance:"0.00",symbol:"ETH"}}}return{balance:"0.00",symbol:"ETH"}}async getProfile(e){if(e.chainId===1){const r=new gu("mainnet"),n=await r.lookupAddress(e.address),s=await r.getAvatar(e.address);return{profileName:n||void 0,profileImage:s||void 0}}return{profileName:void 0,profileImage:void 0}}listenProviderEvents(e){const r=()=>{this.removeProviderListeners(e),this.emit("disconnect")},n=i=>{i.length>0?this.emit("accountChanged",{address:i[0]}):r()},s=i=>{const o=typeof i=="string"?xl.hexStringToNumber(i):Number(i);this.emit("switchNetwork",{chainId:o})};e.on("disconnect",r),e.on("accountsChanged",n),e.on("chainChanged",s),this.providerHandlers={disconnect:r,accountsChanged:n,chainChanged:s}}removeProviderListeners(e){this.providerHandlers&&(e.removeListener("disconnect",this.providerHandlers.disconnect),e.removeListener("accountsChanged",this.providerHandlers.accountsChanged),e.removeListener("chainChanged",this.providerHandlers.chainChanged),this.providerHandlers=null)}async switchNetwork(e){var i,o;const{caipNetwork:r,provider:n,providerType:s}=e;if(s==="AUTH"){await super.switchNetwork(e);return}try{await n.request({method:"wallet_switchEthereumChain",params:[{chainId:xl.numberToHexString(r.id)}]})}catch(a){if(a.code===Ca.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||a.code===Ca.ERROR_INVALID_CHAIN_ID||a.code===Ca.ERROR_CODE_DEFAULT||((o=(i=a==null?void 0:a.data)==null?void 0:i.originalError)==null?void 0:o.code)===Ca.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)await xl.addEthereumChain(n,r);else if(s==="ANNOUNCED"||s==="EXTERNAL"||s==="INJECTED")throw new Error("Chain is not supported")}}getWalletConnectProvider(){var e;return(e=this.connectors.find(r=>r.type==="WALLET_CONNECT"))==null?void 0:e.provider}async revokeProviderPermissions(e){try{(await e.request({method:"wallet_getPermissions"})).find(s=>s.parentCapability==="eth_accounts")&&await e.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]})}catch(r){console.info("Could not revoke permissions from wallet. Disconnecting...",r)}}async getCapabilities(e){var s,i;const r=tt.getProvider(oe.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");const n=(i=(s=r.session)==null?void 0:s.sessionProperties)==null?void 0:i.capabilities;if(n){const a=Go.parseWalletCapabilities(n)[e];if(a)return a}return await r.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){const r=tt.getProvider(oe.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){const r=tt.getProvider(oe.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_revokePermissions",params:[e]})}async walletGetAssets(e){const r=tt.getProvider(oe.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_getAssets",params:[e]})}}const Cee="KING VAULT",See="COLLECT. WIN. DRIVE.",fse="0.1.0",pse="87b00b5b-db10-431e-ab59-0751a12b6d3d",gse=`http://${window.location.hostname}:3000`,mse=`http://${window.location.hostname}:3555`,yse="info@kingsvault.io",wse="https://t.me/?",bse="https://x.com/kingsvault_io",Ese="https://www.instagram.com/kingsvault.io/",vse="https://discord.com/?",Iee={address:"0x099f1208fe3e0b6269d465509e2617e0fec677c7",decimals:18},_se="0x8e4f312e575b2ce6edcce8131dc6cd2ae81fc17a",Ase=[5,25,88,250],_2=1,D_=11155111,A2=56,C2=97,Nee=D_;function Cse(t){switch(t){case _2:return"https://eth-mainnet.g.alchemy.com/v2/mcIqerGa_U7GsHt5G4XSjW_99veOp25s";case D_:return"https://eth-sepolia.g.alchemy.com/v2/0b_jUlh0jR71rsMUohyAxgFDN9Nq8Gsh";case A2:return"https://bsc-dataseed1.binance.org/";case C2:return"https://data-seed-prebsc-1-s1.bnbchain.org:8545/";default:return}}function Sse(t){switch(t){case _2:return"wss://eth-mainnet.g.alchemy.com/v2/mcIqerGa_U7GsHt5G4XSjW_99veOp25s";case D_:return"wss://eth-sepolia.g.alchemy.com/v2/0b_jUlh0jR71rsMUohyAxgFDN9Nq8Gsh";case A2:return"https://bsc-dataseed1.binance.org/";case C2:return"https://data-seed-prebsc-1-s1.bnbchain.org:8546/";default:return}}const Tee="a8fc1fe57751d55066571e01c7a1b69a",S2=TJ,Oee=[S2],xee={name:Cee,description:See,url:"https://kingsvault.io/",icons:["https://avatars.githubusercontent.com/u/205055404"]},Ise=BJ({adapters:[new Aee],defaultNetwork:S2,networks:Oee,metadata:xee,privacyPolicyUrl:"https://kingsvault.io/#/privacy",termsConditionsUrl:"https://kingsvault.io/#/terms",projectId:Tee,themeMode:"light",features:{onramp:!0,swaps:!0,allWallets:!0,email:!1,socials:!1,connectMethodsOrder:["wallet"],legalCheckbox:!0,history:!0,analytics:!0},defaultAccountTypes:{eip155:"eoa"},enableWalletConnect:!0,enableNetworkSwitch:!0,debug:!0,tokens:{[`eip155:${Nee}`]:{address:Iee.address}}});var lb={exports:{}},hb={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gN;function Pee(){if(gN)return hb;gN=1;var t=rT();function e(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:e,n=t.useSyncExternalStore,s=t.useRef,i=t.useEffect,o=t.useMemo,a=t.useDebugValue;return hb.useSyncExternalStoreWithSelector=function(c,u,l,h,d){var f=s(null);if(f.current===null){var p={hasValue:!1,value:null};f.current=p}else p=f.current;f=o(function(){function y(N){if(!b){if(b=!0,v=N,N=h(N),d!==void 0&&p.hasValue){var A=p.value;if(d(A,N))return _=A}return _=N}if(A=_,r(v,N))return A;var x=h(N);return d!==void 0&&d(A,x)?(v=N,A):(v=N,_=x)}var b=!1,v,_,S=l===void 0?null:l;return[function(){return y(u())},S===null?void 0:function(){return y(S())}]},[u,l,h,d]);var g=n(c,f[0],f[1]);return i(function(){p.hasValue=!0,p.value=g},[g]),a(g),g},hb}var mN;function Ree(){return mN||(mN=1,lb.exports=Pee()),lb.exports}var kee=Ree();function Dee(t){t()}function Uee(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Dee(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=e={callback:r,next:null,prev:e};return s.prev?s.prev.next=s:t=s,function(){!n||t===null||(n=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}var yN={notify(){},get:()=>[]};function Bee(t,e){let r,n=yN,s=0,i=!1;function o(g){l();const y=n.subscribe(g);let b=!1;return()=>{b||(b=!0,y(),h())}}function a(){n.notify()}function c(){p.onStateChange&&p.onStateChange()}function u(){return i}function l(){s++,r||(r=t.subscribe(c),n=Uee())}function h(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=yN)}function d(){i||(i=!0,l())}function f(){i&&(i=!1,h())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:c,isSubscribed:u,trySubscribe:d,tryUnsubscribe:f,getListeners:()=>n};return p}var Lee=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$ee=Lee(),Mee=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Fee=Mee(),jee=()=>$ee||Fee?J.useLayoutEffect:J.useEffect,Hee=jee(),db=Symbol.for("react-redux-context"),fb=typeof globalThis<"u"?globalThis:{};function zee(){if(!J.createContext)return{};const t=fb[db]??(fb[db]=new Map);let e=t.get(J.createContext);return e||(e=J.createContext(null),t.set(J.createContext,e)),e}var Ba=zee();function qee(t){const{children:e,context:r,serverState:n,store:s}=t,i=J.useMemo(()=>{const c=Bee(s);return{store:s,subscription:c,getServerState:n?()=>n:void 0}},[s,n]),o=J.useMemo(()=>s.getState(),[s]);Hee(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const a=r||Ba;return J.createElement(a.Provider,{value:i},e)}var Nse=qee;function U_(t=Ba){return function(){return J.useContext(t)}}var I2=U_();function N2(t=Ba){const e=t===Ba?I2:U_(t),r=()=>{const{store:n}=e();return n};return Object.assign(r,{withTypes:()=>r}),r}var Wee=N2();function Vee(t=Ba){const e=t===Ba?Wee:N2(t),r=()=>e().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var Tse=Vee(),Gee=(t,e)=>t===e;function Kee(t=Ba){const e=t===Ba?I2:U_(t),r=(n,s={})=>{const{equalityFn:i=Gee}=typeof s=="function"?{equalityFn:s}:s,o=e(),{store:a,subscription:c,getServerState:u}=o;J.useRef(!0);const l=J.useCallback({[n.name](d){return n(d)}}[n.name],[n]),h=kee.useSyncExternalStoreWithSelector(c.addNestedSub,a.getState,u||a.getState,l,i);return J.useDebugValue(h),h};return Object.assign(r,{withTypes:()=>r}),r}var Ose=Kee();function Tr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Jee=typeof Symbol=="function"&&Symbol.observable||"@@observable",wN=Jee,pb=()=>Math.random().toString(36).substring(7).split("").join("."),Yee={INIT:`@@redux/INIT${pb()}`,REPLACE:`@@redux/REPLACE${pb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${pb()}`},Ey=Yee;function B_(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function T2(t,e,r){if(typeof t!="function")throw new Error(Tr(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Tr(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Tr(1));return r(T2)(t,e)}let n=t,s=e,i=new Map,o=i,a=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((y,b)=>{o.set(b,y)}))}function l(){if(c)throw new Error(Tr(3));return s}function h(y){if(typeof y!="function")throw new Error(Tr(4));if(c)throw new Error(Tr(5));let b=!0;u();const v=a++;return o.set(v,y),function(){if(b){if(c)throw new Error(Tr(6));b=!1,u(),o.delete(v),i=null}}}function d(y){if(!B_(y))throw new Error(Tr(7));if(typeof y.type>"u")throw new Error(Tr(8));if(typeof y.type!="string")throw new Error(Tr(17));if(c)throw new Error(Tr(9));try{c=!0,s=n(s,y)}finally{c=!1}return(i=o).forEach(v=>{v()}),y}function f(y){if(typeof y!="function")throw new Error(Tr(10));n=y,d({type:Ey.REPLACE})}function p(){const y=h;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(Tr(11));function v(){const S=b;S.next&&S.next(l())}return v(),{unsubscribe:y(v)}},[wN](){return this}}}return d({type:Ey.INIT}),{dispatch:d,subscribe:h,getState:l,replaceReducer:f,[wN]:p}}function Qee(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:Ey.INIT})>"u")throw new Error(Tr(12));if(typeof r(void 0,{type:Ey.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Tr(13))})}function Zee(t){const e=Object.keys(t),r={};for(let i=0;i<e.length;i++){const o=e[i];typeof t[o]=="function"&&(r[o]=t[o])}const n=Object.keys(r);let s;try{Qee(r)}catch(i){s=i}return function(o={},a){if(s)throw s;let c=!1;const u={};for(let l=0;l<n.length;l++){const h=n[l],d=r[h],f=o[h],p=d(f,a);if(typeof p>"u")throw a&&a.type,new Error(Tr(14));u[h]=p,c=c||p!==f}return c=c||n.length!==Object.keys(o).length,c?u:o}}function vy(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function Xee(...t){return e=>(r,n)=>{const s=e(r,n);let i=()=>{throw new Error(Tr(15))};const o={getState:s.getState,dispatch:(c,...u)=>i(c,...u)},a=t.map(c=>c(o));return i=vy(...a)(s.dispatch),{...s,dispatch:i}}}function ete(t){return B_(t)&&"type"in t&&typeof t.type=="string"}var O2=Symbol.for("immer-nothing"),bN=Symbol.for("immer-draftable"),Yn=Symbol.for("immer-state");function Ws(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var jh=Object.getPrototypeOf;function mu(t){return!!t&&!!t[Yn]}function Ro(t){var e;return t?x2(t)||Array.isArray(t)||!!t[bN]||!!((e=t.constructor)!=null&&e[bN])||Aw(t)||Cw(t):!1}var tte=Object.prototype.constructor.toString();function x2(t){if(!t||typeof t!="object")return!1;const e=jh(t);if(e===null)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===tte}function _y(t,e){_w(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function _w(t){const e=t[Yn];return e?e.type_:Array.isArray(t)?1:Aw(t)?2:Cw(t)?3:0}function cv(t,e){return _w(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function P2(t,e,r){const n=_w(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function rte(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Aw(t){return t instanceof Map}function Cw(t){return t instanceof Set}function rc(t){return t.copy_||t.base_}function uv(t,e){if(Aw(t))return new Map(t);if(Cw(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=x2(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[Yn];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],a=n[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(jh(t),n)}else{const n=jh(t);if(n!==null&&r)return{...t};const s=Object.create(n);return Object.assign(s,t)}}function L_(t,e=!1){return Sw(t)||mu(t)||!Ro(t)||(_w(t)>1&&(t.set=t.add=t.clear=t.delete=nte),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>L_(n,!0))),t}function nte(){Ws(2)}function Sw(t){return Object.isFrozen(t)}var ste={};function yu(t){const e=ste[t];return e||Ws(0,t),e}var Cp;function R2(){return Cp}function ite(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function EN(t,e){e&&(yu("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function lv(t){hv(t),t.drafts_.forEach(ote),t.drafts_=null}function hv(t){t===Cp&&(Cp=t.parent_)}function vN(t){return Cp=ite(Cp,t)}function ote(t){const e=t[Yn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function _N(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[Yn].modified_&&(lv(e),Ws(4)),Ro(t)&&(t=Ay(e,t),e.parent_||Cy(e,t)),e.patches_&&yu("Patches").generateReplacementPatches_(r[Yn].base_,t,e.patches_,e.inversePatches_)):t=Ay(e,r,[]),lv(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==O2?t:void 0}function Ay(t,e,r){if(Sw(e))return e;const n=e[Yn];if(!n)return _y(e,(s,i)=>AN(t,n,e,s,i,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Cy(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let i=s,o=!1;n.type_===3&&(i=new Set(s),s.clear(),o=!0),_y(i,(a,c)=>AN(t,n,s,a,c,r,o)),Cy(t,s,!1),r&&t.patches_&&yu("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function AN(t,e,r,n,s,i,o){if(mu(s)){const a=i&&e&&e.type_!==3&&!cv(e.assigned_,n)?i.concat(n):void 0,c=Ay(t,s,a);if(P2(r,n,c),mu(c))t.canAutoFreeze_=!1;else return}else o&&r.add(s);if(Ro(s)&&!Sw(s)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Ay(t,s),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Cy(t,s)}}function Cy(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&L_(e,r)}function ate(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:R2(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=$_;r&&(s=[n],i=Sp);const{revoke:o,proxy:a}=Proxy.revocable(s,i);return n.draft_=a,n.revoke_=o,a}var $_={get(t,e){if(e===Yn)return t;const r=rc(t);if(!cv(r,e))return cte(t,r,e);const n=r[e];return t.finalized_||!Ro(n)?n:n===gb(t.base_,e)?(mb(t),t.copy_[e]=fv(n,t)):n},has(t,e){return e in rc(t)},ownKeys(t){return Reflect.ownKeys(rc(t))},set(t,e,r){const n=k2(rc(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const s=gb(rc(t),e),i=s==null?void 0:s[Yn];if(i&&i.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(rte(r,s)&&(r!==void 0||cv(t.base_,e)))return!0;mb(t),dv(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return gb(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,mb(t),dv(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=rc(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Ws(11)},getPrototypeOf(t){return jh(t.base_)},setPrototypeOf(){Ws(12)}},Sp={};_y($_,(t,e)=>{Sp[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Sp.deleteProperty=function(t,e){return Sp.set.call(this,t,e,void 0)};Sp.set=function(t,e,r){return $_.set.call(this,t[0],e,r,t[0])};function gb(t,e){const r=t[Yn];return(r?rc(r):t)[e]}function cte(t,e,r){var s;const n=k2(e,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(t.draft_):void 0}function k2(t,e){if(!(e in t))return;let r=jh(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=jh(r)}}function dv(t){t.modified_||(t.modified_=!0,t.parent_&&dv(t.parent_))}function mb(t){t.copy_||(t.copy_=uv(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var ute=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const i=r;r=e;const o=this;return function(c=i,...u){return o.produce(c,l=>r.call(this,l,...u))}}typeof r!="function"&&Ws(6),n!==void 0&&typeof n!="function"&&Ws(7);let s;if(Ro(e)){const i=vN(this),o=fv(e,void 0);let a=!0;try{s=r(o),a=!1}finally{a?lv(i):hv(i)}return EN(i,n),_N(s,i)}else if(!e||typeof e!="object"){if(s=r(e),s===void 0&&(s=e),s===O2&&(s=void 0),this.autoFreeze_&&L_(s,!0),n){const i=[],o=[];yu("Patches").generateReplacementPatches_(e,s,i,o),n(i,o)}return s}else Ws(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,c=>e(c,...a));let n,s;return[this.produce(e,r,(o,a)=>{n=o,s=a}),n,s]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Ro(t)||Ws(8),mu(t)&&(t=lte(t));const e=vN(this),r=fv(t,void 0);return r[Yn].isManual_=!0,hv(e),r}finishDraft(t,e){const r=t&&t[Yn];(!r||!r.isManual_)&&Ws(9);const{scope_:n}=r;return EN(n,e),_N(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const s=e[r];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}r>-1&&(e=e.slice(r+1));const n=yu("Patches").applyPatches_;return mu(t)?n(t,e):this.produce(t,s=>n(s,e))}};function fv(t,e){const r=Aw(t)?yu("MapSet").proxyMap_(t,e):Cw(t)?yu("MapSet").proxySet_(t,e):ate(t,e);return(e?e.scope_:R2()).drafts_.push(r),r}function lte(t){return mu(t)||Ws(10,t),D2(t)}function D2(t){if(!Ro(t)||Sw(t))return t;const e=t[Yn];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=uv(t,e.scope_.immer_.useStrictShallowCopy_)}else r=uv(t,!0);return _y(r,(n,s)=>{P2(r,n,D2(s))}),e&&(e.finalized_=!1),r}var Qn=new ute,U2=Qn.produce;Qn.produceWithPatches.bind(Qn);Qn.setAutoFreeze.bind(Qn);Qn.setUseStrictShallowCopy.bind(Qn);Qn.applyPatches.bind(Qn);Qn.createDraft.bind(Qn);Qn.finishDraft.bind(Qn);function B2(t){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,t):s(i)}var hte=B2(),dte=B2,fte=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?vy:vy.apply(null,arguments)};function CN(t,e){function r(...n){if(e){let s=e(...n);if(!s)throw new Error(No(0));return{type:t,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>ete(n)&&n.type===t,r}var L2=class ef extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,ef.prototype)}static get[Symbol.species](){return ef}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new ef(...e[0].concat(this)):new ef(...e.concat(this))}};function SN(t){return Ro(t)?U2(t,()=>{}):t}function om(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function pte(t){return typeof t=="boolean"}var gte=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=e??{};let o=new L2;return r&&(pte(r)?o.push(hte):o.push(dte(r.extraArgument))),o},mte="RTK_autoBatch",IN=t=>e=>{setTimeout(e,t)},yte=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let s=!0,i=!1,o=!1;const a=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:IN(10):t.type==="callback"?t.queueNotification:IN(t.timeout),u=()=>{o=!1,i&&(i=!1,a.forEach(l=>l()))};return Object.assign({},n,{subscribe(l){const h=()=>s&&l(),d=n.subscribe(h);return a.add(l),()=>{d(),a.delete(l)}},dispatch(l){var h;try{return s=!((h=l==null?void 0:l.meta)!=null&&h[mte]),i=!s,i&&(o||(o=!0,c(u))),n.dispatch(l)}finally{s=!0}}})},wte=t=>function(r){const{autoBatch:n=!0}=r??{};let s=new L2(t);return n&&s.push(yte(typeof n=="object"?n:void 0)),s};function xse(t){const e=gte(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:o=void 0}=t||{};let a;if(typeof r=="function")a=r;else if(B_(r))a=Zee(r);else throw new Error(No(1));let c;typeof n=="function"?c=n(e):c=e();let u=vy;s&&(u=fte({trace:!1,...typeof s=="object"&&s}));const l=Xee(...c),h=wte(l);let d=typeof o=="function"?o(h):h();const f=u(...d);return T2(a,i,f)}function $2(t){const e={},r=[];let n;const s={addCase(i,o){const a=typeof i=="string"?i:i.type;if(!a)throw new Error(No(28));if(a in e)throw new Error(No(29));return e[a]=o,s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return n=i,s}};return t(s),[e,r,n]}function bte(t){return typeof t=="function"}function Ete(t,e){let[r,n,s]=$2(e),i;if(bte(t))i=()=>SN(t());else{const a=SN(t);i=()=>a}function o(a=i(),c){let u=[r[c.type],...n.filter(({matcher:l})=>l(c)).map(({reducer:l})=>l)];return u.filter(l=>!!l).length===0&&(u=[s]),u.reduce((l,h)=>{if(h)if(mu(l)){const f=h(l,c);return f===void 0?l:f}else{if(Ro(l))return U2(l,d=>h(d,c));{const d=h(l,c);if(d===void 0){if(l===null)return l;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return l},a)}return o.getInitialState=i,o}var vte=Symbol.for("rtk-slice-createasyncthunk");function _te(t,e){return`${t}/${e}`}function Ate({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[vte];return function(s){const{name:i,reducerPath:o=i}=s;if(!i)throw new Error(No(11));const a=(typeof s.reducers=="function"?s.reducers(Ite()):s.reducers)||{},c=Object.keys(a),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},l={addCase(S,N){const A=typeof S=="string"?S:S.type;if(!A)throw new Error(No(12));if(A in u.sliceCaseReducersByType)throw new Error(No(13));return u.sliceCaseReducersByType[A]=N,l},addMatcher(S,N){return u.sliceMatchers.push({matcher:S,reducer:N}),l},exposeAction(S,N){return u.actionCreators[S]=N,l},exposeCaseReducer(S,N){return u.sliceCaseReducersByName[S]=N,l}};c.forEach(S=>{const N=a[S],A={reducerName:S,type:_te(i,S),createNotation:typeof s.reducers=="function"};Tte(N)?xte(A,N,l,e):Nte(A,N,l)});function h(){const[S={},N=[],A=void 0]=typeof s.extraReducers=="function"?$2(s.extraReducers):[s.extraReducers],x={...S,...u.sliceCaseReducersByType};return Ete(s.initialState,P=>{for(let R in x)P.addCase(R,x[R]);for(let R of u.sliceMatchers)P.addMatcher(R.matcher,R.reducer);for(let R of N)P.addMatcher(R.matcher,R.reducer);A&&P.addDefaultCase(A)})}const d=S=>S,f=new Map,p=new WeakMap;let g;function y(S,N){return g||(g=h()),g(S,N)}function b(){return g||(g=h()),g.getInitialState()}function v(S,N=!1){function A(P){let R=P[S];return typeof R>"u"&&N&&(R=om(p,A,b)),R}function x(P=d){const R=om(f,N,()=>new WeakMap);return om(R,P,()=>{const B={};for(const[$,K]of Object.entries(s.selectors??{}))B[$]=Cte(K,P,()=>om(p,P,b),N);return B})}return{reducerPath:S,getSelectors:x,get selectors(){return x(A)},selectSlice:A}}const _={name:i,reducer:y,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:b,...v(o),injectInto(S,{reducerPath:N,...A}={}){const x=N??o;return S.inject({reducerPath:x,reducer:y},A),{..._,...v(x,!0)}}};return _}}function Cte(t,e,r,n){function s(i,...o){let a=e(i);return typeof a>"u"&&n&&(a=r()),t(a,...o)}return s.unwrapped=t,s}var Ste=Ate();function Ite(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function Nte({type:t,reducerName:e,createNotation:r},n,s){let i,o;if("reducer"in n){if(r&&!Ote(n))throw new Error(No(17));i=n.reducer,o=n.prepare}else i=n;s.addCase(t,i).exposeCaseReducer(e,i).exposeAction(e,o?CN(t,o):CN(t))}function Tte(t){return t._reducerDefinitionType==="asyncThunk"}function Ote(t){return t._reducerDefinitionType==="reducerWithPrepare"}function xte({type:t,reducerName:e},r,n,s){if(!s)throw new Error(No(18));const{payloadCreator:i,fulfilled:o,pending:a,rejected:c,settled:u,options:l}=r,h=s(t,i,l);n.exposeAction(e,h),o&&n.addCase(h.fulfilled,o),a&&n.addCase(h.pending,a),c&&n.addCase(h.rejected,c),u&&n.addMatcher(h.settled,u),n.exposeCaseReducer(e,{fulfilled:o||am,pending:a||am,rejected:c||am,settled:u||am})}function am(){}function No(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var ni=function(e){return"@@redux-saga/"+e},Pse=ni("CANCEL_PROMISE"),Rse=ni("CHANNEL_END"),Pte=ni("IO"),kse=ni("MATCH"),Rte=ni("MULTICAST"),kte=ni("SAGA_ACTION"),Dse=ni("SELF_CANCELLATION"),Use=ni("TASK"),Dte=ni("TASK_CANCEL"),Ute=ni("TERMINATE"),Bte=ni("LOCATION");function pv(){return pv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pv.apply(null,arguments)}var Lte=function(e){return e==null},yb=function(e){return e!=null},ko=function(e){return typeof e=="function"},M2=function(e){return typeof e=="string"},M_=Array.isArray,Bse=function(e){return e&&ko(e.then)},Lse=function(e){return e&&ko(e.next)&&ko(e.throw)},NN=function t(e){return e&&(M2(e)||$te(e)||ko(e)||M_(e)&&e.every(t))},F2=function(e){return e&&ko(e.take)&&ko(e.close)},$se=function(e){return ko(e)&&e.hasOwnProperty("toString")},$te=function(e){return!!e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype},Mte=function(e){return F2(e)&&e[Rte]},Fte=function(e){return function(){return e}},Mse=Fte(!0),jte=function(){},Fse=function(e){return e},jse=function(e,r){pv(e,r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(r).forEach(function(n){e[n]=r[n]})},Hse=function(e,r){var n;return(n=[]).concat.apply(n,r.map(e))};function zse(t,e){var r=t.indexOf(e);r>=0&&t.splice(r,1)}function qse(t){var e=!1;return function(){e||(e=!0,t())}}var Hte=function(e){throw e},zte=function(e){return{value:e,done:!0}};function Wse(t,e,r){e===void 0&&(e=Hte),r===void 0&&(r="iterator");var n={meta:{name:r},next:t,throw:e,return:zte,isSagaIterator:!0};return typeof Symbol<"u"&&(n[Symbol.iterator]=function(){return n}),n}function Vse(t,e){var r=e.sagaStack;console.error(t),console.error(r)}var qte=function(e){return Array.apply(null,new Array(e))},Gse=function(e){return function(r){return e(Object.defineProperty(r,kte,{value:!0}))}},Wte=function(e){return e===Ute},Vte=function(e){return e===Dte},Gte=function(e){return Wte(e)||Vte(e)};function Kse(t,e){var r=Object.keys(t),n=r.length,s=0,i,o=M_(t)?qte(n):{},a={};function c(){s===n&&(i=!0,e(o))}return r.forEach(function(u){var l=function(d,f){i||(f||Gte(d)?(e.cancel(),e(d,f)):(o[u]=d,s++,c()))};l.cancel=jte,a[u]=l}),e.cancel=function(){i||(i=!0,r.forEach(function(u){return a[u].cancel()}))},a}function Jse(t){return{name:t.name||"anonymous",location:Kte(t)}}function Kte(t){return t[Bte]}function Yse(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(n){return n}:e.length===1?e[0]:e.reduce(function(n,s){return function(){return n(s.apply(void 0,arguments))}})}var Jte="Channel's Buffer overflow!",Yte=1,Qte=3,j2=4;function Zte(t,e){t===void 0&&(t=10);var r=new Array(t),n=0,s=0,i=0,o=function(l){r[s]=l,s=(s+1)%t,n++},a=function(){if(n!=0){var l=r[i];return r[i]=null,n--,i=(i+1)%t,l}},c=function(){for(var l=[];n;)l.push(a());return l};return{isEmpty:function(){return n==0},put:function(l){if(n<t)o(l);else{var h;switch(e){case Yte:throw new Error(Jte);case Qte:r[s]=l,s=(s+1)%t,i=s;break;case j2:h=2*t,r=c(),n=r.length,s=r.length,i=0,r.length=h,t=h,o(l);break}}},take:a,flush:c}}var Qse=function(e){return Zte(e,j2)},wb="TAKE",Xte="PUT",ere="ALL",Zse="RACE",tre="CALL",Xse="CPS",rre="FORK",eie="JOIN",tie="CANCEL",rie="SELECT",nie="ACTION_CHANNEL",sie="CANCELLED",iie="FLUSH",oie="GET_CONTEXT",aie="SET_CONTEXT",Qc=function(e,r){var n;return n={},n[Pte]=!0,n.combinator=!1,n.type=e,n.payload=r,n};function nre(t,e){if(t===void 0&&(t="*"),NN(t))return yb(e)&&console.warn("take(pattern) takes one argument but two were provided. Consider passing an array for listening to several action types"),Qc(wb,{pattern:t});if(Mte(t)&&yb(e)&&NN(e))return Qc(wb,{channel:t,pattern:e});if(F2(t))return yb(e)&&console.warn("take(channel) takes one argument but two were provided. Second argument is ignored."),Qc(wb,{channel:t})}function cie(t,e){return Lte(e)&&(e=t,t=void 0),Qc(Xte,{channel:t,action:e})}function uie(t){var e=Qc(ere,t);return e.combinator=!0,e}function H2(t,e){var r=null,n;return ko(t)?n=t:(M_(t)?(r=t[0],n=t[1]):(r=t.context,n=t.fn),r&&M2(n)&&ko(r[n])&&(n=r[n])),{context:r,fn:n,args:e}}function sre(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Qc(tre,H2(t,r))}function ire(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Qc(rre,H2(t,r))}/**
 * @license
 * MIT License
 * 
 * Copyright (c) 2014-present, Lee Byron and other contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var wg="delete",_t=5,Vn=1<<_t,an=Vn-1,Ge={};function gv(){return{value:!1}}function _s(t){t&&(t.value=!0)}function F_(){}function Hh(t){return t.size===void 0&&(t.size=t.__iterate(z2)),t.size}function La(t,e){if(typeof e!="number"){var r=e>>>0;if(""+r!==e||r===4294967295)return NaN;e=r}return e<0?Hh(t)+e:e}function z2(){return!0}function Iw(t,e,r){return(t===0&&!W2(t)||r!==void 0&&t<=-r)&&(e===void 0||r!==void 0&&e>=r)}function bg(t,e){return q2(t,e,0)}function Nw(t,e){return q2(t,e,e)}function q2(t,e,r){return t===void 0?r:W2(t)?e===1/0?e:Math.max(0,e+t)|0:e===void 0||e===t?t:Math.min(e,t)|0}function W2(t){return t<0||t===0&&1/t===-1/0}var V2="@@__IMMUTABLE_ITERABLE__@@";function Zn(t){return!!(t&&t[V2])}var Sy="@@__IMMUTABLE_KEYED__@@";function Lt(t){return!!(t&&t[Sy])}var Iy="@@__IMMUTABLE_INDEXED__@@";function As(t){return!!(t&&t[Iy])}function j_(t){return Lt(t)||As(t)}var Vr=function(e){return Zn(e)?e:Sn(e)},Ns=function(t){function e(r){return Lt(r)?r:za(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Vr),Ou=function(t){function e(r){return As(r)?r:si(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Vr),ad=function(t){function e(r){return Zn(r)&&!j_(r)?r:hd(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Vr);Vr.Keyed=Ns;Vr.Indexed=Ou;Vr.Set=ad;var G2="@@__IMMUTABLE_SEQ__@@";function H_(t){return!!(t&&t[G2])}var K2="@@__IMMUTABLE_RECORD__@@";function cd(t){return!!(t&&t[K2])}function ji(t){return Zn(t)||cd(t)}var $a="@@__IMMUTABLE_ORDERED__@@";function Di(t){return!!(t&&t[$a])}var ud=0,Xn=1,es=2,mv=typeof Symbol=="function"&&Symbol.iterator,J2="@@iterator",Tw=mv||J2,Qe=function(e){this.next=e};Qe.prototype.toString=function(){return"[Iterator]"};Qe.KEYS=ud;Qe.VALUES=Xn;Qe.ENTRIES=es;Qe.prototype.inspect=Qe.prototype.toSource=function(){return this.toString()};Qe.prototype[Tw]=function(){return this};function $t(t,e,r,n){var s=t===ud?e:t===Xn?r:[e,r];return n?n.value=s:n={value:s,done:!1},n}function ln(){return{value:void 0,done:!0}}function Y2(t){return Array.isArray(t)?!0:!!Ow(t)}function TN(t){return t&&typeof t.next=="function"}function yv(t){var e=Ow(t);return e&&e.call(t)}function Ow(t){var e=t&&(mv&&t[mv]||t[J2]);if(typeof e=="function")return e}function ore(t){var e=Ow(t);return e&&e===t.entries}function are(t){var e=Ow(t);return e&&e===t.keys}var ld=Object.prototype.hasOwnProperty;function Q2(t){return Array.isArray(t)||typeof t=="string"?!0:t&&typeof t=="object"&&Number.isInteger(t.length)&&t.length>=0&&(t.length===0?Object.keys(t).length===1:t.hasOwnProperty(t.length-1))}var Sn=function(t){function e(r){return r==null?q_():ji(r)?r.toSeq():ure(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(n,s){var i=this._cache;if(i){for(var o=i.length,a=0;a!==o;){var c=i[s?o-++a:a++];if(n(c[1],c[0],this)===!1)break}return a}return this.__iterateUncached(n,s)},e.prototype.__iterator=function(n,s){var i=this._cache;if(i){var o=i.length,a=0;return new Qe(function(){if(a===o)return ln();var c=i[s?o-++a:a++];return $t(n,c[0],c[1])})}return this.__iteratorUncached(n,s)},e}(Vr),za=function(t){function e(r){return r==null?q_().toKeyedSeq():Zn(r)?Lt(r)?r.toSeq():r.fromEntrySeq():cd(r)?r.toSeq():W_(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(Sn),si=function(t){function e(r){return r==null?q_():Zn(r)?Lt(r)?r.entrySeq():r.toIndexedSeq():cd(r)?r.toSeq().entrySeq():Z2(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(Sn),hd=function(t){function e(r){return(Zn(r)&&!j_(r)?r:si(r)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(Sn);Sn.isSeq=H_;Sn.Keyed=za;Sn.Set=hd;Sn.Indexed=si;Sn.prototype[G2]=!0;var zh=function(t){function e(r){this._array=r,this.size=r.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,s){return this.has(n)?this._array[La(this,n)]:s},e.prototype.__iterate=function(n,s){for(var i=this._array,o=i.length,a=0;a!==o;){var c=s?o-++a:a++;if(n(i[c],c,this)===!1)break}return a},e.prototype.__iterator=function(n,s){var i=this._array,o=i.length,a=0;return new Qe(function(){if(a===o)return ln();var c=s?o-++a:a++;return $t(n,c,i[c])})},e}(si),z_=function(t){function e(r){var n=Object.keys(r).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r):[]);this._object=r,this._keys=n,this.size=n.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,s){return s!==void 0&&!this.has(n)?s:this._object[n]},e.prototype.has=function(n){return ld.call(this._object,n)},e.prototype.__iterate=function(n,s){for(var i=this._object,o=this._keys,a=o.length,c=0;c!==a;){var u=o[s?a-++c:c++];if(n(i[u],u,this)===!1)break}return c},e.prototype.__iterator=function(n,s){var i=this._object,o=this._keys,a=o.length,c=0;return new Qe(function(){if(c===a)return ln();var u=o[s?a-++c:c++];return $t(n,u,i[u])})},e}(za);z_.prototype[$a]=!0;var cre=function(t){function e(r){this._collection=r,this.size=r.length||r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(n,s){if(s)return this.cacheResult().__iterate(n,s);var i=this._collection,o=yv(i),a=0;if(TN(o))for(var c;!(c=o.next()).done&&n(c.value,a++,this)!==!1;);return a},e.prototype.__iteratorUncached=function(n,s){if(s)return this.cacheResult().__iterator(n,s);var i=this._collection,o=yv(i);if(!TN(o))return new Qe(ln);var a=0;return new Qe(function(){var c=o.next();return c.done?c:$t(n,a++,c.value)})},e}(si),ON;function q_(){return ON||(ON=new zh([]))}function W_(t){var e=V_(t);if(e)return e.fromEntrySeq();if(typeof t=="object")return new z_(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function Z2(t){var e=V_(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function ure(t){var e=V_(t);if(e)return ore(t)?e.fromEntrySeq():are(t)?e.toSetSeq():e;if(typeof t=="object")return new z_(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}function V_(t){return Q2(t)?new zh(t):Y2(t)?new cre(t):void 0}var X2="@@__IMMUTABLE_MAP__@@";function G_(t){return!!(t&&t[X2])}function ek(t){return G_(t)&&Di(t)}function xN(t){return!!(t&&typeof t.equals=="function"&&typeof t.hashCode=="function")}function Gn(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if(typeof t.valueOf=="function"&&typeof e.valueOf=="function"){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!!(xN(t)&&xN(e)&&t.equals(e))}var jd=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(e,r){e|=0,r|=0;var n=e&65535,s=r&65535;return n*s+((e>>>16)*s+n*(r>>>16)<<16>>>0)|0};function xw(t){return t>>>1&1073741824|t&3221225471}var lre=Object.prototype.valueOf;function zn(t){if(t==null)return PN(t);if(typeof t.hashCode=="function")return xw(t.hashCode(t));var e=mre(t);if(e==null)return PN(e);switch(typeof e){case"boolean":return e?1108378657:1108378656;case"number":return hre(e);case"string":return e.length>yre?dre(e):wv(e);case"object":case"function":return pre(e);case"symbol":return fre(e);default:if(typeof e.toString=="function")return wv(e.toString());throw new Error("Value type "+typeof e+" cannot be hashed.")}}function PN(t){return t===null?1108378658:1108378659}function hre(t){if(t!==t||t===1/0)return 0;var e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)t/=4294967295,e^=t;return xw(e)}function dre(t){var e=vb[t];return e===void 0&&(e=wv(t),Eb===wre&&(Eb=0,vb={}),Eb++,vb[t]=e),e}function wv(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return xw(e)}function fre(t){var e=DN[t];return e!==void 0||(e=tk(),DN[t]=e),e}function pre(t){var e;if(bv&&(e=Ev.get(t),e!==void 0)||(e=t[uc],e!==void 0)||!kN&&(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[uc],e!==void 0||(e=gre(t),e!==void 0)))return e;if(e=tk(),bv)Ev.set(t,e);else{if(RN!==void 0&&RN(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(kN)Object.defineProperty(t,uc,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[uc]=e;else if(t.nodeType!==void 0)t[uc]=e;else throw new Error("Unable to set a non-enumerable property on object.")}return e}var RN=Object.isExtensible,kN=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function gre(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function mre(t){return t.valueOf!==lre&&typeof t.valueOf=="function"?t.valueOf(t):t}function tk(){var t=++bb;return bb&1073741824&&(bb=0),t}var bv=typeof WeakMap=="function",Ev;bv&&(Ev=new WeakMap);var DN=Object.create(null),bb=0,uc="__immutablehash__";typeof Symbol=="function"&&(uc=Symbol(uc));var yre=16,wre=255,Eb=0,vb={},Pw=function(t){function e(r,n){this._iter=r,this._useKeys=n,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,s){return this._iter.get(n,s)},e.prototype.has=function(n){return this._iter.has(n)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var n=this,s=K_(this,!0);return this._useKeys||(s.valueSeq=function(){return n._iter.toSeq().reverse()}),s},e.prototype.map=function(n,s){var i=this,o=ok(this,n,s);return this._useKeys||(o.valueSeq=function(){return i._iter.toSeq().map(n,s)}),o},e.prototype.__iterate=function(n,s){var i=this;return this._iter.__iterate(function(o,a){return n(o,a,i)},s)},e.prototype.__iterator=function(n,s){return this._iter.__iterator(n,s)},e}(za);Pw.prototype[$a]=!0;var rk=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,s){var i=this,o=0;return s&&Hh(this),this._iter.__iterate(function(a){return n(a,s?i.size-++o:o++,i)},s)},e.prototype.__iterator=function(n,s){var i=this,o=this._iter.__iterator(Xn,s),a=0;return s&&Hh(this),new Qe(function(){var c=o.next();return c.done?c:$t(n,s?i.size-++a:a++,c.value,c)})},e}(si),nk=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,s){var i=this;return this._iter.__iterate(function(o){return n(o,o,i)},s)},e.prototype.__iterator=function(n,s){var i=this._iter.__iterator(Xn,s);return new Qe(function(){var o=i.next();return o.done?o:$t(n,o.value,o.value,o)})},e}(hd),sk=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(n,s){var i=this;return this._iter.__iterate(function(o){if(o){BN(o);var a=Zn(o);return n(a?o.get(1):o[1],a?o.get(0):o[0],i)}},s)},e.prototype.__iterator=function(n,s){var i=this._iter.__iterator(Xn,s);return new Qe(function(){for(;;){var o=i.next();if(o.done)return o;var a=o.value;if(a){BN(a);var c=Zn(a);return $t(n,c?a.get(0):a[0],c?a.get(1):a[1],o)}}})},e}(za);rk.prototype.cacheResult=Pw.prototype.cacheResult=nk.prototype.cacheResult=sk.prototype.cacheResult=Q_;function ik(t){var e=Hi(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var r=t.reverse.apply(this);return r.flip=function(){return t.reverse()},r},e.has=function(r){return t.includes(r)},e.includes=function(r){return t.has(r)},e.cacheResult=Q_,e.__iterateUncached=function(r,n){var s=this;return t.__iterate(function(i,o){return r(o,i,s)!==!1},n)},e.__iteratorUncached=function(r,n){if(r===es){var s=t.__iterator(r,n);return new Qe(function(){var i=s.next();if(!i.done){var o=i.value[0];i.value[0]=i.value[1],i.value[1]=o}return i})}return t.__iterator(r===Xn?ud:Xn,n)},e}function ok(t,e,r){var n=Hi(t);return n.size=t.size,n.has=function(s){return t.has(s)},n.get=function(s,i){var o=t.get(s,Ge);return o===Ge?i:e.call(r,o,s,t)},n.__iterateUncached=function(s,i){var o=this;return t.__iterate(function(a,c,u){return s(e.call(r,a,c,u),c,o)!==!1},i)},n.__iteratorUncached=function(s,i){var o=t.__iterator(es,i);return new Qe(function(){var a=o.next();if(a.done)return a;var c=a.value,u=c[0];return $t(s,u,e.call(r,c[1],u,t),a)})},n}function K_(t,e){var r=this,n=Hi(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var s=ik(t);return s.reverse=function(){return t.flip()},s}),n.get=function(s,i){return t.get(e?s:-1-s,i)},n.has=function(s){return t.has(e?s:-1-s)},n.includes=function(s){return t.includes(s)},n.cacheResult=Q_,n.__iterate=function(s,i){var o=this,a=0;return i&&Hh(t),t.__iterate(function(c,u){return s(c,e?u:i?o.size-++a:a++,o)},!i)},n.__iterator=function(s,i){var o=0;i&&Hh(t);var a=t.__iterator(es,!i);return new Qe(function(){var c=a.next();if(c.done)return c;var u=c.value;return $t(s,e?u[0]:i?r.size-++o:o++,u[1],c)})},n}function ak(t,e,r,n){var s=Hi(t);return n&&(s.has=function(i){var o=t.get(i,Ge);return o!==Ge&&!!e.call(r,o,i,t)},s.get=function(i,o){var a=t.get(i,Ge);return a!==Ge&&e.call(r,a,i,t)?a:o}),s.__iterateUncached=function(i,o){var a=this,c=0;return t.__iterate(function(u,l,h){if(e.call(r,u,l,h))return c++,i(u,n?l:c-1,a)},o),c},s.__iteratorUncached=function(i,o){var a=t.__iterator(es,o),c=0;return new Qe(function(){for(;;){var u=a.next();if(u.done)return u;var l=u.value,h=l[0],d=l[1];if(e.call(r,d,h,t))return $t(i,n?h:c++,d,u)}})},s}function bre(t,e,r){var n=fd().asMutable();return t.__iterate(function(s,i){n.update(e.call(r,s,i,t),0,function(o){return o+1})}),n.asImmutable()}function Ere(t,e,r){var n=Lt(t),s=(Di(t)?Uo():fd()).asMutable();t.__iterate(function(o,a){s.update(e.call(r,o,a,t),function(c){return c=c||[],c.push(n?[a,o]:o),c})});var i=Y_(t);return s.map(function(o){return vt(t,i(o))}).asImmutable()}function vre(t,e,r){var n=Lt(t),s=[[],[]];t.__iterate(function(o,a){s[e.call(r,o,a,t)?1:0].push(n?[a,o]:o)});var i=Y_(t);return s.map(function(o){return vt(t,i(o))})}function J_(t,e,r,n){var s=t.size;if(Iw(e,r,s))return t;if(typeof s>"u"&&(e<0||r<0))return J_(t.toSeq().cacheResult(),e,r,n);var i=bg(e,s),o=Nw(r,s),a=o-i,c;a===a&&(c=a<0?0:a);var u=Hi(t);return u.size=c===0?c:t.size&&c||void 0,!n&&H_(t)&&c>=0&&(u.get=function(l,h){return l=La(this,l),l>=0&&l<c?t.get(l+i,h):h}),u.__iterateUncached=function(l,h){var d=this;if(c===0)return 0;if(h)return this.cacheResult().__iterate(l,h);var f=0,p=!0,g=0;return t.__iterate(function(y,b){if(!(p&&(p=f++<i)))return g++,l(y,n?b:g-1,d)!==!1&&g!==c}),g},u.__iteratorUncached=function(l,h){if(c!==0&&h)return this.cacheResult().__iterator(l,h);if(c===0)return new Qe(ln);var d=t.__iterator(l,h),f=0,p=0;return new Qe(function(){for(;f++<i;)d.next();if(++p>c)return ln();var g=d.next();return n||l===Xn||g.done?g:l===ud?$t(l,p-1,void 0,g):$t(l,p-1,g.value[1],g)})},u}function _re(t,e,r){var n=Hi(t);return n.__iterateUncached=function(s,i){var o=this;if(i)return this.cacheResult().__iterate(s,i);var a=0;return t.__iterate(function(c,u,l){return e.call(r,c,u,l)&&++a&&s(c,u,o)}),a},n.__iteratorUncached=function(s,i){var o=this;if(i)return this.cacheResult().__iterator(s,i);var a=t.__iterator(es,i),c=!0;return new Qe(function(){if(!c)return ln();var u=a.next();if(u.done)return u;var l=u.value,h=l[0],d=l[1];return e.call(r,d,h,o)?s===es?u:$t(s,h,d,u):(c=!1,ln())})},n}function ck(t,e,r,n){var s=Hi(t);return s.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var c=!0,u=0;return t.__iterate(function(l,h,d){if(!(c&&(c=e.call(r,l,h,d))))return u++,i(l,n?h:u-1,a)}),u},s.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var c=t.__iterator(es,o),u=!0,l=0;return new Qe(function(){var h,d,f;do{if(h=c.next(),h.done)return n||i===Xn?h:i===ud?$t(i,l++,void 0,h):$t(i,l++,h.value[1],h);var p=h.value;d=p[0],f=p[1],u&&(u=e.call(r,f,d,a))}while(u);return i===es?h:$t(i,d,f,h)})},s}var Are=function(t){function e(r){this._wrappedIterables=r.flatMap(function(n){return n._wrappedIterables?n._wrappedIterables:[n]}),this.size=this._wrappedIterables.reduce(function(n,s){if(n!==void 0){var i=s.size;if(i!==void 0)return n+i}},0),this[Sy]=this._wrappedIterables[0][Sy],this[Iy]=this._wrappedIterables[0][Iy],this[$a]=this._wrappedIterables[0][$a]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(n,s){if(this._wrappedIterables.length!==0){if(s)return this.cacheResult().__iterate(n,s);for(var i=0,o=Lt(this),a=o?es:Xn,c=this._wrappedIterables[i].__iterator(a,s),u=!0,l=0;u;){for(var h=c.next();h.done;){if(i++,i===this._wrappedIterables.length)return l;c=this._wrappedIterables[i].__iterator(a,s),h=c.next()}var d=o?n(h.value[1],h.value[0],this):n(h.value,l,this);u=d!==!1,l++}return l}},e.prototype.__iteratorUncached=function(n,s){var i=this;if(this._wrappedIterables.length===0)return new Qe(ln);if(s)return this.cacheResult().__iterator(n,s);var o=0,a=this._wrappedIterables[o].__iterator(n,s);return new Qe(function(){for(var c=a.next();c.done;){if(o++,o===i._wrappedIterables.length)return c;a=i._wrappedIterables[o].__iterator(n,s),c=a.next()}return c})},e}(Sn);function Cre(t,e){var r=Lt(t),n=[t].concat(e).map(function(i){return Zn(i)?r&&(i=Ns(i)):i=r?W_(i):Z2(Array.isArray(i)?i:[i]),i}).filter(function(i){return i.size!==0});if(n.length===0)return t;if(n.length===1){var s=n[0];if(s===t||r&&Lt(s)||As(t)&&As(s))return s}return new Are(n)}function uk(t,e,r){var n=Hi(t);return n.__iterateUncached=function(s,i){if(i)return this.cacheResult().__iterate(s,i);var o=0,a=!1;function c(u,l){u.__iterate(function(h,d){return(!e||l<e)&&Zn(h)?c(h,l+1):(o++,s(h,r?d:o-1,n)===!1&&(a=!0)),!a},i)}return c(t,0),o},n.__iteratorUncached=function(s,i){if(i)return this.cacheResult().__iterator(s,i);var o=t.__iterator(s,i),a=[],c=0;return new Qe(function(){for(;o;){var u=o.next();if(u.done!==!1){o=a.pop();continue}var l=u.value;if(s===es&&(l=l[1]),(!e||a.length<e)&&Zn(l))a.push(o),o=l.__iterator(s,i);else return r?u:$t(s,c++,l,u)}return ln()})},n}function Sre(t,e,r){var n=Y_(t);return t.toSeq().map(function(s,i){return n(e.call(r,s,i,t))}).flatten(!0)}function Ire(t,e){var r=Hi(t);return r.size=t.size&&t.size*2-1,r.__iterateUncached=function(n,s){var i=this,o=0;return t.__iterate(function(a){return(!o||n(e,o++,i)!==!1)&&n(a,o++,i)!==!1},s),o},r.__iteratorUncached=function(n,s){var i=t.__iterator(Xn,s),o=0,a;return new Qe(function(){return(!a||o%2)&&(a=i.next(),a.done)?a:o%2?$t(n,o++,e):$t(n,o++,a.value,a)})},r}function qh(t,e,r){e||(e=lk);var n=Lt(t),s=0,i=t.toSeq().map(function(o,a){return[a,o,s++,r?r(o,a,t):o]}).valueSeq().toArray();return i.sort(function(o,a){return e(o[3],a[3])||o[2]-a[2]}).forEach(n?function(o,a){i[a].length=2}:function(o,a){i[a]=o[1]}),n?za(i):As(t)?si(i):hd(i)}function cm(t,e,r){if(e||(e=lk),r){var n=t.toSeq().map(function(s,i){return[s,r(s,i,t)]}).reduce(function(s,i){return UN(e,s[1],i[1])?i:s});return n&&n[0]}return t.reduce(function(s,i){return UN(e,s,i)?i:s})}function UN(t,e,r){var n=t(r,e);return n===0&&r!==e&&(r==null||r!==r)||n>0}function um(t,e,r,n){var s=Hi(t),i=new zh(r).map(function(o){return o.size});return s.size=n?i.max():i.min(),s.__iterate=function(o,a){for(var c=this.__iterator(Xn,a),u,l=0;!(u=c.next()).done&&o(u.value,l++,this)!==!1;);return l},s.__iteratorUncached=function(o,a){var c=r.map(function(h){return h=Vr(h),yv(a?h.reverse():h)}),u=0,l=!1;return new Qe(function(){var h;return l||(h=c.map(function(d){return d.next()}),l=n?h.every(function(d){return d.done}):h.some(function(d){return d.done})),l?ln():$t(o,u++,e.apply(null,h.map(function(d){return d.value})))})},s}function vt(t,e){return t===e?t:H_(t)?e:t.constructor(e)}function BN(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Y_(t){return Lt(t)?Ns:As(t)?Ou:ad}function Hi(t){return Object.create((Lt(t)?za:As(t)?si:hd).prototype)}function Q_(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Sn.prototype.cacheResult.call(this)}function lk(t,e){return t===void 0&&e===void 0?0:t===void 0?1:e===void 0?-1:t>e?1:t<e?-1:0}function Oi(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),s=0;s<r;s++)n[s]=t[s+e];return n}function Ef(t,e){if(!t)throw new Error(e)}function qn(t){Ef(t!==1/0,"Cannot perform this action with an infinite size.")}function hk(t){if(Q2(t)&&typeof t!="string")return t;if(Di(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}var Nre=Object.prototype.toString;function Tre(t){if(!t||typeof t!="object"||Nre.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e,n=Object.getPrototypeOf(e);n!==null;)r=n,n=Object.getPrototypeOf(r);return r===e}function Ma(t){return typeof t=="object"&&(ji(t)||Array.isArray(t)||Tre(t))}function Ip(t){try{return typeof t=="string"?JSON.stringify(t):String(t)}catch{return JSON.stringify(t)}}function Ore(t,e){return ji(t)?t.has(e):Ma(t)&&ld.call(t,e)}function dk(t,e,r){return ji(t)?t.get(e,r):Ore(t,e)?typeof t.get=="function"?t.get(e):t[e]:r}function Ny(t){if(Array.isArray(t))return Oi(t);var e={};for(var r in t)ld.call(t,r)&&(e[r]=t[r]);return e}function xre(t,e){if(!Ma(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(ji(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!ld.call(t,e))return t;var r=Ny(t);return Array.isArray(r)?r.splice(e,1):delete r[e],r}function Pre(t,e,r){if(!Ma(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(ji(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,r)}if(ld.call(t,e)&&r===t[e])return t;var n=Ny(t);return n[e]=r,n}function dd(t,e,r,n){n||(n=r,r=void 0);var s=fk(ji(t),t,hk(e),0,r,n);return s===Ge?r:s}function fk(t,e,r,n,s,i){var o=e===Ge;if(n===r.length){var a=o?s:e,c=i(a);return c===a?e:c}if(!o&&!Ma(e))throw new TypeError("Cannot update within non-data-structure value in path ["+Array.from(r).slice(0,n).map(Ip)+"]: "+e);var u=r[n];if(typeof u>"u")throw new TypeError("Index can not be undefined in updateIn(). This should not happen");var l=o?Ge:dk(e,u,Ge),h=fk(l===Ge?t:ji(l),l,r,n+1,s,i);return h===l?e:h===Ge?xre(e,u):Pre(o?t?xi():{}:e,u,h)}function tf(t,e,r){return dd(t,e,Ge,function(){return r})}function Z_(t,e){return tf(this,t,e)}function Rre(t,e){return dd(t,e,function(){return Ge})}function X_(t){return Rre(this,t)}function pk(t,e,r,n){return dd(t,[e],r,n)}function eA(t,e,r){return arguments.length===1?t(this):pk(this,t,e,r)}function tA(t,e,r){return dd(this,t,e,r)}function gk(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return yk(this,t)}function mk(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if(typeof t!="function")throw new TypeError("Invalid merger function: "+t);return yk(this,e,t)}function yk(t,e,r){for(var n=[],s=0;s<e.length;s++){var i=Ns(e[s]);i.size!==0&&n.push(i)}return n.length===0?t:t.toSeq().size===0&&!t.__ownerID&&n.length===1?t.constructor(n[0]):t.withMutations(function(o){for(var a=r?function(u,l){pk(o,l,Ge,function(h){return h===Ge?u:r(h,u,l)})}:function(u,l){o.set(l,u)},c=0;c<n.length;c++)n[c].forEach(a)})}function rA(t,e,r){return nA(t,e,kre(r))}function nA(t,e,r){if(!Ma(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(ji(t))return typeof r=="function"&&t.mergeWith?t.mergeWith.apply(t,[r].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var n=Array.isArray(t),s=t,i=n?Ou:Ns,o=n?function(c){s===t&&(s=Ny(s)),s.push(c)}:function(c,u){var l=ld.call(s,u),h=l&&r?r(s[u],c,u):c;(!l||h!==s[u])&&(s===t&&(s=Ny(s)),s[u]=h)},a=0;a<e.length;a++)i(e[a]).forEach(o);return s}function kre(t){function e(r,n,s){return Ma(r)&&Ma(n)&&Dre(r,n)?nA(r,[n],e):t?t(r,n,s):n}return e}function Dre(t,e){var r=Sn(t),n=Sn(e);return As(r)===As(n)&&Lt(r)===Lt(n)}function wk(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return rA(this,t)}function bk(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return rA(this,e,t)}function sA(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return dd(this,t,xi(),function(n){return nA(n,e)})}function iA(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return dd(this,t,xi(),function(n){return rA(n,e)})}function Eg(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function vg(){return this.__ownerID?this:this.__ensureOwner(new F_)}function _g(){return this.__ensureOwner()}function oA(){return this.__altered}var fd=function(t){function e(r){return r==null?xi():G_(r)&&!Di(r)?r:xi().withMutations(function(n){var s=t(r);qn(s.size),s.forEach(function(i,o){return n.set(o,i)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(n,s){return this._root?this._root.get(0,void 0,n,s):s},e.prototype.set=function(n,s){return MN(this,n,s)},e.prototype.remove=function(n){return MN(this,n,Ge)},e.prototype.deleteAll=function(n){var s=Vr(n);return s.size===0?this:this.withMutations(function(i){s.forEach(function(o){return i.remove(o)})})},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):xi()},e.prototype.sort=function(n){return Uo(qh(this,n))},e.prototype.sortBy=function(n,s){return Uo(qh(this,s,n))},e.prototype.map=function(n,s){var i=this;return this.withMutations(function(o){o.forEach(function(a,c){o.set(c,n.call(s,a,c,i))})})},e.prototype.__iterator=function(n,s){return new Ure(this,n,s)},e.prototype.__iterate=function(n,s){var i=this,o=0;return this._root&&this._root.iterate(function(a){return o++,n(a[1],a[0],i)},s),o},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?aA(this.size,this._root,n,this.__hash):this.size===0?xi():(this.__ownerID=n,this.__altered=!1,this)},e}(Ns);fd.isMap=G_;var Dt=fd.prototype;Dt[X2]=!0;Dt[wg]=Dt.remove;Dt.removeAll=Dt.deleteAll;Dt.setIn=Z_;Dt.removeIn=Dt.deleteIn=X_;Dt.update=eA;Dt.updateIn=tA;Dt.merge=Dt.concat=gk;Dt.mergeWith=mk;Dt.mergeDeep=wk;Dt.mergeDeepWith=bk;Dt.mergeIn=sA;Dt.mergeDeepIn=iA;Dt.withMutations=Eg;Dt.wasAltered=oA;Dt.asImmutable=_g;Dt["@@transducer/init"]=Dt.asMutable=vg;Dt["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])};Dt["@@transducer/result"]=function(t){return t.asImmutable()};var Np=function(e,r){this.ownerID=e,this.entries=r};Np.prototype.get=function(e,r,n,s){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(Gn(n,i[o][0]))return i[o][1];return s};Np.prototype.update=function(e,r,n,s,i,o,a){for(var c=i===Ge,u=this.entries,l=0,h=u.length;l<h&&!Gn(s,u[l][0]);l++);var d=l<h;if(d?u[l][1]===i:c)return this;if(_s(a),(c||!d)&&_s(o),!(c&&u.length===1)){if(!d&&!c&&u.length>=jre)return Bre(e,u,s,i);var f=e&&e===this.ownerID,p=f?u:Oi(u);return d?c?l===h-1?p.pop():p[l]=p.pop():p[l]=[s,i]:p.push([s,i]),f?(this.entries=p,this):new Np(e,p)}};var Wh=function(e,r,n){this.ownerID=e,this.bitmap=r,this.nodes=n};Wh.prototype.get=function(e,r,n,s){r===void 0&&(r=zn(n));var i=1<<((e===0?r:r>>>e)&an),o=this.bitmap;return(o&i)===0?s:this.nodes[Ek(o&i-1)].get(e+_t,r,n,s)};Wh.prototype.update=function(e,r,n,s,i,o,a){n===void 0&&(n=zn(s));var c=(r===0?n:n>>>r)&an,u=1<<c,l=this.bitmap,h=(l&u)!==0;if(!h&&i===Ge)return this;var d=Ek(l&u-1),f=this.nodes,p=h?f[d]:void 0,g=cA(p,e,r+_t,n,s,i,o,a);if(g===p)return this;if(!h&&g&&f.length>=Hre)return $re(e,f,l,c,g);if(h&&!g&&f.length===2&&FN(f[d^1]))return f[d^1];if(h&&g&&f.length===1&&FN(g))return g;var y=e&&e===this.ownerID,b=h?g?l:l^u:l|u,v=h?g?vk(f,d,g,y):Fre(f,d,y):Mre(f,d,g,y);return y?(this.bitmap=b,this.nodes=v,this):new Wh(e,b,v)};var Tp=function(e,r,n){this.ownerID=e,this.count=r,this.nodes=n};Tp.prototype.get=function(e,r,n,s){r===void 0&&(r=zn(n));var i=(e===0?r:r>>>e)&an,o=this.nodes[i];return o?o.get(e+_t,r,n,s):s};Tp.prototype.update=function(e,r,n,s,i,o,a){n===void 0&&(n=zn(s));var c=(r===0?n:n>>>r)&an,u=i===Ge,l=this.nodes,h=l[c];if(u&&!h)return this;var d=cA(h,e,r+_t,n,s,i,o,a);if(d===h)return this;var f=this.count;if(!h)f++;else if(!d&&(f--,f<zre))return Lre(e,l,f,c);var p=e&&e===this.ownerID,g=vk(l,c,d,p);return p?(this.count=f,this.nodes=g,this):new Tp(e,f,g)};var Vh=function(e,r,n){this.ownerID=e,this.keyHash=r,this.entries=n};Vh.prototype.get=function(e,r,n,s){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(Gn(n,i[o][0]))return i[o][1];return s};Vh.prototype.update=function(e,r,n,s,i,o,a){n===void 0&&(n=zn(s));var c=i===Ge;if(n!==this.keyHash)return c?this:(_s(a),_s(o),uA(this,e,r,n,[s,i]));for(var u=this.entries,l=0,h=u.length;l<h&&!Gn(s,u[l][0]);l++);var d=l<h;if(d?u[l][1]===i:c)return this;if(_s(a),(c||!d)&&_s(o),c&&h===2)return new Do(e,this.keyHash,u[l^1]);var f=e&&e===this.ownerID,p=f?u:Oi(u);return d?c?l===h-1?p.pop():p[l]=p.pop():p[l]=[s,i]:p.push([s,i]),f?(this.entries=p,this):new Vh(e,this.keyHash,p)};var Do=function(e,r,n){this.ownerID=e,this.keyHash=r,this.entry=n};Do.prototype.get=function(e,r,n,s){return Gn(n,this.entry[0])?this.entry[1]:s};Do.prototype.update=function(e,r,n,s,i,o,a){var c=i===Ge,u=Gn(s,this.entry[0]);if(u?i===this.entry[1]:c)return this;if(_s(a),c){_s(o);return}return u?e&&e===this.ownerID?(this.entry[1]=i,this):new Do(e,this.keyHash,[s,i]):(_s(o),uA(this,e,r,zn(s),[s,i]))};Np.prototype.iterate=Vh.prototype.iterate=function(t,e){for(var r=this.entries,n=0,s=r.length-1;n<=s;n++)if(t(r[e?s-n:n])===!1)return!1};Wh.prototype.iterate=Tp.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,s=r.length-1;n<=s;n++){var i=r[e?s-n:n];if(i&&i.iterate(t,e)===!1)return!1}};Do.prototype.iterate=function(t,e){return t(this.entry)};var Ure=function(t){function e(r,n,s){this._type=n,this._reverse=s,this._stack=r._root&&LN(r._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var n=this._type,s=this._stack;s;){var i=s.node,o=s.index++,a=void 0;if(i.entry){if(o===0)return _b(n,i.entry)}else if(i.entries){if(a=i.entries.length-1,o<=a)return _b(n,i.entries[this._reverse?a-o:o])}else if(a=i.nodes.length-1,o<=a){var c=i.nodes[this._reverse?a-o:o];if(c){if(c.entry)return _b(n,c.entry);s=this._stack=LN(c,s)}continue}s=this._stack=this._stack.__prev}return ln()},e}(Qe);function _b(t,e){return $t(t,e[0],e[1])}function LN(t,e){return{node:t,index:0,__prev:e}}function aA(t,e,r,n){var s=Object.create(Dt);return s.size=t,s._root=e,s.__ownerID=r,s.__hash=n,s.__altered=!1,s}var $N;function xi(){return $N||($N=aA(0))}function MN(t,e,r){var n,s;if(t._root){var i=gv(),o=gv();if(n=cA(t._root,t.__ownerID,0,void 0,e,r,i,o),!o.value)return t;s=t.size+(i.value?r===Ge?-1:1:0)}else{if(r===Ge)return t;s=1,n=new Np(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=s,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?aA(s,n):xi()}function cA(t,e,r,n,s,i,o,a){return t?t.update(e,r,n,s,i,o,a):i===Ge?t:(_s(a),_s(o),new Do(e,n,[s,i]))}function FN(t){return t.constructor===Do||t.constructor===Vh}function uA(t,e,r,n,s){if(t.keyHash===n)return new Vh(e,n,[t.entry,s]);var i=(r===0?t.keyHash:t.keyHash>>>r)&an,o=(r===0?n:n>>>r)&an,a,c=i===o?[uA(t,e,r+_t,n,s)]:(a=new Do(e,n,s),i<o?[t,a]:[a,t]);return new Wh(e,1<<i|1<<o,c)}function Bre(t,e,r,n){t||(t=new F_);for(var s=new Do(t,zn(r),[r,n]),i=0;i<e.length;i++){var o=e[i];s=s.update(t,0,void 0,o[0],o[1])}return s}function Lre(t,e,r,n){for(var s=0,i=0,o=new Array(r),a=0,c=1,u=e.length;a<u;a++,c<<=1){var l=e[a];l!==void 0&&a!==n&&(s|=c,o[i++]=l)}return new Wh(t,s,o)}function $re(t,e,r,n,s){for(var i=0,o=new Array(Vn),a=0;r!==0;a++,r>>>=1)o[a]=r&1?e[i++]:void 0;return o[n]=s,new Tp(t,i+1,o)}function Ek(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function vk(t,e,r,n){var s=n?t:Oi(t);return s[e]=r,s}function Mre(t,e,r,n){var s=t.length+1;if(n&&e+1===s)return t[e]=r,t;for(var i=new Array(s),o=0,a=0;a<s;a++)a===e?(i[a]=r,o=-1):i[a]=t[a+o];return i}function Fre(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var s=new Array(n),i=0,o=0;o<n;o++)o===e&&(i=1),s[o]=t[o+i];return s}var jre=Vn/4,Hre=Vn/2,zre=Vn/4,_k="@@__IMMUTABLE_LIST__@@";function Ak(t){return!!(t&&t[_k])}var Rw=function(t){function e(r){var n=Bm();if(r==null)return n;if(Ak(r))return r;var s=t(r),i=s.size;return i===0?n:(qn(i),i>0&&i<Vn?Op(0,i,_t,null,new Pa(s.toArray())):n.withMutations(function(o){o.setSize(i),s.forEach(function(a,c){return o.set(c,a)})}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(n,s){if(n=La(this,n),n>=0&&n<this.size){n+=this._origin;var i=Ck(this,n);return i&&i.array[n&an]}return s},e.prototype.set=function(n,s){return qre(this,n,s)},e.prototype.remove=function(n){return this.has(n)?n===0?this.shift():n===this.size-1?this.pop():this.splice(n,1):this},e.prototype.insert=function(n,s){return this.splice(n,0,s)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=_t,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):Bm()},e.prototype.push=function(){var n=arguments,s=this.size;return this.withMutations(function(i){Qo(i,0,s+n.length);for(var o=0;o<n.length;o++)i.set(s+o,n[o])})},e.prototype.pop=function(){return Qo(this,0,-1)},e.prototype.unshift=function(){var n=arguments;return this.withMutations(function(s){Qo(s,-n.length);for(var i=0;i<n.length;i++)s.set(i,n[i])})},e.prototype.shift=function(){return Qo(this,1)},e.prototype.shuffle=function(n){return n===void 0&&(n=Math.random),this.withMutations(function(s){for(var i=s.size,o,a;i;)o=Math.floor(n()*i--),a=s.get(o),s.set(o,s.get(i)),s.set(i,a)})},e.prototype.concat=function(){for(var n=arguments,s=[],i=0;i<arguments.length;i++){var o=n[i],a=t(typeof o!="string"&&Y2(o)?o:[o]);a.size!==0&&s.push(a)}return s.length===0?this:this.size===0&&!this.__ownerID&&s.length===1?this.constructor(s[0]):this.withMutations(function(c){s.forEach(function(u){return u.forEach(function(l){return c.push(l)})})})},e.prototype.setSize=function(n){return Qo(this,0,n)},e.prototype.map=function(n,s){var i=this;return this.withMutations(function(o){for(var a=0;a<i.size;a++)o.set(a,n.call(s,o.get(a),a,i))})},e.prototype.slice=function(n,s){var i=this.size;return Iw(n,s,i)?this:Qo(this,bg(n,i),Nw(s,i))},e.prototype.__iterator=function(n,s){var i=s?this.size:0,o=jN(this,s);return new Qe(function(){var a=o();return a===vf?ln():$t(n,s?--i:i++,a)})},e.prototype.__iterate=function(n,s){for(var i=s?this.size:0,o=jN(this,s),a;(a=o())!==vf&&n(a,s?--i:i++,this)!==!1;);return i},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?Op(this._origin,this._capacity,this._level,this._root,this._tail,n,this.__hash):this.size===0?Bm():(this.__ownerID=n,this.__altered=!1,this)},e}(Ou);Rw.isList=Ak;var or=Rw.prototype;or[_k]=!0;or[wg]=or.remove;or.merge=or.concat;or.setIn=Z_;or.deleteIn=or.removeIn=X_;or.update=eA;or.updateIn=tA;or.mergeIn=sA;or.mergeDeepIn=iA;or.withMutations=Eg;or.wasAltered=oA;or.asImmutable=_g;or["@@transducer/init"]=or.asMutable=vg;or["@@transducer/step"]=function(t,e){return t.push(e)};or["@@transducer/result"]=function(t){return t.asImmutable()};var Pa=function(e,r){this.array=e,this.ownerID=r};Pa.prototype.removeBefore=function(e,r,n){if((n&(1<<r+_t)-1)===0||this.array.length===0)return this;var s=n>>>r&an;if(s>=this.array.length)return new Pa([],e);var i=s===0,o;if(r>0){var a=this.array[s];if(o=a&&a.removeBefore(e,r-_t,n),o===a&&i)return this}if(i&&!o)return this;var c=Gh(this,e);if(!i)for(var u=0;u<s;u++)c.array[u]=void 0;return o&&(c.array[s]=o),c};Pa.prototype.removeAfter=function(e,r,n){if(n===(r?1<<r+_t:Vn)||this.array.length===0)return this;var s=n-1>>>r&an;if(s>=this.array.length)return this;var i;if(r>0){var o=this.array[s];if(i=o&&o.removeAfter(e,r-_t,n),i===o&&s===this.array.length-1)return this}var a=Gh(this,e);return a.array.splice(s+1),i&&(a.array[s]=i),a};var vf={};function jN(t,e){var r=t._origin,n=t._capacity,s=xp(n),i=t._tail;return o(t._root,t._level,0);function o(u,l,h){return l===0?a(u,h):c(u,l,h)}function a(u,l){var h=l===s?i&&i.array:u&&u.array,d=l>r?0:r-l,f=n-l;return f>Vn&&(f=Vn),function(){if(d===f)return vf;var p=e?--f:d++;return h&&h[p]}}function c(u,l,h){var d,f=u&&u.array,p=h>r?0:r-h>>l,g=(n-h>>l)+1;return g>Vn&&(g=Vn),function(){for(;;){if(d){var y=d();if(y!==vf)return y;d=null}if(p===g)return vf;var b=e?--g:p++;d=o(f&&f[b],l-_t,h+(b<<l))}}}}function Op(t,e,r,n,s,i,o){var a=Object.create(or);return a.size=e-t,a._origin=t,a._capacity=e,a._level=r,a._root=n,a._tail=s,a.__ownerID=i,a.__hash=o,a.__altered=!1,a}function Bm(){return Op(0,0,_t)}function qre(t,e,r){if(e=La(t,e),e!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(o){e<0?Qo(o,e).set(0,r):Qo(o,0,e+1).set(e,r)});e+=t._origin;var n=t._tail,s=t._root,i=gv();return e>=xp(t._capacity)?n=vv(n,t.__ownerID,0,e,r,i):s=vv(s,t.__ownerID,t._level,e,r,i),i.value?t.__ownerID?(t._root=s,t._tail=n,t.__hash=void 0,t.__altered=!0,t):Op(t._origin,t._capacity,t._level,s,n):t}function vv(t,e,r,n,s,i){var o=n>>>r&an,a=t&&o<t.array.length;if(!a&&s===void 0)return t;var c;if(r>0){var u=t&&t.array[o],l=vv(u,e,r-_t,n,s,i);return l===u?t:(c=Gh(t,e),c.array[o]=l,c)}return a&&t.array[o]===s?t:(i&&_s(i),c=Gh(t,e),s===void 0&&o===c.array.length-1?c.array.pop():c.array[o]=s,c)}function Gh(t,e){return e&&t&&e===t.ownerID?t:new Pa(t?t.array.slice():[],e)}function Ck(t,e){if(e>=xp(t._capacity))return t._tail;if(e<1<<t._level+_t){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&an],n-=_t;return r}}function Qo(t,e,r){e!==void 0&&(e|=0),r!==void 0&&(r|=0);var n=t.__ownerID||new F_,s=t._origin,i=t._capacity,o=s+e,a=r===void 0?i:r<0?i+r:s+r;if(o===s&&a===i)return t;if(o>=a)return t.clear();for(var c=t._level,u=t._root,l=0;o+l<0;)u=new Pa(u&&u.array.length?[void 0,u]:[],n),c+=_t,l+=1<<c;l&&(o+=l,s+=l,a+=l,i+=l);for(var h=xp(i),d=xp(a);d>=1<<c+_t;)u=new Pa(u&&u.array.length?[u]:[],n),c+=_t;var f=t._tail,p=d<h?Ck(t,a-1):d>h?new Pa([],n):f;if(f&&d>h&&o<i&&f.array.length){u=Gh(u,n);for(var g=u,y=c;y>_t;y-=_t){var b=h>>>y&an;g=g.array[b]=Gh(g.array[b],n)}g.array[h>>>_t&an]=f}if(a<i&&(p=p&&p.removeAfter(n,0,a)),o>=d)o-=d,a-=d,c=_t,u=null,p=p&&p.removeBefore(n,0,o);else if(o>s||d<h){for(l=0;u;){var v=o>>>c&an;if(v!==d>>>c&an)break;v&&(l+=(1<<c)*v),c-=_t,u=u.array[v]}u&&o>s&&(u=u.removeBefore(n,c,o-l)),u&&d<h&&(u=u.removeAfter(n,c,d-l)),l&&(o-=l,a-=l)}return t.__ownerID?(t.size=a-o,t._origin=o,t._capacity=a,t._level=c,t._root=u,t._tail=p,t.__hash=void 0,t.__altered=!0,t):Op(o,a,c,u,p)}function xp(t){return t<Vn?0:t-1>>>_t<<_t}var Uo=function(t){function e(r){return r==null?rf():ek(r)?r:rf().withMutations(function(n){var s=Ns(r);qn(s.size),s.forEach(function(i,o){return n.set(o,i)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(n,s){var i=this._map.get(n);return i!==void 0?this._list.get(i)[1]:s},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):rf()},e.prototype.set=function(n,s){return zN(this,n,s)},e.prototype.remove=function(n){return zN(this,n,Ge)},e.prototype.__iterate=function(n,s){var i=this;return this._list.__iterate(function(o){return o&&n(o[1],o[0],i)},s)},e.prototype.__iterator=function(n,s){return this._list.fromEntrySeq().__iterator(n,s)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var s=this._map.__ensureOwner(n),i=this._list.__ensureOwner(n);return n?lA(s,i,n,this.__hash):this.size===0?rf():(this.__ownerID=n,this.__altered=!1,this._map=s,this._list=i,this)},e}(fd);Uo.isOrderedMap=ek;Uo.prototype[$a]=!0;Uo.prototype[wg]=Uo.prototype.remove;function lA(t,e,r,n){var s=Object.create(Uo.prototype);return s.size=t?t.size:0,s._map=t,s._list=e,s.__ownerID=r,s.__hash=n,s.__altered=!1,s}var HN;function rf(){return HN||(HN=lA(xi(),Bm()))}function zN(t,e,r){var n=t._map,s=t._list,i=n.get(e),o=i!==void 0,a,c;if(r===Ge){if(!o)return t;s.size>=Vn&&s.size>=n.size*2?(c=s.filter(function(u,l){return u!==void 0&&i!==l}),a=c.toKeyedSeq().map(function(u){return u[0]}).flip().toMap(),t.__ownerID&&(a.__ownerID=c.__ownerID=t.__ownerID)):(a=n.remove(e),c=i===s.size-1?s.pop():s.set(i,void 0))}else if(o){if(r===s.get(i)[1])return t;a=n,c=s.set(i,[e,r])}else a=n.set(e,s.size),c=s.set(s.size,[e,r]);return t.__ownerID?(t.size=a.size,t._map=a,t._list=c,t.__hash=void 0,t.__altered=!0,t):lA(a,c)}var Sk="@@__IMMUTABLE_STACK__@@";function _v(t){return!!(t&&t[Sk])}var hA=function(t){function e(r){return r==null?lm():_v(r)?r:lm().pushAll(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(n,s){var i=this._head;for(n=La(this,n);i&&n--;)i=i.next;return i?i.value:s},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var n=arguments;if(arguments.length===0)return this;for(var s=this.size+arguments.length,i=this._head,o=arguments.length-1;o>=0;o--)i={value:n[o],next:i};return this.__ownerID?(this.size=s,this._head=i,this.__hash=void 0,this.__altered=!0,this):nf(s,i)},e.prototype.pushAll=function(n){if(n=t(n),n.size===0)return this;if(this.size===0&&_v(n))return n;qn(n.size);var s=this.size,i=this._head;return n.__iterate(function(o){s++,i={value:o,next:i}},!0),this.__ownerID?(this.size=s,this._head=i,this.__hash=void 0,this.__altered=!0,this):nf(s,i)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):lm()},e.prototype.slice=function(n,s){if(Iw(n,s,this.size))return this;var i=bg(n,this.size),o=Nw(s,this.size);if(o!==this.size)return t.prototype.slice.call(this,n,s);for(var a=this.size-i,c=this._head;i--;)c=c.next;return this.__ownerID?(this.size=a,this._head=c,this.__hash=void 0,this.__altered=!0,this):nf(a,c)},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?nf(this.size,this._head,n,this.__hash):this.size===0?lm():(this.__ownerID=n,this.__altered=!1,this)},e.prototype.__iterate=function(n,s){var i=this;if(s)return new zh(this.toArray()).__iterate(function(c,u){return n(c,u,i)},s);for(var o=0,a=this._head;a&&n(a.value,o++,this)!==!1;)a=a.next;return o},e.prototype.__iterator=function(n,s){if(s)return new zh(this.toArray()).__iterator(n,s);var i=0,o=this._head;return new Qe(function(){if(o){var a=o.value;return o=o.next,$t(n,i++,a)}return ln()})},e}(Ou);hA.isStack=_v;var hn=hA.prototype;hn[Sk]=!0;hn.shift=hn.pop;hn.unshift=hn.push;hn.unshiftAll=hn.pushAll;hn.withMutations=Eg;hn.wasAltered=oA;hn.asImmutable=_g;hn["@@transducer/init"]=hn.asMutable=vg;hn["@@transducer/step"]=function(t,e){return t.unshift(e)};hn["@@transducer/result"]=function(t){return t.asImmutable()};function nf(t,e,r,n){var s=Object.create(hn);return s.size=t,s._head=e,s.__ownerID=r,s.__hash=n,s.__altered=!1,s}var qN;function lm(){return qN||(qN=nf(0))}var Ik="@@__IMMUTABLE_SET__@@";function dA(t){return!!(t&&t[Ik])}function Nk(t){return dA(t)&&Di(t)}function Tk(t,e){if(t===e)return!0;if(!Zn(e)||t.size!==void 0&&e.size!==void 0&&t.size!==e.size||t.__hash!==void 0&&e.__hash!==void 0&&t.__hash!==e.__hash||Lt(t)!==Lt(e)||As(t)!==As(e)||Di(t)!==Di(e))return!1;if(t.size===0&&e.size===0)return!0;var r=!j_(t);if(Di(t)){var n=t.entries();return e.every(function(c,u){var l=n.next().value;return l&&Gn(l[1],c)&&(r||Gn(l[0],u))})&&n.next().done}var s=!1;if(t.size===void 0)if(e.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else{s=!0;var i=t;t=e,e=i}var o=!0,a=e.__iterate(function(c,u){if(r?!t.has(c):s?!Gn(c,t.get(u,Ge)):!Gn(t.get(u,Ge),c))return o=!1,!1});return o&&t.size===a}function xu(t,e){var r=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function Ty(t){if(!t||typeof t!="object")return t;if(!Zn(t)){if(!Ma(t))return t;t=Sn(t)}if(Lt(t)){var e={};return t.__iterate(function(n,s){e[s]=Ty(n)}),e}var r=[];return t.__iterate(function(n){r.push(Ty(n))}),r}var kw=function(t){function e(r){return r==null?sf():dA(r)&&!Di(r)?r:sf().withMutations(function(n){var s=t(r);qn(s.size),s.forEach(function(i){return n.add(i)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(Ns(n).keySeq())},e.intersect=function(n){return n=Vr(n).toArray(),n.length?Ur.intersect.apply(e(n.pop()),n):sf()},e.union=function(n){return n=Vr(n).toArray(),n.length?Ur.union.apply(e(n.pop()),n):sf()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(n){return this._map.has(n)},e.prototype.add=function(n){return hm(this,this._map.set(n,n))},e.prototype.remove=function(n){return hm(this,this._map.remove(n))},e.prototype.clear=function(){return hm(this,this._map.clear())},e.prototype.map=function(n,s){var i=this,o=!1,a=hm(this,this._map.mapEntries(function(c){var u=c[1],l=n.call(s,u,u,i);return l!==u&&(o=!0),[l,l]},s));return o?a:this},e.prototype.union=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return n=n.filter(function(i){return i.size!==0}),n.length===0?this:this.size===0&&!this.__ownerID&&n.length===1?this.constructor(n[0]):this.withMutations(function(i){for(var o=0;o<n.length;o++)typeof n[o]=="string"?i.add(n[o]):t(n[o]).forEach(function(a){return i.add(a)})})},e.prototype.intersect=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];if(n.length===0)return this;n=n.map(function(o){return t(o)});var i=[];return this.forEach(function(o){n.every(function(a){return a.includes(o)})||i.push(o)}),this.withMutations(function(o){i.forEach(function(a){o.remove(a)})})},e.prototype.subtract=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];if(n.length===0)return this;n=n.map(function(o){return t(o)});var i=[];return this.forEach(function(o){n.some(function(a){return a.includes(o)})&&i.push(o)}),this.withMutations(function(o){i.forEach(function(a){o.remove(a)})})},e.prototype.sort=function(n){return Pp(qh(this,n))},e.prototype.sortBy=function(n,s){return Pp(qh(this,s,n))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(n,s){var i=this;return this._map.__iterate(function(o){return n(o,o,i)},s)},e.prototype.__iterator=function(n,s){return this._map.__iterator(n,s)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var s=this._map.__ensureOwner(n);return n?this.__make(s,n):this.size===0?this.__empty():(this.__ownerID=n,this._map=s,this)},e}(ad);kw.isSet=dA;var Ur=kw.prototype;Ur[Ik]=!0;Ur[wg]=Ur.remove;Ur.merge=Ur.concat=Ur.union;Ur.withMutations=Eg;Ur.asImmutable=_g;Ur["@@transducer/init"]=Ur.asMutable=vg;Ur["@@transducer/step"]=function(t,e){return t.add(e)};Ur["@@transducer/result"]=function(t){return t.asImmutable()};Ur.__empty=sf;Ur.__make=Ok;function hm(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:e.size===0?t.__empty():t.__make(e)}function Ok(t,e){var r=Object.create(Ur);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var WN;function sf(){return WN||(WN=Ok(xi()))}var Wre=function(t){function e(r,n,s){if(s===void 0&&(s=1),!(this instanceof e))return new e(r,n,s);if(Ef(s!==0,"Cannot step a Range by 0"),Ef(r!==void 0,"You must define a start value when using Range"),Ef(n!==void 0,"You must define an end value when using Range"),s=Math.abs(s),n<r&&(s=-s),this._start=r,this._end=n,this._step=s,this.size=Math.max(0,Math.ceil((n-r)/s-1)+1),this.size===0){if(Ab)return Ab;Ab=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},e.prototype.get=function(n,s){return this.has(n)?this._start+La(this,n)*this._step:s},e.prototype.includes=function(n){var s=(n-this._start)/this._step;return s>=0&&s<this.size&&s===Math.floor(s)},e.prototype.slice=function(n,s){return Iw(n,s,this.size)?this:(n=bg(n,this.size),s=Nw(s,this.size),s<=n?new e(0,0):new e(this.get(n,this._end),this.get(s,this._end),this._step))},e.prototype.indexOf=function(n){var s=n-this._start;if(s%this._step===0){var i=s/this._step;if(i>=0&&i<this.size)return i}return-1},e.prototype.lastIndexOf=function(n){return this.indexOf(n)},e.prototype.__iterate=function(n,s){for(var i=this.size,o=this._step,a=s?this._start+(i-1)*o:this._start,c=0;c!==i&&n(a,s?i-++c:c++,this)!==!1;)a+=s?-o:o;return c},e.prototype.__iterator=function(n,s){var i=this.size,o=this._step,a=s?this._start+(i-1)*o:this._start,c=0;return new Qe(function(){if(c===i)return ln();var u=a;return a+=s?-o:o,$t(n,s?i-++c:c++,u)})},e.prototype.equals=function(n){return n instanceof e?this._start===n._start&&this._end===n._end&&this._step===n._step:Tk(this,n)},e}(si),Ab;function xk(t,e,r){for(var n=hk(e),s=0;s!==n.length;)if(t=dk(t,n[s++],Ge),t===Ge)return r;return t}function Pk(t,e){return xk(this,t,e)}function Vre(t,e){return xk(t,e,Ge)!==Ge}function Gre(t){return Vre(this,t)}function Rk(){qn(this.size);var t={};return this.__iterate(function(e,r){t[r]=e}),t}Vr.Iterator=Qe;xu(Vr,{toArray:function(){qn(this.size);var e=new Array(this.size||0),r=Lt(this),n=0;return this.__iterate(function(s,i){e[n++]=r?[i,s]:s}),e},toIndexedSeq:function(){return new rk(this)},toJS:function(){return Ty(this)},toKeyedSeq:function(){return new Pw(this,!0)},toMap:function(){return fd(this.toKeyedSeq())},toObject:Rk,toOrderedMap:function(){return Uo(this.toKeyedSeq())},toOrderedSet:function(){return Pp(Lt(this)?this.valueSeq():this)},toSet:function(){return kw(Lt(this)?this.valueSeq():this)},toSetSeq:function(){return new nk(this)},toSeq:function(){return As(this)?this.toIndexedSeq():Lt(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return hA(Lt(this)?this.valueSeq():this)},toList:function(){return Rw(Lt(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,r){return this.size===0?e+r:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+r},concat:function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return vt(this,Cre(this,e))},includes:function(e){return this.some(function(r){return Gn(r,e)})},entries:function(){return this.__iterator(es)},every:function(e,r){qn(this.size);var n=!0;return this.__iterate(function(s,i,o){if(!e.call(r,s,i,o))return n=!1,!1}),n},filter:function(e,r){return vt(this,ak(this,e,r,!0))},partition:function(e,r){return vre(this,e,r)},find:function(e,r,n){var s=this.findEntry(e,r);return s?s[1]:n},forEach:function(e,r){return qn(this.size),this.__iterate(r?e.bind(r):e)},join:function(e){qn(this.size),e=e!==void 0?""+e:",";var r="",n=!0;return this.__iterate(function(s){n?n=!1:r+=e,r+=s!=null?s.toString():""}),r},keys:function(){return this.__iterator(ud)},map:function(e,r){return vt(this,ok(this,e,r))},reduce:function(e,r,n){return VN(this,e,r,n,arguments.length<2,!1)},reduceRight:function(e,r,n){return VN(this,e,r,n,arguments.length<2,!0)},reverse:function(){return vt(this,K_(this,!0))},slice:function(e,r){return vt(this,J_(this,e,r,!0))},some:function(e,r){qn(this.size);var n=!1;return this.__iterate(function(s,i,o){if(e.call(r,s,i,o))return n=!0,!1}),n},sort:function(e){return vt(this,qh(this,e))},values:function(){return this.__iterator(Xn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(e,r){return Hh(e?this.toSeq().filter(e,r):this)},countBy:function(e,r){return bre(this,e,r)},equals:function(e){return Tk(this,e)},entrySeq:function(){var e=this;if(e._cache)return new zh(e._cache);var r=e.toSeq().map(Jre).toIndexedSeq();return r.fromEntrySeq=function(){return e.toSeq()},r},filterNot:function(e,r){return this.filter(Cb(e),r)},findEntry:function(e,r,n){var s=n;return this.__iterate(function(i,o,a){if(e.call(r,i,o,a))return s=[o,i],!1}),s},findKey:function(e,r){var n=this.findEntry(e,r);return n&&n[0]},findLast:function(e,r,n){return this.toKeyedSeq().reverse().find(e,r,n)},findLastEntry:function(e,r,n){return this.toKeyedSeq().reverse().findEntry(e,r,n)},findLastKey:function(e,r){return this.toKeyedSeq().reverse().findKey(e,r)},first:function(e){return this.find(z2,null,e)},flatMap:function(e,r){return vt(this,Sre(this,e,r))},flatten:function(e){return vt(this,uk(this,e,!0))},fromEntrySeq:function(){return new sk(this)},get:function(e,r){return this.find(function(n,s){return Gn(s,e)},void 0,r)},getIn:Pk,groupBy:function(e,r){return Ere(this,e,r)},has:function(e){return this.get(e,Ge)!==Ge},hasIn:Gre,isSubset:function(e){return e=typeof e.includes=="function"?e:Vr(e),this.every(function(r){return e.includes(r)})},isSuperset:function(e){return e=typeof e.isSubset=="function"?e:Vr(e),e.isSubset(this)},keyOf:function(e){return this.findKey(function(r){return Gn(r,e)})},keySeq:function(){return this.toSeq().map(Kre).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return cm(this,e)},maxBy:function(e,r){return cm(this,r,e)},min:function(e){return cm(this,e?GN(e):JN)},minBy:function(e,r){return cm(this,r?GN(r):JN,e)},rest:function(){return this.slice(1)},skip:function(e){return e===0?this:this.slice(Math.max(0,e))},skipLast:function(e){return e===0?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,r){return vt(this,ck(this,e,r,!0))},skipUntil:function(e,r){return this.skipWhile(Cb(e),r)},sortBy:function(e,r){return vt(this,qh(this,r,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,r){return vt(this,_re(this,e,r))},takeUntil:function(e,r){return this.takeWhile(Cb(e),r)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Yre(this))}});var Jr=Vr.prototype;Jr[V2]=!0;Jr[Tw]=Jr.values;Jr.toJSON=Jr.toArray;Jr.__toStringMapper=Ip;Jr.inspect=Jr.toSource=function(){return this.toString()};Jr.chain=Jr.flatMap;Jr.contains=Jr.includes;xu(Ns,{flip:function(){return vt(this,ik(this))},mapEntries:function(e,r){var n=this,s=0;return vt(this,this.toSeq().map(function(i,o){return e.call(r,[o,i],s++,n)}).fromEntrySeq())},mapKeys:function(e,r){var n=this;return vt(this,this.toSeq().flip().map(function(s,i){return e.call(r,s,i,n)}).flip())}});var Ag=Ns.prototype;Ag[Sy]=!0;Ag[Tw]=Jr.entries;Ag.toJSON=Rk;Ag.__toStringMapper=function(t,e){return Ip(e)+": "+Ip(t)};xu(Ou,{toKeyedSeq:function(){return new Pw(this,!1)},filter:function(e,r){return vt(this,ak(this,e,r,!1))},findIndex:function(e,r){var n=this.findEntry(e,r);return n?n[0]:-1},indexOf:function(e){var r=this.keyOf(e);return r===void 0?-1:r},lastIndexOf:function(e){var r=this.lastKeyOf(e);return r===void 0?-1:r},reverse:function(){return vt(this,K_(this,!1))},slice:function(e,r){return vt(this,J_(this,e,r,!1))},splice:function(e,r){var n=arguments.length;if(r=Math.max(r||0,0),n===0||n===2&&!r)return this;e=bg(e,e<0?this.count():this.size);var s=this.slice(0,e);return vt(this,n===1?s:s.concat(Oi(arguments,2),this.slice(e+r)))},findLastIndex:function(e,r){var n=this.findLastEntry(e,r);return n?n[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return vt(this,uk(this,e,!1))},get:function(e,r){return e=La(this,e),e<0||this.size===1/0||this.size!==void 0&&e>this.size?r:this.find(function(n,s){return s===e},void 0,r)},has:function(e){return e=La(this,e),e>=0&&(this.size!==void 0?this.size===1/0||e<this.size:this.indexOf(e)!==-1)},interpose:function(e){return vt(this,Ire(this,e))},interleave:function(){var e=[this].concat(Oi(arguments)),r=um(this.toSeq(),si.of,e),n=r.flatten(!0);return r.size&&(n.size=r.size*e.length),vt(this,n)},keySeq:function(){return Wre(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,r){return vt(this,ck(this,e,r,!1))},zip:function(){var e=[this].concat(Oi(arguments));return vt(this,um(this,KN,e))},zipAll:function(){var e=[this].concat(Oi(arguments));return vt(this,um(this,KN,e,!0))},zipWith:function(e){var r=Oi(arguments);return r[0]=this,vt(this,um(this,e,r))}});var pd=Ou.prototype;pd[Iy]=!0;pd[$a]=!0;xu(ad,{get:function(e,r){return this.has(e)?e:r},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var Kh=ad.prototype;Kh.has=Jr.includes;Kh.contains=Kh.includes;Kh.keys=Kh.values;xu(za,Ag);xu(si,pd);xu(hd,Kh);function VN(t,e,r,n,s,i){return qn(t.size),t.__iterate(function(o,a,c){s?(s=!1,r=o):r=e.call(n,r,o,a,c)},i),r}function Kre(t,e){return e}function Jre(t,e){return[e,t]}function Cb(t){return function(){return!t.apply(this,arguments)}}function GN(t){return function(){return-t.apply(this,arguments)}}function KN(){return Oi(arguments)}function JN(t,e){return t<e?1:t>e?-1:0}function Yre(t){if(t.size===1/0)return 0;var e=Di(t),r=Lt(t),n=e?1:0;return t.__iterate(r?e?function(s,i){n=31*n+YN(zn(s),zn(i))|0}:function(s,i){n=n+YN(zn(s),zn(i))|0}:e?function(s){n=31*n+zn(s)|0}:function(s){n=n+zn(s)|0}),Qre(t.size,n)}function Qre(t,e){return e=jd(e,3432918353),e=jd(e<<15|e>>>-15,461845907),e=jd(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=jd(e^e>>>16,2246822507),e=jd(e^e>>>13,3266489909),e=xw(e^e>>>16),e}function YN(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var Pp=function(t){function e(r){return r==null?Av():Nk(r)?r:Av().withMutations(function(n){var s=ad(r);qn(s.size),s.forEach(function(i){return n.add(i)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(Ns(n).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(kw);Pp.isOrderedSet=Nk;var Pu=Pp.prototype;Pu[$a]=!0;Pu.zip=pd.zip;Pu.zipWith=pd.zipWith;Pu.zipAll=pd.zipAll;Pu.__empty=Av;Pu.__make=kk;function kk(t,e){var r=Object.create(Pu);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var QN;function Av(){return QN||(QN=kk(rf()))}function Zre(t){if(cd(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(ji(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(t===null||typeof t!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var _r=function(e,r){var n;Zre(e);var s=function(a){var c=this;if(a instanceof s)return a;if(!(this instanceof s))return new s(a);if(!n){n=!0;var u=Object.keys(e),l=i._indices={};i._name=r,i._keys=u,i._defaultValues=e;for(var h=0;h<u.length;h++){var d=u[h];l[d]=h,i[d]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+pA(this)+' with property "'+d+'" since that property name is part of the Record API.'):Xre(i,d)}}return this.__ownerID=void 0,this._values=Rw().withMutations(function(f){f.setSize(c._keys.length),Ns(a).forEach(function(p,g){f.set(c._indices[g],p===c._defaultValues[g]?void 0:p)})}),this},i=s.prototype=Object.create(Pt);return i.constructor=s,r&&(s.displayName=r),s};_r.prototype.toString=function(){for(var e=pA(this)+" { ",r=this._keys,n,s=0,i=r.length;s!==i;s++)n=r[s],e+=(s?", ":"")+n+": "+Ip(this.get(n));return e+" }"};_r.prototype.equals=function(e){return this===e||cd(e)&&Jh(this).equals(Jh(e))};_r.prototype.hashCode=function(){return Jh(this).hashCode()};_r.prototype.has=function(e){return this._indices.hasOwnProperty(e)};_r.prototype.get=function(e,r){if(!this.has(e))return r;var n=this._indices[e],s=this._values.get(n);return s===void 0?this._defaultValues[e]:s};_r.prototype.set=function(e,r){if(this.has(e)){var n=this._values.set(this._indices[e],r===this._defaultValues[e]?void 0:r);if(n!==this._values&&!this.__ownerID)return fA(this,n)}return this};_r.prototype.remove=function(e){return this.set(e)};_r.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:fA(this,e)};_r.prototype.wasAltered=function(){return this._values.wasAltered()};_r.prototype.toSeq=function(){return Jh(this)};_r.prototype.toJS=function(){return Ty(this)};_r.prototype.entries=function(){return this.__iterator(es)};_r.prototype.__iterator=function(e,r){return Jh(this).__iterator(e,r)};_r.prototype.__iterate=function(e,r){return Jh(this).__iterate(e,r)};_r.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var r=this._values.__ensureOwner(e);return e?fA(this,r,e):(this.__ownerID=e,this._values=r,this)};_r.isRecord=cd;_r.getDescriptiveName=pA;var Pt=_r.prototype;Pt[K2]=!0;Pt[wg]=Pt.remove;Pt.deleteIn=Pt.removeIn=X_;Pt.getIn=Pk;Pt.hasIn=Jr.hasIn;Pt.merge=gk;Pt.mergeWith=mk;Pt.mergeIn=sA;Pt.mergeDeep=wk;Pt.mergeDeepWith=bk;Pt.mergeDeepIn=iA;Pt.setIn=Z_;Pt.update=eA;Pt.updateIn=tA;Pt.withMutations=Eg;Pt.asMutable=vg;Pt.asImmutable=_g;Pt[Tw]=Pt.entries;Pt.toJSON=Pt.toObject=Jr.toObject;Pt.inspect=Pt.toSource=function(){return this.toString()};function fA(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._values=e,n.__ownerID=r,n}function pA(t){return t.constructor.displayName||t.constructor.name||"Record"}function Jh(t){return W_(t._keys.map(function(e){return[e,t.get(e)]}))}function Xre(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(r){Ef(this.__ownerID,"Cannot set on an immutable record."),this.set(e,r)}})}catch{}}const lie=(t,e,...r)=>ire(function*(){for(;;){const n=yield nre(t);yield sre(e,...r.concat(n))}}),ene=t=>JSON.parse(JSON.stringify(t)),ZN={initialised:!1,isExpand:!1},Dk=Ste({name:"sidebar",initialState:ZN,reducers:{clear:(t,e)=>{const r=ene(ZN),n=Object.keys(r);for(let s in n)t=tf(t,[n[s]],r[n[s]]);return t},init:(t,e)=>(t=tf(t,["initialised"],!0),t=tf(t,["isExpand"],!1),t),expand:(t,e)=>(t=tf(t,["isExpand"],e.payload),t)}}),{clear:hie,init:die,expand:fie}=Dk.actions,pie=Dk.reducer;export{Fse as $,ere as A,jte as B,tre as C,Wse as D,zse as E,rre as F,oie as G,Qse as H,Pte as I,eie as J,Rse as K,Mse as L,Use as M,Kte as N,Hse as O,Xte as P,kte as Q,Zse as R,rie as S,wb as T,Rte as U,kse as V,qse as W,Yse as X,Vse as Y,Gse as Z,pv as _,Xse as a,IT as a$,Gte as a0,Zee as a1,pie as a2,cie as a3,lie as a4,hie as a5,sre as a6,ire as a7,uie as a8,fse as a9,_l as aA,Sm as aB,Qt as aC,ut as aD,nse as aE,De as aF,zr as aG,Eo as aH,qr as aI,ose as aJ,oe as aK,cP as aL,we as aM,Oe as aN,U as aO,At as aP,sr as aQ,xr as aR,ase as aS,Hn as aT,xt as aU,ie as aV,Et as aW,uJ as aX,ge as aY,Ng as aZ,PS as a_,Cee as aa,_e as ab,vr as ac,Tl as ad,_se as ae,Nee as af,Iee as ag,Eee as ah,Sse as ai,v2 as aj,Cse as ak,xse as al,mse as am,gse as an,pse as ao,Nse as ap,sne as aq,Tse as ar,Ose as as,nne as at,ND as au,xk as av,fie as aw,ese as ax,hse as ay,S2 as az,tie as b,Te as b0,Ht as b1,af as b2,xS as b3,In as b4,Gr as b5,ine as b6,xe as b7,one as b8,tV as b9,zs as ba,cse as bb,sse as bc,AE as bd,Am as be,ff as bf,yr as bg,ise as bh,bP as bi,CE as bj,Ph as bk,Ase as bl,wT as bm,vse as bn,Ese as bo,bse as bp,wse as bq,yse as br,die as bs,lse as bt,Eu as bu,Ste as bv,tf as bw,ene as bx,use as by,nie as c,sie as d,iie as e,aie as f,M_ as g,Kse as h,qte as i,Lse as j,Jse as k,Dse as l,jse as m,yb as n,Ute as o,Bse as p,$se as q,ko as r,M2 as s,$te as t,Lte as u,Pse as v,Ise as w,Vte as x,Dte as y,Wte as z};
