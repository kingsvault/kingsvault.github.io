const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/assets/js/embedded-wallet-Bfb46yvi.js","static/assets/js/Themecontext-DjRST77u.js","static/assets/js/index-BApHCh9l.js","static/assets/css/index-DbLTyTLw.css","static/assets/js/if-defined-GXzUJKWu.js","static/assets/js/index-DqCdUHmv.js","static/assets/js/index-UDF1Ogxz.js","static/assets/js/index-DsYfVlBr.js","static/assets/js/index-DHloXGXz.js","static/assets/js/index-BGcPDEhl.js","static/assets/js/index-CYp-_-BQ.js","static/assets/js/index-B3__XS7b.js","static/assets/js/index-_NHfPwWE.js","static/assets/js/chunk-GNGMS2XR-BzF1ZQsC.js","static/assets/js/email-dgjw1gFh.js","static/assets/js/index-ChsM3868.js","static/assets/js/socials-DWPLKhLQ.js","static/assets/js/index-nX6NpVYV.js","static/assets/js/index-B8npSr1i.js","static/assets/js/index-DbYOSn8U.js","static/assets/js/index-C34h-oFJ.js","static/assets/js/swaps-CkFccUmD.js","static/assets/js/index-Bb54o0EQ.js","static/assets/js/index-D8yrNsWG.js","static/assets/js/index-DLssE7uj.js","static/assets/js/send-BWjFFDZg.js","static/assets/js/index-CK78noTe.js","static/assets/js/receive-diVF7SDE.js","static/assets/js/index-DKS5gcjR.js","static/assets/js/onramp-BCYP-SLc.js","static/assets/js/index-D-dNtjti.js","static/assets/js/index-DCfvpN7o.js","static/assets/js/transactions-CJW27HZc.js","static/assets/js/index-B32w6PcB.js","static/assets/js/index-ZTKTKg8t.js","static/assets/js/index-B65HV3oq.js","static/assets/js/w3m-modal--eGg_j5e.js","static/assets/js/index-xiDmKrHC.js"])))=>i.map(i=>d[i]);
var HS=Object.defineProperty;var F0=r=>{throw TypeError(r)};var VS=(r,e,t)=>e in r?HS(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var H=(r,e,t)=>VS(r,typeof e!="symbol"?e+"":e,t),Pg=(r,e,t)=>e.has(r)||F0("Cannot "+t);var E=(r,e,t)=>(Pg(r,e,"read from private field"),t?t.call(r):e.get(r)),V=(r,e,t)=>e.has(r)?F0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),D=(r,e,t,n)=>(Pg(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),J=(r,e,t)=>(Pg(r,e,"access private method"),t);var Eu=(r,e,t,n)=>({set _(s){D(r,e,s,t)},get _(){return E(r,e,n)}});import{r as st,R as It,g as qS,p as Zr,a as zS,_ as kn,j as Yn,L as Km}from"./index-BApHCh9l.js";import{g as dh,e as ws,B as nr,O as Nd,b as vu,a as L1,c as WS,N as Pw,o as j0,s as H0,d as V0,f as GS,h as KS,i as JS,T as QS}from"./Themecontext-DjRST77u.js";import{H as YS}from"./chunk-GNGMS2XR-BzF1ZQsC.js";function B1(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(t=B1(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function Sa(){for(var r,e,t=0,n="",s=arguments.length;t<s;t++)(r=arguments[t])&&(e=B1(r))&&(n&&(n+=" "),n+=e);return n}function ZS(r){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}ZS(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Sd=r=>typeof r=="number"&&!isNaN(r),Da=r=>typeof r=="string",xi=r=>typeof r=="function",XS=r=>Da(r)||Sd(r),Jm=r=>Da(r)||xi(r)?r:null,eT=(r,e)=>r===!1||Sd(r)&&r>0?r:e,Qm=r=>st.isValidElement(r)||Da(r)||xi(r)||Sd(r);function tT(r,e,t=300){let{scrollHeight:n,style:s}=r;requestAnimationFrame(()=>{s.minHeight="initial",s.height=n+"px",s.transition=`all ${t}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,t)})})}function rT({enter:r,exit:e,appendPosition:t=!1,collapse:n=!0,collapseDuration:s=300}){return function({children:i,position:o,preventExitTransition:a,done:c,nodeRef:l,isIn:u,playToast:h}){let d=t?`${r}--${o}`:r,f=t?`${e}--${o}`:e,p=st.useRef(0);return st.useLayoutEffect(()=>{let g=l.current,y=d.split(" "),C=w=>{w.target===l.current&&(h(),g.removeEventListener("animationend",C),g.removeEventListener("animationcancel",C),p.current===0&&w.type!=="animationcancel"&&g.classList.remove(...y))};g.classList.add(...y),g.addEventListener("animationend",C),g.addEventListener("animationcancel",C)},[]),st.useEffect(()=>{let g=l.current,y=()=>{g.removeEventListener("animationend",y),n?tT(g,c,s):c()};u||(a?y():(p.current=1,g.className+=` ${f}`,g.addEventListener("animationend",y)))},[u]),It.createElement(It.Fragment,null,i)}}function q0(r,e){return{content:M1(r.content,r.props),containerId:r.props.containerId,id:r.props.toastId,theme:r.props.theme,type:r.props.type,data:r.props.data||{},isLoading:r.props.isLoading,icon:r.props.icon,reason:r.removalReason,status:e}}function M1(r,e,t=!1){return st.isValidElement(r)&&!Da(r.type)?st.cloneElement(r,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):xi(r)?r({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):r}function nT({closeToast:r,theme:e,ariaLabel:t="close"}){return It.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:n=>{n.stopPropagation(),r(!0)},"aria-label":t},It.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},It.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function sT({delay:r,isRunning:e,closeToast:t,type:n="default",hide:s,className:i,controlledProgress:o,progress:a,rtl:c,isIn:l,theme:u}){let h=s||o&&a===0,d={animationDuration:`${r}ms`,animationPlayState:e?"running":"paused"};o&&(d.transform=`scaleX(${a})`);let f=Sa("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":c}),p=xi(i)?i({rtl:c,type:n,defaultClassName:f}):Sa(f,i),g={[o&&a>=1?"onTransitionEnd":"onAnimationEnd"]:o&&a<1?null:()=>{l&&t()}};return It.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":h},It.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${n}`}),It.createElement("div",{role:"progressbar","aria-hidden":h?"true":"false","aria-label":"notification timer",className:p,style:d,...g}))}var iT=1,$1=()=>`${iT++}`;function oT(r,e,t){let n=1,s=0,i=[],o=[],a=e,c=new Map,l=new Set,u=w=>(l.add(w),()=>l.delete(w)),h=()=>{o=Array.from(c.values()),l.forEach(w=>w())},d=({containerId:w,toastId:I,updateId:U})=>{let M=w?w!==r:r!==1,B=c.has(I)&&U==null;return M||B},f=(w,I)=>{c.forEach(U=>{var M;(I==null||I===U.props.toastId)&&((M=U.toggle)==null||M.call(U,w))})},p=w=>{var I,U;(U=(I=w.props)==null?void 0:I.onClose)==null||U.call(I,w.removalReason),w.isActive=!1},g=w=>{if(w==null)c.forEach(p);else{let I=c.get(w);I&&p(I)}h()},y=()=>{s-=i.length,i=[]},C=w=>{var I,U;let{toastId:M,updateId:B}=w.props,L=B==null;w.staleId&&c.delete(w.staleId),w.isActive=!0,c.set(M,w),h(),t(q0(w,L?"added":"updated")),L&&((U=(I=w.props).onOpen)==null||U.call(I))};return{id:r,props:a,observe:u,toggle:f,removeToast:g,toasts:c,clearQueue:y,buildToast:(w,I)=>{if(d(I))return;let{toastId:U,updateId:M,data:B,staleId:L,delay:m}=I,b=M==null;b&&s++;let N={...a,style:a.toastStyle,key:n++,...Object.fromEntries(Object.entries(I).filter(([S,k])=>k!=null)),toastId:U,updateId:M,data:B,isIn:!1,className:Jm(I.className||a.toastClassName),progressClassName:Jm(I.progressClassName||a.progressClassName),autoClose:I.isLoading?!1:eT(I.autoClose,a.autoClose),closeToast(S){c.get(U).removalReason=S,g(U)},deleteToast(){let S=c.get(U);if(S!=null){if(t(q0(S,"removed")),c.delete(U),s--,s<0&&(s=0),i.length>0){C(i.shift());return}h()}}};N.closeButton=a.closeButton,I.closeButton===!1||Qm(I.closeButton)?N.closeButton=I.closeButton:I.closeButton===!0&&(N.closeButton=Qm(a.closeButton)?a.closeButton:!0);let _={content:w,props:N,staleId:L};a.limit&&a.limit>0&&s>a.limit&&b?i.push(_):Sd(m)?setTimeout(()=>{C(_)},m):C(_)},setProps(w){a=w},setToggle:(w,I)=>{let U=c.get(w);U&&(U.toggle=I)},isToastActive:w=>{var I;return(I=c.get(w))==null?void 0:I.isActive},getSnapshot:()=>o}}var Rr=new Map,fh=[],Ym=new Set,aT=r=>Ym.forEach(e=>e(r)),F1=()=>Rr.size>0;function cT(){fh.forEach(r=>H1(r.content,r.options)),fh=[]}var lT=(r,{containerId:e})=>{var t;return(t=Rr.get(e||1))==null?void 0:t.toasts.get(r)};function j1(r,e){var t;if(e)return!!((t=Rr.get(e))!=null&&t.isToastActive(r));let n=!1;return Rr.forEach(s=>{s.isToastActive(r)&&(n=!0)}),n}function uT(r){if(!F1()){fh=fh.filter(e=>r!=null&&e.options.toastId!==r);return}if(r==null||XS(r))Rr.forEach(e=>{e.removeToast(r)});else if(r&&("containerId"in r||"id"in r)){let e=Rr.get(r.containerId);e?e.removeToast(r.id):Rr.forEach(t=>{t.removeToast(r.id)})}}var hT=(r={})=>{Rr.forEach(e=>{e.props.limit&&(!r.containerId||e.id===r.containerId)&&e.clearQueue()})};function H1(r,e){Qm(r)&&(F1()||fh.push({content:r,options:e}),Rr.forEach(t=>{t.buildToast(r,e)}))}function dT(r){var e;(e=Rr.get(r.containerId||1))==null||e.setToggle(r.id,r.fn)}function V1(r,e){Rr.forEach(t=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===t.id)&&t.toggle(r,e==null?void 0:e.id)})}function fT(r){let e=r.containerId||1;return{subscribe(t){let n=oT(e,r,aT);Rr.set(e,n);let s=n.observe(t);return cT(),()=>{s(),Rr.delete(e)}},setProps(t){var n;(n=Rr.get(e))==null||n.setProps(t)},getSnapshot(){var t;return(t=Rr.get(e))==null?void 0:t.getSnapshot()}}}function pT(r){return Ym.add(r),()=>{Ym.delete(r)}}function gT(r){return r&&(Da(r.toastId)||Sd(r.toastId))?r.toastId:$1()}function Td(r,e){return H1(r,e),e.toastId}function qp(r,e){return{...e,type:e&&e.type||r,toastId:gT(e)}}function zp(r){return(e,t)=>Td(e,qp(r,t))}function yt(r,e){return Td(r,qp("default",e))}yt.loading=(r,e)=>Td(r,qp("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function mT(r,{pending:e,error:t,success:n},s){let i;e&&(i=Da(e)?yt.loading(e,s):yt.loading(e.render,{...s,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},a=(l,u,h)=>{if(u==null){yt.dismiss(i);return}let d={type:l,...o,...s,data:h},f=Da(u)?{render:u}:u;return i?yt.update(i,{...d,...f}):yt(f.render,{...d,...f}),h},c=xi(r)?r():r;return c.then(l=>a("success",n,l)).catch(l=>a("error",t,l)),c}yt.promise=mT;yt.success=zp("success");yt.info=zp("info");yt.error=zp("error");yt.warning=zp("warning");yt.warn=yt.warning;yt.dark=(r,e)=>Td(r,qp("default",{theme:"dark",...e}));function yT(r){uT(r)}yt.dismiss=yT;yt.clearWaitingQueue=hT;yt.isActive=j1;yt.update=(r,e={})=>{let t=lT(r,e);if(t){let{props:n,content:s}=t,i={delay:100,...n,...e,toastId:e.toastId||r,updateId:$1()};i.toastId!==r&&(i.staleId=r);let o=i.render||s;delete i.render,Td(o,i)}};yt.done=r=>{yt.update(r,{progress:1})};yt.onChange=pT;yt.play=r=>V1(!0,r);yt.pause=r=>V1(!1,r);function wT(r){var e;let{subscribe:t,getSnapshot:n,setProps:s}=st.useRef(fT(r)).current;s(r);let i=(e=st.useSyncExternalStore(t,n,n))==null?void 0:e.slice();function o(a){if(!i)return[];let c=new Map;return r.newestOnTop&&i.reverse(),i.forEach(l=>{let{position:u}=l.props;c.has(u)||c.set(u,[]),c.get(u).push(l)}),Array.from(c,l=>a(l[0],l[1]))}return{getToastToRender:o,isToastActive:j1,count:i==null?void 0:i.length}}function bT(r){let[e,t]=st.useState(!1),[n,s]=st.useState(!1),i=st.useRef(null),o=st.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:c,closeToast:l,onClick:u,closeOnClick:h}=r;dT({id:r.toastId,containerId:r.containerId,fn:t}),st.useEffect(()=>{if(r.pauseOnFocusLoss)return d(),()=>{f()}},[r.pauseOnFocusLoss]);function d(){document.hasFocus()||C(),window.addEventListener("focus",y),window.addEventListener("blur",C)}function f(){window.removeEventListener("focus",y),window.removeEventListener("blur",C)}function p(L){if(r.draggable===!0||r.draggable===L.pointerType){w();let m=i.current;o.canCloseOnClick=!0,o.canDrag=!0,m.style.transition="none",r.draggableDirection==="x"?(o.start=L.clientX,o.removalDistance=m.offsetWidth*(r.draggablePercent/100)):(o.start=L.clientY,o.removalDistance=m.offsetHeight*(r.draggablePercent===80?r.draggablePercent*1.5:r.draggablePercent)/100)}}function g(L){let{top:m,bottom:b,left:N,right:_}=i.current.getBoundingClientRect();L.nativeEvent.type!=="touchend"&&r.pauseOnHover&&L.clientX>=N&&L.clientX<=_&&L.clientY>=m&&L.clientY<=b?C():y()}function y(){t(!0)}function C(){t(!1)}function w(){o.didMove=!1,document.addEventListener("pointermove",U),document.addEventListener("pointerup",M)}function I(){document.removeEventListener("pointermove",U),document.removeEventListener("pointerup",M)}function U(L){let m=i.current;if(o.canDrag&&m){o.didMove=!0,e&&C(),r.draggableDirection==="x"?o.delta=L.clientX-o.start:o.delta=L.clientY-o.start,o.start!==L.clientX&&(o.canCloseOnClick=!1);let b=r.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;m.style.transform=`translate3d(${b},0)`,m.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function M(){I();let L=i.current;if(o.canDrag&&o.didMove&&L){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){s(!0),r.closeToast(!0),r.collapseAll();return}L.style.transition="transform 0.2s, opacity 0.2s",L.style.removeProperty("transform"),L.style.removeProperty("opacity")}}let B={onPointerDown:p,onPointerUp:g};return a&&c&&(B.onMouseEnter=C,r.stacked||(B.onMouseLeave=y)),h&&(B.onClick=L=>{u&&u(L),o.canCloseOnClick&&l(!0)}),{playToast:y,pauseToast:C,isRunning:e,preventExitTransition:n,toastRef:i,eventHandlers:B}}var ET=typeof window<"u"?st.useLayoutEffect:st.useEffect,Wp=({theme:r,type:e,isLoading:t,...n})=>It.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:r==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...n});function vT(r){return It.createElement(Wp,{...r},It.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function AT(r){return It.createElement(Wp,{...r},It.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function CT(r){return It.createElement(Wp,{...r},It.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function _T(r){return It.createElement(Wp,{...r},It.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function IT(){return It.createElement("div",{className:"Toastify__spinner"})}var Zm={info:AT,warning:vT,success:CT,error:_T,spinner:IT},NT=r=>r in Zm;function ST({theme:r,type:e,isLoading:t,icon:n}){let s=null,i={theme:r,type:e};return n===!1||(xi(n)?s=n({...i,isLoading:t}):st.isValidElement(n)?s=st.cloneElement(n,i):t?s=Zm.spinner():NT(e)&&(s=Zm[e](i))),s}var TT=r=>{let{isRunning:e,preventExitTransition:t,toastRef:n,eventHandlers:s,playToast:i}=bT(r),{closeButton:o,children:a,autoClose:c,onClick:l,type:u,hideProgressBar:h,closeToast:d,transition:f,position:p,className:g,style:y,progressClassName:C,updateId:w,role:I,progress:U,rtl:M,toastId:B,deleteToast:L,isIn:m,isLoading:b,closeOnClick:N,theme:_,ariaLabel:S}=r,k=Sa("Toastify__toast",`Toastify__toast-theme--${_}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":M},{"Toastify__toast--close-on-click":N}),P=xi(g)?g({rtl:M,position:p,type:u,defaultClassName:k}):Sa(k,g),v=ST(r),A=!!U||!c,T={closeToast:d,type:u,theme:_},x=null;return o===!1||(xi(o)?x=o(T):st.isValidElement(o)?x=st.cloneElement(o,T):x=nT(T)),It.createElement(f,{isIn:m,done:L,position:p,preventExitTransition:t,nodeRef:n,playToast:i},It.createElement("div",{id:B,tabIndex:0,onClick:l,"data-in":m,className:P,...s,style:y,ref:n,...m&&{role:I,"aria-label":S}},v!=null&&It.createElement("div",{className:Sa("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!b})},v),M1(a,r,!e),x,!r.customProgressBar&&It.createElement(sT,{...w&&!A?{key:`p-${w}`}:{},rtl:M,theme:_,delay:c,isRunning:e,isIn:m,closeToast:d,hide:h,type:u,className:C,controlledProgress:A,progress:U||0})))},OT=(r,e=!1)=>({enter:`Toastify--animate Toastify__${r}-enter`,exit:`Toastify--animate Toastify__${r}-exit`,appendPosition:e}),PT=rT(OT("bounce",!0)),xT={position:"top-right",transition:PT,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:r=>r.altKey&&r.code==="KeyT"};function RT(r){let e={...xT,...r},t=r.stacked,[n,s]=st.useState(!0),i=st.useRef(null),{getToastToRender:o,isToastActive:a,count:c}=wT(e),{className:l,style:u,rtl:h,containerId:d,hotKeys:f}=e;function p(y){let C=Sa("Toastify__toast-container",`Toastify__toast-container--${y}`,{"Toastify__toast-container--rtl":h});return xi(l)?l({position:y,rtl:h,defaultClassName:C}):Sa(C,Jm(l))}function g(){t&&(s(!0),yt.play())}return ET(()=>{var y;if(t){let C=i.current.querySelectorAll('[data-in="true"]'),w=12,I=(y=e.position)==null?void 0:y.includes("top"),U=0,M=0;Array.from(C).reverse().forEach((B,L)=>{let m=B;m.classList.add("Toastify__toast--stacked"),L>0&&(m.dataset.collapsed=`${n}`),m.dataset.pos||(m.dataset.pos=I?"top":"bot");let b=U*(n?.2:1)+(n?0:w*L);m.style.setProperty("--y",`${I?b:b*-1}px`),m.style.setProperty("--g",`${w}`),m.style.setProperty("--s",`${1-(n?M:0)}`),U+=m.offsetHeight,M+=.025})}},[n,c,t]),st.useEffect(()=>{function y(C){var w;let I=i.current;f(C)&&((w=I.querySelector('[tabIndex="0"]'))==null||w.focus(),s(!1),yt.pause()),C.key==="Escape"&&(document.activeElement===I||I!=null&&I.contains(document.activeElement))&&(s(!0),yt.play())}return document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}},[f]),It.createElement("section",{ref:i,className:"Toastify",id:d,onMouseEnter:()=>{t&&(s(!1),yt.pause())},onMouseLeave:g,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},o((y,C)=>{let w=C.length?{...u}:{...u,pointerEvents:"none"};return It.createElement("div",{tabIndex:-1,className:p(y),"data-stacked":t,style:w,key:`c-${y}`},C.map(({content:I,props:U})=>It.createElement(TT,{...U,stacked:t,collapseAll:g,isIn:a(U.toastId,U.containerId),key:`t-${U.key}`},I)))}))}const Ee=globalThis||void 0||self;var Rf={exports:{}},kT=Rf.exports,z0;function DT(){return z0||(z0=1,function(r,e){(function(t,n){r.exports=n()})(kT,function(){return function(t){function n(i){if(s[i])return s[i].exports;var o=s[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var s={};return n.m=t,n.c=s,n.p="dist/",n(0)}([function(t,n,s){function i(P){return P&&P.__esModule?P:{default:P}}var o=Object.assign||function(P){for(var v=1;v<arguments.length;v++){var A=arguments[v];for(var T in A)Object.prototype.hasOwnProperty.call(A,T)&&(P[T]=A[T])}return P},a=s(1),c=(i(a),s(6)),l=i(c),u=s(7),h=i(u),d=s(8),f=i(d),p=s(9),g=i(p),y=s(10),C=i(y),w=s(11),I=i(w),U=s(14),M=i(U),B=[],L=!1,m={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},b=function(){var P=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(P&&(L=!0),L)return B=(0,I.default)(B,m),(0,C.default)(B,m.once),B},N=function(){B=(0,M.default)(),b()},_=function(){B.forEach(function(P,v){P.node.removeAttribute("data-aos"),P.node.removeAttribute("data-aos-easing"),P.node.removeAttribute("data-aos-duration"),P.node.removeAttribute("data-aos-delay")})},S=function(P){return P===!0||P==="mobile"&&g.default.mobile()||P==="phone"&&g.default.phone()||P==="tablet"&&g.default.tablet()||typeof P=="function"&&P()===!0},k=function(P){m=o(m,P),B=(0,M.default)();var v=document.all&&!window.atob;return S(m.disable)||v?_():(m.disableMutationObserver||f.default.isSupported()||(console.info(`
      aos: MutationObserver is not supported on this browser,
      code mutations observing has been disabled.
      You may have to call "refreshHard()" by yourself.
    `),m.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",m.easing),document.querySelector("body").setAttribute("data-aos-duration",m.duration),document.querySelector("body").setAttribute("data-aos-delay",m.delay),m.startEvent==="DOMContentLoaded"&&["complete","interactive"].indexOf(document.readyState)>-1?b(!0):m.startEvent==="load"?window.addEventListener(m.startEvent,function(){b(!0)}):document.addEventListener(m.startEvent,function(){b(!0)}),window.addEventListener("resize",(0,h.default)(b,m.debounceDelay,!0)),window.addEventListener("orientationchange",(0,h.default)(b,m.debounceDelay,!0)),window.addEventListener("scroll",(0,l.default)(function(){(0,C.default)(B,m.once)},m.throttleDelay)),m.disableMutationObserver||f.default.ready("[data-aos]",N),B)};t.exports={init:k,refresh:b,refreshHard:N}},function(t,n){},,,,,function(t,n){(function(s){function i(S,k,P){function v(pe){var Ne=Q,sn=Y;return Q=Y=void 0,Ve=pe,ie=S.apply(sn,Ne)}function A(pe){return Ve=pe,we=setTimeout(R,k),Le?v(pe):ie}function T(pe){var Ne=pe-be,sn=pe-Ve,Jd=k-Ne;return je?N(Jd,ne-sn):Jd}function x(pe){var Ne=pe-be,sn=pe-Ve;return be===void 0||Ne>=k||Ne<0||je&&sn>=ne}function R(){var pe=_();return x(pe)?j(pe):void(we=setTimeout(R,T(pe)))}function j(pe){return we=void 0,ye&&Q?v(pe):(Q=Y=void 0,ie)}function q(){we!==void 0&&clearTimeout(we),Ve=0,Q=be=Y=we=void 0}function z(){return we===void 0?ie:j(_())}function G(){var pe=_(),Ne=x(pe);if(Q=arguments,Y=this,be=pe,Ne){if(we===void 0)return A(be);if(je)return we=setTimeout(R,k),v(be)}return we===void 0&&(we=setTimeout(R,k)),ie}var Q,Y,ne,ie,we,be,Ve=0,Le=!1,je=!1,ye=!0;if(typeof S!="function")throw new TypeError(d);return k=u(k)||0,a(P)&&(Le=!!P.leading,je="maxWait"in P,ne=je?b(u(P.maxWait)||0,k):ne,ye="trailing"in P?!!P.trailing:ye),G.cancel=q,G.flush=z,G}function o(S,k,P){var v=!0,A=!0;if(typeof S!="function")throw new TypeError(d);return a(P)&&(v="leading"in P?!!P.leading:v,A="trailing"in P?!!P.trailing:A),i(S,k,{leading:v,maxWait:k,trailing:A})}function a(S){var k=typeof S>"u"?"undefined":h(S);return!!S&&(k=="object"||k=="function")}function c(S){return!!S&&(typeof S>"u"?"undefined":h(S))=="object"}function l(S){return(typeof S>"u"?"undefined":h(S))=="symbol"||c(S)&&m.call(S)==p}function u(S){if(typeof S=="number")return S;if(l(S))return f;if(a(S)){var k=typeof S.valueOf=="function"?S.valueOf():S;S=a(k)?k+"":k}if(typeof S!="string")return S===0?S:+S;S=S.replace(g,"");var P=C.test(S);return P||w.test(S)?I(S.slice(2),P?2:8):y.test(S)?f:+S}var h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},d="Expected a function",f=NaN,p="[object Symbol]",g=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,C=/^0b[01]+$/i,w=/^0o[0-7]+$/i,I=parseInt,U=(typeof s>"u"?"undefined":h(s))=="object"&&s&&s.Object===Object&&s,M=(typeof self>"u"?"undefined":h(self))=="object"&&self&&self.Object===Object&&self,B=U||M||Function("return this")(),L=Object.prototype,m=L.toString,b=Math.max,N=Math.min,_=function(){return B.Date.now()};t.exports=o}).call(n,function(){return this}())},function(t,n){(function(s){function i(_,S,k){function P(ye){var pe=G,Ne=Q;return G=Q=void 0,be=ye,ne=_.apply(Ne,pe)}function v(ye){return be=ye,ie=setTimeout(x,S),Ve?P(ye):ne}function A(ye){var pe=ye-we,Ne=ye-be,sn=S-pe;return Le?b(sn,Y-Ne):sn}function T(ye){var pe=ye-we,Ne=ye-be;return we===void 0||pe>=S||pe<0||Le&&Ne>=Y}function x(){var ye=N();return T(ye)?R(ye):void(ie=setTimeout(x,A(ye)))}function R(ye){return ie=void 0,je&&G?P(ye):(G=Q=void 0,ne)}function j(){ie!==void 0&&clearTimeout(ie),be=0,G=we=Q=ie=void 0}function q(){return ie===void 0?ne:R(N())}function z(){var ye=N(),pe=T(ye);if(G=arguments,Q=this,we=ye,pe){if(ie===void 0)return v(we);if(Le)return ie=setTimeout(x,S),P(we)}return ie===void 0&&(ie=setTimeout(x,S)),ne}var G,Q,Y,ne,ie,we,be=0,Ve=!1,Le=!1,je=!0;if(typeof _!="function")throw new TypeError(h);return S=l(S)||0,o(k)&&(Ve=!!k.leading,Le="maxWait"in k,Y=Le?m(l(k.maxWait)||0,S):Y,je="trailing"in k?!!k.trailing:je),z.cancel=j,z.flush=q,z}function o(_){var S=typeof _>"u"?"undefined":u(_);return!!_&&(S=="object"||S=="function")}function a(_){return!!_&&(typeof _>"u"?"undefined":u(_))=="object"}function c(_){return(typeof _>"u"?"undefined":u(_))=="symbol"||a(_)&&L.call(_)==f}function l(_){if(typeof _=="number")return _;if(c(_))return d;if(o(_)){var S=typeof _.valueOf=="function"?_.valueOf():_;_=o(S)?S+"":S}if(typeof _!="string")return _===0?_:+_;_=_.replace(p,"");var k=y.test(_);return k||C.test(_)?w(_.slice(2),k?2:8):g.test(_)?d:+_}var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},h="Expected a function",d=NaN,f="[object Symbol]",p=/^\s+|\s+$/g,g=/^[-+]0x[0-9a-f]+$/i,y=/^0b[01]+$/i,C=/^0o[0-7]+$/i,w=parseInt,I=(typeof s>"u"?"undefined":u(s))=="object"&&s&&s.Object===Object&&s,U=(typeof self>"u"?"undefined":u(self))=="object"&&self&&self.Object===Object&&self,M=I||U||Function("return this")(),B=Object.prototype,L=B.toString,m=Math.max,b=Math.min,N=function(){return M.Date.now()};t.exports=i}).call(n,function(){return this}())},function(t,n){function s(u){var h=void 0,d=void 0;for(h=0;h<u.length;h+=1)if(d=u[h],d.dataset&&d.dataset.aos||d.children&&s(d.children))return!0;return!1}function i(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function o(){return!!i()}function a(u,h){var d=window.document,f=i(),p=new f(c);l=h,p.observe(d.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function c(u){u&&u.forEach(function(h){var d=Array.prototype.slice.call(h.addedNodes),f=Array.prototype.slice.call(h.removedNodes),p=d.concat(f);if(s(p))return l()})}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){};n.default={isSupported:o,ready:a}},function(t,n){function s(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function i(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function d(f,p){for(var g=0;g<p.length;g++){var y=p[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}return function(f,p,g){return p&&d(f.prototype,p),g&&d(f,g),f}}(),a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,c=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,l=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,u=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,h=function(){function d(){s(this,d)}return o(d,[{key:"phone",value:function(){var f=i();return!(!a.test(f)&&!c.test(f.substr(0,4)))}},{key:"mobile",value:function(){var f=i();return!(!l.test(f)&&!u.test(f.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),d}();n.default=new h},function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var s=function(o,a,c){var l=o.node.getAttribute("data-aos-once");a>o.position?o.node.classList.add("aos-animate"):typeof l<"u"&&(l==="false"||!c&&l!=="true")&&o.node.classList.remove("aos-animate")},i=function(o,a){var c=window.pageYOffset,l=window.innerHeight;o.forEach(function(u,h){s(u,l+c,a)})};n.default=i},function(t,n,s){function i(l){return l&&l.__esModule?l:{default:l}}Object.defineProperty(n,"__esModule",{value:!0});var o=s(12),a=i(o),c=function(l,u){return l.forEach(function(h,d){h.node.classList.add("aos-init"),h.position=(0,a.default)(h.node,u.offset)}),l};n.default=c},function(t,n,s){function i(l){return l&&l.__esModule?l:{default:l}}Object.defineProperty(n,"__esModule",{value:!0});var o=s(13),a=i(o),c=function(l,u){var h=0,d=0,f=window.innerHeight,p={offset:l.getAttribute("data-aos-offset"),anchor:l.getAttribute("data-aos-anchor"),anchorPlacement:l.getAttribute("data-aos-anchor-placement")};switch(p.offset&&!isNaN(p.offset)&&(d=parseInt(p.offset)),p.anchor&&document.querySelectorAll(p.anchor)&&(l=document.querySelectorAll(p.anchor)[0]),h=(0,a.default)(l).top,p.anchorPlacement){case"top-bottom":break;case"center-bottom":h+=l.offsetHeight/2;break;case"bottom-bottom":h+=l.offsetHeight;break;case"top-center":h+=f/2;break;case"bottom-center":h+=f/2+l.offsetHeight;break;case"center-center":h+=f/2+l.offsetHeight/2;break;case"top-top":h+=f;break;case"bottom-top":h+=l.offsetHeight+f;break;case"center-top":h+=l.offsetHeight/2+f}return p.anchorPlacement||p.offset||isNaN(u)||(d=u),h+d};n.default=c},function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var s=function(i){for(var o=0,a=0;i&&!isNaN(i.offsetLeft)&&!isNaN(i.offsetTop);)o+=i.offsetLeft-(i.tagName!="BODY"?i.scrollLeft:0),a+=i.offsetTop-(i.tagName!="BODY"?i.scrollTop:0),i=i.offsetParent;return{top:a,left:o}};n.default=s},function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var s=function(i){return i=i||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(i,function(o){return{node:o}})};n.default=s}])})}(Rf)),Rf.exports}var UT=DT();const LT=qS(UT),BT=Symbol(),W0=Object.getPrototypeOf,Xm=new WeakMap,MT=r=>r&&(Xm.has(r)?Xm.get(r):W0(r)===Object.prototype||W0(r)===Array.prototype),$T=r=>MT(r)&&r[BT]||null,G0=(r,e=!0)=>{Xm.set(r,e)},Xf={},xg=r=>typeof r=="object"&&r!==null,Ki=new WeakMap,Hu=new WeakSet,FT=(r=Object.is,e=(l,u)=>new Proxy(l,u),t=l=>xg(l)&&!Hu.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),n=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,h=n)=>{const d=s.get(l);if((d==null?void 0:d[0])===u)return d[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return G0(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:y}=Reflect.getOwnPropertyDescriptor(l,p),C={value:g,enumerable:y,configurable:!0};if(Hu.has(g))G0(g,!1);else if(g instanceof Promise)delete C.value,C.get=()=>h(g);else if(Ki.has(g)){const[w,I]=Ki.get(g);C.value=i(w,I(),h)}Object.defineProperty(f,p,C)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!xg(l))throw new Error("object required");const u=o.get(l);if(u)return u;let h=a[0];const d=new Set,f=(b,N=++a[0])=>{h!==N&&(h=N,d.forEach(_=>_(b,N)))};let p=a[1];const g=(b=++a[1])=>(p!==b&&!d.size&&(p=b,C.forEach(([N])=>{const _=N[1](b);_>h&&(h=_)})),h),y=b=>(N,_)=>{const S=[...N];S[1]=[b,...S[1]],f(S,_)},C=new Map,w=(b,N)=>{if((Xf?"production":void 0)!=="production"&&C.has(b))throw new Error("prop listener already exists");if(d.size){const _=N[3](y(b));C.set(b,[N,_])}else C.set(b,[N])},I=b=>{var N;const _=C.get(b);_&&(C.delete(b),(N=_[1])==null||N.call(_))},U=b=>(d.add(b),d.size===1&&C.forEach(([_,S],k)=>{if((Xf?"production":void 0)!=="production"&&S)throw new Error("remove already exists");const P=_[3](y(k));C.set(k,[_,P])}),()=>{d.delete(b),d.size===0&&C.forEach(([_,S],k)=>{S&&(S(),C.set(k,[_]))})}),M=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),L=e(M,{deleteProperty(b,N){const _=Reflect.get(b,N);I(N);const S=Reflect.deleteProperty(b,N);return S&&f(["delete",[N],_]),S},set(b,N,_,S){const k=Reflect.has(b,N),P=Reflect.get(b,N,S);if(k&&(r(P,_)||o.has(_)&&r(P,o.get(_))))return!0;I(N),xg(_)&&(_=$T(_)||_);let v=_;if(_ instanceof Promise)_.then(A=>{_.status="fulfilled",_.value=A,f(["resolve",[N],A])}).catch(A=>{_.status="rejected",_.reason=A,f(["reject",[N],A])});else{!Ki.has(_)&&t(_)&&(v=c(_));const A=!Hu.has(v)&&Ki.get(v);A&&w(N,A)}return Reflect.set(b,N,v,S),f(["set",[N],_,P]),!0}});o.set(l,L);const m=[M,g,i,U];return Ki.set(L,m),Reflect.ownKeys(l).forEach(b=>{const N=Object.getOwnPropertyDescriptor(l,b);"value"in N&&(L[b]=l[b],delete N.value,delete N.writable),Object.defineProperty(M,b,N)}),L})=>[c,Ki,Hu,r,e,t,n,s,i,o,a],[jT]=FT();function Pt(r={}){return jT(r)}function Mr(r,e,t){const n=Ki.get(r);(Xf?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let s;const i=[],o=n[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function ph(r,e){const t=Ki.get(r);(Xf?"production":void 0)!=="production"&&!t&&console.warn("Please use proxy object");const[n,s,i]=t;return i(n,s(),e)}function Ua(r){return Hu.add(r),r}function tn(r,e,t,n){let s=r[e];return Mr(r,()=>{const i=r[e];Object.is(s,i)||t(s=i)})}function HT(r){const e=Pt({data:Array.from([]),has(t){return this.data.some(n=>n[0]===t)},set(t,n){const s=this.data.find(i=>i[0]===t);return s?s[1]=n:this.data.push([t,n]),this},get(t){var n;return(n=this.data.find(s=>s[0]===t))==null?void 0:n[1]},delete(t){const n=this.data.findIndex(s=>s[0]===t);return n===-1?!1:(this.data.splice(n,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(t){this.data.forEach(n=>{t(n[1],n[0],this)})},keys(){return this.data.map(t=>t[0]).values()},values(){return this.data.map(t=>t[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}const q1={caipNetworkIdToNumber(r){return r?Number(r.split(":")[1]):void 0},parseEvmChainId(r){return typeof r=="string"?this.caipNetworkIdToNumber(r):r},getNetworksByNamespace(r,e){return(r==null?void 0:r.filter(t=>t.chainNamespace===e))||[]},getFirstNetworkByNamespace(r,e){return this.getNetworksByNamespace(r,e)[0]}};var VT=20,qT=1,uu=1e6,zT=1e6,WT=-7,GT=21,KT=!1,Od="[big.js] ",Za=Od+"Invalid ",Gp=Za+"decimal places",JT=Za+"rounding mode",z1=Od+"Division by zero",ct={},Vs=void 0,QT=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function W1(){function r(e){var t=this;if(!(t instanceof r))return e===Vs?W1():new r(e);if(e instanceof r)t.s=e.s,t.e=e.e,t.c=e.c.slice();else{if(typeof e!="string"){if(r.strict===!0&&typeof e!="bigint")throw TypeError(Za+"value");e=e===0&&1/e<0?"-0":String(e)}YT(t,e)}t.constructor=r}return r.prototype=ct,r.DP=VT,r.RM=qT,r.NE=WT,r.PE=GT,r.strict=KT,r.roundDown=0,r.roundHalfUp=1,r.roundHalfEven=2,r.roundUp=3,r}function YT(r,e){var t,n,s;if(!QT.test(e))throw Error(Za+"number");for(r.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),s=e.length,n=0;n<s&&e.charAt(n)=="0";)++n;if(n==s)r.c=[r.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(r.e=t-n-1,r.c=[],t=0;n<=s;)r.c[t++]=+e.charAt(n++)}return r}function Xa(r,e,t,n){var s=r.c;if(t===Vs&&(t=r.constructor.RM),t!==0&&t!==1&&t!==2&&t!==3)throw Error(JT);if(e<1)n=t===3&&(n||!!s[0])||e===0&&(t===1&&s[0]>=5||t===2&&(s[0]>5||s[0]===5&&(n||s[1]!==Vs))),s.length=1,n?(r.e=r.e-e+1,s[0]=1):s[0]=r.e=0;else if(e<s.length){if(n=t===1&&s[e]>=5||t===2&&(s[e]>5||s[e]===5&&(n||s[e+1]!==Vs||s[e-1]&1))||t===3&&(n||!!s[0]),s.length=e,n){for(;++s[--e]>9;)if(s[e]=0,e===0){++r.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return r}function ec(r,e,t){var n=r.e,s=r.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)s="0"+s;s="0."+s}else if(n>0)if(++n>i)for(n-=i;n--;)s+="0";else n<i&&(s=s.slice(0,n)+"."+s.slice(n));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return r.s<0&&t?"-"+s:s}ct.abs=function(){var r=new this.constructor(this);return r.s=1,r};ct.cmp=function(r){var e,t=this,n=t.c,s=(r=new t.constructor(r)).c,i=t.s,o=r.s,a=t.e,c=r.e;if(!n[0]||!s[0])return n[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=n.length)<(c=s.length)?a:c,i=-1;++i<o;)if(n[i]!=s[i])return n[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};ct.div=function(r){var e=this,t=e.constructor,n=e.c,s=(r=new t(r)).c,i=e.s==r.s?1:-1,o=t.DP;if(o!==~~o||o<0||o>uu)throw Error(Gp);if(!s[0])throw Error(z1);if(!n[0])return r.s=i,r.c=[r.e=0],r;var a,c,l,u,h,d=s.slice(),f=a=s.length,p=n.length,g=n.slice(0,a),y=g.length,C=r,w=C.c=[],I=0,U=o+(C.e=e.e-r.e)+1;for(C.s=i,i=U<0?0:U,d.unshift(0);y++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(y=g.length))u=a>y?1:-1;else for(h=-1,u=0;++h<a;)if(s[h]!=g[h]){u=s[h]>g[h]?1:-1;break}if(u<0){for(c=y==a?s:d;y;){if(g[--y]<c[y]){for(h=y;h&&!g[--h];)g[h]=9;--g[h],g[y]+=10}g[y]-=c[y]}for(;!g[0];)g.shift()}else break}w[I++]=u?l:++l,g[0]&&u?g[y]=n[f]||0:g=[n[f]]}while((f++<p||g[0]!==Vs)&&i--);return!w[0]&&I!=1&&(w.shift(),C.e--,U--),I>U&&Xa(C,U,t.RM,g[0]!==Vs),C};ct.eq=function(r){return this.cmp(r)===0};ct.gt=function(r){return this.cmp(r)>0};ct.gte=function(r){return this.cmp(r)>-1};ct.lt=function(r){return this.cmp(r)<0};ct.lte=function(r){return this.cmp(r)<1};ct.minus=ct.sub=function(r){var e,t,n,s,i=this,o=i.constructor,a=i.s,c=(r=new o(r)).s;if(a!=c)return r.s=-c,i.plus(r);var l=i.c.slice(),u=i.e,h=r.c,d=r.e;if(!l[0]||!h[0])return h[0]?r.s=-c:l[0]?r=new o(i):r.s=1,r;if(a=u-d){for((s=a<0)?(a=-a,n=l):(d=u,n=h),n.reverse(),c=a;c--;)n.push(0);n.reverse()}else for(t=((s=l.length<h.length)?l:h).length,a=c=0;c<t;c++)if(l[c]!=h[c]){s=l[c]<h[c];break}if(s&&(n=l,l=h,h=n,r.s=-r.s),(c=(t=h.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;t>a;){if(l[--t]<h[t]){for(e=t;e&&!l[--e];)l[e]=9;--l[e],l[t]+=10}l[t]-=h[t]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--d;return l[0]||(r.s=1,l=[d=0]),r.c=l,r.e=d,r};ct.mod=function(r){var e,t=this,n=t.constructor,s=t.s,i=(r=new n(r)).s;if(!r.c[0])throw Error(z1);return t.s=r.s=1,e=r.cmp(t)==1,t.s=s,r.s=i,e?new n(t):(s=n.DP,i=n.RM,n.DP=n.RM=0,t=t.div(r),n.DP=s,n.RM=i,this.minus(t.times(r)))};ct.neg=function(){var r=new this.constructor(this);return r.s=-r.s,r};ct.plus=ct.add=function(r){var e,t,n,s=this,i=s.constructor;if(r=new i(r),s.s!=r.s)return r.s=-r.s,s.minus(r);var o=s.e,a=s.c,c=r.e,l=r.c;if(!a[0]||!l[0])return l[0]||(a[0]?r=new i(s):r.s=s.s),r;if(a=a.slice(),e=o-c){for(e>0?(c=o,n=l):(e=-e,n=a),n.reverse();e--;)n.push(0);n.reverse()}for(a.length-l.length<0&&(n=l,l=a,a=n),e=l.length,t=0;e;a[e]%=10)t=(a[--e]=a[e]+l[e]+t)/10|0;for(t&&(a.unshift(t),++c),e=a.length;a[--e]===0;)a.pop();return r.c=a,r.e=c,r};ct.pow=function(r){var e=this,t=new e.constructor("1"),n=t,s=r<0;if(r!==~~r||r<-1e6||r>zT)throw Error(Za+"exponent");for(s&&(r=-r);r&1&&(n=n.times(e)),r>>=1,!!r;)e=e.times(e);return s?t.div(n):n};ct.prec=function(r,e){if(r!==~~r||r<1||r>uu)throw Error(Za+"precision");return Xa(new this.constructor(this),r,e)};ct.round=function(r,e){if(r===Vs)r=0;else if(r!==~~r||r<-1e6||r>uu)throw Error(Gp);return Xa(new this.constructor(this),r+this.e+1,e)};ct.sqrt=function(){var r,e,t,n=this,s=n.constructor,i=n.s,o=n.e,a=new s("0.5");if(!n.c[0])return new s(n);if(i<0)throw Error(Od+"No square root");i=Math.sqrt(+ec(n,!0,!0)),i===0||i===1/0?(e=n.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),r=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):r=new s(i+""),o=r.e+(s.DP+=4);do t=r,r=a.times(t.plus(n.div(t)));while(t.c.slice(0,o).join("")!==r.c.slice(0,o).join(""));return Xa(r,(s.DP-=4)+r.e+1,s.RM)};ct.times=ct.mul=function(r){var e,t=this,n=t.constructor,s=t.c,i=(r=new n(r)).c,o=s.length,a=i.length,c=t.e,l=r.e;if(r.s=t.s==r.s?1:-1,!s[0]||!i[0])return r.c=[r.e=0],r;for(r.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++r.e:e.shift(),c=e.length;!e[--c];)e.pop();return r.c=e,r};ct.toExponential=function(r,e){var t=this,n=t.c[0];if(r!==Vs){if(r!==~~r||r<0||r>uu)throw Error(Gp);for(t=Xa(new t.constructor(t),++r,e);t.c.length<r;)t.c.push(0)}return ec(t,!0,!!n)};ct.toFixed=function(r,e){var t=this,n=t.c[0];if(r!==Vs){if(r!==~~r||r<0||r>uu)throw Error(Gp);for(t=Xa(new t.constructor(t),r+t.e+1,e),r=r+t.e+1;t.c.length<r;)t.c.push(0)}return ec(t,!1,!!n)};ct[Symbol.for("nodejs.util.inspect.custom")]=ct.toJSON=ct.toString=function(){var r=this,e=r.constructor;return ec(r,r.e<=e.NE||r.e>=e.PE,!!r.c[0])};ct.toNumber=function(){var r=+ec(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(r.toString()))throw Error(Od+"Imprecise conversion");return r};ct.toPrecision=function(r,e){var t=this,n=t.constructor,s=t.c[0];if(r!==Vs){if(r!==~~r||r<1||r>uu)throw Error(Za+"precision");for(t=Xa(new n(t),r,e);t.c.length<r;)t.c.push(0)}return ec(t,r<=t.e||t.e<=n.NE||t.e>=n.PE,!!s)};ct.valueOf=function(){var r=this,e=r.constructor;if(e.strict===!0)throw Error(Od+"valueOf disallowed");return ec(r,r.e<=e.NE||r.e>=e.PE,!0)};var Au=W1();const Qd={bigNumber(r){return r?new Au(r):new Au(0)},multiply(r,e){if(r===void 0||e===void 0)return new Au(0);const t=new Au(r),n=new Au(e);return t.times(n)},formatNumberToLocalString(r,e=2){return r===void 0?"0.00":typeof r=="number"?r.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(r).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(r){return r===void 0?0:parseFloat(r.replace(/,/gu,""))}},ZT=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],XT=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],eO=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],ee={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network"},tO={getERC20Abi:r=>ee.USDT_CONTRACT_ADDRESSES.includes(r)?eO:ZT,getSwapAbi:()=>XT},si={validateCaipAddress(r){var e;if(((e=r.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return r},parseCaipAddress(r){const e=r.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${r}`);const[t,n,s]=e;if(!t||!n||!s)throw new Error(`Invalid CAIP-10 address: ${r}`);return{chainNamespace:t,chainId:n,address:s}},parseCaipNetworkId(r){const e=r.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${r}`);const[t,n]=e;if(!t||!n)throw new Error(`Invalid CAIP-2 network id: ${r}`);return{chainNamespace:t,chainId:n}}},Be={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types"};function Rg(r){if(!r)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${r}:connected_connector_id`}const xe={setItem(r,e){Vu()&&e!==void 0&&localStorage.setItem(r,e)},getItem(r){if(Vu())return localStorage.getItem(r)||void 0},removeItem(r){Vu()&&localStorage.removeItem(r)},clear(){Vu()&&localStorage.clear()}};function Vu(){return typeof window<"u"&&typeof localStorage<"u"}function rO(r){return(r==null?void 0:r.endsWith(ee.WC_NAME_SUFFIX_LEGACY))||(r==null?void 0:r.endsWith(ee.WC_NAME_SUFFIX))}var K0={};const kg=(typeof Zr<"u"&&typeof K0<"u"?K0.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",MW=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],$W="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Cr={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:kg,SECURE_SITE_DASHBOARD:`${kg}/dashboard`,SECURE_SITE_FAVICON:`${kg}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in a new browser tab"},DEFAULT_FEATURES:{swaps:!0,onramp:!0,receive:!0,send:!0,email:!0,emailShowWallets:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],history:!0,analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},he={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(r,e){return Date.now()-r>e},getActiveNetworkProps(){const r=he.getActiveNamespace(),e=he.getActiveCaipNetworkId(),t=e?e.split(":")[1]:void 0,n=t?isNaN(Number(t))?t:Number(t):void 0;return{namespace:r,caipNetworkId:e,chainId:n}},setWalletConnectDeepLink({name:r,href:e}){try{xe.setItem(Be.DEEPLINK_CHOICE,JSON.stringify({href:e,name:r}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const r=xe.getItem(Be.DEEPLINK_CHOICE);if(r)return JSON.parse(r)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{xe.removeItem(Be.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(r){try{xe.setItem(Be.ACTIVE_NAMESPACE,r)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(r){try{xe.setItem(Be.ACTIVE_CAIP_NETWORK_ID,r),he.setActiveNamespace(r.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return xe.getItem(Be.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{xe.removeItem(Be.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(r){try{const e=Rg(r);xe.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(r){try{const e=he.getRecentWallets();e.find(n=>n.id===r.id)||(e.unshift(r),e.length>2&&e.pop(),xe.setItem(Be.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const r=xe.getItem(Be.RECENT_WALLETS);return r?JSON.parse(r):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(r,e){try{const t=Rg(r);xe.setItem(t,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return xe.getItem(Be.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(r){if(r)try{const e=Rg(r);return xe.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",r)}},setConnectedSocialProvider(r){try{xe.setItem(Be.CONNECTED_SOCIAL,r)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return xe.getItem(Be.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{xe.removeItem(Be.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return xe.getItem(Be.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var t;const r=xe.getItem(Be.ACTIVE_CAIP_NETWORK_ID);return(t=r==null?void 0:r.split(":"))==null?void 0:t[1]},setConnectionStatus(r){try{xe.setItem(Be.CONNECTION_STATUS,r)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return xe.getItem(Be.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const r=xe.getItem(Be.CONNECTED_NAMESPACES);return r!=null&&r.length?r.split(","):[]}catch{return[]}},setConnectedNamespaces(r){try{const e=Array.from(new Set(r));xe.setItem(Be.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(r){try{const e=he.getConnectedNamespaces();e.includes(r)||(e.push(r),he.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(r){try{const e=he.getConnectedNamespaces(),t=e.indexOf(r);t>-1&&(e.splice(t,1),he.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return xe.getItem(Be.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(r){try{xe.setItem(Be.TELEGRAM_SOCIAL_PROVIDER,r)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{xe.removeItem(Be.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let r={};try{const e=xe.getItem(Be.PORTFOLIO_CACHE);r=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return r},removeAddressFromBalanceCache(r){try{const e=he.getBalanceCache();xe.setItem(Be.PORTFOLIO_CACHE,JSON.stringify({...e,[r]:void 0}))}catch{console.info("Unable to remove address from balance cache",r)}},getBalanceCacheForCaipAddress(r){try{const t=he.getBalanceCache()[r];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.portfolio))return t.balance;he.removeAddressFromBalanceCache(r)}catch{console.info("Unable to get balance cache for address",r)}},updateBalanceCache(r){try{const e=he.getBalanceCache();e[r.caipAddress]=r,xe.setItem(Be.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",r)}},getNativeBalanceCache(){let r={};try{const e=xe.getItem(Be.NATIVE_BALANCE_CACHE);r=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return r},removeAddressFromNativeBalanceCache(r){try{const e=he.getBalanceCache();xe.setItem(Be.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[r]:void 0}))}catch{console.info("Unable to remove address from balance cache",r)}},getNativeBalanceCacheForCaipAddress(r){try{const t=he.getNativeBalanceCache()[r];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.nativeBalance))return t;console.info("Discarding cache for address",r),he.removeAddressFromBalanceCache(r)}catch{console.info("Unable to get balance cache for address",r)}},updateNativeBalanceCache(r){try{const e=he.getNativeBalanceCache();e[r.caipAddress]=r,xe.setItem(Be.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",r)}},getEnsCache(){let r={};try{const e=xe.getItem(Be.ENS_CACHE);r=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return r},getEnsFromCacheForAddress(r){try{const t=he.getEnsCache()[r];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.ens))return t.ens;he.removeEnsFromCache(r)}catch{console.info("Unable to get ens name from cache",r)}},updateEnsCache(r){try{const e=he.getEnsCache();e[r.address]=r,xe.setItem(Be.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",r)}},removeEnsFromCache(r){try{const e=he.getEnsCache();xe.setItem(Be.ENS_CACHE,JSON.stringify({...e,[r]:void 0}))}catch{console.info("Unable to remove ens name from cache",r)}},getIdentityCache(){let r={};try{const e=xe.getItem(Be.IDENTITY_CACHE);r=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return r},getIdentityFromCacheForAddress(r){try{const t=he.getIdentityCache()[r];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.identity))return t.identity;he.removeIdentityFromCache(r)}catch{console.info("Unable to get identity from cache",r)}},updateIdentityCache(r){try{const e=he.getIdentityCache();e[r.address]={identity:r.identity,timestamp:r.timestamp},xe.setItem(Be.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",r)}},removeIdentityFromCache(r){try{const e=he.getIdentityCache();xe.setItem(Be.IDENTITY_CACHE,JSON.stringify({...e,[r]:void 0}))}catch{console.info("Unable to remove identity from cache",r)}},clearAddressCache(){try{xe.removeItem(Be.PORTFOLIO_CACHE),xe.removeItem(Be.NATIVE_BALANCE_CACHE),xe.removeItem(Be.ENS_CACHE),xe.removeItem(Be.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(r){try{xe.setItem(Be.PREFERRED_ACCOUNT_TYPES,JSON.stringify(r))}catch{console.info("Unable to set preferred account types",r)}},getPreferredAccountTypes(){try{const r=xe.getItem(Be.PREFERRED_ACCOUNT_TYPES);return JSON.parse(r)}catch{console.info("Unable to get preferred account types")}}},Se={isMobile(){var r;return this.isClient()?!!((r=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&r.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(r,e=""){return r==null?void 0:r.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const r=window==null?void 0:window.navigator.userAgent.toLowerCase();return Se.isMobile()&&r.includes("android")},isIos(){if(!this.isMobile())return!1;const r=window==null?void 0:window.navigator.userAgent.toLowerCase();return r.includes("iphone")||r.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(r){return r?r-Date.now()<=Cr.TEN_SEC_MS:!0},isAllowedRetry(r,e=Cr.ONE_SEC_MS){return Date.now()-r>=e},copyToClopboard(r){navigator.clipboard.writeText(r)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},getPairingExpiry(){return Date.now()+Cr.FOUR_MINUTES_MS},getNetworkId(r){return r==null?void 0:r.split(":")[1]},getPlainAddress(r){return r==null?void 0:r.split(":")[2]},async wait(r){return new Promise(e=>{setTimeout(e,r)})},debounce(r,e=500){let t;return(...n)=>{function s(){r(...n)}t&&clearTimeout(t),t=setTimeout(s,e)}},isHttpUrl(r){return r.startsWith("http://")||r.startsWith("https://")},formatNativeUrl(r,e){if(Se.isHttpUrl(r))return this.formatUniversalUrl(r,e);let t=r;t.includes("://")||(t=r.replaceAll("/","").replaceAll(":",""),t=`${t}://`),t.endsWith("/")||(t=`${t}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const n=encodeURIComponent(e);return{redirect:`${t}wc?uri=${n}`,href:t}},formatUniversalUrl(r,e){if(!Se.isHttpUrl(r))return this.formatNativeUrl(r,e);let t=r;t.endsWith("/")||(t=`${t}/`);const n=encodeURIComponent(e);return{redirect:`${t}wc?uri=${n}`,href:t}},getOpenTargetForPlatform(r){return r==="popupWindow"?r:this.isTelegram()?he.getTelegramSocialProvider()?"_top":"_blank":r},openHref(r,e,t){window==null||window.open(r,this.getOpenTargetForPlatform(e),t||"noreferrer noopener")},returnOpenHref(r,e,t){return window==null?void 0:window.open(r,this.getOpenTargetForPlatform(e),t||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},async preloadImage(r){const e=new Promise((t,n)=>{const s=new Image;s.onload=t,s.onerror=n,s.crossOrigin="anonymous",s.src=r});return Promise.race([e,Se.wait(2e3)])},formatBalance(r,e){let t="0.000";if(typeof r=="string"){const n=Number(r);if(n){const s=Math.floor(n*1e3)/1e3;s&&(t=s.toString())}}return`${t}${e?` ${e}`:""}`},formatBalance2(r,e){var n;let t;if(r==="0")t="0";else if(typeof r=="string"){const s=Number(r);s&&(t=(n=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:n[0])}return{value:t??"0",rest:t==="0"?"000":"",symbol:e}},getApiUrl(){return ee.W3M_API_URL},getBlockchainApiUrl(){return ee.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ee.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,r=>{const e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)})},parseError(r){var e,t;return typeof r=="string"?r:typeof((t=(e=r==null?void 0:r.issues)==null?void 0:e[0])==null?void 0:t.message)=="string"?r.issues[0].message:r instanceof Error?r.message:"Unknown error"},sortRequestedNetworks(r,e=[]){const t={};return e&&r&&(r.forEach((n,s)=>{t[n]=s}),e.sort((n,s)=>{const i=t[n.id],o=t[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(r){let e=0;for(const t of r)e+=t.value??0;return e},formatTokenBalance(r){const e=r.toFixed(2),[t,n]=e.split(".");return{dollars:t,pennies:n}},isAddress(r,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(r)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(r)||/^(?:0x)?[0-9A-F]{40}$/iu.test(r))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(r);default:return!1}},uniqueBy(r,e){const t=new Set;return r.filter(n=>{const s=n[e];return t.has(s)?!1:(t.add(s),!0)})},generateSdkVersion(r,e,t){const s=r.length===0?Cr.ADAPTER_TYPES.UNIVERSAL:r.map(i=>i.adapterType).join(",");return`${e}-${s}-${t}`},createAccount(r,e,t,n,s){return{namespace:r,address:e,type:t,publicKey:n,path:s}},isCaipAddress(r){if(typeof r!="string")return!1;const e=r.split(":"),t=e[0];return e.filter(Boolean).length===3&&t in ee.CHAIN_NAME_MAP},isMac(){const r=window==null?void 0:window.navigator.userAgent.toLowerCase();return r.includes("macintosh")&&!r.includes("safari")},formatTelegramSocialLoginUrl(r){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,t="state=";if(new URL(r).host==="auth.magic.link"){const s="provider_authorization_url=",i=r.substring(r.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),t,e);return r.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(r,t,e)},injectIntoUrl(r,e,t){const n=r.indexOf(e);if(n===-1)throw new Error(`${e} parameter not found in the URL: ${r}`);const s=r.indexOf("&",n),i=e.length,o=s!==-1?s:r.length,a=r.substring(0,n+i),c=r.substring(n+i,o),l=r.substring(s),u=c+t;return a+u+l}};async function Cu(...r){const e=await fetch(...r);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Kp{constructor({baseUrl:e,clientId:t}){this.baseUrl=e,this.clientId=t}async get({headers:e,signal:t,cache:n,...s}){const i=this.createUrl(s);return(await Cu(i,{method:"GET",headers:e,signal:t,cache:n})).json()}async getBlob({headers:e,signal:t,...n}){const s=this.createUrl(n);return(await Cu(s,{method:"GET",headers:e,signal:t})).blob()}async post({body:e,headers:t,signal:n,...s}){const i=this.createUrl(s);return(await Cu(i,{method:"POST",headers:t,body:e?JSON.stringify(e):void 0,signal:n})).json()}async put({body:e,headers:t,signal:n,...s}){const i=this.createUrl(s);return(await Cu(i,{method:"PUT",headers:t,body:e?JSON.stringify(e):void 0,signal:n})).json()}async delete({body:e,headers:t,signal:n,...s}){const i=this.createUrl(s);return(await Cu(i,{method:"DELETE",headers:t,body:e?JSON.stringify(e):void 0,signal:n})).json()}createUrl({path:e,params:t}){const n=new URL(e,this.baseUrl);return t&&Object.entries(t).forEach(([s,i])=>{i&&n.searchParams.append(s,i)}),this.clientId&&n.searchParams.append("clientId",this.clientId),n}}const nO={handleSolanaDeeplinkRedirect(r){if($.state.activeChain===ee.CHAIN.SOLANA){const e=window.location.href,t=encodeURIComponent(e);if(r==="Phantom"&&!("phantom"in window)){const n=e.startsWith("https")?"https":"http",s=e.split("/")[2],i=encodeURIComponent(`${n}://${s}`);window.location.href=`https://phantom.app/ul/browse/${t}?ref=${i}`}r==="Coinbase Wallet"&&!("coinbaseSolana"in window)&&(window.location.href=`https://go.cb-w.com/dapp?cb_url=${t}`)}}},on=Pt({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),cs={state:on,subscribeNetworkImages(r){return Mr(on.networkImages,()=>r(on.networkImages))},subscribeKey(r,e){return tn(on,r,e)},subscribe(r){return Mr(on,()=>r(on))},setWalletImage(r,e){on.walletImages[r]=e},setNetworkImage(r,e){on.networkImages[r]=e},setChainImage(r,e){on.chainImages[r]=e},setConnectorImage(r,e){on.connectorImages={...on.connectorImages,[r]:e}},setTokenImage(r,e){on.tokenImages[r]=e},setCurrencyImage(r,e){on.currencyImages[r]=e}},sO={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00"},Dg=Pt({networkImagePromises:{}}),G1={async fetchWalletImage(r){if(r)return await Te._fetchWalletImage(r),this.getWalletImageById(r)},async fetchNetworkImage(r){if(!r)return;const e=this.getNetworkImageById(r);return e||(Dg.networkImagePromises[r]||(Dg.networkImagePromises[r]=Te._fetchNetworkImage(r)),await Dg.networkImagePromises[r],this.getNetworkImageById(r))},getWalletImageById(r){if(r)return cs.state.walletImages[r]},getWalletImage(r){if(r!=null&&r.image_url)return r==null?void 0:r.image_url;if(r!=null&&r.image_id)return cs.state.walletImages[r.image_id]},getNetworkImage(r){var e,t,n;if((e=r==null?void 0:r.assets)!=null&&e.imageUrl)return(t=r==null?void 0:r.assets)==null?void 0:t.imageUrl;if((n=r==null?void 0:r.assets)!=null&&n.imageId)return cs.state.networkImages[r.assets.imageId]},getNetworkImageById(r){if(r)return cs.state.networkImages[r]},getConnectorImage(r){if(r!=null&&r.imageUrl)return r.imageUrl;if(r!=null&&r.imageId)return cs.state.connectorImages[r.imageId]},getChainImage(r){return cs.state.networkImages[sO[r]]}},iO={getFeatureValue(r,e){const t=e==null?void 0:e[r];return t===void 0?Cr.DEFAULT_FEATURES[r]:t},filterSocialsByPlatform(r){if(!r||!r.length)return r;if(Se.isTelegram()){if(Se.isIos())return r.filter(e=>e!=="google");if(Se.isMac())return r.filter(e=>e!=="x");if(Se.isAndroid())return r.filter(e=>!["facebook","x"].includes(e))}return r}},Ce=Pt({features:Cr.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:{solana:"eoa",bip122:"payment",polkadot:"eoa",eip155:"smartAccount"},enableNetworkSwitch:!0}),X={state:Ce,subscribeKey(r,e){return tn(Ce,r,e)},setOptions(r){Object.assign(Ce,r)},setFeatures(r){if(!r)return;Ce.features||(Ce.features=Cr.DEFAULT_FEATURES);const e={...Ce.features,...r};Ce.features=e,Ce.features.socials&&(Ce.features.socials=iO.filterSocialsByPlatform(Ce.features.socials))},setProjectId(r){Ce.projectId=r},setCustomRpcUrls(r){Ce.customRpcUrls=r},setAllWallets(r){Ce.allWallets=r},setIncludeWalletIds(r){Ce.includeWalletIds=r},setExcludeWalletIds(r){Ce.excludeWalletIds=r},setFeaturedWalletIds(r){Ce.featuredWalletIds=r},setTokens(r){Ce.tokens=r},setTermsConditionsUrl(r){Ce.termsConditionsUrl=r},setPrivacyPolicyUrl(r){Ce.privacyPolicyUrl=r},setCustomWallets(r){Ce.customWallets=r},setIsSiweEnabled(r){Ce.isSiweEnabled=r},setIsUniversalProvider(r){Ce.isUniversalProvider=r},setSdkVersion(r){Ce.sdkVersion=r},setMetadata(r){Ce.metadata=r},setDisableAppend(r){Ce.disableAppend=r},setEIP6963Enabled(r){Ce.enableEIP6963=r},setDebug(r){Ce.debug=r},setEnableWalletConnect(r){Ce.enableWalletConnect=r},setEnableWalletGuide(r){Ce.enableWalletGuide=r},setEnableAuthLogger(r){Ce.enableAuthLogger=r},setEnableWallets(r){Ce.enableWallets=r},setHasMultipleAddresses(r){Ce.hasMultipleAddresses=r},setSIWX(r){Ce.siwx=r},setConnectMethodsOrder(r){Ce.features={...Ce.features,connectMethodsOrder:r}},setWalletFeaturesOrder(r){Ce.features={...Ce.features,walletFeaturesOrder:r}},setSocialsOrder(r){Ce.features={...Ce.features,socials:r}},setCollapseWallets(r){Ce.features={...Ce.features,collapseWallets:r}},setEnableEmbedded(r){Ce.enableEmbedded=r},setAllowUnsupportedChain(r){Ce.allowUnsupportedChain=r},setManualWCControl(r){Ce.manualWCControl=r},setEnableNetworkSwitch(r){Ce.enableNetworkSwitch=r},setDefaultAccountTypes(r={}){Object.entries(r).forEach(([e,t])=>{t&&(Ce.defaultAccountTypes[e]=t)})},setUniversalProviderConfigOverride(r){Ce.universalProviderConfigOverride=r},getUniversalProviderConfigOverride(){return Ce.universalProviderConfigOverride},getSnapshot(){return ph(Ce)}},Li=Pt({message:"",variant:"info",open:!1}),eh={state:Li,subscribeKey(r,e){return tn(Li,r,e)},open(r,e){const{debug:t}=X.state,{shortMessage:n,longMessage:s}=r;t&&(Li.message=n,Li.variant=e,Li.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Li.open=!1,Li.message="",Li.variant="info"}},oO=Se.getAnalyticsUrl(),aO=new Kp({baseUrl:oO,clientId:null}),cO=["MODAL_CREATED"],Ys=Pt({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),mt={state:Ys,subscribe(r){return Mr(Ys,()=>r(Ys))},getSdkProperties(){const{projectId:r,sdkType:e,sdkVersion:t}=X.state;return{projectId:r,st:e,sv:t||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(r){try{const e=de.state.address;if(cO.includes(r.data.event)||typeof window>"u")return;await aO.post({path:"/e",params:mt.getSdkProperties(),body:{eventId:Se.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:r.timestamp,props:{...r.data,address:e}}}),Ys.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ee.HTTP_STATUS_CODES.FORBIDDEN&&!Ys.reportedErrors.FORBIDDEN&&(eh.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Vu()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Ys.reportedErrors.FORBIDDEN=!0)}},sendEvent(r){var e;Ys.timestamp=Date.now(),Ys.data=r,(e=X.state.features)!=null&&e.analytics&&mt._sendAnalyticsEvent(Ys)}},lO=["1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79","fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa","a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393"],uO=Se.getApiUrl(),_n=new Kp({baseUrl:uO,clientId:null}),hO=40,J0=4,dO=20,it=Pt({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Te={state:it,subscribeKey(r,e){return tn(it,r,e)},_getSdkProperties(){const{projectId:r,sdkType:e,sdkVersion:t}=X.state;return{projectId:r,st:e||"appkit",sv:t||"html-wagmi-4.2.2"}},_filterOutExtensions(r){return X.state.isUniversalProvider?r.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):r},async _fetchWalletImage(r){const e=`${_n.baseUrl}/getWalletImage/${r}`,t=await _n.getBlob({path:e,params:Te._getSdkProperties()});cs.setWalletImage(r,URL.createObjectURL(t))},async _fetchNetworkImage(r){const e=`${_n.baseUrl}/public/getAssetImage/${r}`,t=await _n.getBlob({path:e,params:Te._getSdkProperties()});cs.setNetworkImage(r,URL.createObjectURL(t))},async _fetchConnectorImage(r){const e=`${_n.baseUrl}/public/getAssetImage/${r}`,t=await _n.getBlob({path:e,params:Te._getSdkProperties()});cs.setConnectorImage(r,URL.createObjectURL(t))},async _fetchCurrencyImage(r){const e=`${_n.baseUrl}/public/getCurrencyImage/${r}`,t=await _n.getBlob({path:e,params:Te._getSdkProperties()});cs.setCurrencyImage(r,URL.createObjectURL(t))},async _fetchTokenImage(r){const e=`${_n.baseUrl}/public/getTokenImage/${r}`,t=await _n.getBlob({path:e,params:Te._getSdkProperties()});cs.setTokenImage(r,URL.createObjectURL(t))},async fetchNetworkImages(){const r=$.getAllRequestedCaipNetworks(),e=r==null?void 0:r.map(({assets:t})=>t==null?void 0:t.imageId).filter(Boolean).filter(t=>!G1.getNetworkImageById(t));e&&await Promise.allSettled(e.map(t=>Te._fetchNetworkImage(t)))},async fetchConnectorImages(){const{connectors:r}=De.state,e=r.map(({imageId:t})=>t).filter(Boolean);await Promise.allSettled(e.map(t=>Te._fetchConnectorImage(t)))},async fetchCurrencyImages(r=[]){await Promise.allSettled(r.map(e=>Te._fetchCurrencyImage(e)))},async fetchTokenImages(r=[]){await Promise.allSettled(r.map(e=>Te._fetchTokenImage(e)))},async fetchWallets(r){var n,s;const e=r.exclude??[];return Te._getSdkProperties().sv.startsWith("html-core-")&&e.push(...lO),await _n.get({path:"/getWallets",params:{...Te._getSdkProperties(),...r,page:String(r.page),entries:String(r.entries),include:(n=r.include)==null?void 0:n.join(","),exclude:(s=r.exclude)==null?void 0:s.join(",")}})},async fetchFeaturedWallets(){const{featuredWalletIds:r}=X.state;if(r!=null&&r.length){const e={...Te._getSdkProperties(),page:1,entries:(r==null?void 0:r.length)??J0,include:r},{data:t}=await Te.fetchWallets(e);t.sort((s,i)=>r.indexOf(s.id)-r.indexOf(i.id));const n=t.map(s=>s.image_id).filter(Boolean);await Promise.allSettled(n.map(s=>Te._fetchWalletImage(s))),it.featured=t,it.allFeatured=t}},async fetchRecommendedWallets(){try{it.isFetchingRecommendedWallets=!0;const{includeWalletIds:r,excludeWalletIds:e,featuredWalletIds:t}=X.state,n=[...e??[],...t??[]].filter(Boolean),s=$.getRequestedCaipNetworkIds().join(","),i={page:1,entries:J0,include:r,exclude:n,chains:s},{data:o,count:a}=await Te.fetchWallets(i),c=he.getRecentWallets(),l=o.map(h=>h.image_id).filter(Boolean),u=c.map(h=>h.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(h=>Te._fetchWalletImage(h))),it.recommended=o,it.allRecommended=o,it.count=a??0}catch{}finally{it.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:r}){const{includeWalletIds:e,excludeWalletIds:t,featuredWalletIds:n}=X.state,s=$.getRequestedCaipNetworkIds().join(","),i=[...it.recommended.map(({id:u})=>u),...t??[],...n??[]].filter(Boolean),o={page:r,entries:hO,include:e,exclude:i,chains:s},{data:a,count:c}=await Te.fetchWallets(o),l=a.slice(0,dO).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Te._fetchWalletImage(u))),it.wallets=Se.uniqueBy([...it.wallets,...Te._filterOutExtensions(a)],"id"),it.count=c>it.count?c:it.count,it.page=r},async initializeExcludedWallets({ids:r}){const e=$.getRequestedCaipNetworkIds().join(","),t={page:1,entries:r.length,include:r,chains:e},{data:n}=await Te.fetchWallets(t);n&&n.forEach(s=>{it.excludedWallets.push({rdns:s.rdns,name:s.name})})},async searchWallet({search:r,badge:e}){const{includeWalletIds:t,excludeWalletIds:n}=X.state,s=$.getRequestedCaipNetworkIds().join(",");it.search=[];const i={page:1,entries:100,search:r==null?void 0:r.trim(),badge_type:e,include:t,exclude:n,chains:s},{data:o}=await Te.fetchWallets(i);mt.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:r??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Te._fetchWalletImage(c)),Se.wait(300)]),it.search=Te._filterOutExtensions(o)},initPromise(r,e){const t=it.promises[r];return t||(it.promises[r]=e())},prefetch({fetchConnectorImages:r=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:t=!0,fetchNetworkImages:n=!0}={}){const s=[r&&Te.initPromise("connectorImages",Te.fetchConnectorImages),e&&Te.initPromise("featuredWallets",Te.fetchFeaturedWallets),t&&Te.initPromise("recommendedWallets",Te.fetchRecommendedWallets),n&&Te.initPromise("networkImages",Te.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var r;(r=X.state.features)!=null&&r.analytics&&Te.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:r}=await _n.get({path:"/getAnalyticsConfig",params:Te._getSdkProperties()});X.setFeatures({analytics:r})}catch{X.setFeatures({analytics:!1})}},setFilterByNamespace(r){if(!r){it.featured=it.allFeatured,it.recommended=it.allRecommended;return}const e=$.getRequestedCaipNetworkIds().join(",");it.featured=it.allFeatured.filter(t=>{var n;return(n=t.chains)==null?void 0:n.some(s=>e.includes(s))}),it.recommended=it.allRecommended.filter(t=>{var n;return(n=t.chains)==null?void 0:n.some(s=>e.includes(s))})}},tt=Pt({view:"Connect",history:["Connect"],transactionStack:[]}),at={state:tt,subscribeKey(r,e){return tn(tt,r,e)},pushTransactionStack(r){tt.transactionStack.push(r)},popTransactionStack(r){var t,n;const e=tt.transactionStack.pop();if(e)if(r)this.goBack(),(t=e==null?void 0:e.onCancel)==null||t.call(e);else{if(e.goBack)this.goBack();else if(e.replace){const i=tt.history.indexOf("ConnectingSiwe");i>0?this.goBackToIndex(i-1):(Lt.close(),tt.history=[])}else e.view&&this.reset(e.view);(n=e==null?void 0:e.onSuccess)==null||n.call(e)}},push(r,e){r!==tt.view&&(tt.view=r,tt.history.push(r),tt.data=e)},reset(r,e){tt.view=r,tt.history=[r],tt.data=e},replace(r,e){tt.history.at(-1)===r||(tt.view=r,tt.history[tt.history.length-1]=r,tt.data=e)},goBack(){var e;const r=!$.state.activeCaipAddress&&this.state.view==="ConnectingFarcaster";if(tt.history.length>1&&!tt.history.includes("UnsupportedChain")){tt.history.pop();const[t]=tt.history.slice(-1);t&&(tt.view=t)}else Lt.close();(e=tt.data)!=null&&e.wallet&&(tt.data.wallet=void 0),setTimeout(()=>{var t,n,s;if(r){de.setFarcasterUrl(void 0,$.state.activeChain);const i=De.getAuthConnector();(t=i==null?void 0:i.provider)==null||t.reload();const o=ph(X.state);(s=(n=i==null?void 0:i.provider)==null?void 0:n.syncDappData)==null||s.call(n,{metadata:o.metadata,sdkVersion:o.sdkVersion,projectId:o.projectId,sdkType:o.sdkType})}},100)},goBackToIndex(r){if(tt.history.length>1){tt.history=tt.history.slice(0,r+1);const[e]=tt.history.slice(-1);e&&(tt.view=e)}}},Zs=Pt({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Ar={state:Zs,subscribe(r){return Mr(Zs,()=>r(Zs))},setThemeMode(r){Zs.themeMode=r;try{const e=De.getAuthConnector();if(e){const t=Ar.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:r,themeVariables:t,w3mThemeVariables:dh(t,r)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(r){Zs.themeVariables={...Zs.themeVariables,...r};try{const e=De.getAuthConnector();if(e){const t=Ar.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:t,w3mThemeVariables:dh(Zs.themeVariables,Zs.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return ph(Zs)}},K1={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},ot=Pt({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...K1}}),De={state:ot,subscribe(r){return Mr(ot,()=>{r(ot)})},subscribeKey(r,e){return tn(ot,r,e)},initialize(r){r.forEach(e=>{const t=he.getConnectedConnectorId(e);t&&this.setConnectorId(t,e)})},setActiveConnector(r){r&&(ot.activeConnector=Ua(r))},setConnectors(r){r.filter(t=>!ot.allConnectors.some(n=>n.id===t.id&&this.getConnectorName(n.name)===this.getConnectorName(t.name)&&n.chain===t.chain)).forEach(t=>{t.type!=="MULTI_CHAIN"&&ot.allConnectors.push(Ua(t))}),ot.connectors=this.mergeMultiChainConnectors(ot.allConnectors)},removeAdapter(r){ot.allConnectors=ot.allConnectors.filter(e=>e.chain!==r),ot.connectors=this.mergeMultiChainConnectors(ot.allConnectors)},mergeMultiChainConnectors(r){const e=this.generateConnectorMapByName(r),t=[];return e.forEach(n=>{const s=n[0],i=(s==null?void 0:s.id)===ee.CONNECTOR_ID.AUTH;n.length>1&&s?t.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...n],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&t.push(s)}),t},generateConnectorMapByName(r){const e=new Map;return r.forEach(t=>{const{name:n}=t,s=this.getConnectorName(n);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===t.chain)||i.push(t),e.set(s,i)}),e},getConnectorName(r){return r&&({"Trust Wallet":"Trust"}[r]||r)},getUniqueConnectorsByName(r){const e=[];return r.forEach(t=>{e.find(n=>n.chain===t.chain)||e.push(t)}),e},addConnector(r){var e,t,n;if(r.id===ee.CONNECTOR_ID.AUTH){const s=r,i=ph(X.state),o=Ar.getSnapshot().themeMode,a=Ar.getSnapshot().themeVariables;(t=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||t.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(n=s==null?void 0:s.provider)==null||n.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:dh(a,o)}),this.setConnectors([r])}else this.setConnectors([r])},getAuthConnector(r){var n;const e=r||$.state.activeChain,t=ot.connectors.find(s=>s.id===ee.CONNECTOR_ID.AUTH);if(t)return(n=t==null?void 0:t.connectors)!=null&&n.length?t.connectors.find(i=>i.chain===e):t},getAnnouncedConnectorRdns(){return ot.connectors.filter(r=>r.type==="ANNOUNCED").map(r=>{var e;return(e=r.info)==null?void 0:e.rdns})},getConnectorById(r){return ot.allConnectors.find(e=>e.id===r)},getConnector(r,e){return ot.allConnectors.filter(n=>n.chain===$.state.activeChain).find(n=>{var s;return n.explorerId===r||((s=n.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(r){var i,o;if(r.id!=="ID_AUTH")return;const e=r,t=ph(X.state),n=Ar.getSnapshot().themeMode,s=Ar.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:t.metadata,sdkVersion:t.sdkVersion,sdkType:t.sdkType,projectId:t.projectId}),e.provider.syncTheme({themeMode:n,themeVariables:s,w3mThemeVariables:dh(s,n)})},getConnectorsByNamespace(r){const e=ot.allConnectors.filter(t=>t.chain===r);return this.mergeMultiChainConnectors(e)},selectWalletConnector(r){const e=De.getConnector(r.id,r.rdns);$.state.activeChain===ee.CHAIN.SOLANA&&nO.handleSolanaDeeplinkRedirect((e==null?void 0:e.name)||r.name||""),e?at.push("ConnectingExternal",{connector:e}):at.push("ConnectingWalletConnect",{wallet:r})},getConnectors(r){return r?this.getConnectorsByNamespace(r):this.mergeMultiChainConnectors(ot.allConnectors)},setFilterByNamespace(r){ot.filterByNamespace=r,ot.connectors=this.getConnectors(r),Te.setFilterByNamespace(r)},setConnectorId(r,e){r&&(ot.activeConnectorIds={...ot.activeConnectorIds,[e]:r},he.setConnectedConnectorId(e,r))},removeConnectorId(r){ot.activeConnectorIds={...ot.activeConnectorIds,[r]:void 0},he.deleteConnectedConnectorId(r)},getConnectorId(r){if(r)return ot.activeConnectorIds[r]},isConnected(r){return r?!!ot.activeConnectorIds[r]:Object.values(ot.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){ot.activeConnectorIds={...K1}}};function Yd(r,e){return De.getConnectorId(r)===e}function fO(r){const e=Array.from($.state.chains.keys());let t=[];return r?(t.push([r,$.state.chains.get(r)]),Yd(r,ee.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(n=>{n!==r&&Yd(n,ee.CONNECTOR_ID.WALLET_CONNECT)&&t.push([n,$.state.chains.get(n)])}):Yd(r,ee.CONNECTOR_ID.AUTH)&&e.forEach(n=>{n!==r&&Yd(n,ee.CONNECTOR_ID.AUTH)&&t.push([n,$.state.chains.get(n)])})):t=Array.from($.state.chains.entries()),t}var Ug={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ey=function(r,e){return ey=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])},ey(r,e)};function pO(r,e){ey(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ty=function(){return ty=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ty.apply(this,arguments)};function gO(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t}function mO(r,e,t,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i}function yO(r,e){return function(t,n){e(t,n,r)}}function wO(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function bO(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})}function EO(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,s=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){t.label=l[1];break}if(l[0]===6&&t.label<i[1]){t.label=i[1],i=l;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(l);break}i[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(u){l=[6,u],s=0}finally{n=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function vO(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}function AO(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function ry(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function J1(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return i}function CO(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(J1(arguments[e]));return r}function _O(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),s=0,e=0;e<t;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function gh(r){return this instanceof gh?(this.v=r,this):new gh(r)}function IO(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(d){n[d]&&(s[d]=function(f){return new Promise(function(p,g){i.push([d,f,p,g])>1||a(d,f)})})}function a(d,f){try{c(n[d](f))}catch(p){h(i[0][3],p)}}function c(d){d.value instanceof gh?Promise.resolve(d.value.v).then(l,u):h(i[0][2],d)}function l(d){a("next",d)}function u(d){a("throw",d)}function h(d,f){d(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function NO(r){var e,t;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=r[s]?function(o){return(t=!t)?{value:gh(r[s](o)),done:s==="return"}:i?i(o):o}:i}}function SO(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof ry=="function"?ry(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=r[i]&&function(o){return new Promise(function(a,c){o=r[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function TO(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function OO(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function PO(r){return r&&r.__esModule?r:{default:r}}function xO(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function RO(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const kO=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return ty},__asyncDelegator:NO,__asyncGenerator:IO,__asyncValues:SO,__await:gh,__awaiter:bO,__classPrivateFieldGet:xO,__classPrivateFieldSet:RO,__createBinding:vO,__decorate:mO,__exportStar:AO,__extends:pO,__generator:EO,__importDefault:PO,__importStar:OO,__makeTemplateObject:TO,__metadata:wO,__param:yO,__read:J1,__rest:gO,__spread:CO,__spreadArrays:_O,__values:ry},Symbol.toStringTag,{value:"Module"})),Jp=zS(kO);var Lg={},_u={},Q0;function DO(){if(Q0)return _u;Q0=1,Object.defineProperty(_u,"__esModule",{value:!0}),_u.delay=void 0;function r(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return _u.delay=r,_u}var ko={},Bg={},Do={},Y0;function UO(){return Y0||(Y0=1,Object.defineProperty(Do,"__esModule",{value:!0}),Do.ONE_THOUSAND=Do.ONE_HUNDRED=void 0,Do.ONE_HUNDRED=100,Do.ONE_THOUSAND=1e3),Do}var Mg={},Z0;function LO(){return Z0||(Z0=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ONE_YEAR=r.FOUR_WEEKS=r.THREE_WEEKS=r.TWO_WEEKS=r.ONE_WEEK=r.THIRTY_DAYS=r.SEVEN_DAYS=r.FIVE_DAYS=r.THREE_DAYS=r.ONE_DAY=r.TWENTY_FOUR_HOURS=r.TWELVE_HOURS=r.SIX_HOURS=r.THREE_HOURS=r.ONE_HOUR=r.SIXTY_MINUTES=r.THIRTY_MINUTES=r.TEN_MINUTES=r.FIVE_MINUTES=r.ONE_MINUTE=r.SIXTY_SECONDS=r.THIRTY_SECONDS=r.TEN_SECONDS=r.FIVE_SECONDS=r.ONE_SECOND=void 0,r.ONE_SECOND=1,r.FIVE_SECONDS=5,r.TEN_SECONDS=10,r.THIRTY_SECONDS=30,r.SIXTY_SECONDS=60,r.ONE_MINUTE=r.SIXTY_SECONDS,r.FIVE_MINUTES=r.ONE_MINUTE*5,r.TEN_MINUTES=r.ONE_MINUTE*10,r.THIRTY_MINUTES=r.ONE_MINUTE*30,r.SIXTY_MINUTES=r.ONE_MINUTE*60,r.ONE_HOUR=r.SIXTY_MINUTES,r.THREE_HOURS=r.ONE_HOUR*3,r.SIX_HOURS=r.ONE_HOUR*6,r.TWELVE_HOURS=r.ONE_HOUR*12,r.TWENTY_FOUR_HOURS=r.ONE_HOUR*24,r.ONE_DAY=r.TWENTY_FOUR_HOURS,r.THREE_DAYS=r.ONE_DAY*3,r.FIVE_DAYS=r.ONE_DAY*5,r.SEVEN_DAYS=r.ONE_DAY*7,r.THIRTY_DAYS=r.ONE_DAY*30,r.ONE_WEEK=r.SEVEN_DAYS,r.TWO_WEEKS=r.ONE_WEEK*2,r.THREE_WEEKS=r.ONE_WEEK*3,r.FOUR_WEEKS=r.ONE_WEEK*4,r.ONE_YEAR=r.ONE_DAY*365}(Mg)),Mg}var X0;function Q1(){return X0||(X0=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=Jp;e.__exportStar(UO(),r),e.__exportStar(LO(),r)}(Bg)),Bg}var eb;function BO(){if(eb)return ko;eb=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.fromMiliseconds=ko.toMiliseconds=void 0;const r=Q1();function e(n){return n*r.ONE_THOUSAND}ko.toMiliseconds=e;function t(n){return Math.floor(n/r.ONE_THOUSAND)}return ko.fromMiliseconds=t,ko}var tb;function MO(){return tb||(tb=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=Jp;e.__exportStar(DO(),r),e.__exportStar(BO(),r)}(Lg)),Lg}var oc={},rb;function $O(){if(rb)return oc;rb=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const n=this.get(t);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const s=Date.now()-n.started;this.timestamps.set(t,{started:n.started,elapsed:s})}get(t){const n=this.timestamps.get(t);if(typeof n>"u")throw new Error(`No timestamp found for label: ${t}`);return n}elapsed(t){const n=this.get(t);return n.elapsed||Date.now()-n.started}}return oc.Watch=r,oc.default=r,oc}var $g={},Iu={},nb;function FO(){if(nb)return Iu;nb=1,Object.defineProperty(Iu,"__esModule",{value:!0}),Iu.IWatch=void 0;class r{}return Iu.IWatch=r,Iu}var sb;function jO(){return sb||(sb=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Jp.__exportStar(FO(),r)}($g)),$g}var ib;function HO(){return ib||(ib=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=Jp;e.__exportStar(MO(),r),e.__exportStar($O(),r),e.__exportStar(jO(),r),e.__exportStar(Q1(),r)}(Ug)),Ug}var te=HO();class tc{}let VO=class extends tc{constructor(e){super()}};const ob=te.FIVE_SECONDS,hu={pulse:"heartbeat_pulse"};let qO=class Y1 extends VO{constructor(e){super(e),this.events=new ws.EventEmitter,this.interval=ob,this.interval=(e==null?void 0:e.interval)||ob}static async init(e){const t=new Y1(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),te.toMiliseconds(this.interval))}pulse(){this.events.emit(hu.pulse)}};const zO=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,WO=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,GO=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function KO(r,e){if(r==="__proto__"||r==="constructor"&&e&&typeof e=="object"&&"prototype"in e){JO(r);return}return e}function JO(r){console.warn(`[destr] Dropping "${r}" key to prevent prototype pollution.`)}function Zd(r,e={}){if(typeof r!="string")return r;if(r[0]==='"'&&r[r.length-1]==='"'&&r.indexOf("\\")===-1)return r.slice(1,-1);const t=r.trim();if(t.length<=9)switch(t.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!GO.test(r)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return r}try{if(zO.test(r)||WO.test(r)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(r,KO)}return JSON.parse(r)}catch(n){if(e.strict)throw n;return r}}function QO(r){return!r||typeof r.then!="function"?Promise.resolve(r):r}function Jt(r,...e){try{return QO(r(...e))}catch(t){return Promise.reject(t)}}function YO(r){const e=typeof r;return r===null||e!=="object"&&e!=="function"}function ZO(r){const e=Object.getPrototypeOf(r);return!e||e.isPrototypeOf(Object)}function kf(r){if(YO(r))return String(r);if(ZO(r)||Array.isArray(r))return JSON.stringify(r);if(typeof r.toJSON=="function")return kf(r.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const ny="base64:";function XO(r){return typeof r=="string"?r:ny+rP(r)}function eP(r){return typeof r!="string"||!r.startsWith(ny)?r:tP(r.slice(ny.length))}function tP(r){return globalThis.Buffer?nr.from(r,"base64"):Uint8Array.from(globalThis.atob(r),e=>e.codePointAt(0))}function rP(r){return globalThis.Buffer?nr.from(r).toString("base64"):globalThis.btoa(String.fromCodePoint(...r))}function qr(r){var e;return r&&((e=r.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function nP(...r){return qr(r.join(":"))}function Xd(r){return r=qr(r),r?r+":":""}function sP(r,e){if(e===void 0)return!0;let t=0,n=r.indexOf(":");for(;n>-1;)t++,n=r.indexOf(":",n+1);return t<=e}function iP(r,e){return e?r.startsWith(e)&&r[r.length-1]!=="$":r[r.length-1]!=="$"}const oP="memory",aP=()=>{const r=new Map;return{name:oP,getInstance:()=>r,hasItem(e){return r.has(e)},getItem(e){return r.get(e)??null},getItemRaw(e){return r.get(e)??null},setItem(e,t){r.set(e,t)},setItemRaw(e,t){r.set(e,t)},removeItem(e){r.delete(e)},getKeys(){return[...r.keys()]},clear(){r.clear()},dispose(){r.clear()}}};function cP(r={}){const e={mounts:{"":r.driver||aP()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},n=(l,u)=>e.mountpoints.filter(h=>h.startsWith(l)||u&&l.startsWith(h)).map(h=>({relativeBase:l.length>h.length?l.slice(h.length):void 0,mountpoint:h,driver:e.mounts[h]})),s=(l,u)=>{if(e.watching){u=qr(u);for(const h of e.watchListeners)h(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await ab(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,h)=>{const d=new Map,f=p=>{let g=d.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},d.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",y=qr(g?p:p.key),C=g?void 0:p.value,w=g||!p.options?u:{...u,...p.options},I=t(y);f(I).items.push({key:y,value:C,relativeKey:I.relativeKey,options:w})}return Promise.all([...d.values()].map(p=>h(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=qr(l);const{relativeKey:h,driver:d}=t(l);return Jt(d.hasItem,h,u)},getItem(l,u={}){l=qr(l);const{relativeKey:h,driver:d}=t(l);return Jt(d.getItem,h,u).then(f=>Zd(f))},getItems(l,u={}){return a(l,u,h=>h.driver.getItems?Jt(h.driver.getItems,h.items.map(d=>({key:d.relativeKey,options:d.options})),u).then(d=>d.map(f=>({key:nP(h.base,f.key),value:Zd(f.value)}))):Promise.all(h.items.map(d=>Jt(h.driver.getItem,d.relativeKey,d.options).then(f=>({key:d.key,value:Zd(f)})))))},getItemRaw(l,u={}){l=qr(l);const{relativeKey:h,driver:d}=t(l);return d.getItemRaw?Jt(d.getItemRaw,h,u):Jt(d.getItem,h,u).then(f=>eP(f))},async setItem(l,u,h={}){if(u===void 0)return c.removeItem(l);l=qr(l);const{relativeKey:d,driver:f}=t(l);f.setItem&&(await Jt(f.setItem,d,kf(u),h),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async h=>{if(h.driver.setItems)return Jt(h.driver.setItems,h.items.map(d=>({key:d.relativeKey,value:kf(d.value),options:d.options})),u);h.driver.setItem&&await Promise.all(h.items.map(d=>Jt(h.driver.setItem,d.relativeKey,kf(d.value),d.options)))})},async setItemRaw(l,u,h={}){if(u===void 0)return c.removeItem(l,h);l=qr(l);const{relativeKey:d,driver:f}=t(l);if(f.setItemRaw)await Jt(f.setItemRaw,d,u,h);else if(f.setItem)await Jt(f.setItem,d,XO(u),h);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=qr(l);const{relativeKey:h,driver:d}=t(l);d.removeItem&&(await Jt(d.removeItem,h,u),(u.removeMeta||u.removeMata)&&await Jt(d.removeItem,h+"$",u),d.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=qr(l);const{relativeKey:h,driver:d}=t(l),f=Object.create(null);if(d.getMeta&&Object.assign(f,await Jt(d.getMeta,h,u)),!u.nativeOnly){const p=await Jt(d.getItem,h+"$",u).then(g=>Zd(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,h={}){return this.setItem(l+"$",u,h)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var y;l=Xd(l);const h=n(l,!0);let d=[];const f=[];let p=!0;for(const C of h){(y=C.driver.flags)!=null&&y.maxDepth||(p=!1);const w=await Jt(C.driver.getKeys,C.relativeBase,u);for(const I of w){const U=C.mountpoint+qr(I);d.some(M=>U.startsWith(M))||f.push(U)}d=[C.mountpoint,...d.filter(I=>!I.startsWith(C.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(C=>(!g||sP(C,u.maxDepth))&&iP(C,l))},async clear(l,u={}){l=Xd(l),await Promise.all(n(l,!1).map(async h=>{if(h.driver.clear)return Jt(h.driver.clear,h.relativeBase,u);if(h.driver.removeItem){const d=await h.driver.getKeys(h.relativeBase||"",u);return Promise.all(d.map(f=>h.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>cb(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=Xd(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((h,d)=>d.length-h.length)),e.mounts[l]=u,e.watching&&Promise.resolve(ab(u,s,l)).then(h=>{e.unwatch[l]=h}).catch(console.error),c},async unmount(l,u=!0){var h,d;l=Xd(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((d=(h=e.unwatch)[l])==null||d.call(h),delete e.unwatch[l]),u&&await cb(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=qr(l)+":";const u=t(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=qr(l),n(l,u.parents).map(d=>({driver:d.driver,base:d.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,h={})=>c.setItem(l,u,h),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function ab(r,e,t){return r.watch?r.watch((n,s)=>e(n,t+s)):()=>{}}async function cb(r){typeof r.dispose=="function"&&await Jt(r.dispose)}function rc(r){return new Promise((e,t)=>{r.oncomplete=r.onsuccess=()=>e(r.result),r.onabort=r.onerror=()=>t(r.error)})}function Z1(r,e){const t=indexedDB.open(r);t.onupgradeneeded=()=>t.result.createObjectStore(e);const n=rc(t);return(s,i)=>n.then(o=>i(o.transaction(e,s).objectStore(e)))}let Fg;function Pd(){return Fg||(Fg=Z1("keyval-store","keyval")),Fg}function lb(r,e=Pd()){return e("readonly",t=>rc(t.get(r)))}function lP(r,e,t=Pd()){return t("readwrite",n=>(n.put(e,r),rc(n.transaction)))}function uP(r,e=Pd()){return e("readwrite",t=>(t.delete(r),rc(t.transaction)))}function hP(r=Pd()){return r("readwrite",e=>(e.clear(),rc(e.transaction)))}function dP(r,e){return r.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},rc(r.transaction)}function fP(r=Pd()){return r("readonly",e=>{if(e.getAllKeys)return rc(e.getAllKeys());const t=[];return dP(e,n=>t.push(n.key)).then(()=>t)})}const pP=r=>JSON.stringify(r,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),gP=r=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=r.replace(e,'$1"$2n"$3');return JSON.parse(t,(n,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function La(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return gP(r)}catch{return r}}function Ri(r){return typeof r=="string"?r:pP(r)||""}const mP="idb-keyval";var yP=(r={})=>{const e=r.base&&r.base.length>0?`${r.base}:`:"",t=s=>e+s;let n;return r.dbName&&r.storeName&&(n=Z1(r.dbName,r.storeName)),{name:mP,options:r,async hasItem(s){return!(typeof await lb(t(s),n)>"u")},async getItem(s){return await lb(t(s),n)??null},setItem(s,i){return lP(t(s),i,n)},removeItem(s){return uP(t(s),n)},getKeys(){return fP(n)},clear(){return hP(n)}}};const wP="WALLET_CONNECT_V2_INDEXED_DB",bP="keyvaluestorage";let EP=class{constructor(){this.indexedDb=cP({driver:yP({dbName:wP,storeName:bP})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,Ri(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var jg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Ee<"u"?Ee:typeof self<"u"?self:{},Df={exports:{}};(function(){let r;function e(){}r=e,r.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},r.prototype.setItem=function(t,n){this[t]=String(n)},r.prototype.removeItem=function(t){delete this[t]},r.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(n){t[n]=void 0,delete t[n]})},r.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof jg<"u"&&jg.localStorage?Df.exports=jg.localStorage:typeof window<"u"&&window.localStorage?Df.exports=window.localStorage:Df.exports=new e})();function vP(r){var e;return[r[0],La((e=r[1])!=null?e:"")]}let AP=class{constructor(){this.localStorage=Df.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(vP)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return La(t)}async setItem(e,t){this.localStorage.setItem(e,Ri(t))}async removeItem(e){this.localStorage.removeItem(e)}};const CP="wc_storage_version",ub=1,_P=async(r,e,t)=>{const n=CP,s=await e.getItem(n);if(s&&s>=ub){t(e);return}const i=await r.getKeys();if(!i.length){t(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await r.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(n,ub),t(e),IP(r,o)},IP=async(r,e)=>{e.length&&e.forEach(async t=>{await r.removeItem(t)})};let NP=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new AP;this.storage=e;try{const t=new EP;_P(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};const SP={level:"info"},xd="custom_context",xw=1e3*1024;let TP=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},hb=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new TP(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;t!==null;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}},X1=class{constructor(e,t=xw){this.level=e??"error",this.levelValue=vu.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new hb(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===vu.levels.values.error?console.error(e):t===vu.levels.values.warn?console.warn(e):t===vu.levels.values.debug?console.debug(e):t===vu.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Ri({timestamp:new Date().toISOString(),log:e}));const t=typeof e=="string"?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new hb(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(Ri({extraMetadata:e})),new Blob(t,{type:"application/json"})}},OP=class{constructor(e,t=xw){this.baseChunkLogger=new X1(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=t,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)}},PP=class{constructor(e,t=xw){this.baseChunkLogger=new X1(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var xP=Object.defineProperty,RP=Object.defineProperties,kP=Object.getOwnPropertyDescriptors,db=Object.getOwnPropertySymbols,DP=Object.prototype.hasOwnProperty,UP=Object.prototype.propertyIsEnumerable,fb=(r,e,t)=>e in r?xP(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ep=(r,e)=>{for(var t in e||(e={}))DP.call(e,t)&&fb(r,t,e[t]);if(db)for(var t of db(e))UP.call(e,t)&&fb(r,t,e[t]);return r},tp=(r,e)=>RP(r,kP(e));function du(r){return tp(ep({},r),{level:(r==null?void 0:r.level)||SP.level})}function LP(r,e=xd){return r[e]||""}function BP(r,e,t=xd){return r[t]=e,r}function rn(r,e=xd){let t="";return typeof r.bindings>"u"?t=LP(r,e):t=r.bindings().context||"",t}function MP(r,e,t=xd){const n=rn(r,t);return n.trim()?`${n}/${e}`:e}function Nr(r,e,t=xd){const n=MP(r,e,t),s=r.child({context:n});return BP(s,n,t)}function $P(r){var e,t;const n=new OP((e=r.opts)==null?void 0:e.level,r.maxSizeInBytes);return{logger:Nd(tp(ep({},r.opts),{level:"trace",browser:tp(ep({},(t=r.opts)==null?void 0:t.browser),{write:s=>n.write(s)})})),chunkLoggerController:n}}function FP(r){var e;const t=new PP((e=r.opts)==null?void 0:e.level,r.maxSizeInBytes);return{logger:Nd(tp(ep({},r.opts),{level:"trace"}),t),chunkLoggerController:t}}function Rw(r){return typeof r.loggerOverride<"u"&&typeof r.loggerOverride!="string"?{logger:r.loggerOverride,chunkLoggerController:null}:typeof window<"u"?$P(r):FP(r)}var jP=Object.defineProperty,HP=(r,e,t)=>e in r?jP(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,pb=(r,e,t)=>HP(r,typeof e!="symbol"?e+"":e,t);let VP=class extends tc{constructor(e){super(),this.opts=e,pb(this,"protocol","wc"),pb(this,"version",2)}};var qP=Object.defineProperty,zP=(r,e,t)=>e in r?qP(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,WP=(r,e,t)=>zP(r,e+"",t);let GP=class extends tc{constructor(e,t){super(),this.core=e,this.logger=t,WP(this,"records",new Map)}},KP=class{constructor(e,t){this.logger=e,this.core=t}};class JP extends tc{constructor(e,t){super(),this.relayer=e,this.logger=t}}let QP=class extends tc{constructor(e){super()}},YP=class{constructor(e,t,n,s){this.core=e,this.logger=t,this.name=n}},ZP=class extends tc{constructor(e,t){super(),this.relayer=e,this.logger=t}},XP=class extends tc{constructor(e,t){super(),this.core=e,this.logger=t}},ex=class{constructor(e,t,n){this.core=e,this.logger=t,this.store=n}},tx=class{constructor(e,t){this.projectId=e,this.logger=t}},rx=class{constructor(e,t,n){this.core=e,this.logger=t,this.telemetryEnabled=n}};var nx=Object.defineProperty,sx=(r,e,t)=>e in r?nx(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,gb=(r,e,t)=>sx(r,typeof e!="symbol"?e+"":e,t);let ix=class{constructor(e){this.opts=e,gb(this,"protocol","wc"),gb(this,"version",2)}},ox=class{constructor(e){this.client=e}};function ax(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function eC(r,...e){if(!ax(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function mb(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function cx(r,e){eC(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const ac=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hg=r=>new DataView(r.buffer,r.byteOffset,r.byteLength);function lx(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function tC(r){return typeof r=="string"&&(r=lx(r)),eC(r),r}let ux=class{clone(){return this._cloneInto()}};function hx(r){const e=n=>r().update(tC(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function rC(r=32){if(ac&&typeof ac.getRandomValues=="function")return ac.getRandomValues(new Uint8Array(r));if(ac&&typeof ac.randomBytes=="function")return ac.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}function dx(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),a=Number(t&i),c=n?4:0,l=n?0:4;r.setUint32(e+c,o,n),r.setUint32(e+l,a,n)}let fx=class extends ux{constructor(e,t,n,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Hg(this.buffer)}update(e){mb(this);const{view:t,buffer:n,blockLen:s}=this;e=tC(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Hg(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){mb(this),cx(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let h=o;h<s;h++)t[h]=0;dx(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=Hg(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%t&&e.buffer.set(n),e}};const ef=BigInt(2**32-1),sy=BigInt(32);function nC(r,e=!1){return e?{h:Number(r&ef),l:Number(r>>sy&ef)}:{h:Number(r>>sy&ef)|0,l:Number(r&ef)|0}}function px(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:i,l:o}=nC(r[s],e);[t[s],n[s]]=[i,o]}return[t,n]}const gx=(r,e)=>BigInt(r>>>0)<<sy|BigInt(e>>>0),mx=(r,e,t)=>r>>>t,yx=(r,e,t)=>r<<32-t|e>>>t,wx=(r,e,t)=>r>>>t|e<<32-t,bx=(r,e,t)=>r<<32-t|e>>>t,Ex=(r,e,t)=>r<<64-t|e>>>t-32,vx=(r,e,t)=>r>>>t-32|e<<64-t,Ax=(r,e)=>e,Cx=(r,e)=>r,_x=(r,e,t)=>r<<t|e>>>32-t,Ix=(r,e,t)=>e<<t|r>>>32-t,Nx=(r,e,t)=>e<<t-32|r>>>64-t,Sx=(r,e,t)=>r<<t-32|e>>>64-t;function Tx(r,e,t,n){const s=(e>>>0)+(n>>>0);return{h:r+t+(s/2**32|0)|0,l:s|0}}const Ox=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),Px=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,xx=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),Rx=(r,e,t,n,s)=>e+t+n+s+(r/2**32|0)|0,kx=(r,e,t,n,s)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),Dx=(r,e,t,n,s,i)=>e+t+n+s+i+(r/2**32|0)|0,Me={fromBig:nC,split:px,toBig:gx,shrSH:mx,shrSL:yx,rotrSH:wx,rotrSL:bx,rotrBH:Ex,rotrBL:vx,rotr32H:Ax,rotr32L:Cx,rotlSH:_x,rotlSL:Ix,rotlBH:Nx,rotlBL:Sx,add:Tx,add3L:Ox,add3H:Px,add4L:xx,add4H:Rx,add5H:Dx,add5L:kx},[Ux,Lx]=Me.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Bi=new Uint32Array(80),Mi=new Uint32Array(80);let Bx=class extends fx{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:h,Fl:d,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,t,n,s,i,o,a,c,l,u,h,d,f,p,g,y]}set(e,t,n,s,i,o,a,c,l,u,h,d,f,p,g,y){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=h|0,this.Fl=d|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,t){for(let I=0;I<16;I++,t+=4)Bi[I]=e.getUint32(t),Mi[I]=e.getUint32(t+=4);for(let I=16;I<80;I++){const U=Bi[I-15]|0,M=Mi[I-15]|0,B=Me.rotrSH(U,M,1)^Me.rotrSH(U,M,8)^Me.shrSH(U,M,7),L=Me.rotrSL(U,M,1)^Me.rotrSL(U,M,8)^Me.shrSL(U,M,7),m=Bi[I-2]|0,b=Mi[I-2]|0,N=Me.rotrSH(m,b,19)^Me.rotrBH(m,b,61)^Me.shrSH(m,b,6),_=Me.rotrSL(m,b,19)^Me.rotrBL(m,b,61)^Me.shrSL(m,b,6),S=Me.add4L(L,_,Mi[I-7],Mi[I-16]),k=Me.add4H(S,B,N,Bi[I-7],Bi[I-16]);Bi[I]=k|0,Mi[I]=S|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:h,El:d,Fh:f,Fl:p,Gh:g,Gl:y,Hh:C,Hl:w}=this;for(let I=0;I<80;I++){const U=Me.rotrSH(h,d,14)^Me.rotrSH(h,d,18)^Me.rotrBH(h,d,41),M=Me.rotrSL(h,d,14)^Me.rotrSL(h,d,18)^Me.rotrBL(h,d,41),B=h&f^~h&g,L=d&p^~d&y,m=Me.add5L(w,M,L,Lx[I],Mi[I]),b=Me.add5H(m,C,U,B,Ux[I],Bi[I]),N=m|0,_=Me.rotrSH(n,s,28)^Me.rotrBH(n,s,34)^Me.rotrBH(n,s,39),S=Me.rotrSL(n,s,28)^Me.rotrBL(n,s,34)^Me.rotrBL(n,s,39),k=n&i^n&a^i&a,P=s&o^s&c^o&c;C=g|0,w=y|0,g=f|0,y=p|0,f=h|0,p=d|0,{h,l:d}=Me.add(l|0,u|0,b|0,N|0),l=a|0,u=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const v=Me.add3L(N,S,P);n=Me.add3H(v,b,_,k),s=v|0}({h:n,l:s}=Me.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Me.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Me.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Me.add(this.Dh|0,this.Dl|0,l|0,u|0),{h,l:d}=Me.add(this.Eh|0,this.El|0,h|0,d|0),{h:f,l:p}=Me.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=Me.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:C,l:w}=Me.add(this.Hh|0,this.Hl|0,C|0,w|0),this.set(n,s,i,o,a,c,l,u,h,d,f,p,g,y,C,w)}roundClean(){Bi.fill(0),Mi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Mx=hx(()=>new Bx);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kw=BigInt(0),sC=BigInt(1),$x=BigInt(2);function Dw(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Uw(r){if(!Dw(r))throw new Error("Uint8Array expected")}function Vg(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}const Fx=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Lw(r){Uw(r);let e="";for(let t=0;t<r.length;t++)e+=Fx[r[t]];return e}function iC(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?kw:BigInt("0x"+r)}const Xs={_0:48,_9:57,A:65,F:70,a:97,f:102};function yb(r){if(r>=Xs._0&&r<=Xs._9)return r-Xs._0;if(r>=Xs.A&&r<=Xs.F)return r-(Xs.A-10);if(r>=Xs.a&&r<=Xs.f)return r-(Xs.a-10)}function oC(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){const o=yb(r.charCodeAt(i)),a=yb(r.charCodeAt(i+1));if(o===void 0||a===void 0){const c=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function jx(r){return iC(Lw(r))}function Uf(r){return Uw(r),iC(Lw(Uint8Array.from(r).reverse()))}function aC(r,e){return oC(r.toString(16).padStart(e*2,"0"))}function iy(r,e){return aC(r,e).reverse()}function ei(r,e,t){let n;if(typeof e=="string")try{n=oC(e)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if(Dw(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const s=n.length;if(typeof t=="number"&&s!==t)throw new Error(r+" of length "+t+" expected, got "+s);return n}function wb(...r){let e=0;for(let n=0;n<r.length;n++){const s=r[n];Uw(s),e+=s.length}const t=new Uint8Array(e);for(let n=0,s=0;n<r.length;n++){const i=r[n];t.set(i,s),s+=i.length}return t}const qg=r=>typeof r=="bigint"&&kw<=r;function Hx(r,e,t){return qg(r)&&qg(e)&&qg(t)&&e<=r&&r<t}function Nu(r,e,t,n){if(!Hx(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function Vx(r){let e;for(e=0;r>kw;r>>=sC,e+=1);return e}const qx=r=>($x<<BigInt(r-1))-sC,zx={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||Dw(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Bw(r,e,t={}){const n=(s,i,o)=>{const a=zx[i];if(typeof a!="function")throw new Error("invalid validator function");const c=r[s];if(!(o&&c===void 0)&&!a(c,r))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(t))n(s,i,!0);return r}function bb(r){const e=new WeakMap;return(t,...n)=>{const s=e.get(t);if(s!==void 0)return s;const i=r(t,...n);return e.set(t,i),i}}const er=BigInt(0),Dt=BigInt(1),Vo=BigInt(2),Wx=BigInt(3),oy=BigInt(4),Eb=BigInt(5),vb=BigInt(8);function Wt(r,e){const t=r%e;return t>=er?t:e+t}function Gx(r,e,t){if(e<er)throw new Error("invalid exponent, negatives unsupported");if(t<=er)throw new Error("invalid modulus");if(t===Dt)return er;let n=Dt;for(;e>er;)e&Dt&&(n=n*r%t),r=r*r%t,e>>=Dt;return n}function vs(r,e,t){let n=r;for(;e-- >er;)n*=n,n%=t;return n}function Ab(r,e){if(r===er)throw new Error("invert: expected non-zero number");if(e<=er)throw new Error("invert: expected positive modulus, got "+e);let t=Wt(r,e),n=e,s=er,i=Dt;for(;t!==er;){const o=n/t,a=n%t,c=s-i*o;n=t,t=a,s=i,i=c}if(n!==Dt)throw new Error("invert: does not exist");return Wt(s,e)}function Kx(r){const e=(r-Dt)/Vo;let t,n,s;for(t=r-Dt,n=0;t%Vo===er;t/=Vo,n++);for(s=Vo;s<r&&Gx(s,e,r)!==r-Dt;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(r+Dt)/oy;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(t+Dt)/Vo;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,l=o.pow(o.mul(o.ONE,s),t),u=o.pow(a,i),h=o.pow(a,t);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let d=1;for(let p=o.sqr(h);d<c&&!o.eql(p,o.ONE);d++)p=o.sqr(p);const f=o.pow(l,Dt<<BigInt(c-d-1));l=o.sqr(f),u=o.mul(u,f),h=o.mul(h,l),c=d}return u}}function Jx(r){if(r%oy===Wx){const e=(r+Dt)/oy;return function(t,n){const s=t.pow(n,e);if(!t.eql(t.sqr(s),n))throw new Error("Cannot find square root");return s}}if(r%vb===Eb){const e=(r-Eb)/vb;return function(t,n){const s=t.mul(n,Vo),i=t.pow(s,e),o=t.mul(n,i),a=t.mul(t.mul(o,Vo),i),c=t.mul(o,t.sub(a,t.ONE));if(!t.eql(t.sqr(c),n))throw new Error("Cannot find square root");return c}}return Kx(r)}const Qx=(r,e)=>(Wt(r,e)&Dt)===Dt,Yx=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Zx(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=Yx.reduce((n,s)=>(n[s]="function",n),e);return Bw(r,t)}function Xx(r,e,t){if(t<er)throw new Error("invalid exponent, negatives unsupported");if(t===er)return r.ONE;if(t===Dt)return e;let n=r.ONE,s=e;for(;t>er;)t&Dt&&(n=r.mul(n,s)),s=r.sqr(s),t>>=Dt;return n}function eR(r,e){const t=new Array(e.length),n=e.reduce((i,o,a)=>r.is0(o)?i:(t[a]=i,r.mul(i,o)),r.ONE),s=r.inv(n);return e.reduceRight((i,o,a)=>r.is0(o)?i:(t[a]=r.mul(i,t[a]),r.mul(i,o)),s),t}function cC(r,e){const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function lC(r,e,t=!1,n={}){if(r<=er)throw new Error("invalid field: expected ORDER > 0, got "+r);const{nBitLength:s,nByteLength:i}=cC(r,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:r,isLE:t,BITS:s,BYTES:i,MASK:qx(s),ZERO:er,ONE:Dt,create:c=>Wt(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return er<=c&&c<r},is0:c=>c===er,isOdd:c=>(c&Dt)===Dt,neg:c=>Wt(-c,r),eql:(c,l)=>c===l,sqr:c=>Wt(c*c,r),add:(c,l)=>Wt(c+l,r),sub:(c,l)=>Wt(c-l,r),mul:(c,l)=>Wt(c*l,r),pow:(c,l)=>Xx(a,c,l),div:(c,l)=>Wt(c*Ab(l,r),r),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Ab(c,r),sqrt:n.sqrt||(c=>(o||(o=Jx(r)),o(a,c))),invertBatch:c=>eR(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>t?iy(c,i):aC(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return t?Uf(c):jx(c)}});return Object.freeze(a)}const Cb=BigInt(0),tf=BigInt(1);function zg(r,e){const t=e.negate();return r?t:e}function uC(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function Wg(r,e){uC(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1);return{windows:t,windowSize:n}}function tR(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function rR(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const Gg=new WeakMap,hC=new WeakMap;function Kg(r){return hC.get(r)||1}function nR(r,e){return{constTimeNegate:zg,hasPrecomputes(t){return Kg(t)!==1},unsafeLadder(t,n,s=r.ZERO){let i=t;for(;n>Cb;)n&tf&&(s=s.add(i)),i=i.double(),n>>=tf;return s},precomputeWindow(t,n){const{windows:s,windowSize:i}=Wg(n,e),o=[];let a=t,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(t,n,s){const{windows:i,windowSize:o}=Wg(t,e);let a=r.ZERO,c=r.BASE;const l=BigInt(2**t-1),u=2**t,h=BigInt(t);for(let d=0;d<i;d++){const f=d*o;let p=Number(s&l);s>>=h,p>o&&(p-=u,s+=tf);const g=f,y=f+Math.abs(p)-1,C=d%2!==0,w=p<0;p===0?c=c.add(zg(C,n[g])):a=a.add(zg(w,n[y]))}return{p:a,f:c}},wNAFUnsafe(t,n,s,i=r.ZERO){const{windows:o,windowSize:a}=Wg(t,e),c=BigInt(2**t-1),l=2**t,u=BigInt(t);for(let h=0;h<o;h++){const d=h*a;if(s===Cb)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=tf),f===0)continue;let p=n[d+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(t,n,s){let i=Gg.get(n);return i||(i=this.precomputeWindow(n,t),t!==1&&Gg.set(n,s(i))),i},wNAFCached(t,n,s){const i=Kg(t);return this.wNAF(i,this.getPrecomputes(i,t,s),n)},wNAFCachedUnsafe(t,n,s,i){const o=Kg(t);return o===1?this.unsafeLadder(t,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,t,s),n,i)},setWindowSize(t,n){uC(n,e),hC.set(t,n),Gg.delete(t)}}}function sR(r,e,t,n){if(tR(t,r),rR(n,e),t.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=r.ZERO,i=Vx(BigInt(t.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let h=l;h>=0;h-=o){c.fill(s);for(let f=0;f<n.length;f++){const p=n[f],g=Number(p>>BigInt(h)&BigInt(a));c[g]=c[g].add(t[f])}let d=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),d=d.add(p);if(u=u.add(d),h!==0)for(let f=0;f<o;f++)u=u.double()}return u}function iR(r){return Zx(r.Fp),Bw(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...cC(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}const Wn=BigInt(0),Fr=BigInt(1),rf=BigInt(2),oR=BigInt(8),aR={zip215:!0};function cR(r){const e=iR(r);return Bw(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function lR(r){const e=cR(r),{Fp:t,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=rf<<BigInt(a*8)-Fr,u=t.create,h=lC(e.n,e.nBitLength),d=e.uvRatio||((v,A)=>{try{return{isValid:!0,value:t.sqrt(v*t.inv(A))}}catch{return{isValid:!1,value:Wn}}}),f=e.adjustScalarBytes||(v=>v),p=e.domain||((v,A,T)=>{if(Vg("phflag",T),A.length||T)throw new Error("Contexts/pre-hash are not supported");return v});function g(v,A){Nu("coordinate "+v,A,Wn,l)}function y(v){if(!(v instanceof I))throw new Error("ExtendedPoint expected")}const C=bb((v,A)=>{const{ex:T,ey:x,ez:R}=v,j=v.is0();A==null&&(A=j?oR:t.inv(R));const q=u(T*A),z=u(x*A),G=u(R*A);if(j)return{x:Wn,y:Fr};if(G!==Fr)throw new Error("invZ was invalid");return{x:q,y:z}}),w=bb(v=>{const{a:A,d:T}=e;if(v.is0())throw new Error("bad point: ZERO");const{ex:x,ey:R,ez:j,et:q}=v,z=u(x*x),G=u(R*R),Q=u(j*j),Y=u(Q*Q),ne=u(z*A),ie=u(Q*u(ne+G)),we=u(Y+u(T*u(z*G)));if(ie!==we)throw new Error("bad point: equation left != right (1)");const be=u(x*R),Ve=u(j*q);if(be!==Ve)throw new Error("bad point: equation left != right (2)");return!0});class I{constructor(A,T,x,R){this.ex=A,this.ey=T,this.ez=x,this.et=R,g("x",A),g("y",T),g("z",x),g("t",R),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(A){if(A instanceof I)throw new Error("extended point not allowed");const{x:T,y:x}=A||{};return g("x",T),g("y",x),new I(T,x,Fr,u(T*x))}static normalizeZ(A){const T=t.invertBatch(A.map(x=>x.ez));return A.map((x,R)=>x.toAffine(T[R])).map(I.fromAffine)}static msm(A,T){return sR(I,h,A,T)}_setWindowSize(A){B.setWindowSize(this,A)}assertValidity(){w(this)}equals(A){y(A);const{ex:T,ey:x,ez:R}=this,{ex:j,ey:q,ez:z}=A,G=u(T*z),Q=u(j*R),Y=u(x*z),ne=u(q*R);return G===Q&&Y===ne}is0(){return this.equals(I.ZERO)}negate(){return new I(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:A}=e,{ex:T,ey:x,ez:R}=this,j=u(T*T),q=u(x*x),z=u(rf*u(R*R)),G=u(A*j),Q=T+x,Y=u(u(Q*Q)-j-q),ne=G+q,ie=ne-z,we=G-q,be=u(Y*ie),Ve=u(ne*we),Le=u(Y*we),je=u(ie*ne);return new I(be,Ve,je,Le)}add(A){y(A);const{a:T,d:x}=e,{ex:R,ey:j,ez:q,et:z}=this,{ex:G,ey:Q,ez:Y,et:ne}=A;if(T===BigInt(-1)){const k0=u((j-R)*(Q+G)),D0=u((j+R)*(Q-G)),Og=u(D0-k0);if(Og===Wn)return this.double();const U0=u(q*rf*ne),L0=u(z*rf*Y),B0=L0+U0,M0=D0+k0,$0=L0-U0,MS=u(B0*Og),$S=u(M0*$0),FS=u(B0*$0),jS=u(Og*M0);return new I(MS,$S,jS,FS)}const ie=u(R*G),we=u(j*Q),be=u(z*x*ne),Ve=u(q*Y),Le=u((R+j)*(G+Q)-ie-we),je=Ve-be,ye=Ve+be,pe=u(we-T*ie),Ne=u(Le*je),sn=u(ye*pe),Jd=u(Le*pe),BS=u(je*ye);return new I(Ne,sn,BS,Jd)}subtract(A){return this.add(A.negate())}wNAF(A){return B.wNAFCached(this,A,I.normalizeZ)}multiply(A){const T=A;Nu("scalar",T,Fr,n);const{p:x,f:R}=this.wNAF(T);return I.normalizeZ([x,R])[0]}multiplyUnsafe(A,T=I.ZERO){const x=A;return Nu("scalar",x,Wn,n),x===Wn?M:this.is0()||x===Fr?this:B.wNAFCachedUnsafe(this,x,I.normalizeZ,T)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return B.unsafeLadder(this,n).is0()}toAffine(A){return C(this,A)}clearCofactor(){const{h:A}=e;return A===Fr?this:this.multiplyUnsafe(A)}static fromHex(A,T=!1){const{d:x,a:R}=e,j=t.BYTES;A=ei("pointHex",A,j),Vg("zip215",T);const q=A.slice(),z=A[j-1];q[j-1]=z&-129;const G=Uf(q),Q=T?l:t.ORDER;Nu("pointHex.y",G,Wn,Q);const Y=u(G*G),ne=u(Y-Fr),ie=u(x*Y-R);let{isValid:we,value:be}=d(ne,ie);if(!we)throw new Error("Point.fromHex: invalid y coordinate");const Ve=(be&Fr)===Fr,Le=(z&128)!==0;if(!T&&be===Wn&&Le)throw new Error("Point.fromHex: x=0 and x_0=1");return Le!==Ve&&(be=u(-be)),I.fromAffine({x:be,y:G})}static fromPrivateKey(A){return b(A).point}toRawBytes(){const{x:A,y:T}=this.toAffine(),x=iy(T,t.BYTES);return x[x.length-1]|=A&Fr?128:0,x}toHex(){return Lw(this.toRawBytes())}}I.BASE=new I(e.Gx,e.Gy,Fr,u(e.Gx*e.Gy)),I.ZERO=new I(Wn,Fr,Fr,Wn);const{BASE:U,ZERO:M}=I,B=nR(I,a*8);function L(v){return Wt(v,n)}function m(v){return L(Uf(v))}function b(v){const A=t.BYTES;v=ei("private key",v,A);const T=ei("hashed private key",i(v),2*A),x=f(T.slice(0,A)),R=T.slice(A,2*A),j=m(x),q=U.multiply(j),z=q.toRawBytes();return{head:x,prefix:R,scalar:j,point:q,pointBytes:z}}function N(v){return b(v).pointBytes}function _(v=new Uint8Array,...A){const T=wb(...A);return m(i(p(T,ei("context",v),!!s)))}function S(v,A,T={}){v=ei("message",v),s&&(v=s(v));const{prefix:x,scalar:R,pointBytes:j}=b(A),q=_(T.context,x,v),z=U.multiply(q).toRawBytes(),G=_(T.context,z,j,v),Q=L(q+G*R);Nu("signature.s",Q,Wn,n);const Y=wb(z,iy(Q,t.BYTES));return ei("result",Y,t.BYTES*2)}const k=aR;function P(v,A,T,x=k){const{context:R,zip215:j}=x,q=t.BYTES;v=ei("signature",v,2*q),A=ei("message",A),T=ei("publicKey",T,q),j!==void 0&&Vg("zip215",j),s&&(A=s(A));const z=Uf(v.slice(q,2*q));let G,Q,Y;try{G=I.fromHex(T,j),Q=I.fromHex(v.slice(0,q),j),Y=U.multiplyUnsafe(z)}catch{return!1}if(!j&&G.isSmallOrder())return!1;const ne=_(R,Q.toRawBytes(),G.toRawBytes(),A);return Q.add(G.multiplyUnsafe(ne)).subtract(Y).clearCofactor().equals(I.ZERO)}return U._setWindowSize(8),{CURVE:e,getPublicKey:N,sign:S,verify:P,ExtendedPoint:I,utils:{getExtendedPublicKey:b,randomPrivateKey:()=>o(t.BYTES),precompute(v=8,A=I.BASE){return A._setWindowSize(v),A.multiply(BigInt(3)),A}}}}BigInt(0),BigInt(1);const Mw=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),_b=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const uR=BigInt(1),Ib=BigInt(2);BigInt(3);const hR=BigInt(5),dR=BigInt(8);function fR(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),s=BigInt(80),i=Mw,o=r*r%i*r%i,a=vs(o,Ib,i)*o%i,c=vs(a,uR,i)*r%i,l=vs(c,hR,i)*c%i,u=vs(l,e,i)*l%i,h=vs(u,t,i)*u%i,d=vs(h,n,i)*h%i,f=vs(d,s,i)*d%i,p=vs(f,s,i)*d%i,g=vs(p,e,i)*l%i;return{pow_p_5_8:vs(g,Ib,i)*r%i,b2:o}}function pR(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function gR(r,e){const t=Mw,n=Wt(e*e*e,t),s=Wt(n*n*e,t),i=fR(r*s).pow_p_5_8;let o=Wt(r*n*i,t);const a=Wt(e*o*o,t),c=o,l=Wt(o*_b,t),u=a===r,h=a===Wt(-r,t),d=a===Wt(-r*_b,t);return u&&(o=c),(h||d)&&(o=l),Qx(o,t)&&(o=Wt(-o,t)),{isValid:u||h,value:o}}const mR=lC(Mw,void 0,!0),yR={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:mR,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:dR,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Mx,randomBytes:rC,adjustScalarBytes:pR,uvRatio:gR},dC=lR(yR),wR="EdDSA",bR="JWT",rp=".",Qp="base64url",fC="utf8",pC="utf8",ER=":",vR="did",AR="key",Nb="base58btc",CR="z",_R="K36",IR=32;function $w(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function gC(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?$w(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function mC(r,e){e||(e=r.reduce((s,i)=>s+i.length,0));const t=gC(e);let n=0;for(const s of r)t.set(s,n),n+=s.length;return $w(t)}function NR(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var s=0;s<r.length;s++){var i=r.charAt(s),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=s}var a=r.length,c=r.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,C=0,w=p.length;C!==w&&p[C]===0;)C++,g++;for(var I=(w-C)*u+1>>>0,U=new Uint8Array(I);C!==w;){for(var M=p[C],B=0,L=I-1;(M!==0||B<y)&&L!==-1;L--,B++)M+=256*U[L]>>>0,U[L]=M%a>>>0,M=M/a>>>0;if(M!==0)throw new Error("Non-zero carry");y=B,C++}for(var m=I-y;m!==I&&U[m]===0;)m++;for(var b=c.repeat(g);m<I;++m)b+=r.charAt(U[m]);return b}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,C=0;p[g]===c;)y++,g++;for(var w=(p.length-g)*l+1>>>0,I=new Uint8Array(w);p[g];){var U=t[p.charCodeAt(g)];if(U===255)return;for(var M=0,B=w-1;(U!==0||M<C)&&B!==-1;B--,M++)U+=a*I[B]>>>0,I[B]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");C=M,g++}if(p[g]!==" "){for(var L=w-C;L!==w&&I[L]===0;)L++;for(var m=new Uint8Array(y+(w-L)),b=y;L!==w;)m[b++]=I[L++];return m}}}function f(p){var g=d(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var SR=NR,TR=SR;const yC=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},OR=r=>new TextEncoder().encode(r),PR=r=>new TextDecoder().decode(r);let xR=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},RR=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return wC(this,e)}},kR=class{constructor(e){this.decoders=e}or(e){return wC(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const wC=(r,e)=>new kR({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});let DR=class{constructor(e,t,n,s){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=s,this.encoder=new xR(e,t,n),this.decoder=new RR(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Yp=({name:r,prefix:e,encode:t,decode:n})=>new DR(r,e,t,n),Rd=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:s}=TR(t,e);return Yp({prefix:r,name:e,encode:n,decode:i=>yC(s(i))})},UR=(r,e,t,n)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=r.length;for(;r[i-1]==="=";)--i;const o=new Uint8Array(i*t/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const h=s[r[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|h,a+=t,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=t||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},LR=(r,e,t)=>{const n=e[e.length-1]==="=",s=(1<<t)-1;let i="",o=0,a=0;for(let c=0;c<r.length;++c)for(a=a<<8|r[c],o+=8;o>t;)o-=t,i+=e[s&a>>o];if(o&&(i+=e[s&a<<t-o]),n)for(;i.length*t&7;)i+="=";return i},pr=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Yp({prefix:e,name:r,encode(s){return LR(s,n,t)},decode(s){return UR(s,n,t,r)}}),BR=Yp({prefix:"\0",name:"identity",encode:r=>PR(r),decode:r=>OR(r)});var MR=Object.freeze({__proto__:null,identity:BR});const $R=pr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var FR=Object.freeze({__proto__:null,base2:$R});const jR=pr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var HR=Object.freeze({__proto__:null,base8:jR});const VR=Rd({prefix:"9",name:"base10",alphabet:"0123456789"});var qR=Object.freeze({__proto__:null,base10:VR});const zR=pr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),WR=pr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var GR=Object.freeze({__proto__:null,base16:zR,base16upper:WR});const KR=pr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),JR=pr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),QR=pr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),YR=pr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ZR=pr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),XR=pr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),e2=pr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),t2=pr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),r2=pr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var n2=Object.freeze({__proto__:null,base32:KR,base32upper:JR,base32pad:QR,base32padupper:YR,base32hex:ZR,base32hexupper:XR,base32hexpad:e2,base32hexpadupper:t2,base32z:r2});const s2=Rd({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),i2=Rd({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var o2=Object.freeze({__proto__:null,base36:s2,base36upper:i2});const a2=Rd({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),c2=Rd({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var l2=Object.freeze({__proto__:null,base58btc:a2,base58flickr:c2});const u2=pr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),h2=pr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),d2=pr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),f2=pr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var p2=Object.freeze({__proto__:null,base64:u2,base64pad:h2,base64url:d2,base64urlpad:f2});const bC=Array.from(""),g2=bC.reduce((r,e,t)=>(r[t]=e,r),[]),m2=bC.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function y2(r){return r.reduce((e,t)=>(e+=g2[t],e),"")}function w2(r){const e=[];for(const t of r){const n=m2[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}const b2=Yp({prefix:"",name:"base256emoji",encode:y2,decode:w2});var E2=Object.freeze({__proto__:null,base256emoji:b2}),v2=EC,Sb=128,A2=-128,C2=Math.pow(2,31);function EC(r,e,t){e=e||[],t=t||0;for(var n=t;r>=C2;)e[t++]=r&255|Sb,r/=128;for(;r&A2;)e[t++]=r&255|Sb,r>>>=7;return e[t]=r|0,EC.bytes=t-n+1,e}var _2=ay,I2=128,Tb=127;function ay(r,n){var t=0,n=n||0,s=0,i=n,o,a=r.length;do{if(i>=a)throw ay.bytes=0,new RangeError("Could not decode varint");o=r[i++],t+=s<28?(o&Tb)<<s:(o&Tb)*Math.pow(2,s),s+=7}while(o>=I2);return ay.bytes=i-n,t}var N2=Math.pow(2,7),S2=Math.pow(2,14),T2=Math.pow(2,21),O2=Math.pow(2,28),P2=Math.pow(2,35),x2=Math.pow(2,42),R2=Math.pow(2,49),k2=Math.pow(2,56),D2=Math.pow(2,63),U2=function(r){return r<N2?1:r<S2?2:r<T2?3:r<O2?4:r<P2?5:r<x2?6:r<R2?7:r<k2?8:r<D2?9:10},L2={encode:v2,decode:_2,encodingLength:U2},vC=L2;const Ob=(r,e,t=0)=>(vC.encode(r,e,t),e),Pb=r=>vC.encodingLength(r),cy=(r,e)=>{const t=e.byteLength,n=Pb(r),s=n+Pb(t),i=new Uint8Array(s+t);return Ob(r,i,0),Ob(t,i,n),i.set(e,s),new B2(r,t,e,i)};let B2=class{constructor(e,t,n,s){this.code=e,this.size=t,this.digest=n,this.bytes=s}};const AC=({name:r,code:e,encode:t})=>new M2(r,e,t);let M2=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?cy(this.code,t):t.then(n=>cy(this.code,n))}else throw Error("Unknown type, must be binary type")}};const CC=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),$2=AC({name:"sha2-256",code:18,encode:CC("SHA-256")}),F2=AC({name:"sha2-512",code:19,encode:CC("SHA-512")});var j2=Object.freeze({__proto__:null,sha256:$2,sha512:F2});const _C=0,H2="identity",IC=yC,V2=r=>cy(_C,IC(r)),q2={code:_C,name:H2,encode:IC,digest:V2};var z2=Object.freeze({__proto__:null,identity:q2});new TextEncoder,new TextDecoder;const xb={...MR,...FR,...HR,...qR,...GR,...n2,...o2,...l2,...p2,...E2};({...j2,...z2});function NC(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const Rb=NC("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Jg=NC("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=gC(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),SC={utf8:Rb,"utf-8":Rb,hex:xb.base16,latin1:Jg,ascii:Jg,binary:Jg,...xb};function Zp(r,e="utf8"){const t=SC[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}function fu(r,e="utf8"){const t=SC[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?$w(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}function kb(r){return La(Zp(fu(r,Qp),fC))}function np(r){return Zp(fu(Ri(r),fC),Qp)}function TC(r){const e=fu(_R,Nb),t=CR+Zp(mC([e,r]),Nb);return[vR,AR,t].join(ER)}function W2(r){return Zp(r,Qp)}function G2(r){return fu(r,Qp)}function K2(r){return fu([np(r.header),np(r.payload)].join(rp),pC)}function J2(r){return[np(r.header),np(r.payload),W2(r.signature)].join(rp)}function ly(r){const e=r.split(rp),t=kb(e[0]),n=kb(e[1]),s=G2(e[2]),i=fu(e.slice(0,2).join(rp),pC);return{header:t,payload:n,signature:s,data:i}}function Db(r=rC(IR)){const e=dC.getPublicKey(r);return{secretKey:mC([r,e]),publicKey:e}}async function Q2(r,e,t,n,s=te.fromMiliseconds(Date.now())){const i={alg:wR,typ:bR},o=TC(n.publicKey),a=s+t,c={iss:o,sub:r,aud:e,iat:s,exp:a},l=K2({header:i,payload:c}),u=dC.sign(l,n.secretKey.slice(0,32));return J2({header:i,payload:c,signature:u})}var Ub=function(r,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},Y2=function(){function r(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"}return r}(),Z2=function(){function r(e){this.version=e,this.type="node",this.name="node",this.os=Zr.platform}return r}(),X2=function(){function r(e,t,n,s){this.name=e,this.version=t,this.os=n,this.bot=s,this.type="bot-device"}return r}(),ek=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}(),tk=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}(),rk=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,nk=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Lb=3,sk=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",rk]],Bb=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ik(r){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new tk:typeof navigator<"u"?ak(navigator.userAgent):lk()}function ok(r){return r!==""&&sk.reduce(function(e,t){var n=t[0],s=t[1];if(e)return e;var i=s.exec(r);return!!i&&[n,i]},!1)}function ak(r){var e=ok(r);if(!e)return null;var t=e[0],n=e[1];if(t==="searchbot")return new ek;var s=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);s?s.length<Lb&&(s=Ub(Ub([],s,!0),uk(Lb-s.length),!0)):s=[];var i=s.join("."),o=ck(r),a=nk.exec(r);return a&&a[1]?new X2(t,i,o,a[1]):new Y2(t,i,o)}function ck(r){for(var e=0,t=Bb.length;e<t;e++){var n=Bb[e],s=n[0],i=n[1],o=i.exec(r);if(o)return s}return null}function lk(){var r=typeof Zr<"u"&&Zr.version;return r?new Z2(Zr.version.slice(1)):null}function uk(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}var dt={},Mb;function OC(){if(Mb)return dt;Mb=1,Object.defineProperty(dt,"__esModule",{value:!0}),dt.getLocalStorage=dt.getLocalStorageOrThrow=dt.getCrypto=dt.getCryptoOrThrow=dt.getLocation=dt.getLocationOrThrow=dt.getNavigator=dt.getNavigatorOrThrow=dt.getDocument=dt.getDocumentOrThrow=dt.getFromWindowOrThrow=dt.getFromWindow=void 0;function r(d){let f;return typeof window<"u"&&typeof window[d]<"u"&&(f=window[d]),f}dt.getFromWindow=r;function e(d){const f=r(d);if(!f)throw new Error(`${d} is not defined in Window`);return f}dt.getFromWindowOrThrow=e;function t(){return e("document")}dt.getDocumentOrThrow=t;function n(){return r("document")}dt.getDocument=n;function s(){return e("navigator")}dt.getNavigatorOrThrow=s;function i(){return r("navigator")}dt.getNavigator=i;function o(){return e("location")}dt.getLocationOrThrow=o;function a(){return r("location")}dt.getLocation=a;function c(){return e("crypto")}dt.getCryptoOrThrow=c;function l(){return r("crypto")}dt.getCrypto=l;function u(){return e("localStorage")}dt.getLocalStorageOrThrow=u;function h(){return r("localStorage")}return dt.getLocalStorage=h,dt}var Ba=OC(),Su={},$b;function hk(){if($b)return Su;$b=1,Object.defineProperty(Su,"__esModule",{value:!0}),Su.getWindowMetadata=void 0;const r=OC();function e(){let t,n;try{t=r.getDocumentOrThrow(),n=r.getLocationOrThrow()}catch{return null}function s(){const f=t.getElementsByTagName("link"),p=[];for(let g=0;g<f.length;g++){const y=f[g],C=y.getAttribute("rel");if(C&&C.toLowerCase().indexOf("icon")>-1){const w=y.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let I=n.protocol+"//"+n.host;if(w.indexOf("/")===0)I+=w;else{const U=n.pathname.split("/");U.pop();const M=U.join("/");I+=M+"/"+w}p.push(I)}else if(w.indexOf("//")===0){const I=n.protocol+w;p.push(I)}else p.push(w)}}return p}function i(...f){const p=t.getElementsByTagName("meta");for(let g=0;g<p.length;g++){const y=p[g],C=["itemprop","property","name"].map(w=>y.getAttribute(w)).filter(w=>w?f.includes(w):!1);if(C.length&&C){const w=y.getAttribute("content");if(w)return w}}return""}function o(){let f=i("name","og:site_name","og:title","twitter:title");return f||(f=t.title),f}function a(){return i("description","og:description","twitter:description","keywords")}const c=o(),l=a(),u=n.origin,h=s();return{description:l,url:u,icons:h,name:c}}return Su.getWindowMetadata=e,Su}var dk=hk();function mh(r,{strict:e=!0}={}){return!r||typeof r!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(r):r.startsWith("0x")}function Fb(r){return mh(r,{strict:!1})?Math.ceil((r.length-2)/2):r.length}const PC="2.23.2";let Tu={getDocsUrl:({docsBaseUrl:r,docsPath:e="",docsSlug:t})=>e?`${r??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${PC}`},Xp=class uy extends Error{constructor(e,t={}){var a;const n=(()=>{var c;return t.cause instanceof uy?t.cause.details:(c=t.cause)!=null&&c.message?t.cause.message:t.details})(),s=t.cause instanceof uy&&t.cause.docsPath||t.docsPath,i=(a=Tu.getDocsUrl)==null?void 0:a.call(Tu,{...t,docsPath:s}),o=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...n?[`Details: ${n}`]:[],...Tu.version?[`Version: ${Tu.version}`]:[]].join(`
`);super(o,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=s,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=PC}walk(e){return xC(this,e)}};function xC(r,e){return e!=null&&e(r)?r:r&&typeof r=="object"&&"cause"in r&&r.cause!==void 0?xC(r.cause,e):e?null:r}let RC=class extends Xp{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}};function pu(r,{dir:e,size:t=32}={}){return typeof r=="string"?fk(r,{dir:e,size:t}):pk(r,{dir:e,size:t})}function fk(r,{dir:e,size:t=32}={}){if(t===null)return r;const n=r.replace("0x","");if(n.length>t*2)throw new RC({size:Math.ceil(n.length/2),targetSize:t,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function pk(r,{dir:e,size:t=32}={}){if(t===null)return r;if(r.length>t)throw new RC({size:r.length,targetSize:t,type:"bytes"});const n=new Uint8Array(t);for(let s=0;s<t;s++){const i=e==="right";n[i?s:t-s-1]=r[i?s:r.length-s-1]}return n}let gk=class extends Xp{constructor({max:e,min:t,signed:n,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}},mk=class extends Xp{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function gu(r,{size:e}){if(Fb(r)>e)throw new mk({givenSize:Fb(r),maxSize:e})}function hy(r,e={}){const{signed:t}=e;e.size&&gu(r,{size:e.size});const n=BigInt(r);if(!t)return n;const s=(r.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return n<=i?n:n-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function yk(r,e={}){return Number(hy(r,e))}const wk=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function dy(r,e={}){return typeof r=="number"||typeof r=="bigint"?DC(r,e):typeof r=="string"?vk(r,e):typeof r=="boolean"?bk(r,e):kC(r,e)}function bk(r,e={}){const t=`0x${Number(r)}`;return typeof e.size=="number"?(gu(t,{size:e.size}),pu(t,{size:e.size})):t}function kC(r,e={}){let t="";for(let s=0;s<r.length;s++)t+=wk[r[s]];const n=`0x${t}`;return typeof e.size=="number"?(gu(n,{size:e.size}),pu(n,{dir:"right",size:e.size})):n}function DC(r,e={}){const{signed:t,size:n}=e,s=BigInt(r);let i;n?t?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof r=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&t?-i-1n:0;if(i&&s>i||s<o){const c=typeof r=="bigint"?"n":"";throw new gk({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:t,size:n,value:`${r}${c}`})}const a=`0x${(t&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?pu(a,{size:n}):a}const Ek=new TextEncoder;function vk(r,e={}){const t=Ek.encode(r);return kC(t,e)}const Ak=new TextEncoder;function Ck(r,e={}){return typeof r=="number"||typeof r=="bigint"?Ik(r,e):typeof r=="boolean"?_k(r,e):mh(r)?UC(r,e):LC(r,e)}function _k(r,e={}){const t=new Uint8Array(1);return t[0]=Number(r),typeof e.size=="number"?(gu(t,{size:e.size}),pu(t,{size:e.size})):t}const ti={zero:48,nine:57,A:65,F:70,a:97,f:102};function jb(r){if(r>=ti.zero&&r<=ti.nine)return r-ti.zero;if(r>=ti.A&&r<=ti.F)return r-(ti.A-10);if(r>=ti.a&&r<=ti.f)return r-(ti.a-10)}function UC(r,e={}){let t=r;e.size&&(gu(t,{size:e.size}),t=pu(t,{dir:"right",size:e.size}));let n=t.slice(2);n.length%2&&(n=`0${n}`);const s=n.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=jb(n.charCodeAt(a++)),l=jb(n.charCodeAt(a++));if(c===void 0||l===void 0)throw new Xp(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);i[o]=c*16+l}return i}function Ik(r,e){const t=DC(r,e);return UC(t)}function LC(r,e={}){const t=Ak.encode(r);return typeof e.size=="number"?(gu(t,{size:e.size}),pu(t,{dir:"right",size:e.size})):t}function Hb(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Nk(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Fw(r,...e){if(!Nk(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function Vb(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function Sk(r,e){Fw(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const nf=BigInt(2**32-1),qb=BigInt(32);function Tk(r,e=!1){return e?{h:Number(r&nf),l:Number(r>>qb&nf)}:{h:Number(r>>qb&nf)|0,l:Number(r&nf)|0}}function Ok(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:i,l:o}=Tk(r[s],e);[t[s],n[s]]=[i,o]}return[t,n]}const Pk=(r,e,t)=>r<<t|e>>>32-t,xk=(r,e,t)=>e<<t|r>>>32-t,Rk=(r,e,t)=>e<<t-32|r>>>64-t,kk=(r,e,t)=>r<<t-32|e>>>64-t;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Dk(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}const zb=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Uk(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function Wb(r){for(let e=0;e<r.length;e++)r[e]=Uk(r[e])}function Lk(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function BC(r){return typeof r=="string"&&(r=Lk(r)),Fw(r),r}let Bk=class{clone(){return this._cloneInto()}};function Mk(r){const e=n=>r().update(BC(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}const MC=[],$C=[],FC=[],$k=BigInt(0),Ou=BigInt(1),Fk=BigInt(2),jk=BigInt(7),Hk=BigInt(256),Vk=BigInt(113);for(let r=0,e=Ou,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],MC.push(2*(5*n+t)),$C.push((r+1)*(r+2)/2%64);let s=$k;for(let i=0;i<7;i++)e=(e<<Ou^(e>>jk)*Vk)%Hk,e&Fk&&(s^=Ou<<(Ou<<BigInt(i))-Ou);FC.push(s)}const[qk,zk]=Ok(FC,!0),Gb=(r,e,t)=>t>32?Rk(r,e,t):Pk(r,e,t),Kb=(r,e,t)=>t>32?kk(r,e,t):xk(r,e,t);function Wk(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=t[c],u=t[c+1],h=Gb(l,u,1)^t[a],d=Kb(l,u,1)^t[a+1];for(let f=0;f<50;f+=10)r[o+f]^=h,r[o+f+1]^=d}let s=r[2],i=r[3];for(let o=0;o<24;o++){const a=$C[o],c=Gb(s,i,a),l=Kb(s,i,a),u=MC[o];s=r[u],i=r[u+1],r[u]=c,r[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}r[0]^=qk[n],r[1]^=zk[n]}t.fill(0)}let Gk=class jC extends Bk{constructor(e,t,n,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Hb(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Dk(this.state)}keccak(){zb||Wb(this.state32),Wk(this.state32,this.rounds),zb||Wb(this.state32),this.posOut=0,this.pos=0}update(e){Vb(this);const{blockLen:t,state:n}=this;e=BC(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(t-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,(t&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Vb(this,!1),Fw(e),this.finish();const t=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Hb(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Sk(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new jC(t,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Kk=(r,e,t)=>Mk(()=>new Gk(e,r,t)),Jk=Kk(1,136,256/8);function HC(r,e){const t=e||"hex",n=Jk(mh(r,{strict:!1})?Ck(r):r);return t==="bytes"?n:dy(n)}let Qk=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}};const Qg=new Qk(8192);function Yk(r,e){if(Qg.has(`${r}.${e}`))return Qg.get(`${r}.${e}`);const t=r.substring(2).toLowerCase(),n=HC(LC(t),"bytes"),s=t.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(n[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return Qg.set(`${r}.${e}`,i),i}function Zk(r){const e=HC(`0x${r.substring(4)}`).substring(26);return Yk(`0x${e}`)}async function Xk({hash:r,signature:e}){const t=mh(r)?r:dy(r),{secp256k1:n}=await kn(async()=>{const{secp256k1:o}=await import("./secp256k1-CawA04_n.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:h,yParity:d}=e,f=Number(d??h),p=Jb(f);return new n.Signature(hy(l),hy(u)).addRecoveryBit(p)}const o=mh(e)?e:dy(e),a=yk(`0x${o.slice(130)}`),c=Jb(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(t.substring(2)).toHex(!1)}`}function Jb(r){if(r===0||r===1)return r;if(r===27)return 0;if(r===28)return 1;throw new Error("Invalid yParityOrV value")}async function eD({hash:r,signature:e}){return Zk(await Xk({hash:r,signature:e}))}function VC(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function th(r,e){e||(e=r.reduce((s,i)=>s+i.length,0));const t=VC(e);let n=0;for(const s of r)t.set(s,n),n+=s.length;return t}function tD(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var s=0;s<r.length;s++){var i=r.charAt(s),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=s}var a=r.length,c=r.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,C=0,w=p.length;C!==w&&p[C]===0;)C++,g++;for(var I=(w-C)*u+1>>>0,U=new Uint8Array(I);C!==w;){for(var M=p[C],B=0,L=I-1;(M!==0||B<y)&&L!==-1;L--,B++)M+=256*U[L]>>>0,U[L]=M%a>>>0,M=M/a>>>0;if(M!==0)throw new Error("Non-zero carry");y=B,C++}for(var m=I-y;m!==I&&U[m]===0;)m++;for(var b=c.repeat(g);m<I;++m)b+=r.charAt(U[m]);return b}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,C=0;p[g]===c;)y++,g++;for(var w=(p.length-g)*l+1>>>0,I=new Uint8Array(w);p[g];){var U=t[p.charCodeAt(g)];if(U===255)return;for(var M=0,B=w-1;(U!==0||M<C)&&B!==-1;B--,M++)U+=a*I[B]>>>0,I[B]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");C=M,g++}if(p[g]!==" "){for(var L=w-C;L!==w&&I[L]===0;)L++;for(var m=new Uint8Array(y+(w-L)),b=y;L!==w;)m[b++]=I[L++];return m}}}function f(p){var g=d(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var rD=tD,nD=rD;const sD=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},iD=r=>new TextEncoder().encode(r),oD=r=>new TextDecoder().decode(r);class aD{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class cD{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return qC(this,e)}}class lD{constructor(e){this.decoders=e}or(e){return qC(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const qC=(r,e)=>new lD({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class uD{constructor(e,t,n,s){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=s,this.encoder=new aD(e,t,n),this.decoder=new cD(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const eg=({name:r,prefix:e,encode:t,decode:n})=>new uD(r,e,t,n),kd=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:s}=nD(t,e);return eg({prefix:r,name:e,encode:n,decode:i=>sD(s(i))})},hD=(r,e,t,n)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=r.length;for(;r[i-1]==="=";)--i;const o=new Uint8Array(i*t/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const h=s[r[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|h,a+=t,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=t||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},dD=(r,e,t)=>{const n=e[e.length-1]==="=",s=(1<<t)-1;let i="",o=0,a=0;for(let c=0;c<r.length;++c)for(a=a<<8|r[c],o+=8;o>t;)o-=t,i+=e[s&a>>o];if(o&&(i+=e[s&a<<t-o]),n)for(;i.length*t&7;)i+="=";return i},gr=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>eg({prefix:e,name:r,encode(s){return dD(s,n,t)},decode(s){return hD(s,n,t,r)}}),fD=eg({prefix:"\0",name:"identity",encode:r=>oD(r),decode:r=>iD(r)}),pD=Object.freeze(Object.defineProperty({__proto__:null,identity:fD},Symbol.toStringTag,{value:"Module"})),gD=gr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),mD=Object.freeze(Object.defineProperty({__proto__:null,base2:gD},Symbol.toStringTag,{value:"Module"})),yD=gr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),wD=Object.freeze(Object.defineProperty({__proto__:null,base8:yD},Symbol.toStringTag,{value:"Module"})),bD=kd({prefix:"9",name:"base10",alphabet:"0123456789"}),ED=Object.freeze(Object.defineProperty({__proto__:null,base10:bD},Symbol.toStringTag,{value:"Module"})),vD=gr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),AD=gr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),CD=Object.freeze(Object.defineProperty({__proto__:null,base16:vD,base16upper:AD},Symbol.toStringTag,{value:"Module"})),_D=gr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ID=gr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ND=gr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),SD=gr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),TD=gr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),OD=gr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),PD=gr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),xD=gr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),RD=gr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),kD=Object.freeze(Object.defineProperty({__proto__:null,base32:_D,base32hex:TD,base32hexpad:PD,base32hexpadupper:xD,base32hexupper:OD,base32pad:ND,base32padupper:SD,base32upper:ID,base32z:RD},Symbol.toStringTag,{value:"Module"})),DD=kd({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),UD=kd({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),LD=Object.freeze(Object.defineProperty({__proto__:null,base36:DD,base36upper:UD},Symbol.toStringTag,{value:"Module"})),BD=kd({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),MD=kd({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),$D=Object.freeze(Object.defineProperty({__proto__:null,base58btc:BD,base58flickr:MD},Symbol.toStringTag,{value:"Module"})),FD=gr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),jD=gr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),HD=gr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),VD=gr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),qD=Object.freeze(Object.defineProperty({__proto__:null,base64:FD,base64pad:jD,base64url:HD,base64urlpad:VD},Symbol.toStringTag,{value:"Module"})),zC=Array.from(""),zD=zC.reduce((r,e,t)=>(r[t]=e,r),[]),WD=zC.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function GD(r){return r.reduce((e,t)=>(e+=zD[t],e),"")}function KD(r){const e=[];for(const t of r){const n=WD[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}const JD=eg({prefix:"",name:"base256emoji",encode:GD,decode:KD}),QD=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:JD},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Qb={...pD,...mD,...wD,...ED,...CD,...kD,...LD,...$D,...qD,...QD};function WC(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const Yb=WC("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Yg=WC("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=VC(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),GC={utf8:Yb,"utf-8":Yb,hex:Qb.base16,latin1:Yg,ascii:Yg,binary:Yg,...Qb};function Vn(r,e="utf8"){const t=GC[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}function Xr(r,e="utf8"){const t=GC[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}const YD={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var ZD={};const XD=":";function Gc(r){const[e,t]=r.split(XD);return{namespace:e,reference:t}}function KC(r,e){return r.includes(":")?[r]:e.chains||[]}var e3=Object.defineProperty,t3=Object.defineProperties,r3=Object.getOwnPropertyDescriptors,Zb=Object.getOwnPropertySymbols,n3=Object.prototype.hasOwnProperty,s3=Object.prototype.propertyIsEnumerable,Xb=(r,e,t)=>e in r?e3(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,eE=(r,e)=>{for(var t in e||(e={}))n3.call(e,t)&&Xb(r,t,e[t]);if(Zb)for(var t of Zb(e))s3.call(e,t)&&Xb(r,t,e[t]);return r},i3=(r,e)=>t3(r,r3(e));const o3="ReactNative",En={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},a3="js";function sp(){return typeof Zr<"u"&&typeof Zr.versions<"u"&&typeof Zr.versions.node<"u"}function xo(){return!Ba.getDocument()&&!!Ba.getNavigator()&&navigator.product===o3}function c3(){return xo()&&typeof Ee<"u"&&typeof(Ee==null?void 0:Ee.Platform)<"u"&&(Ee==null?void 0:Ee.Platform.OS)==="android"}function l3(){return xo()&&typeof Ee<"u"&&typeof(Ee==null?void 0:Ee.Platform)<"u"&&(Ee==null?void 0:Ee.Platform.OS)==="ios"}function Dd(){return!sp()&&!!Ba.getNavigator()&&!!Ba.getDocument()}function Ud(){return xo()?En.reactNative:sp()?En.node:Dd()?En.browser:En.unknown}function tE(){var r;try{return xo()&&typeof Ee<"u"&&typeof(Ee==null?void 0:Ee.Application)<"u"?(r=Ee.Application)==null?void 0:r.applicationId:void 0}catch{return}}function u3(r,e){const t=new URLSearchParams(r);for(const n of Object.keys(e).sort())if(e.hasOwnProperty(n)){const s=e[n];s!==void 0&&t.set(n,s)}return t.toString()}function h3(r){var e,t;const n=JC();try{return r!=null&&r.url&&n.url&&r.url!==n.url&&(console.warn(`The configured WalletConnect 'metadata.url':${r.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),r.url=n.url),(e=r==null?void 0:r.icons)!=null&&e.length&&r.icons.length>0&&(r.icons=r.icons.filter(s=>s!=="")),i3(eE(eE({},n),r),{url:(r==null?void 0:r.url)||n.url,name:(r==null?void 0:r.name)||n.name,description:(r==null?void 0:r.description)||n.description,icons:(t=r==null?void 0:r.icons)!=null&&t.length&&r.icons.length>0?r.icons:n.icons})}catch(s){return console.warn("Error populating app metadata",s),r||n}}function JC(){return dk.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function d3(){if(Ud()===En.reactNative&&typeof Ee<"u"&&typeof(Ee==null?void 0:Ee.Platform)<"u"){const{OS:t,Version:n}=Ee.Platform;return[t,n].join("-")}const r=ik();if(r===null)return"unknown";const e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return r.type==="browser"?[e,r.name,r.version].join("-"):[e,r.version].join("-")}function f3(){var r;const e=Ud();return e===En.browser?[e,((r=Ba.getLocation())==null?void 0:r.host)||"unknown"].join(":"):e}function QC(r,e,t){const n=d3(),s=f3();return[[r,e].join("-"),[a3,t].join("-"),n,s].join("/")}function p3({protocol:r,version:e,relayUrl:t,sdkVersion:n,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=t.split("?"),u=QC(r,e,n),h={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},d=u3(l[1]||"",h);return l[0]+"?"+d}function Yo(r,e){return r.filter(t=>e.includes(t)).length===r.length}function fy(r){return Object.fromEntries(r.entries())}function py(r){return new Map(Object.entries(r))}function $o(r=te.FIVE_MINUTES,e){const t=te.toMiliseconds(r||te.FIVE_MINUTES);let n,s,i,o;return{resolve:a=>{i&&n&&(clearTimeout(i),n(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},t),n=a,s=c})}}function Eo(r,e,t){return new Promise(async(n,s)=>{const i=setTimeout(()=>s(new Error(t)),e);try{const o=await r;n(o)}catch(o){s(o)}clearTimeout(i)})}function YC(r,e){if(typeof e=="string"&&e.startsWith(`${r}:`))return e;if(r.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(r.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function g3(r){return YC("topic",r)}function m3(r){return YC("id",r)}function ZC(r){const[e,t]=r.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")n.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))n.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return n}function zt(r,e){return te.fromMiliseconds(Date.now()+te.toMiliseconds(r))}function Ji(r){return Date.now()>=te.toMiliseconds(r)}function rt(r,e){return`${r}${e?`:${e}`:""}`}function Lf(r=[],e=[]){return[...new Set([...r,...e])]}async function y3({id:r,topic:e,wcDeepLink:t}){var n;try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=w3(i,r,e),a=Ud();if(a===En.browser){if(!((n=Ba.getDocument())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}b3(o)}else a===En.reactNative&&typeof(Ee==null?void 0:Ee.Linking)<"u"&&await Ee.Linking.openURL(o)}catch(s){console.error(s)}}function w3(r,e,t){const n=`requestId=${e}&sessionTopic=${t}`;r.endsWith("/")&&(r=r.slice(0,-1));let s=`${r}`;if(r.startsWith("https://t.me")){const i=r.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${C3(n,!0)}`}else s=`${s}/wc?${n}`;return s}function b3(r){let e="_self";A3()?e="_top":(v3()||r.startsWith("https://")||r.startsWith("http://"))&&(e="_blank"),window.open(r,e,"noreferrer noopener")}async function E3(r,e){let t="";try{if(Dd()&&(t=localStorage.getItem(e),t))return t;t=await r.getItem(e)}catch(n){console.error(n)}return t}function rE(r,e){if(!r.includes(e))return null;const t=r.split(/([&,?,=])/),n=t.indexOf(e);return t[n+2]}function nE(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,r=>{const e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)})}function jw(){return typeof Zr<"u"&&ZD.IS_VITEST==="true"}function v3(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function A3(){try{return window.self!==window.top}catch{return!1}}function C3(r,e=!1){const t=nr.from(r).toString("base64");return e?t.replace(/[=]/g,""):t}function XC(r){return nr.from(r,"base64").toString("utf-8")}function _3(r){return new Promise(e=>setTimeout(e,r))}function yh(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function I3(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Ld(r,...e){if(!I3(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function Hw(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");yh(r.outputLen),yh(r.blockLen)}function Vl(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function e_(r,e){Ld(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const sf=BigInt(2**32-1),sE=BigInt(32);function N3(r,e=!1){return e?{h:Number(r&sf),l:Number(r>>sE&sf)}:{h:Number(r>>sE&sf)|0,l:Number(r&sf)|0}}function S3(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:i,l:o}=N3(r[s],e);[t[s],n[s]]=[i,o]}return[t,n]}const T3=(r,e,t)=>r<<t|e>>>32-t,O3=(r,e,t)=>e<<t|r>>>32-t,P3=(r,e,t)=>e<<t-32|r>>>64-t,x3=(r,e,t)=>r<<t-32|e>>>64-t,cc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function R3(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function Zg(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function As(r,e){return r<<32-e|r>>>e}const iE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function k3(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function oE(r){for(let e=0;e<r.length;e++)r[e]=k3(r[e])}function D3(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function ql(r){return typeof r=="string"&&(r=D3(r)),Ld(r),r}function U3(...r){let e=0;for(let n=0;n<r.length;n++){const s=r[n];Ld(s),e+=s.length}const t=new Uint8Array(e);for(let n=0,s=0;n<r.length;n++){const i=r[n];t.set(i,s),s+=i.length}return t}let Vw=class{clone(){return this._cloneInto()}};function t_(r){const e=n=>r().update(ql(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function mu(r=32){if(cc&&typeof cc.getRandomValues=="function")return cc.getRandomValues(new Uint8Array(r));if(cc&&typeof cc.randomBytes=="function")return cc.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}const r_=[],n_=[],s_=[],L3=BigInt(0),Pu=BigInt(1),B3=BigInt(2),M3=BigInt(7),$3=BigInt(256),F3=BigInt(113);for(let r=0,e=Pu,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],r_.push(2*(5*n+t)),n_.push((r+1)*(r+2)/2%64);let s=L3;for(let i=0;i<7;i++)e=(e<<Pu^(e>>M3)*F3)%$3,e&B3&&(s^=Pu<<(Pu<<BigInt(i))-Pu);s_.push(s)}const[j3,H3]=S3(s_,!0),aE=(r,e,t)=>t>32?P3(r,e,t):T3(r,e,t),cE=(r,e,t)=>t>32?x3(r,e,t):O3(r,e,t);function V3(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=t[c],u=t[c+1],h=aE(l,u,1)^t[a],d=cE(l,u,1)^t[a+1];for(let f=0;f<50;f+=10)r[o+f]^=h,r[o+f+1]^=d}let s=r[2],i=r[3];for(let o=0;o<24;o++){const a=n_[o],c=aE(s,i,a),l=cE(s,i,a),u=r_[o];s=r[u],i=r[u+1],r[u]=c,r[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}r[0]^=j3[n],r[1]^=H3[n]}t.fill(0)}let q3=class i_ extends Vw{constructor(e,t,n,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,yh(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=R3(this.state)}keccak(){iE||oE(this.state32),V3(this.state32,this.rounds),iE||oE(this.state32),this.posOut=0,this.pos=0}update(e){Vl(this);const{blockLen:t,state:n}=this;e=ql(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(t-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,(t&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Vl(this,!1),Ld(e),this.finish();const t=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return yh(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(e_(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new i_(t,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const z3=(r,e,t)=>t_(()=>new q3(e,r,t)),W3=z3(1,136,256/8),G3="https://rpc.walletconnect.org/v1";function o_(r){const e=`Ethereum Signed Message:
${r.length}`,t=new TextEncoder().encode(e+r);return"0x"+nr.from(W3(t)).toString("hex")}async function K3(r,e,t,n,s,i){switch(t.t){case"eip191":return await J3(r,e,t.s);case"eip1271":return await Q3(r,e,t.s,n,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${t.t}`)}}async function J3(r,e,t){return(await eD({hash:o_(e),signature:t})).toLowerCase()===r.toLowerCase()}async function Q3(r,e,t,n,s,i){const o=Gc(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=t.substring(2),h=o_(e).substring(2),d=a+h+c+l+u,f=await fetch(`${i||G3}/?chainId=${n}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:Y3(),jsonrpc:"2.0",method:"eth_call",params:[{to:r,data:d},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function Y3(){return Date.now()+Math.floor(Math.random()*1e3)}function Z3(r){const e=atob(r),t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);const n=t[0];if(n===0)throw new Error("No signatures found");const s=1+n*64;if(t.length<s)throw new Error("Transaction data too short for claimed signature count");if(t.length<100)throw new Error("Transaction too short");const i=nr.from(r,"base64").slice(1,65);return L1.encode(i)}var X3=Object.defineProperty,eU=Object.defineProperties,tU=Object.getOwnPropertyDescriptors,lE=Object.getOwnPropertySymbols,rU=Object.prototype.hasOwnProperty,nU=Object.prototype.propertyIsEnumerable,uE=(r,e,t)=>e in r?X3(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,sU=(r,e)=>{for(var t in e||(e={}))rU.call(e,t)&&uE(r,t,e[t]);if(lE)for(var t of lE(e))nU.call(e,t)&&uE(r,t,e[t]);return r},iU=(r,e)=>eU(r,tU(e));const oU="did:pkh:",qw=r=>r==null?void 0:r.split(":"),aU=r=>{const e=r&&qw(r);if(e)return r.includes(oU)?e[3]:e[1]},gy=r=>{const e=r&&qw(r);if(e)return e[2]+":"+e[3]},ip=r=>{const e=r&&qw(r);if(e)return e.pop()};async function hE(r){const{cacao:e,projectId:t}=r,{s:n,p:s}=e,i=a_(s,s.iss),o=ip(s.iss);return await K3(o,i,n,gy(s.iss),t)}const a_=(r,e)=>{const t=`${r.domain} wants you to sign in with your Ethereum account:`,n=ip(e);if(!r.aud&&!r.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=r.statement||void 0;const i=`URI: ${r.aud||r.uri}`,o=`Version: ${r.version}`,a=`Chain ID: ${aU(e)}`,c=`Nonce: ${r.nonce}`,l=`Issued At: ${r.iat}`,u=r.exp?`Expiration Time: ${r.exp}`:void 0,h=r.nbf?`Not Before: ${r.nbf}`:void 0,d=r.requestId?`Request ID: ${r.requestId}`:void 0,f=r.resources?`Resources:${r.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=Bf(r.resources);if(p){const g=wh(p);s=mU(s,g)}return[t,n,"",s,"",i,o,a,c,l,u,h,d,f].filter(g=>g!=null).join(`
`)};function cU(r){return nr.from(JSON.stringify(r)).toString("base64")}function lU(r){return JSON.parse(nr.from(r,"base64").toString("utf-8"))}function Ma(r){if(!r)throw new Error("No recap provided, value is undefined");if(!r.att)throw new Error("No `att` property found");const e=Object.keys(r.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(t=>{const n=r.att[t];if(Array.isArray(n))throw new Error(`Resource must be an object: ${t}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(n).forEach(s=>{const i=n[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function uU(r,e,t,n={}){return t==null||t.sort((s,i)=>s.localeCompare(i)),{att:{[r]:hU(e,t,n)}}}function hU(r,e,t={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const n=e.map(s=>({[`${r}/${s}`]:[t]}));return Object.assign({},...n)}function c_(r){return Ma(r),`urn:recap:${cU(r).replace(/=/g,"")}`}function wh(r){const e=lU(r.replace("urn:recap:",""));return Ma(e),e}function dU(r,e,t){const n=uU(r,e,t);return c_(n)}function fU(r){return r&&r.includes("urn:recap:")}function pU(r,e){const t=wh(r),n=wh(e),s=gU(t,n);return c_(s)}function gU(r,e){Ma(r),Ma(e);const t=Object.keys(r.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),n={att:{}};return t.forEach(s=>{var i,o;Object.keys(((i=r.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;n.att[s]=iU(sU({},n.att[s]),{[a]:((c=r.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),n}function mU(r="",e){Ma(e);const t="I further authorize the stated URI to perform the following actions on my behalf: ";if(r.includes(t))return r;const n=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(h=>({ability:h.split("/")[0],action:h.split("/")[1]}));c.sort((h,d)=>h.action.localeCompare(d.action));const l={};c.forEach(h=>{l[h.ability]||(l[h.ability]=[]),l[h.ability].push(h.action)});const u=Object.keys(l).map(h=>(s++,`(${s}) '${h}': '${l[h].join("', '")}' for '${a}'.`));n.push(u.join(", ").replace(".,","."))});const i=n.join(" "),o=`${t}${i}`;return`${r?r+" ":""}${o}`}function dE(r){var e;const t=wh(r);Ma(t);const n=(e=t.att)==null?void 0:e.eip155;return n?Object.keys(n).map(s=>s.split("/")[1]):[]}function fE(r){const e=wh(r);Ma(e);const t=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&t.push(s[0].chains)})}),[...new Set(t.flat())]}function Bf(r){if(!r)return;const e=r==null?void 0:r[r.length-1];return fU(e)?e:void 0}function Xg(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function l_(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function wn(r,...e){if(!l_(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function pE(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function yU(r,e){wn(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function gE(r){if(typeof r!="boolean")throw new Error(`boolean expected, not ${r}`)}const Co=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),wU=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),bU=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!bU)throw new Error("Non little-endian hardware is not supported");function EU(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function my(r){if(typeof r=="string")r=EU(r);else if(l_(r))r=yy(r);else throw new Error("Uint8Array expected, got "+typeof r);return r}function vU(r,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(r,e)}function AU(r,e){if(r.length!==e.length)return!1;let t=0;for(let n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}const CU=(r,e)=>{function t(n,...s){if(wn(n),r.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");r.varSizeNonce?wn(l):wn(l,r.nonceLength)}const i=r.tagLength;i&&s[1]!==void 0&&wn(s[1]);const o=e(n,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");wn(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,wn(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(wn(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(t,r),t};function mE(r,e,t=!0){if(e===void 0)return new Uint8Array(r);if(e.length!==r)throw new Error("invalid output length, expected "+r+", got: "+e.length);if(t&&!_U(e))throw new Error("invalid output, must be aligned");return e}function yE(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),a=Number(t&i);r.setUint32(e+4,o,n),r.setUint32(e+0,a,n)}function _U(r){return r.byteOffset%4===0}function yy(r){return Uint8Array.from(r)}function zl(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}const u_=r=>Uint8Array.from(r.split("").map(e=>e.charCodeAt(0))),IU=u_("expand 16-byte k"),NU=u_("expand 32-byte k"),SU=Co(IU),TU=Co(NU);function Je(r,e){return r<<e|r>>>32-e}function wy(r){return r.byteOffset%4===0}const of=64,OU=16,h_=2**32-1,wE=new Uint32Array;function PU(r,e,t,n,s,i,o,a){const c=s.length,l=new Uint8Array(of),u=Co(l),h=wy(s)&&wy(i),d=h?Co(s):wE,f=h?Co(i):wE;for(let p=0;p<c;o++){if(r(e,t,n,u,o,a),o>=h_)throw new Error("arx: counter overflow");const g=Math.min(of,c-p);if(h&&g===of){const y=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let C=0,w;C<OU;C++)w=y+C,f[w]=d[w]^u[C];p+=of;continue}for(let y=0,C;y<g;y++)C=p+y,i[C]=s[C]^l[y];p+=g}}function xU(r,e){const{allowShortKeys:t,extendNonceFn:n,counterLength:s,counterRight:i,rounds:o}=vU({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof r!="function")throw new Error("core must be a function");return Xg(s),Xg(o),gE(i),gE(t),(a,c,l,u,h=0)=>{wn(a),wn(c),wn(l);const d=l.length;if(u===void 0&&(u=new Uint8Array(d)),wn(u),Xg(h),h<0||h>=h_)throw new Error("arx: counter overflow");if(u.length<d)throw new Error(`arx: output (${u.length}) is shorter than data (${d})`);const f=[];let p=a.length,g,y;if(p===32)f.push(g=yy(a)),y=TU;else if(p===16&&t)g=new Uint8Array(32),g.set(a),g.set(a,16),y=SU,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);wy(c)||f.push(c=yy(c));const C=Co(g);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(y,C,Co(c.subarray(0,16)),C),c=c.subarray(16)}const w=16-s;if(w!==c.length)throw new Error(`arx: nonce must be ${w} or 16 bytes`);if(w!==12){const U=new Uint8Array(12);U.set(c,i?0:12-c.length),c=U,f.push(c)}const I=Co(c);return PU(r,y,C,I,l,u,h,o),zl(...f),u}}const sr=(r,e)=>r[e++]&255|(r[e++]&255)<<8;class RU{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=my(e),wn(e,32);const t=sr(e,0),n=sr(e,2),s=sr(e,4),i=sr(e,6),o=sr(e,8),a=sr(e,10),c=sr(e,12),l=sr(e,14);this.r[0]=t&8191,this.r[1]=(t>>>13|n<<3)&8191,this.r[2]=(n>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=sr(e,16+2*u)}process(e,t,n=!1){const s=n?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],h=o[4],d=o[5],f=o[6],p=o[7],g=o[8],y=o[9],C=sr(e,t+0),w=sr(e,t+2),I=sr(e,t+4),U=sr(e,t+6),M=sr(e,t+8),B=sr(e,t+10),L=sr(e,t+12),m=sr(e,t+14);let b=i[0]+(C&8191),N=i[1]+((C>>>13|w<<3)&8191),_=i[2]+((w>>>10|I<<6)&8191),S=i[3]+((I>>>7|U<<9)&8191),k=i[4]+((U>>>4|M<<12)&8191),P=i[5]+(M>>>1&8191),v=i[6]+((M>>>14|B<<2)&8191),A=i[7]+((B>>>11|L<<5)&8191),T=i[8]+((L>>>8|m<<8)&8191),x=i[9]+(m>>>5|s),R=0,j=R+b*a+N*(5*y)+_*(5*g)+S*(5*p)+k*(5*f);R=j>>>13,j&=8191,j+=P*(5*d)+v*(5*h)+A*(5*u)+T*(5*l)+x*(5*c),R+=j>>>13,j&=8191;let q=R+b*c+N*a+_*(5*y)+S*(5*g)+k*(5*p);R=q>>>13,q&=8191,q+=P*(5*f)+v*(5*d)+A*(5*h)+T*(5*u)+x*(5*l),R+=q>>>13,q&=8191;let z=R+b*l+N*c+_*a+S*(5*y)+k*(5*g);R=z>>>13,z&=8191,z+=P*(5*p)+v*(5*f)+A*(5*d)+T*(5*h)+x*(5*u),R+=z>>>13,z&=8191;let G=R+b*u+N*l+_*c+S*a+k*(5*y);R=G>>>13,G&=8191,G+=P*(5*g)+v*(5*p)+A*(5*f)+T*(5*d)+x*(5*h),R+=G>>>13,G&=8191;let Q=R+b*h+N*u+_*l+S*c+k*a;R=Q>>>13,Q&=8191,Q+=P*(5*y)+v*(5*g)+A*(5*p)+T*(5*f)+x*(5*d),R+=Q>>>13,Q&=8191;let Y=R+b*d+N*h+_*u+S*l+k*c;R=Y>>>13,Y&=8191,Y+=P*a+v*(5*y)+A*(5*g)+T*(5*p)+x*(5*f),R+=Y>>>13,Y&=8191;let ne=R+b*f+N*d+_*h+S*u+k*l;R=ne>>>13,ne&=8191,ne+=P*c+v*a+A*(5*y)+T*(5*g)+x*(5*p),R+=ne>>>13,ne&=8191;let ie=R+b*p+N*f+_*d+S*h+k*u;R=ie>>>13,ie&=8191,ie+=P*l+v*c+A*a+T*(5*y)+x*(5*g),R+=ie>>>13,ie&=8191;let we=R+b*g+N*p+_*f+S*d+k*h;R=we>>>13,we&=8191,we+=P*u+v*l+A*c+T*a+x*(5*y),R+=we>>>13,we&=8191;let be=R+b*y+N*g+_*p+S*f+k*d;R=be>>>13,be&=8191,be+=P*h+v*u+A*l+T*c+x*a,R+=be>>>13,be&=8191,R=(R<<2)+R|0,R=R+j|0,j=R&8191,R=R>>>13,q+=R,i[0]=j,i[1]=q,i[2]=z,i[3]=G,i[4]=Q,i[5]=Y,i[6]=ne,i[7]=ie,i[8]=we,i[9]=be}finalize(){const{h:e,pad:t}=this,n=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,n[0]=e[0]+5,s=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+s,s=n[a]>>>13,n[a]&=8191;n[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)n[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+t[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+t[a]|0)+(o>>>16)|0,e[a]=o&65535;zl(n)}update(e){pE(this);const{buffer:t,blockLen:n}=this;e=my(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);if(o===n){for(;n<=s-i;i+=n)this.process(e,i);continue}t.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){zl(this.h,this.r,this.buffer,this.pad)}digestInto(e){pE(this),yU(e,this),this.finished=!0;const{buffer:t,h:n}=this;let{pos:s}=this;if(s){for(t[s++]=1;s<16;s++)t[s]=0;this.process(t,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}}function kU(r){const e=(n,s)=>r(s).update(my(n)).digest(),t=r(new Uint8Array(32));return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=n=>r(n),e}const DU=kU(r=>new RU(r));function UU(r,e,t,n,s,i=20){let o=r[0],a=r[1],c=r[2],l=r[3],u=e[0],h=e[1],d=e[2],f=e[3],p=e[4],g=e[5],y=e[6],C=e[7],w=s,I=t[0],U=t[1],M=t[2],B=o,L=a,m=c,b=l,N=u,_=h,S=d,k=f,P=p,v=g,A=y,T=C,x=w,R=I,j=U,q=M;for(let G=0;G<i;G+=2)B=B+N|0,x=Je(x^B,16),P=P+x|0,N=Je(N^P,12),B=B+N|0,x=Je(x^B,8),P=P+x|0,N=Je(N^P,7),L=L+_|0,R=Je(R^L,16),v=v+R|0,_=Je(_^v,12),L=L+_|0,R=Je(R^L,8),v=v+R|0,_=Je(_^v,7),m=m+S|0,j=Je(j^m,16),A=A+j|0,S=Je(S^A,12),m=m+S|0,j=Je(j^m,8),A=A+j|0,S=Je(S^A,7),b=b+k|0,q=Je(q^b,16),T=T+q|0,k=Je(k^T,12),b=b+k|0,q=Je(q^b,8),T=T+q|0,k=Je(k^T,7),B=B+_|0,q=Je(q^B,16),A=A+q|0,_=Je(_^A,12),B=B+_|0,q=Je(q^B,8),A=A+q|0,_=Je(_^A,7),L=L+S|0,x=Je(x^L,16),T=T+x|0,S=Je(S^T,12),L=L+S|0,x=Je(x^L,8),T=T+x|0,S=Je(S^T,7),m=m+k|0,R=Je(R^m,16),P=P+R|0,k=Je(k^P,12),m=m+k|0,R=Je(R^m,8),P=P+R|0,k=Je(k^P,7),b=b+N|0,j=Je(j^b,16),v=v+j|0,N=Je(N^v,12),b=b+N|0,j=Je(j^b,8),v=v+j|0,N=Je(N^v,7);let z=0;n[z++]=o+B|0,n[z++]=a+L|0,n[z++]=c+m|0,n[z++]=l+b|0,n[z++]=u+N|0,n[z++]=h+_|0,n[z++]=d+S|0,n[z++]=f+k|0,n[z++]=p+P|0,n[z++]=g+v|0,n[z++]=y+A|0,n[z++]=C+T|0,n[z++]=w+x|0,n[z++]=I+R|0,n[z++]=U+j|0,n[z++]=M+q|0}const LU=xU(UU,{counterRight:!1,counterLength:4,allowShortKeys:!1}),BU=new Uint8Array(16),bE=(r,e)=>{r.update(e);const t=e.length%16;t&&r.update(BU.subarray(t))},MU=new Uint8Array(32);function EE(r,e,t,n,s){const i=r(e,t,MU),o=DU.create(i);s&&bE(o,s),bE(o,n);const a=new Uint8Array(16),c=wU(a);yE(c,0,BigInt(s?s.length:0),!0),yE(c,8,BigInt(n.length),!0),o.update(a);const l=o.digest();return zl(i,a),l}const $U=r=>(e,t,n)=>({encrypt(s,i){const o=s.length;i=mE(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);r(e,t,a,a,1);const c=EE(r,e,t,a,n);return i.set(c,o),zl(c),i},decrypt(s,i){i=mE(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=EE(r,e,t,o,n);if(!AU(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),r(e,t,i,i,1),zl(c),i}}),d_=CU({blockSize:64,nonceLength:12,tagLength:16},$U(LU));let f_=class extends Vw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Hw(e);const n=ql(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Vl(this),this.iHash.update(e),this}digestInto(e){Vl(this),Ld(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const tg=(r,e,t)=>new f_(r,e).update(t).digest();tg.create=(r,e)=>new f_(r,e);function FU(r,e,t){return Hw(r),t===void 0&&(t=new Uint8Array(r.outputLen)),tg(r,ql(t),ql(e))}const em=new Uint8Array([0]),vE=new Uint8Array;function jU(r,e,t,n=32){if(Hw(r),yh(n),n>255*r.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(n/r.outputLen);t===void 0&&(t=vE);const i=new Uint8Array(s*r.outputLen),o=tg.create(r,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)em[0]=l+1,a.update(l===0?vE:c).update(t).update(em).digestInto(c),i.set(c,r.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),em.fill(0),i.slice(0,n)}const HU=(r,e,t,n,s)=>jU(r,FU(r,e,t),n,s);function VU(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),a=Number(t&i),c=n?4:0,l=n?0:4;r.setUint32(e+c,o,n),r.setUint32(e+l,a,n)}function qU(r,e,t){return r&e^~r&t}function zU(r,e,t){return r&e^r&t^e&t}let WU=class extends Vw{constructor(e,t,n,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Zg(this.buffer)}update(e){Vl(this);const{view:t,buffer:n,blockLen:s}=this;e=ql(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Zg(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Vl(this),e_(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let h=o;h<s;h++)t[h]=0;VU(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=Zg(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%t&&e.buffer.set(n),e}};const GU=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$i=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Fi=new Uint32Array(64);class KU extends WU{constructor(){super(64,32,8,!1),this.A=$i[0]|0,this.B=$i[1]|0,this.C=$i[2]|0,this.D=$i[3]|0,this.E=$i[4]|0,this.F=$i[5]|0,this.G=$i[6]|0,this.H=$i[7]|0}get(){const{A:e,B:t,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,t,n,s,i,o,a,c]}set(e,t,n,s,i,o,a,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let h=0;h<16;h++,t+=4)Fi[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){const d=Fi[h-15],f=Fi[h-2],p=As(d,7)^As(d,18)^d>>>3,g=As(f,17)^As(f,19)^f>>>10;Fi[h]=g+Fi[h-7]+p+Fi[h-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const d=As(a,6)^As(a,11)^As(a,25),f=u+d+qU(a,c,l)+GU[h]+Fi[h]|0,p=(As(n,2)^As(n,13)^As(n,22))+zU(n,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=n,n=f+p|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,s,i,o,a,c,l,u)}roundClean(){Fi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Bd=t_(()=>new KU);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rg=BigInt(0),ng=BigInt(1),JU=BigInt(2);function $a(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Md(r){if(!$a(r))throw new Error("Uint8Array expected")}function Wl(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}const QU=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Gl(r){Md(r);let e="";for(let t=0;t<r.length;t++)e+=QU[r[t]];return e}function $c(r){const e=r.toString(16);return e.length&1?"0"+e:e}function zw(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?rg:BigInt("0x"+r)}const ri={_0:48,_9:57,A:65,F:70,a:97,f:102};function AE(r){if(r>=ri._0&&r<=ri._9)return r-ri._0;if(r>=ri.A&&r<=ri.F)return r-(ri.A-10);if(r>=ri.a&&r<=ri.f)return r-(ri.a-10)}function Kl(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){const o=AE(r.charCodeAt(i)),a=AE(r.charCodeAt(i+1));if(o===void 0||a===void 0){const c=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function Ta(r){return zw(Gl(r))}function bh(r){return Md(r),zw(Gl(Uint8Array.from(r).reverse()))}function Jl(r,e){return Kl(r.toString(16).padStart(e*2,"0"))}function sg(r,e){return Jl(r,e).reverse()}function YU(r){return Kl($c(r))}function yn(r,e,t){let n;if(typeof e=="string")try{n=Kl(e)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if($a(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const s=n.length;if(typeof t=="number"&&s!==t)throw new Error(r+" of length "+t+" expected, got "+s);return n}function Eh(...r){let e=0;for(let n=0;n<r.length;n++){const s=r[n];Md(s),e+=s.length}const t=new Uint8Array(e);for(let n=0,s=0;n<r.length;n++){const i=r[n];t.set(i,s),s+=i.length}return t}function ZU(r,e){if(r.length!==e.length)return!1;let t=0;for(let n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}function XU(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}const tm=r=>typeof r=="bigint"&&rg<=r;function ig(r,e,t){return tm(r)&&tm(e)&&tm(t)&&e<=r&&r<t}function Si(r,e,t,n){if(!ig(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function p_(r){let e;for(e=0;r>rg;r>>=ng,e+=1);return e}function eL(r,e){return r>>BigInt(e)&ng}function tL(r,e,t){return r|(t?ng:rg)<<BigInt(e)}const Ww=r=>(JU<<BigInt(r-1))-ng,rm=r=>new Uint8Array(r),CE=r=>Uint8Array.from(r);function g_(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=rm(r),s=rm(r),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...u)=>t(s,n,...u),c=(u=rm())=>{s=a(CE([0]),u),n=a(),u.length!==0&&(s=a(CE([1]),u),n=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const h=[];for(;u<e;){n=a();const d=n.slice();h.push(d),u+=n.length}return Eh(...h)};return(u,h)=>{o(),c(u);let d;for(;!(d=h(l()));)c();return o(),d}}const rL={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||$a(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function yu(r,e,t={}){const n=(s,i,o)=>{const a=rL[i];if(typeof a!="function")throw new Error("invalid validator function");const c=r[s];if(!(o&&c===void 0)&&!a(c,r))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(t))n(s,i,!0);return r}const nL=()=>{throw new Error("not implemented")};function by(r){const e=new WeakMap;return(t,...n)=>{const s=e.get(t);if(s!==void 0)return s;const i=r(t,...n);return e.set(t,i),i}}var sL=Object.freeze({__proto__:null,isBytes:$a,abytes:Md,abool:Wl,bytesToHex:Gl,numberToHexUnpadded:$c,hexToNumber:zw,hexToBytes:Kl,bytesToNumberBE:Ta,bytesToNumberLE:bh,numberToBytesBE:Jl,numberToBytesLE:sg,numberToVarBytesBE:YU,ensureBytes:yn,concatBytes:Eh,equalBytes:ZU,utf8ToBytes:XU,inRange:ig,aInRange:Si,bitLen:p_,bitGet:eL,bitSet:tL,bitMask:Ww,createHmacDrbg:g_,validateObject:yu,notImplemented:nL,memoized:by});const tr=BigInt(0),Ut=BigInt(1),qo=BigInt(2),iL=BigInt(3),Ey=BigInt(4),_E=BigInt(5),IE=BigInt(8);function Jr(r,e){const t=r%e;return t>=tr?t:e+t}function m_(r,e,t){if(e<tr)throw new Error("invalid exponent, negatives unsupported");if(t<=tr)throw new Error("invalid modulus");if(t===Ut)return tr;let n=Ut;for(;e>tr;)e&Ut&&(n=n*r%t),r=r*r%t,e>>=Ut;return n}function Zn(r,e,t){let n=r;for(;e-- >tr;)n*=n,n%=t;return n}function vy(r,e){if(r===tr)throw new Error("invert: expected non-zero number");if(e<=tr)throw new Error("invert: expected positive modulus, got "+e);let t=Jr(r,e),n=e,s=tr,i=Ut;for(;t!==tr;){const o=n/t,a=n%t,c=s-i*o;n=t,t=a,s=i,i=c}if(n!==Ut)throw new Error("invert: does not exist");return Jr(s,e)}function oL(r){const e=(r-Ut)/qo;let t,n,s;for(t=r-Ut,n=0;t%qo===tr;t/=qo,n++);for(s=qo;s<r&&m_(s,e,r)!==r-Ut;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(r+Ut)/Ey;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(t+Ut)/qo;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,l=o.pow(o.mul(o.ONE,s),t),u=o.pow(a,i),h=o.pow(a,t);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let d=1;for(let p=o.sqr(h);d<c&&!o.eql(p,o.ONE);d++)p=o.sqr(p);const f=o.pow(l,Ut<<BigInt(c-d-1));l=o.sqr(f),u=o.mul(u,f),h=o.mul(h,l),c=d}return u}}function aL(r){if(r%Ey===iL){const e=(r+Ut)/Ey;return function(t,n){const s=t.pow(n,e);if(!t.eql(t.sqr(s),n))throw new Error("Cannot find square root");return s}}if(r%IE===_E){const e=(r-_E)/IE;return function(t,n){const s=t.mul(n,qo),i=t.pow(s,e),o=t.mul(n,i),a=t.mul(t.mul(o,qo),i),c=t.mul(o,t.sub(a,t.ONE));if(!t.eql(t.sqr(c),n))throw new Error("Cannot find square root");return c}}return oL(r)}const cL=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function lL(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=cL.reduce((n,s)=>(n[s]="function",n),e);return yu(r,t)}function uL(r,e,t){if(t<tr)throw new Error("invalid exponent, negatives unsupported");if(t===tr)return r.ONE;if(t===Ut)return e;let n=r.ONE,s=e;for(;t>tr;)t&Ut&&(n=r.mul(n,s)),s=r.sqr(s),t>>=Ut;return n}function hL(r,e){const t=new Array(e.length),n=e.reduce((i,o,a)=>r.is0(o)?i:(t[a]=i,r.mul(i,o)),r.ONE),s=r.inv(n);return e.reduceRight((i,o,a)=>r.is0(o)?i:(t[a]=r.mul(i,t[a]),r.mul(i,o)),s),t}function y_(r,e){const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function w_(r,e,t=!1,n={}){if(r<=tr)throw new Error("invalid field: expected ORDER > 0, got "+r);const{nBitLength:s,nByteLength:i}=y_(r,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:r,isLE:t,BITS:s,BYTES:i,MASK:Ww(s),ZERO:tr,ONE:Ut,create:c=>Jr(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return tr<=c&&c<r},is0:c=>c===tr,isOdd:c=>(c&Ut)===Ut,neg:c=>Jr(-c,r),eql:(c,l)=>c===l,sqr:c=>Jr(c*c,r),add:(c,l)=>Jr(c+l,r),sub:(c,l)=>Jr(c-l,r),mul:(c,l)=>Jr(c*l,r),pow:(c,l)=>uL(a,c,l),div:(c,l)=>Jr(c*vy(l,r),r),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>vy(c,r),sqrt:n.sqrt||(c=>(o||(o=aL(r)),o(a,c))),invertBatch:c=>hL(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>t?sg(c,i):Jl(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return t?bh(c):Ta(c)}});return Object.freeze(a)}function b_(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function E_(r){const e=b_(r);return e+Math.ceil(e/2)}function dL(r,e,t=!1){const n=r.length,s=b_(e),i=E_(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=t?bh(r):Ta(r),a=Jr(o,e-Ut)+Ut;return t?sg(a,s):Jl(a,s)}const NE=BigInt(0),af=BigInt(1);function nm(r,e){const t=e.negate();return r?t:e}function v_(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function sm(r,e){v_(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1);return{windows:t,windowSize:n}}function fL(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function pL(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const im=new WeakMap,A_=new WeakMap;function om(r){return A_.get(r)||1}function gL(r,e){return{constTimeNegate:nm,hasPrecomputes(t){return om(t)!==1},unsafeLadder(t,n,s=r.ZERO){let i=t;for(;n>NE;)n&af&&(s=s.add(i)),i=i.double(),n>>=af;return s},precomputeWindow(t,n){const{windows:s,windowSize:i}=sm(n,e),o=[];let a=t,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(t,n,s){const{windows:i,windowSize:o}=sm(t,e);let a=r.ZERO,c=r.BASE;const l=BigInt(2**t-1),u=2**t,h=BigInt(t);for(let d=0;d<i;d++){const f=d*o;let p=Number(s&l);s>>=h,p>o&&(p-=u,s+=af);const g=f,y=f+Math.abs(p)-1,C=d%2!==0,w=p<0;p===0?c=c.add(nm(C,n[g])):a=a.add(nm(w,n[y]))}return{p:a,f:c}},wNAFUnsafe(t,n,s,i=r.ZERO){const{windows:o,windowSize:a}=sm(t,e),c=BigInt(2**t-1),l=2**t,u=BigInt(t);for(let h=0;h<o;h++){const d=h*a;if(s===NE)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=af),f===0)continue;let p=n[d+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(t,n,s){let i=im.get(n);return i||(i=this.precomputeWindow(n,t),t!==1&&im.set(n,s(i))),i},wNAFCached(t,n,s){const i=om(t);return this.wNAF(i,this.getPrecomputes(i,t,s),n)},wNAFCachedUnsafe(t,n,s,i){const o=om(t);return o===1?this.unsafeLadder(t,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,t,s),n,i)},setWindowSize(t,n){v_(n,e),A_.set(t,n),im.delete(t)}}}function mL(r,e,t,n){if(fL(t,r),pL(n,e),t.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=r.ZERO,i=p_(BigInt(t.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let h=l;h>=0;h-=o){c.fill(s);for(let f=0;f<n.length;f++){const p=n[f],g=Number(p>>BigInt(h)&BigInt(a));c[g]=c[g].add(t[f])}let d=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),d=d.add(p);if(u=u.add(d),h!==0)for(let f=0;f<o;f++)u=u.double()}return u}function C_(r){return lL(r.Fp),yu(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...y_(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const lc=BigInt(0),am=BigInt(1);function yL(r){return yu(r,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...r})}function wL(r){const e=yL(r),{P:t}=e,n=w=>Jr(w,t),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(w=>w),c=e.powPminus2||(w=>m_(w,t-BigInt(2),t));function l(w,I,U){const M=n(w*(I-U));return I=n(I-M),U=n(U+M),[I,U]}const u=(e.a-BigInt(2))/BigInt(4);function h(w,I){Si("u",w,lc,t),Si("scalar",I,lc,t);const U=I,M=w;let B=am,L=lc,m=w,b=am,N=lc,_;for(let k=BigInt(s-1);k>=lc;k--){const P=U>>k&am;N^=P,_=l(N,B,m),B=_[0],m=_[1],_=l(N,L,b),L=_[0],b=_[1],N=P;const v=B+L,A=n(v*v),T=B-L,x=n(T*T),R=A-x,j=m+b,q=m-b,z=n(q*v),G=n(j*T),Q=z+G,Y=z-G;m=n(Q*Q),b=n(M*n(Y*Y)),B=n(A*x),L=n(R*(A+n(u*R)))}_=l(N,B,m),B=_[0],m=_[1],_=l(N,L,b),L=_[0],b=_[1];const S=c(L);return n(B*S)}function d(w){return sg(n(w),i)}function f(w){const I=yn("u coordinate",w,i);return o===32&&(I[31]&=127),bh(I)}function p(w){const I=yn("scalar",w),U=I.length;if(U!==i&&U!==o){let M=""+i+" or "+o;throw new Error("invalid scalar, expected "+M+" bytes, got "+U)}return bh(a(I))}function g(w,I){const U=f(I),M=p(w),B=h(U,M);if(B===lc)throw new Error("invalid private or public key received");return d(B)}const y=d(e.Gu);function C(w){return g(w,y)}return{scalarMult:g,scalarMultBase:C,getSharedSecret:(w,I)=>g(w,I),getPublicKey:w=>C(w),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:y}}const Ay=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const bL=BigInt(1),SE=BigInt(2),EL=BigInt(3),vL=BigInt(5);BigInt(8);function AL(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),s=BigInt(80),i=Ay,o=r*r%i*r%i,a=Zn(o,SE,i)*o%i,c=Zn(a,bL,i)*r%i,l=Zn(c,vL,i)*c%i,u=Zn(l,e,i)*l%i,h=Zn(u,t,i)*u%i,d=Zn(h,n,i)*h%i,f=Zn(d,s,i)*d%i,p=Zn(f,s,i)*d%i,g=Zn(p,e,i)*l%i;return{pow_p_5_8:Zn(g,SE,i)*r%i,b2:o}}function CL(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const Cy=wL({P:Ay,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:r=>{const e=Ay,{pow_p_5_8:t,b2:n}=AL(r);return Jr(Zn(t,EL,e)*n,e)},adjustScalarBytes:CL,randomBytes:mu});function TE(r){r.lowS!==void 0&&Wl("lowS",r.lowS),r.prehash!==void 0&&Wl("prehash",r.prehash)}function _L(r){const e=C_(r);yu(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:s}=e;if(t){if(!n.eql(s,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:IL,hexToBytes:NL}=sL;class SL extends Error{constructor(e=""){super(e)}}const ui={Err:SL,_tlv:{encode:(r,e)=>{const{Err:t}=ui;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const n=e.length/2,s=$c(n);if(s.length/2&128)throw new t("tlv.encode: long form length too big");const i=n>127?$c(s.length/2|128):"";return $c(r)+i+s+e},decode(r,e){const{Err:t}=ui;let n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new t("tlv.decode(long): indefinite length not supported");if(c>4)throw new t("tlv.decode(long): byte length is too big");const l=e.subarray(n,n+c);if(l.length!==c)throw new t("tlv.decode: length bytes not complete");if(l[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(n+=c,o<128)throw new t("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new t("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(r){const{Err:e}=ui;if(r<_i)throw new e("integer: negative integers are not allowed");let t=$c(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){const{Err:e}=ui;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return IL(r)}},toSig(r){const{Err:e,_int:t,_tlv:n}=ui,s=typeof r=="string"?NL(r):r;Md(s);const{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:l,l:u}=n.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(a),s:t.decode(l)}},hexFromSig(r){const{_tlv:e,_int:t}=ui,n=e.encode(2,t.encode(r.r)),s=e.encode(2,t.encode(r.s)),i=n+s;return e.encode(48,i)}},_i=BigInt(0),Yt=BigInt(1);BigInt(2);const OE=BigInt(3);BigInt(4);function TL(r){const e=_L(r),{Fp:t}=e,n=w_(e.n,e.nBitLength),s=e.toBytes||((g,y,C)=>{const w=y.toAffine();return Eh(Uint8Array.from([4]),t.toBytes(w.x),t.toBytes(w.y))}),i=e.fromBytes||(g=>{const y=g.subarray(1),C=t.fromBytes(y.subarray(0,t.BYTES)),w=t.fromBytes(y.subarray(t.BYTES,2*t.BYTES));return{x:C,y:w}});function o(g){const{a:y,b:C}=e,w=t.sqr(g),I=t.mul(w,g);return t.add(t.add(I,t.mul(g,y)),C)}if(!t.eql(t.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return ig(g,Yt,e.n)}function c(g){const{allowedPrivateKeyLengths:y,nByteLength:C,wrapPrivateKey:w,n:I}=e;if(y&&typeof g!="bigint"){if($a(g)&&(g=Gl(g)),typeof g!="string"||!y.includes(g.length))throw new Error("invalid private key");g=g.padStart(C*2,"0")}let U;try{U=typeof g=="bigint"?g:Ta(yn("private key",g,C))}catch{throw new Error("invalid private key, expected hex or "+C+" bytes, got "+typeof g)}return w&&(U=Jr(U,I)),Si("private key",U,Yt,I),U}function l(g){if(!(g instanceof d))throw new Error("ProjectivePoint expected")}const u=by((g,y)=>{const{px:C,py:w,pz:I}=g;if(t.eql(I,t.ONE))return{x:C,y:w};const U=g.is0();y==null&&(y=U?t.ONE:t.inv(I));const M=t.mul(C,y),B=t.mul(w,y),L=t.mul(I,y);if(U)return{x:t.ZERO,y:t.ZERO};if(!t.eql(L,t.ONE))throw new Error("invZ was invalid");return{x:M,y:B}}),h=by(g=>{if(g.is0()){if(e.allowInfinityPoint&&!t.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:y,y:C}=g.toAffine();if(!t.isValid(y)||!t.isValid(C))throw new Error("bad point: x or y not FE");const w=t.sqr(C),I=o(y);if(!t.eql(w,I))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(y,C,w){if(this.px=y,this.py=C,this.pz=w,y==null||!t.isValid(y))throw new Error("x required");if(C==null||!t.isValid(C))throw new Error("y required");if(w==null||!t.isValid(w))throw new Error("z required");Object.freeze(this)}static fromAffine(y){const{x:C,y:w}=y||{};if(!y||!t.isValid(C)||!t.isValid(w))throw new Error("invalid affine point");if(y instanceof d)throw new Error("projective point not allowed");const I=U=>t.eql(U,t.ZERO);return I(C)&&I(w)?d.ZERO:new d(C,w,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const C=t.invertBatch(y.map(w=>w.pz));return y.map((w,I)=>w.toAffine(C[I])).map(d.fromAffine)}static fromHex(y){const C=d.fromAffine(i(yn("pointHex",y)));return C.assertValidity(),C}static fromPrivateKey(y){return d.BASE.multiply(c(y))}static msm(y,C){return mL(d,n,y,C)}_setWindowSize(y){p.setWindowSize(this,y)}assertValidity(){h(this)}hasEvenY(){const{y}=this.toAffine();if(t.isOdd)return!t.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){l(y);const{px:C,py:w,pz:I}=this,{px:U,py:M,pz:B}=y,L=t.eql(t.mul(C,B),t.mul(U,I)),m=t.eql(t.mul(w,B),t.mul(M,I));return L&&m}negate(){return new d(this.px,t.neg(this.py),this.pz)}double(){const{a:y,b:C}=e,w=t.mul(C,OE),{px:I,py:U,pz:M}=this;let B=t.ZERO,L=t.ZERO,m=t.ZERO,b=t.mul(I,I),N=t.mul(U,U),_=t.mul(M,M),S=t.mul(I,U);return S=t.add(S,S),m=t.mul(I,M),m=t.add(m,m),B=t.mul(y,m),L=t.mul(w,_),L=t.add(B,L),B=t.sub(N,L),L=t.add(N,L),L=t.mul(B,L),B=t.mul(S,B),m=t.mul(w,m),_=t.mul(y,_),S=t.sub(b,_),S=t.mul(y,S),S=t.add(S,m),m=t.add(b,b),b=t.add(m,b),b=t.add(b,_),b=t.mul(b,S),L=t.add(L,b),_=t.mul(U,M),_=t.add(_,_),b=t.mul(_,S),B=t.sub(B,b),m=t.mul(_,N),m=t.add(m,m),m=t.add(m,m),new d(B,L,m)}add(y){l(y);const{px:C,py:w,pz:I}=this,{px:U,py:M,pz:B}=y;let L=t.ZERO,m=t.ZERO,b=t.ZERO;const N=e.a,_=t.mul(e.b,OE);let S=t.mul(C,U),k=t.mul(w,M),P=t.mul(I,B),v=t.add(C,w),A=t.add(U,M);v=t.mul(v,A),A=t.add(S,k),v=t.sub(v,A),A=t.add(C,I);let T=t.add(U,B);return A=t.mul(A,T),T=t.add(S,P),A=t.sub(A,T),T=t.add(w,I),L=t.add(M,B),T=t.mul(T,L),L=t.add(k,P),T=t.sub(T,L),b=t.mul(N,A),L=t.mul(_,P),b=t.add(L,b),L=t.sub(k,b),b=t.add(k,b),m=t.mul(L,b),k=t.add(S,S),k=t.add(k,S),P=t.mul(N,P),A=t.mul(_,A),k=t.add(k,P),P=t.sub(S,P),P=t.mul(N,P),A=t.add(A,P),S=t.mul(k,A),m=t.add(m,S),S=t.mul(T,A),L=t.mul(v,L),L=t.sub(L,S),S=t.mul(v,k),b=t.mul(T,b),b=t.add(b,S),new d(L,m,b)}subtract(y){return this.add(y.negate())}is0(){return this.equals(d.ZERO)}wNAF(y){return p.wNAFCached(this,y,d.normalizeZ)}multiplyUnsafe(y){const{endo:C,n:w}=e;Si("scalar",y,_i,w);const I=d.ZERO;if(y===_i)return I;if(this.is0()||y===Yt)return this;if(!C||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,y,d.normalizeZ);let{k1neg:U,k1:M,k2neg:B,k2:L}=C.splitScalar(y),m=I,b=I,N=this;for(;M>_i||L>_i;)M&Yt&&(m=m.add(N)),L&Yt&&(b=b.add(N)),N=N.double(),M>>=Yt,L>>=Yt;return U&&(m=m.negate()),B&&(b=b.negate()),b=new d(t.mul(b.px,C.beta),b.py,b.pz),m.add(b)}multiply(y){const{endo:C,n:w}=e;Si("scalar",y,Yt,w);let I,U;if(C){const{k1neg:M,k1:B,k2neg:L,k2:m}=C.splitScalar(y);let{p:b,f:N}=this.wNAF(B),{p:_,f:S}=this.wNAF(m);b=p.constTimeNegate(M,b),_=p.constTimeNegate(L,_),_=new d(t.mul(_.px,C.beta),_.py,_.pz),I=b.add(_),U=N.add(S)}else{const{p:M,f:B}=this.wNAF(y);I=M,U=B}return d.normalizeZ([I,U])[0]}multiplyAndAddUnsafe(y,C,w){const I=d.BASE,U=(B,L)=>L===_i||L===Yt||!B.equals(I)?B.multiplyUnsafe(L):B.multiply(L),M=U(this,C).add(U(y,w));return M.is0()?void 0:M}toAffine(y){return u(this,y)}isTorsionFree(){const{h:y,isTorsionFree:C}=e;if(y===Yt)return!0;if(C)return C(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:C}=e;return y===Yt?this:C?C(d,this):this.multiplyUnsafe(e.h)}toRawBytes(y=!0){return Wl("isCompressed",y),this.assertValidity(),s(d,this,y)}toHex(y=!0){return Wl("isCompressed",y),Gl(this.toRawBytes(y))}}d.BASE=new d(e.Gx,e.Gy,t.ONE),d.ZERO=new d(t.ZERO,t.ONE,t.ZERO);const f=e.nBitLength,p=gL(d,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function OL(r){const e=C_(r);return yu(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function PL(r){const e=OL(r),{Fp:t,n}=e,s=t.BYTES+1,i=2*t.BYTES+1;function o(P){return Jr(P,n)}function a(P){return vy(P,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:h}=TL({...e,toBytes(P,v,A){const T=v.toAffine(),x=t.toBytes(T.x),R=Eh;return Wl("isCompressed",A),A?R(Uint8Array.from([v.hasEvenY()?2:3]),x):R(Uint8Array.from([4]),x,t.toBytes(T.y))},fromBytes(P){const v=P.length,A=P[0],T=P.subarray(1);if(v===s&&(A===2||A===3)){const x=Ta(T);if(!ig(x,Yt,t.ORDER))throw new Error("Point is not on curve");const R=u(x);let j;try{j=t.sqrt(R)}catch(z){const G=z instanceof Error?": "+z.message:"";throw new Error("Point is not on curve"+G)}const q=(j&Yt)===Yt;return(A&1)===1!==q&&(j=t.neg(j)),{x,y:j}}else if(v===i&&A===4){const x=t.fromBytes(T.subarray(0,t.BYTES)),R=t.fromBytes(T.subarray(t.BYTES,2*t.BYTES));return{x,y:R}}else{const x=s,R=i;throw new Error("invalid Point, expected length of "+x+", or uncompressed "+R+", got "+v)}}}),d=P=>Gl(Jl(P,e.nByteLength));function f(P){const v=n>>Yt;return P>v}function p(P){return f(P)?o(-P):P}const g=(P,v,A)=>Ta(P.slice(v,A));class y{constructor(v,A,T){this.r=v,this.s=A,this.recovery=T,this.assertValidity()}static fromCompact(v){const A=e.nByteLength;return v=yn("compactSignature",v,A*2),new y(g(v,0,A),g(v,A,2*A))}static fromDER(v){const{r:A,s:T}=ui.toSig(yn("DER",v));return new y(A,T)}assertValidity(){Si("r",this.r,Yt,n),Si("s",this.s,Yt,n)}addRecoveryBit(v){return new y(this.r,this.s,v)}recoverPublicKey(v){const{r:A,s:T,recovery:x}=this,R=B(yn("msgHash",v));if(x==null||![0,1,2,3].includes(x))throw new Error("recovery id invalid");const j=x===2||x===3?A+e.n:A;if(j>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const q=(x&1)===0?"02":"03",z=c.fromHex(q+d(j)),G=a(j),Q=o(-R*G),Y=o(T*G),ne=c.BASE.multiplyAndAddUnsafe(z,Q,Y);if(!ne)throw new Error("point at infinify");return ne.assertValidity(),ne}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Kl(this.toDERHex())}toDERHex(){return ui.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Kl(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const C={isValidPrivateKey(P){try{return l(P),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const P=E_(e.n);return dL(e.randomBytes(P),e.n)},precompute(P=8,v=c.BASE){return v._setWindowSize(P),v.multiply(BigInt(3)),v}};function w(P,v=!0){return c.fromPrivateKey(P).toRawBytes(v)}function I(P){const v=$a(P),A=typeof P=="string",T=(v||A)&&P.length;return v?T===s||T===i:A?T===2*s||T===2*i:P instanceof c}function U(P,v,A=!0){if(I(P))throw new Error("first arg must be private key");if(!I(v))throw new Error("second arg must be public key");return c.fromHex(v).multiply(l(P)).toRawBytes(A)}const M=e.bits2int||function(P){if(P.length>8192)throw new Error("input is too large");const v=Ta(P),A=P.length*8-e.nBitLength;return A>0?v>>BigInt(A):v},B=e.bits2int_modN||function(P){return o(M(P))},L=Ww(e.nBitLength);function m(P){return Si("num < 2^"+e.nBitLength,P,_i,L),Jl(P,e.nByteLength)}function b(P,v,A=N){if(["recovered","canonical"].some(we=>we in A))throw new Error("sign() legacy options not supported");const{hash:T,randomBytes:x}=e;let{lowS:R,prehash:j,extraEntropy:q}=A;R==null&&(R=!0),P=yn("msgHash",P),TE(A),j&&(P=yn("prehashed msgHash",T(P)));const z=B(P),G=l(v),Q=[m(G),m(z)];if(q!=null&&q!==!1){const we=q===!0?x(t.BYTES):q;Q.push(yn("extraEntropy",we))}const Y=Eh(...Q),ne=z;function ie(we){const be=M(we);if(!h(be))return;const Ve=a(be),Le=c.BASE.multiply(be).toAffine(),je=o(Le.x);if(je===_i)return;const ye=o(Ve*o(ne+je*G));if(ye===_i)return;let pe=(Le.x===je?0:2)|Number(Le.y&Yt),Ne=ye;return R&&f(ye)&&(Ne=p(ye),pe^=1),new y(je,Ne,pe)}return{seed:Y,k2sig:ie}}const N={lowS:e.lowS,prehash:!1},_={lowS:e.lowS,prehash:!1};function S(P,v,A=N){const{seed:T,k2sig:x}=b(P,v,A),R=e;return g_(R.hash.outputLen,R.nByteLength,R.hmac)(T,x)}c.BASE._setWindowSize(8);function k(P,v,A,T=_){var ye;const x=P;v=yn("msgHash",v),A=yn("publicKey",A);const{lowS:R,prehash:j,format:q}=T;if(TE(T),"strict"in T)throw new Error("options.strict was renamed to lowS");if(q!==void 0&&q!=="compact"&&q!=="der")throw new Error("format must be compact or der");const z=typeof x=="string"||$a(x),G=!z&&!q&&typeof x=="object"&&x!==null&&typeof x.r=="bigint"&&typeof x.s=="bigint";if(!z&&!G)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let Q,Y;try{if(G&&(Q=new y(x.r,x.s)),z){try{q!=="compact"&&(Q=y.fromDER(x))}catch(pe){if(!(pe instanceof ui.Err))throw pe}!Q&&q!=="der"&&(Q=y.fromCompact(x))}Y=c.fromHex(A)}catch{return!1}if(!Q||R&&Q.hasHighS())return!1;j&&(v=e.hash(v));const{r:ne,s:ie}=Q,we=B(v),be=a(ie),Ve=o(we*be),Le=o(ne*be),je=(ye=c.BASE.multiplyAndAddUnsafe(Y,Ve,Le))==null?void 0:ye.toAffine();return je?o(je.x)===ne:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:U,sign:S,verify:k,ProjectivePoint:c,Signature:y,utils:C}}function xL(r){return{hash:r,hmac:(e,...t)=>tg(r,e,U3(...t)),randomBytes:mu}}function RL(r,e){const t=n=>PL({...r,...xL(n)});return{...t(e),create:t}}const __=w_(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),kL=__.create(BigInt("-3")),DL=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),UL=RL({a:kL,b:DL,Fp:__,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Bd),I_="base10",Br="base16",us="base64pad",Yi="base64url",$d="utf8",N_=0,Ti=1,Fd=2,LL=0,PE=1,rh=12,Gw=32;function BL(){const r=Cy.utils.randomPrivateKey(),e=Cy.getPublicKey(r);return{privateKey:Xr(r,Br),publicKey:Xr(e,Br)}}function _y(){const r=mu(Gw);return Xr(r,Br)}function ML(r,e){const t=Cy.getSharedSecret(Vn(r,Br),Vn(e,Br)),n=HU(Bd,t,void 0,void 0,Gw);return Xr(n,Br)}function Mf(r){const e=Bd(Vn(r,Br));return Xr(e,Br)}function Ms(r){const e=Bd(Vn(r,$d));return Xr(e,Br)}function S_(r){return Vn(`${r}`,I_)}function Fa(r){return Number(Xr(r,I_))}function T_(r){return r.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function O_(r){const e=r.replace(/-/g,"+").replace(/_/g,"/"),t=(4-e.length%4)%4;return e+"=".repeat(t)}function $L(r){const e=S_(typeof r.type<"u"?r.type:N_);if(Fa(e)===Ti&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof r.senderPublicKey<"u"?Vn(r.senderPublicKey,Br):void 0,n=typeof r.iv<"u"?Vn(r.iv,Br):mu(rh),s=Vn(r.symKey,Br),i=d_(s,n).encrypt(Vn(r.message,$d)),o=P_({type:e,sealed:i,iv:n,senderPublicKey:t});return r.encoding===Yi?T_(o):o}function FL(r){const e=Vn(r.symKey,Br),{sealed:t,iv:n}=vh({encoded:r.encoded,encoding:r.encoding}),s=d_(e,n).decrypt(t);if(s===null)throw new Error("Failed to decrypt");return Xr(s,$d)}function jL(r,e){const t=S_(Fd),n=mu(rh),s=Vn(r,$d),i=P_({type:t,sealed:s,iv:n});return e===Yi?T_(i):i}function HL(r,e){const{sealed:t}=vh({encoded:r,encoding:e});return Xr(t,$d)}function P_(r){if(Fa(r.type)===Fd)return Xr(th([r.type,r.sealed]),us);if(Fa(r.type)===Ti){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Xr(th([r.type,r.senderPublicKey,r.iv,r.sealed]),us)}return Xr(th([r.type,r.iv,r.sealed]),us)}function vh(r){const e=(r.encoding||us)===Yi?O_(r.encoded):r.encoded,t=Vn(e,us),n=t.slice(LL,PE),s=PE;if(Fa(n)===Ti){const c=s+Gw,l=c+rh,u=t.slice(s,c),h=t.slice(c,l),d=t.slice(l);return{type:n,sealed:d,iv:h,senderPublicKey:u}}if(Fa(n)===Fd){const c=t.slice(s),l=mu(rh);return{type:n,sealed:c,iv:l}}const i=s+rh,o=t.slice(s,i),a=t.slice(i);return{type:n,sealed:a,iv:o}}function VL(r,e){const t=vh({encoded:r,encoding:e==null?void 0:e.encoding});return x_({type:Fa(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?Xr(t.senderPublicKey,Br):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function x_(r){const e=(r==null?void 0:r.type)||N_;if(e===Ti){if(typeof(r==null?void 0:r.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(r==null?void 0:r.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r==null?void 0:r.senderPublicKey,receiverPublicKey:r==null?void 0:r.receiverPublicKey}}function xE(r){return r.type===Ti&&typeof r.senderPublicKey=="string"&&typeof r.receiverPublicKey=="string"}function RE(r){return r.type===Fd}function qL(r){const e=nr.from(r.x,"base64"),t=nr.from(r.y,"base64");return th([new Uint8Array([4]),e,t])}function zL(r,e){const[t,n,s]=r.split("."),i=nr.from(O_(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${t}.${n}`,l=Bd(c),u=qL(e);if(!UL.verify(th([o,a]),l,u))throw new Error("Invalid signature");return ly(r).payload}const WL="irn";function op(r){return(r==null?void 0:r.relay)||{protocol:WL}}function qu(r){const e=YD[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}function GL(r,e="-"){const t={},n="relay"+e;return Object.keys(r).forEach(s=>{if(s.startsWith(n)){const i=s.replace(n,""),o=r[s];t[i]=o}}),t}function kE(r){if(!r.includes("wc:")){const l=XC(r);l!=null&&l.includes("wc:")&&(r=l)}r=r.includes("wc://")?r.replace("wc://",""):r,r=r.includes("wc:")?r.replace("wc:",""):r;const e=r.indexOf(":"),t=r.indexOf("?")!==-1?r.indexOf("?"):void 0,n=r.substring(0,e),s=r.substring(e+1,t).split("@"),i=typeof t<"u"?r.substring(t):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:KL(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:GL(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function KL(r){return r.startsWith("//")?r.substring(2):r}function JL(r,e="-"){const t="relay",n={};return Object.keys(r).forEach(s=>{const i=s,o=t+e+i;r[i]&&(n[o]=r[i])}),n}function DE(r){const e=new URLSearchParams,t=JL(r.relay);Object.keys(t).sort().forEach(s=>{e.set(s,t[s])}),e.set("symKey",r.symKey),r.expiryTimestamp&&e.set("expiryTimestamp",r.expiryTimestamp.toString()),r.methods&&e.set("methods",r.methods.join(","));const n=e.toString();return`${r.protocol}:${r.topic}@${r.version}?${n}`}function cf(r,e,t){return`${r}?wc_ev=${t}&topic=${e}`}function wu(r){const e=[];return r.forEach(t=>{const[n,s]=t.split(":");e.push(`${n}:${s}`)}),e}function QL(r){const e=[];return Object.values(r).forEach(t=>{e.push(...wu(t.accounts))}),e}function YL(r,e){const t=[];return Object.values(r).forEach(n=>{wu(n.accounts).includes(e)&&t.push(...n.methods)}),t}function ZL(r,e){const t=[];return Object.values(r).forEach(n=>{wu(n.accounts).includes(e)&&t.push(...n.events)}),t}function Kw(r){return r.includes(":")}function zu(r){return Kw(r)?r.split(":")[0]:r}function XL(r){const e={};return r==null||r.forEach(t=>{var n;const[s,i]=t.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(t),(n=e[s].chains)==null||n.push(`${s}:${i}`)}),e}function UE(r,e){e=e.map(n=>n.replace("did:pkh:",""));const t=XL(e);for(const[n,s]of Object.entries(t))s.methods?s.methods=Lf(s.methods,r):s.methods=r,s.events=["chainChanged","accountsChanged"];return t}const eB={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},tB={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function re(r,e){const{message:t,code:n}=tB[r];return{message:e?`${t} ${e}`:t,code:n}}function ut(r,e){const{message:t,code:n}=eB[r];return{message:e?`${t} ${e}`:t,code:n}}function _o(r,e){return!!Array.isArray(r)}function Ah(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function lr(r){return typeof r>"u"}function jt(r,e){return e&&lr(r)?!0:typeof r=="string"&&!!r.trim().length}function Jw(r,e){return e&&lr(r)?!0:typeof r=="number"&&!isNaN(r)}function rB(r,e){const{requiredNamespaces:t}=e,n=Object.keys(r.namespaces),s=Object.keys(t);let i=!0;return Yo(s,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:l}=r.namespaces[o],u=wu(a),h=t[o];(!Yo(KC(o,h),u)||!Yo(h.methods,c)||!Yo(h.events,l))&&(i=!1)}),i):!1}function ap(r){return jt(r,!1)&&r.includes(":")?r.split(":").length===2:!1}function nB(r){if(jt(r,!1)&&r.includes(":")){const e=r.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&ap(t)}}return!1}function sB(r){function e(t){try{return typeof new URL(t)<"u"}catch{return!1}}try{if(jt(r,!1)){if(e(r))return!0;const t=XC(r);return e(t)}}catch{}return!1}function iB(r){var e;return(e=r==null?void 0:r.proposer)==null?void 0:e.publicKey}function oB(r){return r==null?void 0:r.topic}function aB(r,e){let t=null;return jt(r==null?void 0:r.publicKey,!1)||(t=re("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function LE(r){let e=!0;return _o(r)?r.length&&(e=r.every(t=>jt(t,!1))):e=!1,e}function cB(r,e,t){let n=null;return _o(e)&&e.length?e.forEach(s=>{n||ap(s)||(n=ut("UNSUPPORTED_CHAINS",`${t}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):ap(r)||(n=ut("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function lB(r,e,t){let n=null;return Object.entries(r).forEach(([s,i])=>{if(n)return;const o=cB(s,KC(s,i),`${e} ${t}`);o&&(n=o)}),n}function uB(r,e){let t=null;return _o(r)?r.forEach(n=>{t||nB(n)||(t=ut("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):t=ut("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function hB(r,e){let t=null;return Object.values(r).forEach(n=>{if(t)return;const s=uB(n==null?void 0:n.accounts,`${e} namespace`);s&&(t=s)}),t}function dB(r,e){let t=null;return LE(r==null?void 0:r.methods)?LE(r==null?void 0:r.events)||(t=ut("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=ut("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function R_(r,e){let t=null;return Object.values(r).forEach(n=>{if(t)return;const s=dB(n,`${e}, namespace`);s&&(t=s)}),t}function fB(r,e,t){let n=null;if(r&&Ah(r)){const s=R_(r,e);s&&(n=s);const i=lB(r,e,t);i&&(n=i)}else n=re("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return n}function cm(r,e){let t=null;if(r&&Ah(r)){const n=R_(r,e);n&&(t=n);const s=hB(r,e);s&&(t=s)}else t=re("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function k_(r){return jt(r.protocol,!0)}function pB(r,e){let t=!1;return r?r&&_o(r)&&r.length&&r.forEach(n=>{t=k_(n)}):t=!0,t}function gB(r){return typeof r=="number"}function Wr(r){return typeof r<"u"&&typeof r!==null}function mB(r){return!(!r||typeof r!="object"||!r.code||!Jw(r.code,!1)||!r.message||!jt(r.message,!1))}function yB(r){return!(lr(r)||!jt(r.method,!1))}function wB(r){return!(lr(r)||lr(r.result)&&lr(r.error)||!Jw(r.id,!1)||!jt(r.jsonrpc,!1))}function bB(r){return!(lr(r)||!jt(r.name,!1))}function BE(r,e){return!(!ap(e)||!QL(r).includes(e))}function EB(r,e,t){return jt(t,!1)?YL(r,e).includes(t):!1}function vB(r,e,t){return jt(t,!1)?ZL(r,e).includes(t):!1}function ME(r,e,t){let n=null;const s=AB(r),i=CB(e),o=Object.keys(s),a=Object.keys(i),c=$E(Object.keys(r)),l=$E(Object.keys(e)),u=c.filter(h=>!l.includes(h));return u.length&&(n=re("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Yo(o,a)||(n=re("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(h=>{if(!h.includes(":")||n)return;const d=wu(e[h].accounts);d.includes(h)||(n=re("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${h}
        Required: ${h}
        Approved: ${d.toString()}`))}),o.forEach(h=>{n||(Yo(s[h].methods,i[h].methods)?Yo(s[h].events,i[h].events)||(n=re("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${h}`)):n=re("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${h}`))}),n}function AB(r){const e={};return Object.keys(r).forEach(t=>{var n;t.includes(":")?e[t]=r[t]:(n=r[t].chains)==null||n.forEach(s=>{e[s]={methods:r[t].methods,events:r[t].events}})}),e}function $E(r){return[...new Set(r.map(e=>e.includes(":")?e.split(":")[0]:e))]}function CB(r){const e={};return Object.keys(r).forEach(t=>{if(t.includes(":"))e[t]=r[t];else{const n=wu(r[t].accounts);n==null||n.forEach(s=>{e[s]={accounts:r[t].accounts.filter(i=>i.includes(`${s}:`)),methods:r[t].methods,events:r[t].events}})}}),e}function _B(r,e){return Jw(r,!1)&&r<=e.max&&r>=e.min}function FE(){const r=Ud();return new Promise(e=>{switch(r){case En.browser:e(IB());break;case En.reactNative:e(NB());break;case En.node:e(SB());break;default:e(!0)}})}function IB(){return Dd()&&(navigator==null?void 0:navigator.onLine)}async function NB(){if(xo()&&typeof Ee<"u"&&Ee!=null&&Ee.NetInfo){const r=await(Ee==null?void 0:Ee.NetInfo.fetch());return r==null?void 0:r.isConnected}return!0}function SB(){return!0}function TB(r){switch(Ud()){case En.browser:OB(r);break;case En.reactNative:PB(r);break}}function OB(r){!xo()&&Dd()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)))}function PB(r){xo()&&typeof Ee<"u"&&Ee!=null&&Ee.NetInfo&&(Ee==null||Ee.NetInfo.addEventListener(e=>r(e==null?void 0:e.isConnected)))}const lm={};class xu{static get(e){return lm[e]}static set(e,t){lm[e]=t}static delete(e){delete lm[e]}}const xB="PARSE_ERROR",RB="INVALID_REQUEST",kB="METHOD_NOT_FOUND",DB="INVALID_PARAMS",D_="INTERNAL_ERROR",Qw="SERVER_ERROR",UB=[-32700,-32600,-32601,-32602,-32603],nh={[xB]:{code:-32700,message:"Parse error"},[RB]:{code:-32600,message:"Invalid Request"},[kB]:{code:-32601,message:"Method not found"},[DB]:{code:-32602,message:"Invalid params"},[D_]:{code:-32603,message:"Internal error"},[Qw]:{code:-32e3,message:"Server error"}},U_=Qw;function LB(r){return UB.includes(r)}function jE(r){return Object.keys(nh).includes(r)?nh[r]:nh[U_]}function BB(r){const e=Object.values(nh).find(t=>t.code===r);return e||nh[U_]}function L_(r,e,t){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):r}function Ss(r=3){const e=Date.now()*Math.pow(10,r),t=Math.floor(Math.random()*Math.pow(10,r));return e+t}function Zo(r=6){return BigInt(Ss(r))}function vo(r,e,t){return{id:t||Ss(),jsonrpc:"2.0",method:r,params:e}}function og(r,e){return{id:r,jsonrpc:"2.0",result:e}}function ag(r,e,t){return{id:r,jsonrpc:"2.0",error:MB(e)}}function MB(r,e){return typeof r>"u"?jE(D_):(typeof r=="string"&&(r=Object.assign(Object.assign({},jE(Qw)),{message:r})),LB(r.code)&&(r=BB(r.code)),r)}class $B{}let FB=class extends $B{constructor(){super()}};class jB extends FB{constructor(e){super()}}const HB="^https?:",VB="^wss?:";function qB(r){const e=r.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function B_(r,e){const t=qB(r);return typeof t>"u"?!1:new RegExp(e).test(t)}function HE(r){return B_(r,HB)}function VE(r){return B_(r,VB)}function zB(r){return new RegExp("wss?://localhost(:d{2,5})?").test(r)}function M_(r){return typeof r=="object"&&"id"in r&&"jsonrpc"in r&&r.jsonrpc==="2.0"}function Yw(r){return M_(r)&&"method"in r}function cg(r){return M_(r)&&(Ts(r)||jn(r))}function Ts(r){return"result"in r}function jn(r){return"error"in r}class qn extends jB{constructor(e){super(e),this.events=new ws.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(vo(e.method,e.params||[],e.id||Zo().toString()),t)}async requestStrict(e,t){return new Promise(async(n,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{jn(i)?s(i.error):n(i.result)});try{await this.connection.send(e,t)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),cg(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const WB=()=>typeof WebSocket<"u"?WebSocket:typeof Ee<"u"&&typeof Ee.WebSocket<"u"?Ee.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),GB=()=>typeof WebSocket<"u"||typeof Ee<"u"&&typeof Ee.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",qE=r=>r.split("?")[0],zE=10,KB=WB();let JB=class{constructor(e){if(this.url=e,this.events=new ws.EventEmitter,this.registering=!1,!VE(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Ri(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!VE(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,n)=>{const s=WS.isReactNative()?void 0:{rejectUnauthorized:!zB(e)},i=new KB(e,[],s);GB()?i.onerror=o=>{const a=o;n(this.emitError(a.error))}:i.on("error",o=>{n(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),t(i)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?La(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const n=this.parseError(t),s=n.message||n.toString(),i=ag(e,s);this.events.emit("payload",i)}parseError(e,t=this.url){return L_(e,qE(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>zE&&this.events.setMaxListeners(zE)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${qE(this.url)}`));return this.events.emit("register_error",t),t}};var QB={};const $_="wc",F_=2,Iy="core",Gs=`${$_}@2:${Iy}:`,YB={logger:"error"},ZB={database:":memory:"},XB="crypto",WE="client_ed25519_seed",e8=te.ONE_DAY,t8="keychain",r8="0.3",n8="messages",s8="0.3",GE=te.SIX_HOURS,i8="publisher",j_="irn",o8="error",H_="wss://relay.walletconnect.org",a8="relayer",Xt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},c8="_subscription",In={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},l8=.1,Ny="2.19.2",Ct={link_mode:"link_mode",relay:"relay"},$f={inbound:"inbound",outbound:"outbound"},u8="0.3",h8="WALLETCONNECT_CLIENT_ID",KE="WALLETCONNECT_LINK_MODE_APPS",hn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},d8="subscription",f8="0.3",p8="pairing",g8="0.3",Ru={wc_pairingDelete:{req:{ttl:te.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:te.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:te.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:te.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:te.ONE_DAY,prompt:!1,tag:0},res:{ttl:te.ONE_DAY,prompt:!1,tag:0}}},zo={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Gn={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},m8="history",y8="0.3",w8="expirer",Dn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},b8="0.3",E8="verify-api",v8="https://verify.walletconnect.com",V_="https://verify.walletconnect.org",sh=V_,A8=`${sh}/v3`,C8=[v8,V_],_8="echo",I8="https://echo.walletconnect.com",Ns={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},ii={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Kn={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Uo={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Lo={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},ku={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},N8=.1,S8="event-client",T8=86400,O8="https://pulse.walletconnect.org/batch";function P8(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var s=0;s<r.length;s++){var i=r.charAt(s),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=s}var a=r.length,c=r.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,C=0,w=p.length;C!==w&&p[C]===0;)C++,g++;for(var I=(w-C)*u+1>>>0,U=new Uint8Array(I);C!==w;){for(var M=p[C],B=0,L=I-1;(M!==0||B<y)&&L!==-1;L--,B++)M+=256*U[L]>>>0,U[L]=M%a>>>0,M=M/a>>>0;if(M!==0)throw new Error("Non-zero carry");y=B,C++}for(var m=I-y;m!==I&&U[m]===0;)m++;for(var b=c.repeat(g);m<I;++m)b+=r.charAt(U[m]);return b}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,C=0;p[g]===c;)y++,g++;for(var w=(p.length-g)*l+1>>>0,I=new Uint8Array(w);p[g];){var U=t[p.charCodeAt(g)];if(U===255)return;for(var M=0,B=w-1;(U!==0||M<C)&&B!==-1;B--,M++)U+=a*I[B]>>>0,I[B]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");C=M,g++}if(p[g]!==" "){for(var L=w-C;L!==w&&I[L]===0;)L++;for(var m=new Uint8Array(y+(w-L)),b=y;L!==w;)m[b++]=I[L++];return m}}}function f(p){var g=d(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var x8=P8,R8=x8;const q_=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},k8=r=>new TextEncoder().encode(r),D8=r=>new TextDecoder().decode(r);class U8{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class L8{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return z_(this,e)}}class B8{constructor(e){this.decoders=e}or(e){return z_(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const z_=(r,e)=>new B8({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class M8{constructor(e,t,n,s){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=s,this.encoder=new U8(e,t,n),this.decoder=new L8(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const lg=({name:r,prefix:e,encode:t,decode:n})=>new M8(r,e,t,n),jd=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:s}=R8(t,e);return lg({prefix:r,name:e,encode:n,decode:i=>q_(s(i))})},$8=(r,e,t,n)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=r.length;for(;r[i-1]==="=";)--i;const o=new Uint8Array(i*t/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const h=s[r[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|h,a+=t,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=t||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},F8=(r,e,t)=>{const n=e[e.length-1]==="=",s=(1<<t)-1;let i="",o=0,a=0;for(let c=0;c<r.length;++c)for(a=a<<8|r[c],o+=8;o>t;)o-=t,i+=e[s&a>>o];if(o&&(i+=e[s&a<<t-o]),n)for(;i.length*t&7;)i+="=";return i},mr=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>lg({prefix:e,name:r,encode(s){return F8(s,n,t)},decode(s){return $8(s,n,t,r)}}),j8=lg({prefix:"\0",name:"identity",encode:r=>D8(r),decode:r=>k8(r)});var H8=Object.freeze({__proto__:null,identity:j8});const V8=mr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var q8=Object.freeze({__proto__:null,base2:V8});const z8=mr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var W8=Object.freeze({__proto__:null,base8:z8});const G8=jd({prefix:"9",name:"base10",alphabet:"0123456789"});var K8=Object.freeze({__proto__:null,base10:G8});const J8=mr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Q8=mr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Y8=Object.freeze({__proto__:null,base16:J8,base16upper:Q8});const Z8=mr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),X8=mr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),eM=mr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),tM=mr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),rM=mr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),nM=mr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),sM=mr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),iM=mr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),oM=mr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var aM=Object.freeze({__proto__:null,base32:Z8,base32upper:X8,base32pad:eM,base32padupper:tM,base32hex:rM,base32hexupper:nM,base32hexpad:sM,base32hexpadupper:iM,base32z:oM});const cM=jd({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),lM=jd({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var uM=Object.freeze({__proto__:null,base36:cM,base36upper:lM});const hM=jd({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),dM=jd({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var fM=Object.freeze({__proto__:null,base58btc:hM,base58flickr:dM});const pM=mr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),gM=mr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),mM=mr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),yM=mr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var wM=Object.freeze({__proto__:null,base64:pM,base64pad:gM,base64url:mM,base64urlpad:yM});const W_=Array.from(""),bM=W_.reduce((r,e,t)=>(r[t]=e,r),[]),EM=W_.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function vM(r){return r.reduce((e,t)=>(e+=bM[t],e),"")}function AM(r){const e=[];for(const t of r){const n=EM[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}const CM=lg({prefix:"",name:"base256emoji",encode:vM,decode:AM});var _M=Object.freeze({__proto__:null,base256emoji:CM}),IM=G_,JE=128,NM=-128,SM=Math.pow(2,31);function G_(r,e,t){e=e||[],t=t||0;for(var n=t;r>=SM;)e[t++]=r&255|JE,r/=128;for(;r&NM;)e[t++]=r&255|JE,r>>>=7;return e[t]=r|0,G_.bytes=t-n+1,e}var TM=Sy,OM=128,QE=127;function Sy(r,n){var t=0,n=n||0,s=0,i=n,o,a=r.length;do{if(i>=a)throw Sy.bytes=0,new RangeError("Could not decode varint");o=r[i++],t+=s<28?(o&QE)<<s:(o&QE)*Math.pow(2,s),s+=7}while(o>=OM);return Sy.bytes=i-n,t}var PM=Math.pow(2,7),xM=Math.pow(2,14),RM=Math.pow(2,21),kM=Math.pow(2,28),DM=Math.pow(2,35),UM=Math.pow(2,42),LM=Math.pow(2,49),BM=Math.pow(2,56),MM=Math.pow(2,63),$M=function(r){return r<PM?1:r<xM?2:r<RM?3:r<kM?4:r<DM?5:r<UM?6:r<LM?7:r<BM?8:r<MM?9:10},FM={encode:IM,decode:TM,encodingLength:$M},K_=FM;const YE=(r,e,t=0)=>(K_.encode(r,e,t),e),ZE=r=>K_.encodingLength(r),Ty=(r,e)=>{const t=e.byteLength,n=ZE(r),s=n+ZE(t),i=new Uint8Array(s+t);return YE(r,i,0),YE(t,i,n),i.set(e,s),new jM(r,t,e,i)};class jM{constructor(e,t,n,s){this.code=e,this.size=t,this.digest=n,this.bytes=s}}const J_=({name:r,code:e,encode:t})=>new HM(r,e,t);class HM{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Ty(this.code,t):t.then(n=>Ty(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Q_=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),VM=J_({name:"sha2-256",code:18,encode:Q_("SHA-256")}),qM=J_({name:"sha2-512",code:19,encode:Q_("SHA-512")});var zM=Object.freeze({__proto__:null,sha256:VM,sha512:qM});const Y_=0,WM="identity",Z_=q_,GM=r=>Ty(Y_,Z_(r)),KM={code:Y_,name:WM,encode:Z_,digest:GM};var JM=Object.freeze({__proto__:null,identity:KM});new TextEncoder,new TextDecoder;const XE={...H8,...q8,...W8,...K8,...Y8,...aM,...uM,...fM,...wM,..._M};({...zM,...JM});function QM(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function X_(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const ev=X_("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),um=X_("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=QM(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),YM={utf8:ev,"utf-8":ev,hex:XE.base16,latin1:um,ascii:um,binary:um,...XE};function ZM(r,e="utf8"){const t=YM[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}var XM=Object.defineProperty,e$=(r,e,t)=>e in r?XM(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Cs=(r,e,t)=>e$(r,typeof e!="symbol"?e+"":e,t);class t${constructor(e,t){this.core=e,this.logger=t,Cs(this,"keychain",new Map),Cs(this,"name",t8),Cs(this,"version",r8),Cs(this,"initialized",!1),Cs(this,"storagePrefix",Gs),Cs(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),Cs(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),Cs(this,"set",async(n,s)=>{this.isInitialized(),this.keychain.set(n,s),await this.persist()}),Cs(this,"get",n=>{this.isInitialized();const s=this.keychain.get(n);if(typeof s>"u"){const{message:i}=re("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(i)}return s}),Cs(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=Nr(t,this.name)}get context(){return rn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,fy(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?py(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}}var r$=Object.defineProperty,n$=(r,e,t)=>e in r?r$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ir=(r,e,t)=>n$(r,typeof e!="symbol"?e+"":e,t);class s${constructor(e,t,n){this.core=e,this.logger=t,ir(this,"name",XB),ir(this,"keychain"),ir(this,"randomSessionIdentifier",_y()),ir(this,"initialized",!1),ir(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),ir(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),ir(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=Db(s);return TC(i.publicKey)}),ir(this,"generateKeyPair",()=>{this.isInitialized();const s=BL();return this.setPrivateKey(s.publicKey,s.privateKey)}),ir(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=Db(i),a=this.randomSessionIdentifier;return await Q2(a,s,e8,o)}),ir(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=ML(a,i);return this.setSymKey(c,o)}),ir(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||Mf(s);return await this.keychain.set(o,s),o}),ir(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),ir(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),ir(this,"encode",async(s,i,o)=>{this.isInitialized();const a=x_(o),c=Ri(i);if(RE(a))return jL(c,o==null?void 0:o.encoding);if(xE(a)){const d=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(d,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:h}=a;return $L({type:u,symKey:l,message:c,senderPublicKey:h,encoding:o==null?void 0:o.encoding})}),ir(this,"decode",async(s,i,o)=>{this.isInitialized();const a=VL(i,o);if(RE(a)){const c=HL(i,o==null?void 0:o.encoding);return La(c)}if(xE(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=FL({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return La(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),ir(this,"getPayloadType",(s,i=us)=>{const o=vh({encoded:s,encoding:i});return Fa(o.type)}),ir(this,"getPayloadSenderPublicKey",(s,i=us)=>{const o=vh({encoded:s,encoding:i});return o.senderPublicKey?Xr(o.senderPublicKey,Br):void 0}),this.core=e,this.logger=Nr(t,this.name),this.keychain=n||new t$(this.core,this.logger)}get context(){return rn(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(WE)}catch{e=_y(),await this.keychain.set(WE,e)}return ZM(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}}var i$=Object.defineProperty,o$=Object.defineProperties,a$=Object.getOwnPropertyDescriptors,tv=Object.getOwnPropertySymbols,c$=Object.prototype.hasOwnProperty,l$=Object.prototype.propertyIsEnumerable,Oy=(r,e,t)=>e in r?i$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,u$=(r,e)=>{for(var t in e||(e={}))c$.call(e,t)&&Oy(r,t,e[t]);if(tv)for(var t of tv(e))l$.call(e,t)&&Oy(r,t,e[t]);return r},h$=(r,e)=>o$(r,a$(e)),an=(r,e,t)=>Oy(r,typeof e!="symbol"?e+"":e,t);class d$ extends KP{constructor(e,t){super(e,t),this.logger=e,this.core=t,an(this,"messages",new Map),an(this,"messagesWithoutClientAck",new Map),an(this,"name",n8),an(this,"version",s8),an(this,"initialized",!1),an(this,"storagePrefix",Gs),an(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),an(this,"set",async(n,s,i)=>{this.isInitialized();const o=Ms(s);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(n,a),i===$f.inbound){const c=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,h$(u$({},c),{[o]:s}))}return await this.persist(),o}),an(this,"get",n=>{this.isInitialized();let s=this.messages.get(n);return typeof s>"u"&&(s={}),s}),an(this,"getWithoutAck",n=>{this.isInitialized();const s={};for(const i of n){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),an(this,"has",(n,s)=>{this.isInitialized();const i=this.get(n),o=Ms(s);return typeof i[o]<"u"}),an(this,"ack",async(n,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(n);if(typeof i>"u")return;const o=Ms(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,i),await this.persist()}),an(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=Nr(e,this.name),this.core=t}get context(){return rn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,fy(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,fy(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?py(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?py(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}}var f$=Object.defineProperty,p$=Object.defineProperties,g$=Object.getOwnPropertyDescriptors,rv=Object.getOwnPropertySymbols,m$=Object.prototype.hasOwnProperty,y$=Object.prototype.propertyIsEnumerable,Py=(r,e,t)=>e in r?f$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,lf=(r,e)=>{for(var t in e||(e={}))m$.call(e,t)&&Py(r,t,e[t]);if(rv)for(var t of rv(e))y$.call(e,t)&&Py(r,t,e[t]);return r},hm=(r,e)=>p$(r,g$(e)),Jn=(r,e,t)=>Py(r,typeof e!="symbol"?e+"":e,t);class w$ extends JP{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,Jn(this,"events",new ws.EventEmitter),Jn(this,"name",i8),Jn(this,"queue",new Map),Jn(this,"publishTimeout",te.toMiliseconds(te.ONE_MINUTE)),Jn(this,"initialPublishTimeout",te.toMiliseconds(te.ONE_SECOND*15)),Jn(this,"needsTransportRestart",!1),Jn(this,"publish",async(n,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||GE,c=op(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,h=(i==null?void 0:i.id)||Zo().toString(),d={topic:n,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:h,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${h} tag:${u}`;try{const p=new Promise(async g=>{const y=({id:w})=>{d.opts.id===w&&(this.removeRequestFromQueue(w),this.relayer.events.removeListener(Xt.publish,y),g(d))};this.relayer.events.on(Xt.publish,y);const C=Eo(new Promise((w,I)=>{this.rpcPublish({topic:n,message:s,ttl:a,prompt:l,tag:u,id:h,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(w).catch(U=>{this.logger.warn(U,U==null?void 0:U.message),I(U)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${h} tag:${u}`);try{await C,this.events.removeListener(Xt.publish,y)}catch(w){this.queue.set(h,hm(lf({},d),{attempt:1})),this.logger.warn(w,w==null?void 0:w.message)}});this.logger.trace({type:"method",method:"publish",params:{id:h,topic:n,message:s,opts:i}}),await Eo(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(h)}}),Jn(this,"on",(n,s)=>{this.events.on(n,s)}),Jn(this,"once",(n,s)=>{this.events.once(n,s)}),Jn(this,"off",(n,s)=>{this.events.off(n,s)}),Jn(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.relayer=e,this.logger=Nr(t,this.name),this.registerEventListeners()}get context(){return rn(this.logger)}async rpcPublish(e){var t,n,s,i;const{topic:o,message:a,ttl:c=GE,prompt:l,tag:u,id:h,attestation:d,tvf:f}=e,p={method:qu(op().protocol).publish,params:lf({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:d},f),id:h};lr((t=p.params)==null?void 0:t.prompt)&&((n=p.params)==null||delete n.prompt),lr((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(Xt.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,t)=>{const n=e.attempt+1;this.queue.set(t,hm(lf({},e),{attempt:n}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${n}`),await this.rpcPublish(hm(lf({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(hu.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Xt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Xt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var b$=Object.defineProperty,E$=(r,e,t)=>e in r?b$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,uc=(r,e,t)=>E$(r,typeof e!="symbol"?e+"":e,t);class v${constructor(){uc(this,"map",new Map),uc(this,"set",(e,t)=>{const n=this.get(e);this.exists(e,t)||this.map.set(e,[...n,t])}),uc(this,"get",e=>this.map.get(e)||[]),uc(this,"exists",(e,t)=>this.get(e).includes(t)),uc(this,"delete",(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,t))return;const s=n.filter(i=>i!==t);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),uc(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var A$=Object.defineProperty,C$=Object.defineProperties,_$=Object.getOwnPropertyDescriptors,nv=Object.getOwnPropertySymbols,I$=Object.prototype.hasOwnProperty,N$=Object.prototype.propertyIsEnumerable,xy=(r,e,t)=>e in r?A$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Du=(r,e)=>{for(var t in e||(e={}))I$.call(e,t)&&xy(r,t,e[t]);if(nv)for(var t of nv(e))N$.call(e,t)&&xy(r,t,e[t]);return r},dm=(r,e)=>C$(r,_$(e)),ft=(r,e,t)=>xy(r,typeof e!="symbol"?e+"":e,t);class S$ extends ZP{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,ft(this,"subscriptions",new Map),ft(this,"topicMap",new v$),ft(this,"events",new ws.EventEmitter),ft(this,"name",d8),ft(this,"version",f8),ft(this,"pending",new Map),ft(this,"cached",[]),ft(this,"initialized",!1),ft(this,"storagePrefix",Gs),ft(this,"subscribeTimeout",te.toMiliseconds(te.ONE_MINUTE)),ft(this,"initialSubscribeTimeout",te.toMiliseconds(te.ONE_SECOND*15)),ft(this,"clientId"),ft(this,"batchSubscribeTopicsLimit",500),ft(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),ft(this,"subscribe",async(n,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}});try{const i=op(s),o={topic:n,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(n,o);const a=await this.rpcSubscribe(n,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),ft(this,"unsubscribe",async(n,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(n,s.id,s):await this.unsubscribeByTopic(n,s)}),ft(this,"isSubscribed",n=>new Promise(s=>{s(this.topicMap.topics.includes(n))})),ft(this,"isKnownTopic",n=>new Promise(s=>{s(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(i=>i.topic===n))})),ft(this,"on",(n,s)=>{this.events.on(n,s)}),ft(this,"once",(n,s)=>{this.events.once(n,s)}),ft(this,"off",(n,s)=>{this.events.off(n,s)}),ft(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),ft(this,"start",async()=>{await this.onConnect()}),ft(this,"stop",async()=>{await this.onDisconnect()}),ft(this,"restart",async()=>{await this.restore(),await this.onRestart()}),ft(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(s=>{n.push(s)}),await this.batchSubscribe(n)}),ft(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(hu.pulse,async()=>{await this.checkPending()}),this.events.on(hn.created,async n=>{const s=hn.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()}),this.events.on(hn.deleted,async n=>{const s=hn.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()})}),this.relayer=e,this.logger=Nr(t,this.name),this.clientId=""}get context(){return rn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let n=!1;try{n=this.getSubscription(e).topic===t}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const n=this.topicMap.get(e);await Promise.all(n.map(async s=>await this.unsubscribeById(e,s,t)))}async unsubscribeById(e,t,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}});try{const s=op(n);await this.restartToComplete({topic:e,id:t,relay:s}),await this.rpcUnsubscribe(e,t,s);const i=ut("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,t,n){var s;(!n||(n==null?void 0:n.transportType)===Ct.relay)&&await this.restartToComplete({topic:e,id:e,relay:t});const i={method:qu(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((n==null?void 0:n.transportType)===Ct.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},te.toMiliseconds(te.ONE_SECOND)),a;const c=new Promise(async u=>{const h=d=>{d.topic===e&&(this.events.removeListener(hn.created,h),u(d.id))};this.events.on(hn.created,h);try{const d=await Eo(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(hn.created,h),u(d)}catch{}}),l=await Eo(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Xt.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,n={method:qu(t.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await Eo(new Promise(s=>{this.relayer.request(n).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Xt.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t=e[0].relay,n={method:qu(t.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let s;try{s=await await Eo(new Promise((i,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Xt.connection_stalled)}return s}rpcUnsubscribe(e,t,n){const s={method:qu(n.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,t){this.setSubscription(e,dm(Du({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,Du({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,n){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,Du({},t)),this.topicMap.set(t.topic,e),this.events.emit(hn.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:n}=re("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(hn.deleted,dm(Du({},n),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(hn.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<t;n++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(hn.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=re("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async t=>dm(Du({},t),{id:await this.getSubscriptionId(t.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await _3(te.toMiliseconds(te.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Ms(e+await this.getClientId())}}var T$=Object.defineProperty,sv=Object.getOwnPropertySymbols,O$=Object.prototype.hasOwnProperty,P$=Object.prototype.propertyIsEnumerable,Ry=(r,e,t)=>e in r?T$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,iv=(r,e)=>{for(var t in e||(e={}))O$.call(e,t)&&Ry(r,t,e[t]);if(sv)for(var t of sv(e))P$.call(e,t)&&Ry(r,t,e[t]);return r},Qe=(r,e,t)=>Ry(r,typeof e!="symbol"?e+"":e,t);class x$ extends QP{constructor(e){super(e),Qe(this,"protocol","wc"),Qe(this,"version",2),Qe(this,"core"),Qe(this,"logger"),Qe(this,"events",new ws.EventEmitter),Qe(this,"provider"),Qe(this,"messages"),Qe(this,"subscriber"),Qe(this,"publisher"),Qe(this,"name",a8),Qe(this,"transportExplicitlyClosed",!1),Qe(this,"initialized",!1),Qe(this,"connectionAttemptInProgress",!1),Qe(this,"relayUrl"),Qe(this,"projectId"),Qe(this,"packageName"),Qe(this,"bundleId"),Qe(this,"hasExperiencedNetworkDisruption",!1),Qe(this,"pingTimeout"),Qe(this,"heartBeatTimeout",te.toMiliseconds(te.THIRTY_SECONDS+te.FIVE_SECONDS)),Qe(this,"reconnectTimeout"),Qe(this,"connectPromise"),Qe(this,"reconnectInProgress",!1),Qe(this,"requestsInFlight",[]),Qe(this,"connectTimeout",te.toMiliseconds(te.ONE_SECOND*15)),Qe(this,"request",async t=>{var n,s;this.logger.debug("Publishing Request Payload");const i=t.id||Zo().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:t.method,topic:(n=t.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${i}:${((s=t.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(t);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),Qe(this,"resetPingTimeout",()=>{sp()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var t,n,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(n=(t=this.provider)==null?void 0:t.connection)==null?void 0:n.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),Qe(this,"onPayloadHandler",t=>{this.onProviderPayload(t),this.resetPingTimeout()}),Qe(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Xt.connect)}),Qe(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Qe(this,"onProviderErrorHandler",t=>{this.logger.fatal(`Fatal socket error: ${t.message}`),this.events.emit(Xt.error,t),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Qe(this,"registerProviderListeners",()=>{this.provider.on(In.payload,this.onPayloadHandler),this.provider.on(In.connect,this.onConnectHandler),this.provider.on(In.disconnect,this.onDisconnectHandler),this.provider.on(In.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Nr(e.logger,this.name):Nd(du({level:e.logger||o8})),this.messages=new d$(this.logger,e.core),this.subscriber=new S$(this,this.logger),this.publisher=new w$(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||H_,this.projectId=e.projectId,c3()?this.packageName=tE():l3()&&(this.bundleId=tE()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return rn(this.logger)}get connected(){var e,t,n;return((n=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,t,n;return((n=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,t,n){this.isInitialized(),await this.publisher.publish(e,t,n),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:Ct.relay},$f.outbound)}async subscribe(e,t){var n,s,i;this.isInitialized(),(!(t!=null&&t.transportType)||(t==null?void 0:t.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((n=t==null?void 0:t.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(s=t==null?void 0:t.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(hn.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(hn.created,l)}),new Promise(async(u,h)=>{a=await this.subscriber.subscribe(e,iv({internal:{throwOnFailedPublish:o}},t)).catch(d=>{o&&h(d)})||a,u()})]),a}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Eo(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(t,n)=>{await this.connect(e).then(t).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await FE())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const t=e.sort((n,s)=>n.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${t.length} message events sorted`);for(const n of t)try{await this.onMessageEvent(n)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:n}=e;if(!t.sessionExists){const s=zt(te.FIVE_MINUTES),i={topic:n,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,i)}this.events.emit(Xt.message,e),await this.recordMessageEvent(e,$f.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise(async(n,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(In.disconnect,i),await Eo(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(In.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(In.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(In.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const s=n;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise(n=>setTimeout(n,te.toMiliseconds(t*1))),t++}}startPingTimeout(){var e,t,n,s,i;if(sp())try{(t=(e=this.provider)==null?void 0:e.connection)!=null&&t.socket&&((i=(s=(n=this.provider)==null?void 0:n.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new qn(new JB(p3({sdkVersion:Ny,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){const{topic:n,message:s}=e;await this.messages.set(n,s,t)}async shouldIgnoreMessageEvent(e){const{topic:t,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;const s=this.messages.has(t,n);return s&&this.logger.warn(`Ignoring duplicate message: ${n}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Yw(e)){if(!e.method.endsWith(c8))return;const t=e.params,{topic:n,message:s,publishedAt:i,attestation:o}=t.data,a={topic:n,message:s,publishedAt:i,transportType:Ct.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(iv({type:"event",event:t.id},a)),this.events.emit(t.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else cg(e)&&this.events.emit(Xt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,$f.inbound),this.events.emit(Xt.message,e))}async acknowledgePayload(e){const t=og(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(In.payload,this.onPayloadHandler),this.provider.off(In.connect,this.onConnectHandler),this.provider.off(In.disconnect,this.onDisconnectHandler),this.provider.off(In.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await FE();TB(async t=>{e!==t&&(e=t,t?await this.transportOpen().catch(n=>this.logger.error(n,n==null?void 0:n.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Xt.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},te.toMiliseconds(l8)))))}isInitialized(){if(!this.initialized){const{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}}function R$(){}function ov(r){if(!r||typeof r!="object")return!1;const e=Object.getPrototypeOf(r);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(r)==="[object Object]":!1}function av(r){return Object.getOwnPropertySymbols(r).filter(e=>Object.prototype.propertyIsEnumerable.call(r,e))}function cv(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}const k$="[object RegExp]",D$="[object String]",U$="[object Number]",L$="[object Boolean]",lv="[object Arguments]",B$="[object Symbol]",M$="[object Date]",$$="[object Map]",F$="[object Set]",j$="[object Array]",H$="[object Function]",V$="[object ArrayBuffer]",fm="[object Object]",q$="[object Error]",z$="[object DataView]",W$="[object Uint8Array]",G$="[object Uint8ClampedArray]",K$="[object Uint16Array]",J$="[object Uint32Array]",Q$="[object BigUint64Array]",Y$="[object Int8Array]",Z$="[object Int16Array]",X$="[object Int32Array]",e5="[object BigInt64Array]",t5="[object Float32Array]",r5="[object Float64Array]";function n5(r,e){return r===e||Number.isNaN(r)&&Number.isNaN(e)}function s5(r,e,t){return Wu(r,e,void 0,void 0,void 0,void 0,t)}function Wu(r,e,t,n,s,i,o){const a=o(r,e,t,n,s,i);if(a!==void 0)return a;if(typeof r==typeof e)switch(typeof r){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return r===e;case"number":return r===e||Object.is(r,e);case"function":return r===e;case"object":return ih(r,e,i,o)}return ih(r,e,i,o)}function ih(r,e,t,n){if(Object.is(r,e))return!0;let s=cv(r),i=cv(e);if(s===lv&&(s=fm),i===lv&&(i=fm),s!==i)return!1;switch(s){case D$:return r.toString()===e.toString();case U$:{const c=r.valueOf(),l=e.valueOf();return n5(c,l)}case L$:case M$:case B$:return Object.is(r.valueOf(),e.valueOf());case k$:return r.source===e.source&&r.flags===e.flags;case H$:return r===e}t=t??new Map;const o=t.get(r),a=t.get(e);if(o!=null&&a!=null)return o===e;t.set(r,e),t.set(e,r);try{switch(s){case $$:{if(r.size!==e.size)return!1;for(const[c,l]of r.entries())if(!e.has(c)||!Wu(l,e.get(c),c,r,e,t,n))return!1;return!0}case F$:{if(r.size!==e.size)return!1;const c=Array.from(r.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const h=c[u],d=l.findIndex(f=>Wu(h,f,void 0,r,e,t,n));if(d===-1)return!1;l.splice(d,1)}return!0}case j$:case W$:case G$:case K$:case J$:case Q$:case Y$:case Z$:case X$:case e5:case t5:case r5:{if(typeof nr<"u"&&nr.isBuffer(r)!==nr.isBuffer(e)||r.length!==e.length)return!1;for(let c=0;c<r.length;c++)if(!Wu(r[c],e[c],c,r,e,t,n))return!1;return!0}case V$:return r.byteLength!==e.byteLength?!1:ih(new Uint8Array(r),new Uint8Array(e),t,n);case z$:return r.byteLength!==e.byteLength||r.byteOffset!==e.byteOffset?!1:ih(new Uint8Array(r),new Uint8Array(e),t,n);case q$:return r.name===e.name&&r.message===e.message;case fm:{if(!(ih(r.constructor,e.constructor,t,n)||ov(r)&&ov(e)))return!1;const c=[...Object.keys(r),...av(r)],l=[...Object.keys(e),...av(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const h=c[u],d=r[h];if(!Object.hasOwn(e,h))return!1;const f=e[h];if(!Wu(d,f,h,r,e,t,n))return!1}return!0}default:return!1}}finally{t.delete(r),t.delete(e)}}function i5(r,e){return s5(r,e,R$)}var o5=Object.defineProperty,uv=Object.getOwnPropertySymbols,a5=Object.prototype.hasOwnProperty,c5=Object.prototype.propertyIsEnumerable,ky=(r,e,t)=>e in r?o5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,hv=(r,e)=>{for(var t in e||(e={}))a5.call(e,t)&&ky(r,t,e[t]);if(uv)for(var t of uv(e))c5.call(e,t)&&ky(r,t,e[t]);return r},jr=(r,e,t)=>ky(r,typeof e!="symbol"?e+"":e,t);class nc extends YP{constructor(e,t,n,s=Gs,i=void 0){super(e,t,n,s),this.core=e,this.logger=t,this.name=n,jr(this,"map",new Map),jr(this,"version",u8),jr(this,"cached",[]),jr(this,"initialized",!1),jr(this,"getKey"),jr(this,"storagePrefix",Gs),jr(this,"recentlyDeleted",[]),jr(this,"recentlyDeletedLimit",200),jr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!lr(o)?this.map.set(this.getKey(o),o):iB(o)?this.map.set(o.id,o):oB(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),jr(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),jr(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),jr(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>i5(a[c],o[c]))):this.values)),jr(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=hv(hv({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),jr(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Nr(t,this.name),this.storagePrefix=s,this.getKey=i}get context(){return rn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:s}=re("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:n}=re("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=re("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}}var l5=Object.defineProperty,u5=(r,e,t)=>e in r?l5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,qe=(r,e,t)=>u5(r,typeof e!="symbol"?e+"":e,t);class h5{constructor(e,t){this.core=e,this.logger=t,qe(this,"name",p8),qe(this,"version",g8),qe(this,"events",new Pw),qe(this,"pairings"),qe(this,"initialized",!1),qe(this,"storagePrefix",Gs),qe(this,"ignoredPayloadTypes",[Ti]),qe(this,"registeredMethods",[]),qe(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),qe(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),qe(this,"create",async n=>{this.isInitialized();const s=_y(),i=await this.core.crypto.setSymKey(s),o=zt(te.FIVE_MINUTES),a={protocol:j_},c={topic:i,expiry:o,relay:a,active:!1,methods:n==null?void 0:n.methods},l=DE({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:n==null?void 0:n.methods});return this.events.emit(zo.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:n==null?void 0:n.transportType}),{topic:i,uri:l}}),qe(this,"pair",async n=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:n==null?void 0:n.uri,trace:[Ns.pairing_started]}});this.isValidPair(n,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=kE(n.uri);s.props.properties.topic=i,s.addTrace(Ns.pairing_uri_validation_success),s.addTrace(Ns.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(Ns.existing_pairing),u.active)throw s.setError(ii.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Ns.pairing_not_expired)}const h=c||zt(te.FIVE_MINUTES),d={topic:i,relay:a,expiry:h,active:!1,methods:l};this.core.expirer.set(i,h),await this.pairings.set(i,d),s.addTrace(Ns.store_new_pairing),n.activatePairing&&await this.activate({topic:i}),this.events.emit(zo.create,d),s.addTrace(Ns.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Ns.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(ii.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(ii.subscribe_pairing_topic_failure),f}return s.addTrace(Ns.subscribe_pairing_topic_success),d}),qe(this,"activate",async({topic:n})=>{this.isInitialized();const s=zt(te.FIVE_MINUTES);this.core.expirer.set(n,s),await this.pairings.update(n,{active:!0,expiry:s})}),qe(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=n;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=$o();this.events.once(rt("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),qe(this,"updateExpiry",async({topic:n,expiry:s})=>{this.isInitialized(),await this.pairings.update(n,{expiry:s})}),qe(this,"updateMetadata",async({topic:n,metadata:s})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:s})}),qe(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),qe(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:s}=n;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",ut("USER_DISCONNECTED")),await this.deletePairing(s))}),qe(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(s);return DE({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),qe(this,"sendRequest",async(n,s,i)=>{const o=vo(s,i),a=await this.core.crypto.encode(n,o),c=Ru[s].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),qe(this,"sendResult",async(n,s,i)=>{const o=og(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,l=Ru[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),qe(this,"sendError",async(n,s,i)=>{const o=ag(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,l=Ru[c]?Ru[c].res:Ru.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),qe(this,"deletePairing",async(n,s)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,ut("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),s?Promise.resolve():this.core.expirer.del(n)])}),qe(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(s=>Ji(s.expiry));await Promise.all(n.map(s=>this.deletePairing(s.topic)))}),qe(this,"onRelayEventRequest",async n=>{const{topic:s,payload:i}=n;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),qe(this,"onRelayEventResponse",async n=>{const{topic:s,payload:i}=n,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),qe(this,"onPairingPingRequest",async(n,s)=>{const{id:i}=s;try{this.isValidPing({topic:n}),await this.sendResult(i,n,!0),this.events.emit(zo.ping,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),qe(this,"onPairingPingResponse",(n,s)=>{const{id:i}=s;setTimeout(()=>{Ts(s)?this.events.emit(rt("pairing_ping",i),{}):jn(s)&&this.events.emit(rt("pairing_ping",i),{error:s.error})},500)}),qe(this,"onPairingDeleteRequest",async(n,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(zo.delete,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),qe(this,"onUnknownRpcMethodRequest",async(n,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=ut("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,n,a),this.logger.error(a)}catch(a){await this.sendError(i,n,a),this.logger.error(a)}}),qe(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(ut("WC_METHOD_UNSUPPORTED",n))}),qe(this,"isValidPair",(n,s)=>{var i;if(!Wr(n)){const{message:a}=re("MISSING_OR_INVALID",`pair() params: ${n}`);throw s.setError(ii.malformed_pairing_uri),new Error(a)}if(!sB(n.uri)){const{message:a}=re("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw s.setError(ii.malformed_pairing_uri),new Error(a)}const o=kE(n==null?void 0:n.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=re("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(ii.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=re("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(ii.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&te.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(ii.pairing_expired);const{message:a}=re("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),qe(this,"isValidPing",async n=>{if(!Wr(n)){const{message:i}=re("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),qe(this,"isValidDisconnect",async n=>{if(!Wr(n)){const{message:i}=re("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),qe(this,"isValidPairingTopic",async n=>{if(!jt(n,!1)){const{message:s}=re("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(s)}if(!this.pairings.keys.includes(n)){const{message:s}=re("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(s)}if(Ji(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:s}=re("EXPIRED",`pairing topic: ${n}`);throw new Error(s)}}),this.core=e,this.logger=Nr(t,this.name),this.pairings=new nc(this.core,this.logger,this.name,this.storagePrefix)}get context(){return rn(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Xt.message,async e=>{const{topic:t,message:n,transportType:s}=e;if(this.pairings.keys.includes(t)&&s!==Ct.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const i=await this.core.crypto.decode(t,n);Yw(i)?(this.core.history.set(t,i),await this.onRelayEventRequest({topic:t,payload:i})):cg(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:t,payload:i}),this.core.history.delete(t,i.id)),await this.core.relayer.messages.ack(t,n)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Dn.expired,async e=>{const{topic:t}=ZC(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(zo.expire,{topic:t}))})}}var d5=Object.defineProperty,f5=(r,e,t)=>e in r?d5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,or=(r,e,t)=>f5(r,typeof e!="symbol"?e+"":e,t);class p5 extends GP{constructor(e,t){super(e,t),this.core=e,this.logger=t,or(this,"records",new Map),or(this,"events",new ws.EventEmitter),or(this,"name",m8),or(this,"version",y8),or(this,"cached",[]),or(this,"initialized",!1),or(this,"storagePrefix",Gs),or(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),or(this,"set",(n,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:n,request:{method:s.method,params:s.params||null},chainId:i,expiry:zt(te.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Gn.created,o)}),or(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const s=await this.getRecord(n.id);typeof s.response>"u"&&(s.response=jn(n)?{error:n.error}:{result:n.result},this.records.set(s.id,s),this.persist(),this.events.emit(Gn.updated,s))}),or(this,"get",async(n,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:s}),await this.getRecord(s))),or(this,"delete",(n,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===n){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Gn.deleted,i)}}),this.persist()}),or(this,"exists",async(n,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===n:!1)),or(this,"on",(n,s)=>{this.events.on(n,s)}),or(this,"once",(n,s)=>{this.events.once(n,s)}),or(this,"off",(n,s)=>{this.events.off(n,s)}),or(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=Nr(t,this.name)}get context(){return rn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const n={topic:t.topic,request:vo(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:n}=re("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Gn.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=re("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Gn.created,e=>{const t=Gn.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Gn.updated,e=>{const t=Gn.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Gn.deleted,e=>{const t=Gn.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(hu.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{te.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(Gn.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}}var g5=Object.defineProperty,m5=(r,e,t)=>e in r?g5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,wr=(r,e,t)=>m5(r,typeof e!="symbol"?e+"":e,t);class y5 extends XP{constructor(e,t){super(e,t),this.core=e,this.logger=t,wr(this,"expirations",new Map),wr(this,"events",new ws.EventEmitter),wr(this,"name",w8),wr(this,"version",b8),wr(this,"cached",[]),wr(this,"initialized",!1),wr(this,"storagePrefix",Gs),wr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),wr(this,"has",n=>{try{const s=this.formatTarget(n);return typeof this.getExpiration(s)<"u"}catch{return!1}}),wr(this,"set",(n,s)=>{this.isInitialized();const i=this.formatTarget(n),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Dn.created,{target:i,expiration:o})}),wr(this,"get",n=>{this.isInitialized();const s=this.formatTarget(n);return this.getExpiration(s)}),wr(this,"del",n=>{if(this.isInitialized(),this.has(n)){const s=this.formatTarget(n),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Dn.deleted,{target:s,expiration:i})}}),wr(this,"on",(n,s)=>{this.events.on(n,s)}),wr(this,"once",(n,s)=>{this.events.once(n,s)}),wr(this,"off",(n,s)=>{this.events.off(n,s)}),wr(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=Nr(t,this.name)}get context(){return rn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return g3(e);if(typeof e=="number")return m3(e);const{message:t}=re("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Dn.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=re("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:n}=re("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return t}checkExpiry(e,t){const{expiry:n}=t;te.toMiliseconds(n)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Dn.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(hu.pulse,()=>this.checkExpirations()),this.events.on(Dn.created,e=>{const t=Dn.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Dn.expired,e=>{const t=Dn.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Dn.deleted,e=>{const t=Dn.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}}var w5=Object.defineProperty,b5=(r,e,t)=>e in r?w5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ft=(r,e,t)=>b5(r,typeof e!="symbol"?e+"":e,t);class E5 extends ex{constructor(e,t,n){super(e,t,n),this.core=e,this.logger=t,this.store=n,Ft(this,"name",E8),Ft(this,"abortController"),Ft(this,"isDevEnv"),Ft(this,"verifyUrlV3",A8),Ft(this,"storagePrefix",Gs),Ft(this,"version",F_),Ft(this,"publicKey"),Ft(this,"fetchPromise"),Ft(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&te.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Ft(this,"register",async s=>{if(!Dd()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=Ba.getDocument(),u=this.startAbortTimer(te.ONE_SECOND*5),h=await new Promise((d,f)=>{const p=()=>{window.removeEventListener("message",y),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const y=C=>{if(C.data&&typeof C.data=="string")try{const w=JSON.parse(C.data);if(w.type==="verify_attestation"){if(ly(w.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",y),d(w.attestation===null?"":w.attestation)}}catch(w){this.logger.warn(w)}};l.body.appendChild(g),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",h),h}catch(l){this.logger.warn(l)}return""}),Ft(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(ly(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),Ft(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(te.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Ft(this,"getVerifyUrl",s=>{let i=s||sh;return C8.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${sh}`),i=sh),i}),Ft(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(te.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Ft(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Ft(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Ft(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Ft(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Ft(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Ft(this,"validateAttestation",(s,i)=>{const o=zL(s,i.publicKey),a={hasExpired:te.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Nr(t,this.name),this.abortController=new AbortController,this.isDevEnv=jw(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return rn(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),te.toMiliseconds(e))}}var v5=Object.defineProperty,A5=(r,e,t)=>e in r?v5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,dv=(r,e,t)=>A5(r,typeof e!="symbol"?e+"":e,t);class C5 extends tx{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,dv(this,"context",_8),dv(this,"registerDeviceToken",async n=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=n,c=`${I8}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Nr(t,this.context)}}var _5=Object.defineProperty,fv=Object.getOwnPropertySymbols,I5=Object.prototype.hasOwnProperty,N5=Object.prototype.propertyIsEnumerable,Dy=(r,e,t)=>e in r?_5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Uu=(r,e)=>{for(var t in e||(e={}))I5.call(e,t)&&Dy(r,t,e[t]);if(fv)for(var t of fv(e))N5.call(e,t)&&Dy(r,t,e[t]);return r},Gt=(r,e,t)=>Dy(r,typeof e!="symbol"?e+"":e,t);class S5 extends rx{constructor(e,t,n=!0){super(e,t,n),this.core=e,this.logger=t,Gt(this,"context",S8),Gt(this,"storagePrefix",Gs),Gt(this,"storageVersion",N8),Gt(this,"events",new Map),Gt(this,"shouldPersist",!1),Gt(this,"init",async()=>{if(!jw())try{const s={eventId:nE(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:QC(this.core.relayer.protocol,this.core.relayer.version,Ny)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Gt(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=nE(),u=this.core.projectId||"",h=Date.now(),d=Uu({eventId:l,timestamp:h,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,d),this.shouldPersist=!0),d}),Gt(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Uu(Uu({},a),this.setMethods(a.eventId))}),Gt(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Gt(this,"setEventListeners",()=>{this.core.heartbeat.on(hu.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{te.fromMiliseconds(Date.now())-te.fromMiliseconds(s.timestamp)>T8&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Gt(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Gt(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Gt(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Gt(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Gt(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Uu(Uu({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Gt(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Gt(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${O8}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Ny}${i}`,{method:"POST",body:JSON.stringify(s)})}),Gt(this,"getAppDomain",()=>JC().url),this.logger=Nr(t,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var T5=Object.defineProperty,pv=Object.getOwnPropertySymbols,O5=Object.prototype.hasOwnProperty,P5=Object.prototype.propertyIsEnumerable,Uy=(r,e,t)=>e in r?T5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,gv=(r,e)=>{for(var t in e||(e={}))O5.call(e,t)&&Uy(r,t,e[t]);if(pv)for(var t of pv(e))P5.call(e,t)&&Uy(r,t,e[t]);return r},bt=(r,e,t)=>Uy(r,typeof e!="symbol"?e+"":e,t);let x5=class eI extends VP{constructor(e){var t;super(e),bt(this,"protocol",$_),bt(this,"version",F_),bt(this,"name",Iy),bt(this,"relayUrl"),bt(this,"projectId"),bt(this,"customStoragePrefix"),bt(this,"events",new ws.EventEmitter),bt(this,"logger"),bt(this,"heartbeat"),bt(this,"relayer"),bt(this,"crypto"),bt(this,"storage"),bt(this,"history"),bt(this,"expirer"),bt(this,"pairing"),bt(this,"verify"),bt(this,"echoClient"),bt(this,"linkModeSupportedApps"),bt(this,"eventClient"),bt(this,"initialized",!1),bt(this,"logChunkController"),bt(this,"on",(a,c)=>this.events.on(a,c)),bt(this,"once",(a,c)=>this.events.once(a,c)),bt(this,"off",(a,c)=>this.events.off(a,c)),bt(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),bt(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Ct.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const n=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(n)try{return this.customStoragePrefix=n.customStoragePrefix,this.logger=n.logger,this.heartbeat=n.heartbeat,this.crypto=n.crypto,this.history=n.history,this.expirer=n.expirer,this.storage=n.storage,this.relayer=n.relayer,this.pairing=n.pairing,this.verify=n.verify,this.echoClient=n.echoClient,this.linkModeSupportedApps=n.linkModeSupportedApps,this.eventClient=n.eventClient,this.initialized=n.initialized,this.logChunkController=n.logChunkController,n}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||H_,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=du({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:YB.logger,name:Iy}),{logger:i,chunkLoggerController:o}=Rw({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Nr(i,this.name),this.heartbeat=new qO,this.crypto=new s$(this,this.logger,e==null?void 0:e.keychain),this.history=new p5(this,this.logger),this.expirer=new y5(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new NP(gv(gv({},ZB),e==null?void 0:e.storageOptions)),this.relayer=new x$({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new h5(this,this.logger),this.verify=new E5(this,this.logger,this.storage),this.echoClient=new C5(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new S5(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const t=new eI(e);await t.initialize();const n=await t.crypto.getClientId();return await t.storage.setItem(h8,n),t}get context(){return rn(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(KE,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(KE)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const t=`_walletConnectCore_${e}`,n=`${t}_count`;return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[n]} times.`),globalThis[t]}catch(t){console.warn("Failed to get global WalletConnect core",t);return}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${((t=e.opts)==null?void 0:t.customStoragePrefix)||""}`;globalThis[n]=e}catch(n){console.warn("Failed to set global WalletConnect core",n)}}isGlobalCoreDisabled(){try{return typeof Zr<"u"&&QB.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const R5=x5,tI="wc",rI=2,nI="client",Zw=`${tI}@${rI}:${nI}:`,pm={name:nI,logger:"error"},mv="WALLETCONNECT_DEEPLINK_CHOICE",k5="proposal",yv="Proposal expired",D5="session",hc=te.SEVEN_DAYS,U5="engine",Kt={wc_sessionPropose:{req:{ttl:te.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:te.ONE_DAY,prompt:!1,tag:1104},res:{ttl:te.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:te.ONE_DAY,prompt:!1,tag:1106},res:{ttl:te.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:te.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:te.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:te.ONE_DAY,prompt:!1,tag:1112},res:{ttl:te.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:te.ONE_DAY,prompt:!1,tag:1114},res:{ttl:te.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:te.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:te.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1119}}},gm={min:te.FIVE_MINUTES,max:te.SEVEN_DAYS},_s={idle:"IDLE",active:"ACTIVE"},wv={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},L5="request",B5=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],M5="wc",$5="auth",F5="authKeys",j5="pairingTopics",H5="requests",ug=`${M5}@${1.5}:${$5}:`,Ff=`${ug}:PUB_KEY`;var V5=Object.defineProperty,q5=Object.defineProperties,z5=Object.getOwnPropertyDescriptors,bv=Object.getOwnPropertySymbols,W5=Object.prototype.hasOwnProperty,G5=Object.prototype.propertyIsEnumerable,Ly=(r,e,t)=>e in r?V5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,pt=(r,e)=>{for(var t in e||(e={}))W5.call(e,t)&&Ly(r,t,e[t]);if(bv)for(var t of bv(e))G5.call(e,t)&&Ly(r,t,e[t]);return r},Sr=(r,e)=>q5(r,z5(e)),K=(r,e,t)=>Ly(r,typeof e!="symbol"?e+"":e,t);class K5 extends ox{constructor(e){super(e),K(this,"name",U5),K(this,"events",new Pw),K(this,"initialized",!1),K(this,"requestQueue",{state:_s.idle,queue:[]}),K(this,"sessionRequestQueue",{state:_s.idle,queue:[]}),K(this,"requestQueueDelay",te.ONE_SECOND),K(this,"expectedPairingMethodMap",new Map),K(this,"recentlyDeletedMap",new Map),K(this,"recentlyDeletedLimit",200),K(this,"relayMessageCache",[]),K(this,"pendingSessions",new Map),K(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Kt)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},te.toMiliseconds(this.requestQueueDelay)))}),K(this,"connect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=Sr(pt({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=n;let u=s,h,d=!1;try{if(u){const B=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),d=B.active}}catch(B){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),B}if(!u||!d){const{topic:B,uri:L}=await this.client.core.pairing.create();u=B,h=L}if(!u){const{message:B}=re("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(B)}const f=await this.client.core.crypto.generateKeyPair(),p=Kt.wc_sessionPropose.req.ttl||te.FIVE_MINUTES,g=zt(p),y=Sr(pt(pt({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:j_}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Ss()}),C=rt("session_connect",y.id),{reject:w,resolve:I,done:U}=$o(p,yv),M=({id:B})=>{B===y.id&&(this.client.events.off("proposal_expire",M),this.pendingSessions.delete(y.id),this.events.emit(C,{error:{message:yv,code:0}}))};return this.client.events.on("proposal_expire",M),this.events.once(C,({error:B,session:L})=>{this.client.events.off("proposal_expire",M),B?w(B):L&&I(L)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:y,throwOnFailedPublish:!0,clientRpcId:y.id}),await this.setProposal(y.id,y),{uri:h,approval:U}}),K(this,"pair",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(t)}catch(n){throw this.client.logger.error("pair() failed"),n}}),K(this,"approve",async t=>{var n,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=t==null?void 0:t.id)==null?void 0:n.toString(),trace:[Kn.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(b){throw o.setError(Uo.no_internet_connection),b}try{await this.isValidProposalId(t==null?void 0:t.id)}catch(b){throw this.client.logger.error(`approve() -> proposal.get(${t==null?void 0:t.id}) failed`),o.setError(Uo.proposal_not_found),b}try{await this.isValidApprove(t)}catch(b){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Uo.session_approve_namespace_validation_failure),b}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:h,sessionConfig:d}=t,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:y,optionalNamespaces:C}=f;let w=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});w||(w=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Kn.session_approve_started,properties:{topic:p,trace:[Kn.session_approve_started,Kn.session_namespaces_validation_success]}}));const I=await this.client.core.crypto.generateKeyPair(),U=g.publicKey,M=await this.client.core.crypto.generateSharedKey(I,U),B=pt(pt(pt({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:I,metadata:this.client.metadata},expiry:zt(hc)},u&&{sessionProperties:u}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),L=Ct.relay;w.addTrace(Kn.subscribing_session_topic);try{await this.client.core.relayer.subscribe(M,{transportType:L})}catch(b){throw w.setError(Uo.subscribe_session_topic_failure),b}w.addTrace(Kn.subscribe_session_topic_success);const m=Sr(pt({},B),{topic:M,requiredNamespaces:y,optionalNamespaces:C,pairingTopic:p,acknowledged:!1,self:B.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:I,transportType:Ct.relay});await this.client.session.set(M,m),w.addTrace(Kn.store_session);try{w.addTrace(Kn.publishing_session_settle),await this.sendRequest({topic:M,method:"wc_sessionSettle",params:B,throwOnFailedPublish:!0}).catch(b=>{throw w==null||w.setError(Uo.session_settle_publish_failure),b}),w.addTrace(Kn.session_settle_publish_success),w.addTrace(Kn.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:I},throwOnFailedPublish:!0}).catch(b=>{throw w==null||w.setError(Uo.session_approve_publish_failure),b}),w.addTrace(Kn.session_approve_publish_success)}catch(b){throw this.client.logger.error(b),this.client.session.delete(M,ut("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(M),b}return this.client.core.eventClient.deleteEvent({eventId:w.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,ut("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(M,zt(hc)),{topic:M,acknowledged:()=>Promise.resolve(this.client.session.get(M))}}),K(this,"reject",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(t)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:s}=t;let i;try{i=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}i&&(await this.sendError({id:n,topic:i,error:s,rpcOpts:Kt.wc_sessionPropose.reject}),await this.client.proposal.delete(n,ut("USER_DISCONNECTED")))}),K(this,"update",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(t)}catch(h){throw this.client.logger.error("update() -> isValidUpdate() failed"),h}const{topic:n,namespaces:s}=t,{done:i,resolve:o,reject:a}=$o(),c=Ss(),l=Zo().toString(),u=this.client.session.get(n).namespaces;return this.events.once(rt("session_update",c),({error:h})=>{h?a(h):o()}),await this.client.session.update(n,{namespaces:s}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(h=>{this.client.logger.error(h),this.client.session.update(n,{namespaces:u}),a(h)}),{acknowledged:i}}),K(this,"extend",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(t)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=t,s=Ss(),{done:i,resolve:o,reject:a}=$o();return this.events.once(rt("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,zt(hc)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),K(this,"request",async t=>{this.isInitialized();try{await this.isValidRequest(t)}catch(C){throw this.client.logger.error("request() -> isValidRequest() failed"),C}const{chainId:n,request:s,topic:i,expiry:o=Kt.wc_sessionRequest.req.ttl}=t,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Ct.relay&&await this.confirmOnlineStateOrThrow();const c=Ss(),l=Zo().toString(),{done:u,resolve:h,reject:d}=$o(o,"Request expired. Please try again.");this.events.once(rt("session_request",c),({error:C,result:w})=>{C?d(C):h(w)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:Sr(pt({},s),{expiryTimestamp:zt(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(C=>d(C)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),await u();const g={request:Sr(pt({},s),{expiryTimestamp:zt(o)}),chainId:n},y=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async C=>{await this.sendRequest(pt({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},y&&{tvf:this.getTVFParams(c,g)})).catch(w=>d(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),C()}),new Promise(async C=>{var w;if(!((w=a.sessionConfig)!=null&&w.disableDeepLink)){const I=await E3(this.client.core.storage,mv);await y3({id:c,topic:i,wcDeepLink:I})}C()}),u()]).then(C=>C[2])}),K(this,"respond",async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:n,response:s}=t,{id:i}=s,o=this.client.session.get(n);o.transportType===Ct.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Ts(s)?await this.sendResult({id:i,topic:n,result:s.result,throwOnFailedPublish:!0,appLink:a}):jn(s)&&await this.sendError({id:i,topic:n,error:s.error,appLink:a}),this.cleanupAfterResponse(t)}),K(this,"ping",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(t)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:n}=t;if(this.client.session.keys.includes(n)){const s=Ss(),i=Zo().toString(),{done:o,resolve:a,reject:c}=$o();this.events.once(rt("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),K(this,"emit",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(t);const{topic:n,event:s,chainId:i}=t,o=Zo().toString(),a=Ss();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),K(this,"disconnect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(t);const{topic:n}=t;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:ut("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:s}=re("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(s)}}),K(this,"find",t=>(this.isInitialized(),this.client.session.getAll().filter(n=>rB(n,t)))),K(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),K(this,"authenticate",async(t,n)=>{var s;this.isInitialized(),this.isValidAuthenticate(t);const i=n&&this.client.core.linkModeSupportedApps.includes(n)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Ct.link_mode:Ct.relay;o===Ct.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:h,type:d,exp:f,nbf:p,methods:g=[],expiry:y}=t,C=[...t.resources||[]],{topic:w,uri:I}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:w,uri:I}});const U=await this.client.core.crypto.generateKeyPair(),M=Mf(U);if(await Promise.all([this.client.auth.authKeys.set(Ff,{responseTopic:M,publicKey:U}),this.client.auth.pairingTopics.set(M,{topic:M,pairingTopic:w})]),await this.client.core.relayer.subscribe(M,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${w}`),g.length>0){const{namespace:R}=Gc(a[0]);let j=dU(R,"request",g);Bf(C)&&(j=pU(j,C.pop())),C.push(j)}const B=y&&y>Kt.wc_sessionAuthenticate.req.ttl?y:Kt.wc_sessionAuthenticate.req.ttl,L={authPayload:{type:d??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:h,iat:new Date().toISOString(),exp:f,nbf:p,resources:C},requester:{publicKey:U,metadata:this.client.metadata},expiryTimestamp:zt(B)},m={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},b={requiredNamespaces:{},optionalNamespaces:m,relays:[{protocol:"irn"}],pairingTopic:w,proposer:{publicKey:U,metadata:this.client.metadata},expiryTimestamp:zt(Kt.wc_sessionPropose.req.ttl),id:Ss()},{done:N,resolve:_,reject:S}=$o(B,"Request expired"),k=Ss(),P=rt("session_connect",b.id),v=rt("session_request",k),A=async({error:R,session:j})=>{this.events.off(v,T),R?S(R):j&&_({session:j})},T=async R=>{var j,q,z;if(await this.deletePendingAuthRequest(k,{message:"fulfilled",code:0}),R.error){const be=ut("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return R.error.code===be.code?void 0:(this.events.off(P,A),S(R.error.message))}await this.deleteProposal(b.id),this.events.off(P,A);const{cacaos:G,responder:Q}=R.result,Y=[],ne=[];for(const be of G){await hE({cacao:be,projectId:this.client.core.projectId})||(this.client.logger.error(be,"Signature verification failed"),S(ut("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Ve}=be,Le=Bf(Ve.resources),je=[gy(Ve.iss)],ye=ip(Ve.iss);if(Le){const pe=dE(Le),Ne=fE(Le);Y.push(...pe),je.push(...Ne)}for(const pe of je)ne.push(`${pe}:${ye}`)}const ie=await this.client.core.crypto.generateSharedKey(U,Q.publicKey);let we;Y.length>0&&(we={topic:ie,acknowledged:!0,self:{publicKey:U,metadata:this.client.metadata},peer:Q,controller:Q.publicKey,expiry:zt(hc),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:w,namespaces:UE([...new Set(Y)],[...new Set(ne)]),transportType:o},await this.client.core.relayer.subscribe(ie,{transportType:o}),await this.client.session.set(ie,we),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:Q.metadata}),we=this.client.session.get(ie)),(j=this.client.metadata.redirect)!=null&&j.linkMode&&(q=Q.metadata.redirect)!=null&&q.linkMode&&(z=Q.metadata.redirect)!=null&&z.universal&&n&&(this.client.core.addLinkModeSupportedApp(Q.metadata.redirect.universal),this.client.session.update(ie,{transportType:Ct.link_mode})),_({auths:G,session:we})};this.events.once(P,A),this.events.once(v,T);let x;try{if(i){const R=vo("wc_sessionAuthenticate",L,k);this.client.core.history.set(w,R);const j=await this.client.core.crypto.encode("",R,{type:Fd,encoding:Yi});x=cf(n,w,j)}else await Promise.all([this.sendRequest({topic:w,method:"wc_sessionAuthenticate",params:L,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:k}),this.sendRequest({topic:w,method:"wc_sessionPropose",params:b,expiry:Kt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:b.id})])}catch(R){throw this.events.off(P,A),this.events.off(v,T),R}return await this.setProposal(b.id,b),await this.setAuthRequest(k,{request:Sr(pt({},L),{verifyContext:{}}),pairingTopic:w,transportType:o}),{uri:x??I,response:N}}),K(this,"approveSessionAuthenticate",async t=>{const{id:n,auths:s}=t,i=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[Lo.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(ku.no_internet_connection),y}const o=this.getPendingAuthRequest(n);if(!o)throw i.setError(ku.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||Ct.relay;a===Ct.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=Mf(c),h={type:Ti,receiverPublicKey:c,senderPublicKey:l},d=[],f=[];for(const y of s){if(!await hE({cacao:y,projectId:this.client.core.projectId})){i.setError(ku.invalid_cacao);const M=ut("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:u,error:M,encodeOpts:h}),new Error(M.message)}i.addTrace(Lo.cacaos_verified);const{p:C}=y,w=Bf(C.resources),I=[gy(C.iss)],U=ip(C.iss);if(w){const M=dE(w),B=fE(w);d.push(...M),I.push(...B)}for(const M of I)f.push(`${M}:${U}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Lo.create_authenticated_session_topic);let g;if((d==null?void 0:d.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:zt(hc),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:UE([...new Set(d)],[...new Set(f)]),transportType:a},i.addTrace(Lo.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(y){throw i.setError(ku.subscribe_authenticated_session_topic_failure),y}i.addTrace(Lo.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Lo.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Lo.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:n,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(ku.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),K(this,"rejectSessionAuthenticate",async t=>{this.isInitialized();const{id:n,reason:s}=t,i=this.getPendingAuthRequest(n);if(!i)throw new Error(`Could not find pending auth request with id ${n}`);i.transportType===Ct.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Mf(o),l={type:Ti,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:s,encodeOpts:l,rpcOpts:Kt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,ut("USER_DISCONNECTED"))}),K(this,"formatAuthMessage",t=>{this.isInitialized();const{request:n,iss:s}=t;return a_(n,s)}),K(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const t=this.relayMessageCache.shift();t&&await this.onRelayMessage(t)}catch(t){this.client.logger.error(t)}},50)}),K(this,"cleanupDuplicatePairings",async t=>{if(t.pairingTopic)try{const n=this.client.core.pairing.pairings.get(t.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===t.peer.metadata.url&&i.topic&&i.topic!==n.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),K(this,"deleteSession",async t=>{var n;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=t,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,ut("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(mv).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,ut("USER_DISCONNECTED"))}),s===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=_s.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),K(this,"deleteProposal",async(t,n)=>{if(n)try{const s=this.client.proposal.get(t),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Uo.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(t,ut("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")}),K(this,"deletePendingSessionRequest",async(t,n,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,n),s?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==t),s&&(this.sessionRequestQueue.state=_s.idle,this.client.events.emit("session_request_expire",{id:t}))}),K(this,"deletePendingAuthRequest",async(t,n,s=!1)=>{await Promise.all([this.client.auth.requests.delete(t,n),s?Promise.resolve():this.client.core.expirer.del(t)])}),K(this,"setExpiry",async(t,n)=>{this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,n),await this.client.session.update(t,{expiry:n}))}),K(this,"setProposal",async(t,n)=>{this.client.core.expirer.set(t,zt(Kt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(t,n)}),K(this,"setAuthRequest",async(t,n)=>{const{request:s,pairingTopic:i,transportType:o=Ct.relay}=n;this.client.core.expirer.set(t,s.expiryTimestamp),await this.client.auth.requests.set(t,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:t,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),K(this,"setPendingSessionRequest",async t=>{const{id:n,topic:s,params:i,verifyContext:o}=t,a=i.request.expiryTimestamp||zt(Kt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:s,params:i,verifyContext:o})}),K(this,"sendRequest",async t=>{const{topic:n,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:h}=t,d=vo(s,i,c);let f;const p=!!u;try{const C=p?Yi:us;f=await this.client.core.crypto.encode(n,d,{encoding:C})}catch(C){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),C}let g;if(B5.includes(s)){const C=Ms(JSON.stringify(d)),w=Ms(f);g=await this.client.core.verify.register({id:w,decryptedId:C})}const y=Kt[s].req;if(y.attestation=g,o&&(y.ttl=o),a&&(y.id=a),this.client.core.history.set(n,d),p){const C=cf(u,n,f);await Ee.Linking.openURL(C,this.client.name)}else{const C=Kt[s].req;o&&(C.ttl=o),a&&(C.id=a),C.tvf=Sr(pt({},h),{correlationId:d.id}),l?(C.internal=Sr(pt({},C.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,f,C)):this.client.core.relayer.publish(n,f,C).catch(w=>this.client.logger.error(w))}return d.id}),K(this,"sendResult",async t=>{const{id:n,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=t,l=og(n,i);let u;const h=c&&typeof(Ee==null?void 0:Ee.Linking)<"u";try{const p=h?Yi:us;u=await this.client.core.crypto.encode(s,l,Sr(pt({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let d,f;try{d=await this.client.core.history.get(s,n);const p=d.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(n,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${n}) failed`),p}if(h){const p=cf(c,s,u);await Ee.Linking.openURL(p,this.client.name)}else{const p=d.request.method,g=Kt[p].res;g.tvf=Sr(pt({},f),{correlationId:n}),o?(g.internal=Sr(pt({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(l)}),K(this,"sendError",async t=>{const{id:n,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=t,l=ag(n,i);let u;const h=c&&typeof(Ee==null?void 0:Ee.Linking)<"u";try{const f=h?Yi:us;u=await this.client.core.crypto.encode(s,l,Sr(pt({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let d;try{d=await this.client.core.history.get(s,n)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${n}) failed`),f}if(h){const f=cf(c,s,u);await Ee.Linking.openURL(f,this.client.name)}else{const f=d.request.method,p=a||Kt[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),K(this,"cleanup",async()=>{const t=[],n=[];this.client.session.getAll().forEach(s=>{let i=!1;Ji(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&t.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Ji(s.expiryTimestamp)&&n.push(s.id)}),await Promise.all([...t.map(s=>this.deleteSession({topic:s})),...n.map(s=>this.deleteProposal(s))])}),K(this,"onProviderMessageEvent",async t=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(t):await this.onRelayMessage(t)}),K(this,"onRelayEventRequest",async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()}),K(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===_s.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=_s.active;const t=this.requestQueue.queue.shift();if(t)try{await this.processRequest(t)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=_s.idle}),K(this,"processRequest",async t=>{const{topic:n,payload:s,attestation:i,transportType:o,encryptedId:a}=t,c=s.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,s);case"wc_sessionPing":return await this.onSessionPingRequest(n,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),K(this,"onRelayEventResponse",async t=>{const{topic:n,payload:s,transportType:i}=t,o=(await this.client.core.history.get(n,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,s);case"wc_sessionExtend":return this.onSessionExtendResponse(n,s);case"wc_sessionPing":return this.onSessionPingResponse(n,s);case"wc_sessionRequest":return this.onSessionRequestResponse(n,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),K(this,"onRelayEventUnknownPayload",t=>{const{topic:n}=t,{message:s}=re("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),K(this,"shouldIgnorePairingRequest",t=>{const{topic:n,requestMethod:s}=t,i=this.expectedPairingMethodMap.get(n);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),K(this,"onSessionProposeRequest",async t=>{const{topic:n,payload:s,attestation:i,encryptedId:o}=t,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(ii.proposal_listener_not_found)),this.isValidConnect(pt({},s.params));const u=a.expiryTimestamp||zt(Kt.wc_sessionPropose.req.ttl),h=pt({id:c,pairingTopic:n,expiryTimestamp:u},a);await this.setProposal(c,h);const d=await this.getVerifyContext({attestationId:i,hash:Ms(JSON.stringify(s)),encryptedId:o,metadata:h.proposer.metadata});l==null||l.addTrace(Ns.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:h,verifyContext:d})}catch(l){await this.sendError({id:c,topic:n,error:l,rpcOpts:Kt.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),K(this,"onSessionProposeResponse",async(t,n,s)=>{const{id:i}=n;if(Ts(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:t,proposalId:i,publicKey:c});const h=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:t})}else if(jn(n)){await this.client.proposal.delete(i,ut("USER_DISCONNECTED"));const o=rt("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),K(this,"onSessionSettleRequest",async(t,n)=>{const{id:s,params:i}=n;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:h,sessionConfig:d}=n.params,f=[...this.pendingSessions.values()].find(y=>y.sessionTopic===t);if(!f)return this.client.logger.error(`Pending session not found for topic ${t}`);const p=this.client.proposal.get(f.proposalId),g=Sr(pt(pt(pt({topic:t,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),{transportType:Ct.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(rt("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:n.id,topic:t,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:t,error:o}),this.client.logger.error(o)}}),K(this,"onSessionSettleResponse",async(t,n)=>{const{id:s}=n;Ts(n)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(rt("session_approve",s),{})):jn(n)&&(await this.client.session.delete(t,ut("USER_DISCONNECTED")),this.events.emit(rt("session_approve",s),{error:n.error}))}),K(this,"onSessionUpdateRequest",async(t,n)=>{const{params:s,id:i}=n;try{const o=`${t}_session_update`,a=xu.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:t,error:ut("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(pt({topic:t},s));try{xu.set(o,i),await this.client.session.update(t,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:t,result:!0,throwOnFailedPublish:!0})}catch(c){throw xu.delete(o),c}this.client.events.emit("session_update",{id:i,topic:t,params:s})}catch(o){await this.sendError({id:i,topic:t,error:o}),this.client.logger.error(o)}}),K(this,"isRequestOutOfSync",(t,n)=>n.toString().slice(0,-3)<t.toString().slice(0,-3)),K(this,"onSessionUpdateResponse",(t,n)=>{const{id:s}=n,i=rt("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ts(n)?this.events.emit(rt("session_update",s),{}):jn(n)&&this.events.emit(rt("session_update",s),{error:n.error})}),K(this,"onSessionExtendRequest",async(t,n)=>{const{id:s}=n;try{this.isValidExtend({topic:t}),await this.setExpiry(t,zt(hc)),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:t})}catch(i){await this.sendError({id:s,topic:t,error:i}),this.client.logger.error(i)}}),K(this,"onSessionExtendResponse",(t,n)=>{const{id:s}=n,i=rt("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ts(n)?this.events.emit(rt("session_extend",s),{}):jn(n)&&this.events.emit(rt("session_extend",s),{error:n.error})}),K(this,"onSessionPingRequest",async(t,n)=>{const{id:s}=n;try{this.isValidPing({topic:t}),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:t})}catch(i){await this.sendError({id:s,topic:t,error:i}),this.client.logger.error(i)}}),K(this,"onSessionPingResponse",(t,n)=>{const{id:s}=n,i=rt("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Ts(n)?this.events.emit(rt("session_ping",s),{}):jn(n)&&this.events.emit(rt("session_ping",s),{error:n.error})},500)}),K(this,"onSessionDeleteRequest",async(t,n)=>{const{id:s}=n;try{this.isValidDisconnect({topic:t,reason:n.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(Xt.publish,async()=>{i(await this.deleteSession({topic:t,id:s}))})}),this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:ut("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),K(this,"onSessionRequest",async t=>{var n,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=t,{id:h,params:d}=a;try{await this.isValidRequest(pt({topic:o},d));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Ms(JSON.stringify(vo("wc_sessionRequest",d,h))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:h,topic:o,params:d,verifyContext:p};await this.setPendingSessionRequest(g),u===Ct.link_mode&&(n=f.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:h,topic:o,error:f}),this.client.logger.error(f)}}),K(this,"onSessionRequestResponse",(t,n)=>{const{id:s}=n,i=rt("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ts(n)?this.events.emit(rt("session_request",s),{result:n.result}):jn(n)&&this.events.emit(rt("session_request",s),{error:n.error})}),K(this,"onSessionEventRequest",async(t,n)=>{const{id:s,params:i}=n;try{const o=`${t}_session_event_${i.event.name}`,a=xu.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(pt({topic:t},i)),this.client.events.emit("session_event",{id:s,topic:t,params:i}),xu.set(o,s)}catch(o){await this.sendError({id:s,topic:t,error:o}),this.client.logger.error(o)}}),K(this,"onSessionAuthenticateResponse",(t,n)=>{const{id:s}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:n}),Ts(n)?this.events.emit(rt("session_request",s),{result:n.result}):jn(n)&&this.events.emit(rt("session_request",s),{error:n.error})}),K(this,"onSessionAuthenticateRequest",async t=>{var n;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=t;try{const{requester:l,authPayload:u,expiryTimestamp:h}=i.params,d=await this.getVerifyContext({attestationId:o,hash:Ms(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:d,expiryTimestamp:h};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Ct.link_mode&&(n=l.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:d})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),d=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Ti,receiverPublicKey:u,senderPublicKey:h};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:Kt.wc_sessionAuthenticate.autoReject,appLink:d})}}),K(this,"addSessionRequestToSessionRequestQueue",t=>{this.sessionRequestQueue.queue.push(t)}),K(this,"cleanupAfterResponse",t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=_s.idle,this.processSessionRequestQueue()},te.toMiliseconds(this.requestQueueDelay))}),K(this,"cleanupPendingSentRequestsForTopic",({topic:t,error:n})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===t&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=rt("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(rt("session_request",i.request.id),{error:n})})}),K(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===_s.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=_s.active,this.emitSessionRequest(t)}catch(n){this.client.logger.error(n)}}),K(this,"emitSessionRequest",t=>{this.client.events.emit("session_request",t)}),K(this,"onPairingCreated",t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;const n=this.client.proposal.getAll().find(s=>s.pairingTopic===t.topic);n&&this.onSessionProposeRequest({topic:t.topic,payload:vo("wc_sessionPropose",Sr(pt({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id)})}),K(this,"isValidConnect",async t=>{if(!Wr(t)){const{message:l}=re("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(l)}const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=t;if(lr(n)||await this.isValidPairingTopic(n),!pB(c)){const{message:l}=re("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!lr(s)&&Ah(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!lr(i)&&Ah(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),lr(o)||this.validateSessionProps(o,"sessionProperties"),!lr(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),K(this,"validateNamespaces",(t,n)=>{const s=fB(t,"connect()",n);if(s)throw new Error(s.message)}),K(this,"isValidApprove",async t=>{if(!Wr(t))throw new Error(re("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:n,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=t;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const c=this.client.proposal.get(n),l=cm(s,"approve()");if(l)throw new Error(l.message);const u=ME(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!jt(i,!0)){const{message:h}=re("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(h)}if(lr(o)||this.validateSessionProps(o,"sessionProperties"),!lr(a)){this.validateSessionProps(a,"scopedProperties");const h=new Set(Object.keys(s));if(!Object.keys(a).every(d=>h.has(d)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(h).join(", ")}`)}}),K(this,"isValidReject",async t=>{if(!Wr(t)){const{message:i}=re("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(i)}const{id:n,reason:s}=t;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!mB(s)){const{message:i}=re("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),K(this,"isValidSessionSettleRequest",t=>{if(!Wr(t)){const{message:l}=re("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(l)}const{relay:n,controller:s,namespaces:i,expiry:o}=t;if(!k_(n)){const{message:l}=re("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=aB(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=cm(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Ji(o)){const{message:l}=re("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),K(this,"isValidUpdate",async t=>{if(!Wr(t)){const{message:c}=re("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(c)}const{topic:n,namespaces:s}=t;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const i=this.client.session.get(n),o=cm(s,"update()");if(o)throw new Error(o.message);const a=ME(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),K(this,"isValidExtend",async t=>{if(!Wr(t)){const{message:s}=re("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(s)}const{topic:n}=t;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),K(this,"isValidRequest",async t=>{if(!Wr(t)){const{message:c}=re("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(c)}const{topic:n,request:s,chainId:i,expiry:o}=t;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!BE(a,i)){const{message:c}=re("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!yB(s)){const{message:c}=re("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!EB(a,i,s.method)){const{message:c}=re("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!_B(o,gm)){const{message:c}=re("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${gm.min} and ${gm.max}`);throw new Error(c)}}),K(this,"isValidRespond",async t=>{var n;if(!Wr(t)){const{message:o}=re("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(o)}const{topic:s,response:i}=t;try{await this.isValidSessionTopic(s)}catch(o){throw(n=t==null?void 0:t.response)!=null&&n.id&&this.cleanupAfterResponse(t),o}if(!wB(i)){const{message:o}=re("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),K(this,"isValidPing",async t=>{if(!Wr(t)){const{message:s}=re("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(s)}const{topic:n}=t;await this.isValidSessionOrPairingTopic(n)}),K(this,"isValidEmit",async t=>{if(!Wr(t)){const{message:a}=re("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(a)}const{topic:n,event:s,chainId:i}=t;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!BE(o,i)){const{message:a}=re("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!bB(s)){const{message:a}=re("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!vB(o,i,s.name)){const{message:a}=re("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),K(this,"isValidDisconnect",async t=>{if(!Wr(t)){const{message:s}=re("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(s)}const{topic:n}=t;await this.isValidSessionOrPairingTopic(n)}),K(this,"isValidAuthenticate",t=>{const{chains:n,uri:s,domain:i,nonce:o}=t;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!jt(s,!1))throw new Error("uri is required parameter");if(!jt(i,!1))throw new Error("domain is required parameter");if(!jt(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>Gc(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Gc(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),K(this,"getVerifyContext",async t=>{const{attestationId:n,hash:s,encryptedId:i,metadata:o,transportType:a}=t,c={verified:{verifyUrl:o.verifyUrl||sh,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Ct.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:n,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),K(this,"validateSessionProps",(t,n)=>{Object.values(t).forEach((s,i)=>{if(s==null){const{message:o}=re("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${s} for key ${Object.keys(t)[i]}`);throw new Error(o)}})}),K(this,"getPendingAuthRequest",t=>{const n=this.client.auth.requests.get(t);return typeof n=="object"?n:void 0}),K(this,"addToRecentlyDeleted",(t,n)=>{if(this.recentlyDeletedMap.set(t,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),K(this,"checkRecentlyDeleted",t=>{const n=this.recentlyDeletedMap.get(t);if(n){const{message:s}=re("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${t}`);throw new Error(s)}}),K(this,"isLinkModeEnabled",(t,n)=>{var s,i,o,a,c,l,u,h,d;return!t||n!==Ct.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=t==null?void 0:t.redirect)==null?void 0:u.universal)!==void 0&&((h=t==null?void 0:t.redirect)==null?void 0:h.universal)!==""&&((d=t==null?void 0:t.redirect)==null?void 0:d.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(t.redirect.universal)&&typeof(Ee==null?void 0:Ee.Linking)<"u"}),K(this,"getAppLinkIfEnabled",(t,n)=>{var s;return this.isLinkModeEnabled(t,n)?(s=t==null?void 0:t.redirect)==null?void 0:s.universal:void 0}),K(this,"handleLinkModeMessage",({url:t})=>{if(!t||!t.includes("wc_ev")||!t.includes("topic"))return;const n=rE(t,"topic")||"",s=decodeURIComponent(rE(t,"wc_ev")||""),i=this.client.session.keys.includes(n);i&&this.client.session.update(n,{transportType:Ct.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:s,sessionExists:i})}),K(this,"registerLinkModeListeners",async()=>{var t;if(jw()||xo()&&(t=this.client.metadata.redirect)!=null&&t.linkMode){const n=Ee==null?void 0:Ee.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await n.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),K(this,"shouldSetTVF",(t,n)=>{if(!n||t!=="wc_sessionRequest")return!1;const{request:s}=n;return Object.keys(wv).includes(s.method)}),K(this,"getTVFParams",(t,n,s)=>{var i,o;try{const a=n.request.method,c=this.extractTxHashesFromResult(a,s);return Sr(pt({correlationId:t,rpcMethods:[a],chainId:n.chainId},this.isValidContractData(n.request.params)&&{contractAddresses:[(o=(i=n.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),K(this,"isValidContractData",t=>{var n;if(!t)return!1;try{const s=(t==null?void 0:t.data)||((n=t==null?void 0:t[0])==null?void 0:n.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),K(this,"extractTxHashesFromResult",(t,n)=>{try{const s=wv[t];if(typeof n=="string")return[n];const i=n[s.key];if(_o(i))return t==="solana_signAllTransactions"?i.map(o=>Z3(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,s]of Object.entries(t))for(const i of s)try{await this.onProviderMessageEvent({topic:n,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Xt.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:t,message:n,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Ff)?this.client.auth.authKeys.get(Ff):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(t,n,{receiverPublicKey:o,encoding:i===Ct.link_mode?Yi:us});Yw(a)?(this.client.core.history.set(t,a),await this.onRelayEventRequest({topic:t,payload:a,attestation:s,transportType:i,encryptedId:Ms(n)})):cg(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:t,payload:a,transportType:i}),this.client.core.history.delete(t,a.id)):await this.onRelayEventUnknownPayload({topic:t,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(t,n)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Dn.expired,async e=>{const{topic:t,id:n}=ZC(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,re("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,re("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(zo.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(zo.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!jt(e,!1)){const{message:t}=re("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=re("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Ji(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=re("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!jt(e,!1)){const{message:t}=re("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=re("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Ji(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=re("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=re("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(jt(e,!1)){const{message:t}=re("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=re("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!gB(e)){const{message:t}=re("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=re("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Ji(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=re("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class J5 extends nc{constructor(e,t){super(e,t,k5,Zw),this.core=e,this.logger=t}}let Q5=class extends nc{constructor(e,t){super(e,t,D5,Zw),this.core=e,this.logger=t}};class Y5 extends nc{constructor(e,t){super(e,t,L5,Zw,n=>n.id),this.core=e,this.logger=t}}class Z5 extends nc{constructor(e,t){super(e,t,F5,ug,()=>Ff),this.core=e,this.logger=t}}class X5 extends nc{constructor(e,t){super(e,t,j5,ug),this.core=e,this.logger=t}}class e4 extends nc{constructor(e,t){super(e,t,H5,ug,n=>n.id),this.core=e,this.logger=t}}var t4=Object.defineProperty,r4=(r,e,t)=>e in r?t4(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,mm=(r,e,t)=>r4(r,typeof e!="symbol"?e+"":e,t);class n4{constructor(e,t){this.core=e,this.logger=t,mm(this,"authKeys"),mm(this,"pairingTopics"),mm(this,"requests"),this.authKeys=new Z5(this.core,this.logger),this.pairingTopics=new X5(this.core,this.logger),this.requests=new e4(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var s4=Object.defineProperty,i4=(r,e,t)=>e in r?s4(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ze=(r,e,t)=>i4(r,typeof e!="symbol"?e+"":e,t);let o4=class sI extends ix{constructor(e){super(e),ze(this,"protocol",tI),ze(this,"version",rI),ze(this,"name",pm.name),ze(this,"metadata"),ze(this,"core"),ze(this,"logger"),ze(this,"events",new ws.EventEmitter),ze(this,"engine"),ze(this,"session"),ze(this,"proposal"),ze(this,"pendingRequest"),ze(this,"auth"),ze(this,"signConfig"),ze(this,"on",(n,s)=>this.events.on(n,s)),ze(this,"once",(n,s)=>this.events.once(n,s)),ze(this,"off",(n,s)=>this.events.off(n,s)),ze(this,"removeListener",(n,s)=>this.events.removeListener(n,s)),ze(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),ze(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"update",async n=>{try{return await this.engine.update(n)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"request",async n=>{try{return await this.engine.request(n)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"find",n=>{try{return this.engine.find(n)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),ze(this,"authenticate",async(n,s)=>{try{return await this.engine.authenticate(n,s)}catch(i){throw this.logger.error(i.message),i}}),ze(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||pm.name,this.metadata=h3(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Nd(du({level:(e==null?void 0:e.logger)||pm.logger}));this.core=(e==null?void 0:e.core)||new R5(e),this.logger=Nr(t,this.name),this.session=new Q5(this.core,this.logger),this.proposal=new J5(this.core,this.logger),this.pendingRequest=new Y5(this.core,this.logger),this.engine=new K5(this),this.auth=new n4(this.core,this.logger)}static async init(e){const t=new sI(e);return await t.initialize(),t}get context(){return rn(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},te.toMiliseconds(te.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var a4=Object.defineProperty,c4=Object.defineProperties,l4=Object.getOwnPropertyDescriptors,Ev=Object.getOwnPropertySymbols,u4=Object.prototype.hasOwnProperty,h4=Object.prototype.propertyIsEnumerable,vv=(r,e,t)=>e in r?a4(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Av=(r,e)=>{for(var t in e||(e={}))u4.call(e,t)&&vv(r,t,e[t]);if(Ev)for(var t of Ev(e))h4.call(e,t)&&vv(r,t,e[t]);return r},Cv=(r,e)=>c4(r,l4(e));const d4={Accept:"application/json","Content-Type":"application/json"},f4="POST",_v={headers:d4,method:f4},Iv=10;class bs{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new ws.EventEmitter,this.isAvailable=!1,this.registering=!1,!HE(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=Ri(e),n=await(await j0(this.url,Cv(Av({},_v),{body:t}))).json();this.onPayload({data:n})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!HE(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=Ri({id:1,jsonrpc:"2.0",method:"test",params:[]});await j0(e,Cv(Av({},_v),{body:t}))}this.onOpen()}catch(t){const n=this.parseError(t);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?La(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const n=this.parseError(t),s=n.message||n.toString(),i=ag(e,s);this.events.emit("payload",i)}parseError(e,t=this.url){return L_(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Iv&&this.events.setMaxListeners(Iv)}}const Nv="error",p4="wss://relay.walletconnect.org",g4="wc",m4="universal_provider",uf=`${g4}@2:${m4}:`,iI="https://rpc.walletconnect.org/v1/",kc="generic",y4=`${iI}bundler`,zn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function w4(){}function Xw(r){return r==null||typeof r!="object"&&typeof r!="function"}function e0(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function b4(r){if(Xw(r))return r;if(Array.isArray(r)||e0(r)||r instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&r instanceof SharedArrayBuffer)return r.slice(0);const e=Object.getPrototypeOf(r),t=e.constructor;if(r instanceof Date||r instanceof Map||r instanceof Set)return new t(r);if(r instanceof RegExp){const n=new t(r);return n.lastIndex=r.lastIndex,n}if(r instanceof DataView)return new t(r.buffer.slice(0));if(r instanceof Error){const n=new t(r.message);return n.stack=r.stack,n.name=r.name,n.cause=r.cause,n}if(typeof File<"u"&&r instanceof File)return new t([r],r.name,{type:r.type,lastModified:r.lastModified});if(typeof r=="object"){const n=Object.create(e);return Object.assign(n,r)}return r}function Sv(r){return typeof r=="object"&&r!==null}function oI(r){return Object.getOwnPropertySymbols(r).filter(e=>Object.prototype.propertyIsEnumerable.call(r,e))}function aI(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}const E4="[object RegExp]",cI="[object String]",lI="[object Number]",uI="[object Boolean]",hI="[object Arguments]",v4="[object Symbol]",A4="[object Date]",C4="[object Map]",_4="[object Set]",I4="[object Array]",N4="[object ArrayBuffer]",S4="[object Object]",T4="[object DataView]",O4="[object Uint8Array]",P4="[object Uint8ClampedArray]",x4="[object Uint16Array]",R4="[object Uint32Array]",k4="[object Int8Array]",D4="[object Int16Array]",U4="[object Int32Array]",L4="[object Float32Array]",B4="[object Float64Array]";function M4(r,e){return Fc(r,void 0,r,new Map,e)}function Fc(r,e,t,n=new Map,s=void 0){const i=s==null?void 0:s(r,e,t,n);if(i!=null)return i;if(Xw(r))return r;if(n.has(r))return n.get(r);if(Array.isArray(r)){const o=new Array(r.length);n.set(r,o);for(let a=0;a<r.length;a++)o[a]=Fc(r[a],a,t,n,s);return Object.hasOwn(r,"index")&&(o.index=r.index),Object.hasOwn(r,"input")&&(o.input=r.input),o}if(r instanceof Date)return new Date(r.getTime());if(r instanceof RegExp){const o=new RegExp(r.source,r.flags);return o.lastIndex=r.lastIndex,o}if(r instanceof Map){const o=new Map;n.set(r,o);for(const[a,c]of r)o.set(a,Fc(c,a,t,n,s));return o}if(r instanceof Set){const o=new Set;n.set(r,o);for(const a of r)o.add(Fc(a,void 0,t,n,s));return o}if(typeof nr<"u"&&nr.isBuffer(r))return r.subarray();if(e0(r)){const o=new(Object.getPrototypeOf(r)).constructor(r.length);n.set(r,o);for(let a=0;a<r.length;a++)o[a]=Fc(r[a],a,t,n,s);return o}if(r instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&r instanceof SharedArrayBuffer)return r.slice(0);if(r instanceof DataView){const o=new DataView(r.buffer.slice(0),r.byteOffset,r.byteLength);return n.set(r,o),Wo(o,r,t,n,s),o}if(typeof File<"u"&&r instanceof File){const o=new File([r],r.name,{type:r.type});return n.set(r,o),Wo(o,r,t,n,s),o}if(r instanceof Blob){const o=new Blob([r],{type:r.type});return n.set(r,o),Wo(o,r,t,n,s),o}if(r instanceof Error){const o=new r.constructor;return n.set(r,o),o.message=r.message,o.name=r.name,o.stack=r.stack,o.cause=r.cause,Wo(o,r,t,n,s),o}if(typeof r=="object"&&$4(r)){const o=Object.create(Object.getPrototypeOf(r));return n.set(r,o),Wo(o,r,t,n,s),o}return r}function Wo(r,e,t=r,n,s){const i=[...Object.keys(e),...oI(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(r,a);(c==null||c.writable)&&(r[a]=Fc(e[a],a,t,n,s))}}function $4(r){switch(aI(r)){case hI:case I4:case N4:case T4:case uI:case A4:case L4:case B4:case k4:case D4:case U4:case C4:case lI:case S4:case E4:case _4:case cI:case v4:case O4:case P4:case x4:case R4:return!0;default:return!1}}function F4(r,e){return M4(r,(t,n,s,i)=>{if(typeof r=="object")switch(Object.prototype.toString.call(r)){case lI:case cI:case uI:{const o=new r.constructor(r==null?void 0:r.valueOf());return Wo(o,r),o}case hI:{const o={};return Wo(o,r),o.length=r.length,o[Symbol.iterator]=r[Symbol.iterator],o}default:return}})}function Tv(r){return F4(r)}function Ov(r){return r!==null&&typeof r=="object"&&aI(r)==="[object Arguments]"}function j4(r){return e0(r)}function H4(r){var t;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const n=r[Symbol.toStringTag];return n==null||!((t=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&t.writable)?!1:r.toString()===`[object ${n}]`}let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e}function V4(r,...e){const t=e.slice(0,-1),n=e[e.length-1];let s=r;for(let i=0;i<t.length;i++){const o=t[i];s=By(s,o,n,new Map)}return s}function By(r,e,t,n){if(Xw(r)&&(r=Object(r)),e==null||typeof e!="object")return r;if(n.has(e))return b4(n.get(e));if(n.set(e,r),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...oI(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=r[o];if(Ov(a)&&(a={...a}),Ov(c)&&(c={...c}),typeof nr<"u"&&nr.isBuffer(a)&&(a=Tv(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],h=Reflect.ownKeys(c);for(let d=0;d<h.length;d++){const f=h[d];u[f]=c[f]}c=u}else c=[];const l=t(c,a,o,r,e,n);l!=null?r[o]=l:Array.isArray(a)||Sv(c)&&Sv(a)?r[o]=By(c,a,t,n):c==null&&H4(a)?r[o]=By({},a,t,n):c==null&&j4(a)?r[o]=Tv(a):(c===void 0||a!==void 0)&&(r[o]=a)}return r}function q4(r,...e){return V4(r,...e,w4)}var z4=Object.defineProperty,W4=Object.defineProperties,G4=Object.getOwnPropertyDescriptors,Pv=Object.getOwnPropertySymbols,K4=Object.prototype.hasOwnProperty,J4=Object.prototype.propertyIsEnumerable,xv=(r,e,t)=>e in r?z4(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,hf=(r,e)=>{for(var t in e||(e={}))K4.call(e,t)&&xv(r,t,e[t]);if(Pv)for(var t of Pv(e))J4.call(e,t)&&xv(r,t,e[t]);return r},Q4=(r,e)=>W4(r,G4(e));function vn(r,e,t){var n;const s=Gc(r);return((n=e.rpcMap)==null?void 0:n[s.reference])||`${iI}?chainId=${s.namespace}:${s.reference}&projectId=${t}`}function sc(r){return r.includes(":")?r.split(":")[1]:r}function dI(r){return r.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Y4(r,e){const t=Object.keys(e.namespaces).filter(s=>s.includes(r));if(!t.length)return[];const n=[];return t.forEach(s=>{const i=e.namespaces[s].accounts;n.push(...i)}),n}function ym(r={},e={}){const t=Rv(r),n=Rv(e);return q4(t,n)}function Rv(r){var e,t,n,s;const i={};if(!Ah(r))return i;for(const[o,a]of Object.entries(r)){const c=Kw(o)?[o]:a.chains,l=a.methods||[],u=a.events||[],h=a.rpcMap||{},d=zu(o);i[d]=Q4(hf(hf({},i[d]),a),{chains:Lf(c,(e=i[d])==null?void 0:e.chains),methods:Lf(l,(t=i[d])==null?void 0:t.methods),events:Lf(u,(n=i[d])==null?void 0:n.events),rpcMap:hf(hf({},h),(s=i[d])==null?void 0:s.rpcMap)})}return i}function kv(r){return r.includes(":")?r.split(":")[2]:r}function Dv(r){const e={};for(const[t,n]of Object.entries(r)){const s=n.methods||[],i=n.events||[],o=n.accounts||[],a=Kw(t)?[t]:n.chains?n.chains:dI(n.accounts);e[t]={chains:a,methods:s,events:i,accounts:o}}return e}function wm(r){return typeof r=="number"?r:r.includes("0x")?parseInt(r,16):(r=r.includes(":")?r.split(":")[1]:r,isNaN(Number(r))?r:Number(r))}const fI={},et=r=>fI[r],bm=(r,e)=>{fI[r]=e};var Z4=Object.defineProperty,X4=(r,e,t)=>e in r?Z4(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,dc=(r,e,t)=>X4(r,typeof e!="symbol"?e+"":e,t);class eF{constructor(e){dc(this,"name","polkadot"),dc(this,"client"),dc(this,"httpProviders"),dc(this,"events"),dc(this,"namespace"),dc(this,"chainId"),this.namespace=e.namespace,this.events=et("events"),this.client=et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(zn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;const s=sc(t);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||vn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new bs(n,et("disableProviderPing")))}}var tF=Object.defineProperty,rF=Object.defineProperties,nF=Object.getOwnPropertyDescriptors,Uv=Object.getOwnPropertySymbols,sF=Object.prototype.hasOwnProperty,iF=Object.prototype.propertyIsEnumerable,My=(r,e,t)=>e in r?tF(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Lv=(r,e)=>{for(var t in e||(e={}))sF.call(e,t)&&My(r,t,e[t]);if(Uv)for(var t of Uv(e))iF.call(e,t)&&My(r,t,e[t]);return r},Bv=(r,e)=>rF(r,nF(e)),fc=(r,e,t)=>My(r,typeof e!="symbol"?e+"":e,t);class oF{constructor(e){fc(this,"name","eip155"),fc(this,"client"),fc(this,"chainId"),fc(this,"namespace"),fc(this,"httpProviders"),fc(this,"events"),this.namespace=e.namespace,this.events=et("events"),this.client=et("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(zn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const n=t||vn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new bs(n,et("disableProviderPing")))}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;const s=parseInt(sc(t));e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,n;let s=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,n,s;const i=(n=(t=e.request)==null?void 0:t.params)==null?void 0:n[0];if(!i)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const o=this.client.session.get(e.topic),a=((s=o==null?void 0:o.sessionProperties)==null?void 0:s.capabilities)||{};if(a!=null&&a[i])return a==null?void 0:a[i];const c=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:Bv(Lv({},o.sessionProperties||{}),{capabilities:Bv(Lv({},a||{}),{[i]:c})})})}catch(l){console.warn("Failed to update session with capabilities",l)}return c}async getCallStatus(e){var t,n;const s=this.client.session.get(e.topic),i=(t=s.sessionProperties)==null?void 0:t.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(n=s.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var n;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(vo("eth_getUserOperationReceipt",[(n=t.request.params)==null?void 0:n[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,t){return`${y4}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var aF=Object.defineProperty,cF=(r,e,t)=>e in r?aF(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,pc=(r,e,t)=>cF(r,typeof e!="symbol"?e+"":e,t);class lF{constructor(e){pc(this,"name","solana"),pc(this,"client"),pc(this,"httpProviders"),pc(this,"events"),pc(this,"namespace"),pc(this,"chainId"),this.namespace=e.namespace,this.events=et("events"),this.client=et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(zn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;const s=sc(t);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||vn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new bs(n,et("disableProviderPing")))}}var uF=Object.defineProperty,hF=(r,e,t)=>e in r?uF(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,gc=(r,e,t)=>hF(r,typeof e!="symbol"?e+"":e,t);class dF{constructor(e){gc(this,"name","cosmos"),gc(this,"client"),gc(this,"httpProviders"),gc(this,"events"),gc(this,"namespace"),gc(this,"chainId"),this.namespace=e.namespace,this.events=et("events"),this.client=et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(zn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;const s=sc(t);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||vn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new bs(n,et("disableProviderPing")))}}var fF=Object.defineProperty,pF=(r,e,t)=>e in r?fF(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,mc=(r,e,t)=>pF(r,typeof e!="symbol"?e+"":e,t);class gF{constructor(e){mc(this,"name","algorand"),mc(this,"client"),mc(this,"httpProviders"),mc(this,"events"),mc(this,"namespace"),mc(this,"chainId"),this.namespace=e.namespace,this.events=et("events"),this.client=et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const n=t||vn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(zn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;e[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||vn(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new qn(new bs(n,et("disableProviderPing")))}}var mF=Object.defineProperty,yF=(r,e,t)=>e in r?mF(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,yc=(r,e,t)=>yF(r,typeof e!="symbol"?e+"":e,t);class wF{constructor(e){yc(this,"name","cip34"),yc(this,"client"),yc(this,"httpProviders"),yc(this,"events"),yc(this,"namespace"),yc(this,"chainId"),this.namespace=e.namespace,this.events=et("events"),this.client=et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(zn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const n=this.getCardanoRPCUrl(t),s=sc(t);e[s]=this.createHttpProvider(s,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new bs(n,et("disableProviderPing")))}}var bF=Object.defineProperty,EF=(r,e,t)=>e in r?bF(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,wc=(r,e,t)=>EF(r,typeof e!="symbol"?e+"":e,t);class vF{constructor(e){wc(this,"name","elrond"),wc(this,"client"),wc(this,"httpProviders"),wc(this,"events"),wc(this,"namespace"),wc(this,"chainId"),this.namespace=e.namespace,this.events=et("events"),this.client=et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(zn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;const s=sc(t);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||vn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new bs(n,et("disableProviderPing")))}}var AF=Object.defineProperty,CF=(r,e,t)=>e in r?AF(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,bc=(r,e,t)=>CF(r,typeof e!="symbol"?e+"":e,t);class _F{constructor(e){bc(this,"name","multiversx"),bc(this,"client"),bc(this,"httpProviders"),bc(this,"events"),bc(this,"namespace"),bc(this,"chainId"),this.namespace=e.namespace,this.events=et("events"),this.client=et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(zn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;const s=sc(t);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||vn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new bs(n,et("disableProviderPing")))}}var IF=Object.defineProperty,NF=(r,e,t)=>e in r?IF(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ec=(r,e,t)=>NF(r,typeof e!="symbol"?e+"":e,t);class SF{constructor(e){Ec(this,"name","near"),Ec(this,"client"),Ec(this,"httpProviders"),Ec(this,"events"),Ec(this,"namespace"),Ec(this,"chainId"),this.namespace=e.namespace,this.events=et("events"),this.client=et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const n=t||vn(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(zn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;e[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||vn(e,this.namespace);return typeof n>"u"?void 0:new qn(new bs(n,et("disableProviderPing")))}}var TF=Object.defineProperty,OF=(r,e,t)=>e in r?TF(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,vc=(r,e,t)=>OF(r,typeof e!="symbol"?e+"":e,t);class PF{constructor(e){vc(this,"name","tezos"),vc(this,"client"),vc(this,"httpProviders"),vc(this,"events"),vc(this,"namespace"),vc(this,"chainId"),this.namespace=e.namespace,this.events=et("events"),this.client=et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const n=t||vn(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(zn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||vn(e,this.namespace);return typeof n>"u"?void 0:new qn(new bs(n))}}var xF=Object.defineProperty,RF=(r,e,t)=>e in r?xF(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ac=(r,e,t)=>RF(r,typeof e!="symbol"?e+"":e,t);class kF{constructor(e){Ac(this,"name",kc),Ac(this,"client"),Ac(this,"httpProviders"),Ac(this,"events"),Ac(this,"namespace"),Ac(this,"chainId"),this.namespace=e.namespace,this.events=et("events"),this.client=et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(zn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){var e,t;const n={};return(t=(e=this.namespace)==null?void 0:e.accounts)==null||t.forEach(s=>{const i=Gc(s);n[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),n}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||vn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new bs(n,et("disableProviderPing")))}}var DF=Object.defineProperty,UF=Object.defineProperties,LF=Object.getOwnPropertyDescriptors,Mv=Object.getOwnPropertySymbols,BF=Object.prototype.hasOwnProperty,MF=Object.prototype.propertyIsEnumerable,$y=(r,e,t)=>e in r?DF(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,df=(r,e)=>{for(var t in e||(e={}))BF.call(e,t)&&$y(r,t,e[t]);if(Mv)for(var t of Mv(e))MF.call(e,t)&&$y(r,t,e[t]);return r},Em=(r,e)=>UF(r,LF(e)),Nn=(r,e,t)=>$y(r,typeof e!="symbol"?e+"":e,t);class t0{constructor(e){Nn(this,"client"),Nn(this,"namespaces"),Nn(this,"optionalNamespaces"),Nn(this,"sessionProperties"),Nn(this,"scopedProperties"),Nn(this,"events",new Pw),Nn(this,"rpcProviders",{}),Nn(this,"session"),Nn(this,"providerOpts"),Nn(this,"logger"),Nn(this,"uri"),Nn(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Nd(du({level:(e==null?void 0:e.logger)||Nv})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new t0(e);return await t.initialize(),t}async request(e,t,n){const[s,i]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:df({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:n})}sendAsync(e,t,n,s){const i=new Date().getTime();this.request(e,n,s).then(o=>t(null,og(i,o))).catch(o=>t(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:ut("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:s}=await this.client.authenticate(e,t);n&&(this.uri=n,this.events.emit("display_uri",n));const i=await s();if(this.session=i.session,this.session){const o=Dv(this.session.namespaces);this.namespaces=ym(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){const{uri:t,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));const s=await n();this.session=s;const i=Dv(s.namespaces);return this.namespaces=ym(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[n,s]=this.validateChain(e),i=this.getProvider(n);i.name===kc?i.setDefaultChain(`${n}:${s}`,t):i.setDefaultChain(s,t)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(_o(t)){for(const n of t)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await o4.init({core:this.providerOpts.core,logger:this.providerOpts.logger||Nv,relayUrl:this.providerOpts.relayUrl||p4,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error("Failed to get session",n),new Error(`The provided session: ${(t=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:t.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>zu(t)))];bm("client",this.client),bm("events",this.events),bm("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const n=Y4(t,this.session),s=dI(n),i=ym(this.namespaces,this.optionalNamespaces),o=Em(df({},i[t]),{accounts:n,chains:s});switch(t){case"eip155":this.rpcProviders[t]=new oF({namespace:o});break;case"algorand":this.rpcProviders[t]=new gF({namespace:o});break;case"solana":this.rpcProviders[t]=new lF({namespace:o});break;case"cosmos":this.rpcProviders[t]=new dF({namespace:o});break;case"polkadot":this.rpcProviders[t]=new eF({namespace:o});break;case"cip34":this.rpcProviders[t]=new wF({namespace:o});break;case"elrond":this.rpcProviders[t]=new vF({namespace:o});break;case"multiversx":this.rpcProviders[t]=new _F({namespace:o});break;case"near":this.rpcProviders[t]=new SF({namespace:o});break;case"tezos":this.rpcProviders[t]=new PF({namespace:o});break;default:this.rpcProviders[kc]?this.rpcProviders[kc].updateNamespace(o):this.rpcProviders[kc]=new kF({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var t;const{topic:n}=e;n===((t=this.session)==null?void 0:t.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var t;const{params:n,topic:s}=e;if(s!==((t=this.session)==null?void 0:t.topic))return;const{event:i}=n;if(i.name==="accountsChanged"){const o=i.data;o&&_o(o)&&this.events.emit("accountsChanged",o.map(kv))}else if(i.name==="chainChanged"){const o=n.chainId,a=n.event.data,c=zu(o),l=wm(o)!==wm(a)?`${c}:${wm(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var n,s;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:i}=t,o=(s=this.client)==null?void 0:s.session.get(e);this.session=Em(df({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{var t;e.topic===((t=this.session)==null?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Em(df({},ut("USER_DISCONNECTED")),{data:e.topic})))}),this.on(zn.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[kc]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:n,sessionProperties:s,scopedProperties:i}=e;t&&Object.keys(t).length&&(this.namespaces=t),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[t,n]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,n];if(t&&!Object.keys(this.namespaces||{}).map(o=>zu(o)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&n)return[t,n];const s=zu(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,t=!1){if(!this.namespaces)return;const[n,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(n,s),this.events.emit("chainChanged",s);const i=this.getProvider(n).getDefaultChain();t||this.getProvider(n).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:n,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:t,newChainId:n}){var s,i;try{if(t===n)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${n}:`)).map(kv);if(!_o(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,t){if(!this.namespaces)return;const n=this.namespaces[e]?e:`${e}:${t}`,s={chains:[],methods:[],events:[],defaultChain:t};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=t):this.namespaces[n]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var n;const s=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${uf}/${e}${s}`,t)}async getFromStore(e){var t;const n=((t=this.session)==null?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${uf}/${e}${n}`)}async deleteFromStore(e){var t;const n=((t=this.session)==null?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${uf}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const t=await this.client.core.storage.getKeys();for(const n of t)n.startsWith(uf)&&await this.client.core.storage.removeItem(n)}catch(t){this.logger.warn("Failed to cleanup storage",t)}}}var Ql={};const $F="https://secure.walletconnect.org/sdk",FF=(typeof Zr<"u"&&typeof Ql<"u"?Ql.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||$F,jF=(typeof Zr<"u"&&typeof Ql<"u"?Ql.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",HF=(typeof Zr<"u"&&typeof Ql<"u"?Ql.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",ge={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Ht={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Fo=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),qt=Pt({...Fo}),ur={state:qt,subscribeKey(r,e){return tn(qt,r,e)},showLoading(r,e={}){this._showMessage({message:r,variant:"loading",...e})},showSuccess(r){this._showMessage({message:r,variant:"success"})},showSvg(r,e){this._showMessage({message:r,svg:e})},showError(r){const e=Se.parseError(r);this._showMessage({message:e,variant:"error"})},hide(){qt.message=Fo.message,qt.variant=Fo.variant,qt.svg=Fo.svg,qt.open=Fo.open,qt.autoClose=Fo.autoClose},_showMessage({message:r,svg:e,variant:t="success",autoClose:n=Fo.autoClose}){qt.open?(qt.open=!1,setTimeout(()=>{qt.message=r,qt.variant=t,qt.svg=e,qt.open=!0,qt.autoClose=n},150)):(qt.message=r,qt.variant=t,qt.svg=e,qt.open=!0,qt.autoClose=n)}},oh={getSIWX(){return X.state.siwx},async initializeIfEnabled(){var i;const r=X.state.siwx,e=$.getActiveCaipAddress();if(!(r&&e))return;const[t,n,s]=e.split(":");if($.checkIfSupportedNetwork(t))try{if((await r.getSessions(`${t}:${n}`,s)).length)return;await Lt.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),mt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=At._getClient())==null?void 0:i.disconnect().catch(console.error)),at.reset("Connect"),ur.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const r=X.state.siwx,e=Se.getPlainAddress($.getActiveCaipAddress()),t=$.getActiveCaipNetwork(),n=At._getClient();if(!r)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!t)throw new Error("No ActiveCaipNetwork or client found");if(!n)throw new Error("No ConnectionController client found");try{const s=await r.createMessage({chainId:t.caipNetworkId,accountAddress:e}),i=s.toString();De.getConnectorId(t.chainNamespace)===ee.CONNECTOR_ID.AUTH&&at.pushTransactionStack({view:null,goBack:!1,replace:!0});const a=await n.signMessage(i);await r.addSession({data:s,message:i,signature:a}),Lt.close(),mt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Lt.state.open||at.state.view==="ApproveTransaction")&&await Lt.open({view:"SIWXSignMessage"}),i.isSmartAccount?ur.showError("This application might not support Smart Accounts"):ur.showError("Signature declined"),mt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var r;try{const e=this.getSIWX();((r=e==null?void 0:e.getRequired)==null?void 0:r.call(e))?await At.disconnect():Lt.close(),at.reset("Connect"),mt.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const r=X.state.siwx,e=Se.getPlainAddress($.getActiveCaipAddress()),t=$.getActiveCaipNetwork();return r&&e&&t?r.getSessions(t.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const r=this.getSIWX();if(r){const t=at.state.view==="ApproveTransaction",n=at.state.view==="SIWXSignMessage";if(t||n)return((e=r.getRequired)==null?void 0:e.call(r))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:r,chains:e,methods:t}){var a,c,l;const n=oh.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!n||s.size!==1||!s.has("eip155"))return!1;const i=await n.createMessage({chainId:((a=$.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await r.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:t,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(ur.showLoading("Authenticating...",{autoClose:!1}),de.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(h=>{const d=r.client.formatAuthMessage({request:h.p,iss:h.p.iss});return{data:{...h.p,accountAddress:h.p.iss.split(":").slice(-1).join(""),chainId:h.p.iss.split(":").slice(2,4).join(":"),uri:h.p.aud,version:h.p.version||i.version,expirationTime:h.p.exp,issuedAt:h.p.iat,notBefore:h.p.nbf},message:d,signature:h.s.s,cacao:h}});try{await n.setSessions(u),mt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:oh.getSIWXEventProperties()})}catch(h){throw console.error("SIWX:universalProviderAuth - failed to set sessions",h),mt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:oh.getSIWXEventProperties()}),await r.disconnect().catch(console.error),h}finally{ur.hide()}}return!0},getSIWXEventProperties(){var e,t;const r=$.state.activeChain;return{network:((e=$.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((t=de.state.preferredAccountTypes)==null?void 0:t[r])===Ht.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const r=this.getSIWX();r&&await r.setSessions([])}},Et=Pt({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),VF={state:Et,subscribe(r){return Mr(Et,()=>r(Et))},setLastNetworkInView(r){Et.lastNetworkInView=r},async fetchTransactions(r,e){var t,n;if(!r)throw new Error("Transactions can't be fetched without an accountAddress");Et.loading=!0;try{const s=await Ie.fetchTransactions({account:r,cursor:Et.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(t=$.state.activeCaipNetwork)==null?void 0:t.caipNetworkId}),i=this.filterSpamTransactions(s.data),o=this.filterByConnectedChain(i),a=[...Et.transactions,...o];Et.loading=!1,e==="coinbase"?Et.coinbaseTransactions=this.groupTransactionsByYearAndMonth(Et.coinbaseTransactions,s.data):(Et.transactions=a,Et.transactionsByYear=this.groupTransactionsByYearAndMonth(Et.transactionsByYear,o)),Et.empty=a.length===0,Et.next=s.next?s.next:void 0}catch{const i=$.state.activeChain;mt.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:r,projectId:X.state.projectId,cursor:Et.next,isSmartAccount:((n=de.state.preferredAccountTypes)==null?void 0:n[i])===Ht.ACCOUNT_TYPES.SMART_ACCOUNT}}),ur.showError("Failed to fetch transactions"),Et.loading=!1,Et.empty=!0,Et.next=void 0}},groupTransactionsByYearAndMonth(r={},e=[]){const t=r;return e.forEach(n=>{const s=new Date(n.metadata.minedAt).getFullYear(),i=new Date(n.metadata.minedAt).getMonth(),o=t[s]??{},c=(o[i]??[]).filter(l=>l.id!==n.id);t[s]={...o,[i]:[...c,n].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),t},filterSpamTransactions(r){return r.filter(e=>!e.transfers.every(n=>{var s;return((s=n.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(r){var n;const e=(n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId;return r.filter(s=>s.metadata.chain===e)},clearCursor(){Et.next=void 0},resetTransactions(){Et.transactions=[],Et.transactionsByYear={},Et.lastNetworkInView=void 0,Et.loading=!1,Et.empty=!1,Et.next=void 0}},vt=Pt({wcError:!1,buffering:!1,status:"disconnected"});let Cc;const At={state:vt,subscribeKey(r,e){return tn(vt,r,e)},_getClient(){return vt._client},setClient(r){vt._client=Ua(r)},async connectWalletConnect(){var r,e,t,n;if(Se.isTelegram()||Se.isSafari()&&Se.isIos()){if(Cc){await Cc,Cc=void 0;return}if(!Se.isPairingExpired(vt==null?void 0:vt.wcPairingExpiry)){const s=vt.wcUri;vt.wcUri=s;return}Cc=(e=(r=this._getClient())==null?void 0:r.connectWalletConnect)==null?void 0:e.call(r).catch(()=>{}),this.state.status="connecting",await Cc,Cc=void 0,vt.wcPairingExpiry=void 0,this.state.status="connected"}else await((n=(t=this._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:n.call(t))},async connectExternal(r,e,t=!0){var n,s;await((s=(n=this._getClient())==null?void 0:n.connectExternal)==null?void 0:s.call(n,r)),t&&$.setActiveNamespace(e)},async reconnectExternal(r){var t,n;await((n=(t=this._getClient())==null?void 0:t.reconnectExternal)==null?void 0:n.call(t,r));const e=r.chain||$.state.activeChain;e&&De.setConnectorId(r.id,e)},async setPreferredAccountType(r,e){var n;Lt.setLoading(!0,$.state.activeChain);const t=De.getAuthConnector();t&&(de.setPreferredAccountType(r,e),await t.provider.setPreferredAccount(r),he.setPreferredAccountTypes(de.state.preferredAccountTypes??{[e]:r}),await this.reconnectExternal(t),Lt.setLoading(!1,$.state.activeChain),mt.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:r,network:((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)||""}}))},async signMessage(r){var e;return(e=this._getClient())==null?void 0:e.signMessage(r)},parseUnits(r,e){var t;return(t=this._getClient())==null?void 0:t.parseUnits(r,e)},formatUnits(r,e){var t;return(t=this._getClient())==null?void 0:t.formatUnits(r,e)},async sendTransaction(r){var e;return(e=this._getClient())==null?void 0:e.sendTransaction(r)},async getCapabilities(r){var e;return(e=this._getClient())==null?void 0:e.getCapabilities(r)},async grantPermissions(r){var e;return(e=this._getClient())==null?void 0:e.grantPermissions(r)},async walletGetAssets(r){var e;return((e=this._getClient())==null?void 0:e.walletGetAssets(r))??{}},async estimateGas(r){var e;return(e=this._getClient())==null?void 0:e.estimateGas(r)},async writeContract(r){var e;return(e=this._getClient())==null?void 0:e.writeContract(r)},async getEnsAddress(r){var e;return(e=this._getClient())==null?void 0:e.getEnsAddress(r)},async getEnsAvatar(r){var e;return(e=this._getClient())==null?void 0:e.getEnsAvatar(r)},checkInstalled(r){var e,t;return((t=(e=this._getClient())==null?void 0:e.checkInstalled)==null?void 0:t.call(e,r))||!1},resetWcConnection(){vt.wcUri=void 0,vt.wcPairingExpiry=void 0,vt.wcLinking=void 0,vt.recentWallet=void 0,vt.status="disconnected",VF.resetTransactions(),he.deleteWalletConnectDeepLink()},resetUri(){vt.wcUri=void 0,vt.wcPairingExpiry=void 0},finalizeWcConnection(){var t,n;const{wcLinking:r,recentWallet:e}=At.state;r&&he.setWalletConnectDeepLink(r),e&&he.setAppKitRecent(e),mt.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:r?"mobile":"qrcode",name:((n=(t=at.state.data)==null?void 0:t.wallet)==null?void 0:n.name)||"Unknown"}})},setWcBasic(r){vt.wcBasic=r},setUri(r){vt.wcUri=r,vt.wcPairingExpiry=Se.getPairingExpiry()},setWcLinking(r){vt.wcLinking=r},setWcError(r){vt.wcError=r,vt.buffering=!1},setRecentWallet(r){vt.recentWallet=r},setBuffering(r){vt.buffering=r},setStatus(r){vt.status=r},async disconnect(r){try{Lt.setLoading(!0,r),await oh.clearSessions(),await $.disconnect(r),Lt.setLoading(!1,r),De.setFilterByNamespace(void 0)}catch{throw new Error("Failed to disconnect")}}},_c=Pt({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),qs={state:_c,subscribe(r){return Mr(_c,()=>r(_c))},subscribeOpen(r){return tn(_c,"open",r)},set(r){Object.assign(_c,{..._c,...r})}};function qF(r,{strict:e=!0}={}){return!r||typeof r!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(r):r.startsWith("0x")}function $v(r){return qF(r,{strict:!1})?Math.ceil((r.length-2)/2):r.length}const pI="2.27.0";let Lu={getDocsUrl:({docsBaseUrl:r,docsPath:e="",docsSlug:t})=>e?`${r??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${pI}`};class An extends Error{constructor(e,t={}){var a;const n=(()=>{var c;return t.cause instanceof An?t.cause.details:(c=t.cause)!=null&&c.message?t.cause.message:t.details})(),s=t.cause instanceof An&&t.cause.docsPath||t.docsPath,i=(a=Lu.getDocsUrl)==null?void 0:a.call(Lu,{...t,docsPath:s}),o=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...n?[`Details: ${n}`]:[],...Lu.version?[`Version: ${Lu.version}`]:[]].join(`
`);super(o,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=s,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=pI}walk(e){return gI(this,e)}}function gI(r,e){return e!=null&&e(r)?r:r&&typeof r=="object"&&"cause"in r&&r.cause!==void 0?gI(r.cause,e):e?null:r}class mI extends An{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function r0(r,{dir:e,size:t=32}={}){return typeof r=="string"?zF(r,{dir:e,size:t}):WF(r,{dir:e,size:t})}function zF(r,{dir:e,size:t=32}={}){if(t===null)return r;const n=r.replace("0x","");if(n.length>t*2)throw new mI({size:Math.ceil(n.length/2),targetSize:t,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function WF(r,{dir:e,size:t=32}={}){if(t===null)return r;if(r.length>t)throw new mI({size:r.length,targetSize:t,type:"bytes"});const n=new Uint8Array(t);for(let s=0;s<t;s++){const i=e==="right";n[i?s:t-s-1]=r[i?s:r.length-s-1]}return n}class GF extends An{constructor({max:e,min:t,signed:n,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class KF extends An{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function yI(r,{size:e}){if($v(r)>e)throw new KF({givenSize:$v(r),maxSize:e})}const JF=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Fv(r,e={}){return typeof r=="number"||typeof r=="bigint"?YF(r,e):typeof r=="string"?bI(r,e):typeof r=="boolean"?QF(r,e):wI(r,e)}function QF(r,e={}){const t=`0x${Number(r)}`;return typeof e.size=="number"?(yI(t,{size:e.size}),r0(t,{size:e.size})):t}function wI(r,e={}){let t="";for(let s=0;s<r.length;s++)t+=JF[r[s]];const n=`0x${t}`;return typeof e.size=="number"?(yI(n,{size:e.size}),r0(n,{dir:"right",size:e.size})):n}function YF(r,e={}){const{signed:t,size:n}=e,s=BigInt(r);let i;n?t?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof r=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&t?-i-1n:0;if(i&&s>i||s<o){const c=typeof r=="bigint"?"n":"";throw new GF({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:t,size:n,value:`${r}${c}`})}const a=`0x${(t&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?r0(a,{size:n}):a}const ZF=new TextEncoder;function bI(r,e={}){const t=ZF.encode(r);return wI(t,e)}class XF extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const Oa=(r,e,t)=>JSON.stringify(r,(n,s)=>typeof s=="bigint"?s.toString():s,t);function e6(r,e){let t=r.toString();const n=t.startsWith("-");n&&(t=t.slice(1)),t=t.padStart(e,"0");let[s,i]=[t.slice(0,t.length-e),t.slice(t.length-e)];return i=i.replace(/(0+)$/,""),`${n?"-":""}${s||"0"}${i?`.${i}`:""}`}const n0=r=>r;class ah extends An{constructor({body:e,cause:t,details:n,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:t,details:n,metaMessages:[i&&`Status: ${i}`,`URL: ${n0(o)}`,e&&`Request body: ${Oa(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class EI extends An{constructor({body:e,error:t,url:n}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${n0(n)}`,`Request body: ${Oa(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data}}class jv extends An{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${n0(t)}`,`Request body: ${Oa(e)}`],name:"TimeoutError"})}}const t6=-1;class nn extends An{constructor(e,{code:t,docsPath:n,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof EI?e.code:t??t6}}class Cn extends nn{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class Ch extends nn{constructor(e){super(e,{code:Ch.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Ch,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class _h extends nn{constructor(e){super(e,{code:_h.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(_h,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Ih extends nn{constructor(e,{method:t}={}){super(e,{code:Ih.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(Ih,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Nh extends nn{constructor(e){super(e,{code:Nh.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Nh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Yl extends nn{constructor(e){super(e,{code:Yl.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Yl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Sh extends nn{constructor(e){super(e,{code:Sh.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Sh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Th extends nn{constructor(e){super(e,{code:Th.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Th,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Oh extends nn{constructor(e){super(e,{code:Oh.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Oh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Zl extends nn{constructor(e){super(e,{code:Zl.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Zl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Xo extends nn{constructor(e,{method:t}={}){super(e,{code:Xo.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}}Object.defineProperty(Xo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Xl extends nn{constructor(e){super(e,{code:Xl.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Xl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Ph extends nn{constructor(e){super(e,{code:Ph.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Ph,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Pa extends Cn{constructor(e){super(e,{code:Pa.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Pa,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class xh extends Cn{constructor(e){super(e,{code:xh.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(xh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Rh extends Cn{constructor(e,{method:t}={}){super(e,{code:Rh.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(Rh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class kh extends Cn{constructor(e){super(e,{code:kh.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(kh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Dh extends Cn{constructor(e){super(e,{code:Dh.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Dh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Uh extends Cn{constructor(e){super(e,{code:Uh.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Uh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Lh extends Cn{constructor(e){super(e,{code:Lh.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Lh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Bh extends Cn{constructor(e){super(e,{code:Bh.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Bh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Mh extends Cn{constructor(e){super(e,{code:Mh.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Mh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class $h extends Cn{constructor(e){super(e,{code:$h.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty($h,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Fh extends Cn{constructor(e){super(e,{code:Fh.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Fh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class jh extends Cn{constructor(e){super(e,{code:jh.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(jh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Hh extends Cn{constructor(e){super(e,{code:Hh.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Hh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class r6 extends nn{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}class s0 extends An{constructor({cause:e,message:t}={}){var s;const n=(s=t==null?void 0:t.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(s0,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(s0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});function n6(){let r=()=>{},e=()=>{};return{promise:new Promise((n,s)=>{r=n,e=s}),resolve:r,reject:e}}const vm=new Map;function s6({fn:r,id:e,shouldSplitBatch:t,wait:n=0,sort:s}){const i=async()=>{const u=c();o();const h=u.map(({args:d})=>d);h.length!==0&&r(h).then(d=>{s&&Array.isArray(d)&&d.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([d[f],d])}}).catch(d=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(d)}})},o=()=>vm.delete(e),a=()=>c().map(({args:u})=>u),c=()=>vm.get(e)||[],l=u=>vm.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:h,resolve:d,reject:f}=n6();return(t==null?void 0:t([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:d,reject:f}),h):(l({args:u,resolve:d,reject:f}),setTimeout(i,n),h)}}}async function vI(r){return new Promise(e=>setTimeout(e,r))}const Fy=256;let ff=Fy,pf;function i6(r=11){if(!pf||ff+r>Fy*2){pf="",ff=0;for(let e=0;e<Fy;e++)pf+=(256+Math.random()*256|0).toString(16).substring(1)}return pf.substring(ff,ff+++r)}const gf=new XF(8192);function o6(r,{enabled:e=!0,id:t}){if(!e||!t)return r();if(gf.get(t))return gf.get(t);const n=r().finally(()=>gf.delete(t));return gf.set(t,n),n}function a6(r,{delay:e=100,retryCount:t=2,shouldRetry:n=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await vI(u),o({count:a+1})};try{const l=await r();s(l)}catch(l){if(a<t&&await n({count:a,error:l}))return c({error:l});i(l)}};o()})}function c6(r,e={}){return async(t,n={})=>{var h;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...n},{method:l}=t;if((h=i==null?void 0:i.exclude)!=null&&h.includes(l))throw new Xo(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Xo(new Error("method not supported"),{method:l});const u=s?bI(`${c}.${Oa(t)}`):void 0;return o6(()=>a6(async()=>{try{return await r(t)}catch(d){const f=d;switch(f.code){case Ch.code:throw new Ch(f);case _h.code:throw new _h(f);case Ih.code:throw new Ih(f,{method:t.method});case Nh.code:throw new Nh(f);case Yl.code:throw new Yl(f);case Sh.code:throw new Sh(f);case Th.code:throw new Th(f);case Oh.code:throw new Oh(f);case Zl.code:throw new Zl(f);case Xo.code:throw new Xo(f,{method:t.method});case Xl.code:throw new Xl(f);case Ph.code:throw new Ph(f);case Pa.code:throw new Pa(f);case xh.code:throw new xh(f);case Rh.code:throw new Rh(f);case kh.code:throw new kh(f);case Dh.code:throw new Dh(f);case Uh.code:throw new Uh(f);case Lh.code:throw new Lh(f);case Bh.code:throw new Bh(f);case Mh.code:throw new Mh(f);case $h.code:throw new $h(f);case Fh.code:throw new Fh(f);case jh.code:throw new jh(f);case Hh.code:throw new Hh(f);case 5e3:throw new Pa(f);default:throw d instanceof An?d:new r6(f)}}},{delay:({count:d,error:f})=>{var p;if(f&&f instanceof ah){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<d)*o},retryCount:a,shouldRetry:({error:d})=>l6(d)}),{enabled:s,id:u})}}function l6(r){return"code"in r&&typeof r.code=="number"?r.code===-1||r.code===Xl.code||r.code===Yl.code:r instanceof ah&&r.status?r.status===403||r.status===408||r.status===413||r.status===429||r.status===500||r.status===502||r.status===503||r.status===504:!0}function AI({key:r,methods:e,name:t,request:n,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=i6();return{config:{key:r,methods:e,name:t,request:n,retryCount:s,retryDelay:i,timeout:o,type:a},request:c6(n,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function Hv(r,e={}){const{key:t="fallback",name:n="Fallback",rank:s=!1,shouldThrow:i=u6,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...h})=>{let d=r,f=()=>{};const p=AI({key:t,name:n,async request({method:g,params:y}){let C;const w=async(I=0)=>{const U=d[I]({...h,chain:c,retryCount:0,timeout:u});try{const M=await U.request({method:g,params:y});return f({method:g,params:y,response:M,transport:U,status:"success"}),M}catch(M){if(f({error:M,method:g,params:y,transport:U,status:"error"}),i(M)||I===d.length-1||(C??(C=d.slice(I+1).some(B=>{const{include:L,exclude:m}=B({chain:c}).config.methods||{};return L?L.includes(g):m?!m.includes(g):!0})),!C))throw M;return w(I+1)}};return w()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:d.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};h6({chain:c,interval:g.interval??l,onTransports:y=>d=y,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:d,weights:g.weights})}return p}}function u6(r){return!!("code"in r&&typeof r.code=="number"&&(r.code===Zl.code||r.code===Pa.code||s0.nodeMessage.test(r.message)||r.code===5e3))}function h6({chain:r,interval:e=4e3,onTransports:t,ping:n,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],h=async()=>{const d=await Promise.all(o.map(async g=>{const y=g({chain:r,retryCount:0,timeout:i}),C=Date.now();let w,I;try{await(n?n({transport:y}):y.request({method:"net_listening"})),I=1}catch{I=0}finally{w=Date.now()}return{latency:w-C,success:I}}));u.push(d),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:y})=>y)))),p=o.map((g,y)=>{const C=u.map(B=>B[y].latency),I=1-C.reduce((B,L)=>B+L,0)/C.length/f,U=u.map(B=>B[y].success),M=U.reduce((B,L)=>B+L,0)/U.length;return M===0?[0,y]:[l*I+c*M,y]}).sort((g,y)=>y[0]-g[0]);t(p.map(([,g])=>o[g])),await vI(e),h()};h()}class d6 extends An{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function f6(r,{errorInstance:e=new Error("timed out"),timeout:t,signal:n}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;t>0&&(o=setTimeout(()=>{n&&a.abort()},t)),s(await r({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function p6(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const Vv=p6();function g6(r,e={}){return{async request(t){var h;const{body:n,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=t,a={...e.fetchOptions??{},...t.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const d=await f6(async({signal:p})=>{const g={...a,body:Array.isArray(n)?Oa(n.map(I=>({jsonrpc:"2.0",id:I.id??Vv.take(),...I}))):Oa({jsonrpc:"2.0",id:n.id??Vv.take(),...n}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},y=new Request(r,g),C=await(s==null?void 0:s(y,g))??{...g,url:r};return await fetch(C.url??r,C)},{errorInstance:new jv({body:n,url:r}),timeout:o,signal:!0});i&&await i(d);let f;if((h=d.headers.get("Content-Type"))!=null&&h.startsWith("application/json"))f=await d.json();else{f=await d.text();try{f=JSON.parse(f||"{}")}catch(p){if(d.ok)throw p;f={error:f}}}if(!d.ok)throw new ah({body:n,details:Oa(f.error)||d.statusText,headers:d.headers,status:d.status,url:r});return f}catch(d){throw d instanceof ah||d instanceof jv?d:new ah({body:n,cause:d,url:r})}}}}function mf(r,e={}){const{batch:t,fetchOptions:n,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:h,retryCount:d,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof t=="object"?t:{},y=e.retryCount??d,C=f??e.timeout??1e4,w=r||(h==null?void 0:h.rpcUrls.default.http[0]);if(!w)throw new d6;const I=g6(w,{fetchOptions:n,onRequest:a,onResponse:c,timeout:C});return AI({key:s,methods:i,name:o,async request({method:U,params:M}){const B={method:U,params:M},{schedule:L}=s6({id:w,wait:g,shouldSplitBatch(_){return _.length>p},fn:_=>I.request({body:_}),sort:(_,S)=>_.id-S.id}),m=async _=>t?L(_):[await I.request({body:_})],[{error:b,result:N}]=await m(B);if(u)return{error:b,result:N};if(b)throw new EI({body:B,error:b,url:w});return N},retryCount:y,retryDelay:l,timeout:C,type:"http"},{fetchOptions:n,url:w})}}function CI(r){return{formatters:void 0,fees:void 0,serializers:void 0,...r}}const Am={createBalance(r,e){const t={name:r.metadata.name||"",symbol:r.metadata.symbol||"",decimals:r.metadata.decimals||0,value:r.metadata.value||0,price:r.metadata.price||0,iconUrl:r.metadata.iconUrl||""};return{name:t.name,symbol:t.symbol,chainId:e,address:r.address==="native"?void 0:this.convertAddressToCAIP10Address(r.address,e),value:t.value,price:t.price,quantity:{decimals:t.decimals.toString(),numeric:this.convertHexToBalance({hex:r.balance,decimals:t.decimals})},iconUrl:t.iconUrl}},convertHexToBalance({hex:r,decimals:e}){return e6(BigInt(r),e)},convertAddressToCAIP10Address(r,e){return`${e}:${r}`},createCAIP2ChainId(r,e){return`${e}:${parseInt(r,16)}`},getChainIdHexFromCAIP2ChainId(r){const e=r.split(":");if(e.length<2||!e[1])return"0x0";const t=e[1],n=parseInt(t,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(r){return typeof r!="object"||r===null?!1:Object.values(r).every(e=>Array.isArray(e)&&e.every(t=>this.isValidAsset(t)))},isValidAsset(r){return typeof r=="object"&&r!==null&&typeof r.address=="string"&&typeof r.balance=="string"&&(r.type==="ERC20"||r.type==="NATIVE")&&typeof r.metadata=="object"&&r.metadata!==null&&typeof r.metadata.name=="string"&&typeof r.metadata.symbol=="string"&&typeof r.metadata.decimals=="number"&&typeof r.metadata.price=="number"&&typeof r.metadata.iconUrl=="string"}},qv={async getMyTokensWithBalance(r){const e=de.state.address,t=$.state.activeCaipNetwork;if(!e||!t)return[];if(t.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,t);if(s)return this.filterLowQualityTokens(s)}const n=await Ie.getBalance(e,t.caipNetworkId,r);return this.filterLowQualityTokens(n.balances)},async getEIP155Balances(r,e){var t,n;try{const s=Am.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await At.getCapabilities(r);if(!((n=(t=i==null?void 0:i[s])==null?void 0:t.assetDiscovery)!=null&&n.supported))return null;const o=await At.walletGetAssets({account:r,chainFilter:[s]});return Am.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>Am.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(r){return r.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(r){return(r==null?void 0:r.map(e=>({...e,address:e!=null&&e.address?e.address:$.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},We=Pt({tokenBalances:[],loading:!1}),zv={state:We,subscribe(r){return Mr(We,()=>r(We))},subscribeKey(r,e){return tn(We,r,e)},setToken(r){r&&(We.token=Ua(r))},setTokenAmount(r){We.sendTokenAmount=r},setReceiverAddress(r){We.receiverAddress=r},setReceiverProfileImageUrl(r){We.receiverProfileImageUrl=r},setReceiverProfileName(r){We.receiverProfileName=r},setGasPrice(r){We.gasPrice=r},setGasPriceInUsd(r){We.gasPriceInUSD=r},setNetworkBalanceInUsd(r){We.networkBalanceInUSD=r},setLoading(r){We.loading=r},sendToken(){var r;switch((r=$.state.activeCaipNetwork)==null?void 0:r.chainNamespace){case"eip155":this.sendEvmToken();return;case"solana":this.sendSolanaToken();return;default:throw new Error("Unsupported chain")}},sendEvmToken(){var t,n,s,i,o,a;const r=$.state.activeChain,e=(t=de.state.preferredAccountTypes)==null?void 0:t[r];(n=this.state.token)!=null&&n.address&&this.state.sendTokenAmount&&this.state.receiverAddress?(mt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ht.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token.address,amount:this.state.sendTokenAmount,network:((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),this.sendERC20Token({receiverAddress:this.state.receiverAddress,tokenAddress:this.state.token.address,sendTokenAmount:this.state.sendTokenAmount,decimals:this.state.token.quantity.decimals})):this.state.receiverAddress&&this.state.sendTokenAmount&&this.state.gasPrice&&((i=this.state.token)!=null&&i.quantity.decimals)&&(mt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ht.ACCOUNT_TYPES.SMART_ACCOUNT,token:(o=this.state.token)==null?void 0:o.symbol,amount:this.state.sendTokenAmount,network:((a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),this.sendNativeToken({receiverAddress:this.state.receiverAddress,sendTokenAmount:this.state.sendTokenAmount,gasPrice:this.state.gasPrice,decimals:this.state.token.quantity.decimals}))},async fetchTokenBalance(r){var i,o;We.loading=!0;const e=(i=$.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,t=(o=$.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=$.state.activeCaipAddress,s=n?Se.getPlainAddress(n):void 0;if(We.lastRetry&&!Se.isAllowedRetry(We.lastRetry,30*Cr.ONE_SEC_MS))return We.loading=!1,[];try{if(s&&e&&t){const a=await qv.getMyTokensWithBalance();return We.tokenBalances=a,We.lastRetry=void 0,a}}catch(a){We.lastRetry=Date.now(),r==null||r(a),ur.showError("Token Balance Unavailable")}finally{We.loading=!1}return[]},fetchNetworkBalance(){if(We.tokenBalances.length===0)return;const r=qv.mapBalancesToSwapTokens(We.tokenBalances);if(!r)return;const e=r.find(t=>t.address===$.getActiveNetworkTokenAddress());e&&(We.networkBalanceInUSD=e?Qd.multiply(e.quantity.numeric,e.price).toString():"0")},isInsufficientNetworkTokenForGas(r,e){const t=e||"0";return Qd.bigNumber(r).eq(0)?!0:Qd.bigNumber(Qd.bigNumber(t)).gt(r)},hasInsufficientGasFunds(){var t;const r=$.state.activeChain;let e=!0;return((t=de.state.preferredAccountTypes)==null?void 0:t[r])===Ht.ACCOUNT_TYPES.SMART_ACCOUNT?e=!1:We.networkBalanceInUSD&&(e=this.isInsufficientNetworkTokenForGas(We.networkBalanceInUSD,We.gasPriceInUSD)),e},async sendNativeToken(r){var o,a,c,l,u,h;const e=$.state.activeChain;at.pushTransactionStack({view:"Account",goBack:!1});const t=r.receiverAddress,n=de.state.address,s=At.parseUnits(r.sendTokenAmount.toString(),Number(r.decimals)),i="0x";try{await At.sendTransaction({chainNamespace:"eip155",to:t,address:n,data:i,value:s??BigInt(0),gasPrice:r.gasPrice}),ur.showSuccess("Transaction started"),mt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((o=de.state.preferredAccountTypes)==null?void 0:o[e])===Ht.ACCOUNT_TYPES.SMART_ACCOUNT,token:((a=this.state.token)==null?void 0:a.symbol)||"",amount:r.sendTokenAmount,network:((c=$.state.activeCaipNetwork)==null?void 0:c.caipNetworkId)||""}}),this.resetSend()}catch(d){console.error("SendController:sendERC20Token - failed to send native token",d);const f=d instanceof Error?d.message:"Unknown error";mt.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:f,isSmartAccount:((l=de.state.preferredAccountTypes)==null?void 0:l[e])===Ht.ACCOUNT_TYPES.SMART_ACCOUNT,token:((u=this.state.token)==null?void 0:u.symbol)||"",amount:r.sendTokenAmount,network:((h=$.state.activeCaipNetwork)==null?void 0:h.caipNetworkId)||""}}),ur.showError("Something went wrong")}},async sendERC20Token(r){var t,n,s;at.pushTransactionStack({view:"Account",goBack:!1});const e=At.parseUnits(r.sendTokenAmount.toString(),Number(r.decimals));try{if(de.state.address&&r.sendTokenAmount&&r.receiverAddress&&r.tokenAddress){const i=Se.getPlainAddress(r.tokenAddress);await At.writeContract({fromAddress:de.state.address,tokenAddress:i,args:[r.receiverAddress,e??BigInt(0)],method:"transfer",abi:tO.getERC20Abi(i),chainNamespace:"eip155"}),ur.showSuccess("Transaction started"),this.resetSend()}}catch(i){console.error("SendController:sendERC20Token - failed to send erc20 token",i);const o=i instanceof Error?i.message:"Unknown error";mt.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:o,isSmartAccount:((t=de.state.preferredAccountTypes)==null?void 0:t.eip155)===Ht.ACCOUNT_TYPES.SMART_ACCOUNT,token:((n=this.state.token)==null?void 0:n.symbol)||"",amount:r.sendTokenAmount,network:((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),ur.showError("Something went wrong")}},sendSolanaToken(){if(!this.state.sendTokenAmount||!this.state.receiverAddress){ur.showError("Please enter a valid amount and receiver address");return}at.pushTransactionStack({view:"Account",goBack:!1}),At.sendTransaction({chainNamespace:"solana",to:this.state.receiverAddress,value:this.state.sendTokenAmount}).then(()=>{this.resetSend(),de.fetchTokenBalance()}).catch(r=>{ur.showError("Failed to send transaction. Please try again."),console.error("SendController:sendToken - failed to send solana transaction",r)})},resetSend(){We.token=void 0,We.sendTokenAmount=void 0,We.receiverAddress=void 0,We.receiverProfileImageUrl=void 0,We.receiverProfileName=void 0,We.loading=!1,We.tokenBalances=[]}},Cm={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},yf={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},se=Pt({chains:HT(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),$={state:se,subscribe(r){return Mr(se,()=>{r(se)})},subscribeKey(r,e){return tn(se,r,e)},subscribeChainProp(r,e,t){let n;return Mr(se.chains,()=>{var i;const s=t||se.activeChain;if(s){const o=(i=se.chains.get(s))==null?void 0:i[r];n!==o&&(n=o,e(o))}})},initialize(r,e,t){const{chainId:n,namespace:s}=he.getActiveNetworkProps(),i=e==null?void 0:e.find(l=>l.id.toString()===(n==null?void 0:n.toString())),a=r.find(l=>(l==null?void 0:l.namespace)===s)||(r==null?void 0:r[0]),c=new Set([...(e==null?void 0:e.map(l=>l.chainNamespace))??[]]);((r==null?void 0:r.length)===0||!a)&&(se.noAdapters=!0),se.noAdapters||(se.activeChain=a==null?void 0:a.namespace,se.activeCaipNetwork=i,this.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),se.activeChain&&qs.set({activeChain:a==null?void 0:a.namespace})),c.forEach(l=>{const u=e==null?void 0:e.filter(h=>h.chainNamespace===l);$.state.chains.set(l,{namespace:l,networkState:Pt({...yf,caipNetwork:u==null?void 0:u[0]}),accountState:Pt(Cm),caipNetworks:u??[],...t}),this.setRequestedCaipNetworks(u??[],l)})},removeAdapter(r){var e,t;if(se.activeChain===r){const n=Array.from(se.chains.entries()).find(([s])=>s!==r);if(n){const s=(t=(e=n[1])==null?void 0:e.caipNetworks)==null?void 0:t[0];s&&this.setActiveCaipNetwork(s)}}se.chains.delete(r)},addAdapter(r,{networkControllerClient:e,connectionControllerClient:t},n){se.chains.set(r.namespace,{namespace:r.namespace,networkState:{...yf,caipNetwork:n[0]},accountState:Cm,caipNetworks:n,connectionControllerClient:t,networkControllerClient:e}),this.setRequestedCaipNetworks((n==null?void 0:n.filter(s=>s.chainNamespace===r.namespace))??[],r.namespace)},addNetwork(r){var t;const e=se.chains.get(r.chainNamespace);if(e){const n=[...e.caipNetworks||[]];(t=e.caipNetworks)!=null&&t.find(s=>s.id===r.id)||n.push(r),se.chains.set(r.chainNamespace,{...e,caipNetworks:n}),this.setRequestedCaipNetworks(n,r.chainNamespace)}},removeNetwork(r,e){var n,s,i;const t=se.chains.get(r);if(t){const o=((n=se.activeCaipNetwork)==null?void 0:n.id)===e,a=[...((s=t.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=t==null?void 0:t.caipNetworks)!=null&&i[0])&&this.setActiveCaipNetwork(t.caipNetworks[0]),se.chains.set(r,{...t,caipNetworks:a}),this.setRequestedCaipNetworks(a||[],r)}},setAdapterNetworkState(r,e){const t=se.chains.get(r);t&&(t.networkState={...t.networkState||yf,...e},se.chains.set(r,t))},setChainAccountData(r,e,t=!0){if(!r)throw new Error("Chain is required to update chain account data");const n=se.chains.get(r);if(n){const s={...n.accountState||Cm,...e};se.chains.set(r,{...n,accountState:s}),(se.chains.size===1||se.activeChain===r)&&(e.caipAddress&&(se.activeCaipAddress=e.caipAddress),de.replaceState(s))}},setChainNetworkData(r,e){if(!r)return;const t=se.chains.get(r);if(t){const n={...t.networkState||yf,...e};se.chains.set(r,{...t,networkState:n})}},setAccountProp(r,e,t,n=!0){this.setChainAccountData(t,{[r]:e},n),r==="status"&&e==="disconnected"&&t&&De.removeConnectorId(t)},setActiveNamespace(r){var n,s;se.activeChain=r;const e=r?se.chains.get(r):void 0,t=(n=e==null?void 0:e.networkState)==null?void 0:n.caipNetwork;t!=null&&t.id&&r&&(se.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,se.activeCaipNetwork=t,this.setChainNetworkData(r,{caipNetwork:t}),he.setActiveCaipNetworkId(t==null?void 0:t.caipNetworkId),qs.set({activeChain:r,selectedNetworkId:t==null?void 0:t.caipNetworkId}))},setActiveCaipNetwork(r){var n,s,i;if(!r)return;se.activeChain!==r.chainNamespace&&this.setIsSwitchingNamespace(!0);const e=se.chains.get(r.chainNamespace);se.activeChain=r.chainNamespace,se.activeCaipNetwork=r,this.setChainNetworkData(r.chainNamespace,{caipNetwork:r}),(n=e==null?void 0:e.accountState)!=null&&n.address?se.activeCaipAddress=`${r.chainNamespace}:${r.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:se.activeCaipAddress=void 0,this.setAccountProp("caipAddress",se.activeCaipAddress,r.chainNamespace),e&&de.replaceState(e.accountState),zv.resetSend(),qs.set({activeChain:se.activeChain,selectedNetworkId:(i=se.activeCaipNetwork)==null?void 0:i.caipNetworkId}),he.setActiveCaipNetworkId(r.caipNetworkId),!this.checkIfSupportedNetwork(r.chainNamespace)&&X.state.enableNetworkSwitch&&!X.state.allowUnsupportedChain&&!At.state.wcBasic&&this.showUnsupportedChainUI()},addCaipNetwork(r){var t;if(!r)return;const e=se.chains.get(r.chainNamespace);e&&((t=e==null?void 0:e.caipNetworks)==null||t.push(r))},async switchActiveNamespace(r){var s;if(!r)return;const e=r!==$.state.activeChain,t=(s=$.getNetworkData(r))==null?void 0:s.caipNetwork,n=$.getCaipNetworkByNamespace(r,t==null?void 0:t.id);e&&n&&await $.switchActiveNetwork(n)},async switchActiveNetwork(r){var s;const e=$.state.chains.get($.state.activeChain);!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=se.activeCaipNetwork)==null?void 0:o.id)}))&&at.goBack();const n=this.getNetworkControllerClient(r.chainNamespace);n&&(await n.switchCaipNetwork(r),mt.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:r.caipNetworkId}}))},getNetworkControllerClient(r){const e=r||se.activeChain,t=se.chains.get(e);if(!t)throw new Error("Chain adapter not found");if(!t.networkControllerClient)throw new Error("NetworkController client not set");return t.networkControllerClient},getConnectionControllerClient(r){const e=r||se.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const t=se.chains.get(e);if(!(t!=null&&t.connectionControllerClient))throw new Error("ConnectionController client not set");return t.connectionControllerClient},getAccountProp(r,e){var s;let t=se.activeChain;if(e&&(t=e),!t)return;const n=(s=se.chains.get(t))==null?void 0:s.accountState;if(n)return n[r]},getNetworkProp(r,e){var n;const t=(n=se.chains.get(e))==null?void 0:n.networkState;if(t)return t[r]},getRequestedCaipNetworks(r){const e=se.chains.get(r),{approvedCaipNetworkIds:t=[],requestedCaipNetworks:n=[]}=(e==null?void 0:e.networkState)||{};return Se.sortRequestedNetworks(t,n)},getAllRequestedCaipNetworks(){const r=[];return se.chains.forEach(e=>{const t=this.getRequestedCaipNetworks(e.namespace);r.push(...t)}),r},setRequestedCaipNetworks(r,e){this.setAdapterNetworkState(e,{requestedCaipNetworks:r})},getAllApprovedCaipNetworkIds(){const r=[];return se.chains.forEach(e=>{const t=this.getApprovedCaipNetworkIds(e.namespace);r.push(...t)}),r},getActiveCaipNetwork(){return se.activeCaipNetwork},getActiveCaipAddress(){return se.activeCaipAddress},getApprovedCaipNetworkIds(r){var n;const e=se.chains.get(r);return((n=e==null?void 0:e.networkState)==null?void 0:n.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(r){const e=this.getNetworkControllerClient(),t=await(e==null?void 0:e.getApprovedCaipNetworksData());this.setAdapterNetworkState(r,{approvedCaipNetworkIds:t==null?void 0:t.approvedCaipNetworkIds,supportsAllNetworks:t==null?void 0:t.supportsAllNetworks})},checkIfSupportedNetwork(r,e){const t=e||se.activeCaipNetwork,n=this.getRequestedCaipNetworks(r);return n.length?n==null?void 0:n.some(s=>s.id===(t==null?void 0:t.id)):!0},checkIfSupportedChainId(r){if(!se.activeChain)return!0;const e=this.getRequestedCaipNetworks(se.activeChain);return e==null?void 0:e.some(t=>t.id===r)},setSmartAccountEnabledNetworks(r,e){this.setAdapterNetworkState(e,{smartAccountEnabledNetworks:r})},checkIfSmartAccountEnabled(){var n;const r=q1.caipNetworkIdToNumber((n=se.activeCaipNetwork)==null?void 0:n.caipNetworkId),e=se.activeChain;if(!e||!r)return!1;const t=this.getNetworkProp("smartAccountEnabledNetworks",e);return!!(t!=null&&t.includes(Number(r)))},getActiveNetworkTokenAddress(){var n,s;const r=((n=se.activeCaipNetwork)==null?void 0:n.chainNamespace)||"eip155",e=((s=se.activeCaipNetwork)==null?void 0:s.id)||1,t=Cr.NATIVE_TOKEN_ADDRESS[r];return`${r}:${e}:${t}`},showUnsupportedChainUI(){Lt.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const r=se.activeCaipNetwork;return!!(r!=null&&r.chainNamespace&&Cr.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(r.chainNamespace))},resetNetwork(r){this.setAdapterNetworkState(r,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(r){const e=r;if(!e)throw new Error("Chain is required to set account prop");se.activeCaipAddress=void 0,this.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),De.removeConnectorId(e)},async disconnect(r){const e=fO(r);try{zv.resetSend();const t=await Promise.allSettled(e.map(async([s,i])=>{var o;try{const{caipAddress:a}=this.getAccountData(s)||{};a&&((o=i.connectionControllerClient)!=null&&o.disconnect)&&await i.connectionControllerClient.disconnect(s),this.resetAccount(s),this.resetNetwork(s)}catch(a){throw new Error(`Failed to disconnect chain ${s}: ${a.message}`)}}));At.resetWcConnection();const n=t.filter(s=>s.status==="rejected");if(n.length>0)throw new Error(n.map(s=>s.reason.message).join(", "));he.deleteConnectedSocialProvider(),r?De.removeConnectorId(r):De.resetConnectorIds(),mt.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:r||"all"}})}catch(t){console.error(t.message||"Failed to disconnect chains"),mt.sendEvent({type:"track",event:"DISCONNECT_ERROR",properties:{message:t.message||"Failed to disconnect chains"}})}},setIsSwitchingNamespace(r){se.isSwitchingNamespace=r},getFirstCaipNetworkSupportsAuthConnector(){var t,n;const r=[];let e;if(se.chains.forEach(s=>{ee.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&r.push(s.namespace)}),r.length>0){const s=r[0];return e=s?(n=(t=se.chains.get(s))==null?void 0:t.caipNetworks)==null?void 0:n[0]:void 0,e}},getAccountData(r){var e;return r?(e=$.state.chains.get(r))==null?void 0:e.accountState:de.state},getNetworkData(r){var t;const e=r||se.activeChain;if(e)return(t=$.state.chains.get(e))==null?void 0:t.networkState},getCaipNetworkByNamespace(r,e){var s,i,o;if(!r)return;const t=$.state.chains.get(r),n=(s=t==null?void 0:t.caipNetworks)==null?void 0:s.find(a=>a.id===e);return n||((i=t==null?void 0:t.networkState)==null?void 0:i.caipNetwork)||((o=t==null?void 0:t.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const r=De.state.filterByNamespace;return(r?[se.chains.get(r)]:Array.from(se.chains.values())).flatMap(t=>(t==null?void 0:t.caipNetworks)||[]).map(t=>t.caipNetworkId)},getCaipNetworks(r){return r?$.getRequestedCaipNetworks(r):$.getAllRequestedCaipNetworks()}},m6={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},_I=Se.getBlockchainApiUrl(),cn=Pt({clientId:null,api:new Kp({baseUrl:_I,clientId:null}),supportedChains:{http:[],ws:[]}}),Ie={state:cn,async get(r){const{st:e,sv:t}=Ie.getSdkProperties(),n=X.state.projectId,s={...r.params||{},st:e,sv:t,projectId:n};return cn.api.get({...r,params:s})},getSdkProperties(){const{sdkType:r,sdkVersion:e}=X.state;return{st:r||"unknown",sv:e||"unknown"}},async isNetworkSupported(r){if(!r)return!1;try{cn.supportedChains.http.length||await Ie.getSupportedNetworks()}catch{return!1}return cn.supportedChains.http.includes(r)},async getSupportedNetworks(){const r=await Ie.get({path:"v1/supported-chains"});return cn.supportedChains=r,r},async fetchIdentity({address:r,caipNetworkId:e}){if(!await Ie.isNetworkSupported(e))return{avatar:"",name:""};const n=he.getIdentityFromCacheForAddress(r);if(n)return n;const s=await Ie.get({path:`/v1/identity/${r}`,params:{sender:$.state.activeCaipAddress?Se.getPlainAddress($.state.activeCaipAddress):void 0}});return he.updateIdentityCache({address:r,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:r,cursor:e,onramp:t,signal:n,cache:s,chainId:i}){var a;return await Ie.isNetworkSupported((a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?Ie.get({path:`/v1/account/${r}/history`,params:{cursor:e,onramp:t,chainId:i},signal:n,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:r,userAddress:e,from:t,to:n,gasPrice:s}){var o;return await Ie.isNetworkSupported((o=$.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Ie.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:r,userAddress:e,from:t,to:n,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:r}){var t;return await Ie.isNetworkSupported((t=$.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?Ie.get({path:"/v1/convert/tokens",params:{chainId:r}}):{tokens:[]}},async fetchTokenPrice({addresses:r}){var t;return await Ie.isNetworkSupported((t=$.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?cn.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:r,projectId:X.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:r,userAddress:e}){var n;return await Ie.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ie.get({path:"/v1/convert/allowance",params:{tokenAddress:r,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:r}){var s;const{st:e,sv:t}=Ie.getSdkProperties();if(!await Ie.isNetworkSupported((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return Ie.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:r,st:e,sv:t}})},async generateSwapCalldata({amount:r,from:e,to:t,userAddress:n,disableEstimate:s}){var o;if(!await Ie.isNetworkSupported((o=$.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return cn.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:r,eip155:{slippage:Cr.CONVERT_SLIPPAGE_TOLERANCE},projectId:X.state.projectId,from:e,to:t,userAddress:n,disableEstimate:s}})},async generateApproveCalldata({from:r,to:e,userAddress:t}){var o;const{st:n,sv:s}=Ie.getSdkProperties();if(!await Ie.isNetworkSupported((o=$.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ie.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:t,from:r,to:e,st:n,sv:s}})},async getBalance(r,e,t){var l;const{st:n,sv:s}=Ie.getSdkProperties();if(!await Ie.isNetworkSupported((l=$.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return ur.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${r}`,a=he.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Ie.get({path:`/v1/account/${r}/balance`,params:{currency:"usd",chainId:e,forceUpdate:t,st:n,sv:s}});return he.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(r){var t;return await Ie.isNetworkSupported((t=$.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?Ie.get({path:`/v1/profile/account/${r}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:r}){var t;return await Ie.isNetworkSupported((t=$.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?Ie.get({path:`/v1/profile/reverse/${r}`,params:{sender:de.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(r){var t;return await Ie.isNetworkSupported((t=$.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?Ie.get({path:`/v1/profile/suggestions/${r}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:r,address:e,message:t,signature:n}){var i;return await Ie.isNetworkSupported((i=$.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?cn.api.post({path:"/v1/profile/account",body:{coin_type:r,address:e,message:t,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:r,partnerUserId:e,defaultNetwork:t,purchaseAmount:n,paymentAmount:s}){var a;return await Ie.isNetworkSupported((a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await cn.api.post({path:"/v1/generators/onrampurl",params:{projectId:X.state.projectId},body:{destinationWallets:r,defaultNetwork:t,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await Ie.isNetworkSupported((e=$.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Ie.get({path:"/v1/onramp/options"})}catch{return m6}},async getOnrampQuote({purchaseCurrency:r,paymentCurrency:e,amount:t,network:n}){var s;try{return await Ie.isNetworkSupported((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await cn.api.post({path:"/v1/onramp/quote",params:{projectId:X.state.projectId},body:{purchaseCurrency:r,paymentCurrency:e,amount:t,network:n}}):null}catch{return{coinbaseFee:{amount:t,currency:e.id},networkFee:{amount:t,currency:e.id},paymentSubtotal:{amount:t,currency:e.id},paymentTotal:{amount:t,currency:e.id},purchaseAmount:{amount:t,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(r){var t;return await Ie.isNetworkSupported((t=$.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?Ie.get({path:`/v1/sessions/${r}`}):[]},async revokeSmartSession(r,e,t){var s;return await Ie.isNetworkSupported((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?cn.api.post({path:`/v1/sessions/${r}/revoke`,params:{projectId:X.state.projectId},body:{pci:e,signature:t}}):{success:!1}},setClientId(r){cn.clientId=r,cn.api=new Kp({baseUrl:_I,clientId:r})}},Sn=Pt({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),de={state:Sn,replaceState(r){r&&Object.assign(Sn,Ua(r))},subscribe(r){return $.subscribeChainProp("accountState",e=>{if(e)return r(e)})},subscribeKey(r,e,t){let n;return $.subscribeChainProp("accountState",s=>{if(s){const i=s[r];n!==i&&(n=i,e(i))}},t)},setStatus(r,e){$.setAccountProp("status",r,e)},getCaipAddress(r){return $.getAccountProp("caipAddress",r)},setCaipAddress(r,e){const t=r?Se.getPlainAddress(r):void 0;e===$.state.activeChain&&($.state.activeCaipAddress=r),$.setAccountProp("caipAddress",r,e),$.setAccountProp("address",t,e)},setBalance(r,e,t){$.setAccountProp("balance",r,t),$.setAccountProp("balanceSymbol",e,t)},setProfileName(r,e){$.setAccountProp("profileName",r,e)},setProfileImage(r,e){$.setAccountProp("profileImage",r,e)},setUser(r,e){$.setAccountProp("user",r,e)},setAddressExplorerUrl(r,e){$.setAccountProp("addressExplorerUrl",r,e)},setSmartAccountDeployed(r,e){$.setAccountProp("smartAccountDeployed",r,e)},setCurrentTab(r){$.setAccountProp("currentTab",r,$.state.activeChain)},setTokenBalance(r,e){r&&$.setAccountProp("tokenBalance",r,e)},setShouldUpdateToAddress(r,e){$.setAccountProp("shouldUpdateToAddress",r,e)},setAllAccounts(r,e){$.setAccountProp("allAccounts",r,e)},addAddressLabel(r,e,t){const n=$.getAccountProp("addressLabels",t)||new Map;n.set(r,e),$.setAccountProp("addressLabels",n,t)},removeAddressLabel(r,e){const t=$.getAccountProp("addressLabels",e)||new Map;t.delete(r),$.setAccountProp("addressLabels",t,e)},setConnectedWalletInfo(r,e){$.setAccountProp("connectedWalletInfo",r,e,!1)},setPreferredAccountType(r,e){$.setAccountProp("preferredAccountTypes",{...Sn.preferredAccountTypes,[e]:r},e)},setPreferredAccountTypes(r){Sn.preferredAccountTypes=r},setSocialProvider(r,e){r&&$.setAccountProp("socialProvider",r,e)},setSocialWindow(r,e){$.setAccountProp("socialWindow",r?Ua(r):void 0,e)},setFarcasterUrl(r,e){$.setAccountProp("farcasterUrl",r,e)},async fetchTokenBalance(r){var i,o;Sn.balanceLoading=!0;const e=(i=$.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,t=(o=$.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=$.state.activeCaipAddress,s=n?Se.getPlainAddress(n):void 0;if(Sn.lastRetry&&!Se.isAllowedRetry(Sn.lastRetry,30*Cr.ONE_SEC_MS))return Sn.balanceLoading=!1,[];try{if(s&&e&&t){const c=(await Ie.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return this.setTokenBalance(c,t),Sn.lastRetry=void 0,Sn.balanceLoading=!1,c}}catch(a){Sn.lastRetry=Date.now(),r==null||r(a),ur.showError("Token Balance Unavailable")}finally{Sn.balanceLoading=!1}return[]},resetAccount(r){$.resetAccount(r)}},Hr=Pt({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),Lt={state:Hr,subscribe(r){return Mr(Hr,()=>r(Hr))},subscribeKey(r,e){return tn(Hr,r,e)},async open(r){var s;const e=de.state.status==="connected";At.state.wcBasic?Te.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Te.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),r!=null&&r.namespace?(await $.switchActiveNamespace(r.namespace),Lt.setLoading(!0,r.namespace)):Lt.setLoading(!0),De.setFilterByNamespace(r==null?void 0:r.namespace);const t=(s=$.getAccountData(r==null?void 0:r.namespace))==null?void 0:s.caipAddress;$.state.noAdapters&&!t?Se.isMobile()?at.reset("AllWallets"):at.reset("ConnectingWalletConnectBasic"):r!=null&&r.view?at.reset(r.view,r.data):t?at.reset("Account"):at.reset("Connect"),Hr.open=!0,qs.set({open:!0}),mt.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!t}})},close(){const r=X.state.enableEmbedded,e=!!$.state.activeCaipAddress;Hr.open&&mt.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Hr.open=!1,Lt.clearLoading(),r?e?at.replace("Account"):at.push("Connect"):qs.set({open:!1}),At.resetUri()},setLoading(r,e){e&&Hr.loadingNamespaceMap.set(e,r),Hr.loading=r,qs.set({loading:r})},clearLoading(){Hr.loadingNamespaceMap.clear(),Hr.loading=!1},shake(){Hr.shake||(Hr.shake=!0,setTimeout(()=>{Hr.shake=!1},500))}},Wv=2147483648,y6={convertEVMChainIdToCoinType(r){if(r>=Wv)throw new Error("Invalid chainId");return(Wv|r)>>>0}},Tn=Pt({suggestions:[],loading:!1}),II={state:Tn,subscribe(r){return Mr(Tn,()=>r(Tn))},subscribeKey(r,e){return tn(Tn,r,e)},async resolveName(r){var e,t;try{return await Ie.lookupEnsName(r)}catch(n){const s=n;throw new Error(((t=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:t.description)||"Error resolving name")}},async isNameRegistered(r){try{return await Ie.lookupEnsName(r),!0}catch{return!1}},async getSuggestions(r){try{Tn.loading=!0,Tn.suggestions=[];const e=await Ie.getEnsNameSuggestions(r);return Tn.suggestions=e.suggestions.map(t=>({...t,name:t.name}))||[],Tn.suggestions}catch(e){const t=this.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(t)}finally{Tn.loading=!1}},async getNamesForAddress(r){try{if(!$.state.activeCaipNetwork)return[];const t=he.getEnsFromCacheForAddress(r);if(t)return t;const n=await Ie.reverseLookupEnsName({address:r});return he.updateEnsCache({address:r,ens:n,timestamp:Date.now()}),n}catch(e){const t=this.parseEnsApiError(e,"Error fetching names for address");throw new Error(t)}},async registerName(r){const e=$.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const t=de.state.address,n=De.getAuthConnector();if(!t||!n)throw new Error("Address or auth connector not found");Tn.loading=!0;try{const s=JSON.stringify({name:r,attributes:{},timestamp:Math.floor(Date.now()/1e3)});at.pushTransactionStack({view:"RegisterAccountNameSuccess",goBack:!1,replace:!0,onCancel(){Tn.loading=!1}});const i=await At.signMessage(s),o=e.id;if(!o)throw new Error("Network not found");const a=y6.convertEVMChainIdToCoinType(Number(o));await Ie.registerEnsName({coinType:a,address:t,signature:i,message:s}),de.setProfileName(r,e.chainNamespace),at.replace("RegisterAccountNameSuccess")}catch(s){const i=this.parseEnsApiError(s,`Error registering name ${r}`);throw at.replace("RegisterAccountName"),new Error(i)}finally{Tn.loading=!1}},validateName(r){return/^[a-zA-Z0-9-]{4,}$/u.test(r)},parseEnsApiError(r,e){var n,s;const t=r;return((s=(n=t==null?void 0:t.reasons)==null?void 0:n[0])==null?void 0:s.description)||e}},gt={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},$s={ConnectorExplorerIds:{[ee.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ee.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ee.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[ee.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[ee.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[gt.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[gt.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[gt.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[gt.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[gt.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[gt.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[gt.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[gt.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[gt.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[gt.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[gt.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ee.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ee.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ee.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ee.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ee.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ee.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ee.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ee.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ee.CONNECTOR_ID.COINBASE]:"Coinbase",[ee.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ee.CONNECTOR_ID.LEDGER]:"Ledger",[ee.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[ee.CONNECTOR_ID.INJECTED]:"INJECTED",[ee.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[ee.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[ee.CONNECTOR_ID.AUTH]:"AUTH"}},hg={getCaipTokens(r){if(!r)return;const e={};return Object.entries(r).forEach(([t,n])=>{e[`${gt.EIP155}:${t}`]=n}),e},isLowerCaseMatch(r,e){return(r==null?void 0:r.toLowerCase())===(e==null?void 0:e.toLowerCase())}},Gu={UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${w6()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},SOCIALS_TIMEOUT:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function w6(){return typeof window<"u"}const b6={createLogger(r,e="error"){const t=du({level:e}),{logger:n}=Rw({opts:t});return n.error=(...s)=>{for(const i of s)if(i instanceof Error){r(i,...s);return}r(void 0,...s)},n}},E6="rpc.walletconnect.org";function Gv(r,e){const t=new URL("https://rpc.walletconnect.org/v1/");return t.searchParams.set("chainId",r),t.searchParams.set("projectId",e),t.toString()}const _m=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Dc={extendRpcUrlWithProjectId(r,e){let t=!1;try{t=new URL(r).host===E6}catch{t=!1}if(t){const n=new URL(r);return n.searchParams.has("projectId")||n.searchParams.set("projectId",e),n.toString()}return r},isCaipNetwork(r){return"chainNamespace"in r&&"caipNetworkId"in r},getChainNamespace(r){return this.isCaipNetwork(r)?r.chainNamespace:ee.CHAIN.EVM},getCaipNetworkId(r){return this.isCaipNetwork(r)?r.caipNetworkId:`${ee.CHAIN.EVM}:${r.id}`},getDefaultRpcUrl(r,e,t){var s,i,o;const n=(o=(i=(s=r.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return _m.includes(e)?Gv(e,t):n||""},extendCaipNetwork(r,{customNetworkImageUrls:e,projectId:t,customRpcUrls:n}){var d,f,p,g,y;const s=this.getChainNamespace(r),i=this.getCaipNetworkId(r),o=(d=r.rpcUrls.default.http)==null?void 0:d[0],a=this.getDefaultRpcUrl(r,i,t),c=((g=(p=(f=r==null?void 0:r.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((y=n==null?void 0:n[i])==null?void 0:y.map(C=>C.url))||[],u=[...l,a],h=[...l];return c&&!h.includes(c)&&h.push(c),{...r,chainNamespace:s,caipNetworkId:i,assets:{imageId:$s.NetworkImageIds[r.id],imageUrl:e==null?void 0:e[r.id]},rpcUrls:{...r.rpcUrls,default:{http:u},chainDefault:{http:h}}}},extendCaipNetworks(r,{customNetworkImageUrls:e,projectId:t,customRpcUrls:n}){return r.map(s=>Dc.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:n,projectId:t}))},getViemTransport(r,e,t){var s,i,o;const n=[];return t==null||t.forEach(a=>{n.push(mf(a.url,a.config))}),_m.includes(r.caipNetworkId)&&n.push(mf(Gv(r.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=r==null?void 0:r.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{n.push(mf(a))}),Hv(n)},extendWagmiTransports(r,e,t){if(_m.includes(r.caipNetworkId)){const n=this.getDefaultRpcUrl(r,r.caipNetworkId,e);return Hv([t,mf(n)])}return t},getUnsupportedNetwork(r){return{id:r.split(":")[1],caipNetworkId:r,name:ee.UNSUPPORTED_NETWORK_NAME,chainNamespace:r.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(r){var c;const e=he.getActiveCaipNetworkId(),t=$.getAllRequestedCaipNetworks(),n=Array.from(((c=$.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?n.includes(s):!1,o=t==null?void 0:t.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||r||(t==null?void 0:t[0])}},cp={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},Vr=Pt({providers:{...cp},providerIds:{...cp}}),Ze={state:Vr,subscribeKey(r,e){return tn(Vr,r,e)},subscribe(r){return Mr(Vr,()=>{r(Vr)})},subscribeProviders(r){return Mr(Vr.providers,()=>r(Vr.providers))},setProvider(r,e){e&&(Vr.providers[r]=Ua(e))},getProvider(r){return Vr.providers[r]},setProviderId(r,e){e&&(Vr.providerIds[r]=e)},getProviderId(r){if(r)return Vr.providerIds[r]},reset(){Vr.providers={...cp},Vr.providerIds={...cp}},resetChain(r){Vr.providers[r]=void 0,Vr.providerIds[r]=void 0}},Kv={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},ar={set(r,e){bn.isClient&&localStorage.setItem(`${ge.STORAGE_KEY}${r}`,e)},get(r){return bn.isClient?localStorage.getItem(`${ge.STORAGE_KEY}${r}`):null},delete(r,e){bn.isClient&&(e?localStorage.removeItem(r):localStorage.removeItem(`${ge.STORAGE_KEY}${r}`))}},wf=30*1e3,bn={checkIfAllowedToTriggerEmail(){const r=ar.get(ge.LAST_EMAIL_LOGIN_TIME);if(r){const e=Date.now()-Number(r);if(e<wf){const t=Math.ceil((wf-e)/1e3);throw new Error(`Please try again after ${t} seconds`)}}},getTimeToNextEmailLogin(){const r=ar.get(ge.LAST_EMAIL_LOGIN_TIME);if(r){const e=Date.now()-Number(r);if(e<wf)return Math.ceil((wf-e)/1e3)}return 0},checkIfRequestExists(r){return Ht.NOT_SAFE_RPC_METHODS.includes(r.method)||Ht.SAFE_RPC_METHODS.includes(r.method)},getResponseType(r){return typeof r=="string"&&((r==null?void 0:r.match(Kv.transactionHash))||(r==null?void 0:r.match(Kv.signedMessage)))?ge.RPC_RESPONSE_TYPE_TX:ge.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(r){return Ht.SAFE_RPC_METHODS.includes(r.method)},isClient:typeof window<"u"};var Xe;(function(r){r.assertEqual=s=>s;function e(s){}r.assertIs=e;function t(s){throw new Error}r.assertNever=t,r.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},r.getValidEnumValues=s=>{const i=r.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return r.objectValues(o)},r.objectValues=s=>r.objectKeys(s).map(function(i){return s[i]}),r.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},r.find=(s,i)=>{for(const o of s)if(i(o))return o},r.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}r.joinValues=n,r.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Xe||(Xe={}));var jy;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(jy||(jy={}));const oe=Xe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Zi=r=>{switch(typeof r){case"undefined":return oe.undefined;case"string":return oe.string;case"number":return isNaN(r)?oe.nan:oe.number;case"boolean":return oe.boolean;case"function":return oe.function;case"bigint":return oe.bigint;case"symbol":return oe.symbol;case"object":return Array.isArray(r)?oe.array:r===null?oe.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?oe.promise:typeof Map<"u"&&r instanceof Map?oe.map:typeof Set<"u"&&r instanceof Set?oe.set:typeof Date<"u"&&r instanceof Date?oe.date:oe.object;default:return oe.unknown}},Z=Xe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),v6=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class fs extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(t(o));else{let a=n,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(t(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Xe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}fs.create=r=>new fs(r);const Vh=(r,e)=>{let t;switch(r.code){case Z.invalid_type:r.received===oe.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case Z.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,Xe.jsonStringifyReplacer)}`;break;case Z.unrecognized_keys:t=`Unrecognized key(s) in object: ${Xe.joinValues(r.keys,", ")}`;break;case Z.invalid_union:t="Invalid input";break;case Z.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Xe.joinValues(r.options)}`;break;case Z.invalid_enum_value:t=`Invalid enum value. Expected ${Xe.joinValues(r.options)}, received '${r.received}'`;break;case Z.invalid_arguments:t="Invalid function arguments";break;case Z.invalid_return_type:t="Invalid function return type";break;case Z.invalid_date:t="Invalid date";break;case Z.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:Xe.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case Z.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case Z.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case Z.custom:t="Invalid input";break;case Z.invalid_intersection_types:t="Intersection results could not be merged";break;case Z.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case Z.not_finite:t="Number must be finite";break;default:t=e.defaultError,Xe.assertNever(r)}return{message:t}};let NI=Vh;function A6(r){NI=r}function lp(){return NI}const up=r=>{const{data:e,path:t,errorMaps:n,issueData:s}=r,i=[...t,...s.path||[]],o={...s,path:i};let a="";const c=n.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},C6=[];function le(r,e){const t=up({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,lp(),Vh].filter(n=>!!n)});r.common.issues.push(t)}class Ir{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const s of t){if(s.status==="aborted")return Pe;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const s of t)n.push({key:await s.key,value:await s.value});return Ir.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const s of t){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Pe;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const Pe=Object.freeze({status:"aborted"}),SI=r=>({status:"dirty",value:r}),$r=r=>({status:"valid",value:r}),Hy=r=>r.status==="aborted",Vy=r=>r.status==="dirty",qh=r=>r.status==="valid",hp=r=>typeof Promise<"u"&&r instanceof Promise;var ve;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ve||(ve={}));class Ks{constructor(e,t,n,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Jv=(r,e)=>{if(qh(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new fs(r.common.issues);return this._error=t,this._error}}};function ke(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:s}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:t??a.defaultError},description:s}}class Fe{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Zi(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Zi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ir,ctx:{common:e.parent.common,data:e.data,parsedType:Zi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(hp(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const s={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zi(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Jv(s,i)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zi(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(hp(s)?s:Promise.resolve(s));return Jv(n,i)}refine(e,t){const n=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Z.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof t=="function"?t(n,s):t),!1))}_refinement(e){return new gs({schema:this,typeName:_e.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Oi.create(this,this._def)}nullable(){return Va.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ps.create(this,this._def)}promise(){return tu.create(this,this._def)}or(e){return Kh.create([this,e],this._def)}and(e){return Jh.create(this,e,this._def)}transform(e){return new gs({...ke(this._def),schema:this,typeName:_e.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new ed({...ke(this._def),innerType:this,defaultValue:t,typeName:_e.ZodDefault})}brand(){return new OI({typeName:_e.ZodBranded,type:this,...ke(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new gp({...ke(this._def),innerType:this,catchValue:t,typeName:_e.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Hd.create(this,e)}readonly(){return yp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const _6=/^c[^\s-]{8,}$/i,I6=/^[a-z][a-z0-9]*$/,N6=/^[0-9A-HJKMNP-TV-Z]{26}$/,S6=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,T6=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,O6="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Im;const P6=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,x6=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,R6=r=>r.precision?r.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}Z$`):r.precision===0?r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function k6(r,e){return!!((e==="v4"||!e)&&P6.test(r)||(e==="v6"||!e)&&x6.test(r))}class hs extends Fe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==oe.string){const i=this._getOrReturnCtx(e);return le(i,{code:Z.invalid_type,expected:oe.string,received:i.parsedType}),Pe}const n=new Ir;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),le(s,{code:Z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),le(s,{code:Z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?le(s,{code:Z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&le(s,{code:Z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")T6.test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"email",code:Z.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Im||(Im=new RegExp(O6,"u")),Im.test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"emoji",code:Z.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")S6.test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"uuid",code:Z.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")_6.test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"cuid",code:Z.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")I6.test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"cuid2",code:Z.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")N6.test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"ulid",code:Z.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),le(s,{validation:"url",code:Z.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"regex",code:Z.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),le(s,{code:Z.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),le(s,{code:Z.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),le(s,{code:Z.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?R6(i).test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{code:Z.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="ip"?k6(e.data,i.version)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"ip",code:Z.invalid_string,message:i.message}),n.dirty()):Xe.assertNever(i);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(s=>e.test(s),{validation:t,code:Z.invalid_string,...ve.errToObj(n)})}_addCheck(e){return new hs({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ve.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ve.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ve.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ve.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ve.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ve.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ve.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ve.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,...ve.errToObj(e==null?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ve.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...ve.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ve.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ve.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ve.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ve.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ve.errToObj(t)})}nonempty(e){return this.min(1,ve.errToObj(e))}trim(){return new hs({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new hs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new hs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}hs.create=r=>{var e;return new hs({checks:[],typeName:_e.ZodString,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...ke(r)})};function D6(r,e){const t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=t>n?t:n,i=parseInt(r.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class No extends Fe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==oe.number){const i=this._getOrReturnCtx(e);return le(i,{code:Z.invalid_type,expected:oe.number,received:i.parsedType}),Pe}let n;const s=new Ir;for(const i of this._def.checks)i.kind==="int"?Xe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),le(n,{code:Z.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),le(n,{code:Z.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),le(n,{code:Z.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?D6(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),le(n,{code:Z.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),le(n,{code:Z.not_finite,message:i.message}),s.dirty()):Xe.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ve.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ve.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ve.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ve.toString(t))}setLimit(e,t,n,s){return new No({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ve.toString(s)}]})}_addCheck(e){return new No({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ve.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ve.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ve.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ve.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ve.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ve.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Xe.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}No.create=r=>new No({checks:[],typeName:_e.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...ke(r)});class So extends Fe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==oe.bigint){const i=this._getOrReturnCtx(e);return le(i,{code:Z.invalid_type,expected:oe.bigint,received:i.parsedType}),Pe}let n;const s=new Ir;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),le(n,{code:Z.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),le(n,{code:Z.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),le(n,{code:Z.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Xe.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ve.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ve.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ve.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ve.toString(t))}setLimit(e,t,n,s){return new So({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ve.toString(s)}]})}_addCheck(e){return new So({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ve.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ve.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}So.create=r=>{var e;return new So({checks:[],typeName:_e.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...ke(r)})};class zh extends Fe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==oe.boolean){const n=this._getOrReturnCtx(e);return le(n,{code:Z.invalid_type,expected:oe.boolean,received:n.parsedType}),Pe}return $r(e.data)}}zh.create=r=>new zh({typeName:_e.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...ke(r)});class ja extends Fe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==oe.date){const i=this._getOrReturnCtx(e);return le(i,{code:Z.invalid_type,expected:oe.date,received:i.parsedType}),Pe}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return le(i,{code:Z.invalid_date}),Pe}const n=new Ir;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),le(s,{code:Z.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),le(s,{code:Z.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Xe.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ja({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ve.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ve.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}ja.create=r=>new ja({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:_e.ZodDate,...ke(r)});class dp extends Fe{_parse(e){if(this._getType(e)!==oe.symbol){const n=this._getOrReturnCtx(e);return le(n,{code:Z.invalid_type,expected:oe.symbol,received:n.parsedType}),Pe}return $r(e.data)}}dp.create=r=>new dp({typeName:_e.ZodSymbol,...ke(r)});class Wh extends Fe{_parse(e){if(this._getType(e)!==oe.undefined){const n=this._getOrReturnCtx(e);return le(n,{code:Z.invalid_type,expected:oe.undefined,received:n.parsedType}),Pe}return $r(e.data)}}Wh.create=r=>new Wh({typeName:_e.ZodUndefined,...ke(r)});class Gh extends Fe{_parse(e){if(this._getType(e)!==oe.null){const n=this._getOrReturnCtx(e);return le(n,{code:Z.invalid_type,expected:oe.null,received:n.parsedType}),Pe}return $r(e.data)}}Gh.create=r=>new Gh({typeName:_e.ZodNull,...ke(r)});class eu extends Fe{constructor(){super(...arguments),this._any=!0}_parse(e){return $r(e.data)}}eu.create=r=>new eu({typeName:_e.ZodAny,...ke(r)});class xa extends Fe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return $r(e.data)}}xa.create=r=>new xa({typeName:_e.ZodUnknown,...ke(r)});class ki extends Fe{_parse(e){const t=this._getOrReturnCtx(e);return le(t,{code:Z.invalid_type,expected:oe.never,received:t.parsedType}),Pe}}ki.create=r=>new ki({typeName:_e.ZodNever,...ke(r)});class fp extends Fe{_parse(e){if(this._getType(e)!==oe.undefined){const n=this._getOrReturnCtx(e);return le(n,{code:Z.invalid_type,expected:oe.void,received:n.parsedType}),Pe}return $r(e.data)}}fp.create=r=>new fp({typeName:_e.ZodVoid,...ke(r)});class ps extends Fe{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==oe.array)return le(t,{code:Z.invalid_type,expected:oe.array,received:t.parsedType}),Pe;if(s.exactLength!==null){const o=t.data.length>s.exactLength.value,a=t.data.length<s.exactLength.value;(o||a)&&(le(t,{code:o?Z.too_big:Z.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(le(t,{code:Z.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(le(t,{code:Z.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>s.type._parseAsync(new Ks(t,o,t.path,a)))).then(o=>Ir.mergeArray(n,o));const i=[...t.data].map((o,a)=>s.type._parseSync(new Ks(t,o,t.path,a)));return Ir.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new ps({...this._def,minLength:{value:e,message:ve.toString(t)}})}max(e,t){return new ps({...this._def,maxLength:{value:e,message:ve.toString(t)}})}length(e,t){return new ps({...this._def,exactLength:{value:e,message:ve.toString(t)}})}nonempty(e){return this.min(1,e)}}ps.create=(r,e)=>new ps({type:r,minLength:null,maxLength:null,exactLength:null,typeName:_e.ZodArray,...ke(e)});function Uc(r){if(r instanceof Tt){const e={};for(const t in r.shape){const n=r.shape[t];e[t]=Oi.create(Uc(n))}return new Tt({...r._def,shape:()=>e})}else return r instanceof ps?new ps({...r._def,type:Uc(r.element)}):r instanceof Oi?Oi.create(Uc(r.unwrap())):r instanceof Va?Va.create(Uc(r.unwrap())):r instanceof Js?Js.create(r.items.map(e=>Uc(e))):r}class Tt extends Fe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Xe.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==oe.object){const l=this._getOrReturnCtx(e);return le(l,{code:Z.invalid_type,expected:oe.object,received:l.parsedType}),Pe}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ki&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],h=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Ks(s,h,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof ki){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(le(s,{code:Z.unrecognized_keys,keys:a}),n.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const h=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Ks(s,h,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const h=await u.key;l.push({key:h,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>Ir.mergeObjectSync(n,l)):Ir.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return ve.errToObj,new Tt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,n).message)!==null&&o!==void 0?o:n.defaultError;return t.code==="unrecognized_keys"?{message:(a=ve.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Tt({...this._def,unknownKeys:"strip"})}passthrough(){return new Tt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Tt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Tt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:_e.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Tt({...this._def,catchall:e})}pick(e){const t={};return Xe.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new Tt({...this._def,shape:()=>t})}omit(e){const t={};return Xe.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new Tt({...this._def,shape:()=>t})}deepPartial(){return Uc(this)}partial(e){const t={};return Xe.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?t[n]=s:t[n]=s.optional()}),new Tt({...this._def,shape:()=>t})}required(e){const t={};return Xe.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Oi;)i=i._def.innerType;t[n]=i}}),new Tt({...this._def,shape:()=>t})}keyof(){return TI(Xe.objectKeys(this.shape))}}Tt.create=(r,e)=>new Tt({shape:()=>r,unknownKeys:"strip",catchall:ki.create(),typeName:_e.ZodObject,...ke(e)});Tt.strictCreate=(r,e)=>new Tt({shape:()=>r,unknownKeys:"strict",catchall:ki.create(),typeName:_e.ZodObject,...ke(e)});Tt.lazycreate=(r,e)=>new Tt({shape:r,unknownKeys:"strip",catchall:ki.create(),typeName:_e.ZodObject,...ke(e)});class Kh extends Fe{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new fs(a.ctx.common.issues));return le(t,{code:Z.invalid_union,unionErrors:o}),Pe}if(t.common.async)return Promise.all(n.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of n){const l={...t,common:{...t.common,issues:[]},parent:null},u=c._parseSync({data:t.data,path:t.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new fs(c));return le(t,{code:Z.invalid_union,unionErrors:a}),Pe}}get options(){return this._def.options}}Kh.create=(r,e)=>new Kh({options:r,typeName:_e.ZodUnion,...ke(e)});const jf=r=>r instanceof Yh?jf(r.schema):r instanceof gs?jf(r.innerType()):r instanceof Zh?[r.value]:r instanceof To?r.options:r instanceof Xh?Object.keys(r.enum):r instanceof ed?jf(r._def.innerType):r instanceof Wh?[void 0]:r instanceof Gh?[null]:null;class dg extends Fe{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==oe.object)return le(t,{code:Z.invalid_type,expected:oe.object,received:t.parsedType}),Pe;const n=this.discriminator,s=t.data[n],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(le(t,{code:Z.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Pe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const s=new Map;for(const i of t){const o=jf(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new dg({typeName:_e.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...ke(n)})}}function qy(r,e){const t=Zi(r),n=Zi(e);if(r===e)return{valid:!0,data:r};if(t===oe.object&&n===oe.object){const s=Xe.objectKeys(e),i=Xe.objectKeys(r).filter(a=>s.indexOf(a)!==-1),o={...r,...e};for(const a of i){const c=qy(r[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(t===oe.array&&n===oe.array){if(r.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<r.length;i++){const o=r[i],a=e[i],c=qy(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return t===oe.date&&n===oe.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class Jh extends Fe{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(Hy(i)||Hy(o))return Pe;const a=qy(i.value,o.value);return a.valid?((Vy(i)||Vy(o))&&t.dirty(),{status:t.value,value:a.data}):(le(n,{code:Z.invalid_intersection_types}),Pe)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Jh.create=(r,e,t)=>new Jh({left:r,right:e,typeName:_e.ZodIntersection,...ke(t)});class Js extends Fe{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.array)return le(n,{code:Z.invalid_type,expected:oe.array,received:n.parsedType}),Pe;if(n.data.length<this._def.items.length)return le(n,{code:Z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Pe;!this._def.rest&&n.data.length>this._def.items.length&&(le(n,{code:Z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Ks(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>Ir.mergeArray(t,o)):Ir.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new Js({...this._def,rest:e})}}Js.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Js({items:r,typeName:_e.ZodTuple,rest:null,...ke(e)})};class Qh extends Fe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.object)return le(n,{code:Z.invalid_type,expected:oe.object,received:n.parsedType}),Pe;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in n.data)s.push({key:i._parse(new Ks(n,a,n.path,a)),value:o._parse(new Ks(n,n.data[a],n.path,a))});return n.common.async?Ir.mergeObjectAsync(t,s):Ir.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof Fe?new Qh({keyType:e,valueType:t,typeName:_e.ZodRecord,...ke(n)}):new Qh({keyType:hs.create(),valueType:e,typeName:_e.ZodRecord,...ke(t)})}}class pp extends Fe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.map)return le(n,{code:Z.invalid_type,expected:oe.map,received:n.parsedType}),Pe;const s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,c],l)=>({key:s._parse(new Ks(n,a,n.path,[l,"key"])),value:i._parse(new Ks(n,c,n.path,[l,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Pe;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(l.value,u.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Pe;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(l.value,u.value)}return{status:t.value,value:a}}}}pp.create=(r,e,t)=>new pp({valueType:e,keyType:r,typeName:_e.ZodMap,...ke(t)});class Ha extends Fe{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.set)return le(n,{code:Z.invalid_type,expected:oe.set,received:n.parsedType}),Pe;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(le(n,{code:Z.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(le(n,{code:Z.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Pe;u.status==="dirty"&&t.dirty(),l.add(u.value)}return{status:t.value,value:l}}const a=[...n.data.values()].map((c,l)=>i._parse(new Ks(n,c,n.path,l)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,t){return new Ha({...this._def,minSize:{value:e,message:ve.toString(t)}})}max(e,t){return new Ha({...this._def,maxSize:{value:e,message:ve.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Ha.create=(r,e)=>new Ha({valueType:r,minSize:null,maxSize:null,typeName:_e.ZodSet,...ke(e)});class Kc extends Fe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==oe.function)return le(t,{code:Z.invalid_type,expected:oe.function,received:t.parsedType}),Pe;function n(a,c){return up({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,lp(),Vh].filter(l=>!!l),issueData:{code:Z.invalid_arguments,argumentsError:c}})}function s(a,c){return up({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,lp(),Vh].filter(l=>!!l),issueData:{code:Z.invalid_return_type,returnTypeError:c}})}const i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof tu){const a=this;return $r(async function(...c){const l=new fs([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(n(c,f)),l}),h=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(h,i).catch(f=>{throw l.addIssue(s(h,f)),l})})}else{const a=this;return $r(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new fs([n(c,l.error)]);const u=Reflect.apply(o,this,l.data),h=a._def.returns.safeParse(u,i);if(!h.success)throw new fs([s(u,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Kc({...this._def,args:Js.create(e).rest(xa.create())})}returns(e){return new Kc({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new Kc({args:e||Js.create([]).rest(xa.create()),returns:t||xa.create(),typeName:_e.ZodFunction,...ke(n)})}}class Yh extends Fe{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Yh.create=(r,e)=>new Yh({getter:r,typeName:_e.ZodLazy,...ke(e)});class Zh extends Fe{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return le(t,{received:t.data,code:Z.invalid_literal,expected:this._def.value}),Pe}return{status:"valid",value:e.data}}get value(){return this._def.value}}Zh.create=(r,e)=>new Zh({value:r,typeName:_e.ZodLiteral,...ke(e)});function TI(r,e){return new To({values:r,typeName:_e.ZodEnum,...ke(e)})}class To extends Fe{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return le(t,{expected:Xe.joinValues(n),received:t.parsedType,code:Z.invalid_type}),Pe}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),n=this._def.values;return le(t,{received:t.data,code:Z.invalid_enum_value,options:n}),Pe}return $r(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return To.create(e)}exclude(e){return To.create(this.options.filter(t=>!e.includes(t)))}}To.create=TI;class Xh extends Fe{_parse(e){const t=Xe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==oe.string&&n.parsedType!==oe.number){const s=Xe.objectValues(t);return le(n,{expected:Xe.joinValues(s),received:n.parsedType,code:Z.invalid_type}),Pe}if(t.indexOf(e.data)===-1){const s=Xe.objectValues(t);return le(n,{received:n.data,code:Z.invalid_enum_value,options:s}),Pe}return $r(e.data)}get enum(){return this._def.values}}Xh.create=(r,e)=>new Xh({values:r,typeName:_e.ZodNativeEnum,...ke(e)});class tu extends Fe{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==oe.promise&&t.common.async===!1)return le(t,{code:Z.invalid_type,expected:oe.promise,received:t.parsedType}),Pe;const n=t.parsedType===oe.promise?t.data:Promise.resolve(t.data);return $r(n.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}tu.create=(r,e)=>new tu({type:r,typeName:_e.ZodPromise,...ke(e)});class gs extends Fe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===_e.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{le(n,o),o.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(n.data,i);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Pe:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Pe:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!qh(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>qh(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:t.value,value:a})):o);Xe.assertNever(s)}}gs.create=(r,e,t)=>new gs({schema:r,typeName:_e.ZodEffects,effect:e,...ke(t)});gs.createWithPreprocess=(r,e,t)=>new gs({schema:e,effect:{type:"preprocess",transform:r},typeName:_e.ZodEffects,...ke(t)});class Oi extends Fe{_parse(e){return this._getType(e)===oe.undefined?$r(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Oi.create=(r,e)=>new Oi({innerType:r,typeName:_e.ZodOptional,...ke(e)});class Va extends Fe{_parse(e){return this._getType(e)===oe.null?$r(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Va.create=(r,e)=>new Va({innerType:r,typeName:_e.ZodNullable,...ke(e)});class ed extends Fe{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===oe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ed.create=(r,e)=>new ed({innerType:r,typeName:_e.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ke(e)});class gp extends Fe{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return hp(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new fs(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new fs(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}gp.create=(r,e)=>new gp({innerType:r,typeName:_e.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ke(e)});class mp extends Fe{_parse(e){if(this._getType(e)!==oe.nan){const n=this._getOrReturnCtx(e);return le(n,{code:Z.invalid_type,expected:oe.nan,received:n.parsedType}),Pe}return{status:"valid",value:e.data}}}mp.create=r=>new mp({typeName:_e.ZodNaN,...ke(r)});const U6=Symbol("zod_brand");class OI extends Fe{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Hd extends Fe{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Pe:i.status==="dirty"?(t.dirty(),SI(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Pe:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,t){return new Hd({in:e,out:t,typeName:_e.ZodPipeline})}}class yp extends Fe{_parse(e){const t=this._def.innerType._parse(e);return qh(t)&&(t.value=Object.freeze(t.value)),t}}yp.create=(r,e)=>new yp({innerType:r,typeName:_e.ZodReadonly,...ke(e)});const PI=(r,e={},t)=>r?eu.create().superRefine((n,s)=>{var i,o;if(!r(n)){const a=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:t)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):eu.create(),L6={object:Tt.lazycreate};var _e;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(_e||(_e={}));const B6=(r,e={message:`Input not instance of ${r.name}`})=>PI(t=>t instanceof r,e),xI=hs.create,RI=No.create,M6=mp.create,$6=So.create,kI=zh.create,F6=ja.create,j6=dp.create,H6=Wh.create,V6=Gh.create,q6=eu.create,z6=xa.create,W6=ki.create,G6=fp.create,K6=ps.create,J6=Tt.create,Q6=Tt.strictCreate,Y6=Kh.create,Z6=dg.create,X6=Jh.create,e9=Js.create,t9=Qh.create,r9=pp.create,n9=Ha.create,s9=Kc.create,i9=Yh.create,o9=Zh.create,a9=To.create,c9=Xh.create,l9=tu.create,Qv=gs.create,u9=Oi.create,h9=Va.create,d9=gs.createWithPreprocess,f9=Hd.create,p9=()=>xI().optional(),g9=()=>RI().optional(),m9=()=>kI().optional(),y9={string:r=>hs.create({...r,coerce:!0}),number:r=>No.create({...r,coerce:!0}),boolean:r=>zh.create({...r,coerce:!0}),bigint:r=>So.create({...r,coerce:!0}),date:r=>ja.create({...r,coerce:!0})},w9=Pe;var O=Object.freeze({__proto__:null,defaultErrorMap:Vh,setErrorMap:A6,getErrorMap:lp,makeIssue:up,EMPTY_PATH:C6,addIssueToContext:le,ParseStatus:Ir,INVALID:Pe,DIRTY:SI,OK:$r,isAborted:Hy,isDirty:Vy,isValid:qh,isAsync:hp,get util(){return Xe},get objectUtil(){return jy},ZodParsedType:oe,getParsedType:Zi,ZodType:Fe,ZodString:hs,ZodNumber:No,ZodBigInt:So,ZodBoolean:zh,ZodDate:ja,ZodSymbol:dp,ZodUndefined:Wh,ZodNull:Gh,ZodAny:eu,ZodUnknown:xa,ZodNever:ki,ZodVoid:fp,ZodArray:ps,ZodObject:Tt,ZodUnion:Kh,ZodDiscriminatedUnion:dg,ZodIntersection:Jh,ZodTuple:Js,ZodRecord:Qh,ZodMap:pp,ZodSet:Ha,ZodFunction:Kc,ZodLazy:Yh,ZodLiteral:Zh,ZodEnum:To,ZodNativeEnum:Xh,ZodPromise:tu,ZodEffects:gs,ZodTransformer:gs,ZodOptional:Oi,ZodNullable:Va,ZodDefault:ed,ZodCatch:gp,ZodNaN:mp,BRAND:U6,ZodBranded:OI,ZodPipeline:Hd,ZodReadonly:yp,custom:PI,Schema:Fe,ZodSchema:Fe,late:L6,get ZodFirstPartyTypeKind(){return _e},coerce:y9,any:q6,array:K6,bigint:$6,boolean:kI,date:F6,discriminatedUnion:Z6,effect:Qv,enum:a9,function:s9,instanceof:B6,intersection:X6,lazy:i9,literal:o9,map:r9,nan:M6,nativeEnum:c9,never:W6,null:V6,nullable:h9,number:RI,object:J6,oboolean:m9,onumber:g9,optional:u9,ostring:p9,pipeline:f9,preprocess:d9,promise:l9,record:t9,set:n9,strictObject:Q6,string:xI,symbol:j6,transformer:Qv,tuple:e9,undefined:H6,union:Y6,unknown:z6,void:G6,NEVER:w9,ZodIssueCode:Z,quotelessJson:v6,ZodError:fs});const xt=O.object({message:O.string()});function ae(r){return O.literal(ge[r])}O.object({accessList:O.array(O.string()),blockHash:O.string().nullable(),blockNumber:O.string().nullable(),chainId:O.string().or(O.number()),from:O.string(),gas:O.string(),hash:O.string(),input:O.string().nullable(),maxFeePerGas:O.string(),maxPriorityFeePerGas:O.string(),nonce:O.string(),r:O.string(),s:O.string(),to:O.string(),transactionIndex:O.string().nullable(),type:O.string(),v:O.string(),value:O.string()});const b9=O.object({chainId:O.string().or(O.number())}),E9=O.object({email:O.string().email()}),v9=O.object({otp:O.string()}),A9=O.object({uri:O.string()}),C9=O.object({chainId:O.optional(O.string().or(O.number())),preferredAccountType:O.optional(O.string())}),_9=O.object({provider:O.enum(["google","github","apple","facebook","x","discord"])}),I9=O.object({email:O.string().email()}),N9=O.object({otp:O.string()}),S9=O.object({otp:O.string()}),T9=O.object({themeMode:O.optional(O.enum(["light","dark"])),themeVariables:O.optional(O.record(O.string(),O.string().or(O.number()))),w3mThemeVariables:O.optional(O.record(O.string(),O.string()))}),O9=O.object({metadata:O.object({name:O.string(),description:O.string(),url:O.string(),icons:O.array(O.string())}).optional(),sdkVersion:O.string().optional(),sdkType:O.string().optional(),projectId:O.string()}),P9=O.object({type:O.string()}),x9=O.object({action:O.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),R9=O.object({url:O.string()}),k9=O.object({userName:O.string()}),D9=O.object({email:O.string().optional().nullable(),address:O.string(),chainId:O.string().or(O.number()),accounts:O.array(O.object({address:O.string(),type:O.enum([Ht.ACCOUNT_TYPES.EOA,Ht.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:O.string().optional().nullable()}),U9=O.object({action:O.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),L9=O.object({email:O.string().email().optional().nullable(),address:O.string(),chainId:O.string().or(O.number()),smartAccountDeployed:O.optional(O.boolean()),accounts:O.array(O.object({address:O.string(),type:O.enum([Ht.ACCOUNT_TYPES.EOA,Ht.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:O.optional(O.string())}),B9=O.object({uri:O.string()}),M9=O.object({isConnected:O.boolean()}),$9=O.object({chainId:O.string().or(O.number())}),F9=O.object({chainId:O.string().or(O.number())}),j9=O.object({newEmail:O.string().email()}),H9=O.object({smartAccountEnabledNetworks:O.array(O.number())});O.object({address:O.string(),isDeployed:O.boolean()});const V9=O.object({version:O.string().optional()}),q9=O.object({type:O.string(),address:O.string()}),z9=O.any(),W9=O.object({method:O.literal("eth_accounts")}),G9=O.object({method:O.literal("eth_blockNumber")}),K9=O.object({method:O.literal("eth_call"),params:O.array(O.any())}),J9=O.object({method:O.literal("eth_chainId")}),Q9=O.object({method:O.literal("eth_estimateGas"),params:O.array(O.any())}),Y9=O.object({method:O.literal("eth_feeHistory"),params:O.array(O.any())}),Z9=O.object({method:O.literal("eth_gasPrice")}),X9=O.object({method:O.literal("eth_getAccount"),params:O.array(O.any())}),ej=O.object({method:O.literal("eth_getBalance"),params:O.array(O.any())}),tj=O.object({method:O.literal("eth_getBlockByHash"),params:O.array(O.any())}),rj=O.object({method:O.literal("eth_getBlockByNumber"),params:O.array(O.any())}),nj=O.object({method:O.literal("eth_getBlockReceipts"),params:O.array(O.any())}),sj=O.object({method:O.literal("eth_getBlockTransactionCountByHash"),params:O.array(O.any())}),ij=O.object({method:O.literal("eth_getBlockTransactionCountByNumber"),params:O.array(O.any())}),oj=O.object({method:O.literal("eth_getCode"),params:O.array(O.any())}),aj=O.object({method:O.literal("eth_getFilterChanges"),params:O.array(O.any())}),cj=O.object({method:O.literal("eth_getFilterLogs"),params:O.array(O.any())}),lj=O.object({method:O.literal("eth_getLogs"),params:O.array(O.any())}),uj=O.object({method:O.literal("eth_getProof"),params:O.array(O.any())}),hj=O.object({method:O.literal("eth_getStorageAt"),params:O.array(O.any())}),dj=O.object({method:O.literal("eth_getTransactionByBlockHashAndIndex"),params:O.array(O.any())}),fj=O.object({method:O.literal("eth_getTransactionByBlockNumberAndIndex"),params:O.array(O.any())}),pj=O.object({method:O.literal("eth_getTransactionByHash"),params:O.array(O.any())}),gj=O.object({method:O.literal("eth_getTransactionCount"),params:O.array(O.any())}),mj=O.object({method:O.literal("eth_getTransactionReceipt"),params:O.array(O.any())}),yj=O.object({method:O.literal("eth_getUncleCountByBlockHash"),params:O.array(O.any())}),wj=O.object({method:O.literal("eth_getUncleCountByBlockNumber"),params:O.array(O.any())}),bj=O.object({method:O.literal("eth_maxPriorityFeePerGas")}),Ej=O.object({method:O.literal("eth_newBlockFilter")}),vj=O.object({method:O.literal("eth_newFilter"),params:O.array(O.any())}),Aj=O.object({method:O.literal("eth_newPendingTransactionFilter")}),Cj=O.object({method:O.literal("eth_sendRawTransaction"),params:O.array(O.any())}),_j=O.object({method:O.literal("eth_syncing"),params:O.array(O.any())}),Ij=O.object({method:O.literal("eth_uninstallFilter"),params:O.array(O.any())}),Yv=O.object({method:O.literal("personal_sign"),params:O.array(O.any())}),Nj=O.object({method:O.literal("eth_signTypedData_v4"),params:O.array(O.any())}),Sj=O.object({method:O.literal("eth_sendTransaction"),params:O.array(O.any())}),Tj=O.object({method:O.literal("solana_signMessage"),params:O.object({message:O.string(),pubkey:O.string()})}),Oj=O.object({method:O.literal("solana_signTransaction"),params:O.object({transaction:O.string()})}),Pj=O.object({method:O.literal("solana_signAllTransactions"),params:O.object({transactions:O.array(O.string())})}),xj=O.object({method:O.literal("solana_signAndSendTransaction"),params:O.object({transaction:O.string(),options:O.object({skipPreflight:O.boolean().optional(),preflightCommitment:O.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:O.number().optional(),minContextSlot:O.number().optional()}).optional()})}),Rj=O.object({method:O.literal("wallet_sendCalls"),params:O.array(O.object({chainId:O.string().or(O.number()).optional(),from:O.string().optional(),version:O.string().optional(),capabilities:O.any().optional(),calls:O.array(O.object({to:O.string().startsWith("0x"),data:O.string().startsWith("0x").optional(),value:O.string().optional()}))}))}),kj=O.object({method:O.literal("wallet_getCallsStatus"),params:O.array(O.string())}),Dj=O.object({method:O.literal("wallet_getCapabilities")}),Uj=O.object({method:O.literal("wallet_grantPermissions"),params:O.array(O.any())}),Lj=O.object({method:O.literal("wallet_revokePermissions"),params:O.any()}),Bj=O.object({method:O.literal("wallet_getAssets"),params:O.any()}),Zv=O.object({token:O.string()}),ce=O.object({id:O.string().optional()}),Bu={appEvent:ce.extend({type:ae("APP_SWITCH_NETWORK"),payload:b9}).or(ce.extend({type:ae("APP_CONNECT_EMAIL"),payload:E9})).or(ce.extend({type:ae("APP_CONNECT_DEVICE")})).or(ce.extend({type:ae("APP_CONNECT_OTP"),payload:v9})).or(ce.extend({type:ae("APP_CONNECT_SOCIAL"),payload:A9})).or(ce.extend({type:ae("APP_GET_FARCASTER_URI")})).or(ce.extend({type:ae("APP_CONNECT_FARCASTER")})).or(ce.extend({type:ae("APP_GET_USER"),payload:O.optional(C9)})).or(ce.extend({type:ae("APP_GET_SOCIAL_REDIRECT_URI"),payload:_9})).or(ce.extend({type:ae("APP_SIGN_OUT")})).or(ce.extend({type:ae("APP_IS_CONNECTED"),payload:O.optional(Zv)})).or(ce.extend({type:ae("APP_GET_CHAIN_ID")})).or(ce.extend({type:ae("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(ce.extend({type:ae("APP_INIT_SMART_ACCOUNT")})).or(ce.extend({type:ae("APP_SET_PREFERRED_ACCOUNT"),payload:P9})).or(ce.extend({type:ae("APP_RPC_REQUEST"),payload:Yv.or(Bj).or(W9).or(G9).or(K9).or(J9).or(Q9).or(Y9).or(Z9).or(X9).or(ej).or(tj).or(rj).or(nj).or(sj).or(ij).or(oj).or(aj).or(cj).or(lj).or(uj).or(hj).or(dj).or(fj).or(pj).or(gj).or(mj).or(yj).or(wj).or(bj).or(Ej).or(vj).or(Aj).or(Cj).or(_j).or(Ij).or(Yv).or(Nj).or(Sj).or(Tj).or(Oj).or(Pj).or(xj).or(kj).or(Rj).or(Dj).or(Uj).or(Lj)})).or(ce.extend({type:ae("APP_UPDATE_EMAIL"),payload:I9})).or(ce.extend({type:ae("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:N9})).or(ce.extend({type:ae("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:S9})).or(ce.extend({type:ae("APP_SYNC_THEME"),payload:T9})).or(ce.extend({type:ae("APP_SYNC_DAPP_DATA"),payload:O9})).or(ce.extend({type:ae("APP_RELOAD")})),frameEvent:ce.extend({type:ae("FRAME_SWITCH_NETWORK_ERROR"),payload:xt}).or(ce.extend({type:ae("FRAME_SWITCH_NETWORK_SUCCESS"),payload:F9})).or(ce.extend({type:ae("FRAME_CONNECT_EMAIL_SUCCESS"),payload:x9})).or(ce.extend({type:ae("FRAME_CONNECT_EMAIL_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:R9})).or(ce.extend({type:ae("FRAME_GET_FARCASTER_URI_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:k9})).or(ce.extend({type:ae("FRAME_CONNECT_FARCASTER_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_CONNECT_OTP_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_CONNECT_OTP_SUCCESS")})).or(ce.extend({type:ae("FRAME_CONNECT_DEVICE_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_CONNECT_DEVICE_SUCCESS")})).or(ce.extend({type:ae("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:D9})).or(ce.extend({type:ae("FRAME_CONNECT_SOCIAL_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_GET_USER_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_GET_USER_SUCCESS"),payload:L9})).or(ce.extend({type:ae("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:B9})).or(ce.extend({type:ae("FRAME_SIGN_OUT_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_SIGN_OUT_SUCCESS")})).or(ce.extend({type:ae("FRAME_IS_CONNECTED_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_IS_CONNECTED_SUCCESS"),payload:M9})).or(ce.extend({type:ae("FRAME_GET_CHAIN_ID_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_GET_CHAIN_ID_SUCCESS"),payload:$9})).or(ce.extend({type:ae("FRAME_RPC_REQUEST_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_RPC_REQUEST_SUCCESS"),payload:z9})).or(ce.extend({type:ae("FRAME_SESSION_UPDATE"),payload:Zv})).or(ce.extend({type:ae("FRAME_UPDATE_EMAIL_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_UPDATE_EMAIL_SUCCESS"),payload:U9})).or(ce.extend({type:ae("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(ce.extend({type:ae("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:j9})).or(ce.extend({type:ae("FRAME_SYNC_THEME_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_SYNC_THEME_SUCCESS")})).or(ce.extend({type:ae("FRAME_SYNC_DAPP_DATA_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(ce.extend({type:ae("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:H9})).or(ce.extend({type:ae("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:q9})).or(ce.extend({type:ae("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_READY"),payload:V9})).or(ce.extend({type:ae("FRAME_RELOAD_ERROR"),payload:xt})).or(ce.extend({type:ae("FRAME_RELOAD_SUCCESS")}))};function Nm(r,e={}){var t;return typeof(e==null?void 0:e.type)=="string"&&((t=e==null?void 0:e.type)==null?void 0:t.includes(r))}class Mj{constructor({projectId:e,isAppClient:t=!1,chainId:n="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.rpcUrl=ee.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!Nm(ge.FRAME_EVENT_KEY,l))return;const u=Bu.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}bn.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{bn.isClient&&window.addEventListener("message",({data:o})=>{if(!Nm(ge.FRAME_EVENT_KEY,o))return;const a=Bu.frameEvent.parse(o);i(a)})},onAppEvent:i=>{bn.isClient&&window.addEventListener("message",({data:o})=>{if(!Nm(ge.APP_EVENT_KEY,o))return;const a=Bu.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(bn.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");Bu.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(bn.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Bu.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),t&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),bn.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${FF}?projectId=${e}&chainId=${n}&version=${HF}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&((a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(t=>({[t]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${t}&projectId=${this.projectId}`,chainId:t}}));return Object.assign({},...e)}}class $j{constructor(e){var i;const t=du({level:jF}),{logger:n,chunkLoggerController:s}=Rw({opts:t});this.logger=Nr(n,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Fj{constructor({projectId:e,chainId:t,enableLogger:n=!0,onTimeout:s}){this.openRpcRequests=[],n&&(this.w3mLogger=new $j(e)),this.w3mFrame=new Mj({projectId:e,isAppClient:!0,chainId:t,enableLogger:n}),this.onTimeout=s,this.getLoginEmailUsed()&&this.w3mFrame.initFrame(),this.initPromise=new Promise(i=>{this.w3mFrame.events.onFrameEvent(async o=>{o.type===ge.FRAME_READY&&(this.initPromise=void 0,await new Promise(a=>{setTimeout(a,500)}),i())})})}async init(){this.w3mFrame.initFrame(),this.initPromise&&await this.initPromise}getLoginEmailUsed(){return!!ar.get(ge.EMAIL_LOGIN_USED_KEY)}getEmail(){return ar.get(ge.EMAIL)}getUsername(){return ar.get(ge.SOCIAL_USERNAME)}async reload(){var e;try{this.w3mFrame.initFrame(),await this.appEvent({type:ge.APP_RELOAD})}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error reloading iframe"),t}}async connectEmail(e){var t;try{bn.checkIfAllowedToTriggerEmail(),this.w3mFrame.initFrame();const n=await this.appEvent({type:ge.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw(t=this.w3mLogger)==null||t.logger.error({error:n},"Error connecting email"),n}}async connectDevice(){var e;try{return this.appEvent({type:ge.APP_CONNECT_DEVICE})}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error connecting device"),t}}async connectOtp(e){var t;try{return this.appEvent({type:ge.APP_CONNECT_OTP,payload:e})}catch(n){throw(t=this.w3mLogger)==null||t.logger.error({error:n},"Error connecting otp"),n}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const t=await this.appEvent({type:ge.APP_IS_CONNECTED});return t!=null&&t.isConnected||this.deleteAuthLoginCache(),t}catch(t){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:t},"Error checking connection"),t}}async getChainId(){var e;try{const t=await this.appEvent({type:ge.APP_GET_CHAIN_ID});return this.setLastUsedChainId(t.chainId),t}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error getting chain id"),t}}async getSocialRedirectUri(e){var t;try{return this.w3mFrame.initFrame(),this.appEvent({type:ge.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(n){throw(t=this.w3mLogger)==null||t.logger.error({error:n},"Error getting social redirect uri"),n}}async updateEmail(e){var t;try{const n=await this.appEvent({type:ge.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw(t=this.w3mLogger)==null||t.logger.error({error:n},"Error updating email"),n}}async updateEmailPrimaryOtp(e){var t;try{return this.appEvent({type:ge.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(n){throw(t=this.w3mLogger)==null||t.logger.error({error:n},"Error updating email primary otp"),n}}async updateEmailSecondaryOtp(e){var t;try{const n=await this.appEvent({type:ge.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(n.newEmail),n}catch(n){throw(t=this.w3mLogger)==null||t.logger.error({error:n},"Error updating email secondary otp"),n}}async syncTheme(e){var t;try{return this.appEvent({type:ge.APP_SYNC_THEME,payload:e})}catch(n){throw(t=this.w3mLogger)==null||t.logger.error({error:n},"Error syncing theme"),n}}async syncDappData(e){var t;try{return this.appEvent({type:ge.APP_SYNC_DAPP_DATA,payload:e})}catch(n){throw(t=this.w3mLogger)==null||t.logger.error({error:n},"Error syncing dapp data"),n}}async getSmartAccountEnabledNetworks(){var e;try{const t=await this.appEvent({type:ge.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(t.smartAccountEnabledNetworks),t}catch(t){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:t},"Error getting smart account enabled networks"),t}}async setPreferredAccount(e){var t;try{return this.appEvent({type:ge.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(n){throw(t=this.w3mLogger)==null||t.logger.error({error:n},"Error setting preferred account"),n}}async connect(e){var t;try{const n=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.getUser({chainId:n,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(n){throw(t=this.w3mLogger)==null||t.logger.error({error:n},"Error connecting"),n}}async getUser(e){var t;try{const n=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:ge.APP_GET_USER,payload:{...e,chainId:n}});return this.user=s,s}catch(n){throw(t=this.w3mLogger)==null||t.logger.error({error:n},"Error connecting"),n}}async connectSocial(e){var t;try{this.w3mFrame.initFrame();const n=await this.appEvent({type:ge.APP_CONNECT_SOCIAL,payload:{uri:e}});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(t=this.w3mLogger)==null||t.logger.error({error:n},"Error connecting social"),n}}async getFarcasterUri(){var e;try{return this.w3mFrame.initFrame(),await this.appEvent({type:ge.APP_GET_FARCASTER_URI})}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error getting farcaster uri"),t}}async connectFarcaster(){var e;try{const t=await this.appEvent({type:ge.APP_CONNECT_FARCASTER});return t.userName&&this.setSocialLoginSuccess(t.userName),t}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error connecting farcaster"),t}}async switchNetwork(e){var t;try{const n=await this.appEvent({type:ge.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(t=this.w3mLogger)==null||t.logger.error({error:n},"Error switching network"),n}}async disconnect(){var e;try{const t=await this.appEvent({type:ge.APP_SIGN_OUT});return this.deleteAuthLoginCache(),t}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error disconnecting"),t}}async request(e){var t,n,s,i;try{if(Ht.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(t=this.rpcRequestHandler)==null||t.call(this,e);const o=await this.appEvent({type:ge.APP_RPC_REQUEST,payload:e});return(n=this.rpcSuccessHandler)==null||n.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===ge.FRAME_IS_CONNECTED_SUCCESS&&t.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===ge.FRAME_IS_CONNECTED_ERROR&&e(),t.type===ge.FRAME_IS_CONNECTED_SUCCESS&&!t.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===ge.FRAME_GET_USER_SUCCESS&&e(t.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===ge.FRAME_CONNECT_SOCIAL_SUCCESS&&e(t.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===ge.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(t.payload):t.type===ge.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Ht.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===ge.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(t.payload.smartAccountEnabledNetworks):t.type===ge.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:t,method:n})=>{Ht.SAFE_RPC_METHODS.includes(n)||t.abort()}),this.openRpcRequests=[]}catch(t){(e=this.w3mLogger)==null||e.logger.error({error:t},"Error aborting RPC request")}}async appEvent(e){await this.w3mFrame.frameLoadPromise;let t;function n(a){return a.replace("@w3m-app/","")}const s=new AbortController,i=n(e.type);return[ge.APP_CONNECT_EMAIL,ge.APP_CONNECT_DEVICE,ge.APP_CONNECT_OTP,ge.APP_CONNECT_SOCIAL,ge.APP_GET_SOCIAL_REDIRECT_URI].map(n).includes(i)&&(t=setTimeout(()=>{var a;(a=this.onTimeout)==null||a.call(this),s.abort()},3e4)),new Promise((a,c)=>{var h,d,f;const l=Math.random().toString(36).substring(7);if((f=(h=this.w3mLogger)==null?void 0:(d=h.logger).info)==null||f.call(d,{event:e,id:l},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:l}),i==="RPC_REQUEST"){const p=e;this.openRpcRequests=[...this.openRpcRequests,{...p.payload,abortController:s}]}s.signal.addEventListener("abort",()=>{i==="RPC_REQUEST"?c(new Error("Request was aborted")):i!=="GET_FARCASTER_URI"&&c(new Error("Something went wrong"))});function u(p,g){var y,C,w;p.id===l&&((C=g==null?void 0:(y=g.logger).info)==null||C.call(y,{framEvent:p,id:l},"Received frame response"),p.type===`@w3m-frame/${i}_SUCCESS`?(t&&clearTimeout(t),"payload"in p&&a(p.payload),a(void 0)):p.type===`@w3m-frame/${i}_ERROR`&&(t&&clearTimeout(t),"payload"in p&&c(new Error(((w=p.payload)==null?void 0:w.message)||"An error occurred")),c(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(l,p=>u(p,this.w3mLogger),s.signal)})}setNewLastEmailLoginTime(){ar.set(ge.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){ar.set(ge.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&ar.set(ge.EMAIL,e),ar.set(ge.EMAIL_LOGIN_USED_KEY,"true"),ar.delete(ge.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){ar.delete(ge.EMAIL_LOGIN_USED_KEY),ar.delete(ge.EMAIL),ar.delete(ge.LAST_USED_CHAIN_KEY),ar.delete(ge.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&ar.set(ge.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=ar.get(ge.LAST_USED_CHAIN_KEY)??void 0,t=Number(e);return isNaN(t)?e:t}persistSmartAccountEnabledNetworks(e){ar.set(ge.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class ch{constructor(){}static getInstance({projectId:e,chainId:t,enableLogger:n,onTimeout:s}){return ch.instance||(ch.instance=new Fj({projectId:e,chainId:t,enableLogger:n,onTimeout:s})),ch.instance}}var Xv={};const jj={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof Zr<"u"&&typeof Xv<"u"?Xv.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},zy={filterOutDuplicatesByRDNS(r){const e=X.state.enableEIP6963?De.state.connectors:[],t=he.getRecentWallets(),n=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=t.map(a=>a.rdns).filter(Boolean),i=n.concat(s);if(i.includes("io.metamask.mobile")&&Se.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return r.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(r){const e=De.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),t=he.getRecentWallets(),n=e.map(a=>a.explorerId),s=t.map(a=>a.id),i=n.concat(s);return r.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(r){const e=this.filterOutDuplicatesByRDNS(r);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(r){const{connectors:e}=De.state,t=e.filter(i=>i.type==="ANNOUNCED").reduce((i,o)=>{var a;return(a=o.info)!=null&&a.rdns&&(i[o.info.rdns]=!0),i},{});return r.map(i=>({...i,installed:!!i.rdns&&!!t[i.rdns??""]})).sort((i,o)=>Number(o.installed)-Number(i.installed))},getConnectOrderMethod(r,e){var c;const t=(r==null?void 0:r.connectMethodsOrder)||((c=X.state.features)==null?void 0:c.connectMethodsOrder),n=e||De.state.connectors;if(t)return t;const{injected:s,announced:i}=Hf.getConnectorsByType(n,Te.state.recommended,Te.state.featured),o=s.filter(Hf.showConnector),a=i.filter(Hf.showConnector);return o.length||a.length?["wallet","email","social"]:jj.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(r){const e=!!r.rdns&&Te.state.excludedWallets.some(n=>n.rdns===r.rdns),t=!!r.name&&Te.state.excludedWallets.some(n=>hg.isLowerCaseMatch(n.name,r.name));return e||t}},Hf={getConnectorsByType(r,e,t){const{customWallets:n}=X.state,s=he.getRecentWallets(),i=zy.filterOutDuplicateWallets(e),o=zy.filterOutDuplicateWallets(t),a=r.filter(h=>h.type==="MULTI_CHAIN"),c=r.filter(h=>h.type==="ANNOUNCED"),l=r.filter(h=>h.type==="INJECTED"),u=r.filter(h=>h.type==="EXTERNAL");return{custom:n,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(r){var s;const e=(s=r.info)==null?void 0:s.rdns,t=!!e&&Te.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),n=!!r.name&&Te.state.excludedWallets.some(i=>hg.isLowerCaseMatch(i.name,r.name));return!(r.type==="INJECTED"&&(!Se.isMobile()&&r.name==="Browser Wallet"||!e&&!At.checkInstalled()||t||n)||(r.type==="ANNOUNCED"||r.type==="EXTERNAL")&&(t||n))},getIsConnectedWithWC(){return Array.from($.state.chains.values()).some(t=>De.getConnectorId(t.namespace)===ee.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:r,featured:e,custom:t,recent:n,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=X.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=Hf.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:X.state.enableWalletConnect&&!u},{type:"recent",isEnabled:n.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:t&&t.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:r.length>0}].filter(C=>C.isEnabled),p=new Set(f.map(C=>C.type)),g=c.filter(C=>p.has(C)).map(C=>({type:C,isEnabled:!0})),y=f.filter(({type:C})=>!g.some(({type:I})=>I===C));return Array.from(new Set([...g,...y].map(({type:C})=>C)))}},Ao={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603},Hj=CI({id:56,name:"BNB Smart Chain",nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://56.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}}),DI=CI({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0}),Vj={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},i0={getMethodsByChainNamespace(r){return Vj[r]||[]},createDefaultNamespace(r){return{methods:this.getMethodsByChainNamespace(r),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(r,e){if(!e)return{...r};const t={...r},n=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>n.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>n.add(s)),e.events&&Object.keys(e.events).forEach(s=>n.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&n.add(i)}),n.forEach(s=>{t[s]||(t[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{t[s]&&(t[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{t[s]&&(t[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{t[s]&&(t[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!t[a]||(t[a].rpcMap||(t[a].rpcMap={}),s.has(a)||(t[a].rpcMap={},s.add(a)),t[a].rpcMap[c]=o)})}return t},createNamespaces(r,e){const t=r.reduce((n,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];n[o]||(n[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=n[o];switch(u.chains.push(l),l){case V0.caipNetworkId:u.chains.push(V0.deprecatedCaipNetworkId);break;case H0.caipNetworkId:u.chains.push(H0.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),n},{});return this.applyNamespaceOverrides(t,e)},resolveReownName:async r=>{var n;const e=await II.resolveName(r);return((n=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:n.address)||!1},getChainsFromNamespaces(r={}){return Object.values(r).flatMap(e=>{const t=e.chains||[],n=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...t,...n]))})},isSessionEventData(r){return typeof r=="object"&&r!==null&&"id"in r&&"topic"in r&&"params"in r&&typeof r.params=="object"&&r.params!==null&&"chainId"in r.params&&"event"in r.params&&typeof r.params.event=="object"&&r.params.event!==null}};class o0{constructor({provider:e,namespace:t}){this.id=ee.CONNECTOR_ID.WALLET_CONNECT,this.name=$s.ConnectorNamesMap[ee.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=$s.ConnectorImageIds[ee.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=$.getCaipNetworks.bind($),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=t}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const t=this.getCaipNetworks(),n=X.state.universalProviderConfigOverride,s=i0.createNamespaces(t,n);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(t=>t.caipNetworkId);return oh.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:qj})}}const qj=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class UI{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=t=>$.getCaipNetworks(t),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:ee.CONNECTOR_ID.AUTH,type:"AUTH",name:ee.CONNECTOR_NAMES.AUTH,provider:e,imageId:$s.ConnectorImageIds[ee.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(n=>t.has(n.id)?!1:(t.add(n.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,t){de.setStatus(e,t)}on(e,t){var n;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(n=this.eventListeners.get(e))==null||n.add(t)}off(e,t){const n=this.eventListeners.get(e);n&&n.delete(t)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,t){const n=this.eventListeners.get(e);n&&n.forEach(s=>s(t))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:t,providerType:n}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(n==="WALLET_CONNECT"){s.setDefaultChain(t.caipNetworkId);return}if(s&&n==="AUTH"){const o=s,a=(i=de.state.preferredAccountTypes)==null?void 0:i[t.chainNamespace];await o.switchNetwork(t.caipNetworkId);const c=await o.getUser({chainId:t.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(t=>t instanceof o0);if(!e)throw new Error("WalletConnectConnector not found");return e}}class zj extends UI{setUniversalProvider(e){this.addConnector(new o0({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const t=this.provider,n=((a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:n.map(c=>Se.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&Cr.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(de.state.balanceLoading&&e.chainId===((c=$.state.activeCaipNetwork)==null?void 0:c.id))return{balance:de.state.balance||"0.00",symbol:de.state.balanceSymbol||""};const s=(await de.fetchTokenBalance()).find(u=>{var h,d;return u.chainId===`${(h=e.caipNetwork)==null?void 0:h.chainNamespace}:${e.chainId}`&&u.symbol===((d=e.caipNetwork)==null?void 0:d.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:t,message:n,address:s}=e;if(!t)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=$.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===ee.CHAIN.SOLANA?i=(await t.request({method:"solana_signMessage",params:{message:L1.encode(new TextEncoder().encode(n)),pubkey:s}},(a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await t.request({method:"personal_sign",params:[n,s]},(c=$.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async getProfile(){return Promise.resolve({profileImage:"",profileName:""})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}async getEnsAddress(){return Promise.resolve({address:!1})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:t}=e,n=this.getWalletConnectConnector();if(t.chainNamespace===ee.CHAIN.EVM)try{await((s=n.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Fv(t.id)}]}))}catch(u){if(u.code===Ao.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Ao.ERROR_INVALID_CHAIN_ID||u.code===Ao.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Ao.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=n.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Fv(t.id),rpcUrls:[(a=t==null?void 0:t.rpcUrls.chainDefault)==null?void 0:a.http],chainName:t.name,nativeCurrency:t.nativeCurrency,blockExplorerUrls:[(c=t.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}n.provider.setDefaultChain(t.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(n=>n.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}class Wj{constructor(e){this.chainNamespaces=[],this.reportedAlertErrors={},this.getCaipNetwork=(t,n)=>{var s,i,o,a;if(t){const c=(i=(s=$.getNetworkData(t))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(u=>u.id===n);if(c)return c;const l=(o=$.getNetworkData(t))==null?void 0:o.caipNetwork;return l||((a=$.getRequestedCaipNetworks(t).filter(u=>u.chainNamespace===t))==null?void 0:a[0])}return $.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const t=this.getCaipNetwork();if(t)return t.id},this.getCaipNetworks=t=>$.getCaipNetworks(t),this.getActiveChainNamespace=()=>$.state.activeChain,this.setRequestedCaipNetworks=(t,n)=>{$.setRequestedCaipNetworks(t,n)},this.getApprovedCaipNetworkIds=()=>$.getAllApprovedCaipNetworkIds(),this.getCaipAddress=t=>$.state.activeChain===t||!t?$.state.activeCaipAddress:$.getAccountProp("caipAddress",t),this.setClientId=t=>{Ie.setClientId(t)},this.getProvider=t=>Ze.getProvider(t),this.getProviderType=t=>Ze.getProviderId(t),this.getPreferredAccountType=t=>{var n;return(n=de.state.preferredAccountTypes)==null?void 0:n[t]},this.setCaipAddress=(t,n)=>{de.setCaipAddress(t,n)},this.setBalance=(t,n,s)=>{de.setBalance(t,n,s)},this.setProfileName=(t,n)=>{de.setProfileName(t,n)},this.setProfileImage=(t,n)=>{de.setProfileImage(t,n)},this.setUser=(t,n)=>{de.setUser(t,n),X.state.enableEmbedded&&Lt.close()},this.resetAccount=t=>{de.resetAccount(t)},this.setCaipNetwork=t=>{$.setActiveCaipNetwork(t)},this.setCaipNetworkOfNamespace=(t,n)=>{$.setChainNetworkData(n,{caipNetwork:t})},this.setAllAccounts=(t,n)=>{de.setAllAccounts(t,n),X.setHasMultipleAddresses((t==null?void 0:t.length)>1)},this.setStatus=(t,n)=>{de.setStatus(t,n),De.isConnected()?he.setConnectionStatus("connected"):he.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=t=>$.getAccountProp("address",t),this.setConnectors=t=>{const n=[...De.state.allConnectors,...t];De.setConnectors(n)},this.fetchIdentity=t=>Ie.fetchIdentity(t),this.getReownName=t=>II.getNamesForAddress(t),this.getConnectors=()=>De.getConnectors(),this.getConnectorImage=t=>G1.getConnectorImage(t),this.setConnectedWalletInfo=(t,n)=>{const s=Ze.getProviderId(n),i=t?{...t,type:s}:void 0;de.setConnectedWalletInfo(i,n)},this.getIsConnectedState=()=>!!$.state.activeCaipAddress,this.addAddressLabel=(t,n,s)=>{de.addAddressLabel(t,n,s)},this.removeAddressLabel=(t,n)=>{de.removeAddressLabel(t,n)},this.getAddress=t=>$.state.activeChain===t||!t?de.state.address:$.getAccountProp("address",t),this.setApprovedCaipNetworksData=t=>$.setApprovedCaipNetworksData(t),this.resetNetwork=t=>{$.resetNetwork(t)},this.addConnector=t=>{De.addConnector(t)},this.resetWcConnection=()=>{At.resetWcConnection()},this.setAddressExplorerUrl=(t,n)=>{de.setAddressExplorerUrl(t,n)},this.setSmartAccountDeployed=(t,n)=>{de.setSmartAccountDeployed(t,n)},this.setSmartAccountEnabledNetworks=(t,n)=>{$.setSmartAccountEnabledNetworks(t,n)},this.setPreferredAccountType=(t,n)=>{de.setPreferredAccountType(t,n)},this.setEIP6963Enabled=t=>{X.setEIP6963Enabled(t)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.initialize(e)}getChainNamespacesSet(e,t){const n=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(n!=null&&n.length)return[...new Set(n)];const s=t==null?void 0:t.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){this.initControllers(e),await this.initChainAdapters(),await this.injectModalUi(),this.sendInitializeEvent(e),qs.set({initialized:!0}),await this.syncExistingConnection()}sendInitializeEvent(e){var n;const{...t}=e;delete t.adapters,delete t.universalProvider,mt.sendEvent({type:"track",event:"INITIALIZE",properties:{...t,networks:e.networks.map(s=>s.id),siweConfig:{options:((n=e.siweConfig)==null?void 0:n.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Ar.setThemeMode(e.themeMode),e.themeVariables&&Ar.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");$.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const t=this.getDefaultNetwork();t&&$.setActiveCaipNetwork(t)}initializeConnectionController(e){At.setWcBasic(e.basic??!1)}initializeConnectorController(){De.initialize(this.chainNamespaces)}initializeOptionsController(e){var o;X.setDebug(e.debug!==!1),X.setEnableWalletConnect(e.enableWalletConnect!==!1),X.setEnableWalletGuide(e.enableWalletGuide!==!1),X.setEnableWallets(e.enableWallets!==!1),X.setEIP6963Enabled(e.enableEIP6963!==!1),X.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),X.setEnableAuthLogger(e.enableAuthLogger!==!1),X.setCustomRpcUrls(e.customRpcUrls),X.setSdkVersion(e.sdkVersion),X.setProjectId(e.projectId),X.setEnableEmbedded(e.enableEmbedded),X.setAllWallets(e.allWallets),X.setIncludeWalletIds(e.includeWalletIds),X.setExcludeWalletIds(e.excludeWalletIds),X.setFeaturedWalletIds(e.featuredWalletIds),X.setTokens(e.tokens),X.setTermsConditionsUrl(e.termsConditionsUrl),X.setPrivacyPolicyUrl(e.privacyPolicyUrl),X.setCustomWallets(e.customWallets),X.setFeatures(e.features),X.setAllowUnsupportedChain(e.allowUnsupportedChain),X.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),X.setDefaultAccountTypes(e.defaultAccountTypes);const t=he.getPreferredAccountTypes(),n={...X.state.defaultAccountTypes,...t};de.setPreferredAccountTypes(n);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),X.setMetadata(e.metadata),X.setDisableAppend(e.disableAppend),X.setEnableEmbedded(e.enableEmbedded),X.setSIWX(e.siwx),!e.projectId){eh.open(Gu.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===ee.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");X.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,t,n,s;return typeof window<"u"&&typeof document<"u"?{name:((t=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:t.textContent)||"",description:((n=document.querySelector('meta[property="og:description"]'))==null?void 0:n.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const t=this.getActiveChainNamespace();if(t){const n=Dc.getUnsupportedNetwork(`${t}:${e}`);$.setActiveCaipNetwork(n)}}getDefaultNetwork(){return Dc.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,t){return Dc.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}extendCaipNetworks(e){return Dc.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const t=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return t?Dc.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=$.state.activeChain,t=this.getAdapter(e),n=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!t)throw new Error("Adapter not found");const s=await t.connectWalletConnect(n);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),he.setConnectedNamespaces([...$.state.chains.keys()]),this.chainNamespaces.forEach(o=>{De.setConnectorId(gt.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:t,type:n,provider:s,chain:i,caipNetwork:o})=>{var f,p,g,y,C,w;const a=$.state.activeChain,c=i||a,l=this.getAdapter(c);if(i&&i!==a&&!o){const I=this.getCaipNetworks().find(U=>U.chainNamespace===i);I&&this.setCaipNetwork(I)}if(!l)throw new Error("Adapter not found");const u=this.getCaipNetwork(c),h=await l.connect({id:e,info:t,type:n,provider:s,chainId:(o==null?void 0:o.id)||(u==null?void 0:u.id),rpcUrl:((g=(p=(f=o==null?void 0:o.rpcUrls)==null?void 0:f.default)==null?void 0:p.http)==null?void 0:g[0])||((w=(C=(y=u==null?void 0:u.rpcUrls)==null?void 0:y.default)==null?void 0:C.http)==null?void 0:w[0])});if(!h)return;he.addConnectedNamespace(c),this.syncProvider({...h,chainNamespace:c});const{accounts:d}=await l.getAccounts({namespace:c,id:e});this.setAllAccounts(d,c),this.setStatus("connected",c)},reconnectExternal:async({id:e,info:t,type:n,provider:s})=>{var a;const i=$.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:t,type:n,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),he.addConnectedNamespace(i))},disconnect:async e=>{const t=e||$.state.activeChain,n=this.getAdapter(t),s=Ze.getProvider(t),i=Ze.getProviderId(t);await(n==null?void 0:n.disconnect({provider:s,providerType:i})),he.removeConnectedNamespace(t),Ze.resetChain(t),this.setUser(void 0,t),this.setStatus("disconnected",t)},checkInstalled:e=>e?e.some(t=>{var n;return!!((n=window.ethereum)!=null&&n[String(t)])}):!!window.ethereum,signMessage:async e=>{const t=this.getAdapter($.state.activeChain),n=await(t==null?void 0:t.signMessage({message:e,address:de.state.address,provider:Ze.getProvider($.state.activeChain)}));return(n==null?void 0:n.signature)||""},sendTransaction:async e=>{if(e.chainNamespace===ee.CHAIN.EVM){const t=this.getAdapter($.state.activeChain),n=Ze.getProvider($.state.activeChain),s=await(t==null?void 0:t.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:n}));return(s==null?void 0:s.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===ee.CHAIN.EVM){const t=this.getAdapter($.state.activeChain),n=Ze.getProvider($.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(t==null?void 0:t.estimateGas({...e,provider:n,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var n;const e=this.getAdapter($.state.activeChain),t=await(e==null?void 0:e.getProfile({address:de.state.address,chainId:Number((n=this.getCaipNetwork())==null?void 0:n.id)}));return(t==null?void 0:t.profileImage)||!1},getEnsAddress:async e=>{const t=this.getAdapter($.state.activeChain),n=this.getCaipNetwork();if(!n)return!1;const s=await(t==null?void 0:t.getEnsAddress({name:e,caipNetwork:n}));return(s==null?void 0:s.address)||!1},writeContract:async e=>{const t=this.getAdapter($.state.activeChain),n=this.getCaipNetwork(),s=this.getCaipAddress(),i=Ze.getProvider($.state.activeChain);if(!n||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(t==null?void 0:t.writeContract({...e,caipNetwork:n,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,t)=>{const n=this.getAdapter($.state.activeChain);return(n==null?void 0:n.parseUnits({value:e,decimals:t}))??0n},formatUnits:(e,t)=>{const n=this.getAdapter($.state.activeChain);return(n==null?void 0:n.formatUnits({value:e,decimals:t}))??"0"},getCapabilities:async e=>{const t=this.getAdapter($.state.activeChain);return await(t==null?void 0:t.getCapabilities(e))},grantPermissions:async e=>{const t=this.getAdapter($.state.activeChain);return await(t==null?void 0:t.grantPermissions(e))},revokePermissions:async e=>{const t=this.getAdapter($.state.activeChain);return t!=null&&t.revokePermissions?await t.revokePermissions(e):"0x"},walletGetAssets:async e=>{const t=this.getAdapter($.state.activeChain);return await(t==null?void 0:t.walletGetAssets(e))??{}}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},At.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var t,n,s,i,o;if(Ze.getProviderId($.state.activeChain)===gt.CONNECTOR_TYPE_WALLET_CONNECT){const a=(n=(t=this.universalProvider)==null?void 0:t.session)==null?void 0:n.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const t=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Ze.getProvider(t),i=Ze.getProviderId(t);if(e.chainNamespace===$.state.activeChain){const o=this.getAdapter(t);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===gt.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(t);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:t})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(t=>{const n=t.chains||[],s=t.accounts.map(i=>{const{chainId:o,chainNamespace:a}=si.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...n,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((t,n)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===n);return s?(s.construct({namespace:n,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),t[n]=s):t[n]=new zj({namespace:n,networks:this.getCaipNetworks()}),t},{})}async initChainAdapter(e){var t;this.onConnectors(e),this.listenAdapter(e),(t=this.chainAdapters)==null||t[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const t=this.getAdapter(e);t==null||t.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const t=this.getAdapter(e);if(!t)return;const n=he.getConnectionStatus();n==="connected"?this.setStatus("connecting",e):n==="disconnected"?(he.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),t.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=$.state.activeChain===e,c=$.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),t.on("disconnect",this.disconnect.bind(this,e)),t.on("pendingTransactions",()=>{const s=de.state.address,i=$.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),t.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=$.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=$.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=$.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e)})}async createUniversalProviderForAdapter(e){var t,n,s;await this.getUniversalProvider(),this.universalProvider&&((s=(n=(t=this.chainAdapters)==null?void 0:t[e])==null?void 0:n.setUniversalProvider)==null||s.call(n,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{const t=De.getConnectorId(e);switch(this.setStatus("connecting",e),t){case ee.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case ee.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(t){console.warn("AppKit couldn't sync existing connection",t),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var o,a,c;const t=this.getAdapter(e),n=De.getConnectorId(e),s=this.getCaipNetwork(e),i=De.getConnectors(e).find(l=>l.id===n);try{if(!t||!i)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const l=await(t==null?void 0:t.syncConnection({namespace:e,id:i.id,chainId:s.id,rpcUrl:(c=(a=(o=s==null?void 0:s.rpcUrls)==null?void 0:o.default)==null?void 0:a.http)==null?void 0:c[0]}));if(l){const u=await(t==null?void 0:t.getAccounts({namespace:e,id:i.id}));u&&u.accounts.length>0?this.setAllAccounts(u.accounts,e):this.setAllAccounts([Se.createAccount(e,l.address,"eoa")],e),this.syncProvider({...l,chainNamespace:e}),await this.syncAccount({...l,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async t=>{var a,c,l,u,h;const n=this.getAdapter(t),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[t])==null?void 0:u.accounts)||[],i=(h=$.state.activeCaipNetwork)==null?void 0:h.id,o=s.find(d=>{const{chainId:f}=si.parseCaipAddress(d);return f===(i==null?void 0:i.toString())})||s[0];if(o){const d=si.validateCaipAddress(o),{chainId:f,address:p}=si.parseCaipAddress(d);if(Ze.setProviderId(t,gt.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&$.state.activeCaipNetwork&&(n==null?void 0:n.namespace)!==ee.CHAIN.EVM){const g=n==null?void 0:n.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:$.state.activeCaipNetwork});Ze.setProvider(t,g)}else Ze.setProvider(t,this.universalProvider);De.setConnectorId(ee.CONNECTOR_ID.WALLET_CONNECT,t),he.addConnectedNamespace(t),this.syncWalletConnectAccounts(t),await this.syncAccount({address:p,chainId:f,chainNamespace:t})}else this.setStatus("disconnected",t);await $.setApprovedCaipNetworksData(t)});await Promise.all(e)}syncWalletConnectAccounts(e){var n,s,i,o,a;const t=(a=(o=(i=(s=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=si.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);t&&this.setAllAccounts(t.map(c=>Se.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:t,id:n,chainNamespace:s}){Ze.setProviderId(s,e),Ze.setProvider(s,t),De.setConnectorId(n,s)}async syncAccount(e){var h,d;const t=e.chainNamespace===$.state.activeChain,n=$.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=he.getActiveNetworkProps(),c=i||a,l=((h=$.state.activeCaipNetwork)==null?void 0:h.name)===ee.UNSUPPORTED_NETWORK_NAME,u=$.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(y=>y.id.toString()===c.toString()),p=this.getCaipNetworks().find(y=>y.chainNamespace===o);if(!u&&!f&&!p){const y=this.getApprovedCaipNetworkIds()||[],C=y.find(I=>{var U;return((U=si.parseCaipNetworkId(I))==null?void 0:U.chainId)===c.toString()}),w=y.find(I=>{var U;return((U=si.parseCaipNetworkId(I))==null?void 0:U.chainNamespace)===o});f=this.getCaipNetworks().find(I=>I.caipNetworkId===C),p=this.getCaipNetworks().find(I=>I.caipNetworkId===w||"deprecatedCaipNetworkId"in I&&I.deprecatedCaipNetworkId===w)}const g=f||p;(g==null?void 0:g.chainNamespace)===$.state.activeChain?X.state.enableNetworkSwitch&&!X.state.allowUnsupportedChain&&((d=$.state.activeCaipNetwork)==null?void 0:d.name)===ee.UNSUPPORTED_NETWORK_NAME?$.showUnsupportedChainUI():this.setCaipNetwork(g):t||n&&this.setCaipNetworkOfNamespace(n,o),this.syncConnectedWalletInfo(o),hg.isLowerCaseMatch(s,de.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),t?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:n==null?void 0:n.id,chainNamespace:o})}}async syncAccountInfo(e,t,n){const s=this.getCaipAddress(n),i=t||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${n}:${i}:${e}`;this.setCaipAddress(o,n),await this.syncIdentity({address:e,chainId:i,chainNamespace:n})}async syncReownName(e,t){try{const n=await this.getReownName(e);if(n[0]){const s=n[0];this.setProfileName(s.name,t)}else this.setProfileName(null,t)}catch{this.setProfileName(null,t)}}syncConnectedWalletInfo(e){var s;const t=De.getConnectorId(e),n=Ze.getProviderId(e);if(n===gt.CONNECTOR_TYPE_ANNOUNCED||n===gt.CONNECTOR_TYPE_INJECTED){if(t){const i=this.getConnectors().find(o=>o.id===t);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(n===gt.CONNECTOR_TYPE_WALLET_CONNECT){const i=Ze.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(t)if(t===ee.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===ee.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}else this.setConnectedWalletInfo({name:t},e)}async syncBalance(e){!q1.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(n=>{var s;return n.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async updateNativeBalance(e,t,n){const s=this.getAdapter(n),i=$.getCaipNetworkByNamespace(n,t);if(s){const o=await s.getBalance({address:e,chainId:t,caipNetwork:i,tokens:this.options.tokens});this.setBalance(o.balance,o.symbol,n)}}async initializeUniversalAdapter(){var n,s,i,o,a,c,l,u,h,d;const e=b6.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),t={projectId:(n=this.options)==null?void 0:n.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(h=this.options)==null?void 0:h.metadata.icons:[""]},logger:e};X.setManualWCControl(!!((d=this.options)!=null&&d.manualWCControl)),this.universalProvider=this.options.universalProvider??await t0.init(t),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{At.setUri(e)}),this.universalProvider.on("connect",At.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),At.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const t=this.getCaipNetworks().find(s=>s.id==e),n=this.getCaipNetwork();if(!t){this.setUnsupportedNetwork(e);return}(n==null?void 0:n.id)!==(t==null?void 0:t.id)&&this.setCaipNetwork(t)}),this.universalProvider.on("session_event",e=>{if(i0.isSessionEventData(e)){const{name:t,data:n}=e.params.event;t==="accountsChanged"&&Array.isArray(n)&&Se.isCaipAddress(n[0])&&this.syncAccount(si.parseCaipAddress(n[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Se.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){mt.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const t=Object.entries(Gu.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[n,s]=t??[],{message:i,alertErrorKey:o}=s??{};if(n&&i&&!this.reportedAlertErrors[n]){const a=Gu.ALERT_ERRORS[o];a&&(eh.open(a,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){var t;if(e)return(t=this.chainAdapters)==null?void 0:t[e]}createAdapter(e){var s;if(!e)return;const t=e.namespace;if(!t)return;this.createClients();const n=e;n.namespace=t,n.construct({namespace:t,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=n)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&At.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Lt.open({...e,data:{swap:e.arguments}})}return Lt.open(e)}async close(){await this.injectModalUi(),Lt.close()}setLoading(e,t){Lt.setLoading(e,t)}async disconnect(e){await At.disconnect(e)}getError(){return""}getChainId(){var e;return(e=$.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const t=this.getCaipNetworks().find(n=>n.id===e.id);if(!t){eh.open(Gu.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await $.switchActiveNetwork(t)}getWalletProvider(){return $.state.activeChain?Ze.state.providers[$.state.activeChain]:null}getWalletProviderType(){return Ze.getProviderId($.state.activeChain)}subscribeProviders(e){return Ze.subscribeProviders(e)}getThemeMode(){return Ar.state.themeMode}getThemeVariables(){return Ar.state.themeVariables}setThemeMode(e){Ar.setThemeMode(e),GS(Ar.state.themeMode)}setTermsConditionsUrl(e){X.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){X.setPrivacyPolicyUrl(e)}setThemeVariables(e){Ar.setThemeVariables(e),KS(Ar.state.themeVariables)}subscribeTheme(e){return Ar.subscribe(e)}getWalletInfo(){return de.state.connectedWalletInfo}getAccount(e){var i;const t=De.getAuthConnector(e),n=$.getAccountData(e),s=$.state.activeChain;if(n)return{allAccounts:n.allAccounts,caipAddress:n.caipAddress,address:Se.getPlainAddress(n.caipAddress),isConnected:!!n.caipAddress,status:n.status,embeddedWalletInfo:t?{user:n.user?{...n.user,username:he.getConnectedSocialUsername()}:void 0,authProvider:n.socialProvider||"email",accountType:(i=n.preferredAccountTypes)==null?void 0:i[e||s],isSmartAccountDeployed:!!n.smartAccountDeployed}:void 0}}subscribeAccount(e,t){const n=()=>{const s=this.getAccount(t);s&&e(s)};t?$.subscribeChainProp("accountState",n,t):$.subscribe(n),De.subscribe(n)}subscribeNetwork(e){return $.subscribe(({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t==null?void 0:t.id,caipNetworkId:t==null?void 0:t.caipNetworkId})})}subscribeWalletInfo(e){return de.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){de.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){$.subscribeKey("activeCaipNetwork",e)}getState(){return qs.state}subscribeState(e){return qs.subscribe(e)}showErrorMessage(e){ur.showError(e)}showSuccessMessage(e){ur.showSuccess(e)}getEvent(){return{...mt.state}}subscribeEvents(e){return mt.subscribe(e)}replace(e){at.replace(e)}redirect(e){at.push(e)}popTransactionStack(e){at.popTransactionStack(e)}isOpen(){return Lt.state.open}isTransactionStackEmpty(){return at.state.transactionStack.length===0}isTransactionShouldReplaceView(){var e;return(e=at.state.transactionStack[at.state.transactionStack.length-1])==null?void 0:e.replace}static getInstance(){return this.instance}updateFeatures(e){X.setFeatures(e)}updateOptions(e){const n={...X.state||{},...e};X.setOptions(n)}setConnectMethodsOrder(e){X.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){X.setWalletFeaturesOrder(e)}setCollapseWallets(e){X.setCollapseWallets(e)}setSocialsOrder(e){X.setSocialsOrder(e)}getConnectMethodsOrder(){return zy.getConnectOrderMethod(X.state.features,De.getConnectors())}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const n=this.extendCaipNetwork(t,this.options);this.getCaipNetworks().find(s=>s.id===n.id)||$.addNetwork(n)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===t)&&$.removeNetwork(e,t)}}let eA=!1;class Gj extends Wj{setupAuthConnectorListeners(e){e.onRpcRequest(t=>{bn.checkIfRequestExists(t)?bn.checkIfRequestIsSafe(t)||this.handleUnsafeRPCRequest():(this.open(),console.error(Ht.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:t.method}),setTimeout(()=>{this.showErrorMessage(Ht.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack(!0))}),e.onRpcSuccess((t,n)=>{const s=bn.checkIfRequestIsSafe(n),i=de.state.address,o=$.state.activeCaipNetwork;s||(this.isTransactionStackEmpty()?(this.close(),i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace)):(this.popTransactionStack(),i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace)))}),e.onNotConnected(()=>{const t=$.state.activeChain;De.getConnectorId(t)===ee.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,t),this.setLoading(!1,t))}),e.onConnect(async t=>{var a,c;const n=$.state.activeChain,s=n===ee.CHAIN.EVM?`eip155:${t.chainId}:${t.address}`:`${t.chainId}:${t.address}`,i=t.preferredAccountType||((a=de.state.preferredAccountTypes)==null?void 0:a[n])||X.state.defaultAccountTypes[n];hg.isLowerCaseMatch(t.address,de.state.address)||this.syncIdentity({address:t.address,chainId:t.chainId,chainNamespace:n}),this.setCaipAddress(s,n),this.setUser({...de.state.user||{},...t},n),this.setSmartAccountDeployed(!!t.smartAccountDeployed,n),this.setPreferredAccountType(i,n);const o=(c=t.accounts)==null?void 0:c.map(l=>{var u;return Se.createAccount(n,l.address,l.type||((u=de.state.preferredAccountTypes)==null?void 0:u[n])||X.state.defaultAccountTypes[n])});this.setAllAccounts(o||[Se.createAccount(n,t.address,t.preferredAccountType||i)],n),await e.getSmartAccountEnabledNetworks(),this.setLoading(!1,n)}),e.onSocialConnected(({userName:t})=>{this.setUser({...de.state.user||{},username:t},$.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(t=>{this.setSmartAccountEnabledNetworks(t,$.state.activeChain)}),e.onSetPreferredAccount(({address:t,type:n})=>{t&&this.setPreferredAccountType(n,$.state.activeChain)})}async syncAuthConnector(e,t){var u,h,d,f;const n=ee.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t);if(!n)return;this.setLoading(!0,t);const s=e.getLoginEmailUsed();this.setLoading(s,t),s&&this.setStatus("connecting",t);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=de.state)==null?void 0:u.user)||{},username:o,email:i},$.state.activeChain),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=Ar.getSnapshot(),l=X.getSnapshot();e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:dh(c.themeVariables,c.themeMode)}),t&&n&&(a&&((h=this.connectionControllerClient)!=null&&h.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:ee.CONNECTOR_ID.AUTH,info:{name:ee.CONNECTOR_ID.AUTH},type:gt.CONNECTOR_TYPE_AUTH,provider:e,chainId:(d=$.state.activeCaipNetwork)==null?void 0:d.id,chain:t})),this.setStatus("connected",t)):De.getConnectorId(t)===ee.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",t),he.removeConnectedNamespace(t))),this.setLoading(!1,t)}async checkExistingTelegramSocialConnection(e){var t;try{if(!Se.isTelegram())return;const n=he.getTelegramSocialProvider();if(!n||typeof window>"u"||typeof document>"u")return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;de.setSocialProvider(n,e),await((t=this.authProvider)==null?void 0:t.init());const o=De.getAuthConnector();n&&o&&(this.setLoading(!0,e),await o.provider.connectSocial(i),await At.connectExternal(o,o.chain),he.setConnectedSocialProvider(n),he.removeTelegramSocialProvider(),mt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:n}}))}catch(n){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",n)}try{const n=new URL(window.location.href);n.searchParams.delete("result_uri"),window.history.replaceState({},document.title,n.toString())}catch(n){console.error("tma social login failed",n)}}createAuthProvider(e){var o,a,c,l,u,h,d,f,p,g,y,C,w;if(!ee.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const n=((a=(o=this.options)==null?void 0:o.features)==null?void 0:a.email)===void 0?Cr.DEFAULT_FEATURES.email:(l=(c=this.options)==null?void 0:c.features)==null?void 0:l.email,s=(h=(u=this.options)==null?void 0:u.features)!=null&&h.socials?((p=(f=(d=this.options)==null?void 0:d.features)==null?void 0:f.socials)==null?void 0:p.length)>0:Cr.DEFAULT_FEATURES.socials,i=n||s;!this.authProvider&&((g=this.options)!=null&&g.projectId)&&i&&(this.authProvider=ch.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(y=this.getCaipNetwork(e))==null?void 0:y.caipNetworkId,onTimeout:()=>{eh.open(Gu.ALERT_ERRORS.SOCIALS_TIMEOUT,"error")}}),qs.subscribeOpen(I=>{var U;!I&&this.isTransactionStackEmpty()&&((U=this.authProvider)==null||U.rejectRpcRequests())}),e===ee.CHAIN.EVM&&((C=de.state.preferredAccountTypes)!=null&&C.eip155)&&this.authProvider.setPreferredAccount((w=de.state.preferredAccountTypes)==null?void 0:w.eip155),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var t,n,s;this.createAuthProvider(e),this.authProvider&&((s=(n=(t=this.chainAdapters)==null?void 0:t[e])==null?void 0:n.setAuthProvider)==null||s.call(n,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Te.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var i,o;if(!e)return;const t=$.state.activeChain,n=e.chainNamespace,s=this.getAddressByChainNamespace(e.chainNamespace);if(e.chainNamespace===$.state.activeChain&&s){const a=this.getAdapter(n),c=Ze.getProvider(n),l=Ze.getProviderId(n);await(a==null?void 0:a.switchNetwork({caipNetwork:e,provider:c,providerType:l})),this.setCaipNetwork(e)}else{const c=Ze.getProviderId(t)===gt.CONNECTOR_TYPE_AUTH,l=Ze.getProviderId(n),u=l===gt.CONNECTOR_TYPE_AUTH,h=ee.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if((c||u)&&h)try{$.state.activeChain=e.chainNamespace,await((o=(i=this.connectionControllerClient)==null?void 0:i.connectExternal)==null?void 0:o.call(i,{id:ee.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:n,chainId:e.id,type:gt.CONNECTOR_TYPE_AUTH,caipNetwork:e})),this.setCaipNetwork(e)}catch{const f=this.getAdapter(n);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:l}))}else l===gt.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:n}))}}async initChainAdapter(e){await super.initChainAdapter(e),this.createAuthProviderForAdapter(e)}async syncIdentity({address:e,chainId:t,chainNamespace:n}){var o;const s=`${n}:${t}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(n!==ee.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,n),this.setProfileImage(null,n);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});if(this.setProfileName(a,n),this.setProfileImage(c,n),!a){const l=this.getAdapter(n),u=await(l==null?void 0:l.getProfile({address:e,chainId:Number(t)}));u!=null&&u.profileName?(this.setProfileName(u.profileName,n),u.profileImage&&this.setProfileImage(u.profileImage,n)):(await this.syncReownName(e,n),this.setProfileImage(null,n))}}catch{await this.syncReownName(e,n),t!==1&&this.setProfileImage(null,n)}}syncConnectedWalletInfo(e){const t=Ze.getProviderId(e);if(t===gt.CONNECTOR_TYPE_AUTH){const n=this.authProvider;if(n){const s=he.getConnectedSocialProvider()??"email",i=n.getEmail()??n.getUsername();this.setConnectedWalletInfo({name:t,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(!eA&&Se.isClient()){const e={...Cr.DEFAULT_FEATURES,...this.options.features},t=[];if(e&&((e.email||e.socials&&e.socials.length)&&t.push(kn(()=>import("./embedded-wallet-Bfb46yvi.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),e.email&&t.push(kn(()=>import("./email-dgjw1gFh.js"),__vite__mapDeps([14,1,2,3,4,12,8,11,7,15,9,13]))),e.socials&&t.push(kn(()=>import("./socials-DWPLKhLQ.js"),__vite__mapDeps([16,1,2,3,4,17,7,8,18,11,12,19,6,20,13]))),e.swaps&&t.push(kn(()=>import("./swaps-CkFccUmD.js"),__vite__mapDeps([21,1,2,3,4,7,8,22,23,24,6,11,20,9,13]))),e.send&&t.push(kn(()=>import("./send-BWjFFDZg.js"),__vite__mapDeps([25,1,2,3,4,7,8,11,12,24,6,9,26,13]))),e.receive&&t.push(kn(()=>import("./receive-diVF7SDE.js"),__vite__mapDeps([27,1,2,3,4,28,6,19,13]))),e.onramp&&t.push(kn(()=>import("./onramp-BCYP-SLc.js"),__vite__mapDeps([29,1,2,3,4,30,20,11,6,8,31,17,7,12,9,13]))),e.history&&t.push(kn(()=>import("./transactions-CJW27HZc.js"),__vite__mapDeps([32,1,2,3,4,33,30,20,11,12,6,13])))),await Promise.all([...t,kn(()=>import("./index-ZTKTKg8t.js"),__vite__mapDeps([34,1,2,3,4,6,8,26,11,35,23,10,31,7,33,30,20,12,22,9,15,17,18,5,28,19,13])),kn(()=>import("./w3m-modal--eGg_j5e.js"),__vite__mapDeps([36,1,2,3,4,10,6,11,8,23,35,13]))]),!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!X.state.disableAppend&&!X.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}eA=!0}}}const Kj="1.7.3";let bf;function Jj(r){return bf||(bf=new Gj({...r,sdkVersion:Se.generateSdkVersion(r.adapters??[],"react",Kj)}),JS(bf)),bf}const Qj="6.13.5";function Yj(r,e,t){const n=e.split("|").map(i=>i.trim());for(let i=0;i<n.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof r===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${t}`,s.value=r,s}async function Pr(r){const e=Object.keys(r);return(await Promise.all(e.map(n=>Promise.resolve(r[n])))).reduce((n,s,i)=>(n[e[i]]=s,n),{})}function Ae(r,e,t){for(let n in e){let s=e[n];const i=t?t[n]:null;i&&Yj(s,i,n),Object.defineProperty(r,n,{enumerable:!0,value:s,writable:!1})}}function jc(r){if(r==null)return"null";if(Array.isArray(r))return"[ "+r.map(jc).join(", ")+" ]";if(r instanceof Uint8Array){const e="0123456789abcdef";let t="0x";for(let n=0;n<r.length;n++)t+=e[r[n]>>4],t+=e[r[n]&15];return t}if(typeof r=="object"&&typeof r.toJSON=="function")return jc(r.toJSON());switch(typeof r){case"boolean":case"symbol":return r.toString();case"bigint":return BigInt(r).toString();case"number":return r.toString();case"string":return JSON.stringify(r);case"object":{const e=Object.keys(r);return e.sort(),"{ "+e.map(t=>`${jc(t)}: ${jc(r[t])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function dr(r,e){return r&&r.code===e}function a0(r){return dr(r,"CALL_EXCEPTION")}function Nt(r,e,t){let n=r;{const i=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${jc(t)}`);for(const o in t){if(o==="shortMessage")continue;const a=t[o];i.push(o+"="+jc(a))}}i.push(`code=${e}`),i.push(`version=${Qj}`),i.length&&(r+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(r);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(r);break;default:s=new Error(r)}return Ae(s,{code:e}),t&&Object.assign(s,t),s.shortMessage==null&&Ae(s,{shortMessage:n}),s}function W(r,e,t,n){if(!r)throw Nt(e,t,n)}function F(r,e,t,n){W(r,e,"INVALID_ARGUMENT",{argument:t,value:n})}function LI(r,e,t){t==null&&(t=""),t&&(t=": "+t),W(r>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:r,expectedCount:e}),W(r<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:r,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((r,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");r.push(e)}catch{}return r},[]);function Vd(r,e,t){if(t==null&&(t=""),r!==e){let n=t,s="new";t&&(n+=".",s+=" "+t),W(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function BI(r,e,t){if(r instanceof Uint8Array)return t?new Uint8Array(r):r;if(typeof r=="string"&&r.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((r.length-2)/2);let s=2;for(let i=0;i<n.length;i++)n[i]=parseInt(r.substring(s,s+2),16),s+=2;return n}F(!1,"invalid BytesLike value",e||"value",r)}function Ke(r,e){return BI(r,e,!1)}function xr(r,e){return BI(r,e,!0)}function wt(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&r.length!==2+2*e||e===!0&&r.length%2!==0)}function c0(r){return wt(r,!0)||r instanceof Uint8Array}const tA="0123456789abcdef";function fe(r){const e=Ke(r);let t="0x";for(let n=0;n<e.length;n++){const s=e[n];t+=tA[(s&240)>>4]+tA[s&15]}return t}function $t(r){return"0x"+r.map(e=>fe(e).substring(2)).join("")}function Jc(r){return wt(r,!0)?(r.length-2)/2:Ke(r).length}function Rt(r,e,t){const n=Ke(r);return t!=null&&t>n.length&&W(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:t}),fe(n.slice(e??0,t??n.length))}function MI(r,e,t){const n=Ke(r);W(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),t?s.set(n,e-n.length):s.set(n,0),fe(s)}function qa(r,e){return MI(r,e,!0)}function Zj(r,e){return MI(r,e,!1)}const fg=BigInt(0),ls=BigInt(1),Wy=9007199254740991;function wp(r,e){const t=pg(r,"value"),n=BigInt(Ue(e,"width"));if(W(t>>n===fg,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:r}),t>>n-ls){const s=(ls<<n)-ls;return-((~t&s)+ls)}return t}function $I(r,e){let t=me(r,"value");const n=BigInt(Ue(e,"width")),s=ls<<n-ls;if(t<fg){t=-t,W(t<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});const i=(ls<<n)-ls;return(~t&i)+ls}else W(t<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});return t}function ea(r,e){const t=pg(r,"value"),n=BigInt(Ue(e,"bits"));return t&(ls<<n)-ls}function me(r,e){switch(typeof r){case"bigint":return r;case"number":return F(Number.isInteger(r),"underflow",e||"value",r),F(r>=-9007199254740991&&r<=Wy,"overflow",e||"value",r),BigInt(r);case"string":try{if(r==="")throw new Error("empty string");return r[0]==="-"&&r[1]!=="-"?-BigInt(r.substring(1)):BigInt(r)}catch(t){F(!1,`invalid BigNumberish string: ${t.message}`,e||"value",r)}}F(!1,"invalid BigNumberish value",e||"value",r)}function pg(r,e){const t=me(r,e);return W(t>=fg,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:r}),t}const rA="0123456789abcdef";function gg(r){if(r instanceof Uint8Array){let e="0x0";for(const t of r)e+=rA[t>>4],e+=rA[t&15];return BigInt(e)}return me(r)}function Ue(r,e){switch(typeof r){case"bigint":return F(r>=-9007199254740991&&r<=Wy,"overflow",e||"value",r),Number(r);case"number":return F(Number.isInteger(r),"underflow",e||"value",r),F(r>=-9007199254740991&&r<=Wy,"overflow",e||"value",r),r;case"string":try{if(r==="")throw new Error("empty string");return Ue(BigInt(r),e)}catch(t){F(!1,`invalid numeric string: ${t.message}`,e||"value",r)}}F(!1,"invalid numeric value",e||"value",r)}function Xj(r){return Ue(gg(r))}function Oo(r,e){let n=pg(r,"value").toString(16);if(e==null)n.length%2&&(n="0"+n);else{const s=Ue(e,"width");for(W(s*2>=n.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:r});n.length<s*2;)n="0"+n}return"0x"+n}function kr(r){const e=pg(r,"value");if(e===fg)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const n=new Uint8Array(t.length/2);for(let s=0;s<n.length;s++){const i=s*2;n[s]=parseInt(t.substring(i,i+2),16)}return n}function Hc(r){let e=fe(c0(r)?r:kr(r)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const nA="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const sA=BigInt(58);function e7(r){const e=Ke(r);let t=gg(e),n="";for(;t;)n=nA[Number(t%sA)]+n,t/=sA;for(let s=0;s<e.length&&!e[s];s++)n=nA[0]+n;return n}function t7(r){r=atob(r);const e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return Ke(e)}function r7(r){const e=Ke(r);let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}var rl;class FI{constructor(e,t,n){H(this,"filter");H(this,"emitter");V(this,rl);D(this,rl,t),Ae(this,{emitter:e,filter:n})}async removeListener(){E(this,rl)!=null&&await this.emitter.off(this.filter,E(this,rl))}}rl=new WeakMap;function n7(r,e,t,n,s){F(!1,`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function jI(r,e,t,n,s){if(r==="BAD_PREFIX"||r==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)i++;return i}return r==="OVERRUN"?t.length-e-1:0}function s7(r,e,t,n,s){return r==="OVERLONG"?(F(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),n.push(s),0):(n.push(65533),jI(r,e,t))}const i7=Object.freeze({error:n7,ignore:jI,replace:s7});function o7(r,e){e==null&&(e=i7.error);const t=Ke(r,"bytes"),n=[];let s=0;for(;s<t.length;){const i=t[s++];if(i>>7===0){n.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,t,n):s+=e("BAD_PREFIX",s-1,t,n);continue}if(s-1+o>=t.length){s+=e("OVERRUN",s-1,t,n);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=t[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,t,n),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,t,n,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,t,n,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,t,n,c);continue}n.push(c)}}return n}function zs(r,e){F(typeof r=="string","invalid string value","str",r);let t=[];for(let n=0;n<r.length;n++){const s=r.charCodeAt(n);if(s<128)t.push(s);else if(s<2048)t.push(s>>6|192),t.push(s&63|128);else if((s&64512)==55296){n++;const i=r.charCodeAt(n);F(n<r.length&&(i&64512)===56320,"invalid surrogate pair","str",r);const o=65536+((s&1023)<<10)+(i&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(s>>12|224),t.push(s>>6&63|128),t.push(s&63|128)}return new Uint8Array(t)}function a7(r){return r.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function bp(r,e){return a7(o7(r,e))}function HI(r){async function e(t,n){W(n==null||!n.cancelled,"request cancelled before sending","CANCELLED");const s=t.url.split(":")[0].toLowerCase();W(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),W(s==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=Nt("request timeout","TIMEOUT"),o.abort()},t.timeout);n&&n.addListener(()=>{i=Nt("request cancelled","CANCELLED"),o.abort()});const c={method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:o.signal};let l;try{l=await fetch(t.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const h=await l.arrayBuffer(),d=h==null?null:new Uint8Array(h);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:d}}return e}const c7=12,l7=250;let iA=HI();const u7=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),h7=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Sm=!1;async function VI(r,e){try{const t=r.match(u7);if(!t)throw new Error("invalid data");return new Io(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?t7(t[3]):f7(t[3]))}catch{return new Io(599,"BAD REQUEST (invalid data: URI)",{},null,new Qs(r))}}function qI(r){async function e(t,n){try{const s=t.match(h7);if(!s)throw new Error("invalid link");return new Qs(`${r}${s[2]}`)}catch{return new Io(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Qs(t))}}return e}const Ef={data:VI,ipfs:qI("https://gateway.ipfs.io/ipfs/")},zI=new WeakMap;var sa,Xi;class d7{constructor(e){V(this,sa);V(this,Xi);D(this,sa,[]),D(this,Xi,!1),zI.set(e,()=>{if(!E(this,Xi)){D(this,Xi,!0);for(const t of E(this,sa))setTimeout(()=>{t()},0);D(this,sa,[])}})}addListener(e){W(!E(this,Xi),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),E(this,sa).push(e)}get cancelled(){return E(this,Xi)}checkSignal(){W(!this.cancelled,"cancelled","CANCELLED",{})}}sa=new WeakMap,Xi=new WeakMap;function vf(r){if(r==null)throw new Error("missing signal; should not happen");return r.checkSignal(),r}var nl,sl,rs,di,il,ol,Qt,fn,fi,ia,oa,aa,Os,ns,eo,ca,Ku;const Bp=class Bp{constructor(e){V(this,ca);V(this,nl);V(this,sl);V(this,rs);V(this,di);V(this,il);V(this,ol);V(this,Qt);V(this,fn);V(this,fi);V(this,ia);V(this,oa);V(this,aa);V(this,Os);V(this,ns);V(this,eo);D(this,ol,String(e)),D(this,nl,!1),D(this,sl,!0),D(this,rs,{}),D(this,di,""),D(this,il,3e5),D(this,ns,{slotInterval:l7,maxAttempts:c7}),D(this,eo,null)}get url(){return E(this,ol)}set url(e){D(this,ol,String(e))}get body(){return E(this,Qt)==null?null:new Uint8Array(E(this,Qt))}set body(e){if(e==null)D(this,Qt,void 0),D(this,fn,void 0);else if(typeof e=="string")D(this,Qt,zs(e)),D(this,fn,"text/plain");else if(e instanceof Uint8Array)D(this,Qt,e),D(this,fn,"application/octet-stream");else if(typeof e=="object")D(this,Qt,zs(JSON.stringify(e))),D(this,fn,"application/json");else throw new Error("invalid body")}hasBody(){return E(this,Qt)!=null}get method(){return E(this,di)?E(this,di):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),D(this,di,String(e).toUpperCase())}get headers(){const e=Object.assign({},E(this,rs));return E(this,fi)&&(e.authorization=`Basic ${r7(zs(E(this,fi)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&E(this,fn)&&(e["content-type"]=E(this,fn)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){E(this,rs)[String(e).toLowerCase()]=String(t)}clearHeaders(){D(this,rs,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const s=t[n++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return E(this,fi)||null}setCredentials(e,t){F(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),D(this,fi,`${e}:${t}`)}get allowGzip(){return E(this,sl)}set allowGzip(e){D(this,sl,!!e)}get allowInsecureAuthentication(){return!!E(this,nl)}set allowInsecureAuthentication(e){D(this,nl,!!e)}get timeout(){return E(this,il)}set timeout(e){F(e>=0,"timeout must be non-zero","timeout",e),D(this,il,e)}get preflightFunc(){return E(this,ia)||null}set preflightFunc(e){D(this,ia,e)}get processFunc(){return E(this,oa)||null}set processFunc(e){D(this,oa,e)}get retryFunc(){return E(this,aa)||null}set retryFunc(e){D(this,aa,e)}get getUrlFunc(){return E(this,eo)||iA}set getUrlFunc(e){D(this,eo,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${E(this,Qt)?fe(E(this,Qt)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(E(this,ns).slotInterval=e.slotInterval),e.maxAttempts!=null&&(E(this,ns).maxAttempts=e.maxAttempts)}send(){return W(E(this,Os)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),D(this,Os,new d7(this)),J(this,ca,Ku).call(this,0,oA()+this.timeout,0,this,new Io(0,"",{},null,this))}cancel(){W(E(this,Os)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=zI.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();W(this.method==="GET"&&(t!=="https"||n!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new Bp(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,D(s,rs,Object.assign({},E(this,rs))),E(this,Qt)&&D(s,Qt,new Uint8Array(E(this,Qt))),D(s,fn,E(this,fn)),s}clone(){const e=new Bp(this.url);return D(e,di,E(this,di)),E(this,Qt)&&D(e,Qt,E(this,Qt)),D(e,fn,E(this,fn)),D(e,rs,Object.assign({},E(this,rs))),D(e,fi,E(this,fi)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),D(e,ia,E(this,ia)),D(e,oa,E(this,oa)),D(e,aa,E(this,aa)),D(e,ns,Object.assign({},E(this,ns))),D(e,eo,E(this,eo)),e}static lockConfig(){Sm=!0}static getGateway(e){return Ef[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(Sm)throw new Error("gateways locked");Ef[e]=t}static registerGetUrl(e){if(Sm)throw new Error("gateways locked");iA=e}static createGetUrlFunc(e){return HI()}static createDataGateway(){return VI}static createIpfsGatewayFunc(e){return qI(e)}};nl=new WeakMap,sl=new WeakMap,rs=new WeakMap,di=new WeakMap,il=new WeakMap,ol=new WeakMap,Qt=new WeakMap,fn=new WeakMap,fi=new WeakMap,ia=new WeakMap,oa=new WeakMap,aa=new WeakMap,Os=new WeakMap,ns=new WeakMap,eo=new WeakMap,ca=new WeakSet,Ku=async function(e,t,n,s,i){var u,h,d;if(e>=E(this,ns).maxAttempts)return i.makeServerError("exceeded maximum retry limit");W(oA()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),n>0&&await p7(n);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in Ef){const f=await Ef[a](o.url,vf(E(s,Os)));if(f instanceof Io){let p=f;if(this.processFunc){vf(E(s,Os));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,vf(E(s,Os)));let l=new Io(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return J(u=o.redirect(f),ca,Ku).call(u,e+1,t,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=E(this,ns).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),J(h=o.clone(),ca,Ku).call(h,e+1,t,p,s,l)}if(this.processFunc){vf(E(s,Os));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=E(this,ns).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),J(d=o.clone(),ca,Ku).call(d,e+1,t,p,s,l)}}return l};let Qs=Bp;var dd,fd,pd,pn,al,la;const P0=class P0{constructor(e,t,n,s,i){V(this,dd);V(this,fd);V(this,pd);V(this,pn);V(this,al);V(this,la);D(this,dd,e),D(this,fd,t),D(this,pd,Object.keys(n).reduce((o,a)=>(o[a.toLowerCase()]=String(n[a]),o),{})),D(this,pn,s==null?null:new Uint8Array(s)),D(this,al,i||null),D(this,la,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${E(this,pn)?fe(E(this,pn)):"null"}>`}get statusCode(){return E(this,dd)}get statusMessage(){return E(this,fd)}get headers(){return Object.assign({},E(this,pd))}get body(){return E(this,pn)==null?null:new Uint8Array(E(this,pn))}get bodyText(){try{return E(this,pn)==null?"":bp(E(this,pn))}catch{W(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{W(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const s=t[n++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,t){let n;e?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new P0(599,n,this.headers,this.body,E(this,al)||void 0);return D(s,la,{message:e,error:t}),s}throwThrottleError(e,t){t==null?t=-1:F(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const n=new Error(e||"throttling requests");throw Ae(n,{stall:t,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return E(this,pn)!=null}get request(){return E(this,al)}ok(){return E(this,la).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=E(this,la);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let s=null;try{E(this,pn)&&(s=bp(E(this,pn)))}catch{}W(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:n,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};dd=new WeakMap,fd=new WeakMap,pd=new WeakMap,pn=new WeakMap,al=new WeakMap,la=new WeakMap;let Io=P0;function oA(){return new Date().getTime()}function f7(r){return zs(r.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function p7(r){return new Promise(e=>setTimeout(e,r))}const g7=BigInt(-1),Xn=BigInt(0),Vc=BigInt(1),m7=BigInt(5),Ic={};let Qc="0000";for(;Qc.length<80;)Qc+=Qc;function Bo(r){let e=Qc;for(;e.length<r;)e+=e;return BigInt("1"+e.substring(0,r))}function Mu(r,e,t){const n=BigInt(e.width);if(e.signed){const s=Vc<<n-Vc;W(t==null||r>=-s&&r<s,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:r}),r>Xn?r=wp(ea(r,n),n):r=-wp(ea(-r,n),n)}else{const s=Vc<<n;W(t==null||r>=0&&r<s,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:r}),r=(r%s+s)%s&s-Vc}return r}function Tm(r){typeof r=="number"&&(r=`fixed128x${r}`);let e=!0,t=128,n=18;if(typeof r=="string"){if(r!=="fixed")if(r==="ufixed")e=!1;else{const i=r.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);F(i,"invalid fixed format","format",r),e=i[1]!=="u",t=parseInt(i[2]),n=parseInt(i[3])}}else if(r){const i=r,o=(a,c,l)=>i[a]==null?l:(F(typeof i[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,i[a]),i[a]);e=o("signed","boolean",e),t=o("width","number",t),n=o("decimals","number",n)}F(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),F(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const s=(e?"":"u")+"fixed"+String(t)+"x"+String(n);return{signed:e,width:t,decimals:n,name:s}}function y7(r,e){let t="";r<Xn&&(t="-",r*=g7);let n=r.toString();if(e===0)return t+n;for(;n.length<=e;)n=Qc+n;const s=n.length-e;for(n=n.substring(0,s)+"."+n.substring(s);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return t+n}var ss,lt,Tr,nt,jo,oi,Gy,Ky,Jy,Qy;const Qi=class Qi{constructor(e,t,n){V(this,nt);H(this,"format");V(this,ss);V(this,lt);V(this,Tr);H(this,"_value");Vd(e,Ic,"FixedNumber"),D(this,lt,t),D(this,ss,n);const s=y7(t,n.decimals);Ae(this,{format:n.name,_value:s}),D(this,Tr,Bo(n.decimals))}get signed(){return E(this,ss).signed}get width(){return E(this,ss).width}get decimals(){return E(this,ss).decimals}get value(){return E(this,lt)}addUnsafe(e){return J(this,nt,Gy).call(this,e)}add(e){return J(this,nt,Gy).call(this,e,"add")}subUnsafe(e){return J(this,nt,Ky).call(this,e)}sub(e){return J(this,nt,Ky).call(this,e,"sub")}mulUnsafe(e){return J(this,nt,Jy).call(this,e)}mul(e){return J(this,nt,Jy).call(this,e,"mul")}mulSignal(e){J(this,nt,jo).call(this,e);const t=E(this,lt)*E(e,lt);return W(t%E(this,Tr)===Xn,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),J(this,nt,oi).call(this,t/E(this,Tr),"mulSignal")}divUnsafe(e){return J(this,nt,Qy).call(this,e)}div(e){return J(this,nt,Qy).call(this,e,"div")}divSignal(e){W(E(e,lt)!==Xn,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),J(this,nt,jo).call(this,e);const t=E(this,lt)*E(this,Tr);return W(t%E(e,lt)===Xn,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),J(this,nt,oi).call(this,t/E(e,lt),"divSignal")}cmp(e){let t=this.value,n=e.value;const s=this.decimals-e.decimals;return s>0?n*=Bo(s):s<0&&(t*=Bo(-s)),t<n?-1:t>n?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=E(this,lt);return E(this,lt)<Xn&&(e-=E(this,Tr)-Vc),e=E(this,lt)/E(this,Tr)*E(this,Tr),J(this,nt,oi).call(this,e,"floor")}ceiling(){let e=E(this,lt);return E(this,lt)>Xn&&(e+=E(this,Tr)-Vc),e=E(this,lt)/E(this,Tr)*E(this,Tr),J(this,nt,oi).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,n=m7*Bo(t-1);let s=this.value+n;const i=Bo(t);return s=s/i*i,Mu(s,E(this,ss),"round"),new Qi(Ic,s,E(this,ss))}isZero(){return E(this,lt)===Xn}isNegative(){return E(this,lt)<Xn}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Qi.fromString(this.toString(),e)}static fromValue(e,t,n){const s=t==null?0:Ue(t),i=Tm(n);let o=me(e,"value");const a=s-i.decimals;if(a>0){const c=Bo(a);W(o%c===Xn,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=c}else a<0&&(o*=Bo(-a));return Mu(o,i,"fromValue"),new Qi(Ic,o,i)}static fromString(e,t){const n=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);F(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",e);const s=Tm(t);let i=n[2]||"0",o=n[3]||"";for(;o.length<s.decimals;)o+=Qc;W(o.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,s.decimals);const a=BigInt(n[1]+i+o);return Mu(a,s,"fromString"),new Qi(Ic,a,s)}static fromBytes(e,t){let n=gg(Ke(e,"value"));const s=Tm(t);return s.signed&&(n=wp(n,s.width)),Mu(n,s,"fromBytes"),new Qi(Ic,n,s)}};ss=new WeakMap,lt=new WeakMap,Tr=new WeakMap,nt=new WeakSet,jo=function(e){F(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},oi=function(e,t){return e=Mu(e,E(this,ss),t),new Qi(Ic,e,E(this,ss))},Gy=function(e,t){return J(this,nt,jo).call(this,e),J(this,nt,oi).call(this,E(this,lt)+E(e,lt),t)},Ky=function(e,t){return J(this,nt,jo).call(this,e),J(this,nt,oi).call(this,E(this,lt)-E(e,lt),t)},Jy=function(e,t){return J(this,nt,jo).call(this,e),J(this,nt,oi).call(this,E(this,lt)*E(e,lt)/E(this,Tr),t)},Qy=function(e,t){return W(E(e,lt)!==Xn,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),J(this,nt,jo).call(this,e),J(this,nt,oi).call(this,E(this,lt)*E(this,Tr)/E(e,lt),t)};let Ep=Qi;function w7(r){let e=r.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function aA(r,e,t){let n=0;for(let s=0;s<t;s++)n=n*256+r[e+s];return n}function cA(r,e,t,n){const s=[];for(;t<e+1+n;){const i=WI(r,t);s.push(i.result),t+=i.consumed,W(t<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:r,length:n,offset:e})}return{consumed:1+n,result:s}}function WI(r,e){W(r.length!==0,"data too short","BUFFER_OVERRUN",{buffer:r,length:0,offset:1});const t=n=>{W(n<=r.length,"data short segment too short","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n})};if(r[e]>=248){const n=r[e]-247;t(e+1+n);const s=aA(r,e+1,n);return t(e+1+n+s),cA(r,e,e+1+n,n+s)}else if(r[e]>=192){const n=r[e]-192;return t(e+1+n),cA(r,e,e+1,n)}else if(r[e]>=184){const n=r[e]-183;t(e+1+n);const s=aA(r,e+1,n);t(e+1+n+s);const i=fe(r.slice(e+1+n,e+1+n+s));return{consumed:1+n+s,result:i}}else if(r[e]>=128){const n=r[e]-128;t(e+1+n);const s=fe(r.slice(e+1,e+1+n));return{consumed:1+n,result:s}}return{consumed:1,result:w7(r[e])}}function mg(r){const e=Ke(r,"data"),t=WI(e,0);return F(t.consumed===e.length,"unexpected junk after rlp payload","data",r),t.result}function lA(r){const e=[];for(;r;)e.unshift(r&255),r>>=8;return e}function GI(r){if(Array.isArray(r)){let n=[];if(r.forEach(function(i){n=n.concat(GI(i))}),n.length<=55)return n.unshift(192+n.length),n;const s=lA(n.length);return s.unshift(247+s.length),s.concat(n)}const e=Array.prototype.slice.call(Ke(r,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=lA(e.length);return t.unshift(183+t.length),t.concat(e)}const uA="0123456789abcdef";function za(r){let e="0x";for(const t of GI(r))e+=uA[t>>4],e+=uA[t&15];return e}const KI=["wei","kwei","mwei","gwei","szabo","finney","ether"];function JI(r,e){let t=18;if(typeof e=="string"){const n=KI.indexOf(e);F(n>=0,"invalid unit","unit",e),t=3*n}else e!=null&&(t=Ue(e,"unit"));return Ep.fromValue(r,t,{decimals:t,width:512}).toString()}function b7(r,e){F(typeof r=="string","value must be a string","value",r);let t=18;if(typeof e=="string"){const n=KI.indexOf(e);F(n>=0,"invalid unit","unit",e),t=3*n}else e!=null&&(t=Ue(e,"unit"));return Ep.fromString(r,{decimals:t,width:512}).value}function E7(r){return JI(r,18)}const Dr=32,Yy=new Uint8Array(Dr),v7=["then"],Af={},QI=new WeakMap;function Go(r){return QI.get(r)}function hA(r,e){QI.set(r,e)}function $u(r,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${r}`);throw t.error=e,t}function Zy(r,e,t){return r.indexOf(null)>=0?e.map((n,s)=>n instanceof ru?Zy(Go(n),n,t):n):r.reduce((n,s,i)=>{let o=e.getValue(s);return s in n||(t&&o instanceof ru&&(o=Zy(Go(o),o,t)),n[s]=o),n},{})}var cl;const qc=class qc extends Array{constructor(...t){const n=t[0];let s=t[1],i=(t[2]||[]).slice(),o=!0;n!==Af&&(s=t,i=[],o=!1);super(s.length);V(this,cl);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(hA(this,Object.freeze(s.map((l,u)=>{const h=i[u];return h!=null&&a.get(h)===1?h:null}))),D(this,cl,[]),E(this,cl)==null&&E(this,cl),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,h)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=Ue(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&$u(`index ${f}`,p),p}if(v7.indexOf(u)>=0)return Reflect.get(l,u,h);const d=l[u];if(d instanceof Function)return function(...f){return d.apply(this===h?l:this,f)};if(!(u in l))return l.getValue.apply(this===h?l:this,[u])}return Reflect.get(l,u,h)}});return hA(c,Go(this)),c}toArray(t){const n=[];return this.forEach((s,i)=>{s instanceof Error&&$u(`index ${i}`,s),t&&s instanceof qc&&(s=s.toArray(t)),n.push(s)}),n}toObject(t){const n=Go(this);return n.reduce((s,i,o)=>(W(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),Zy(n,this,t)),{})}slice(t,n){t==null&&(t=0),t<0&&(t+=this.length,t<0&&(t=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const s=Go(this),i=[],o=[];for(let a=t;a<n;a++)i.push(this[a]),o.push(s[a]);return new qc(Af,i,o)}filter(t,n){const s=Go(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&$u(`index ${a}`,c),t.call(n,c,a,this)&&(i.push(c),o.push(s[a]))}return new qc(Af,i,o)}map(t,n){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&$u(`index ${i}`,o),s.push(t.call(n,o,i,this))}return s}getValue(t){const n=Go(this).indexOf(t);if(n===-1)return;const s=this[n];return s instanceof Error&&$u(`property ${JSON.stringify(t)}`,s.error),s}static fromItems(t,n){return new qc(Af,t,n)}};cl=new WeakMap;let ru=qc;function dA(r){let e=kr(r);return W(e.length<=Dr,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Dr,offset:e.length}),e.length!==Dr&&(e=xr($t([Yy.slice(e.length%Dr),e]))),e}class Ui{constructor(e,t,n,s){H(this,"name");H(this,"type");H(this,"localName");H(this,"dynamic");Ae(this,{name:e,type:t,localName:n,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){F(!1,e,this.localName,t)}}var pi,ua,ll,Vf;class Xy{constructor(){V(this,ll);V(this,pi);V(this,ua);D(this,pi,[]),D(this,ua,0)}get data(){return $t(E(this,pi))}get length(){return E(this,ua)}appendWriter(e){return J(this,ll,Vf).call(this,xr(e.data))}writeBytes(e){let t=xr(e);const n=t.length%Dr;return n&&(t=xr($t([t,Yy.slice(n)]))),J(this,ll,Vf).call(this,t)}writeValue(e){return J(this,ll,Vf).call(this,dA(e))}writeUpdatableValue(){const e=E(this,pi).length;return E(this,pi).push(Yy),D(this,ua,E(this,ua)+Dr),t=>{E(this,pi)[e]=dA(t)}}}pi=new WeakMap,ua=new WeakMap,ll=new WeakSet,Vf=function(e){return E(this,pi).push(e),D(this,ua,E(this,ua)+e.length),e.length};var Gr,gn,ha,da,to,Ya,tw,YI;const x0=class x0{constructor(e,t,n){V(this,Ya);H(this,"allowLoose");V(this,Gr);V(this,gn);V(this,ha);V(this,da);V(this,to);Ae(this,{allowLoose:!!t}),D(this,Gr,xr(e)),D(this,ha,0),D(this,da,null),D(this,to,n??1024),D(this,gn,0)}get data(){return fe(E(this,Gr))}get dataLength(){return E(this,Gr).length}get consumed(){return E(this,gn)}get bytes(){return new Uint8Array(E(this,Gr))}subReader(e){const t=new x0(E(this,Gr).slice(E(this,gn)+e),this.allowLoose,E(this,to));return D(t,da,this),t}readBytes(e,t){let n=J(this,Ya,YI).call(this,0,e,!!t);return J(this,Ya,tw).call(this,e),D(this,gn,E(this,gn)+n.length),n.slice(0,e)}readValue(){return gg(this.readBytes(Dr))}readIndex(){return Xj(this.readBytes(Dr))}};Gr=new WeakMap,gn=new WeakMap,ha=new WeakMap,da=new WeakMap,to=new WeakMap,Ya=new WeakSet,tw=function(e){var t;if(E(this,da))return J(t=E(this,da),Ya,tw).call(t,e);D(this,ha,E(this,ha)+e),W(E(this,to)<1||E(this,ha)<=E(this,to)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${E(this,to)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:xr(E(this,Gr)),offset:E(this,gn),length:e,info:{bytesRead:E(this,ha),dataLength:this.dataLength}})},YI=function(e,t,n){let s=Math.ceil(t/Dr)*Dr;return E(this,gn)+s>E(this,Gr).length&&(this.allowLoose&&n&&E(this,gn)+t<=E(this,Gr).length?s=t:W(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:xr(E(this,Gr)),length:E(this,Gr).length,offset:E(this,gn)+s})),E(this,Gr).slice(E(this,gn),E(this,gn)+s)};let ew=x0;function vp(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function l0(r,...e){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(r.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${r.length}`)}function A7(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");vp(r.outputLen),vp(r.blockLen)}function nu(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function ZI(r,e){l0(r);const t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Om=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const XI=r=>r instanceof Uint8Array,C7=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),Pm=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),Is=(r,e)=>r<<32-e|r>>>e,_7=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!_7)throw new Error("Non little-endian hardware is not supported");function I7(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function yg(r){if(typeof r=="string"&&(r=I7(r)),!XI(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function N7(...r){const e=new Uint8Array(r.reduce((n,s)=>n+s.length,0));let t=0;return r.forEach(n=>{if(!XI(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}class u0{clone(){return this._cloneInto()}}function h0(r){const e=n=>r().update(yg(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function S7(r=32){if(Om&&typeof Om.getRandomValues=="function")return Om.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}class eN extends u0{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,A7(e);const n=yg(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return nu(this),this.iHash.update(e),this}digestInto(e){nu(this),l0(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const tN=(r,e,t)=>new eN(r,e).update(t).digest();tN.create=(r,e)=>new eN(r,e);function T7(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),a=Number(t&i),c=n?4:0,l=n?0:4;r.setUint32(e+c,o,n),r.setUint32(e+l,a,n)}class rN extends u0{constructor(e,t,n,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Pm(this.buffer)}update(e){nu(this);const{view:t,buffer:n,blockLen:s}=this;e=yg(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Pm(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){nu(this),ZI(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let h=o;h<s;h++)t[h]=0;T7(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=Pm(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%t&&e.buffer.set(n),e}}const O7=(r,e,t)=>r&e^~r&t,P7=(r,e,t)=>r&e^r&t^e&t,x7=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ji=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Hi=new Uint32Array(64);class R7 extends rN{constructor(){super(64,32,8,!1),this.A=ji[0]|0,this.B=ji[1]|0,this.C=ji[2]|0,this.D=ji[3]|0,this.E=ji[4]|0,this.F=ji[5]|0,this.G=ji[6]|0,this.H=ji[7]|0}get(){const{A:e,B:t,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,t,n,s,i,o,a,c]}set(e,t,n,s,i,o,a,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let h=0;h<16;h++,t+=4)Hi[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){const d=Hi[h-15],f=Hi[h-2],p=Is(d,7)^Is(d,18)^d>>>3,g=Is(f,17)^Is(f,19)^f>>>10;Hi[h]=g+Hi[h-7]+p+Hi[h-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const d=Is(a,6)^Is(a,11)^Is(a,25),f=u+d+O7(a,c,l)+x7[h]+Hi[h]|0,g=(Is(n,2)^Is(n,13)^Is(n,22))+P7(n,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=n,n=f+g|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,s,i,o,a,c,l,u)}roundClean(){Hi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const nN=h0(()=>new R7),Cf=BigInt(2**32-1),rw=BigInt(32);function sN(r,e=!1){return e?{h:Number(r&Cf),l:Number(r>>rw&Cf)}:{h:Number(r>>rw&Cf)|0,l:Number(r&Cf)|0}}function iN(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:i,l:o}=sN(r[s],e);[t[s],n[s]]=[i,o]}return[t,n]}const k7=(r,e)=>BigInt(r>>>0)<<rw|BigInt(e>>>0),D7=(r,e,t)=>r>>>t,U7=(r,e,t)=>r<<32-t|e>>>t,L7=(r,e,t)=>r>>>t|e<<32-t,B7=(r,e,t)=>r<<32-t|e>>>t,M7=(r,e,t)=>r<<64-t|e>>>t-32,$7=(r,e,t)=>r>>>t-32|e<<64-t,F7=(r,e)=>e,j7=(r,e)=>r,oN=(r,e,t)=>r<<t|e>>>32-t,aN=(r,e,t)=>e<<t|r>>>32-t,cN=(r,e,t)=>e<<t-32|r>>>64-t,lN=(r,e,t)=>r<<t-32|e>>>64-t;function H7(r,e,t,n){const s=(e>>>0)+(n>>>0);return{h:r+t+(s/2**32|0)|0,l:s|0}}const V7=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),q7=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,z7=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),W7=(r,e,t,n,s)=>e+t+n+s+(r/2**32|0)|0,G7=(r,e,t,n,s)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),K7=(r,e,t,n,s,i)=>e+t+n+s+i+(r/2**32|0)|0,$e={fromBig:sN,split:iN,toBig:k7,shrSH:D7,shrSL:U7,rotrSH:L7,rotrSL:B7,rotrBH:M7,rotrBL:$7,rotr32H:F7,rotr32L:j7,rotlSH:oN,rotlSL:aN,rotlBH:cN,rotlBL:lN,add:H7,add3L:V7,add3H:q7,add4L:z7,add4H:W7,add5H:K7,add5L:G7},[J7,Q7]=$e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Vi=new Uint32Array(80),qi=new Uint32Array(80);class Y7 extends rN{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:h,Fl:d,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,t,n,s,i,o,a,c,l,u,h,d,f,p,g,y]}set(e,t,n,s,i,o,a,c,l,u,h,d,f,p,g,y){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=h|0,this.Fl=d|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,t){for(let I=0;I<16;I++,t+=4)Vi[I]=e.getUint32(t),qi[I]=e.getUint32(t+=4);for(let I=16;I<80;I++){const U=Vi[I-15]|0,M=qi[I-15]|0,B=$e.rotrSH(U,M,1)^$e.rotrSH(U,M,8)^$e.shrSH(U,M,7),L=$e.rotrSL(U,M,1)^$e.rotrSL(U,M,8)^$e.shrSL(U,M,7),m=Vi[I-2]|0,b=qi[I-2]|0,N=$e.rotrSH(m,b,19)^$e.rotrBH(m,b,61)^$e.shrSH(m,b,6),_=$e.rotrSL(m,b,19)^$e.rotrBL(m,b,61)^$e.shrSL(m,b,6),S=$e.add4L(L,_,qi[I-7],qi[I-16]),k=$e.add4H(S,B,N,Vi[I-7],Vi[I-16]);Vi[I]=k|0,qi[I]=S|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:h,El:d,Fh:f,Fl:p,Gh:g,Gl:y,Hh:C,Hl:w}=this;for(let I=0;I<80;I++){const U=$e.rotrSH(h,d,14)^$e.rotrSH(h,d,18)^$e.rotrBH(h,d,41),M=$e.rotrSL(h,d,14)^$e.rotrSL(h,d,18)^$e.rotrBL(h,d,41),B=h&f^~h&g,L=d&p^~d&y,m=$e.add5L(w,M,L,Q7[I],qi[I]),b=$e.add5H(m,C,U,B,J7[I],Vi[I]),N=m|0,_=$e.rotrSH(n,s,28)^$e.rotrBH(n,s,34)^$e.rotrBH(n,s,39),S=$e.rotrSL(n,s,28)^$e.rotrBL(n,s,34)^$e.rotrBL(n,s,39),k=n&i^n&a^i&a,P=s&o^s&c^o&c;C=g|0,w=y|0,g=f|0,y=p|0,f=h|0,p=d|0,{h,l:d}=$e.add(l|0,u|0,b|0,N|0),l=a|0,u=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const v=$e.add3L(N,S,P);n=$e.add3H(v,b,_,k),s=v|0}({h:n,l:s}=$e.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=$e.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=$e.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=$e.add(this.Dh|0,this.Dl|0,l|0,u|0),{h,l:d}=$e.add(this.Eh|0,this.El|0,h|0,d|0),{h:f,l:p}=$e.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=$e.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:C,l:w}=$e.add(this.Hh|0,this.Hl|0,C|0,w|0),this.set(n,s,i,o,a,c,l,u,h,d,f,p,g,y,C,w)}roundClean(){Vi.fill(0),qi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Z7=h0(()=>new Y7);function X7(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof Ee<"u")return Ee;throw new Error("unable to locate global object")}const fA=X7();fA.crypto||fA.msCrypto;function eH(r){switch(r){case"sha256":return nN.create();case"sha512":return Z7.create()}F(!1,"invalid hashing algorithm name","algorithm",r)}const[uN,hN,dN]=[[],[],[]],tH=BigInt(0),Fu=BigInt(1),rH=BigInt(2),nH=BigInt(7),sH=BigInt(256),iH=BigInt(113);for(let r=0,e=Fu,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],uN.push(2*(5*n+t)),hN.push((r+1)*(r+2)/2%64);let s=tH;for(let i=0;i<7;i++)e=(e<<Fu^(e>>nH)*iH)%sH,e&rH&&(s^=Fu<<(Fu<<BigInt(i))-Fu);dN.push(s)}const[oH,aH]=iN(dN,!0),pA=(r,e,t)=>t>32?cN(r,e,t):oN(r,e,t),gA=(r,e,t)=>t>32?lN(r,e,t):aN(r,e,t);function cH(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=t[c],u=t[c+1],h=pA(l,u,1)^t[a],d=gA(l,u,1)^t[a+1];for(let f=0;f<50;f+=10)r[o+f]^=h,r[o+f+1]^=d}let s=r[2],i=r[3];for(let o=0;o<24;o++){const a=hN[o],c=pA(s,i,a),l=gA(s,i,a),u=uN[o];s=r[u],i=r[u+1],r[u]=c,r[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}r[0]^=oH[n],r[1]^=aH[n]}t.fill(0)}class d0 extends u0{constructor(e,t,n,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,vp(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=C7(this.state)}keccak(){cH(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){nu(this);const{blockLen:t,state:n}=this;e=yg(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(t-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,(t&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){nu(this,!1),l0(e),this.finish();const t=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return vp(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ZI(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new d0(t,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const lH=(r,e,t)=>h0(()=>new d0(e,r,t)),uH=lH(1,136,256/8);let fN=!1;const pN=function(r){return uH(r)};let gN=pN;function Vt(r){const e=Ke(r,"data");return fe(gN(e))}Vt._=pN;Vt.lock=function(){fN=!0};Vt.register=function(r){if(fN)throw new TypeError("keccak256 is locked");gN=r};Object.freeze(Vt);const mN=function(r){return eH("sha256").update(r).digest()};let yN=mN,wN=!1;function bu(r){const e=Ke(r,"data");return fe(yN(e))}bu._=mN;bu.lock=function(){wN=!0};bu.register=function(r){if(wN)throw new Error("sha256 is locked");yN=r};Object.freeze(bu);Object.freeze(bu);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bN=BigInt(0),wg=BigInt(1),hH=BigInt(2),bg=r=>r instanceof Uint8Array,dH=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function su(r){if(!bg(r))throw new Error("Uint8Array expected");let e="";for(let t=0;t<r.length;t++)e+=dH[r[t]];return e}function EN(r){const e=r.toString(16);return e.length&1?`0${e}`:e}function f0(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}function iu(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let n=0;n<t.length;n++){const s=n*2,i=r.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function Ra(r){return f0(su(r))}function p0(r){if(!bg(r))throw new Error("Uint8Array expected");return f0(su(Uint8Array.from(r).reverse()))}function ou(r,e){return iu(r.toString(16).padStart(e*2,"0"))}function g0(r,e){return ou(r,e).reverse()}function fH(r){return iu(EN(r))}function ts(r,e,t){let n;if(typeof e=="string")try{n=iu(e)}catch(i){throw new Error(`${r} must be valid hex string, got "${e}". Cause: ${i}`)}else if(bg(e))n=Uint8Array.from(e);else throw new Error(`${r} must be hex string or Uint8Array`);const s=n.length;if(typeof t=="number"&&s!==t)throw new Error(`${r} expected ${t} bytes, got ${s}`);return n}function td(...r){const e=new Uint8Array(r.reduce((n,s)=>n+s.length,0));let t=0;return r.forEach(n=>{if(!bg(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}function pH(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function gH(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function mH(r){let e;for(e=0;r>bN;r>>=wg,e+=1);return e}function yH(r,e){return r>>BigInt(e)&wg}const wH=(r,e,t)=>r|(t?wg:bN)<<BigInt(e),m0=r=>(hH<<BigInt(r-1))-wg,xm=r=>new Uint8Array(r),mA=r=>Uint8Array.from(r);function vN(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=xm(r),s=xm(r),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...h)=>t(s,n,...h),c=(h=xm())=>{s=a(mA([0]),h),n=a(),h.length!==0&&(s=a(mA([1]),h),n=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const d=[];for(;h<e;){n=a();const f=n.slice();d.push(f),h+=n.length}return td(...d)};return(h,d)=>{o(),c(h);let f;for(;!(f=d(l()));)c();return o(),f}}const bH={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||r instanceof Uint8Array,isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function qd(r,e,t={}){const n=(s,i,o)=>{const a=bH[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=r[s];if(!(o&&c===void 0)&&!a(c,r))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(t))n(s,i,!0);return r}const EH=Object.freeze(Object.defineProperty({__proto__:null,bitGet:yH,bitLen:mH,bitMask:m0,bitSet:wH,bytesToHex:su,bytesToNumberBE:Ra,bytesToNumberLE:p0,concatBytes:td,createHmacDrbg:vN,ensureBytes:ts,equalBytes:pH,hexToBytes:iu,hexToNumber:f0,numberToBytesBE:ou,numberToBytesLE:g0,numberToHexUnpadded:EN,numberToVarBytesBE:fH,utf8ToBytes:gH,validateObject:qd},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rr=BigInt(0),Bt=BigInt(1),Ko=BigInt(2),vH=BigInt(3),nw=BigInt(4),yA=BigInt(5),wA=BigInt(8);BigInt(9);BigInt(16);function Qr(r,e){const t=r%e;return t>=rr?t:e+t}function AH(r,e,t){if(t<=rr||e<rr)throw new Error("Expected power/modulo > 0");if(t===Bt)return rr;let n=Bt;for(;e>rr;)e&Bt&&(n=n*r%t),r=r*r%t,e>>=Bt;return n}function On(r,e,t){let n=r;for(;e-- >rr;)n*=n,n%=t;return n}function sw(r,e){if(r===rr||e<=rr)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=Qr(r,e),n=e,s=rr,i=Bt;for(;t!==rr;){const a=n/t,c=n%t,l=s-i*a;n=t,t=c,s=i,i=l}if(n!==Bt)throw new Error("invert: does not exist");return Qr(s,e)}function CH(r){const e=(r-Bt)/Ko;let t,n,s;for(t=r-Bt,n=0;t%Ko===rr;t/=Ko,n++);for(s=Ko;s<r&&AH(s,e,r)!==r-Bt;s++);if(n===1){const o=(r+Bt)/nw;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(t+Bt)/Ko;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=n,u=a.pow(a.mul(a.ONE,s),t),h=a.pow(c,i),d=a.pow(c,t);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(d);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,Bt<<BigInt(l-f-1));u=a.sqr(p),h=a.mul(h,p),d=a.mul(d,u),l=f}return h}}function _H(r){if(r%nw===vH){const e=(r+Bt)/nw;return function(n,s){const i=n.pow(s,e);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(r%wA===yA){const e=(r-yA)/wA;return function(n,s){const i=n.mul(s,Ko),o=n.pow(i,e),a=n.mul(s,o),c=n.mul(n.mul(a,Ko),o),l=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(l),s))throw new Error("Cannot find square root");return l}}return CH(r)}const IH=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function NH(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=IH.reduce((n,s)=>(n[s]="function",n),e);return qd(r,t)}function SH(r,e,t){if(t<rr)throw new Error("Expected power > 0");if(t===rr)return r.ONE;if(t===Bt)return e;let n=r.ONE,s=e;for(;t>rr;)t&Bt&&(n=r.mul(n,s)),s=r.sqr(s),t>>=Bt;return n}function TH(r,e){const t=new Array(e.length),n=e.reduce((i,o,a)=>r.is0(o)?i:(t[a]=i,r.mul(i,o)),r.ONE),s=r.inv(n);return e.reduceRight((i,o,a)=>r.is0(o)?i:(t[a]=r.mul(i,t[a]),r.mul(i,o)),s),t}function AN(r,e){const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function OH(r,e,t=!1,n={}){if(r<=rr)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:s,nByteLength:i}=AN(r,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=_H(r),a=Object.freeze({ORDER:r,BITS:s,BYTES:i,MASK:m0(s),ZERO:rr,ONE:Bt,create:c=>Qr(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return rr<=c&&c<r},is0:c=>c===rr,isOdd:c=>(c&Bt)===Bt,neg:c=>Qr(-c,r),eql:(c,l)=>c===l,sqr:c=>Qr(c*c,r),add:(c,l)=>Qr(c+l,r),sub:(c,l)=>Qr(c-l,r),mul:(c,l)=>Qr(c*l,r),pow:(c,l)=>SH(a,c,l),div:(c,l)=>Qr(c*sw(l,r),r),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>sw(c,r),sqrt:n.sqrt||(c=>o(a,c)),invertBatch:c=>TH(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>t?g0(c,i):ou(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return t?p0(c):Ra(c)}});return Object.freeze(a)}function CN(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function _N(r){const e=CN(r);return e+Math.ceil(e/2)}function PH(r,e,t=!1){const n=r.length,s=CN(e),i=_N(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const o=t?Ra(r):p0(r),a=Qr(o,e-Bt)+Bt;return t?g0(a,s):ou(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xH=BigInt(0),Rm=BigInt(1);function RH(r,e){const t=(s,i)=>{const o=i.negate();return s?o:i},n=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:t,unsafeLadder(s,i){let o=r.ZERO,a=s;for(;i>xH;)i&Rm&&(o=o.add(a)),a=a.double(),i>>=Rm;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=n(i),c=[];let l=s,u=l;for(let h=0;h<o;h++){u=l,c.push(u);for(let d=1;d<a;d++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=n(s);let l=r.ZERO,u=r.BASE;const h=BigInt(2**s-1),d=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let y=Number(o&h);o>>=f,y>c&&(y-=d,o+=Rm);const C=g,w=g+Math.abs(y)-1,I=p%2!==0,U=y<0;y===0?u=u.add(t(I,i[C])):l=l.add(t(U,i[w]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function IN(r){return NH(r.Fp),qd(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...AN(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function kH(r){const e=IN(r);qd(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:s}=e;if(t){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:DH,hexToBytes:UH}=EH,ta={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(r){const{Err:e}=ta;if(r.length<2||r[0]!==2)throw new e("Invalid signature integer tag");const t=r[1],n=r.subarray(2,t+2);if(!t||n.length!==t)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:DH(n),l:r.subarray(t+2)}},toSig(r){const{Err:e}=ta,t=typeof r=="string"?UH(r):r;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=ta._parseInt(t.subarray(2)),{d:o,l:a}=ta._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(r){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,t=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},n=e(t(r.s)),s=e(t(r.r)),i=n.length/2,o=s.length/2,a=t(i),c=t(o);return`30${t(o+i+4)}02${c}${s}02${a}${n}`}},Ii=BigInt(0),Hn=BigInt(1);BigInt(2);const bA=BigInt(3);BigInt(4);function LH(r){const e=kH(r),{Fp:t}=e,n=e.toBytes||((p,g,y)=>{const C=g.toAffine();return td(Uint8Array.from([4]),t.toBytes(C.x),t.toBytes(C.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),y=t.fromBytes(g.subarray(0,t.BYTES)),C=t.fromBytes(g.subarray(t.BYTES,2*t.BYTES));return{x:y,y:C}});function i(p){const{a:g,b:y}=e,C=t.sqr(p),w=t.mul(C,p);return t.add(t.add(w,t.mul(p,g)),y)}if(!t.eql(t.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Ii<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:y,wrapPrivateKey:C,n:w}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=su(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(y*2,"0")}let I;try{I=typeof p=="bigint"?p:Ra(ts("private key",p,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof p}`)}return C&&(I=Qr(I,w)),a(I),I}const l=new Map;function u(p){if(!(p instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(g,y,C){if(this.px=g,this.py=y,this.pz=C,g==null||!t.isValid(g))throw new Error("x required");if(y==null||!t.isValid(y))throw new Error("y required");if(C==null||!t.isValid(C))throw new Error("z required")}static fromAffine(g){const{x:y,y:C}=g||{};if(!g||!t.isValid(y)||!t.isValid(C))throw new Error("invalid affine point");if(g instanceof h)throw new Error("projective point not allowed");const w=I=>t.eql(I,t.ZERO);return w(y)&&w(C)?h.ZERO:new h(y,C,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const y=t.invertBatch(g.map(C=>C.pz));return g.map((C,w)=>C.toAffine(y[w])).map(h.fromAffine)}static fromHex(g){const y=h.fromAffine(s(ts("pointHex",g)));return y.assertValidity(),y}static fromPrivateKey(g){return h.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y}=this.toAffine();if(!t.isValid(g)||!t.isValid(y))throw new Error("bad point: x or y not FE");const C=t.sqr(y),w=i(g);if(!t.eql(C,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(t.isOdd)return!t.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:y,py:C,pz:w}=this,{px:I,py:U,pz:M}=g,B=t.eql(t.mul(y,M),t.mul(I,w)),L=t.eql(t.mul(C,M),t.mul(U,w));return B&&L}negate(){return new h(this.px,t.neg(this.py),this.pz)}double(){const{a:g,b:y}=e,C=t.mul(y,bA),{px:w,py:I,pz:U}=this;let M=t.ZERO,B=t.ZERO,L=t.ZERO,m=t.mul(w,w),b=t.mul(I,I),N=t.mul(U,U),_=t.mul(w,I);return _=t.add(_,_),L=t.mul(w,U),L=t.add(L,L),M=t.mul(g,L),B=t.mul(C,N),B=t.add(M,B),M=t.sub(b,B),B=t.add(b,B),B=t.mul(M,B),M=t.mul(_,M),L=t.mul(C,L),N=t.mul(g,N),_=t.sub(m,N),_=t.mul(g,_),_=t.add(_,L),L=t.add(m,m),m=t.add(L,m),m=t.add(m,N),m=t.mul(m,_),B=t.add(B,m),N=t.mul(I,U),N=t.add(N,N),m=t.mul(N,_),M=t.sub(M,m),L=t.mul(N,b),L=t.add(L,L),L=t.add(L,L),new h(M,B,L)}add(g){u(g);const{px:y,py:C,pz:w}=this,{px:I,py:U,pz:M}=g;let B=t.ZERO,L=t.ZERO,m=t.ZERO;const b=e.a,N=t.mul(e.b,bA);let _=t.mul(y,I),S=t.mul(C,U),k=t.mul(w,M),P=t.add(y,C),v=t.add(I,U);P=t.mul(P,v),v=t.add(_,S),P=t.sub(P,v),v=t.add(y,w);let A=t.add(I,M);return v=t.mul(v,A),A=t.add(_,k),v=t.sub(v,A),A=t.add(C,w),B=t.add(U,M),A=t.mul(A,B),B=t.add(S,k),A=t.sub(A,B),m=t.mul(b,v),B=t.mul(N,k),m=t.add(B,m),B=t.sub(S,m),m=t.add(S,m),L=t.mul(B,m),S=t.add(_,_),S=t.add(S,_),k=t.mul(b,k),v=t.mul(N,v),S=t.add(S,k),k=t.sub(_,k),k=t.mul(b,k),v=t.add(v,k),_=t.mul(S,v),L=t.add(L,_),_=t.mul(A,v),B=t.mul(P,B),B=t.sub(B,_),_=t.mul(P,S),m=t.mul(A,m),m=t.add(m,_),new h(B,L,m)}subtract(g){return this.add(g.negate())}is0(){return this.equals(h.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,y=>{const C=t.invertBatch(y.map(w=>w.pz));return y.map((w,I)=>w.toAffine(C[I])).map(h.fromAffine)})}multiplyUnsafe(g){const y=h.ZERO;if(g===Ii)return y;if(a(g),g===Hn)return this;const{endo:C}=e;if(!C)return f.unsafeLadder(this,g);let{k1neg:w,k1:I,k2neg:U,k2:M}=C.splitScalar(g),B=y,L=y,m=this;for(;I>Ii||M>Ii;)I&Hn&&(B=B.add(m)),M&Hn&&(L=L.add(m)),m=m.double(),I>>=Hn,M>>=Hn;return w&&(B=B.negate()),U&&(L=L.negate()),L=new h(t.mul(L.px,C.beta),L.py,L.pz),B.add(L)}multiply(g){a(g);let y=g,C,w;const{endo:I}=e;if(I){const{k1neg:U,k1:M,k2neg:B,k2:L}=I.splitScalar(y);let{p:m,f:b}=this.wNAF(M),{p:N,f:_}=this.wNAF(L);m=f.constTimeNegate(U,m),N=f.constTimeNegate(B,N),N=new h(t.mul(N.px,I.beta),N.py,N.pz),C=m.add(N),w=b.add(_)}else{const{p:U,f:M}=this.wNAF(y);C=U,w=M}return h.normalizeZ([C,w])[0]}multiplyAndAddUnsafe(g,y,C){const w=h.BASE,I=(M,B)=>B===Ii||B===Hn||!M.equals(w)?M.multiplyUnsafe(B):M.multiply(B),U=I(this,y).add(I(g,C));return U.is0()?void 0:U}toAffine(g){const{px:y,py:C,pz:w}=this,I=this.is0();g==null&&(g=I?t.ONE:t.inv(w));const U=t.mul(y,g),M=t.mul(C,g),B=t.mul(w,g);if(I)return{x:t.ZERO,y:t.ZERO};if(!t.eql(B,t.ONE))throw new Error("invZ was invalid");return{x:U,y:M}}isTorsionFree(){const{h:g,isTorsionFree:y}=e;if(g===Hn)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:y}=e;return g===Hn?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),n(h,this,g)}toHex(g=!0){return su(this.toRawBytes(g))}}h.BASE=new h(e.Gx,e.Gy,t.ONE),h.ZERO=new h(t.ZERO,t.ONE,t.ZERO);const d=e.nBitLength,f=RH(h,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function BH(r){const e=IN(r);return qd(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function MH(r){const e=BH(r),{Fp:t,n}=e,s=t.BYTES+1,i=2*t.BYTES+1;function o(v){return Ii<v&&v<t.ORDER}function a(v){return Qr(v,n)}function c(v){return sw(v,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:h,isWithinCurveOrder:d}=LH({...e,toBytes(v,A,T){const x=A.toAffine(),R=t.toBytes(x.x),j=td;return T?j(Uint8Array.from([A.hasEvenY()?2:3]),R):j(Uint8Array.from([4]),R,t.toBytes(x.y))},fromBytes(v){const A=v.length,T=v[0],x=v.subarray(1);if(A===s&&(T===2||T===3)){const R=Ra(x);if(!o(R))throw new Error("Point is not on curve");const j=h(R);let q=t.sqrt(j);const z=(q&Hn)===Hn;return(T&1)===1!==z&&(q=t.neg(q)),{x:R,y:q}}else if(A===i&&T===4){const R=t.fromBytes(x.subarray(0,t.BYTES)),j=t.fromBytes(x.subarray(t.BYTES,2*t.BYTES));return{x:R,y:j}}else throw new Error(`Point of length ${A} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=v=>su(ou(v,e.nByteLength));function p(v){const A=n>>Hn;return v>A}function g(v){return p(v)?a(-v):v}const y=(v,A,T)=>Ra(v.slice(A,T));class C{constructor(A,T,x){this.r=A,this.s=T,this.recovery=x,this.assertValidity()}static fromCompact(A){const T=e.nByteLength;return A=ts("compactSignature",A,T*2),new C(y(A,0,T),y(A,T,2*T))}static fromDER(A){const{r:T,s:x}=ta.toSig(ts("DER",A));return new C(T,x)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(A){return new C(this.r,this.s,A)}recoverPublicKey(A){const{r:T,s:x,recovery:R}=this,j=L(ts("msgHash",A));if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");const q=R===2||R===3?T+e.n:T;if(q>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const z=(R&1)===0?"02":"03",G=l.fromHex(z+f(q)),Q=c(q),Y=a(-j*Q),ne=a(x*Q),ie=l.BASE.multiplyAndAddUnsafe(G,Y,ne);if(!ie)throw new Error("point at infinify");return ie.assertValidity(),ie}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new C(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return iu(this.toDERHex())}toDERHex(){return ta.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return iu(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const w={isValidPrivateKey(v){try{return u(v),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const v=_N(e.n);return PH(e.randomBytes(v),e.n)},precompute(v=8,A=l.BASE){return A._setWindowSize(v),A.multiply(BigInt(3)),A}};function I(v,A=!0){return l.fromPrivateKey(v).toRawBytes(A)}function U(v){const A=v instanceof Uint8Array,T=typeof v=="string",x=(A||T)&&v.length;return A?x===s||x===i:T?x===2*s||x===2*i:v instanceof l}function M(v,A,T=!0){if(U(v))throw new Error("first arg must be private key");if(!U(A))throw new Error("second arg must be public key");return l.fromHex(A).multiply(u(v)).toRawBytes(T)}const B=e.bits2int||function(v){const A=Ra(v),T=v.length*8-e.nBitLength;return T>0?A>>BigInt(T):A},L=e.bits2int_modN||function(v){return a(B(v))},m=m0(e.nBitLength);function b(v){if(typeof v!="bigint")throw new Error("bigint expected");if(!(Ii<=v&&v<m))throw new Error(`bigint expected < 2^${e.nBitLength}`);return ou(v,e.nByteLength)}function N(v,A,T=_){if(["recovered","canonical"].some(be=>be in T))throw new Error("sign() legacy options not supported");const{hash:x,randomBytes:R}=e;let{lowS:j,prehash:q,extraEntropy:z}=T;j==null&&(j=!0),v=ts("msgHash",v),q&&(v=ts("prehashed msgHash",x(v)));const G=L(v),Q=u(A),Y=[b(Q),b(G)];if(z!=null){const be=z===!0?R(t.BYTES):z;Y.push(ts("extraEntropy",be))}const ne=td(...Y),ie=G;function we(be){const Ve=B(be);if(!d(Ve))return;const Le=c(Ve),je=l.BASE.multiply(Ve).toAffine(),ye=a(je.x);if(ye===Ii)return;const pe=a(Le*a(ie+ye*Q));if(pe===Ii)return;let Ne=(je.x===ye?0:2)|Number(je.y&Hn),sn=pe;return j&&p(pe)&&(sn=g(pe),Ne^=1),new C(ye,sn,Ne)}return{seed:ne,k2sig:we}}const _={lowS:e.lowS,prehash:!1},S={lowS:e.lowS,prehash:!1};function k(v,A,T=_){const{seed:x,k2sig:R}=N(v,A,T),j=e;return vN(j.hash.outputLen,j.nByteLength,j.hmac)(x,R)}l.BASE._setWindowSize(8);function P(v,A,T,x=S){var je;const R=v;if(A=ts("msgHash",A),T=ts("publicKey",T),"strict"in x)throw new Error("options.strict was renamed to lowS");const{lowS:j,prehash:q}=x;let z,G;try{if(typeof R=="string"||R instanceof Uint8Array)try{z=C.fromDER(R)}catch(ye){if(!(ye instanceof ta.Err))throw ye;z=C.fromCompact(R)}else if(typeof R=="object"&&typeof R.r=="bigint"&&typeof R.s=="bigint"){const{r:ye,s:pe}=R;z=new C(ye,pe)}else throw new Error("PARSE");G=l.fromHex(T)}catch(ye){if(ye.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(j&&z.hasHighS())return!1;q&&(A=e.hash(A));const{r:Q,s:Y}=z,ne=L(A),ie=c(Y),we=a(ne*ie),be=a(Q*ie),Ve=(je=l.BASE.multiplyAndAddUnsafe(G,we,be))==null?void 0:je.toAffine();return Ve?a(Ve.x)===Q:!1}return{CURVE:e,getPublicKey:I,getSharedSecret:M,sign:k,verify:P,ProjectivePoint:l,Signature:C,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $H(r){return{hash:r,hmac:(e,...t)=>tN(r,e,N7(...t)),randomBytes:S7}}function FH(r,e){const t=n=>MH({...r,...$H(n)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const NN=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),EA=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),jH=BigInt(1),iw=BigInt(2),vA=(r,e)=>(r+e/iw)/e;function HH(r){const e=NN,t=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=r*r*r%e,u=l*l*r%e,h=On(u,t,e)*u%e,d=On(h,t,e)*u%e,f=On(d,iw,e)*l%e,p=On(f,s,e)*f%e,g=On(p,i,e)*p%e,y=On(g,a,e)*g%e,C=On(y,c,e)*y%e,w=On(C,a,e)*g%e,I=On(w,t,e)*u%e,U=On(I,o,e)*p%e,M=On(U,n,e)*l%e,B=On(M,iw,e);if(!ow.eql(ow.sqr(B),r))throw new Error("Cannot find square root");return B}const ow=OH(NN,void 0,void 0,{sqrt:HH}),Gi=FH({a:BigInt(0),b:BigInt(7),Fp:ow,n:EA,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=EA,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-jH*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,o=BigInt("0x100000000000000000000000000000000"),a=vA(i*r,e),c=vA(-n*r,e);let l=Qr(r-a*t-c*s,e),u=Qr(-a*n-c*i,e);const h=l>o,d=u>o;if(h&&(l=e-l),d&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:h,k1:l,k2neg:d,k2:u}}}},nN);BigInt(0);Gi.ProjectivePoint;const rd="0x0000000000000000000000000000000000000000",AA="0x0000000000000000000000000000000000000000000000000000000000000000",CA=BigInt(0),_A=BigInt(1),IA=BigInt(2),NA=BigInt(27),SA=BigInt(28),_f=BigInt(35),Nc={};function TA(r){return qa(kr(r),32)}var ul,hl,dl,fa;const es=class es{constructor(e,t,n,s){V(this,ul);V(this,hl);V(this,dl);V(this,fa);Vd(e,Nc,"Signature"),D(this,ul,t),D(this,hl,n),D(this,dl,s),D(this,fa,null)}get r(){return E(this,ul)}set r(e){F(Jc(e)===32,"invalid r","value",e),D(this,ul,fe(e))}get s(){return E(this,hl)}set s(e){F(Jc(e)===32,"invalid s","value",e);const t=fe(e);F(parseInt(t.substring(0,3))<8,"non-canonical s","value",t),D(this,hl,t)}get v(){return E(this,dl)}set v(e){const t=Ue(e,"value");F(t===27||t===28,"invalid v","v",e),D(this,dl,t)}get networkV(){return E(this,fa)}get legacyChainId(){const e=this.networkV;return e==null?null:es.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Ke(this.s);return this.yParity&&(e[0]|=128),fe(e)}get compactSerialized(){return $t([this.r,this.yParityAndS])}get serialized(){return $t([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new es(Nc,this.r,this.s,this.v);return this.networkV&&D(e,fa,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const t=me(e,"v");return t==NA||t==SA?CA:(F(t>=_f,"invalid EIP-155 v","v",e),(t-_f)/IA)}static getChainIdV(e,t){return me(e)*IA+BigInt(35+t-27)}static getNormalizedV(e){const t=me(e);return t===CA||t===NA?27:t===_A||t===SA?28:(F(t>=_f,"invalid v","v",e),t&_A?27:28)}static from(e){function t(l,u){F(l,u,"signature",e)}if(e==null)return new es(Nc,AA,AA,27);if(typeof e=="string"){const l=Ke(e,"signature");if(l.length===64){const u=fe(l.slice(0,32)),h=l.slice(32,64),d=h[0]&128?28:27;return h[0]&=127,new es(Nc,u,fe(h),d)}if(l.length===65){const u=fe(l.slice(0,32)),h=l.slice(32,64);t((h[0]&128)===0,"non-canonical s");const d=es.getNormalizedV(l[64]);return new es(Nc,u,fe(h),d)}t(!1,"invalid raw signature length")}if(e instanceof es)return e.clone();const n=e.r;t(n!=null,"missing r");const s=TA(n),i=function(l,u){if(l!=null)return TA(l);if(u!=null){t(wt(u,32),"invalid yParityAndS");const h=Ke(u);return h[0]&=127,fe(h)}t(!1,"missing s")}(e.s,e.yParityAndS);t((Ke(i)[0]&128)==0,"non-canonical s");const{networkV:o,v:a}=function(l,u,h){if(l!=null){const d=me(l);return{networkV:d>=_f?d:void 0,v:es.getNormalizedV(d)}}if(u!=null)return t(wt(u,32),"invalid yParityAndS"),{v:Ke(u)[0]&128?28:27};if(h!=null){switch(Ue(h,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new es(Nc,s,i,a);return o&&D(c,fa,o),t(e.yParity==null||Ue(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};ul=new WeakMap,hl=new WeakMap,dl=new WeakMap,fa=new WeakMap;let ms=es;var gi;const Jo=class Jo{constructor(e){V(this,gi);F(Jc(e)===32,"invalid private key","privateKey","[REDACTED]"),D(this,gi,fe(e))}get privateKey(){return E(this,gi)}get publicKey(){return Jo.computePublicKey(E(this,gi))}get compressedPublicKey(){return Jo.computePublicKey(E(this,gi),!0)}sign(e){F(Jc(e)===32,"invalid digest length","digest",e);const t=Gi.sign(xr(e),xr(E(this,gi)),{lowS:!0});return ms.from({r:Oo(t.r,32),s:Oo(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=Jo.computePublicKey(e);return fe(Gi.getSharedSecret(xr(E(this,gi)),Ke(t),!1))}static computePublicKey(e,t){let n=Ke(e,"key");if(n.length===32){const i=Gi.getPublicKey(n,!!t);return fe(i)}if(n.length===64){const i=new Uint8Array(65);i[0]=4,i.set(n,1),n=i}const s=Gi.ProjectivePoint.fromHex(n);return fe(s.toRawBytes(t))}static recoverPublicKey(e,t){F(Jc(e)===32,"invalid digest length","digest",e);const n=ms.from(t);let s=Gi.Signature.fromCompact(xr($t([n.r,n.s])));s=s.addRecoveryBit(n.yParity);const i=s.recoverPublicKey(xr(e));return F(i!=null,"invalid signautre for digest","signature",t),"0x"+i.toHex(!1)}static addPoints(e,t,n){const s=Gi.ProjectivePoint.fromHex(Jo.computePublicKey(e).substring(2)),i=Gi.ProjectivePoint.fromHex(Jo.computePublicKey(t).substring(2));return"0x"+s.add(i).toHex(!!n)}};gi=new WeakMap;let nd=Jo;const VH=BigInt(0),qH=BigInt(36);function OA(r){r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let s=0;s<40;s++)t[s]=e[s].charCodeAt(0);const n=Ke(Vt(t));for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(n[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const y0={};for(let r=0;r<10;r++)y0[String(r)]=String(r);for(let r=0;r<26;r++)y0[String.fromCharCode(65+r)]=String(10+r);const PA=15;function zH(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(n=>y0[n]).join("");for(;e.length>=PA;){let n=e.substring(0,PA);e=parseInt(n,10)%97+e.substring(n.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const WH=function(){const r={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];r[t]=BigInt(e)}return r}();function GH(r){r=r.toLowerCase();let e=VH;for(let t=0;t<r.length;t++)e=e*qH+WH[r[t]];return e}function ht(r){if(F(typeof r=="string","invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/)){r.startsWith("0x")||(r="0x"+r);const e=OA(r);return F(!r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===r,"bad address checksum","address",r),e}if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){F(r.substring(2,4)===zH(r),"bad icap checksum","address",r);let e=GH(r.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return OA("0x"+e)}F(!1,"invalid address","address",r)}function KH(r){const e=ht(r.from);let n=me(r.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,ht(Rt(Vt(za([e,n])),12))}function SN(r){return r&&typeof r.getAddress=="function"}async function km(r,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(W(typeof r!="string","unconfigured name","UNCONFIGURED_NAME",{value:r}),F(!1,"invalid AddressLike value; did not resolve to a value address","target",r)),ht(t)}function Ur(r,e){if(typeof r=="string")return r.match(/^0x[0-9a-f]{40}$/i)?ht(r):(W(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),km(r,e.resolveName(r)));if(SN(r))return km(r,r.getAddress());if(r&&typeof r.then=="function")return km(r,r);F(!1,"unsupported addressable value","target",r)}const ai={};function ue(r,e){let t=!1;return e<0&&(t=!0,e*=-1),new _r(ai,`${t?"":"u"}int${e}`,r,{signed:t,width:e})}function Ye(r,e){return new _r(ai,`bytes${e||""}`,r,{size:e})}const xA=Symbol.for("_ethers_typed");var pa;const ci=class ci{constructor(e,t,n,s){H(this,"type");H(this,"value");V(this,pa);H(this,"_typedSymbol");s==null&&(s=null),Vd(ai,e,"Typed"),Ae(this,{_typedSymbol:xA,type:t,value:n}),D(this,pa,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return E(this,pa)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return E(this,pa)===!0?-1:E(this,pa)===!1?this.value.length:null}static from(e,t){return new ci(ai,e,t)}static uint8(e){return ue(e,8)}static uint16(e){return ue(e,16)}static uint24(e){return ue(e,24)}static uint32(e){return ue(e,32)}static uint40(e){return ue(e,40)}static uint48(e){return ue(e,48)}static uint56(e){return ue(e,56)}static uint64(e){return ue(e,64)}static uint72(e){return ue(e,72)}static uint80(e){return ue(e,80)}static uint88(e){return ue(e,88)}static uint96(e){return ue(e,96)}static uint104(e){return ue(e,104)}static uint112(e){return ue(e,112)}static uint120(e){return ue(e,120)}static uint128(e){return ue(e,128)}static uint136(e){return ue(e,136)}static uint144(e){return ue(e,144)}static uint152(e){return ue(e,152)}static uint160(e){return ue(e,160)}static uint168(e){return ue(e,168)}static uint176(e){return ue(e,176)}static uint184(e){return ue(e,184)}static uint192(e){return ue(e,192)}static uint200(e){return ue(e,200)}static uint208(e){return ue(e,208)}static uint216(e){return ue(e,216)}static uint224(e){return ue(e,224)}static uint232(e){return ue(e,232)}static uint240(e){return ue(e,240)}static uint248(e){return ue(e,248)}static uint256(e){return ue(e,256)}static uint(e){return ue(e,256)}static int8(e){return ue(e,-8)}static int16(e){return ue(e,-16)}static int24(e){return ue(e,-24)}static int32(e){return ue(e,-32)}static int40(e){return ue(e,-40)}static int48(e){return ue(e,-48)}static int56(e){return ue(e,-56)}static int64(e){return ue(e,-64)}static int72(e){return ue(e,-72)}static int80(e){return ue(e,-80)}static int88(e){return ue(e,-88)}static int96(e){return ue(e,-96)}static int104(e){return ue(e,-104)}static int112(e){return ue(e,-112)}static int120(e){return ue(e,-120)}static int128(e){return ue(e,-128)}static int136(e){return ue(e,-136)}static int144(e){return ue(e,-144)}static int152(e){return ue(e,-152)}static int160(e){return ue(e,-160)}static int168(e){return ue(e,-168)}static int176(e){return ue(e,-176)}static int184(e){return ue(e,-184)}static int192(e){return ue(e,-192)}static int200(e){return ue(e,-200)}static int208(e){return ue(e,-208)}static int216(e){return ue(e,-216)}static int224(e){return ue(e,-224)}static int232(e){return ue(e,-232)}static int240(e){return ue(e,-240)}static int248(e){return ue(e,-248)}static int256(e){return ue(e,-256)}static int(e){return ue(e,-256)}static bytes1(e){return Ye(e,1)}static bytes2(e){return Ye(e,2)}static bytes3(e){return Ye(e,3)}static bytes4(e){return Ye(e,4)}static bytes5(e){return Ye(e,5)}static bytes6(e){return Ye(e,6)}static bytes7(e){return Ye(e,7)}static bytes8(e){return Ye(e,8)}static bytes9(e){return Ye(e,9)}static bytes10(e){return Ye(e,10)}static bytes11(e){return Ye(e,11)}static bytes12(e){return Ye(e,12)}static bytes13(e){return Ye(e,13)}static bytes14(e){return Ye(e,14)}static bytes15(e){return Ye(e,15)}static bytes16(e){return Ye(e,16)}static bytes17(e){return Ye(e,17)}static bytes18(e){return Ye(e,18)}static bytes19(e){return Ye(e,19)}static bytes20(e){return Ye(e,20)}static bytes21(e){return Ye(e,21)}static bytes22(e){return Ye(e,22)}static bytes23(e){return Ye(e,23)}static bytes24(e){return Ye(e,24)}static bytes25(e){return Ye(e,25)}static bytes26(e){return Ye(e,26)}static bytes27(e){return Ye(e,27)}static bytes28(e){return Ye(e,28)}static bytes29(e){return Ye(e,29)}static bytes30(e){return Ye(e,30)}static bytes31(e){return Ye(e,31)}static bytes32(e){return Ye(e,32)}static address(e){return new ci(ai,"address",e)}static bool(e){return new ci(ai,"bool",!!e)}static bytes(e){return new ci(ai,"bytes",e)}static string(e){return new ci(ai,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new ci(ai,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===xA}static dereference(e,t){if(ci.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}};pa=new WeakMap;let _r=ci;class JH extends Ui{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let n=_r.dereference(t,"string");try{n=ht(n)}catch(s){return this._throwError(s.message,t)}return e.writeValue(n)}decode(e){return ht(Oo(e.readValue(),20))}}class QH extends Ui{constructor(t){super(t.name,t.type,"_",t.dynamic);H(this,"coder");this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,n){return this.coder.encode(t,n)}decode(t){return this.coder.decode(t)}}function TN(r,e,t){let n=[];if(Array.isArray(t))n=t;else if(t&&typeof t=="object"){let c={};n=e.map(l=>{const u=l.localName;return W(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:t}),W(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:t}),c[u]=!0,t[u]})}else F(!1,"invalid tuple value","tuple",t);F(e.length===n.length,"types/value length mismatch","tuple",t);let s=new Xy,i=new Xy,o=[];e.forEach((c,l)=>{let u=n[l];if(c.dynamic){let h=i.length;c.encode(i,u);let d=s.writeUpdatableValue();o.push(f=>{d(f+h)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=r.appendWriter(s);return a+=r.appendWriter(i),a}function ON(r,e){let t=[],n=[],s=r.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=r.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(dr(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(r)}catch(a){if(dr(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");t.push(o),n.push(i.localName||null)}),ru.fromItems(t,n)}class YH extends Ui{constructor(t,n,s){const i=t.type+"["+(n>=0?n:"")+"]",o=n===-1||t.dynamic;super("array",i,s,o);H(this,"coder");H(this,"length");Ae(this,{coder:t,length:n})}defaultValue(){const t=this.coder.defaultValue(),n=[];for(let s=0;s<this.length;s++)n.push(t);return n}encode(t,n){const s=_r.dereference(n,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,t.writeValue(s.length)),LI(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return TN(t,o,s)}decode(t){let n=this.length;n===-1&&(n=t.readIndex(),W(n*Dr<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:n*Dr,length:t.dataLength}));let s=[];for(let i=0;i<n;i++)s.push(new QH(this.coder));return ON(t,s)}}class ZH extends Ui{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const n=_r.dereference(t,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class PN extends Ui{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=xr(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class XH extends PN{constructor(e){super("bytes",e)}decode(e){return fe(super.decode(e))}}class eV extends Ui{constructor(t,n){let s="bytes"+String(t);super(s,s,n,!1);H(this,"size");Ae(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,n){let s=xr(_r.dereference(n,this.type));return s.length!==this.size&&this._throwError("incorrect data length",n),t.writeBytes(s)}decode(t){return fe(t.readBytes(this.size))}}const tV=new Uint8Array([]);class rV extends Ui{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(tV)}decode(e){return e.readBytes(0),null}}const nV=BigInt(0),sV=BigInt(1),iV=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class oV extends Ui{constructor(t,n,s){const i=(n?"int":"uint")+t*8;super(i,i,s,!1);H(this,"size");H(this,"signed");Ae(this,{size:t,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,n){let s=me(_r.dereference(n,this.type)),i=ea(iV,Dr*8);if(this.signed){let o=ea(i,this.size*8-1);(s>o||s<-(o+sV))&&this._throwError("value out-of-bounds",n),s=$I(s,8*Dr)}else(s<nV||s>ea(i,this.size*8))&&this._throwError("value out-of-bounds",n);return t.writeValue(s)}decode(t){let n=ea(t.readValue(),this.size*8);return this.signed&&(n=wp(n,this.size*8)),n}}class aV extends PN{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,zs(_r.dereference(t,"string")))}decode(e){return bp(super.decode(e))}}class If extends Ui{constructor(t,n){let s=!1;const i=[];t.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,n,s);H(this,"coders");Ae(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach(s=>{t.push(s.defaultValue())});const n=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||n[o]!==1||(o==="length"&&(o="_length"),t[o]==null&&(t[o]=t[i]))}),Object.freeze(t)}encode(t,n){const s=_r.dereference(n,"tuple");return TN(t,this.coders,s)}decode(t){return ON(t,this.coders)}}function Wa(r){return Vt(zs(r))}var cV="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const RA=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),kA=4;function lV(r){let e=0;function t(){return r[e++]<<8|r[e++]}let n=t(),s=1,i=[0,1];for(let M=1;M<n;M++)i.push(s+=t());let o=t(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|r[e++],c=8),l>>--c&1}const h=31,d=2**h,f=d>>>1,p=f>>1,g=d-1;let y=0;for(let M=0;M<h;M++)y=y<<1|u();let C=[],w=0,I=d;for(;;){let M=Math.floor(((y-w+1)*s-1)/I),B=0,L=n;for(;L-B>1;){let N=B+L>>>1;M<i[N]?L=N:B=N}if(B==0)break;C.push(B);let m=w+Math.floor(I*i[B]/s),b=w+Math.floor(I*i[B+1]/s)-1;for(;((m^b)&f)==0;)y=y<<1&g|u(),m=m<<1&g,b=b<<1&g|1;for(;m&~b&p;)y=y&f|y<<1&g>>>1|u(),m=m<<1^f,b=(b^f)<<1|f|1;w=m,I=1+b-m}let U=n-4;return C.map(M=>{switch(M-U){case 3:return U+65792+(r[a++]<<16|r[a++]<<8|r[a++]);case 2:return U+256+(r[a++]<<8|r[a++]);case 1:return U+r[a++];default:return M-1}})}function uV(r){let e=0;return()=>r[e++]}function xN(r){return uV(lV(hV(r)))}function hV(r){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let t=r.length,n=new Uint8Array(6*t>>3);for(let s=0,i=0,o=0,a=0;s<t;s++)a=a<<6|e[r.charCodeAt(s)],o+=6,o>=8&&(n[i++]=a>>(o-=8));return n}function dV(r){return r&1?~r>>1:r>>1}function fV(r,e){let t=Array(r);for(let n=0,s=0;n<r;n++)t[n]=s+=dV(e());return t}function sd(r,e=0){let t=[];for(;;){let n=r(),s=r();if(!s)break;e+=n;for(let i=0;i<s;i++)t.push(e+i);e+=s+1}return t}function RN(r){return id(()=>{let e=sd(r);if(e.length)return e})}function kN(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(pV(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(gV(t,r))}return e.flat()}function id(r){let e=[];for(;;){let t=r(e.length);if(!t)break;e.push(t)}return e}function DN(r,e,t){let n=Array(r).fill().map(()=>[]);for(let s=0;s<e;s++)fV(r,t).forEach((i,o)=>n[o].push(i));return n}function pV(r,e){let t=1+e(),n=e(),s=id(e);return DN(s.length,1+r,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,h)=>{let d=h*n;return[c+h*t,l.map(f=>f+d)]})})}function gV(r,e){let t=1+e();return DN(t,1+r,e).map(s=>[s[0],s.slice(1)])}function mV(r){let e=[],t=sd(r);return s(n([]),[]),e;function n(i){let o=r(),a=id(()=>{let c=sd(r).map(l=>t[l]);if(c.length)return n(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function yV(r){return r.toString(16).toUpperCase().padStart(2,"0")}function UN(r){return`{${yV(r)}}`}function wV(r){let e=[];for(let t=0,n=r.length;t<n;){let s=r.codePointAt(t);t+=s<65536?1:2,e.push(s)}return e}function au(r){let t=r.length;if(t<4096)return String.fromCodePoint(...r);let n=[];for(let s=0;s<t;)n.push(String.fromCodePoint(...r.slice(s,s+=4096)));return n.join("")}function bV(r,e){let t=r.length,n=t-e.length;for(let s=0;n==0&&s<t;s++)n=r[s]-e[s];return n}var EV="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const od=44032,Ap=4352,Cp=4449,_p=4519,LN=19,BN=21,cu=28,Ip=BN*cu,vV=LN*Ip,AV=od+vV,CV=Ap+LN,_V=Cp+BN,IV=_p+cu;function Ju(r){return r>>24&255}function MN(r){return r&16777215}let aw,DA,cw,qf;function NV(){let r=xN(EV);aw=new Map(RN(r).flatMap((e,t)=>e.map(n=>[n,t+1<<24]))),DA=new Set(sd(r)),cw=new Map,qf=new Map;for(let[e,t]of kN(r)){if(!DA.has(e)&&t.length==2){let[n,s]=t,i=qf.get(n);i||(i=new Map,qf.set(n,i)),i.set(s,e)}cw.set(e,t.reverse())}}function $N(r){return r>=od&&r<AV}function SV(r,e){if(r>=Ap&&r<CV&&e>=Cp&&e<_V)return od+(r-Ap)*Ip+(e-Cp)*cu;if($N(r)&&e>_p&&e<IV&&(r-od)%cu==0)return r+(e-_p);{let t=qf.get(r);return t&&(t=t.get(e),t)?t:-1}}function FN(r){aw||NV();let e=[],t=[],n=!1;function s(i){let o=aw.get(i);o&&(n=!0,i|=o),e.push(i)}for(let i of r)for(;;){if(i<128)e.push(i);else if($N(i)){let o=i-od,a=o/Ip|0,c=o%Ip/cu|0,l=o%cu;s(Ap+a),s(Cp+c),l>0&&s(_p+l)}else{let o=cw.get(i);o?t.push(...o):s(i)}if(!t.length)break;i=t.pop()}if(n&&e.length>1){let i=Ju(e[0]);for(let o=1;o<e.length;o++){let a=Ju(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=Ju(e[--c]),i<=a))break}i=Ju(e[o])}}return e}function TV(r){let e=[],t=[],n=-1,s=0;for(let i of r){let o=Ju(i),a=MN(i);if(n==-1)o==0?n=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(n,...t),t.length=0,n=a):t.push(a),s=o;else{let c=SV(n,a);c>=0?n=c:s==0&&o==0?(e.push(n),n=a):(t.push(a),s=o)}}return n>=0&&e.push(n,...t),e}function jN(r){return FN(r).map(MN)}function OV(r){return TV(FN(r))}const UA=45,HN=".",VN=65039,qN=1,Np=r=>Array.from(r);function ad(r,e){return r.P.has(e)||r.Q.has(e)}class PV extends Array{get is_emoji(){return!0}}let lw,zN,ra,uw,WN,Yc,Dm,Lc,Ho,LA,hw;function w0(){if(lw)return;let r=xN(cV);const e=()=>sd(r),t=()=>new Set(e()),n=(u,h)=>h.forEach(d=>u.add(d));lw=new Map(kN(r)),zN=t(),ra=e(),uw=new Set(e().map(u=>ra[u])),ra=new Set(ra),WN=t(),t();let s=RN(r),i=r();const o=()=>{let u=new Set;return e().forEach(h=>n(u,s[h])),n(u,e()),u};Yc=id(u=>{let h=id(r).map(d=>d+96);if(h.length){let d=u>=i;h[0]-=32,h=au(h),d&&(h=`Restricted[${h}]`);let f=o(),p=o(),g=!r();return{N:h,P:f,Q:p,M:g,R:d}}}),Dm=t(),Lc=new Map;let a=e().concat(Np(Dm)).sort((u,h)=>u-h);a.forEach((u,h)=>{let d=r(),f=a[h]=d?a[h-d]:{V:[],M:new Map};f.V.push(u),Dm.has(u)||Lc.set(u,f)});for(let{V:u,M:h}of new Set(Lc.values())){let d=[];for(let p of u){let g=Yc.filter(C=>ad(C,p)),y=d.find(({G:C})=>g.some(w=>C.has(w)));y||(y={G:new Set,V:[]},d.push(y)),y.V.push(p),n(y.G,g)}let f=d.flatMap(p=>Np(p.G));for(let{G:p,V:g}of d){let y=new Set(f.filter(C=>!p.has(C)));for(let C of g)h.set(C,y)}}Ho=new Set;let c=new Set;const l=u=>Ho.has(u)?c.add(u):Ho.add(u);for(let u of Yc){for(let h of u.P)l(h);for(let h of u.Q)l(h)}for(let u of Ho)!Lc.has(u)&&!c.has(u)&&Lc.set(u,qN);n(Ho,jN(Ho)),LA=mV(r).map(u=>PV.from(u)).sort(bV),hw=new Map;for(let u of LA){let h=[hw];for(let d of u){let f=h.map(p=>{let g=p.get(d);return g||(g=new Map,p.set(d,g)),g});d===VN?h.push(...f):h=f}for(let d of h)d.V=u}}function b0(r){return(GN(r)?"":`${E0(Eg([r]))} `)+UN(r)}function E0(r){return`"${r}"`}function xV(r){if(r.length>=4&&r[2]==UA&&r[3]==UA)throw new Error(`invalid label extension: "${au(r.slice(0,4))}"`)}function RV(r){for(let t=r.lastIndexOf(95);t>0;)if(r[--t]!==95)throw new Error("underscore allowed only at start")}function kV(r){let e=r[0],t=RA.get(e);if(t)throw lh(`leading ${t}`);let n=r.length,s=-1;for(let i=1;i<n;i++){e=r[i];let o=RA.get(e);if(o){if(s==i)throw lh(`${t} + ${o}`);s=i+1,t=o}}if(s==n)throw lh(`trailing ${t}`)}function Eg(r,e=1/0,t=UN){let n=[];DV(r[0])&&n.push(""),r.length>e&&(e>>=1,r=[...r.slice(0,e),8230,...r.slice(-e)]);let s=0,i=r.length;for(let o=0;o<i;o++){let a=r[o];GN(a)&&(n.push(au(r.slice(s,o))),n.push(t(a)),s=o+1)}return n.push(au(r.slice(s,i))),n.join("")}function DV(r){return w0(),ra.has(r)}function GN(r){return w0(),WN.has(r)}function UV(r){return $V(LV(r,OV,HV))}function LV(r,e,t){if(!r)return[];w0();let n=0;return r.split(HN).map(s=>{let i=wV(s),o={input:i,offset:n};n+=i.length+1;try{let a=o.tokens=jV(i,e,t),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(RV(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(d=>d<128))xV(u),l="ASCII";else{let d=a.flatMap(f=>f.is_emoji?[]:f);if(!d.length)l="Emoji";else{if(ra.has(u[0]))throw lh("leading combining mark");for(let g=1;g<c;g++){let y=a[g];if(!y.is_emoji&&ra.has(y[0]))throw lh(`emoji + combining mark: "${au(a[g-1])} + ${Eg([y[0]])}"`)}kV(u);let f=Np(new Set(d)),[p]=MV(f);FV(p,d),BV(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function BV(r,e){let t,n=[];for(let s of e){let i=Lc.get(s);if(i===qN)return;if(i){let o=i.M.get(s);if(t=t?t.filter(a=>o.has(a)):Np(o),!t.length)return}else n.push(s)}if(t){for(let s of t)if(n.every(i=>ad(s,i)))throw new Error(`whole-script confusable: ${r.N}/${s.N}`)}}function MV(r){let e=Yc;for(let t of r){let n=e.filter(s=>ad(s,t));if(!n.length)throw Yc.some(s=>ad(s,t))?JN(e[0],t):KN(t);if(e=n,n.length==1)break}return e}function $V(r){return r.map(({input:e,error:t,output:n})=>{if(t){let s=t.message;throw new Error(r.length==1?s:`Invalid label ${E0(Eg(e,63))}: ${s}`)}return au(n)}).join(HN)}function KN(r){return new Error(`disallowed character: ${b0(r)}`)}function JN(r,e){let t=b0(e),n=Yc.find(s=>s.P.has(e));return n&&(t=`${n.N} ${t}`),new Error(`illegal mixture: ${r.N} + ${t}`)}function lh(r){return new Error(`illegal placement: ${r}`)}function FV(r,e){for(let t of e)if(!ad(r,t))throw JN(r,t);if(r.M){let t=jN(e);for(let n=1,s=t.length;n<s;n++)if(uw.has(t[n])){let i=n+1;for(let o;i<s&&uw.has(o=t[i]);i++)for(let a=n;a<i;a++)if(t[a]==o)throw new Error(`duplicate non-spacing marks: ${b0(o)}`);if(i-n>kA)throw new Error(`excessive non-spacing marks: ${E0(Eg(t.slice(n-1,i)))} (${i-n}/${kA})`);n=i}}}function jV(r,e,t){let n=[],s=[];for(r=r.slice().reverse();r.length;){let i=VV(r);if(i)s.length&&(n.push(e(s)),s=[]),n.push(t(i));else{let o=r.pop();if(Ho.has(o))s.push(o);else{let a=lw.get(o);if(a)s.push(...a);else if(!zN.has(o))throw KN(o)}}}return s.length&&n.push(e(s)),n}function HV(r){return r.filter(e=>e!=VN)}function VV(r,e){let t=hw,n,s=r.length;for(;s&&(t=t.get(r[--s]),!!t);){let{V:i}=t;i&&(n=i,r.length=s)}return n}const QN=new Uint8Array(32);QN.fill(0);function BA(r){return F(r.length!==0,"invalid ENS name; empty component","comp",r),r}function YN(r){const e=zs(qV(r)),t=[];if(r.length===0)return t;let n=0;for(let s=0;s<e.length;s++)e[s]===46&&(t.push(BA(e.slice(n,s))),n=s+1);return F(n<e.length,"invalid ENS name; empty component","name",r),t.push(BA(e.slice(n))),t}function qV(r){try{if(r.length===0)throw new Error("empty label");return UV(r)}catch(e){F(!1,`invalid ENS name (${e.message})`,"name",r)}}function dw(r){F(typeof r=="string","invalid ENS name; not a string","name",r),F(r.length,"invalid ENS name (empty label)","name",r);let e=QN;const t=YN(r);for(;t.length;)e=Vt($t([e,Vt(t.pop())]));return fe(e)}function zV(r,e){const t=e;return F(t<=255,"DNS encoded label cannot exceed 255","length",t),fe($t(YN(r).map(n=>{F(n.length<=t,`label ${JSON.stringify(r)} exceeds ${t} bytes`,"name",r);const s=new Uint8Array(n.length+1);return s.set(n,1),s[0]=s.length-1,s})))+"00"}function Um(r,e){return{address:ht(r),storageKeys:e.map((t,n)=>(F(wt(t,32),"invalid slot",`storageKeys[${n}]`,t),t.toLowerCase()))}}function ic(r){if(Array.isArray(r))return r.map((t,n)=>Array.isArray(t)?(F(t.length===2,"invalid slot set",`value[${n}]`,t),Um(t[0],t[1])):(F(t!=null&&typeof t=="object","invalid address-slot set","value",r),Um(t.address,t.storageKeys)));F(r!=null&&typeof r=="object","invalid access list","value",r);const e=Object.keys(r).map(t=>{const n=r[t].reduce((s,i)=>(s[i]=!0,s),{});return Um(t,Object.keys(n).sort())});return e.sort((t,n)=>t.address.localeCompare(n.address)),e}function WV(r){let e;return typeof r=="string"?e=nd.computePublicKey(r,!1):e=r.publicKey,ht(Vt("0x"+e.substring(4)).substring(26))}function GV(r,e){return WV(nd.recoverPublicKey(r,e))}const Zt=BigInt(0),KV=BigInt(2),JV=BigInt(27),QV=BigInt(28),YV=BigInt(35),ZV=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Lm=4096*32;function MA(r,e){let t=r.toString(16);for(;t.length<2;)t="0"+t;return t+=bu(e).substring(4),"0x"+t}function vg(r){return r==="0x"?null:ht(r)}function v0(r,e){try{return ic(r)}catch(t){F(!1,t.message,e,r)}}function zd(r,e){return r==="0x"?0:Ue(r,e)}function Mt(r,e){if(r==="0x")return Zt;const t=me(r,e);return F(t<=ZV,"value exceeds uint size",e,t),t}function _t(r,e){const t=me(r,"value"),n=kr(t);return F(n.length<=32,"value too large",`tx.${e}`,t),n}function A0(r){return ic(r).map(e=>[e.address,e.storageKeys])}function XV(r,e){F(Array.isArray(r),`invalid ${e}`,"value",r);for(let t=0;t<r.length;t++)F(wt(r[t],32),"invalid ${ param } hash",`value[${t}]`,r[t]);return r}function eq(r){const e=mg(r);F(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",r);const t={type:0,nonce:zd(e[0],"nonce"),gasPrice:Mt(e[1],"gasPrice"),gasLimit:Mt(e[2],"gasLimit"),to:vg(e[3]),value:Mt(e[4],"value"),data:fe(e[5]),chainId:Zt};if(e.length===6)return t;const n=Mt(e[6],"v"),s=Mt(e[7],"r"),i=Mt(e[8],"s");if(s===Zt&&i===Zt)t.chainId=n;else{let o=(n-YV)/KV;o<Zt&&(o=Zt),t.chainId=o,F(o!==Zt||n===JV||n===QV,"non-canonical legacy v","v",e[6]),t.signature=ms.from({r:qa(e[7],32),s:qa(e[8],32),v:n})}return t}function tq(r,e){const t=[_t(r.nonce,"nonce"),_t(r.gasPrice||0,"gasPrice"),_t(r.gasLimit,"gasLimit"),r.to||"0x",_t(r.value,"value"),r.data];let n=Zt;if(r.chainId!=Zt)n=me(r.chainId,"tx.chainId"),F(!e||e.networkV==null||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(r.signature){const i=r.signature.legacyChainId;i!=null&&(n=i)}if(!e)return n!==Zt&&(t.push(kr(n)),t.push("0x"),t.push("0x")),za(t);let s=BigInt(27+e.yParity);return n!==Zt?s=ms.getChainIdV(n,e.v):BigInt(e.v)!==s&&F(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(kr(s)),t.push(kr(e.r)),t.push(kr(e.s)),za(t)}function C0(r,e){let t;try{if(t=zd(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{F(!1,"invalid yParity","yParity",e[0])}const n=qa(e[1],32),s=qa(e[2],32),i=ms.from({r:n,s,yParity:t});r.signature=i}function rq(r){const e=mg(Ke(r).slice(1));F(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",fe(r));const t={type:2,chainId:Mt(e[0],"chainId"),nonce:zd(e[1],"nonce"),maxPriorityFeePerGas:Mt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Mt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Mt(e[4],"gasLimit"),to:vg(e[5]),value:Mt(e[6],"value"),data:fe(e[7]),accessList:v0(e[8],"accessList")};return e.length===9||C0(t,e.slice(9)),t}function nq(r,e){const t=[_t(r.chainId,"chainId"),_t(r.nonce,"nonce"),_t(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_t(r.maxFeePerGas||0,"maxFeePerGas"),_t(r.gasLimit,"gasLimit"),r.to||"0x",_t(r.value,"value"),r.data,A0(r.accessList||[])];return e&&(t.push(_t(e.yParity,"yParity")),t.push(kr(e.r)),t.push(kr(e.s))),$t(["0x02",za(t)])}function sq(r){const e=mg(Ke(r).slice(1));F(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",fe(r));const t={type:1,chainId:Mt(e[0],"chainId"),nonce:zd(e[1],"nonce"),gasPrice:Mt(e[2],"gasPrice"),gasLimit:Mt(e[3],"gasLimit"),to:vg(e[4]),value:Mt(e[5],"value"),data:fe(e[6]),accessList:v0(e[7],"accessList")};return e.length===8||C0(t,e.slice(8)),t}function iq(r,e){const t=[_t(r.chainId,"chainId"),_t(r.nonce,"nonce"),_t(r.gasPrice||0,"gasPrice"),_t(r.gasLimit,"gasLimit"),r.to||"0x",_t(r.value,"value"),r.data,A0(r.accessList||[])];return e&&(t.push(_t(e.yParity,"recoveryParam")),t.push(kr(e.r)),t.push(kr(e.s))),$t(["0x01",za(t)])}function oq(r){let e=mg(Ke(r).slice(1)),t="3",n=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const i=e[1],o=e[2],a=e[3];F(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),F(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),F(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),F(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),F(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),n=[];for(let c=0;c<e[1].length;c++)n.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}F(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",fe(r));const s={type:3,chainId:Mt(e[0],"chainId"),nonce:zd(e[1],"nonce"),maxPriorityFeePerGas:Mt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Mt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Mt(e[4],"gasLimit"),to:vg(e[5]),value:Mt(e[6],"value"),data:fe(e[7]),accessList:v0(e[8],"accessList"),maxFeePerBlobGas:Mt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};n&&(s.blobs=n),F(s.to!=null,`invalid address for transaction type: ${t}`,"data",r),F(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",r);for(let i=0;i<s.blobVersionedHashes.length;i++)F(wt(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",r);return e.length===11||C0(s,e.slice(11)),s}function aq(r,e,t){const n=[_t(r.chainId,"chainId"),_t(r.nonce,"nonce"),_t(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_t(r.maxFeePerGas||0,"maxFeePerGas"),_t(r.gasLimit,"gasLimit"),r.to||rd,_t(r.value,"value"),r.data,A0(r.accessList||[]),_t(r.maxFeePerBlobGas||0,"maxFeePerBlobGas"),XV(r.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(n.push(_t(e.yParity,"yParity")),n.push(kr(e.r)),n.push(kr(e.s)),t)?$t(["0x03",za([n,t.map(s=>s.data),t.map(s=>s.commitment),t.map(s=>s.proof)])]):$t(["0x03",za(n)])}var Ps,fl,pl,gl,ml,yl,wl,bl,El,vl,Al,Cl,ga,ro,mi,no,_l,zf;const li=class li{constructor(){V(this,_l);V(this,Ps);V(this,fl);V(this,pl);V(this,gl);V(this,ml);V(this,yl);V(this,wl);V(this,bl);V(this,El);V(this,vl);V(this,Al);V(this,Cl);V(this,ga);V(this,ro);V(this,mi);V(this,no);D(this,Ps,null),D(this,fl,null),D(this,gl,0),D(this,ml,Zt),D(this,yl,null),D(this,wl,null),D(this,bl,null),D(this,pl,"0x"),D(this,El,Zt),D(this,vl,Zt),D(this,Al,null),D(this,Cl,null),D(this,ga,null),D(this,ro,null),D(this,no,null),D(this,mi,null)}get type(){return E(this,Ps)}set type(e){switch(e){case null:D(this,Ps,null);break;case 0:case"legacy":D(this,Ps,0);break;case 1:case"berlin":case"eip-2930":D(this,Ps,1);break;case 2:case"london":case"eip-1559":D(this,Ps,2);break;case 3:case"cancun":case"eip-4844":D(this,Ps,3);break;default:F(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const e=E(this,fl);return e==null&&this.type===3?rd:e}set to(e){D(this,fl,e==null?null:ht(e))}get nonce(){return E(this,gl)}set nonce(e){D(this,gl,Ue(e,"value"))}get gasLimit(){return E(this,ml)}set gasLimit(e){D(this,ml,me(e))}get gasPrice(){const e=E(this,yl);return e==null&&(this.type===0||this.type===1)?Zt:e}set gasPrice(e){D(this,yl,e==null?null:me(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=E(this,wl);return e??(this.type===2||this.type===3?Zt:null)}set maxPriorityFeePerGas(e){D(this,wl,e==null?null:me(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=E(this,bl);return e??(this.type===2||this.type===3?Zt:null)}set maxFeePerGas(e){D(this,bl,e==null?null:me(e,"maxFeePerGas"))}get data(){return E(this,pl)}set data(e){D(this,pl,fe(e))}get value(){return E(this,El)}set value(e){D(this,El,me(e,"value"))}get chainId(){return E(this,vl)}set chainId(e){D(this,vl,me(e))}get signature(){return E(this,Al)||null}set signature(e){D(this,Al,e==null?null:ms.from(e))}get accessList(){const e=E(this,Cl)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){D(this,Cl,e==null?null:ic(e))}get maxFeePerBlobGas(){const e=E(this,ga);return e==null&&this.type===3?Zt:e}set maxFeePerBlobGas(e){D(this,ga,e==null?null:me(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=E(this,ro);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){F(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)F(wt(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}D(this,ro,e)}get blobs(){return E(this,no)==null?null:E(this,no).map(e=>Object.assign({},e))}set blobs(e){if(e==null){D(this,no,null);return}const t=[],n=[];for(let s=0;s<e.length;s++){const i=e[s];if(c0(i)){W(E(this,mi),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Ke(i);if(F(o.length<=Lm,"blob is too large",`blobs[${s}]`,i),o.length!==Lm){const l=new Uint8Array(Lm);l.set(o),o=l}const a=E(this,mi).blobToKzgCommitment(o),c=fe(E(this,mi).computeBlobKzgProof(o,a));t.push({data:fe(o),commitment:fe(a),proof:c}),n.push(MA(1,a))}else{const o=fe(i.commitment);t.push({data:fe(i.data),commitment:o,proof:fe(i.proof)}),n.push(MA(1,o))}}D(this,no,t),D(this,ro,n)}get kzg(){return E(this,mi)}set kzg(e){D(this,mi,e)}get hash(){return this.signature==null?null:Vt(J(this,_l,zf).call(this,!0,!1))}get unsignedHash(){return Vt(this.unsignedSerialized)}get from(){return this.signature==null?null:GV(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:nd.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return J(this,_l,zf).call(this,!0,!0)}get unsignedSerialized(){return J(this,_l,zf).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,s=E(this,ga)!=null||E(this,ro);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&W(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),W(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),W(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):t?i.push(2):e?(i.push(1),n||i.push(0)):n?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return li.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new li;if(typeof e=="string"){const n=Ke(e);if(n[0]>=127)return li.from(eq(n));switch(n[0]){case 1:return li.from(sq(n));case 2:return li.from(rq(n));case 3:return li.from(oq(n))}W(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new li;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=ms.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(F(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),F(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(F(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),F(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}};Ps=new WeakMap,fl=new WeakMap,pl=new WeakMap,gl=new WeakMap,ml=new WeakMap,yl=new WeakMap,wl=new WeakMap,bl=new WeakMap,El=new WeakMap,vl=new WeakMap,Al=new WeakMap,Cl=new WeakMap,ga=new WeakMap,ro=new WeakMap,mi=new WeakMap,no=new WeakMap,_l=new WeakSet,zf=function(e,t){W(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=e?this.signature:null;switch(this.inferType()){case 0:return tq(this,n);case 1:return iq(this,n);case 2:return nq(this,n);case 3:return aq(this,n,t?this.blobs:null)}W(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Sp=li;const ZN=new Uint8Array(32);ZN.fill(0);const cq=BigInt(-1),XN=BigInt(0),eS=BigInt(1),lq=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function uq(r){const e=Ke(r),t=e.length%32;return t?$t([e,ZN.slice(t)]):fe(e)}const hq=Oo(eS,32),dq=Oo(XN,32),$A={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Bm=["name","version","chainId","verifyingContract","salt"];function FA(r){return function(e){return F(typeof e=="string",`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,e),e}}const fq={name:FA("name"),version:FA("version"),chainId:function(r){const e=me(r,"domain.chainId");return F(e>=0,"invalid chain ID","domain.chainId",r),Number.isSafeInteger(e)?Number(e):Hc(e)},verifyingContract:function(r){try{return ht(r).toLowerCase()}catch{}F(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){const e=Ke(r,"domain.salt");return F(e.length===32,'invalid domain value "salt"',"domain.salt",r),fe(e)}};function Mm(r){{const e=r.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",n=parseInt(e[2]);F(n%8===0&&n!==0&&n<=256&&e[2]===String(n),"invalid numeric width","type",r);const s=ea(lq,t?n-1:n),i=t?(s+eS)*cq:XN;return function(o){const a=me(o,"value");return F(a>=i&&a<=s,`value out-of-bounds for ${r}`,"value",a),Oo(t?$I(a,256):a,32)}}}{const e=r.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return F(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",r),function(n){const s=Ke(n);return F(s.length===t,`invalid length for ${r}`,"value",n),uq(n)}}}switch(r){case"address":return function(e){return qa(ht(e),32)};case"bool":return function(e){return e?hq:dq};case"bytes":return function(e){return Vt(e)};case"string":return function(e){return Wa(e)}}return null}function jA(r,e){return`${r}(${e.map(({name:t,type:n})=>n+" "+t).join(",")})`}function Nf(r){const e=r.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:r}}var gd,yi,Il,Mp,tS;const Un=class Un{constructor(e){V(this,Mp);H(this,"primaryType");V(this,gd);V(this,yi);V(this,Il);D(this,yi,new Map),D(this,Il,new Map);const t=new Map,n=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:h,index:d}=Nf(u);return h==="int"&&!e.int&&(h="int256"),h==="uint"&&!e.uint&&(h="uint256"),{name:l,type:h+(d||"")}}),t.set(c,new Set),n.set(c,[]),s.set(c,new Set)}),D(this,gd,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){F(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const h=Nf(u.type).base;F(h!==c,`circular type reference to ${JSON.stringify(h)}`,"types",e),!Mm(h)&&(F(n.has(h),`unknown type ${JSON.stringify(h)}`,"types",e),n.get(h).push(c),t.get(c).add(h))}}const o=Array.from(n.keys()).filter(c=>n.get(c).length===0);F(o.length!==0,"missing primary type","types",e),F(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),Ae(this,{primaryType:o[0]});function a(c,l){F(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of t.get(c))if(n.has(u)){a(u,l);for(const h of l)s.get(h).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),E(this,yi).set(c,jA(c,i[c])+u.map(h=>jA(h,i[h])).join(""))}}get types(){return JSON.parse(E(this,gd))}getEncoder(e){let t=E(this,Il).get(e);return t||(t=J(this,Mp,tS).call(this,e),E(this,Il).set(e,t)),t}encodeType(e){const t=E(this,yi).get(e);return F(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Vt(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(Mm(e))return n(e,t);const s=Nf(e).array;if(s)return F(s.count===-1||s.count===t.length,`array length mismatch; expected length ${s.count}`,"value",t),t.map(o=>this._visit(s.prefix,o,n));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,t[a],n),o),{});F(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Un(e)}static getPrimaryType(e){return Un.from(e).primaryType}static hashStruct(e,t,n){return Un.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){if(e[n]==null)continue;const s=$A[n];F(s,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:s})}return t.sort((n,s)=>Bm.indexOf(n.name)-Bm.indexOf(s.name)),Un.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return $t(["0x1901",Un.hashDomain(e),Un.from(t).hash(n)])}static hash(e,t,n){return Vt(Un.encode(e,t,n))}static async resolveNames(e,t,n,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!wt(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=Un.from(t);o.visit(n,(a,c)=>(a==="address"&&!wt(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:n}}static getPayload(e,t,n){Un.hashDomain(e);const s={},i=[];Bm.forEach(c=>{const l=e[c];l!=null&&(s[c]=fq[c](l),i.push({name:c,type:$A[c]}))});const o=Un.from(t);t=o.types;const a=Object.assign({},t);return F(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),a.EIP712Domain=i,o.encode(n),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(n,(c,l)=>{if(c.match(/^bytes(\d*)/))return fe(Ke(l));if(c.match(/^u?int/))return me(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return F(typeof l=="string","invalid string","value",l),l}F(!1,"unsupported type","type",c)})}}};gd=new WeakMap,yi=new WeakMap,Il=new WeakMap,Mp=new WeakSet,tS=function(e){{const s=Mm(e);if(s)return s}const t=Nf(e).array;if(t){const s=t.prefix,i=this.getEncoder(s);return o=>{F(t.count===-1||t.count===o.length,`array length mismatch; expected length ${t.count}`,"value",o);let a=o.map(i);return E(this,yi).has(s)&&(a=a.map(Vt)),Vt($t(a))}}const n=this.types[e];if(n){const s=Wa(E(this,yi).get(e));return i=>{const o=n.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return E(this,yi).has(c)?Vt(l):l});return o.unshift(s),$t(o)}}F(!1,`unknown type: ${e}`,"type",e)};let Tp=Un;function Lr(r){const e=new Set;return r.forEach(t=>e.add(t)),Object.freeze(e)}const pq="external public payable override",gq=Lr(pq.split(" ")),rS="constant external internal payable private public pure view override",mq=Lr(rS.split(" ")),nS="constructor error event fallback function receive struct",sS=Lr(nS.split(" ")),iS="calldata memory storage payable indexed",yq=Lr(iS.split(" ")),wq="tuple returns",bq=[nS,iS,wq,rS].join(" "),Eq=Lr(bq.split(" ")),vq={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Aq=new RegExp("^(\\s*)"),Cq=new RegExp("^([0-9]+)"),_q=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),oS=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),aS=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var cr,is,md,fw;const $p=class $p{constructor(e){V(this,md);V(this,cr);V(this,is);D(this,cr,0),D(this,is,e.slice())}get offset(){return E(this,cr)}get length(){return E(this,is).length-E(this,cr)}clone(){return new $p(E(this,is))}reset(){D(this,cr,0)}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=J(this,md,fw).call(this,E(this,cr)+1,e.match+1);return D(this,cr,e.match+1),t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;E(this,cr)<e.match-1;){const n=this.peek().linkNext;t.push(J(this,md,fw).call(this,E(this,cr)+1,n)),D(this,cr,n)}return D(this,cr,e.match+1),t}peek(){if(E(this,cr)>=E(this,is).length)throw new Error("out-of-bounds");return E(this,is)[E(this,cr)]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return Eu(this,cr)._++,e}toString(){const e=[];for(let t=E(this,cr);t<E(this,is).length;t++){const n=E(this,is)[t];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}};cr=new WeakMap,is=new WeakMap,md=new WeakSet,fw=function(e=0,t=0){return new $p(E(this,is).slice(e,t).map(n=>Object.freeze(Object.assign({},n,{match:n.match-e,linkBack:n.linkBack-e,linkNext:n.linkNext-e}))))};let ys=$p;function Ro(r){const e=[],t=o=>{const a=i<r.length?JSON.stringify(r[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let n=[],s=[],i=0;for(;i<r.length;){let o=r.substring(i),a=o.match(Aq);a&&(i+=a[1].length,o=r.substring(i));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=vq[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")n.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")n.length===0&&t("no matching open bracket"),c.match=n.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const h=e.pop().text;u=h+u,e[e.length-1].value=Ue(h)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(_q),a){if(c.text=a[1],i+=c.text.length,Eq.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(aS)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(Cq),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new ys(e.map(o=>Object.freeze(o)))}function HA(r,e){let t=[];for(const n in e.keys())r.has(n)&&t.push(n);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function Ag(r,e){if(e.peekKeyword(sS)){const t=e.pop().text;if(t!==r)throw new Error(`expected ${r}, got ${t}`)}return e.popType("ID")}function Di(r,e){const t=new Set;for(;;){const n=r.peekType("KEYWORD");if(n==null||e&&!e.has(n))break;if(r.pop(),t.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);t.add(n)}return Object.freeze(t)}function cS(r){let e=Di(r,mq);return HA(e,Lr("constant payable nonpayable".split(" "))),HA(e,Lr("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Pi(r,e){return r.popParams().map(t=>fr.from(t,e))}function lS(r){if(r.peekType("AT")){if(r.pop(),r.peekType("NUMBER"))return me(r.pop().text);throw new Error("invalid gas")}return null}function Ga(r){if(r.length)throw new Error(`unexpected tokens at offset ${r.offset}: ${r.toString()}`)}const Iq=new RegExp(/^(.*)\[([0-9]*)\]$/);function VA(r){const e=r.match(aS);if(F(e,"invalid type","type",r),r==="uint")return"uint256";if(r==="int")return"int256";if(e[2]){const t=parseInt(e[2]);F(t!==0&&t<=32,"invalid bytes length","type",r)}else if(e[3]){const t=parseInt(e[3]);F(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",r)}return r}const Ot={},en=Symbol.for("_ethers_internal"),qA="_ParamTypeInternal",zA="_ErrorInternal",WA="_EventInternal",GA="_ConstructorInternal",KA="_FallbackInternal",JA="_FunctionInternal",QA="_StructInternal";var Nl,Wf;const Ln=class Ln{constructor(e,t,n,s,i,o,a,c){V(this,Nl);H(this,"name");H(this,"type");H(this,"baseType");H(this,"indexed");H(this,"components");H(this,"arrayLength");H(this,"arrayChildren");if(Vd(e,Ot,"ParamType"),Object.defineProperty(this,en,{value:qA}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Ae(this,{name:t,type:n,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const n=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=n,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(n=>n.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map(s=>n.arrayChildren.walk(s,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map((s,i)=>n.components[i].walk(s,t))}return t(this.type,e)}async walkAsync(e,t){const n=[],s=[e];return J(this,Nl,Wf).call(this,n,e,t,i=>{s[0]=i}),n.length&&await Promise.all(n),s[0]}static from(e,t){if(Ln.isParamType(e))return e;if(typeof e=="string")try{return Ln.from(Ro(e),t)}catch{F(!1,"invalid param type","obj",e)}else if(e instanceof ys){let a="",c="",l=null;Di(e,Lr(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>Ln.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=VA(e.popType("TYPE")),c=a);let u=null,h=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new Ln(Ot,"",a,c,null,l,h,u),h=g.value,a+=g.text,c="array",l=null}let d=null;if(Di(e,yq).has("indexed")){if(!t)throw new Error("");d=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Ln(Ot,p,a,c,d,l,h,u)}const n=e.name;F(!n||typeof n=="string"&&n.match(oS),"invalid name","obj.name",n);let s=e.indexed;s!=null&&(F(t,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(Iq);if(o){const a=parseInt(o[2]||"-1"),c=Ln.from({type:o[1],components:e.components});return new Ln(Ot,n||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>Ln.from(l)):null;return new Ln(Ot,n||"",i,"tuple",s,a,null,null)}return i=VA(e.type),new Ln(Ot,n||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[en]===qA}};Nl=new WeakSet,Wf=function(e,t,n,s){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=t.slice();a.forEach((c,l)=>{var u;J(u=o,Nl,Wf).call(u,e,c,n,h=>{a[l]=h})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(t))a=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in t))throw new Error(`missing value for component ${c.name}`);return t[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;J(u=o[l],Nl,Wf).call(u,e,c,n,h=>{a[l]=h})}),s(a);return}const i=n(this.type,t);i.then?e.push(async function(){s(await i)}()):s(i)};let fr=Ln;class Ka{constructor(e,t,n){H(this,"type");H(this,"inputs");Vd(e,Ot,"Fragment"),n=Object.freeze(n.slice()),Ae(this,{type:t,inputs:n})}static from(e){if(typeof e=="string"){try{Ka.from(JSON.parse(e))}catch{}return Ka.from(Ro(e))}if(e instanceof ys)switch(e.peekKeyword(sS)){case"constructor":return Ni.from(e);case"error":return Yr.from(e);case"event":return Fs.from(e);case"fallback":case"receive":return hi.from(e);case"function":return js.from(e);case"struct":return ka.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Ni.from(e);case"error":return Yr.from(e);case"event":return Fs.from(e);case"fallback":case"receive":return hi.from(e);case"function":return js.from(e);case"struct":return ka.from(e)}W(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}F(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Ni.isFragment(e)}static isError(e){return Yr.isFragment(e)}static isEvent(e){return Fs.isFragment(e)}static isFunction(e){return js.isFragment(e)}static isStruct(e){return ka.isFragment(e)}}class Cg extends Ka{constructor(t,n,s,i){super(t,n,i);H(this,"name");F(typeof s=="string"&&s.match(oS),"invalid identifier","name",s),i=Object.freeze(i.slice()),Ae(this,{name:s})}}function cd(r,e){return"("+e.map(t=>t.format(r)).join(r==="full"?", ":",")+")"}class Yr extends Cg{constructor(e,t,n){super(e,"error",t,n),Object.defineProperty(this,en,{value:zA})}get selector(){return Wa(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+cd(e,this.inputs)),t.join(" ")}static from(e){if(Yr.isFragment(e))return e;if(typeof e=="string")return Yr.from(Ro(e));if(e instanceof ys){const t=Ag("error",e),n=Pi(e);return Ga(e),new Yr(Ot,t,n)}return new Yr(Ot,e.name,e.inputs?e.inputs.map(fr.from):[])}static isFragment(e){return e&&e[en]===zA}}class Fs extends Cg{constructor(t,n,s,i){super(t,"event",n,s);H(this,"anonymous");Object.defineProperty(this,en,{value:WA}),Ae(this,{anonymous:i})}get topicHash(){return Wa(this.format("sighash"))}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(t)))});const n=[];return t!=="sighash"&&n.push("event"),n.push(this.name+cd(t,this.inputs)),t!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(t,n){return n=(n||[]).map(i=>fr.from(i)),new Fs(Ot,t,n,!1).topicHash}static from(t){if(Fs.isFragment(t))return t;if(typeof t=="string")try{return Fs.from(Ro(t))}catch{F(!1,"invalid event fragment","obj",t)}else if(t instanceof ys){const n=Ag("event",t),s=Pi(t,!0),i=!!Di(t,Lr(["anonymous"])).has("anonymous");return Ga(t),new Fs(Ot,n,s,i)}return new Fs(Ot,t.name,t.inputs?t.inputs.map(n=>fr.from(n,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[en]===WA}}class Ni extends Ka{constructor(t,n,s,i,o){super(t,n,s);H(this,"payable");H(this,"gas");Object.defineProperty(this,en,{value:GA}),Ae(this,{payable:i,gas:o})}format(t){if(W(t!=null&&t!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),t==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(t)))});const n=[`constructor${cd(t,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(t){if(Ni.isFragment(t))return t;if(typeof t=="string")try{return Ni.from(Ro(t))}catch{F(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof ys){Di(t,Lr(["constructor"]));const n=Pi(t),s=!!Di(t,gq).has("payable"),i=lS(t);return Ga(t),new Ni(Ot,"constructor",n,s,i)}return new Ni(Ot,"constructor",t.inputs?t.inputs.map(fr.from):[],!!t.payable,t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[en]===GA}}class hi extends Ka{constructor(t,n,s){super(t,"fallback",n);H(this,"payable");Object.defineProperty(this,en,{value:KA}),Ae(this,{payable:s})}format(t){const n=this.inputs.length===0?"receive":"fallback";if(t==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:s})}return`${n}()${this.payable?" payable":""}`}static from(t){if(hi.isFragment(t))return t;if(typeof t=="string")try{return hi.from(Ro(t))}catch{F(!1,"invalid fallback fragment","obj",t)}else if(t instanceof ys){const n=t.toString(),s=t.peekKeyword(Lr(["fallback","receive"]));if(F(s,"type must be fallback or receive","obj",n),t.popKeyword(Lr(["fallback","receive"]))==="receive"){const c=Pi(t);return F(c.length===0,"receive cannot have arguments","obj.inputs",c),Di(t,Lr(["payable"])),Ga(t),new hi(Ot,[],!0)}let o=Pi(t);o.length?F(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[fr.from("bytes")];const a=cS(t);if(F(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),Di(t,Lr(["returns"])).has("returns")){const c=Pi(t);F(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return Ga(t),new hi(Ot,o,a==="payable")}if(t.type==="receive")return new hi(Ot,[],!0);if(t.type==="fallback"){const n=[fr.from("bytes")],s=t.stateMutability==="payable";return new hi(Ot,n,s)}F(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[en]===KA}}class js extends Cg{constructor(t,n,s,i,o,a){super(t,"function",n,i);H(this,"constant");H(this,"outputs");H(this,"stateMutability");H(this,"payable");H(this,"gas");Object.defineProperty(this,en,{value:JA}),o=Object.freeze(o.slice()),Ae(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return Wa(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(t))),outputs:this.outputs.map(s=>JSON.parse(s.format(t)))});const n=[];return t!=="sighash"&&n.push("function"),n.push(this.name+cd(t,this.inputs)),t!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(cd(t,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(t,n){return n=(n||[]).map(i=>fr.from(i)),new js(Ot,t,"view",n,[],null).selector}static from(t){if(js.isFragment(t))return t;if(typeof t=="string")try{return js.from(Ro(t))}catch{F(!1,"invalid function fragment","obj",t)}else if(t instanceof ys){const s=Ag("function",t),i=Pi(t),o=cS(t);let a=[];Di(t,Lr(["returns"])).has("returns")&&(a=Pi(t));const c=lS(t);return Ga(t),new js(Ot,s,o,i,a,c)}let n=t.stateMutability;return n==null&&(n="payable",typeof t.constant=="boolean"?(n="view",t.constant||(n="payable",typeof t.payable=="boolean"&&!t.payable&&(n="nonpayable"))):typeof t.payable=="boolean"&&!t.payable&&(n="nonpayable")),new js(Ot,t.name,n,t.inputs?t.inputs.map(fr.from):[],t.outputs?t.outputs.map(fr.from):[],t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[en]===JA}}class ka extends Cg{constructor(e,t,n){super(e,"struct",t,n),Object.defineProperty(this,en,{value:QA})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return ka.from(Ro(e))}catch{F(!1,"invalid struct fragment","obj",e)}else if(e instanceof ys){const t=Ag("struct",e),n=Pi(e);return Ga(e),new ka(Ot,t,n)}return new ka(Ot,e.name,e.inputs?e.inputs.map(fr.from):[])}static isFragment(e){return e&&e[en]===QA}}const Es=new Map;Es.set(0,"GENERIC_PANIC");Es.set(1,"ASSERT_FALSE");Es.set(17,"OVERFLOW");Es.set(18,"DIVIDE_BY_ZERO");Es.set(33,"ENUM_RANGE_ERROR");Es.set(34,"BAD_STORAGE_DATA");Es.set(49,"STACK_UNDERFLOW");Es.set(50,"ARRAY_RANGE_ERROR");Es.set(65,"OUT_OF_MEMORY");Es.set(81,"UNINITIALIZED_FUNCTION_CALL");const Nq=new RegExp(/^bytes([0-9]*)$/),Sq=new RegExp(/^(u?int)([0-9]*)$/);let $m=null,YA=1024;function Tq(r,e,t,n){let s="missing revert data",i=null;const o=null;let a=null;if(t){s="execution reverted";const l=Ke(t);if(t=fe(t),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(fe(l.slice(0,4))==="0x08c379a0")try{i=n.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(fe(l.slice(0,4))==="0x4e487b71")try{const u=Number(n.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${Es.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?ht(e.to):null,data:e.data||"0x"};return e.from&&(c.from=ht(e.from)),Nt(s,"CALL_EXCEPTION",{action:r,data:t,reason:i,transaction:c,invocation:o,revert:a})}var so,Bc;const Fp=class Fp{constructor(){V(this,so)}getDefaultValue(e){const t=e.map(s=>J(this,so,Bc).call(this,fr.from(s)));return new If(t,"_").defaultValue()}encode(e,t){LI(t.length,e.length,"types/values length mismatch");const n=e.map(o=>J(this,so,Bc).call(this,fr.from(o))),s=new If(n,"_"),i=new Xy;return s.encode(i,t),i.data}decode(e,t,n){const s=e.map(o=>J(this,so,Bc).call(this,fr.from(o)));return new If(s,"_").decode(new ew(t,n,YA))}static _setDefaultMaxInflation(e){F(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),YA=e}static defaultAbiCoder(){return $m==null&&($m=new Fp),$m}static getBuiltinCallException(e,t,n){return Tq(e,t,n,Fp.defaultAbiCoder())}};so=new WeakSet,Bc=function(e){if(e.isArray())return new YH(J(this,so,Bc).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new If(e.components.map(n=>J(this,so,Bc).call(this,n)),e.name);switch(e.baseType){case"address":return new JH(e.name);case"bool":return new ZH(e.name);case"string":return new aV(e.name);case"bytes":return new XH(e.name);case"":return new rV(e.name)}let t=e.type.match(Sq);if(t){let n=parseInt(t[2]||"256");return F(n!==0&&n<=256&&n%8===0,"invalid "+t[1]+" bit length","param",e),new oV(n/8,t[1]==="int",e.name)}if(t=e.type.match(Nq),t){let n=parseInt(t[1]);return F(n!==0&&n<=32,"invalid bytes length","param",e),new eV(n,e.name)}F(!1,"invalid type","type",e.type)};let ld=Fp;class Oq{constructor(e,t,n){H(this,"fragment");H(this,"name");H(this,"signature");H(this,"topic");H(this,"args");const s=e.name,i=e.format();Ae(this,{fragment:e,name:s,signature:i,topic:t,args:n})}}class Pq{constructor(e,t,n,s){H(this,"fragment");H(this,"name");H(this,"args");H(this,"signature");H(this,"selector");H(this,"value");const i=e.name,o=e.format();Ae(this,{fragment:e,name:i,args:n,signature:o,selector:t,value:s})}}class xq{constructor(e,t,n){H(this,"fragment");H(this,"name");H(this,"args");H(this,"signature");H(this,"selector");const s=e.name,i=e.format();Ae(this,{fragment:e,name:s,args:n,signature:i,selector:t})}}class ZA{constructor(e){H(this,"hash");H(this,"_isIndexed");Ae(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const XA={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},e1={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:r=>`reverted with reason string ${JSON.stringify(r)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:r=>{let e="unknown panic code";return r>=0&&r<=255&&XA[r.toString()]&&(e=XA[r.toString()]),`reverted with panic code 0x${r.toString(16)} (${e})`}}};var xs,Rs,ks,br,Ws,Gf,Kf;const Qo=class Qo{constructor(e){V(this,Ws);H(this,"fragments");H(this,"deploy");H(this,"fallback");H(this,"receive");V(this,xs);V(this,Rs);V(this,ks);V(this,br);let t=[];typeof e=="string"?t=JSON.parse(e):t=e,D(this,ks,new Map),D(this,xs,new Map),D(this,Rs,new Map);const n=[];for(const o of t)try{n.push(Ka.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Ae(this,{fragments:Object.freeze(n)});let s=null,i=!1;D(this,br,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Ae(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(F(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=E(this,ks);break;case"event":c=E(this,Rs);break;case"error":c=E(this,xs);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||Ae(this,{deploy:Ni.from("constructor()")}),Ae(this,{fallback:s,receive:i})}format(e){const t=e?"minimal":"full";return this.fragments.map(s=>s.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return ld.defaultAbiCoder()}getFunctionName(e){const t=J(this,Ws,Gf).call(this,e,null,!1);return F(t,"no matching function","key",e),t.name}hasFunction(e){return!!J(this,Ws,Gf).call(this,e,null,!1)}getFunction(e,t){return J(this,Ws,Gf).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(E(this,ks).keys());t.sort((n,s)=>n.localeCompare(s));for(let n=0;n<t.length;n++){const s=t[n];e(E(this,ks).get(s),n)}}getEventName(e){const t=J(this,Ws,Kf).call(this,e,null,!1);return F(t,"no matching event","key",e),t.name}hasEvent(e){return!!J(this,Ws,Kf).call(this,e,null,!1)}getEvent(e,t){return J(this,Ws,Kf).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(E(this,Rs).keys());t.sort((n,s)=>n.localeCompare(s));for(let n=0;n<t.length;n++){const s=t[n];e(E(this,Rs).get(s),n)}}getError(e,t){if(wt(e)){const s=e.toLowerCase();if(e1[s])return Yr.from(e1[s].signature);for(const i of E(this,xs).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of E(this,xs))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?Yr.from("error Error(string)"):e==="Panic"?Yr.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");F(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=Yr.from(e).format(),e==="Error(string)")return Yr.from("error Error(string)");if(e==="Panic(uint256)")return Yr.from("error Panic(uint256)");const n=E(this,xs).get(e);return n||null}forEachError(e){const t=Array.from(E(this,xs).keys());t.sort((n,s)=>n.localeCompare(s));for(let n=0;n<t.length;n++){const s=t[n];e(E(this,xs).get(s),n)}}_decodeParams(e,t){return E(this,br).decode(e,t)}_encodeParams(e,t){return E(this,br).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const n=this.getError(e);F(n,"unknown error","fragment",e),e=n}return F(Rt(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,Rt(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const n=this.getError(e);F(n,"unknown error","fragment",e),e=n}return $t([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const n=this.getFunction(e);F(n,"unknown function","fragment",e),e=n}return F(Rt(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,Rt(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const n=this.getFunction(e);F(n,"unknown function","fragment",e),e=n}return $t([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const i=this.getFunction(e);F(i,"unknown function","fragment",e),e=i}let n="invalid length for result data";const s=xr(t);if(s.length%32===0)try{return E(this,br).decode(e.outputs,s)}catch{n="could not decode result data"}W(!1,n,"BAD_DATA",{value:fe(s),info:{method:e.name,signature:e.format()}})}makeError(e,t){const n=Ke(e,"data"),s=ld.getBuiltinCallException("call",t,n);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=fe(n.slice(0,4)),c=this.getError(a);if(c)try{const l=E(this,br).decode(c.inputs,n.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(t);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,t){if(typeof e=="string"){const n=this.getFunction(e);F(n,"unknown function","fragment",e),e=n}return fe(E(this,br).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const i=this.getEvent(e);F(i,"unknown event","eventFragment",e),e=i}W(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const s=(i,o)=>i.type==="string"?Wa(o):i.type==="bytes"?Vt(fe(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=Oo(o):i.type.match(/^bytes/)?o=Zj(o,32):i.type==="address"&&E(this,br).encode(["address"],[o]),qa(fe(o),32));for(t.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){F(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?F(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?n.push(i.map(c=>s(a,c))):n.push(s(a,i))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,t){if(typeof e=="string"){const o=this.getEvent(e);F(o,"unknown event","eventFragment",e),e=o}const n=[],s=[],i=[];return e.anonymous||n.push(e.topicHash),F(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const c=t[a];if(o.indexed)if(o.type==="string")n.push(Wa(c));else if(o.type==="bytes")n.push(Vt(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(E(this,br).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:E(this,br).encode(s,i),topics:n}}decodeEventLog(e,t,n){if(typeof e=="string"){const f=this.getEvent(e);F(f,"unknown event","eventFragment",e),e=f}if(n!=null&&!e.anonymous){const f=e.topicHash;F(wt(n[0],32)&&n[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(fr.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=n!=null?E(this,br).decode(s,$t(n)):null,c=E(this,br).decode(i,t,!0),l=[],u=[];let h=0,d=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new ZA(null);else if(o[p])g=new ZA(a[d++]);else try{g=a[d++]}catch(y){g=y}else try{g=c[h++]}catch(y){g=y}l.push(g),u.push(f.name||null)}),ru.fromItems(l,u)}parseTransaction(e){const t=Ke(e.data,"tx.data"),n=me(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(fe(t.slice(0,4)));if(!s)return null;const i=E(this,br).decode(s.inputs,t.slice(4));return new Pq(s,s.selector,i,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new Oq(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=fe(e),n=this.getError(Rt(t,0,4));if(!n)return null;const s=E(this,br).decode(n.inputs,Rt(t,4));return new xq(n,n.selector,s)}static from(e){return e instanceof Qo?e:typeof e=="string"?new Qo(JSON.parse(e)):typeof e.formatJson=="function"?new Qo(e.formatJson()):typeof e.format=="function"?new Qo(e.format("json")):new Qo(e)}};xs=new WeakMap,Rs=new WeakMap,ks=new WeakMap,br=new WeakMap,Ws=new WeakSet,Gf=function(e,t,n){if(wt(e)){const i=e.toLowerCase();for(const o of E(this,ks).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of E(this,ks))o.split("(")[0]===e&&i.push(a);if(t){const o=t.length>0?t[t.length-1]:null;let a=t.length,c=!0;_r.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let h=0;h<t.length;h++)if(_r.isTyped(t[h])){if(h>=u.length){if(t[h].type==="overrides")continue;i.splice(l,1);break}if(t[h].type!==u[h].baseType){i.splice(l,1);break}}}}if(i.length===1&&t&&t.length!==i[0].inputs.length){const o=t[t.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");F(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=E(this,ks).get(js.from(e).format());return s||null},Kf=function(e,t,n){if(wt(e)){const i=e.toLowerCase();for(const o of E(this,Rs).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of E(this,Rs))o.split("(")[0]===e&&i.push(a);if(t){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<t.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<t.length;c++)if(_r.isTyped(t[c])&&t[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");F(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=E(this,Rs).get(Fs.from(e).format());return s||null};let pw=Qo;const uS=BigInt(0);function Zc(r){return r??null}function kt(r){return r==null?null:r.toString()}class t1{constructor(e,t,n){H(this,"gasPrice");H(this,"maxFeePerGas");H(this,"maxPriorityFeePerGas");Ae(this,{gasPrice:Zc(e),maxFeePerGas:Zc(t),maxPriorityFeePerGas:Zc(n)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:kt(e),maxFeePerGas:kt(t),maxPriorityFeePerGas:kt(n)}}}function Op(r){const e={};r.to&&(e.to=r.to),r.from&&(e.from=r.from),r.data&&(e.data=fe(r.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of t)!(s in r)||r[s]==null||(e[s]=me(r[s],`request.${s}`));const n="type,nonce".split(/,/);for(const s of n)!(s in r)||r[s]==null||(e[s]=Ue(r[s],`request.${s}`));return r.accessList&&(e.accessList=ic(r.accessList)),"blockTag"in r&&(e.blockTag=r.blockTag),"enableCcipRead"in r&&(e.enableCcipRead=!!r.enableCcipRead),"customData"in r&&(e.customData=r.customData),"blobVersionedHashes"in r&&r.blobVersionedHashes&&(e.blobVersionedHashes=r.blobVersionedHashes.slice()),"kzg"in r&&(e.kzg=r.kzg),"blobs"in r&&r.blobs&&(e.blobs=r.blobs.map(s=>c0(s)?fe(s):Object.assign({},s))),e}var wi;class Rq{constructor(e,t){H(this,"provider");H(this,"number");H(this,"hash");H(this,"timestamp");H(this,"parentHash");H(this,"parentBeaconBlockRoot");H(this,"nonce");H(this,"difficulty");H(this,"gasLimit");H(this,"gasUsed");H(this,"stateRoot");H(this,"receiptsRoot");H(this,"blobGasUsed");H(this,"excessBlobGas");H(this,"miner");H(this,"prevRandao");H(this,"extraData");H(this,"baseFeePerGas");V(this,wi);D(this,wi,e.transactions.map(n=>typeof n!="string"?new ud(n,t):n)),Ae(this,{provider:t,hash:Zc(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Zc(e.prevRandao),extraData:e.extraData,baseFeePerGas:Zc(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return E(this,wi).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=E(this,wi).slice();return e.length===0?[]:(W(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:n,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:h,parentBeaconBlockRoot:d,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:y}=this;return{_type:"Block",baseFeePerGas:kt(e),difficulty:kt(t),extraData:n,gasLimit:kt(s),gasUsed:kt(i),blobGasUsed:kt(this.blobGasUsed),excessBlobGas:kt(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:h,timestamp:g,parentBeaconBlockRoot:d,stateRoot:f,receiptsRoot:p,transactions:y}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return E(this,wi).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=E(this,wi)[e];else{const n=e.toLowerCase();for(const s of E(this,wi))if(typeof s=="string"){if(s!==n)continue;t=s;break}else{if(s.hash!==n)continue;t=s;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const n of t)if(n.hash===e)return n;F(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return kq(this)}}wi=new WeakMap;class Wd{constructor(e,t){H(this,"provider");H(this,"transactionHash");H(this,"blockHash");H(this,"blockNumber");H(this,"removed");H(this,"address");H(this,"data");H(this,"topics");H(this,"index");H(this,"transactionIndex");this.provider=t;const n=Object.freeze(e.topics.slice());Ae(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:t,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return W(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return W(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return W(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return Dq(this)}}var yd;class hS{constructor(e,t){H(this,"provider");H(this,"to");H(this,"from");H(this,"contractAddress");H(this,"hash");H(this,"index");H(this,"blockHash");H(this,"blockNumber");H(this,"logsBloom");H(this,"gasUsed");H(this,"blobGasUsed");H(this,"cumulativeGasUsed");H(this,"gasPrice");H(this,"blobGasPrice");H(this,"type");H(this,"status");H(this,"root");V(this,yd);D(this,yd,Object.freeze(e.logs.map(s=>new Wd(s,t))));let n=uS;e.effectiveGasPrice!=null?n=e.effectiveGasPrice:e.gasPrice!=null&&(n=e.gasPrice),Ae(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:n,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return E(this,yd)}toJSON(){const{to:e,from:t,contractAddress:n,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:h}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:n,cumulativeGasUsed:kt(this.cumulativeGasUsed),from:t,gasPrice:kt(this.gasPrice),blobGasUsed:kt(this.blobGasUsed),blobGasPrice:kt(this.blobGasPrice),gasUsed:kt(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:h,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return fS(this)}reorderedEvent(e){return W(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),dS(this,e)}}yd=new WeakMap;var io;const R0=class R0{constructor(e,t){H(this,"provider");H(this,"blockNumber");H(this,"blockHash");H(this,"index");H(this,"hash");H(this,"type");H(this,"to");H(this,"from");H(this,"nonce");H(this,"gasLimit");H(this,"gasPrice");H(this,"maxPriorityFeePerGas");H(this,"maxFeePerGas");H(this,"maxFeePerBlobGas");H(this,"data");H(this,"value");H(this,"chainId");H(this,"signature");H(this,"accessList");H(this,"blobVersionedHashes");V(this,io);this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,D(this,io,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:n,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:h,blobVersionedHashes:d}=this;return{_type:"TransactionResponse",accessList:h,blockNumber:e,blockHash:t,blobVersionedHashes:d,chainId:kt(this.chainId),data:l,from:a,gasLimit:kt(this.gasLimit),gasPrice:kt(this.gasPrice),hash:s,maxFeePerGas:kt(this.maxFeePerGas),maxPriorityFeePerGas:kt(this.maxPriorityFeePerGas),maxFeePerBlobGas:kt(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:n,type:i,value:kt(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const n=await this.getTransaction();n&&(e=n.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:n}=await Pr({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:n-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const n=e??1,s=t??0;let i=E(this,io),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:d,nonce:f}=await Pr({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=d;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<E(this,io)&&(o=E(this,io)));o<=d;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const y of g)if(y===this.hash)return;for(let y=0;y<g.length;y++){const C=await g.getTransaction(y);if(C.from===this.from&&C.nonce===this.nonce){if(a)return null;const w=await this.provider.getTransactionReceipt(C.hash);if(w==null||d-w.blockNumber+1<n)return;let I="replaced";C.data===this.data&&C.to===this.to&&C.value===this.value?I="repriced":C.data==="0x"&&C.from===C.to&&C.value===uS&&(I="cancelled"),W(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:I==="replaced"||I==="cancelled",reason:I,replacement:C.replaceableTransaction(i),hash:C.hash,receipt:w})}}o++}},l=d=>{if(d==null||d.status!==0)return d;W(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:d.to,from:d.from,data:""},receipt:d})},u=await this.provider.getTransactionReceipt(this.hash);if(n===0)return l(u);if(u){if(await u.confirmations()>=n)return l(u)}else if(await c(),n===0)return null;return await new Promise((d,f)=>{const p=[],g=()=>{p.forEach(C=>C())};if(p.push(()=>{a=!0}),s>0){const C=setTimeout(()=>{g(),f(Nt("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(C)})}const y=async C=>{if(await C.confirmations()>=n){g();try{d(l(C))}catch(w){f(w)}}};if(p.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),i>=0){const C=async()=>{try{await c()}catch(w){if(dr(w,"TRANSACTION_REPLACED")){g(),f(w);return}}a||this.provider.once("block",C)};p.push(()=>{this.provider.off("block",C)}),this.provider.once("block",C)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return W(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),fS(this)}reorderedEvent(e){return W(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),W(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),dS(this,e)}replaceableTransaction(e){F(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new R0(this,this.provider);return D(t,io,e),t}};io=new WeakMap;let ud=R0;function kq(r){return{orphan:"drop-block",hash:r.hash,number:r.number}}function dS(r,e){return{orphan:"reorder-transaction",tx:r,other:e}}function fS(r){return{orphan:"drop-transaction",tx:r}}function Dq(r){return{orphan:"drop-log",log:{transactionHash:r.transactionHash,blockHash:r.blockHash,blockNumber:r.blockNumber,address:r.address,data:r.data,topics:Object.freeze(r.topics.slice()),index:r.index}}}class _0 extends Wd{constructor(t,n,s){super(t,t.provider);H(this,"interface");H(this,"fragment");H(this,"args");const i=n.decodeEventLog(s,t.data,t.topics);Ae(this,{args:i,fragment:s,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class pS extends Wd{constructor(t,n){super(t,t.provider);H(this,"error");Ae(this,{error:n})}}var Sl;class Uq extends hS{constructor(t,n,s){super(s,n);V(this,Sl);D(this,Sl,t)}get logs(){return super.logs.map(t=>{const n=t.topics.length?E(this,Sl).getEvent(t.topics[0]):null;if(n)try{return new _0(t,E(this,Sl),n)}catch(s){return new pS(t,s)}return t})}}Sl=new WeakMap;var wd;class I0 extends ud{constructor(t,n,s){super(s,n);V(this,wd);D(this,wd,t)}async wait(t,n){const s=await super.wait(t,n);return s==null?null:new Uq(E(this,wd),this.provider,s)}}wd=new WeakMap;class gS extends FI{constructor(t,n,s,i){super(t,n,s);H(this,"log");Ae(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Lq extends gS{constructor(e,t,n,s,i){super(e,t,n,new _0(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);Ae(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const r1=BigInt(0);function mS(r){return r&&typeof r.call=="function"}function yS(r){return r&&typeof r.estimateGas=="function"}function _g(r){return r&&typeof r.resolveName=="function"}function wS(r){return r&&typeof r.sendTransaction=="function"}function bS(r){if(r!=null){if(_g(r))return r;if(r.provider)return r.provider}}var bd;class Bq{constructor(e,t,n){V(this,bd);H(this,"fragment");if(Ae(this,{fragment:t}),t.inputs.length<n.length)throw new Error("too many arguments");const s=Ja(e.runner,"resolveName"),i=_g(s)?s:null;D(this,bd,async function(){const o=await Promise.all(t.inputs.map((a,c)=>n[c]==null?null:a.walkAsync(n[c],(u,h)=>u==="address"?Array.isArray(h)?Promise.all(h.map(d=>Ur(d,i))):Ur(h,i):h)));return e.interface.encodeFilterTopics(t,o)}())}getTopicFilter(){return E(this,bd)}}bd=new WeakMap;function Ja(r,e){return r==null?null:typeof r[e]=="function"?r:r.provider&&typeof r.provider[e]=="function"?r.provider:null}function na(r){return r==null?null:r.provider||null}async function ES(r,e){const t=_r.dereference(r,"overrides");F(typeof t=="object","invalid overrides parameter","overrides",r);const n=Op(t);return F(n.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),F(n.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function Mq(r,e,t){const n=Ja(r,"resolveName"),s=_g(n)?n:null;return await Promise.all(e.map((i,o)=>i.walkAsync(t[o],(a,c)=>(c=_r.dereference(c,a),a==="address"?Ur(c,s):c))))}function $q(r){const e=async function(o){const a=await ES(o,["data"]);a.to=await r.getAddress(),a.from&&(a.from=await Ur(a.from,bS(r.runner)));const c=r.interface,l=me(a.value||r1,"overrides.value")===r1,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&F(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),F(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const h=c.receive||c.fallback&&c.fallback.payable;return F(h||l,"cannot send value to non-payable fallback","overrides.value",a.value),F(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},t=async function(o){const a=Ja(r.runner,"call");W(mS(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw a0(l)&&l.data?r.interface.makeError(l.data,c):l}},n=async function(o){const a=r.runner;W(wS(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=na(r.runner);return new I0(r.interface,l,c)},s=async function(o){const a=Ja(r.runner,"estimateGas");return W(yS(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await n(o);return Ae(i,{_contract:r,estimateGas:s,populateTransaction:e,send:n,staticCall:t}),i}function Fq(r,e){const t=function(...l){const u=r.interface.getFunction(e,l);return W(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},n=async function(...l){const u=t(...l);let h={};if(u.inputs.length+1===l.length&&(h=await ES(l.pop()),h.from&&(h.from=await Ur(h.from,bS(r.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const d=await Mq(r.runner,u.inputs,l);return Object.assign({},h,await Pr({to:r.getAddress(),data:r.interface.encodeFunctionData(u,d)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=r.runner;W(wS(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const h=await u.sendTransaction(await n(...l)),d=na(r.runner);return new I0(r.interface,d,h)},o=async function(...l){const u=Ja(r.runner,"estimateGas");return W(yS(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await n(...l))},a=async function(...l){const u=Ja(r.runner,"call");W(mS(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const h=await n(...l);let d="0x";try{d=await u.call(h)}catch(p){throw a0(p)&&p.data?r.interface.makeError(p.data,h):p}const f=t(...l);return r.interface.decodeFunctionResult(f,d)},c=async(...l)=>t(...l).constant?await s(...l):await i(...l);return Ae(c,{name:r.interface.getFunctionName(e),_contract:r,_key:e,getFragment:t,estimateGas:o,populateTransaction:n,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=r.interface.getFunction(e);return W(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function jq(r,e){const t=function(...s){const i=r.interface.getEvent(e,s);return W(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},n=function(...s){return new Bq(r,t(...s),s)};return Ae(n,{name:r.interface.getEventName(e),_contract:r,_key:e,getFragment:t}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=r.interface.getEvent(e);return W(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),n}const Pp=Symbol.for("_ethersInternal_contract"),vS=new WeakMap;function Hq(r,e){vS.set(r[Pp],e)}function dn(r){return vS.get(r[Pp])}function Vq(r){return r&&typeof r=="object"&&"getTopicFilter"in r&&typeof r.getTopicFilter=="function"&&r.fragment}async function N0(r,e){let t,n=null;if(Array.isArray(e)){const i=function(o){if(wt(o,32))return o;const a=r.interface.getEvent(o);return F(a,"unknown fragment","name",o),a.topicHash};t=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?t=[null]:typeof e=="string"?wt(e,32)?t=[e]:(n=r.interface.getEvent(e),F(n,"unknown fragment","event",e),t=[n.topicHash]):Vq(e)?t=await e.getTopicFilter():"fragment"in e?(n=e.fragment,t=[n.topicHash]):F(!1,"unknown event name","event",e);t=t.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=t.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:n,tag:s,topics:t}}async function Qu(r,e){const{subs:t}=dn(r);return t.get((await N0(r,e)).tag)||null}async function n1(r,e,t){const n=na(r.runner);W(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await N0(r,t),{addr:a,subs:c}=dn(r);let l=c.get(i);if(!l){const h={address:a||r,topics:o},d=y=>{let C=s;if(C==null)try{C=r.interface.getEvent(y.topics[0])}catch{}if(C){const w=C,I=s?r.interface.decodeEventLog(s,y.data,y.topics):[];mw(r,t,I,U=>new Lq(r,U,t,w,y))}else mw(r,t,[],w=>new gS(r,w,t,y))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(n.on(h,d))},stop:async()=>{if(f.length==0)return;let y=f;f=[],await Promise.all(y),n.off(h,d)}},c.set(i,l)}return l}let gw=Promise.resolve();async function qq(r,e,t,n){await gw;const s=await Qu(r,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(t);n&&c.push(n(a?null:o));try{o.call(r,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),dn(r).subs.delete(s.tag)),i>0}async function mw(r,e,t,n){try{await gw}catch{}const s=qq(r,e,t,n);return gw=s,await s}const Sf=["then"];var U1;U1=Pp;const hh=class hh{constructor(e,t,n,s){H(this,"target");H(this,"interface");H(this,"runner");H(this,"filters");H(this,U1);H(this,"fallback");F(typeof e=="string"||SN(e),"invalid value for Contract target","target",e),n==null&&(n=null);const i=pw.from(t);Ae(this,{target:e,runner:n,interface:i}),Object.defineProperty(this,Pp,{value:{}});let o,a=null,c=null;if(s){const h=na(n);c=new I0(this.interface,h,s)}let l=new Map;if(typeof e=="string")if(wt(e))a=e,o=Promise.resolve(e);else{const h=Ja(n,"resolveName");if(!_g(h))throw Nt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=h.resolveName(e).then(d=>{if(d==null)throw Nt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return dn(this).addr=d,d})}else o=e.getAddress().then(h=>{if(h==null)throw new Error("TODO");return dn(this).addr=h,h});Hq(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(h,d,f)=>{if(typeof d=="symbol"||Sf.indexOf(d)>=0)return Reflect.get(h,d,f);try{return this.getEvent(d)}catch(p){if(!dr(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(h,d)=>Sf.indexOf(d)>=0?Reflect.has(h,d):Reflect.has(h,d)||this.interface.hasEvent(String(d))});return Ae(this,{filters:u}),Ae(this,{fallback:i.receive||i.fallback?$q(this):null}),new Proxy(this,{get:(h,d,f)=>{if(typeof d=="symbol"||d in h||Sf.indexOf(d)>=0)return Reflect.get(h,d,f);try{return h.getFunction(d)}catch(p){if(!dr(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(h,d)=>typeof d=="symbol"||d in h||Sf.indexOf(d)>=0?Reflect.has(h,d):h.interface.hasFunction(d)})}connect(e){return new hh(this.target,this.interface,e)}attach(e){return new hh(e,this.interface,this.runner)}async getAddress(){return await dn(this).addrPromise}async getDeployedCode(){const e=na(this.runner);W(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=na(this.runner);return W(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);n.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return dn(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),Fq(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),jq(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,n){t==null&&(t=0),n==null&&(n="latest");const{addr:s,addrPromise:i}=dn(this),o=s||await i,{fragment:a,topics:c}=await N0(this,e),l={address:o,topics:c,fromBlock:t,toBlock:n},u=na(this.runner);return W(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(h=>{let d=a;if(d==null)try{d=this.interface.getEvent(h.topics[0])}catch{}if(d)try{return new _0(h,this.interface,d)}catch(f){return new pS(h,f)}return new Wd(h,u)})}async on(e,t){const n=await n1(this,"on",e);return n.listeners.push({listener:t,once:!1}),n.start(),this}async once(e,t){const n=await n1(this,"once",e);return n.listeners.push({listener:t,once:!0}),n.start(),this}async emit(e,...t){return await mw(this,e,t,null)}async listenerCount(e){if(e){const s=await Qu(this,e);return s?s.listeners.length:0}const{subs:t}=dn(this);let n=0;for(const{listeners:s}of t.values())n+=s.length;return n}async listeners(e){if(e){const s=await Qu(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:t}=dn(this);let n=[];for(const{listeners:s}of t.values())n=n.concat(s.map(({listener:i})=>i));return n}async off(e,t){const n=await Qu(this,e);if(!n)return this;if(t){const s=n.listeners.map(({listener:i})=>i).indexOf(t);s>=0&&n.listeners.splice(s,1)}return(t==null||n.listeners.length===0)&&(n.stop(),dn(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){const t=await Qu(this,e);if(!t)return this;t.stop(),dn(this).subs.delete(t.tag)}else{const{subs:t}=dn(this);for(const{tag:n,stop:s}of t.values())s(),t.delete(n)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends hh{constructor(s,i=null){super(s,e,i)}}return t}static from(e,t,n){return n==null&&(n=null),new this(e,t,n)}};let yw=hh;function zq(){return yw}class Xc extends zq(){}function Fm(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):F(!1,"unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}class Wq{constructor(e){H(this,"name");Ae(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const AS=new RegExp("^(ipfs)://(.*)$","i"),s1=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),AS,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var oo,ma,ao,Mc,jp,CS;const zc=class zc{constructor(e,t,n){V(this,ao);H(this,"provider");H(this,"address");H(this,"name");V(this,oo);V(this,ma);Ae(this,{provider:e,address:t,name:n}),D(this,oo,null),D(this,ma,new Xc(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return E(this,oo)==null&&D(this,oo,(async()=>{try{return await E(this,ma).supportsInterface("0x9061b923")}catch(e){if(dr(e,"CALL_EXCEPTION"))return!1;throw D(this,oo,null),e}})()),await E(this,oo)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await J(this,ao,Mc).call(this,"addr(bytes32)");return i==null||i===rd?null:i}catch(i){if(dr(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await J(this,ao,Mc).call(this,"addr(bytes32,uint)",[i]);if(wt(o,20))return ht(o)}let t=null;for(const i of this.provider.plugins)if(i instanceof Wq&&i.supportsCoinType(e)){t=i;break}if(t==null)return null;const n=await J(this,ao,Mc).call(this,"addr(bytes32,uint)",[e]);if(n==null||n==="0x")return null;const s=await t.decodeAddress(e,n);if(s!=null)return s;W(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:n}})}async getText(e){const t=await J(this,ao,Mc).call(this,"text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await J(this,ao,Mc).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const s=t[1]==="e3010170"?"ipfs":"ipns",i=parseInt(t[4],16);if(t[5].length===i*2)return`${s}://${e7("0x"+t[2])}`}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;W(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let n=0;n<s1.length;n++){const s=t.match(s1[n]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const o=Fm(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:t});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new Xc(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let h=await u[o](l);if(h==null||h==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:h}),i==="erc1155"&&(h=h.replace("{id}",Oo(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:h})),h.match(/^ipfs:/i)&&(h=Fm(h)),e.push({type:"metadata-url",value:h});let d={};const f=await new Qs(h).send();f.assertOk();try{d=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const C=f.body;return C&&e.push({type:"!metadata",value:fe(C)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!d)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(d)});let p=d.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(AS)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=Fm(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),n=t.getPlugin("org.ethers.plugins.network.Ens");return W(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),n.address}static async fromName(e,t){var s;let n=t;for(;;){if(n===""||n==="."||t!=="eth"&&n==="eth")return null;const i=await J(s=zc,jp,CS).call(s,e,n);if(i!=null){const o=new zc(e,i,t);return n!==t&&!await o.supportsWildcard()?null:o}n=n.split(".").slice(1).join(".")}}};oo=new WeakMap,ma=new WeakMap,ao=new WeakSet,Mc=async function(e,t){t=(t||[]).slice();const n=E(this,ma).interface;t.unshift(dw(this.name));let s=null;await this.supportsWildcard()&&(s=n.getFunction(e),W(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[zV(this.name,255),n.encodeFunctionData(s,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const i=await E(this,ma)[e](...t);return s?n.decodeFunctionResult(s,i)[0]:i}catch(i){if(!dr(i,"CALL_EXCEPTION"))throw i}return null},jp=new WeakSet,CS=async function(e,t){const n=await zc.getEnsAddress(e);try{const i=await new Xc(n,["function resolver(bytes32) view returns (address)"],e).resolver(dw(t),{enableCcipRead:!0});return i===rd?null:i}catch(s){throw s}return null},V(zc,jp);let xp=zc;const i1=BigInt(0);function Ge(r,e){return function(t){return t==null?e:r(t)}}function Ig(r,e){return t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(n=>r(n))}}function Gd(r,e){return t=>{const n={};for(const s in r){let i=s;if(e&&s in e&&!(i in t)){for(const o of e[s])if(o in t){i=o;break}}try{const o=r[s](t[i]);o!==void 0&&(n[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";W(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:t})}}return n}}function Gq(r){switch(r){case!0:case"true":return!0;case!1:case"false":return!1}F(!1,`invalid boolean; ${JSON.stringify(r)}`,"value",r)}function lu(r){return F(wt(r,!0),"invalid data","value",r),r}function hr(r){return F(wt(r,32),"invalid hash","value",r),r}const Kq=Gd({address:ht,blockHash:hr,blockNumber:Ue,data:lu,index:Ue,removed:Ge(Gq,!1),topics:Ig(hr),transactionHash:hr,transactionIndex:Ue},{index:["logIndex"]});function Jq(r){return Kq(r)}const Qq=Gd({hash:Ge(hr),parentHash:hr,parentBeaconBlockRoot:Ge(hr,null),number:Ue,timestamp:Ue,nonce:Ge(lu),difficulty:me,gasLimit:me,gasUsed:me,stateRoot:Ge(hr,null),receiptsRoot:Ge(hr,null),blobGasUsed:Ge(me,null),excessBlobGas:Ge(me,null),miner:Ge(ht),prevRandao:Ge(hr,null),extraData:lu,baseFeePerGas:Ge(me)},{prevRandao:["mixHash"]});function Yq(r){const e=Qq(r);return e.transactions=r.transactions.map(t=>typeof t=="string"?t:_S(t)),e}const Zq=Gd({transactionIndex:Ue,blockNumber:Ue,transactionHash:hr,address:ht,topics:Ig(hr),data:lu,index:Ue,blockHash:hr},{index:["logIndex"]});function Xq(r){return Zq(r)}const ez=Gd({to:Ge(ht,null),from:Ge(ht,null),contractAddress:Ge(ht,null),index:Ue,root:Ge(fe),gasUsed:me,blobGasUsed:Ge(me,null),logsBloom:Ge(lu),blockHash:hr,hash:hr,logs:Ig(Xq),blockNumber:Ue,cumulativeGasUsed:me,effectiveGasPrice:Ge(me),blobGasPrice:Ge(me,null),status:Ge(Ue),type:Ge(Ue,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function tz(r){return ez(r)}function _S(r){r.to&&me(r.to)===i1&&(r.to="0x0000000000000000000000000000000000000000");const e=Gd({hash:hr,index:Ge(Ue,void 0),type:t=>t==="0x"||t==null?0:Ue(t),accessList:Ge(ic,null),blobVersionedHashes:Ge(Ig(hr,!0),null),blockHash:Ge(hr,null),blockNumber:Ge(Ue,null),transactionIndex:Ge(Ue,null),from:ht,gasPrice:Ge(me),maxPriorityFeePerGas:Ge(me),maxFeePerGas:Ge(me),maxFeePerBlobGas:Ge(me,null),gasLimit:me,to:Ge(ht,null),value:me,nonce:Ue,data:lu,creates:Ge(ht,null),chainId:Ge(me,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(r);if(e.to==null&&e.creates==null&&(e.creates=KH(e)),(r.type===1||r.type===2)&&r.accessList==null&&(e.accessList=[]),r.signature?e.signature=ms.from(r.signature):e.signature=ms.from(r),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&me(e.blockHash)===i1&&(e.blockHash=null),e}const rz="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Kd{constructor(e){H(this,"name");Ae(this,{name:e})}clone(){return new Kd(this.name)}}class Ng extends Kd{constructor(t,n){t==null&&(t=0);super(`org.ethers.network.plugins.GasCost#${t||0}`);H(this,"effectiveBlock");H(this,"txBase");H(this,"txCreate");H(this,"txDataZero");H(this,"txDataNonzero");H(this,"txAccessListStorageKey");H(this,"txAccessListAddress");const s={effectiveBlock:t};function i(o,a){let c=(n||{})[o];c==null&&(c=a),F(typeof c=="number",`invalud value for ${o}`,"costs",n),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),Ae(this,s)}clone(){return new Ng(this.effectiveBlock,this)}}class Sg extends Kd{constructor(t,n){super("org.ethers.plugins.network.Ens");H(this,"address");H(this,"targetNetwork");Ae(this,{address:t||rz,targetNetwork:n??1})}clone(){return new Sg(this.address,this.targetNetwork)}}var Ed,vd;class nz extends Kd{constructor(t,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");V(this,Ed);V(this,vd);D(this,Ed,t),D(this,vd,n)}get url(){return E(this,Ed)}get processFunc(){return E(this,vd)}clone(){return this}}Ed=new WeakMap,vd=new WeakMap;const jm=new Map;var Tl,Ol,co;const Wc=class Wc{constructor(e,t){V(this,Tl);V(this,Ol);V(this,co);D(this,Tl,e),D(this,Ol,me(t)),D(this,co,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return E(this,Tl)}set name(e){D(this,Tl,e)}get chainId(){return E(this,Ol)}set chainId(e){D(this,Ol,me(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===me(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===me(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===me(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(E(this,co).values())}attachPlugin(e){if(E(this,co).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return E(this,co).set(e.name,e.clone()),this}getPlugin(e){return E(this,co).get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new Wc(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new Ng;let n=t.txBase;if(e.to==null&&(n+=t.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?n+=t.txDataZero:n+=t.txDataNonzero;if(e.accessList){const s=ic(e.accessList);for(const i in s)n+=t.txAccessListAddress+t.txAccessListStorageKey*s[i].storageKeys.length}return n}static from(e){if(sz(),e==null)return Wc.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=jm.get(e);if(t)return t();if(typeof e=="bigint")return new Wc("unknown",e);F(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){F(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new Wc(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new Sg(e.ensAddress,e.ensNetwork)),t}F(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const n=jm.get(e);n&&F(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",e),jm.set(e,t)}};Tl=new WeakMap,Ol=new WeakMap,co=new WeakMap;let ds=Wc;function o1(r,e){const t=String(r);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${r}`);const n=t.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${r}`);for(;n[1].length<e;)n[1]+="0";if(n[1].length>9){let s=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||s++,n[1]=s.toString()}return BigInt(n[0]+n[1])}function a1(r){return new nz(r,async(e,t,n)=>{n.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([n.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:o1(a.maxFee,9),maxPriorityFeePerGas:o1(a.maxPriorityFee,9)}}catch(i){W(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:s,error:i})}})}let c1=!1;function sz(){if(c1)return;c1=!0;function r(e,t,n){const s=function(){const i=new ds(e,t);return n.ensNetwork!=null&&i.attachPlugin(new Sg(null,n.ensNetwork)),i.attachPlugin(new Ng),(n.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};ds.register(e,s),ds.register(t,s),n.altNames&&n.altNames.forEach(i=>{ds.register(i,s)})}r("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),r("ropsten",3,{ensNetwork:3}),r("rinkeby",4,{ensNetwork:4}),r("goerli",5,{ensNetwork:5}),r("kovan",42,{ensNetwork:42}),r("sepolia",11155111,{ensNetwork:11155111}),r("holesky",17e3,{ensNetwork:17e3}),r("classic",61,{}),r("classicKotti",6,{}),r("arbitrum",42161,{ensNetwork:1}),r("arbitrum-goerli",421613,{}),r("arbitrum-sepolia",421614,{}),r("base",8453,{ensNetwork:1}),r("base-goerli",84531,{}),r("base-sepolia",84532,{}),r("bnb",56,{ensNetwork:1}),r("bnbt",97,{}),r("linea",59144,{ensNetwork:1}),r("linea-goerli",59140,{}),r("linea-sepolia",59141,{}),r("matic",137,{ensNetwork:1,plugins:[a1("https://gasstation.polygon.technology/v2")]}),r("matic-amoy",80002,{}),r("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[a1("https://gasstation-testnet.polygon.technology/v2")]}),r("optimism",10,{ensNetwork:1,plugins:[]}),r("optimism-goerli",420,{}),r("optimism-sepolia",11155420,{}),r("xdai",100,{ensNetwork:1})}function ww(r){return JSON.parse(JSON.stringify(r))}var bi,Bn,lo,Ds,Pl,Jf;class iz{constructor(e){V(this,Pl);V(this,bi);V(this,Bn);V(this,lo);V(this,Ds);D(this,bi,e),D(this,Bn,null),D(this,lo,4e3),D(this,Ds,-2)}get pollingInterval(){return E(this,lo)}set pollingInterval(e){D(this,lo,e)}start(){E(this,Bn)||(D(this,Bn,E(this,bi)._setTimeout(J(this,Pl,Jf).bind(this),E(this,lo))),J(this,Pl,Jf).call(this))}stop(){E(this,Bn)&&(E(this,bi)._clearTimeout(E(this,Bn)),D(this,Bn,null))}pause(e){this.stop(),e&&D(this,Ds,-2)}resume(){this.start()}}bi=new WeakMap,Bn=new WeakMap,lo=new WeakMap,Ds=new WeakMap,Pl=new WeakSet,Jf=async function(){try{const e=await E(this,bi).getBlockNumber();if(E(this,Ds)===-2){D(this,Ds,e);return}if(e!==E(this,Ds)){for(let t=E(this,Ds)+1;t<=e;t++){if(E(this,Bn)==null)return;await E(this,bi).emit("block",t)}D(this,Ds,e)}}catch{}E(this,Bn)!=null&&D(this,Bn,E(this,bi)._setTimeout(J(this,Pl,Jf).bind(this),E(this,lo)))};var ya,wa,uo;class S0{constructor(e){V(this,ya);V(this,wa);V(this,uo);D(this,ya,e),D(this,uo,!1),D(this,wa,t=>{this._poll(t,E(this,ya))})}async _poll(e,t){throw new Error("sub-classes must override this")}start(){E(this,uo)||(D(this,uo,!0),E(this,wa).call(this,-2),E(this,ya).on("block",E(this,wa)))}stop(){E(this,uo)&&(D(this,uo,!1),E(this,ya).off("block",E(this,wa)))}pause(e){this.stop()}resume(){this.start()}}ya=new WeakMap,wa=new WeakMap,uo=new WeakMap;var xl,Ei;class oz extends S0{constructor(t,n){super(t);V(this,xl);V(this,Ei);D(this,xl,n),D(this,Ei,-2)}pause(t){t&&D(this,Ei,-2),super.pause(t)}async _poll(t,n){const s=await n.getBlock(E(this,xl));s!=null&&(E(this,Ei)===-2?D(this,Ei,s.number):s.number>E(this,Ei)&&(n.emit(E(this,xl),s.number),D(this,Ei,s.number)))}}xl=new WeakMap,Ei=new WeakMap;var Hp;class az extends S0{constructor(t,n){super(t);V(this,Hp);D(this,Hp,ww(n))}async _poll(t,n){throw new Error("@TODO")}}Hp=new WeakMap;var Rl;class cz extends S0{constructor(t,n){super(t);V(this,Rl);D(this,Rl,n)}async _poll(t,n){const s=await n.getTransactionReceipt(E(this,Rl));s&&n.emit(E(this,Rl),s)}}Rl=new WeakMap;var vi,kl,Dl,ho,Mn,Vp,IS;class T0{constructor(e,t){V(this,Vp);V(this,vi);V(this,kl);V(this,Dl);V(this,ho);V(this,Mn);D(this,vi,e),D(this,kl,ww(t)),D(this,Dl,J(this,Vp,IS).bind(this)),D(this,ho,!1),D(this,Mn,-2)}start(){E(this,ho)||(D(this,ho,!0),E(this,Mn)===-2&&E(this,vi).getBlockNumber().then(e=>{D(this,Mn,e)}),E(this,vi).on("block",E(this,Dl)))}stop(){E(this,ho)&&(D(this,ho,!1),E(this,vi).off("block",E(this,Dl)))}pause(e){this.stop(),e&&D(this,Mn,-2)}resume(){this.start()}}vi=new WeakMap,kl=new WeakMap,Dl=new WeakMap,ho=new WeakMap,Mn=new WeakMap,Vp=new WeakSet,IS=async function(e){if(E(this,Mn)===-2)return;const t=ww(E(this,kl));t.fromBlock=E(this,Mn)+1,t.toBlock=e;const n=await E(this,vi).getLogs(t);if(n.length===0){E(this,Mn)<e-60&&D(this,Mn,e-60);return}for(const s of n)E(this,vi).emit(E(this,kl),s),D(this,Mn,s.blockNumber)};const lz=BigInt(2),uz=10;function Tf(r){return r&&typeof r.then=="function"}function Qf(r,e){return r+":"+JSON.stringify(e,(t,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n);return s.sort(),s.reduce((i,o)=>(i[o]=n[o],i),{})}return n})}class Rp{constructor(e){H(this,"name");Ae(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function hz(r){return JSON.parse(JSON.stringify(r))}function bw(r){return r=Array.from(new Set(r).values()),r.sort(),r}async function Hm(r,e){if(r==null)throw new Error("invalid event");if(Array.isArray(r)&&(r={topics:r}),typeof r=="string")switch(r){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:r,tag:r}}if(wt(r,32)){const t=r.toLowerCase();return{type:"transaction",tag:Qf("tx",{hash:t}),hash:t}}if(r.orphan){const t=r;return{type:"orphan",tag:Qf("orphan",t),filter:hz(t)}}if(r.address||r.topics){const t=r,n={topics:(t.topics||[]).map(s=>s==null?null:Array.isArray(s)?bw(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(t.address){const s=[],i=[],o=a=>{wt(a)?s.push(a):i.push((async()=>{s.push(await Ur(a,e))})())};Array.isArray(t.address)?t.address.forEach(o):o(t.address),i.length&&await Promise.all(i),n.address=bw(s.map(a=>a.toLowerCase()))}return{filter:n,tag:Qf("event",n),type:"event"}}F(!1,"unknown ProviderEvent","event",r)}function Vm(){return new Date().getTime()}const dz={cacheTimeout:250,pollingInterval:4e3};var Er,fo,vr,Ul,mn,ba,po,Ai,Ad,$n,Ll,Bl,He,un,Ew,vw,Yu,Aw,Zu,Yf;class fz{constructor(e,t){V(this,He);V(this,Er);V(this,fo);V(this,vr);V(this,Ul);V(this,mn);V(this,ba);V(this,po);V(this,Ai);V(this,Ad);V(this,$n);V(this,Ll);V(this,Bl);if(D(this,Bl,Object.assign({},dz,t||{})),e==="any")D(this,ba,!0),D(this,mn,null);else if(e){const n=ds.from(e);D(this,ba,!1),D(this,mn,Promise.resolve(n)),setTimeout(()=>{this.emit("network",n,null)},0)}else D(this,ba,!1),D(this,mn,null);D(this,Ai,-1),D(this,po,new Map),D(this,Er,new Map),D(this,fo,new Map),D(this,vr,null),D(this,Ul,!1),D(this,Ad,1),D(this,$n,new Map),D(this,Ll,!1)}get pollingInterval(){return E(this,Bl).pollingInterval}get provider(){return this}get plugins(){return Array.from(E(this,fo).values())}attachPlugin(e){if(E(this,fo).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return E(this,fo).set(e.name,e.connect(this)),this}getPlugin(e){return E(this,fo).get(e)||null}get disableCcipRead(){return E(this,Ll)}set disableCcipRead(e){D(this,Ll,!!e)}async ccipReadFetch(e,t,n){if(this.disableCcipRead||n.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=t.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],l=c.replace("{sender}",s).replace("{data}",i),u=new Qs(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:n});let h="unknown error",d;try{d=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=d.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(h=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}W(d.statusCode<400||d.statusCode>=500,`response not found during CCIP fetch: ${h}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:h}}),o.push(h)}W(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:o}})}_wrapBlock(e,t){return new Rq(Yq(e),this)}_wrapLog(e,t){return new Wd(Jq(e),this)}_wrapTransactionReceipt(e,t){return new hS(tz(e),this)}_wrapTransactionResponse(e,t){return new ud(_S(e),this)}_detectNetwork(){W(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){W(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Ue(await J(this,He,un).call(this,{method:"getBlockNumber"}),"%response");return E(this,Ai)>=0&&D(this,Ai,e),e}_getAddress(e){return Ur(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(wt(e))return wt(e,32)?e:Hc(e);if(typeof e=="bigint"&&(e=Ue(e,"blockTag")),typeof e=="number")return e>=0?Hc(e):E(this,Ai)>=0?Hc(E(this,Ai)+e):this.getBlockNumber().then(t=>Hc(t+e));F(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?bw(c.map(l=>l.toLowerCase())):c.toLowerCase()),n="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let h;switch(c.length){case 0:break;case 1:h=c[0];break;default:c.sort(),h=c}if(n&&(l!=null||u!=null))throw new Error("invalid filter");const d={};return h&&(d.address=h),t.length&&(d.topics=t),l&&(d.fromBlock=l),u&&(d.toBlock=u),n&&(d.blockHash=n),d};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const t=Op(e),n=[];if(["to","from"].forEach(s=>{if(t[s]==null)return;const i=Ur(t[s],this);Tf(i)?n.push(async function(){t[s]=await i}()):t[s]=i}),t.blockTag!=null){const s=this._getBlockTag(t.blockTag);Tf(s)?n.push(async function(){t.blockTag=await s}()):t.blockTag=s}return n.length?async function(){return await Promise.all(n),t}():t}async getNetwork(){if(E(this,mn)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw E(this,mn)===s&&D(this,mn,null),i}})();return D(this,mn,s),(await s).clone()}const e=E(this,mn),[t,n]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==n.chainId&&(E(this,ba)?(this.emit("network",n,t),E(this,mn)===e&&D(this,mn,Promise.resolve(n))):W(!1,`network changed: ${t.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await Pr({_block:J(this,He,Aw).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await J(this,He,un).call(this,{method:"getGasPrice"});return me(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await J(this,He,un).call(this,{method:"getPriorityFee"});return me(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*lz+c),new t1(i,a,c)},n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const s=new Qs(n.url),i=await n.processFunc(t,this,s);return new t1(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return Tf(t)&&(t=await t),me(await J(this,He,un).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:n}=await Pr({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await J(this,He,vw).call(this,J(this,He,Ew).call(this,t,n,e.enableCcipRead?0:-1))}async getBalance(e,t){return me(await J(this,He,Yu).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return Ue(await J(this,He,Yu).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return fe(await J(this,He,Yu).call(this,{method:"getCode"},e,t))}async getStorage(e,t,n){const s=me(t,"position");return fe(await J(this,He,Yu).call(this,{method:"getStorage",position:s},e,n))}async broadcastTransaction(e){const{blockNumber:t,hash:n,network:s}=await Pr({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=Sp.from(e);if(i.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(t)}async getBlock(e,t){const{network:n,params:s}=await Pr({network:this.getNetwork(),params:J(this,He,Aw).call(this,e,!!t)});return s==null?null:this._wrapBlock(s,n)}async getTransaction(e){const{network:t,params:n}=await Pr({network:this.getNetwork(),params:J(this,He,un).call(this,{method:"getTransaction",hash:e})});return n==null?null:this._wrapTransactionResponse(n,t)}async getTransactionReceipt(e){const{network:t,params:n}=await Pr({network:this.getNetwork(),params:J(this,He,un).call(this,{method:"getTransactionReceipt",hash:e})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const s=await J(this,He,un).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(n,t)}async getTransactionResult(e){const{result:t}=await Pr({network:this.getNetwork(),result:J(this,He,un).call(this,{method:"getTransactionResult",hash:e})});return t==null?null:fe(t)}async getLogs(e){let t=this._getFilter(e);Tf(t)&&(t=await t);const{network:n,params:s}=await Pr({network:this.getNetwork(),params:J(this,He,un).call(this,{method:"getLogs",filter:t})});return s.map(i=>this._wrapLog(i,n))}_getProvider(e){W(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await xp.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=ht(e);const t=dw(e.substring(2).toLowerCase()+".addr.reverse");try{const n=await xp.getEnsAddress(this),i=await new Xc(n,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(i==null||i===rd)return null;const a=await new Xc(i,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(a)!==e?null:a}catch(n){if(dr(n,"BAD_DATA")&&n.value==="0x"||dr(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(e,t,n){const s=t??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};n!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(Nt("timeout","TIMEOUT",{reason:"timeout"})))},n)),c(await this.getBlockNumber())})}async waitForBlock(e){W(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=E(this,$n).get(e);t&&(t.timer&&clearTimeout(t.timer),E(this,$n).delete(e))}_setTimeout(e,t){t==null&&(t=0);const n=Eu(this,Ad)._++,s=()=>{E(this,$n).delete(n),e()};if(this.paused)E(this,$n).set(n,{timer:null,func:s,time:t});else{const i=setTimeout(s,t);E(this,$n).set(n,{timer:i,func:s,time:Vm()})}return n}_forEachSubscriber(e){for(const t of E(this,Er).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Rp(e.type);case"block":{const t=new iz(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new oz(this,e.type);case"event":return new T0(this,e.filter);case"transaction":return new cz(this,e.hash);case"orphan":return new az(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const n of E(this,Er).values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=t,n.started&&t.start(),E(this,vr)!=null&&t.pause(E(this,vr));break}}async on(e,t){const n=await J(this,He,Yf).call(this,e);return n.listeners.push({listener:t,once:!1}),n.started||(n.subscriber.start(),n.started=!0,E(this,vr)!=null&&n.subscriber.pause(E(this,vr))),this}async once(e,t){const n=await J(this,He,Yf).call(this,e);return n.listeners.push({listener:t,once:!0}),n.started||(n.subscriber.start(),n.started=!0,E(this,vr)!=null&&n.subscriber.pause(E(this,vr))),this}async emit(e,...t){const n=await J(this,He,Zu).call(this,e,t);if(!n||n.listeners.length===0)return!1;const s=n.listeners.length;return n.listeners=n.listeners.filter(({listener:i,once:o})=>{const a=new FI(this,o?null:i,e);try{i.call(this,...t,a)}catch{}return!o}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),E(this,Er).delete(n.tag)),s>0}async listenerCount(e){if(e){const n=await J(this,He,Zu).call(this,e);return n?n.listeners.length:0}let t=0;for(const{listeners:n}of E(this,Er).values())t+=n.length;return t}async listeners(e){if(e){const n=await J(this,He,Zu).call(this,e);return n?n.listeners.map(({listener:s})=>s):[]}let t=[];for(const{listeners:n}of E(this,Er).values())t=t.concat(n.map(({listener:s})=>s));return t}async off(e,t){const n=await J(this,He,Zu).call(this,e);if(!n)return this;if(t){const s=n.listeners.map(({listener:i})=>i).indexOf(t);s>=0&&n.listeners.splice(s,1)}return(!t||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),E(this,Er).delete(n.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:n,subscriber:s}=await J(this,He,Yf).call(this,e);n&&s.stop(),E(this,Er).delete(t)}else for(const[t,{started:n,subscriber:s}]of E(this,Er))n&&s.stop(),E(this,Er).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return E(this,Ul)}destroy(){this.removeAllListeners();for(const e of E(this,$n).keys())this._clearTimeout(e);D(this,Ul,!0)}get paused(){return E(this,vr)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(D(this,Ai,-1),E(this,vr)!=null){if(E(this,vr)==!!e)return;W(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),D(this,vr,!!e);for(const t of E(this,$n).values())t.timer&&clearTimeout(t.timer),t.time=Vm()-t.time}resume(){if(E(this,vr)!=null){this._forEachSubscriber(e=>e.resume()),D(this,vr,null);for(const e of E(this,$n).values()){let t=e.time;t<0&&(t=0),e.time=Vm(),setTimeout(e.func,t)}}}}Er=new WeakMap,fo=new WeakMap,vr=new WeakMap,Ul=new WeakMap,mn=new WeakMap,ba=new WeakMap,po=new WeakMap,Ai=new WeakMap,Ad=new WeakMap,$n=new WeakMap,Ll=new WeakMap,Bl=new WeakMap,He=new WeakSet,un=async function(e){const t=E(this,Bl).cacheTimeout;if(t<0)return await this._perform(e);const n=Qf(e.method,e);let s=E(this,po).get(n);return s||(s=this._perform(e),E(this,po).set(n,s),setTimeout(()=>{E(this,po).get(n)===s&&E(this,po).delete(n)},t)),await s},Ew=async function(e,t,n){W(n<uz,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const s=Op(e);try{return fe(await this._perform({method:"call",transaction:s,blockTag:t}))}catch(i){if(!this.disableCcipRead&&a0(i)&&i.data&&n>=0&&t==="latest"&&s.to!=null&&Rt(i.data,0,4)==="0x556f1830"){const o=i.data,a=await Ur(s.to,this);let c;try{c=wz(Rt(i.data,4))}catch(h){W(!1,h.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}W(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);W(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:$t([c.selector,yz([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const h=await J(this,He,Ew).call(this,u,t,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:h}),h}catch(h){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:h}),h}}throw i}},vw=async function(e){const{value:t}=await Pr({network:this.getNetwork(),value:e});return t},Yu=async function(e,t,n){let s=this._getAddress(t),i=this._getBlockTag(n);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await J(this,He,vw).call(this,J(this,He,un).call(this,Object.assign(e,{address:s,blockTag:i})))},Aw=async function(e,t){if(wt(e,32))return await J(this,He,un).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let n=this._getBlockTag(e);return typeof n!="string"&&(n=await n),await J(this,He,un).call(this,{method:"getBlock",blockTag:n,includeTransactions:t})},Zu=async function(e,t){let n=await Hm(e,this);return n.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(n=await Hm({orphan:"drop-log",log:t[0]},this)),E(this,Er).get(n.tag)||null},Yf=async function(e){const t=await Hm(e,this),n=t.tag;let s=E(this,Er).get(n);return s||(s={subscriber:this._getSubscriber(t),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},E(this,Er).set(n,s)),s};function pz(r,e){try{const t=Cw(r,e);if(t)return bp(t)}catch{}return null}function Cw(r,e){if(r==="0x")return null;try{const t=Ue(Rt(r,e,e+32)),n=Ue(Rt(r,t,t+32));return Rt(r,t+32,t+32+n)}catch{}return null}function l1(r){const e=kr(r);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function gz(r){if(r.length%32===0)return r;const e=new Uint8Array(Math.ceil(r.length/32)*32);return e.set(r),e}const mz=new Uint8Array([]);function yz(r){const e=[];let t=0;for(let n=0;n<r.length;n++)e.push(mz),t+=32;for(let n=0;n<r.length;n++){const s=Ke(r[n]);e[n]=l1(t),e.push(l1(s.length)),e.push(gz(s)),t+=32+Math.ceil(s.length/32)*32}return $t(e)}const u1="0x0000000000000000000000000000000000000000000000000000000000000000";function wz(r){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};W(Jc(r)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=Rt(r,0,32);W(Rt(t,0,12)===Rt(u1,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Rt(t,12);try{const n=[],s=Ue(Rt(r,32,64)),i=Ue(Rt(r,s,s+32)),o=Rt(r,s+32);for(let a=0;a<i;a++){const c=pz(o,a*32);if(c==null)throw new Error("abort");n.push(c)}e.urls=n}catch{W(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=Cw(r,64);if(n==null)throw new Error("abort");e.calldata=n}catch{W(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}W(Rt(r,100,128)===Rt(u1,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Rt(r,96,100);try{const n=Cw(r,128);if(n==null)throw new Error("abort");e.extraData=n}catch{W(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>e[n]),e}function Sc(r,e){if(r.provider)return r.provider;W(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function h1(r,e){let t=Op(e);if(t.to!=null&&(t.to=Ur(t.to,r)),t.from!=null){const n=t.from;t.from=Promise.all([r.getAddress(),Ur(n,r)]).then(([s,i])=>(F(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else t.from=r.getAddress();return await Pr(t)}class bz{constructor(e){H(this,"provider");Ae(this,{provider:e||null})}async getNonce(e){return Sc(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await h1(this,e)}async populateTransaction(e){const t=Sc(this,"populateTransaction"),n=await h1(this,e);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const s=await this.provider.getNetwork();if(n.chainId!=null){const o=me(n.chainId);F(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else n.chainId=s.chainId;const i=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||i)?F(!1,"eip-1559 transaction do not support gasPrice","tx",e):(n.type===0||n.type===1)&&i&&F(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const o=await t.getFeeData();W(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice)}else{const o=await t.getFeeData();if(n.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(n.type=2,n.gasPrice!=null){const a=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=a,n.maxPriorityFeePerGas=a}else n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(W(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice),n.type=0):W(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(n.type===2||n.type===3)&&(n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await Pr(n)}async estimateGas(e){return Sc(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Sc(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Sc(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=Sc(this,"sendTransaction"),n=await this.populateTransaction(e);delete n.from;const s=Sp.from(n);return await t.broadcastTransaction(await this.signTransaction(s))}}const d1=new Set;function Ez(r){d1.has(r)||(d1.add(r),console.log("========= NOTICE ========="),console.log(`Request-Rate Exceeded for ${r} (this message will not be repeated)`),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.org/api-keys/"),console.log("=========================="))}function vz(r){return JSON.parse(JSON.stringify(r))}var Or,Us,Ea,go,va,Ml,Po,_w,Iw;class NS{constructor(e){V(this,Po);V(this,Or);V(this,Us);V(this,Ea);V(this,go);V(this,va);V(this,Ml);D(this,Or,e),D(this,Us,null),D(this,Ea,J(this,Po,_w).bind(this)),D(this,go,!1),D(this,va,null),D(this,Ml,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){E(this,go)||(D(this,go,!0),J(this,Po,_w).call(this,-2))}stop(){E(this,go)&&(D(this,go,!1),D(this,Ml,!0),J(this,Po,Iw).call(this),E(this,Or).off("block",E(this,Ea)))}pause(e){e&&J(this,Po,Iw).call(this),E(this,Or).off("block",E(this,Ea))}resume(){this.start()}}Or=new WeakMap,Us=new WeakMap,Ea=new WeakMap,go=new WeakMap,va=new WeakMap,Ml=new WeakMap,Po=new WeakSet,_w=async function(e){try{E(this,Us)==null&&D(this,Us,this._subscribe(E(this,Or)));let t=null;try{t=await E(this,Us)}catch(i){if(!dr(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(t==null){D(this,Us,null),E(this,Or)._recoverSubscriber(this,this._recover(E(this,Or)));return}const n=await E(this,Or).getNetwork();if(E(this,va)||D(this,va,n),E(this,va).chainId!==n.chainId)throw new Error("chaid changed");if(E(this,Ml))return;const s=await E(this,Or).send("eth_getFilterChanges",[t]);await this._emitResults(E(this,Or),s)}catch(t){console.log("@TODO",t)}E(this,Or).once("block",E(this,Ea))},Iw=function(){const e=E(this,Us);e&&(D(this,Us,null),e.then(t=>{E(this,Or).destroyed||E(this,Or).send("eth_uninstallFilter",[t])}))};var Aa;class Az extends NS{constructor(t,n){super(t);V(this,Aa);D(this,Aa,vz(n))}_recover(t){return new T0(t,E(this,Aa))}async _subscribe(t){return await t.send("eth_newFilter",[E(this,Aa)])}async _emitResults(t,n){for(const s of n)t.emit(E(this,Aa),t._wrapLog(s,t._network))}}Aa=new WeakMap;class Cz extends NS{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const n of t)e.emit("pending",n)}}const _z="bigint,boolean,function,number,string,symbol".split(/,/g);function Zf(r){if(r==null||_z.indexOf(typeof r)>=0||typeof r.getAddress=="function")return r;if(Array.isArray(r))return r.map(Zf);if(typeof r=="object")return Object.keys(r).reduce((e,t)=>(e[t]=r[t],e),{});throw new Error(`should not happen: ${r} (${typeof r})`)}function Iz(r){return new Promise(e=>{setTimeout(e,r)})}function Tc(r){return r&&r.toLowerCase()}function f1(r){return r&&typeof r.pollingInterval=="number"}const SS={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class el extends bz{constructor(t,n){super(t);H(this,"address");n=ht(n),Ae(this,{address:n})}connect(t){W(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const n=Zf(t),s=[];if(n.from){const o=n.from;s.push((async()=>{const a=await Ur(o,this.provider);F(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),n.from=a})())}else n.from=this.address;if(n.gasLimit==null&&s.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const o=n.to;s.push((async()=>{n.to=await Ur(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(t){const n=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(t);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(n));return}}catch(u){if(dr(u,"CANCELLED")||dr(u,"BAD_DATA")||dr(u,"NETWORK_ERROR")||dr(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(dr(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",Nt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(t){const n=Zf(t);if(n.from){const i=await Ur(n.from,this.provider);F(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),n.from=i}else n.from=this.address;const s=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[s])}async signMessage(t){const n=typeof t=="string"?zs(t):t;return await this.provider.send("personal_sign",[fe(n),this.address.toLowerCase()])}async signTypedData(t,n,s){const i=Zf(s),o=await Tp.resolveNames(t,n,i,async a=>{const c=await Ur(a);return F(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Tp.getPayload(o.domain,n,o.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const n=typeof t=="string"?zs(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),fe(n)])}}var Ca,$l,Ci,Ls,os,Fn,Kr,Cd,Nw;class TS extends fz{constructor(t,n){super(t,n);V(this,Cd);V(this,Ca);V(this,$l);V(this,Ci);V(this,Ls);V(this,os);V(this,Fn);V(this,Kr);D(this,$l,1),D(this,Ca,Object.assign({},SS,n||{})),D(this,Ci,[]),D(this,Ls,null),D(this,Fn,null),D(this,Kr,null);{let i=null;const o=new Promise(a=>{i=a});D(this,os,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(F(!s||t!=="any","staticNetwork cannot be used on special network 'any'","options",n),s&&t!=null&&D(this,Fn,ds.from(t))):s&&(F(t==null||s.matches(t),"staticNetwork MUST match network object","options",n),D(this,Fn,s))}_getOption(t){return E(this,Ca)[t]}get _network(){return W(E(this,Fn),"network is not available yet","NETWORK_ERROR"),E(this,Fn)}async _perform(t){if(t.method==="call"||t.method==="estimateGas"){let s=t.transaction;if(s&&s.type!=null&&me(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(t=Object.assign({},t,{transaction:Object.assign({},s,{type:void 0})}))}}const n=this.getRpcRequest(t);return n!=null?await this.send(n.method,n.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t)if(t===!0){if(E(this,Fn))return E(this,Fn)}else return t;return E(this,Kr)?await E(this,Kr):this.ready?(D(this,Kr,(async()=>{try{const n=ds.from(me(await this.send("eth_chainId",[])));return D(this,Kr,null),n}catch(n){throw D(this,Kr,null),n}})()),await E(this,Kr)):(D(this,Kr,(async()=>{const n={id:Eu(this,$l)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let s;try{s=(await this._send(n))[0],D(this,Kr,null)}catch(i){throw D(this,Kr,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return ds.from(me(s.result));throw this.getRpcError(n,s)})()),await E(this,Kr))}_start(){E(this,os)==null||E(this,os).resolve==null||(E(this,os).resolve(),D(this,os,null),(async()=>{for(;E(this,Fn)==null&&!this.destroyed;)try{D(this,Fn,await this._detectNetwork())}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Nt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await Iz(1e3)}J(this,Cd,Nw).call(this)})())}async _waitUntilReady(){if(E(this,os)!=null)return await E(this,os).promise}_getSubscriber(t){return t.type==="pending"?new Cz(this):t.type==="event"?this._getOption("polling")?new T0(this,t.filter):new Az(this,t.filter):t.type==="orphan"&&t.filter.orphan==="drop-log"?new Rp("orphan"):super._getSubscriber(t)}get ready(){return E(this,os)==null}getRpcTransaction(t){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(t[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),n[i]=Hc(me(t[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{t[s]!=null&&(n[s]=fe(t[s]))}),t.accessList&&(n.accessList=ic(t.accessList)),t.blobVersionedHashes&&(n.blobVersionedHashes=t.blobVersionedHashes.map(s=>s.toLowerCase())),n}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Tc(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Tc(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[Tc(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Tc(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&t.filter.address!=null&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(Tc):t.filter.address=Tc(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,n){const{method:s}=t,{error:i}=n;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return Nt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=Sw(i),l=ld.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",t.params[0],c?c.data:null);return l.info={error:i,payload:t},l}const o=JSON.stringify(Nz(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return Nt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:t,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=t.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Nt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return Nt("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Nt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return Nt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?Nt("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:i,payload:t}}):Nt("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:t})}send(t,n){if(this.destroyed)return Promise.reject(Nt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const s=Eu(this,$l)._++,i=new Promise((o,a)=>{E(this,Ci).push({resolve:o,reject:a,payload:{method:t,params:n,id:s,jsonrpc:"2.0"}})});return J(this,Cd,Nw).call(this),i}async getSigner(t){t==null&&(t=0);const n=this.send("eth_accounts",[]);if(typeof t=="number"){const i=await n;if(t>=i.length)throw new Error("no such account");return new el(this,i[t])}const{accounts:s}=await Pr({network:this.getNetwork(),accounts:n});t=ht(t);for(const i of s)if(ht(i)===t)return new el(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new el(this,n))}destroy(){E(this,Ls)&&(clearTimeout(E(this,Ls)),D(this,Ls,null));for(const{payload:t,reject:n}of E(this,Ci))n(Nt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));D(this,Ci,[]),super.destroy()}}Ca=new WeakMap,$l=new WeakMap,Ci=new WeakMap,Ls=new WeakMap,os=new WeakMap,Fn=new WeakMap,Kr=new WeakMap,Cd=new WeakSet,Nw=function(){if(E(this,Ls))return;const t=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");D(this,Ls,setTimeout(()=>{D(this,Ls,null);const n=E(this,Ci);for(D(this,Ci,[]);n.length;){const s=[n.shift()];for(;n.length&&s.length!==E(this,Ca).batchMaxCount;)if(s.push(n.shift()),JSON.stringify(s.map(o=>o.payload)).length>E(this,Ca).batchMaxSize){n.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(Nt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(h=>h.id===l.id)[0];if(u==null){const h=Nt("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",h),c(h);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},t))};var mo;class OS extends TS{constructor(t,n){super(t,n);V(this,mo);let s=this._getOption("pollingInterval");s==null&&(s=SS.pollingInterval),D(this,mo,s)}_getSubscriber(t){const n=super._getSubscriber(t);return f1(n)&&(n.pollingInterval=E(this,mo)),n}get pollingInterval(){return E(this,mo)}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");D(this,mo,t),this._forEachSubscriber(n=>{f1(n)&&(n.pollingInterval=E(this,mo))})}}mo=new WeakMap;var Fl;class PS extends OS{constructor(t,n,s){t==null&&(t="http://localhost:8545");super(n,s);V(this,Fl);typeof t=="string"?D(this,Fl,new Qs(t)):D(this,Fl,t.clone())}_getConnection(){return E(this,Fl).clone()}async send(t,n){return await this._start(),await super.send(t,n)}async _send(t){const n=this._getConnection();n.body=JSON.stringify(t),n.setHeader("content-type","application/json");const s=await n.send();s.assertOk();let i=s.bodyJson;return Array.isArray(i)||(i=[i]),i}}Fl=new WeakMap;function Sw(r){if(r==null)return null;if(typeof r.message=="string"&&r.message.match(/revert/i)&&wt(r.data))return{message:r.message,data:r.data};if(typeof r=="object"){for(const e in r){const t=Sw(r[e]);if(t)return t}return null}if(typeof r=="string")try{return Sw(JSON.parse(r))}catch{}return null}function Tw(r,e){if(r!=null){if(typeof r.message=="string"&&e.push(r.message),typeof r=="object")for(const t in r)Tw(r[t],e);if(typeof r=="string")try{return Tw(JSON.parse(r),e)}catch{}}}function Nz(r){const e=[];return Tw(r,e),e}function Sz(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof Ee<"u")return Ee;throw new Error("unable to locate global object")}const Tz=Sz().WebSocket;var Bs,_d,yo,_a,wo;class O0{constructor(e,t){V(this,Bs);V(this,_d);V(this,yo);V(this,_a);V(this,wo);D(this,Bs,e),D(this,_d,JSON.stringify(t)),D(this,yo,null),D(this,_a,null),D(this,wo,null)}get filter(){return JSON.parse(E(this,_d))}start(){D(this,yo,E(this,Bs).send("eth_subscribe",this.filter).then(e=>(E(this,Bs)._register(e,this),e)))}stop(){E(this,yo).then(e=>{E(this,Bs).destroyed||E(this,Bs).send("eth_unsubscribe",[e])}),D(this,yo,null)}pause(e){W(e,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"}),D(this,_a,!!e)}resume(){D(this,_a,null)}_handleMessage(e){if(E(this,yo)!=null&&E(this,_a)===null){let t=E(this,wo);t==null?t=this._emit(E(this,Bs),e):t=t.then(async()=>{await this._emit(E(this,Bs),e)}),D(this,wo,t.then(()=>{E(this,wo)===t&&D(this,wo,null)}))}}async _emit(e,t){throw new Error("sub-classes must implemente this; _emit")}}Bs=new WeakMap,_d=new WeakMap,yo=new WeakMap,_a=new WeakMap,wo=new WeakMap;class Oz extends O0{constructor(e){super(e,["newHeads"])}async _emit(e,t){e.emit("block",parseInt(t.number))}}class Pz extends O0{constructor(e){super(e,["newPendingTransactions"])}async _emit(e,t){e.emit("pending",t)}}var Id;class xz extends O0{constructor(t,n){super(t,["logs",n]);V(this,Id);D(this,Id,JSON.stringify(n))}get logFilter(){return JSON.parse(E(this,Id))}async _emit(t,n){t.emit(this.logFilter,t._wrapLog(n,t._network))}}Id=new WeakMap;var Ia,jl,bo;class Rz extends TS{constructor(t,n){const s=Object.assign({},n??{});F(s.batchMaxCount==null||s.batchMaxCount===1,"sockets-based providers do not support batches","options.batchMaxCount",n),s.batchMaxCount=1,s.staticNetwork==null&&(s.staticNetwork=!0);super(t,s);V(this,Ia);V(this,jl);V(this,bo);D(this,Ia,new Map),D(this,jl,new Map),D(this,bo,new Map)}_getSubscriber(t){switch(t.type){case"close":return new Rp("close");case"block":return new Oz(this);case"pending":return new Pz(this);case"event":return new xz(this,t.filter);case"orphan":if(t.filter.orphan==="drop-log")return new Rp("drop-log")}return super._getSubscriber(t)}_register(t,n){E(this,jl).set(t,n);const s=E(this,bo).get(t);if(s){for(const i of s)n._handleMessage(i);E(this,bo).delete(t)}}async _send(t){F(!Array.isArray(t),"WebSocket does not support batch send","payload",t);const n=new Promise((s,i)=>{E(this,Ia).set(t.id,{payload:t,resolve:s,reject:i})});return await this._waitUntilReady(),await this._write(JSON.stringify(t)),[await n]}async _processMessage(t){const n=JSON.parse(t);if(n&&typeof n=="object"&&"id"in n){const s=E(this,Ia).get(n.id);if(s==null){this.emit("error",Nt("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:n}));return}E(this,Ia).delete(n.id),s.resolve(n)}else if(n&&n.method==="eth_subscription"){const s=n.params.subscription,i=E(this,jl).get(s);if(i)i._handleMessage(n.params.result);else{let o=E(this,bo).get(s);o==null&&(o=[],E(this,bo).set(s,o)),o.push(n.params.result)}}else{this.emit("error",Nt("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:n}));return}}async _write(t){throw new Error("sub-classes must override this")}}Ia=new WeakMap,jl=new WeakMap,bo=new WeakMap;var Na,as;class kz extends Rz{constructor(t,n,s){super(n,s);V(this,Na);V(this,as);typeof t=="string"?(D(this,Na,()=>new Tz(t)),D(this,as,E(this,Na).call(this))):typeof t=="function"?(D(this,Na,t),D(this,as,t())):(D(this,Na,null),D(this,as,t)),this.websocket.onopen=async()=>{try{await this._start(),this.resume()}catch(i){console.log("failed to start WebsocketProvider",i)}},this.websocket.onmessage=i=>{this._processMessage(i.data)}}get websocket(){if(E(this,as)==null)throw new Error("websocket closed");return E(this,as)}async _write(t){this.websocket.send(t)}async destroy(){E(this,as)!=null&&(E(this,as).close(),D(this,as,null)),super.destroy()}}Na=new WeakMap,as=new WeakMap;const Xu="84842078b09946638c03157f83405213";function Dz(r){switch(r){case"mainnet":return"mainnet.infura.io";case"goerli":return"goerli.infura.io";case"sepolia":return"sepolia.infura.io";case"arbitrum":return"arbitrum-mainnet.infura.io";case"arbitrum-goerli":return"arbitrum-goerli.infura.io";case"arbitrum-sepolia":return"arbitrum-sepolia.infura.io";case"base":return"base-mainnet.infura.io";case"base-goerlia":return"base-goerli.infura.io";case"base-sepolia":return"base-sepolia.infura.io";case"bnb":return"bnbsmartchain-mainnet.infura.io";case"bnbt":return"bnbsmartchain-testnet.infura.io";case"linea":return"linea-mainnet.infura.io";case"linea-goerli":return"linea-goerli.infura.io";case"linea-sepolia":return"linea-sepolia.infura.io";case"matic":return"polygon-mainnet.infura.io";case"matic-amoy":return"polygon-amoy.infura.io";case"matic-mumbai":return"polygon-mumbai.infura.io";case"optimism":return"optimism-mainnet.infura.io";case"optimism-goerli":return"optimism-goerli.infura.io";case"optimism-sepolia":return"optimism-sepolia.infura.io"}F(!1,"unsupported network","network",r)}class Uz extends kz{constructor(t,n){const s=new Qa(t,n),i=s._getConnection();W(!i.credentials,"INFURA WebSocket project secrets unsupported","UNSUPPORTED_OPERATION",{operation:"InfuraProvider.getWebSocketProvider()"});const o=i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(o,s._network);H(this,"projectId");H(this,"projectSecret");Ae(this,{projectId:s.projectId,projectSecret:s.projectSecret})}isCommunityResource(){return this.projectId===Xu}}class Qa extends PS{constructor(t,n,s){t==null&&(t="mainnet");const i=ds.from(t);n==null&&(n=Xu),s==null&&(s=null);const o=Qa.getRequest(i,n,s);super(o,i,{staticNetwork:i});H(this,"projectId");H(this,"projectSecret");Ae(this,{projectId:n,projectSecret:s})}_getProvider(t){try{return new Qa(t,this.projectId,this.projectSecret)}catch{}return super._getProvider(t)}isCommunityResource(){return this.projectId===Xu}static getWebSocketProvider(t,n){return new Uz(t,n)}static getRequest(t,n,s){n==null&&(n=Xu),s==null&&(s=null);const i=new Qs(`https://${Dz(t.name)}/v3/${n}`);return i.allowGzip=!0,s&&i.setCredentials("",s),n===Xu&&(i.retryFunc=async(o,a,c)=>(Ez("InfuraProvider"),!0)),i}}var Hl;class qm extends OS{constructor(t,n,s){const i=Object.assign({},s??{},{batchMaxCount:1});F(t&&t.request,"invalid EIP-1193 provider","ethereum",t);super(n,i);V(this,Hl);D(this,Hl,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await t.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}async send(t,n){return await this._start(),await super.send(t,n)}async _send(t){F(!Array.isArray(t),"EIP-1193 does not support batch request","payload",t);try{const n=await E(this,Hl).call(this,t.method,t.params||[]);return[{id:t.id,result:n}]}catch(n){return[{id:t.id,error:{code:n.code,data:n.data,message:n.message}}]}}getRpcError(t,n){switch(n=JSON.parse(JSON.stringify(n)),n.error.code||-1){case 4001:n.error.message=`ethers-user-denied: ${n.error.message}`;break;case 4200:n.error.message=`ethers-unsupported: ${n.error.message}`;break}return super.getRpcError(t,n)}async hasSigner(t){t==null&&(t=0);const n=await this.send("eth_accounts",[]);return typeof t=="number"?n.length>t:(t=t.toLowerCase(),n.filter(s=>s.toLowerCase()===t).length!==0)}async getSigner(t){if(t==null&&(t=0),!await this.hasSigner(t))try{await E(this,Hl).call(this,"eth_requestAccounts",[])}catch(n){const s=n.payload;throw this.getRpcError(s,{id:s.id,error:n})}return await super.getSigner(t)}}Hl=new WeakMap;const tl={hexStringToNumber(r){const e=r.startsWith("0x")?r.slice(2):r;return parseInt(e,16)},numberToHexString(r){return`0x${r.toString(16)}`},async getUserInfo(r){const[e,t]=await Promise.all([tl.getAddresses(r),tl.getChainId(r)]);return{chainId:t,addresses:e}},async getChainId(r){const e=await r.request({method:"eth_chainId"});return Number(e)},async getAddress(r){const[e]=await r.request({method:"eth_accounts"});return e},async getAddresses(r){return await r.request({method:"eth_accounts"})},async addEthereumChain(r,e){var n,s;const t=((n=e.rpcUrls.chainDefault)==null?void 0:n.http)||[];await r.request({method:"wallet_addEthereumChain",params:[{chainId:tl.numberToHexString(e.id),rpcUrls:[...t],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[$s.NetworkImageIds[e.id]]}]})}},zi={signMessage:async(r,e,t)=>{if(!e)throw new Error("signMessage - provider is undefined");const n=wt(r)?r:fe(zs(r));return await e.request({method:"personal_sign",params:[n,t]})},estimateGas:async(r,e,t,n)=>{if(!e)throw new Error("estimateGas - provider is undefined");if(!t)throw new Error("estimateGas - address is undefined");if(r.chainNamespace&&r.chainNamespace!=="eip155")throw new Error("estimateGas - chainNamespace is not eip155");const s={from:r.address,to:r.to,data:r.data,type:0},i=new qm(e,n);return await new el(i,t).estimateGas(s)},sendTransaction:async(r,e,t,n)=>{if(!e)throw new Error("sendTransaction - provider is undefined");if(!t)throw new Error("sendTransaction - address is undefined");if(r.chainNamespace&&r.chainNamespace!=="eip155")throw new Error("sendTransaction - chainNamespace is not eip155");const s={to:r.to,value:r.value,gasLimit:r.gas,gasPrice:r.gasPrice,data:r.data,type:0},i=new qm(e,n),c=await(await new el(i,t).sendTransaction(s)).wait();return(c==null?void 0:c.hash)||null},writeContract:async(r,e,t,n)=>{if(!e)throw new Error("writeContract - provider is undefined");if(!t)throw new Error("writeContract - address is undefined");const s=new qm(e,n),i=new el(s,t),o=new Xc(r.tokenAddress,r.abi,i);if(!o||!r.method)throw new Error("Contract method is undefined");const a=o[r.method];if(a)return await a(...r.args);throw new Error("Contract method is undefined")},getEnsAddress:async(r,e)=>{try{const t=Number(e.id);let n=null,s=!1;return rO(r)&&(s=await i0.resolveReownName(r)||!1),t===1&&(n=await new Qa("mainnet").resolveName(r)),n||s||!1}catch{return!1}},getEnsAvatar:async(r,e)=>e===1&&await new Qa("mainnet").getAvatar(r)||!1,parseWalletCapabilities:r=>{try{return JSON.parse(r)}catch{throw new Error("Error parsing wallet capabilities")}},parseUnits:b7,formatUnits:JI};class Lz extends UI{constructor(){super({adapterType:ee.ADAPTER_TYPES.ETHERS,namespace:ee.CHAIN.EVM}),this.balancePromises={},this.providerHandlers=null}async createEthersConfig(e){if(!e.metadata)return;let t;function n(){if(t)return t;if(!(typeof window>"u")&&window.ethereum)return t=window.ethereum,t}async function s(){var o,a,c;try{const{createCoinbaseWalletSDK:l}=await kn(async()=>{const{createCoinbaseWalletSDK:h}=await import("./index-xiDmKrHC.js");return{createCoinbaseWalletSDK:h}},__vite__mapDeps([37,1,2,3]));return typeof window>"u"?void 0:l({appName:(o=e==null?void 0:e.metadata)==null?void 0:o.name,appLogoUrl:(a=e==null?void 0:e.metadata)==null?void 0:a.icons[0],appChainIds:((c=e.networks)==null?void 0:c.map(h=>h.id))||[1,84532],preference:{options:e.coinbasePreference??"all"}}).getProvider()}catch(l){console.error("Failed to import Coinbase Wallet SDK:",l);return}}const i={metadata:e.metadata};if(e.enableInjected!==!1&&(i.injected=n()),e.enableCoinbase!==!1){const o=await s();o&&(i.coinbase=o)}return i.EIP6963=e.enableEIP6963!==!1,i}async signMessage(e){const{message:t,address:n,provider:s}=e;if(!s)throw new Error("Provider is undefined");try{return{signature:await zi.signMessage(t,s,n)}}catch{throw new Error("EthersAdapter:signMessage - Sign message failed")}}async sendTransaction(e){var n;if(!e.provider)throw new Error("Provider is undefined");return{hash:await zi.sendTransaction({value:e.value,to:e.to,data:e.data,gas:e.gas,gasPrice:e.gasPrice,address:e.address},e.provider,e.address,Number((n=e.caipNetwork)==null?void 0:n.id))}}async writeContract(e){var s;if(!e.provider)throw new Error("Provider is undefined");const{address:t}=si.parseCaipAddress(e.caipAddress);return{hash:await zi.writeContract(e,e.provider,t,Number((s=e.caipNetwork)==null?void 0:s.id))}}async estimateGas(e){const{provider:t,caipNetwork:n,address:s}=e;if(!t)throw new Error("Provider is undefined");try{return{gas:await zi.estimateGas({data:e.data,to:e.to,address:s},t,s,Number(n==null?void 0:n.id))}}catch{throw new Error("EthersAdapter:estimateGas - Estimate gas failed")}}async getEnsAddress(e){const{name:t,caipNetwork:n}=e;return n?{address:await zi.getEnsAddress(t,n)}:{address:""}}parseUnits(e){return zi.parseUnits(e.value,e.decimals)}formatUnits(e){return zi.formatUnits(e.value,e.decimals)}async syncConnection(e){const{id:t,chainId:n}=e,s=this.connectors.find(c=>c.id===t),i=s==null?void 0:s.provider;if(!i)throw new Error("Provider not found");const o=await i.request({method:"eth_requestAccounts"}),a=await i.request({method:"eth_chainId"});if(this.listenProviderEvents(i),!o[0])throw new Error("No accounts found");if(!(s!=null&&s.type))throw new Error("Connector type not found");return{address:o[0],chainId:Number(a)||Number(n),provider:i,type:s.type,id:t}}async syncConnectors(e){var n;this.ethersConfig=await this.createEthersConfig(e),(n=this.ethersConfig)!=null&&n.EIP6963&&this.listenInjectedConnector(!0),Object.keys(this.ethersConfig||{}).filter(s=>s!=="metadata"&&s!=="EIP6963").forEach(s=>{var a,c;const i=s==="coinbase"?"coinbaseWalletSDK":s,o=s===ee.CONNECTOR_ID.INJECTED;this.namespace&&this.addConnector({id:i,explorerId:$s.ConnectorExplorerIds[i],imageUrl:(a=e==null?void 0:e.connectorImages)==null?void 0:a[i],name:$s.ConnectorNamesMap[i]||"Unknown",imageId:$s.ConnectorImageIds[i],type:$s.ConnectorTypesMap[i]??"EXTERNAL",info:o?void 0:{rdns:i},chain:this.namespace,chains:[],provider:(c=this.ethersConfig)==null?void 0:c[s]})})}setUniversalProvider(e){this.addConnector(new o0({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}eip6963EventHandler(e){var t;if(e.detail){const{info:n,provider:s}=e.detail;if(!((t=this.connectors)==null?void 0:t.find(o=>o.name===(n==null?void 0:n.name)))){const o=$s.ConnectorTypesMap[ee.CONNECTOR_ID.EIP6963],a=(n==null?void 0:n.rdns)||(n==null?void 0:n.name)||(n==null?void 0:n.uuid);this.namespace&&a&&this.addConnector({id:a,type:o,imageUrl:n==null?void 0:n.icon,name:(n==null?void 0:n.name)||"Unknown",provider:s,info:n,chain:this.namespace,chains:[]})}}}listenInjectedConnector(e){if(typeof window<"u"&&e){const t=this.eip6963EventHandler.bind(this);window.addEventListener(gt.EIP6963_ANNOUNCE_EVENT,t),window.dispatchEvent(new Event(gt.EIP6963_REQUEST_EVENT))}}async connect({id:e,type:t,chainId:n}){var c;const s=this.connectors.find(l=>l.id===e),i=s==null?void 0:s.provider;if(!i)throw new Error("Provider not found");let o=[],a;if(t==="AUTH"){const{address:l}=await i.connect({chainId:n,preferredAccountType:(c=de.state.preferredAccountTypes)==null?void 0:c.eip155});o=[l],this.emit("accountChanged",{address:o[0],chainId:Number(n)})}else{if(o=await i.request({method:"eth_requestAccounts"}),a=await i.request({method:"eth_chainId"}),a!==n){const l=this.getCaipNetworks().find(u=>u.id===n);if(!l)throw new Error("EthersAdapter:connect - could not find the caipNetwork to switch");try{await this.switchNetwork({caipNetwork:l,provider:i,providerType:t})}catch{throw new Error("EthersAdapter:connect - Switch network failed")}}this.emit("accountChanged",{address:o[0],chainId:Number(n)}),this.listenProviderEvents(i)}return{address:o[0],chainId:Number(n),provider:i,type:t,id:e}}async reconnect(e){var i;const{id:t,chainId:n}=e,s=this.connectors.find(o=>o.id===t);s&&s.type==="AUTH"&&n&&await s.provider.connect({chainId:n,preferredAccountType:(i=de.state.preferredAccountTypes)==null?void 0:i.eip155})}async getAccounts(e){const t=this.connectors.find(i=>i.id===e.id),n=t==null?void 0:t.provider;if(!n||!t)throw new Error("Provider not found");if(e.id===ee.CONNECTOR_ID.AUTH){const i=t.provider;if(!i.user)return{accounts:[]};const{accounts:o,address:a}=i.user;return Promise.resolve({accounts:(o||[{address:a,type:"eoa"}]).map(c=>Se.createAccount("eip155",c.address,c.type))})}return{accounts:(await n.request({method:"eth_requestAccounts"})).map(i=>Se.createAccount("eip155",i,"eoa"))}}async disconnect(e){if(!e.provider||!e.providerType)throw new Error("Provider or providerType not provided");switch(e.providerType){case"WALLET_CONNECT":e.provider.session&&e.provider.disconnect();break;case"AUTH":await e.provider.disconnect();break;case"ANNOUNCED":case"EXTERNAL":await this.revokeProviderPermissions(e.provider);break;default:throw new Error("Unsupported provider type")}}async getBalance(e){const t=e.address,n=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!t)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(n&&n.chainNamespace==="eip155"){const s=`${n.caipNetworkId}:${t}`,i=this.balancePromises[s];if(i)return i;const o=he.getNativeBalanceCacheForCaipAddress(s);if(o)return{balance:o.balance,symbol:o.symbol};const a=new PS(n.rpcUrls.default.http[0],{chainId:n.id,name:n.name});if(a)try{return this.balancePromises[s]=new Promise(async c=>{const l=await a.getBalance(t),u=E7(l);he.updateNativeBalanceCache({caipAddress:s,balance:u,symbol:n.nativeCurrency.symbol,timestamp:Date.now()}),c({balance:u,symbol:n.nativeCurrency.symbol})}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"}}catch{return{balance:"0.00",symbol:"ETH"}}}return{balance:"0.00",symbol:"ETH"}}async getProfile(e){if(e.chainId===1){const t=new Qa("mainnet"),n=await t.lookupAddress(e.address),s=await t.getAvatar(e.address);return{profileName:n||void 0,profileImage:s||void 0}}return{profileName:void 0,profileImage:void 0}}listenProviderEvents(e){const t=()=>{this.removeProviderListeners(e),this.emit("disconnect")},n=i=>{i.length>0?this.emit("accountChanged",{address:i[0]}):t()},s=i=>{const o=typeof i=="string"?tl.hexStringToNumber(i):Number(i);this.emit("switchNetwork",{chainId:o})};e.on("disconnect",t),e.on("accountsChanged",n),e.on("chainChanged",s),this.providerHandlers={disconnect:t,accountsChanged:n,chainChanged:s}}removeProviderListeners(e){this.providerHandlers&&(e.removeListener("disconnect",this.providerHandlers.disconnect),e.removeListener("accountsChanged",this.providerHandlers.accountsChanged),e.removeListener("chainChanged",this.providerHandlers.chainChanged),this.providerHandlers=null)}async switchNetwork(e){var i,o;const{caipNetwork:t,provider:n,providerType:s}=e;if(s==="AUTH"){await super.switchNetwork(e);return}try{await n.request({method:"wallet_switchEthereumChain",params:[{chainId:tl.numberToHexString(t.id)}]})}catch(a){if(a.code===Ao.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||a.code===Ao.ERROR_INVALID_CHAIN_ID||a.code===Ao.ERROR_CODE_DEFAULT||((o=(i=a==null?void 0:a.data)==null?void 0:i.originalError)==null?void 0:o.code)===Ao.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)await tl.addEthereumChain(n,t);else if(s==="ANNOUNCED"||s==="EXTERNAL"||s==="INJECTED")throw new Error("Chain is not supported")}}getWalletConnectProvider(){var e;return(e=this.connectors.find(t=>t.type==="WALLET_CONNECT"))==null?void 0:e.provider}async revokeProviderPermissions(e){try{(await e.request({method:"wallet_getPermissions"})).find(s=>s.parentCapability==="eth_accounts")&&await e.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]})}catch(t){console.info("Could not revoke permissions from wallet. Disconnecting...",t)}}async getCapabilities(e){var s,i;const t=Ze.getProvider(ee.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");const n=(i=(s=t.session)==null?void 0:s.sessionProperties)==null?void 0:i.capabilities;if(n){const a=zi.parseWalletCapabilities(n)[e];if(a)return a}return await t.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){const t=Ze.getProvider(ee.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");return await t.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){const t=Ze.getProvider(ee.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");return await t.request({method:"wallet_revokePermissions",params:[e]})}async walletGetAssets(e){const t=Ze.getProvider(ee.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");return await t.request({method:"wallet_getAssets",params:[e]})}}const Bz="35c1db7cbde70997e97b1eed713a76f0",Mz=[Hj,DI],$z={name:"Kings Vault",description:"Kings Vault",url:"https://kingsvault.io/",icons:["https://avatars.githubusercontent.com/u/205055404?s=200&v=4"]},Fz=Jj({adapters:[new Lz],defaultNetwork:DI,networks:Mz,metadata:$z,projectId:Bz,features:{analytics:!1,onramp:!0,connectMethodsOrder:["wallet"],legalCheckbox:!0},defaultAccountTypes:{eip155:"eoa"},enableWalletConnect:!0,enableNetworkSwitch:!1,debug:!0});function jz({children:r}){const[e,t]=st.useState(!1);return st.useEffect(()=>{Fz&&t(!0)},[]),e?r:Yn.jsx(Km,{name:"..."})}const Hz=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Vz={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},qz=r=>Vz[r],zz=r=>r.replace(Hz,qz);let p1={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:zz};const Wz=(r={})=>{p1={...p1,...r}},Gz={type:"3rdParty",init(r){Wz(r.options.react)}},Kz=st.createContext();function Jz({i18n:r,defaultNS:e,children:t}){const n=st.useMemo(()=>({i18n:r,defaultNS:e}),[r,e]);return st.createElement(Kz.Provider,{value:n},t)}const Oe=r=>typeof r=="string",ju=()=>{let r,e;const t=new Promise((n,s)=>{r=n,e=s});return t.resolve=r,t.reject=e,t},g1=r=>r==null?"":""+r,Qz=(r,e,t)=>{r.forEach(n=>{e[n]&&(t[n]=e[n])})},Yz=/###/g,m1=r=>r&&r.indexOf("###")>-1?r.replace(Yz,"."):r,y1=r=>!r||Oe(r),uh=(r,e,t)=>{const n=Oe(e)?e.split("."):e;let s=0;for(;s<n.length-1;){if(y1(r))return{};const i=m1(n[s]);!r[i]&&t&&(r[i]=new t),Object.prototype.hasOwnProperty.call(r,i)?r=r[i]:r={},++s}return y1(r)?{}:{obj:r,k:m1(n[s])}},w1=(r,e,t)=>{const{obj:n,k:s}=uh(r,e,Object);if(n!==void 0||e.length===1){n[s]=t;return}let i=e[e.length-1],o=e.slice(0,e.length-1),a=uh(r,o,Object);for(;a.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),a=uh(r,o,Object),a!=null&&a.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=t},Zz=(r,e,t,n)=>{const{obj:s,k:i}=uh(r,e,Object);s[i]=s[i]||[],s[i].push(t)},kp=(r,e)=>{const{obj:t,k:n}=uh(r,e);if(t&&Object.prototype.hasOwnProperty.call(t,n))return t[n]},Xz=(r,e,t)=>{const n=kp(r,t);return n!==void 0?n:kp(e,t)},xS=(r,e,t)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in r?Oe(r[n])||r[n]instanceof String||Oe(e[n])||e[n]instanceof String?t&&(r[n]=e[n]):xS(r[n],e[n],t):r[n]=e[n]);return r},Oc=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var eW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const tW=r=>Oe(r)?r.replace(/[&<>"'\/]/g,e=>eW[e]):r;class rW{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const nW=[" ",",","?","!",";"],sW=new rW(20),iW=(r,e,t)=>{e=e||"",t=t||"";const n=nW.filter(o=>e.indexOf(o)<0&&t.indexOf(o)<0);if(n.length===0)return!0;const s=sW.getRegExp(`(${n.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!s.test(r);if(!i){const o=r.indexOf(t);o>0&&!s.test(r.substring(0,o))&&(i=!0)}return i},Ow=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!r)return;if(r[e])return Object.prototype.hasOwnProperty.call(r,e)?r[e]:void 0;const n=e.split(t);let s=r;for(let i=0;i<n.length;){if(!s||typeof s!="object")return;let o,a="";for(let c=i;c<n.length;++c)if(c!==i&&(a+=t),a+=n[c],o=s[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<n.length-1)continue;i+=c-i+1;break}s=o}return s},Dp=r=>r==null?void 0:r.replace("_","-"),oW={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,e){var t,n;(n=(t=console==null?void 0:console[r])==null?void 0:t.apply)==null||n.call(t,console,e)}};class Up{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||oW,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,s){return s&&!this.debug?null:(Oe(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Up(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Up(this.logger,e)}}var Hs=new Up;class Tg{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const s=this.observers[n].get(t)||0;this.observers[n].set(t,s+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[a,c]=o;for(let l=0;l<c;l++)a(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[a,c]=o;for(let l=0;l<c;l++)a.apply(a,[e,...n])})}}class b1 extends Tg{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){var l,u;let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,o=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],n&&(Array.isArray(n)?a.push(...n):Oe(n)&&i?a.push(...n.split(i)):a.push(n)));const c=kp(this.data,a);return!c&&!t&&!n&&e.indexOf(".")>-1&&(e=a[0],t=a[1],n=a.slice(2).join(".")),c||!o||!Oe(n)?c:Ow((u=(l=this.data)==null?void 0:l[e])==null?void 0:u[t],n,i)}addResource(e,t,n,s){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let a=[e,t];n&&(a=a.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(a=e.split("."),s=t,t=a[1]),this.addNamespaces(t),w1(this.data,a,s),i.silent||this.emit("added",e,t,n,s)}addResources(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in n)(Oe(n[i])||Array.isArray(n[i]))&&this.addResource(e,t,i,n[i],{silent:!0});s.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,s,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),s=n,n=t,t=a[1]),this.addNamespaces(t);let c=kp(this.data,a)||{};o.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?xS(c,n,i):c={...c,...n},w1(this.data,a,c),o.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(s=>t[s]&&Object.keys(t[s]).length>0)}toJSON(){return this.data}}var RS={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,e,t,n,s){return r.forEach(i=>{var o;e=((o=this.processors[i])==null?void 0:o.process(e,t,n,s))??e}),e}};const E1={},v1=r=>!Oe(r)&&typeof r!="boolean"&&typeof r!="number";class Lp extends Tg{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Qz(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Hs.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const n=this.resolve(e,t);return(n==null?void 0:n.res)!==void 0}extractFromKey(e,t){let n=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const o=n&&e.indexOf(n)>-1,a=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!iW(e,n,s);if(o&&!a){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Oe(i)?[i]:i};const l=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(l[0])>-1)&&(i=l.shift()),e=l.join(s)}return{key:e,namespaces:Oe(i)?[i]:i}}translate(e,t,n){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],t),c=a[a.length-1],l=t.lng||this.language,u=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((l==null?void 0:l.toLowerCase())==="cimode"){if(u){const _=t.nsSeparator||this.options.nsSeparator;return s?{res:`${c}${_}${o}`,usedKey:o,exactUsedKey:o,usedLng:l,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:`${c}${_}${o}`}return s?{res:o,usedKey:o,exactUsedKey:o,usedLng:l,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:o}const h=this.resolve(e,t);let d=h==null?void 0:h.res;const f=(h==null?void 0:h.usedKey)||o,p=(h==null?void 0:h.exactUsedKey)||o,g=["[object Number]","[object Function]","[object RegExp]"],y=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,C=!this.i18nFormat||this.i18nFormat.handleAsObject,w=t.count!==void 0&&!Oe(t.count),I=Lp.hasDefaultValue(t),U=w?this.pluralResolver.getSuffix(l,t.count,t):"",M=t.ordinal&&w?this.pluralResolver.getSuffix(l,t.count,{ordinal:!1}):"",B=w&&!t.ordinal&&t.count===0,L=B&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${U}`]||t[`defaultValue${M}`]||t.defaultValue;let m=d;C&&!d&&I&&(m=L);const b=v1(m),N=Object.prototype.toString.apply(m);if(C&&m&&b&&g.indexOf(N)<0&&!(Oe(y)&&Array.isArray(m))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const _=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,m,{...t,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return s?(h.res=_,h.usedParams=this.getUsedParamsDetails(t),h):_}if(i){const _=Array.isArray(m),S=_?[]:{},k=_?p:f;for(const P in m)if(Object.prototype.hasOwnProperty.call(m,P)){const v=`${k}${i}${P}`;I&&!d?S[P]=this.translate(v,{...t,defaultValue:v1(L)?L[P]:void 0,joinArrays:!1,ns:a}):S[P]=this.translate(v,{...t,joinArrays:!1,ns:a}),S[P]===v&&(S[P]=m[P])}d=S}}else if(C&&Oe(y)&&Array.isArray(d))d=d.join(y),d&&(d=this.extendTranslation(d,e,t,n));else{let _=!1,S=!1;!this.isValidLookup(d)&&I&&(_=!0,d=L),this.isValidLookup(d)||(S=!0,d=o);const P=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&S?void 0:d,v=I&&L!==d&&this.options.updateMissing;if(S||_||v){if(this.logger.log(v?"updateKey":"missingKey",l,c,o,v?L:d),i){const R=this.resolve(o,{...t,keySeparator:!1});R&&R.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let A=[];const T=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&T&&T[0])for(let R=0;R<T.length;R++)A.push(T[R]);else this.options.saveMissingTo==="all"?A=this.languageUtils.toResolveHierarchy(t.lng||this.language):A.push(t.lng||this.language);const x=(R,j,q)=>{var G;const z=I&&q!==d?q:P;this.options.missingKeyHandler?this.options.missingKeyHandler(R,c,j,z,v,t):(G=this.backendConnector)!=null&&G.saveMissing&&this.backendConnector.saveMissing(R,c,j,z,v,t),this.emit("missingKey",R,c,j,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&w?A.forEach(R=>{const j=this.pluralResolver.getSuffixes(R,t);B&&t[`defaultValue${this.options.pluralSeparator}zero`]&&j.indexOf(`${this.options.pluralSeparator}zero`)<0&&j.push(`${this.options.pluralSeparator}zero`),j.forEach(q=>{x([R],o+q,t[`defaultValue${q}`]||L)})}):x(A,o,L))}d=this.extendTranslation(d,e,t,h,n),S&&d===o&&this.options.appendNamespaceToMissingKey&&(d=`${c}:${o}`),(S||_)&&this.options.parseMissingKeyHandler&&(d=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${o}`:o,_?d:void 0))}return s?(h.res=d,h.usedParams=this.getUsedParamsDetails(t),h):d}extendTranslation(e,t,n,s,i){var l,u;var o=this;if((l=this.i18nFormat)!=null&&l.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const h=Oe(e)&&(((u=n==null?void 0:n.interpolation)==null?void 0:u.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(h){const p=e.match(this.interpolator.nestingRegexp);d=p&&p.length}let f=n.replace&&!Oe(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,n.lng||this.language||s.usedLng,n),h){const p=e.match(this.interpolator.nestingRegexp),g=p&&p.length;d<g&&(n.nest=!1)}!n.lng&&s&&s.res&&(n.lng=this.language||s.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var p=arguments.length,g=new Array(p),y=0;y<p;y++)g[y]=arguments[y];return(i==null?void 0:i[0])===g[0]&&!n.context?(o.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${t[0]}`),null):o.translate(...g,t)},n)),n.interpolation&&this.interpolator.reset()}const a=n.postProcess||this.options.postProcess,c=Oe(a)?[a]:a;return e!=null&&(c!=null&&c.length)&&n.applyPostProcessor!==!1&&(e=RS.handle(c,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,s,i,o,a;return Oe(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(n))return;const l=this.extractFromKey(c,t),u=l.key;s=u;let h=l.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const d=t.count!==void 0&&!Oe(t.count),f=d&&!t.ordinal&&t.count===0,p=t.context!==void 0&&(Oe(t.context)||typeof t.context=="number")&&t.context!=="",g=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);h.forEach(y=>{var C,w;this.isValidLookup(n)||(a=y,!E1[`${g[0]}-${y}`]&&((C=this.utils)!=null&&C.hasLoadedNamespace)&&!((w=this.utils)!=null&&w.hasLoadedNamespace(a))&&(E1[`${g[0]}-${y}`]=!0,this.logger.warn(`key "${s}" for languages "${g.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(I=>{var B;if(this.isValidLookup(n))return;o=I;const U=[u];if((B=this.i18nFormat)!=null&&B.addLookupKeys)this.i18nFormat.addLookupKeys(U,u,I,y,t);else{let L;d&&(L=this.pluralResolver.getSuffix(I,t.count,t));const m=`${this.options.pluralSeparator}zero`,b=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(U.push(u+L),t.ordinal&&L.indexOf(b)===0&&U.push(u+L.replace(b,this.options.pluralSeparator)),f&&U.push(u+m)),p){const N=`${u}${this.options.contextSeparator}${t.context}`;U.push(N),d&&(U.push(N+L),t.ordinal&&L.indexOf(b)===0&&U.push(N+L.replace(b,this.options.pluralSeparator)),f&&U.push(N+m))}}let M;for(;M=U.pop();)this.isValidLookup(n)||(i=M,n=this.getResource(I,y,M,t))}))})}),{res:n,usedKey:s,exactUsedKey:i,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,n){var i;let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(e,t,n,s):this.resourceStore.getResource(e,t,n,s)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Oe(e.replace);let s=n?e.replace:e;if(n&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const i of t)delete s[i]}return s}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&e[n]!==void 0)return!0;return!1}}class A1{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Hs.create("languageUtils")}getScriptPartFromCode(e){if(e=Dp(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Dp(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Oe(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(n=>{if(t)return;const s=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(s))&&(t=s)}),!t&&this.options.supportedLngs&&e.forEach(n=>{if(t)return;const s=this.getScriptPartFromCode(n);if(this.isSupportedCode(s))return t=s;const i=this.getLanguagePartFromCode(n);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find(o=>{if(o===i)return o;if(!(o.indexOf("-")<0&&i.indexOf("-")<0)&&(o.indexOf("-")>0&&i.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===i||o.indexOf(i)===0&&i.length>1))return o})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Oe(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),s=[],i=o=>{o&&(this.isSupportedCode(o)?s.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return Oe(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):Oe(e)&&i(this.formatLanguageCode(e)),n.forEach(o=>{s.indexOf(o)<0&&i(this.formatLanguageCode(o))}),s}}const C1={zero:0,one:1,two:2,few:3,many:4,other:5},_1={select:r=>r===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class aW{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=Hs.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=Dp(e==="dev"?"en":e),s=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(n,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),_1;if(!e.match(/-|_/))return _1;const c=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(c,t)}return this.pluralRulesCache[i]=o,o}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),(n==null?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,n).map(s=>`${t}${s}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((s,i)=>C1[s]-C1[i]).map(s=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,n);return s?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const I1=function(r,e,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=Xz(r,e,t);return!i&&s&&Oe(t)&&(i=Ow(r,t,n),i===void 0&&(i=Ow(e,t,n))),i},zm=r=>r.replace(/\$/g,"$$$$");class cW{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Hs.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:s,prefix:i,prefixEscaped:o,suffix:a,suffixEscaped:c,formatSeparator:l,unescapeSuffix:u,unescapePrefix:h,nestingPrefix:d,nestingPrefixEscaped:f,nestingSuffix:p,nestingSuffixEscaped:g,nestingOptionsSeparator:y,maxReplaces:C,alwaysFormat:w}=e.interpolation;this.escape=t!==void 0?t:tW,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?Oc(i):o||"{{",this.suffix=a?Oc(a):c||"}}",this.formatSeparator=l||",",this.unescapePrefix=u?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=d?Oc(d):f||Oc("$t("),this.nestingSuffix=p?Oc(p):g||Oc(")"),this.nestingOptionsSeparator=y||",",this.maxReplaces=C||1e3,this.alwaysFormat=w!==void 0?w:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,n)=>(t==null?void 0:t.source)===n?(t.lastIndex=0,t):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,s){var f;let i,o,a;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=p=>{if(p.indexOf(this.formatSeparator)<0){const w=I1(t,c,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(w,void 0,n,{...s,...t,interpolationkey:p}):w}const g=p.split(this.formatSeparator),y=g.shift().trim(),C=g.join(this.formatSeparator).trim();return this.format(I1(t,c,y,this.options.keySeparator,this.options.ignoreJSONStructure),C,n,{...s,...t,interpolationkey:y})};this.resetRegExp();const u=(s==null?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=((f=s==null?void 0:s.interpolation)==null?void 0:f.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>zm(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?zm(this.escape(p)):zm(p)}].forEach(p=>{for(a=0;i=p.regex.exec(e);){const g=i[1].trim();if(o=l(g),o===void 0)if(typeof u=="function"){const C=u(e,i,s);o=Oe(C)?C:""}else if(s&&Object.prototype.hasOwnProperty.call(s,g))o="";else if(h){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${g} for interpolating ${e}`),o="";else!Oe(o)&&!this.useRawValueToEscape&&(o=g1(o));const y=p.safeValue(o);if(e=e.replace(i[0],y),h?(p.regex.lastIndex+=o.length,p.regex.lastIndex-=i[0].length):p.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,i,o;const a=(c,l)=>{const u=this.nestingOptionsSeparator;if(c.indexOf(u)<0)return c;const h=c.split(new RegExp(`${u}[ ]*{`));let d=`{${h[1]}`;c=h[0],d=this.interpolate(d,o);const f=d.match(/'/g),p=d.match(/"/g);(((f==null?void 0:f.length)??0)%2===0&&!p||p.length%2!==0)&&(d=d.replace(/'/g,'"'));try{o=JSON.parse(d),l&&(o={...l,...o})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,g),`${c}${u}${d}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;s=this.nestingRegexp.exec(e);){let c=[];o={...n},o=o.replace&&!Oe(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let l=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const u=s[1].split(this.formatSeparator).map(h=>h.trim());s[1]=u.shift(),c=u,l=!0}if(i=t(a.call(this,s[1].trim(),o),o),i&&s[0]===e&&!Oe(i))return i;Oe(i)||(i=g1(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),i=""),l&&(i=c.reduce((u,h)=>this.format(u,h,n.lng,{...n,interpolationkey:s[1].trim()}),i.trim())),e=e.replace(s[0],i),this.regexp.lastIndex=0}return e}}const lW=r=>{let e=r.toLowerCase().trim();const t={};if(r.indexOf("(")>-1){const n=r.split("(");e=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);e==="currency"&&s.indexOf(":")<0?t.currency||(t.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?t.range||(t.range=s.trim()):s.split(";").forEach(o=>{if(o){const[a,...c]=o.split(":"),l=c.join(":").trim().replace(/^'+|'+$/g,""),u=a.trim();t[u]||(t[u]=l),l==="false"&&(t[u]=!1),l==="true"&&(t[u]=!0),isNaN(l)||(t[u]=parseInt(l,10))}})}return{formatName:e,formatOptions:t}},Pc=r=>{const e={};return(t,n,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const o=n+JSON.stringify(i);let a=e[o];return a||(a=r(Dp(n),s),e[o]=a),a(t)}};class uW{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Hs.create("formatter"),this.options=e,this.formats={number:Pc((t,n)=>{const s=new Intl.NumberFormat(t,{...n});return i=>s.format(i)}),currency:Pc((t,n)=>{const s=new Intl.NumberFormat(t,{...n,style:"currency"});return i=>s.format(i)}),datetime:Pc((t,n)=>{const s=new Intl.DateTimeFormat(t,{...n});return i=>s.format(i)}),relativetime:Pc((t,n)=>{const s=new Intl.RelativeTimeFormat(t,{...n});return i=>s.format(i,n.range||"day")}),list:Pc((t,n)=>{const s=new Intl.ListFormat(t,{...n});return i=>s.format(i)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Pc(t)}format(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(a=>a.indexOf(")")>-1)){const a=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,a)].join(this.formatSeparator)}return i.reduce((a,c)=>{var h;const{formatName:l,formatOptions:u}=lW(c);if(this.formats[l]){let d=a;try{const f=((h=s==null?void 0:s.formatParams)==null?void 0:h[s.interpolationkey])||{},p=f.locale||f.lng||s.locale||s.lng||n;d=this.formats[l](a,p,{...u,...s,...f})}catch(f){this.logger.warn(f)}return d}else this.logger.warn(`there was no format function for ${l}`);return a},e)}}const hW=(r,e)=>{r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)};class dW extends Tg{constructor(e,t,n){var i,o;let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=Hs.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],(o=(i=this.backend)==null?void 0:i.init)==null||o.call(i,n,s.backend,s)}queueLoad(e,t,n,s){const i={},o={},a={},c={};return e.forEach(l=>{let u=!0;t.forEach(h=>{const d=`${l}|${h}`;!n.reload&&this.store.hasResourceBundle(l,h)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?o[d]===void 0&&(o[d]=!0):(this.state[d]=1,u=!1,o[d]===void 0&&(o[d]=!0),i[d]===void 0&&(i[d]=!0),c[h]===void 0&&(c[h]=!0)))}),u||(a[l]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}loaded(e,t,n){const s=e.split("|"),i=s[0],o=s[1];t&&this.emit("failedLoading",i,o,t),!t&&n&&this.store.addResourceBundle(i,o,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const a={};this.queue.forEach(c=>{Zz(c.loaded,[i],o),hW(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(l=>{a[l]||(a[l]={});const u=c.loaded[l];u.length&&u.forEach(h=>{a[l][h]===void 0&&(a[l][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(c=>!c.done)}read(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:n,tried:s,wait:i,callback:o});return}this.readingCalls++;const a=(l,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(l&&u&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,n,s+1,i*2,o)},i);return}o(l,u)},c=this.backend[n].bind(this.backend);if(c.length===2){try{const l=c(e,t);l&&typeof l.then=="function"?l.then(u=>a(null,u)).catch(a):a(null,l)}catch(l){a(l)}return}return c(e,t,a)}prepareLoading(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();Oe(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Oe(t)&&(t=[t]);const i=this.queueLoad(e,t,n,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e.split("|"),s=n[0],i=n[1];this.read(s,i,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${t}loading namespace ${i} for language ${s} failed`,o),!o&&a&&this.logger.log(`${t}loaded namespace ${i} for language ${s}`,a),this.loaded(e,o,a)})}saveMissing(e,t,n,s,i){var c,l,u,h,d;let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((l=(c=this.services)==null?void 0:c.utils)!=null&&l.hasLoadedNamespace&&!((h=(u=this.services)==null?void 0:u.utils)!=null&&h.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if((d=this.backend)!=null&&d.create){const f={...o,isUpdate:i},p=this.backend.create.bind(this.backend);if(p.length<6)try{let g;p.length===5?g=p(e,t,n,s,f):g=p(e,t,n,s),g&&typeof g.then=="function"?g.then(y=>a(null,y)).catch(a):a(null,g)}catch(g){a(g)}else p(e,t,n,s,a,f)}!e||!e[0]||this.store.addResource(e[0],t,n,s)}}}const N1=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let e={};if(typeof r[1]=="object"&&(e=r[1]),Oe(r[1])&&(e.defaultValue=r[1]),Oe(r[2])&&(e.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const t=r[3]||r[2];Object.keys(t).forEach(n=>{e[n]=t[n]})}return e},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),S1=r=>{var e,t;return Oe(r.ns)&&(r.ns=[r.ns]),Oe(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),Oe(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),((t=(e=r.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),typeof r.initImmediate=="boolean"&&(r.initAsync=r.initImmediate),r},Of=()=>{},fW=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(t=>{typeof r[t]=="function"&&(r[t]=r[t].bind(r))})};class hd extends Tg{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=S1(e),this.services={},this.logger=Hs,this.modules={external:[]},fW(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(n=t,t={}),t.defaultNS==null&&t.ns&&(Oe(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const s=N1();this.options={...s,...this.options,...S1(t)},this.options.interpolation={...s.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const i=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Hs.init(i(this.modules.logger),this.options):Hs.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=uW;const h=new A1(this.options);this.store=new b1(this.options.resources,this.options);const d=this.services;d.logger=Hs,d.resourceStore=this.store,d.languageUtils=h,d.pluralResolver=new aW(h,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(d.formatter=i(u),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new cW(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new dW(i(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(f){for(var p=arguments.length,g=new Array(p>1?p-1:0),y=1;y<p;y++)g[y-1]=arguments[y];e.emit(f,...g)}),this.modules.languageDetector&&(d.languageDetector=i(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=i(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new Lp(this.services,this.options),this.translator.on("*",function(f){for(var p=arguments.length,g=new Array(p>1?p-1:0),y=1;y<p;y++)g[y-1]=arguments[y];e.emit(f,...g)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Of),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return e.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return e.store[u](...arguments),e}});const c=ju(),l=()=>{const u=(h,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(d),n(h,d)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),c}loadResources(e){var i,o;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Of;const s=Oe(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if((s==null?void 0:s.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const a=[],c=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(h=>{h!=="cimode"&&a.indexOf(h)<0&&a.push(h)})};s?c(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>c(u)),(o=(i=this.options.preload)==null?void 0:i.forEach)==null||o.call(i,l=>c(l)),this.services.backendConnector.load(a,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(l)})}else n(null)}reloadResources(e,t,n){const s=ju();return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=Of),this.services.backendConnector.reload(e,t,i=>{s.resolve(),n(i)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&RS.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const s=ju();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},o=(c,l)=>{l?this.isLanguageChangingTo===e&&(i(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,s.resolve(function(){return n.t(...arguments)}),t&&t(c,function(){return n.t(...arguments)})},a=c=>{var u,h;!e&&!c&&this.services.languageDetector&&(c=[]);const l=this.services.languageUtils.getBestMatchFromCodes(Oe(c)?[c]:c);l&&(this.language||i(l),this.translator.language||this.translator.changeLanguage(l),(h=(u=this.services.languageDetector)==null?void 0:u.cacheUserLanguage)==null||h.call(u,l)),this.loadResources(l,d=>{o(d,l)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),s}getFixedT(e,t,n){var s=this;const i=function(o,a){let c;if(typeof a!="object"){for(var l=arguments.length,u=new Array(l>2?l-2:0),h=2;h<l;h++)u[h-2]=arguments[h];c=s.options.overloadTranslationOptionHandler([o,a].concat(u))}else c={...a};c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||n||i.keyPrefix);const d=s.options.keySeparator||".";let f;return c.keyPrefix&&Array.isArray(o)?f=o.map(p=>`${c.keyPrefix}${d}${p}`):f=c.keyPrefix?`${c.keyPrefix}${d}${o}`:o,s.t(f,c)};return Oe(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=n,i}t(){var s;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(s=this.translator)==null?void 0:s.translate(...t)}exists(){var s;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(s=this.translator)==null?void 0:s.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const o=(a,c)=>{const l=this.services.backendConnector.state[`${a}|${c}`];return l===-1||l===0||l===2};if(t.precheck){const a=t.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(n,e)&&(!s||o(i,e)))}loadNamespaces(e,t){const n=ju();return this.options.ns?(Oe(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{n.resolve(),t&&t(s)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=ju();Oe(e)&&(e=[e]);const s=this.options.preload||[],i=e.filter(o=>s.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=s.concat(i),this.loadResources(o=>{n.resolve(),t&&t(o)}),n):(t&&t(),Promise.resolve())}dir(e){var s,i;if(e||(e=this.resolvedLanguage||(((s=this.languages)==null?void 0:s.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=((i=this.services)==null?void 0:i.languageUtils)||new A1(N1());return t.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new hd(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Of;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},i=new hd(s);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(a=>{i[a]=this[a]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n){const a=Object.keys(this.store.data).reduce((c,l)=>(c[l]={...this.store.data[l]},Object.keys(c[l]).reduce((u,h)=>(u[h]={...c[l][h]},u),{})),{});i.store=new b1(a,s),i.services.resourceStore=i.store}return i.translator=new Lp(i.services,s),i.translator.on("*",function(a){for(var c=arguments.length,l=new Array(c>1?c-1:0),u=1;u<c;u++)l[u-1]=arguments[u];i.emit(a,...l)}),i.init(s,t),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const yr=hd.createInstance();yr.createInstance=hd.createInstance;yr.createInstance;yr.dir;yr.init;yr.loadResources;yr.reloadResources;yr.use;yr.changeLanguage;yr.getFixedT;yr.t;yr.exists;yr.setDefaultNamespace;yr.hasLoadedNamespace;yr.loadNamespaces;yr.loadLanguages;const{slice:pW,forEach:gW}=[];function mW(r){return gW.call(pW.call(arguments,1),e=>{if(e)for(const t in e)r[t]===void 0&&(r[t]=e[t])}),r}const T1=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,yW=function(r,e){const n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},s=encodeURIComponent(e);let i=`${r}=${s}`;if(n.maxAge>0){const o=n.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(o)}`}if(n.domain){if(!T1.test(n.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${n.domain}`}if(n.path){if(!T1.test(n.path))throw new TypeError("option path is invalid");i+=`; Path=${n.path}`}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i},O1={create(r,e,t,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+t*60*1e3)),n&&(s.domain=n),document.cookie=yW(r,encodeURIComponent(e),s)},read(r){const e=`${r}=`,t=document.cookie.split(";");for(let n=0;n<t.length;n++){let s=t[n];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(e)===0)return s.substring(e.length,s.length)}return null},remove(r){this.create(r,"",-1)}};var wW={name:"cookie",lookup(r){let{lookupCookie:e}=r;if(e&&typeof document<"u")return O1.read(e)||void 0},cacheUserLanguage(r,e){let{lookupCookie:t,cookieMinutes:n,cookieDomain:s,cookieOptions:i}=e;t&&typeof document<"u"&&O1.create(t,r,n,s,i)}},bW={name:"querystring",lookup(r){var n;let{lookupQuerystring:e}=r,t;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&((n=window.location.hash)==null?void 0:n.indexOf("?"))>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const o=s.substring(1).split("&");for(let a=0;a<o.length;a++){const c=o[a].indexOf("=");c>0&&o[a].substring(0,c)===e&&(t=o[a].substring(c+1))}}return t}};let xc=null;const P1=()=>{if(xc!==null)return xc;try{if(xc=typeof window<"u"&&window.localStorage!==null,!xc)return!1;const r="i18next.translate.boo";window.localStorage.setItem(r,"foo"),window.localStorage.removeItem(r)}catch{xc=!1}return xc};var EW={name:"localStorage",lookup(r){let{lookupLocalStorage:e}=r;if(e&&P1())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(r,e){let{lookupLocalStorage:t}=e;t&&P1()&&window.localStorage.setItem(t,r)}};let Rc=null;const x1=()=>{if(Rc!==null)return Rc;try{if(Rc=typeof window<"u"&&window.sessionStorage!==null,!Rc)return!1;const r="i18next.translate.boo";window.sessionStorage.setItem(r,"foo"),window.sessionStorage.removeItem(r)}catch{Rc=!1}return Rc};var vW={name:"sessionStorage",lookup(r){let{lookupSessionStorage:e}=r;if(e&&x1())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(r,e){let{lookupSessionStorage:t}=e;t&&x1()&&window.sessionStorage.setItem(t,r)}},AW={name:"navigator",lookup(r){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:n,language:s}=navigator;if(t)for(let i=0;i<t.length;i++)e.push(t[i]);n&&e.push(n),s&&e.push(s)}return e.length>0?e:void 0}},CW={name:"htmlTag",lookup(r){let{htmlTag:e}=r,t;const n=e||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(t=n.getAttribute("lang")),t}},_W={name:"path",lookup(r){var s;let{lookupFromPathIndex:e}=r;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?(s=t[typeof e=="number"?e:0])==null?void 0:s.replace("/",""):void 0}},IW={name:"subdomain",lookup(r){var s,i;let{lookupFromSubdomainIndex:e}=r;const t=typeof e=="number"?e+1:1,n=typeof window<"u"&&((i=(s=window.location)==null?void 0:s.hostname)==null?void 0:i.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(n)return n[t]}};let kS=!1;try{document.cookie,kS=!0}catch{}const DS=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];kS||DS.splice(1,1);const NW=()=>({order:DS,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:r=>r});class US{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=mW(t,this.options||{},NW()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=s=>s.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(wW),this.addDetector(bW),this.addDetector(EW),this.addDetector(vW),this.addDetector(AW),this.addDetector(CW),this.addDetector(_W),this.addDetector(IW)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(n=>{if(this.detectors[n]){let s=this.detectors[n].lookup(this.options);s&&typeof s=="string"&&(s=[s]),s&&(t=t.concat(s))}}),t=t.map(n=>this.options.convertDetectedLanguage(n)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(n=>{this.detectors[n]&&this.detectors[n].cacheUserLanguage(e,this.options)}))}}US.type="languageDetector";const SW={},TW={translation:SW},OW={en:TW},PW=["en"],xW={order:["querystring","localStorage","navigator","path"],lookupQuerystring:"lng",lookupLocalStorage:"lng",lookupCookie:"lng",caches:["localStorage","cookie"],excludeCacheFor:["cimode"]};yr.use(US).use(Gz).init({detection:xW,supportedLngs:PW,ns:["translation"],fallbackLng:"en",fallbackNS:"translation",resources:OW,debug:!1,react:{useSuspense:!0},keySeparator:!1,interpolation:{escapeValue:!1},saveMissing:!1,saveMissingTo:"all"});var RW=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Wm=Math.ceil,xn=Math.floor,zr="[BigNumber Error] ",R1=zr+"Number primitive has more than 15 significant digits: ",Qn=1e14,Re=14,k1=9007199254740991,Gm=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Wi=1e7,ln=1e9;function LS(r){var e,t,n,s=w.prototype={constructor:w,toString:null,valueOf:null},i=new w(1),o=20,a=4,c=-7,l=21,u=-1e7,h=1e7,d=!1,f=1,p=0,g={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},y="0123456789abcdefghijklmnopqrstuvwxyz",C=!0;function w(m,b){var N,_,S,k,P,v,A,T,x=this;if(!(x instanceof w))return new w(m,b);if(b==null){if(m&&m._isBigNumber===!0){x.s=m.s,!m.c||m.e>h?x.c=x.e=null:m.e<u?x.c=[x.e=0]:(x.e=m.e,x.c=m.c.slice());return}if((v=typeof m=="number")&&m*0==0){if(x.s=1/m<0?(m=-m,-1):1,m===~~m){for(k=0,P=m;P>=10;P/=10,k++);k>h?x.c=x.e=null:(x.e=k,x.c=[m]);return}T=String(m)}else{if(!RW.test(T=String(m)))return n(x,T,v);x.s=T.charCodeAt(0)==45?(T=T.slice(1),-1):1}(k=T.indexOf("."))>-1&&(T=T.replace(".","")),(P=T.search(/e/i))>0?(k<0&&(k=P),k+=+T.slice(P+1),T=T.substring(0,P)):k<0&&(k=T.length)}else{if(St(b,2,y.length,"Base"),b==10&&C)return x=new w(m),B(x,o+x.e+1,a);if(T=String(m),v=typeof m=="number"){if(m*0!=0)return n(x,T,v,b);if(x.s=1/m<0?(T=T.slice(1),-1):1,w.DEBUG&&T.replace(/^0\.0*|\./,"").length>15)throw Error(R1+m)}else x.s=T.charCodeAt(0)===45?(T=T.slice(1),-1):1;for(N=y.slice(0,b),k=P=0,A=T.length;P<A;P++)if(N.indexOf(_=T.charAt(P))<0){if(_=="."){if(P>k){k=A;continue}}else if(!S&&(T==T.toUpperCase()&&(T=T.toLowerCase())||T==T.toLowerCase()&&(T=T.toUpperCase()))){S=!0,P=-1,k=0;continue}return n(x,String(m),v,b)}v=!1,T=t(T,b,10,x.s),(k=T.indexOf("."))>-1?T=T.replace(".",""):k=T.length}for(P=0;T.charCodeAt(P)===48;P++);for(A=T.length;T.charCodeAt(--A)===48;);if(T=T.slice(P,++A)){if(A-=P,v&&w.DEBUG&&A>15&&(m>k1||m!==xn(m)))throw Error(R1+x.s*m);if((k=k-P-1)>h)x.c=x.e=null;else if(k<u)x.c=[x.e=0];else{if(x.e=k,x.c=[],P=(k+1)%Re,k<0&&(P+=Re),P<A){for(P&&x.c.push(+T.slice(0,P)),A-=Re;P<A;)x.c.push(+T.slice(P,P+=Re));P=Re-(T=T.slice(P)).length}else P-=A;for(;P--;T+="0");x.c.push(+T)}}else x.c=[x.e=0]}w.clone=LS,w.ROUND_UP=0,w.ROUND_DOWN=1,w.ROUND_CEIL=2,w.ROUND_FLOOR=3,w.ROUND_HALF_UP=4,w.ROUND_HALF_DOWN=5,w.ROUND_HALF_EVEN=6,w.ROUND_HALF_CEIL=7,w.ROUND_HALF_FLOOR=8,w.EUCLID=9,w.config=w.set=function(m){var b,N;if(m!=null)if(typeof m=="object"){if(m.hasOwnProperty(b="DECIMAL_PLACES")&&(N=m[b],St(N,0,ln,b),o=N),m.hasOwnProperty(b="ROUNDING_MODE")&&(N=m[b],St(N,0,8,b),a=N),m.hasOwnProperty(b="EXPONENTIAL_AT")&&(N=m[b],N&&N.pop?(St(N[0],-1e9,0,b),St(N[1],0,ln,b),c=N[0],l=N[1]):(St(N,-1e9,ln,b),c=-(l=N<0?-N:N))),m.hasOwnProperty(b="RANGE"))if(N=m[b],N&&N.pop)St(N[0],-1e9,-1,b),St(N[1],1,ln,b),u=N[0],h=N[1];else if(St(N,-1e9,ln,b),N)u=-(h=N<0?-N:N);else throw Error(zr+b+" cannot be zero: "+N);if(m.hasOwnProperty(b="CRYPTO"))if(N=m[b],N===!!N)if(N)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))d=N;else throw d=!N,Error(zr+"crypto unavailable");else d=N;else throw Error(zr+b+" not true or false: "+N);if(m.hasOwnProperty(b="MODULO_MODE")&&(N=m[b],St(N,0,9,b),f=N),m.hasOwnProperty(b="POW_PRECISION")&&(N=m[b],St(N,0,ln,b),p=N),m.hasOwnProperty(b="FORMAT"))if(N=m[b],typeof N=="object")g=N;else throw Error(zr+b+" not an object: "+N);if(m.hasOwnProperty(b="ALPHABET"))if(N=m[b],typeof N=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(N))C=N.slice(0,10)=="0123456789",y=N;else throw Error(zr+b+" invalid: "+N)}else throw Error(zr+"Object expected: "+m);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[c,l],RANGE:[u,h],CRYPTO:d,MODULO_MODE:f,POW_PRECISION:p,FORMAT:g,ALPHABET:y}},w.isBigNumber=function(m){if(!m||m._isBigNumber!==!0)return!1;if(!w.DEBUG)return!0;var b,N,_=m.c,S=m.e,k=m.s;e:if({}.toString.call(_)=="[object Array]"){if((k===1||k===-1)&&S>=-1e9&&S<=ln&&S===xn(S)){if(_[0]===0){if(S===0&&_.length===1)return!0;break e}if(b=(S+1)%Re,b<1&&(b+=Re),String(_[0]).length==b){for(b=0;b<_.length;b++)if(N=_[b],N<0||N>=Qn||N!==xn(N))break e;if(N!==0)return!0}}}else if(_===null&&S===null&&(k===null||k===1||k===-1))return!0;throw Error(zr+"Invalid BigNumber: "+m)},w.maximum=w.max=function(){return U(arguments,-1)},w.minimum=w.min=function(){return U(arguments,1)},w.random=function(){var m=9007199254740992,b=Math.random()*m&2097151?function(){return xn(Math.random()*m)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(N){var _,S,k,P,v,A=0,T=[],x=new w(i);if(N==null?N=o:St(N,0,ln),P=Wm(N/Re),d)if(crypto.getRandomValues){for(_=crypto.getRandomValues(new Uint32Array(P*=2));A<P;)v=_[A]*131072+(_[A+1]>>>11),v>=9e15?(S=crypto.getRandomValues(new Uint32Array(2)),_[A]=S[0],_[A+1]=S[1]):(T.push(v%1e14),A+=2);A=P/2}else if(crypto.randomBytes){for(_=crypto.randomBytes(P*=7);A<P;)v=(_[A]&31)*281474976710656+_[A+1]*1099511627776+_[A+2]*4294967296+_[A+3]*16777216+(_[A+4]<<16)+(_[A+5]<<8)+_[A+6],v>=9e15?crypto.randomBytes(7).copy(_,A):(T.push(v%1e14),A+=7);A=P/7}else throw d=!1,Error(zr+"crypto unavailable");if(!d)for(;A<P;)v=b(),v<9e15&&(T[A++]=v%1e14);for(P=T[--A],N%=Re,P&&N&&(v=Gm[Re-N],T[A]=xn(P/v)*v);T[A]===0;T.pop(),A--);if(A<0)T=[k=0];else{for(k=-1;T[0]===0;T.splice(0,1),k-=Re);for(A=1,v=T[0];v>=10;v/=10,A++);A<Re&&(k-=Re-A)}return x.e=k,x.c=T,x}}(),w.sum=function(){for(var m=1,b=arguments,N=new w(b[0]);m<b.length;)N=N.plus(b[m++]);return N},t=function(){var m="0123456789";function b(N,_,S,k){for(var P,v=[0],A,T=0,x=N.length;T<x;){for(A=v.length;A--;v[A]*=_);for(v[0]+=k.indexOf(N.charAt(T++)),P=0;P<v.length;P++)v[P]>S-1&&(v[P+1]==null&&(v[P+1]=0),v[P+1]+=v[P]/S|0,v[P]%=S)}return v.reverse()}return function(N,_,S,k,P){var v,A,T,x,R,j,q,z,G=N.indexOf("."),Q=o,Y=a;for(G>=0&&(x=p,p=0,N=N.replace(".",""),z=new w(_),j=z.pow(N.length-G),p=x,z.c=b(ni(Pn(j.c),j.e,"0"),10,S,m),z.e=z.c.length),q=b(N,_,S,P?(v=y,m):(v=m,y)),T=x=q.length;q[--x]==0;q.pop());if(!q[0])return v.charAt(0);if(G<0?--T:(j.c=q,j.e=T,j.s=k,j=e(j,z,Q,Y,S),q=j.c,R=j.r,T=j.e),A=T+Q+1,G=q[A],x=S/2,R=R||A<0||q[A+1]!=null,R=Y<4?(G!=null||R)&&(Y==0||Y==(j.s<0?3:2)):G>x||G==x&&(Y==4||R||Y==6&&q[A-1]&1||Y==(j.s<0?8:7)),A<1||!q[0])N=R?ni(v.charAt(1),-Q,v.charAt(0)):v.charAt(0);else{if(q.length=A,R)for(--S;++q[--A]>S;)q[A]=0,A||(++T,q=[1].concat(q));for(x=q.length;!q[--x];);for(G=0,N="";G<=x;N+=v.charAt(q[G++]));N=ni(N,T,v.charAt(0))}return N}}(),e=function(){function m(_,S,k){var P,v,A,T,x=0,R=_.length,j=S%Wi,q=S/Wi|0;for(_=_.slice();R--;)A=_[R]%Wi,T=_[R]/Wi|0,P=q*A+T*j,v=j*A+P%Wi*Wi+x,x=(v/k|0)+(P/Wi|0)+q*T,_[R]=v%k;return x&&(_=[x].concat(_)),_}function b(_,S,k,P){var v,A;if(k!=P)A=k>P?1:-1;else for(v=A=0;v<k;v++)if(_[v]!=S[v]){A=_[v]>S[v]?1:-1;break}return A}function N(_,S,k,P){for(var v=0;k--;)_[k]-=v,v=_[k]<S[k]?1:0,_[k]=v*P+_[k]-S[k];for(;!_[0]&&_.length>1;_.splice(0,1));}return function(_,S,k,P,v){var A,T,x,R,j,q,z,G,Q,Y,ne,ie,we,be,Ve,Le,je,ye=_.s==S.s?1:-1,pe=_.c,Ne=S.c;if(!pe||!pe[0]||!Ne||!Ne[0])return new w(!_.s||!S.s||(pe?Ne&&pe[0]==Ne[0]:!Ne)?NaN:pe&&pe[0]==0||!Ne?ye*0:ye/0);for(G=new w(ye),Q=G.c=[],T=_.e-S.e,ye=k+T+1,v||(v=Qn,T=Rn(_.e/Re)-Rn(S.e/Re),ye=ye/Re|0),x=0;Ne[x]==(pe[x]||0);x++);if(Ne[x]>(pe[x]||0)&&T--,ye<0)Q.push(1),R=!0;else{for(be=pe.length,Le=Ne.length,x=0,ye+=2,j=xn(v/(Ne[0]+1)),j>1&&(Ne=m(Ne,j,v),pe=m(pe,j,v),Le=Ne.length,be=pe.length),we=Le,Y=pe.slice(0,Le),ne=Y.length;ne<Le;Y[ne++]=0);je=Ne.slice(),je=[0].concat(je),Ve=Ne[0],Ne[1]>=v/2&&Ve++;do{if(j=0,A=b(Ne,Y,Le,ne),A<0){if(ie=Y[0],Le!=ne&&(ie=ie*v+(Y[1]||0)),j=xn(ie/Ve),j>1)for(j>=v&&(j=v-1),q=m(Ne,j,v),z=q.length,ne=Y.length;b(q,Y,z,ne)==1;)j--,N(q,Le<z?je:Ne,z,v),z=q.length,A=1;else j==0&&(A=j=1),q=Ne.slice(),z=q.length;if(z<ne&&(q=[0].concat(q)),N(Y,q,ne,v),ne=Y.length,A==-1)for(;b(Ne,Y,Le,ne)<1;)j++,N(Y,Le<ne?je:Ne,ne,v),ne=Y.length}else A===0&&(j++,Y=[0]);Q[x++]=j,Y[0]?Y[ne++]=pe[we]||0:(Y=[pe[we]],ne=1)}while((we++<be||Y[0]!=null)&&ye--);R=Y[0]!=null,Q[0]||Q.splice(0,1)}if(v==Qn){for(x=1,ye=Q[0];ye>=10;ye/=10,x++);B(G,k+(G.e=x+T*Re-1)+1,P,R)}else G.e=T,G.r=+R;return G}}();function I(m,b,N,_){var S,k,P,v,A;if(N==null?N=a:St(N,0,8),!m.c)return m.toString();if(S=m.c[0],P=m.e,b==null)A=Pn(m.c),A=_==1||_==2&&(P<=c||P>=l)?xf(A,P):ni(A,P,"0");else if(m=B(new w(m),b,N),k=m.e,A=Pn(m.c),v=A.length,_==1||_==2&&(b<=k||k<=c)){for(;v<b;A+="0",v++);A=xf(A,k)}else if(b-=P,A=ni(A,k,"0"),k+1>v){if(--b>0)for(A+=".";b--;A+="0");}else if(b+=k-v,b>0)for(k+1==v&&(A+=".");b--;A+="0");return m.s<0&&S?"-"+A:A}function U(m,b){for(var N,_,S=1,k=new w(m[0]);S<m.length;S++)_=new w(m[S]),(!_.s||(N=Mo(k,_))===b||N===0&&k.s===b)&&(k=_);return k}function M(m,b,N){for(var _=1,S=b.length;!b[--S];b.pop());for(S=b[0];S>=10;S/=10,_++);return(N=_+N*Re-1)>h?m.c=m.e=null:N<u?m.c=[m.e=0]:(m.e=N,m.c=b),m}n=function(){var m=/^(-?)0([xbo])(?=\w[\w.]*$)/i,b=/^([^.]+)\.$/,N=/^\.([^.]+)$/,_=/^-?(Infinity|NaN)$/,S=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(k,P,v,A){var T,x=v?P:P.replace(S,"");if(_.test(x))k.s=isNaN(x)?null:x<0?-1:1;else{if(!v&&(x=x.replace(m,function(R,j,q){return T=(q=q.toLowerCase())=="x"?16:q=="b"?2:8,!A||A==T?j:R}),A&&(T=A,x=x.replace(b,"$1").replace(N,"0.$1")),P!=x))return new w(x,T);if(w.DEBUG)throw Error(zr+"Not a"+(A?" base "+A:"")+" number: "+P);k.s=null}k.c=k.e=null}}();function B(m,b,N,_){var S,k,P,v,A,T,x,R=m.c,j=Gm;if(R){e:{for(S=1,v=R[0];v>=10;v/=10,S++);if(k=b-S,k<0)k+=Re,P=b,A=R[T=0],x=xn(A/j[S-P-1]%10);else if(T=Wm((k+1)/Re),T>=R.length)if(_){for(;R.length<=T;R.push(0));A=x=0,S=1,k%=Re,P=k-Re+1}else break e;else{for(A=v=R[T],S=1;v>=10;v/=10,S++);k%=Re,P=k-Re+S,x=P<0?0:xn(A/j[S-P-1]%10)}if(_=_||b<0||R[T+1]!=null||(P<0?A:A%j[S-P-1]),_=N<4?(x||_)&&(N==0||N==(m.s<0?3:2)):x>5||x==5&&(N==4||_||N==6&&(k>0?P>0?A/j[S-P]:0:R[T-1])%10&1||N==(m.s<0?8:7)),b<1||!R[0])return R.length=0,_?(b-=m.e+1,R[0]=j[(Re-b%Re)%Re],m.e=-b||0):R[0]=m.e=0,m;if(k==0?(R.length=T,v=1,T--):(R.length=T+1,v=j[Re-k],R[T]=P>0?xn(A/j[S-P]%j[P])*v:0),_)for(;;)if(T==0){for(k=1,P=R[0];P>=10;P/=10,k++);for(P=R[0]+=v,v=1;P>=10;P/=10,v++);k!=v&&(m.e++,R[0]==Qn&&(R[0]=1));break}else{if(R[T]+=v,R[T]!=Qn)break;R[T--]=0,v=1}for(k=R.length;R[--k]===0;R.pop());}m.e>h?m.c=m.e=null:m.e<u&&(m.c=[m.e=0])}return m}function L(m){var b,N=m.e;return N===null?m.toString():(b=Pn(m.c),b=N<=c||N>=l?xf(b,N):ni(b,N,"0"),m.s<0?"-"+b:b)}return s.absoluteValue=s.abs=function(){var m=new w(this);return m.s<0&&(m.s=1),m},s.comparedTo=function(m,b){return Mo(this,new w(m,b))},s.decimalPlaces=s.dp=function(m,b){var N,_,S,k=this;if(m!=null)return St(m,0,ln),b==null?b=a:St(b,0,8),B(new w(k),m+k.e+1,b);if(!(N=k.c))return null;if(_=((S=N.length-1)-Rn(this.e/Re))*Re,S=N[S])for(;S%10==0;S/=10,_--);return _<0&&(_=0),_},s.dividedBy=s.div=function(m,b){return e(this,new w(m,b),o,a)},s.dividedToIntegerBy=s.idiv=function(m,b){return e(this,new w(m,b),0,1)},s.exponentiatedBy=s.pow=function(m,b){var N,_,S,k,P,v,A,T,x,R=this;if(m=new w(m),m.c&&!m.isInteger())throw Error(zr+"Exponent not an integer: "+L(m));if(b!=null&&(b=new w(b)),v=m.e>14,!R.c||!R.c[0]||R.c[0]==1&&!R.e&&R.c.length==1||!m.c||!m.c[0])return x=new w(Math.pow(+L(R),v?m.s*(2-Pf(m)):+L(m))),b?x.mod(b):x;if(A=m.s<0,b){if(b.c?!b.c[0]:!b.s)return new w(NaN);_=!A&&R.isInteger()&&b.isInteger(),_&&(R=R.mod(b))}else{if(m.e>9&&(R.e>0||R.e<-1||(R.e==0?R.c[0]>1||v&&R.c[1]>=24e7:R.c[0]<8e13||v&&R.c[0]<=9999975e7)))return k=R.s<0&&Pf(m)?-0:0,R.e>-1&&(k=1/k),new w(A?1/k:k);p&&(k=Wm(p/Re+2))}for(v?(N=new w(.5),A&&(m.s=1),T=Pf(m)):(S=Math.abs(+L(m)),T=S%2),x=new w(i);;){if(T){if(x=x.times(R),!x.c)break;k?x.c.length>k&&(x.c.length=k):_&&(x=x.mod(b))}if(S){if(S=xn(S/2),S===0)break;T=S%2}else if(m=m.times(N),B(m,m.e+1,1),m.e>14)T=Pf(m);else{if(S=+L(m),S===0)break;T=S%2}R=R.times(R),k?R.c&&R.c.length>k&&(R.c.length=k):_&&(R=R.mod(b))}return _?x:(A&&(x=i.div(x)),b?x.mod(b):k?B(x,p,a,P):x)},s.integerValue=function(m){var b=new w(this);return m==null?m=a:St(m,0,8),B(b,b.e+1,m)},s.isEqualTo=s.eq=function(m,b){return Mo(this,new w(m,b))===0},s.isFinite=function(){return!!this.c},s.isGreaterThan=s.gt=function(m,b){return Mo(this,new w(m,b))>0},s.isGreaterThanOrEqualTo=s.gte=function(m,b){return(b=Mo(this,new w(m,b)))===1||b===0},s.isInteger=function(){return!!this.c&&Rn(this.e/Re)>this.c.length-2},s.isLessThan=s.lt=function(m,b){return Mo(this,new w(m,b))<0},s.isLessThanOrEqualTo=s.lte=function(m,b){return(b=Mo(this,new w(m,b)))===-1||b===0},s.isNaN=function(){return!this.s},s.isNegative=function(){return this.s<0},s.isPositive=function(){return this.s>0},s.isZero=function(){return!!this.c&&this.c[0]==0},s.minus=function(m,b){var N,_,S,k,P=this,v=P.s;if(m=new w(m,b),b=m.s,!v||!b)return new w(NaN);if(v!=b)return m.s=-b,P.plus(m);var A=P.e/Re,T=m.e/Re,x=P.c,R=m.c;if(!A||!T){if(!x||!R)return x?(m.s=-b,m):new w(R?P:NaN);if(!x[0]||!R[0])return R[0]?(m.s=-b,m):new w(x[0]?P:a==3?-0:0)}if(A=Rn(A),T=Rn(T),x=x.slice(),v=A-T){for((k=v<0)?(v=-v,S=x):(T=A,S=R),S.reverse(),b=v;b--;S.push(0));S.reverse()}else for(_=(k=(v=x.length)<(b=R.length))?v:b,v=b=0;b<_;b++)if(x[b]!=R[b]){k=x[b]<R[b];break}if(k&&(S=x,x=R,R=S,m.s=-m.s),b=(_=R.length)-(N=x.length),b>0)for(;b--;x[N++]=0);for(b=Qn-1;_>v;){if(x[--_]<R[_]){for(N=_;N&&!x[--N];x[N]=b);--x[N],x[_]+=Qn}x[_]-=R[_]}for(;x[0]==0;x.splice(0,1),--T);return x[0]?M(m,x,T):(m.s=a==3?-1:1,m.c=[m.e=0],m)},s.modulo=s.mod=function(m,b){var N,_,S=this;return m=new w(m,b),!S.c||!m.s||m.c&&!m.c[0]?new w(NaN):!m.c||S.c&&!S.c[0]?new w(S):(f==9?(_=m.s,m.s=1,N=e(S,m,0,3),m.s=_,N.s*=_):N=e(S,m,0,f),m=S.minus(N.times(m)),!m.c[0]&&f==1&&(m.s=S.s),m)},s.multipliedBy=s.times=function(m,b){var N,_,S,k,P,v,A,T,x,R,j,q,z,G,Q,Y=this,ne=Y.c,ie=(m=new w(m,b)).c;if(!ne||!ie||!ne[0]||!ie[0])return!Y.s||!m.s||ne&&!ne[0]&&!ie||ie&&!ie[0]&&!ne?m.c=m.e=m.s=null:(m.s*=Y.s,!ne||!ie?m.c=m.e=null:(m.c=[0],m.e=0)),m;for(_=Rn(Y.e/Re)+Rn(m.e/Re),m.s*=Y.s,A=ne.length,R=ie.length,A<R&&(z=ne,ne=ie,ie=z,S=A,A=R,R=S),S=A+R,z=[];S--;z.push(0));for(G=Qn,Q=Wi,S=R;--S>=0;){for(N=0,j=ie[S]%Q,q=ie[S]/Q|0,P=A,k=S+P;k>S;)T=ne[--P]%Q,x=ne[P]/Q|0,v=q*T+x*j,T=j*T+v%Q*Q+z[k]+N,N=(T/G|0)+(v/Q|0)+q*x,z[k--]=T%G;z[k]=N}return N?++_:z.splice(0,1),M(m,z,_)},s.negated=function(){var m=new w(this);return m.s=-m.s||null,m},s.plus=function(m,b){var N,_=this,S=_.s;if(m=new w(m,b),b=m.s,!S||!b)return new w(NaN);if(S!=b)return m.s=-b,_.minus(m);var k=_.e/Re,P=m.e/Re,v=_.c,A=m.c;if(!k||!P){if(!v||!A)return new w(S/0);if(!v[0]||!A[0])return A[0]?m:new w(v[0]?_:S*0)}if(k=Rn(k),P=Rn(P),v=v.slice(),S=k-P){for(S>0?(P=k,N=A):(S=-S,N=v),N.reverse();S--;N.push(0));N.reverse()}for(S=v.length,b=A.length,S-b<0&&(N=A,A=v,v=N,b=S),S=0;b;)S=(v[--b]=v[b]+A[b]+S)/Qn|0,v[b]=Qn===v[b]?0:v[b]%Qn;return S&&(v=[S].concat(v),++P),M(m,v,P)},s.precision=s.sd=function(m,b){var N,_,S,k=this;if(m!=null&&m!==!!m)return St(m,1,ln),b==null?b=a:St(b,0,8),B(new w(k),m,b);if(!(N=k.c))return null;if(S=N.length-1,_=S*Re+1,S=N[S]){for(;S%10==0;S/=10,_--);for(S=N[0];S>=10;S/=10,_++);}return m&&k.e+1>_&&(_=k.e+1),_},s.shiftedBy=function(m){return St(m,-9007199254740991,k1),this.times("1e"+m)},s.squareRoot=s.sqrt=function(){var m,b,N,_,S,k=this,P=k.c,v=k.s,A=k.e,T=o+4,x=new w("0.5");if(v!==1||!P||!P[0])return new w(!v||v<0&&(!P||P[0])?NaN:P?k:1/0);if(v=Math.sqrt(+L(k)),v==0||v==1/0?(b=Pn(P),(b.length+A)%2==0&&(b+="0"),v=Math.sqrt(+b),A=Rn((A+1)/2)-(A<0||A%2),v==1/0?b="5e"+A:(b=v.toExponential(),b=b.slice(0,b.indexOf("e")+1)+A),N=new w(b)):N=new w(v+""),N.c[0]){for(A=N.e,v=A+T,v<3&&(v=0);;)if(S=N,N=x.times(S.plus(e(k,S,T,1))),Pn(S.c).slice(0,v)===(b=Pn(N.c)).slice(0,v))if(N.e<A&&--v,b=b.slice(v-3,v+1),b=="9999"||!_&&b=="4999"){if(!_&&(B(S,S.e+o+2,0),S.times(S).eq(k))){N=S;break}T+=4,v+=4,_=1}else{(!+b||!+b.slice(1)&&b.charAt(0)=="5")&&(B(N,N.e+o+2,1),m=!N.times(N).eq(k));break}}return B(N,N.e+o+1,a,m)},s.toExponential=function(m,b){return m!=null&&(St(m,0,ln),m++),I(this,m,b,1)},s.toFixed=function(m,b){return m!=null&&(St(m,0,ln),m=m+this.e+1),I(this,m,b)},s.toFormat=function(m,b,N){var _,S=this;if(N==null)m!=null&&b&&typeof b=="object"?(N=b,b=null):m&&typeof m=="object"?(N=m,m=b=null):N=g;else if(typeof N!="object")throw Error(zr+"Argument not an object: "+N);if(_=S.toFixed(m,b),S.c){var k,P=_.split("."),v=+N.groupSize,A=+N.secondaryGroupSize,T=N.groupSeparator||"",x=P[0],R=P[1],j=S.s<0,q=j?x.slice(1):x,z=q.length;if(A&&(k=v,v=A,A=k,z-=k),v>0&&z>0){for(k=z%v||v,x=q.substr(0,k);k<z;k+=v)x+=T+q.substr(k,v);A>0&&(x+=T+q.slice(k)),j&&(x="-"+x)}_=R?x+(N.decimalSeparator||"")+((A=+N.fractionGroupSize)?R.replace(new RegExp("\\d{"+A+"}\\B","g"),"$&"+(N.fractionGroupSeparator||"")):R):x}return(N.prefix||"")+_+(N.suffix||"")},s.toFraction=function(m){var b,N,_,S,k,P,v,A,T,x,R,j,q=this,z=q.c;if(m!=null&&(v=new w(m),!v.isInteger()&&(v.c||v.s!==1)||v.lt(i)))throw Error(zr+"Argument "+(v.isInteger()?"out of range: ":"not an integer: ")+L(v));if(!z)return new w(q);for(b=new w(i),T=N=new w(i),_=A=new w(i),j=Pn(z),k=b.e=j.length-q.e-1,b.c[0]=Gm[(P=k%Re)<0?Re+P:P],m=!m||v.comparedTo(b)>0?k>0?b:T:v,P=h,h=1/0,v=new w(j),A.c[0]=0;x=e(v,b,0,1),S=N.plus(x.times(_)),S.comparedTo(m)!=1;)N=_,_=S,T=A.plus(x.times(S=T)),A=S,b=v.minus(x.times(S=b)),v=S;return S=e(m.minus(N),_,0,1),A=A.plus(S.times(T)),N=N.plus(S.times(_)),A.s=T.s=q.s,k=k*2,R=e(T,_,k,a).minus(q).abs().comparedTo(e(A,N,k,a).minus(q).abs())<1?[T,_]:[A,N],h=P,R},s.toNumber=function(){return+L(this)},s.toPrecision=function(m,b){return m!=null&&St(m,1,ln),I(this,m,b,2)},s.toString=function(m){var b,N=this,_=N.s,S=N.e;return S===null?_?(b="Infinity",_<0&&(b="-"+b)):b="NaN":(m==null?b=S<=c||S>=l?xf(Pn(N.c),S):ni(Pn(N.c),S,"0"):m===10&&C?(N=B(new w(N),o+S+1,a),b=ni(Pn(N.c),N.e,"0")):(St(m,2,y.length,"Base"),b=t(ni(Pn(N.c),S,"0"),10,m,_,!0)),_<0&&N.c[0]&&(b="-"+b)),b},s.valueOf=s.toJSON=function(){return L(this)},s._isBigNumber=!0,s[Symbol.toStringTag]="BigNumber",s[Symbol.for("nodejs.util.inspect.custom")]=s.valueOf,r!=null&&w.set(r),w}function Rn(r){var e=r|0;return r>0||r===e?e:e-1}function Pn(r){for(var e,t,n=1,s=r.length,i=r[0]+"";n<s;){for(e=r[n++]+"",t=Re-e.length;t--;e="0"+e);i+=e}for(s=i.length;i.charCodeAt(--s)===48;);return i.slice(0,s+1||1)}function Mo(r,e){var t,n,s=r.c,i=e.c,o=r.s,a=e.s,c=r.e,l=e.e;if(!o||!a)return null;if(t=s&&!s[0],n=i&&!i[0],t||n)return t?n?0:-a:o;if(o!=a)return o;if(t=o<0,n=c==l,!s||!i)return n?0:!s^t?1:-1;if(!n)return c>l^t?1:-1;for(a=(c=s.length)<(l=i.length)?c:l,o=0;o<a;o++)if(s[o]!=i[o])return s[o]>i[o]^t?1:-1;return c==l?0:c>l^t?1:-1}function St(r,e,t,n){if(r<e||r>t||r!==xn(r))throw Error(zr+(n||"Argument")+(typeof r=="number"?r<e||r>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(r))}function Pf(r){var e=r.c.length-1;return Rn(r.e/Re)==e&&r.c[e]%2!=0}function xf(r,e){return(r.length>1?r.charAt(0)+"."+r.slice(1):r)+(e<0?"e":"e+")+e}function ni(r,e,t){var n,s;if(e<0){for(s=t+".";++e;s+=t);r=s+r}else if(n=r.length,++e>n){for(s=t,e-=n;--e;s+=t);r+=s}else e<n&&(r=r.slice(0,e)+"."+r.slice(e));return r}var D1=LS();D1.set({DECIMAL_PLACES:18,ROUNDING_MODE:D1.ROUND_DOWN});function kW({children:r}){const[e,t]=st.useState(!1);return st.useEffect(()=>{LT.init(),t(!0)},[]),e?Yn.jsxs(Yn.Fragment,{children:[Yn.jsx(RT,{rtl:!1,newestOnTop:!0,position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:!0,theme:"colored"}),Yn.jsx(Jz,{i18n:yr,children:Yn.jsx(st.Suspense,{fallback:Yn.jsx(Km,{name:".."}),children:Yn.jsx(jz,{children:Yn.jsx(QS,{children:Yn.jsx(YS,{children:r})})})})})]}):Yn.jsx(Km,{name:".."})}const TG=Object.freeze(Object.defineProperty({__proto__:null,default:kW},Symbol.toStringTag,{value:"Module"}));export{de as A,Ie as B,De as C,II as E,Lt as M,Qd as N,X as O,TG as P,at as R,ur as S,Ar as T,Ht as W,Cr as a,ee as b,Se as c,$ as d,mt as e,bn as f,At as g,gt as h,jj as i,he as j,zv as k,G1 as l,eh as m,qv as n,Mr as o,Pt as p,MW as q,Te as r,tn as s,$W as t,VF as u,cs as v,zy as w,Hf as x,oh as y};
